(function(){'use strict';/* deploy by dev
 - Deploy time: 2025/12/21 15:54:23
*/
var dr=class{entries={};size=0;add(f){let r=this.entries[f];return this.entries[f]=true,r?false:(this.size++,true)}addAll(f){let r=this.size;for(var v=0,c=f.length;v<c;v++)this.add(f[v]);return r!=this.size}contains(f){return this.entries[f]}clear(){this.entries={},this.size=0;}},Ge=class T{r;g;b;a;static WHITE=new T(1,1,1,1);static RED=new T(1,0,0,1);static GREEN=new T(0,1,0,1);static BLUE=new T(0,0,1,1);static MAGENTA=new T(1,0,1,1);constructor(f=0,r=0,v=0,c=0){this.r=f,this.g=r,this.b=v,this.a=c;}set(f,r,v,c){return this.r=f,this.g=r,this.b=v,this.a=c,this.clamp()}setFromColor(f){return this.r=f.r,this.g=f.g,this.b=f.b,this.a=f.a,this}setFromString(f){return f=f.charAt(0)=="#"?f.substr(1):f,this.r=parseInt(f.substr(0,2),16)/255,this.g=parseInt(f.substr(2,2),16)/255,this.b=parseInt(f.substr(4,2),16)/255,this.a=f.length!=8?1:parseInt(f.substr(6,2),16)/255,this}add(f,r,v,c){return this.r+=f,this.g+=r,this.b+=v,this.a+=c,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(f,r){f.r=((r&4278190080)>>>24)/255,f.g=((r&16711680)>>>16)/255,f.b=((r&65280)>>>8)/255,f.a=(r&255)/255;}static rgb888ToColor(f,r){f.r=((r&16711680)>>>16)/255,f.g=((r&65280)>>>8)/255,f.b=(r&255)/255;}toRgb888(){let f=r=>("0"+(r*255).toString(16)).slice(-2);return +("0x"+f(this.r)+f(this.g)+f(this.b))}static fromString(f,r=new T){return r.setFromString(f)}},fs=class T{static PI=3.1415927;static PI2=T.PI*2;static invPI2=1/T.PI2;static radiansToDegrees=180/T.PI;static radDeg=T.radiansToDegrees;static degreesToRadians=T.PI/180;static degRad=T.degreesToRadians;static clamp(f,r,v){return f<r?r:f>v?v:f}static cosDeg(f){return Math.cos(f*T.degRad)}static sinDeg(f){return Math.sin(f*T.degRad)}static atan2Deg(f,r){return Math.atan2(f,r)*T.degRad}static signum(f){return f>0?1:f<0?-1:0}static toInt(f){return f>0?Math.floor(f):Math.ceil(f)}static cbrt(f){let r=Math.pow(Math.abs(f),.3333333333333333);return f<0?-r:r}static randomTriangular(f,r){return T.randomTriangularWith(f,r,(f+r)*.5)}static randomTriangularWith(f,r,v){let c=Math.random(),n=r-f;return c<=(v-f)/n?f+Math.sqrt(c*n*(v-f)):r-Math.sqrt((1-c)*n*(r-v))}static isPowerOfTwo(f){return f&&(f&f-1)===0}};var Ne=class T{static SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";static arrayCopy(f,r,v,c,n){for(let u=r,d=c;u<r+n;u++,d++)v[d]=f[u];}static arrayFill(f,r,v,c){for(let n=r;n<v;n++)f[n]=c;}static setArraySize(f,r,v=0){let c=f.length;if(c==r)return f;if(f.length=r,c<r)for(let n=c;n<r;n++)f[n]=v;return f}static ensureArrayCapacity(f,r,v=0){return f.length>=r?f:T.setArraySize(f,r,v)}static newArray(f,r){let v=new Array(f);for(let c=0;c<f;c++)v[c]=r;return v}static newFloatArray(f){if(T.SUPPORTS_TYPED_ARRAYS)return new Float32Array(f);{let r=new Array(f);for(let v=0;v<r.length;v++)r[v]=0;return r}}static newShortArray(f){if(T.SUPPORTS_TYPED_ARRAYS)return new Int16Array(f);{let r=new Array(f);for(let v=0;v<r.length;v++)r[v]=0;return r}}static toFloatArray(f){return T.SUPPORTS_TYPED_ARRAYS?new Float32Array(f):f}static toSinglePrecision(f){return T.SUPPORTS_TYPED_ARRAYS?Math.fround(f):f}static webkit602BugfixHelper(f,r){}static contains(f,r,v=true){for(var c=0;c<f.length;c++)if(f[c]==r)return  true;return  false}static enumValue(f,r){return f[r[0].toUpperCase()+r.slice(1)]}};var Oi=class{items=new Array;instantiator;constructor(f){this.instantiator=f;}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(f){f.reset&&f.reset(),this.items.push(f);}freeAll(f){for(let r=0;r<f.length;r++)this.free(f[r]);}clear(){this.items.length=0;}};var si;(function(T){T[T.hold=0]="hold",T[T.once=1]="once",T[T.loop=2]="loop",T[T.pingpong=3]="pingpong",T[T.onceReverse=4]="onceReverse",T[T.loopReverse=5]="loopReverse",T[T.pingpongReverse=6]="pingpongReverse";})(si||(si={}));[si.hold,si.once,si.loop,si.pingpong,si.onceReverse,si.loopReverse,si.pingpongReverse];var ur=class{name;timelines=[];timelineIds=new dr;duration;constructor(f,r,v){if(!f)throw new Error("name cannot be null.");this.name=f,this.setTimelines(r),this.duration=v;}setTimelines(f){if(!f)throw new Error("timelines cannot be null.");this.timelines=f,this.timelineIds.clear();for(var r=0;r<f.length;r++)this.timelineIds.addAll(f[r].getPropertyIds());}hasTimeline(f){for(let r=0;r<f.length;r++)if(this.timelineIds.contains(f[r]))return  true;return  false}apply(f,r,v,c,n,u,d,M){if(!f)throw new Error("skeleton cannot be null.");c&&this.duration!=0&&(v%=this.duration,r>0&&(r%=this.duration));let S=this.timelines;for(let V=0,I=S.length;V<I;V++)S[V].apply(f,r,v,n,u,d,M);}},Ue;(function(T){T[T.setup=0]="setup",T[T.first=1]="first",T[T.replace=2]="replace",T[T.add=3]="add";})(Ue||(Ue={}));var _s;(function(T){T[T.mixIn=0]="mixIn",T[T.mixOut=1]="mixOut";})(_s||(_s={}));var Ur={rotate:0,attachment:11,event:13,drawOrder:14},Os=class{propertyIds;frames;constructor(f,r){this.propertyIds=r,this.frames=Ne.newFloatArray(f*this.getFrameEntries());}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(f,r){let v=f.length;for(let c=1;c<v;c++)if(f[c]>r)return c-1;return v-1}static search(f,r,v){let c=f.length;for(let n=v;n<c;n+=v)if(f[n]>r)return n-v;return c-v}},Dn=class extends Os{curves;constructor(f,r,v){super(f,v),this.curves=Ne.newFloatArray(f+r*18),this.curves[f-1]=1;}setLinear(f){this.curves[f]=0;}setStepped(f){this.curves[f]=1;}shrink(f){let r=this.getFrameCount()+f*18;if(this.curves.length>r){let v=Ne.newFloatArray(r);Ne.arrayCopy(this.curves,0,v,0,r),this.curves=v;}}setBezier(f,r,v,c,n,u,d,M,S,V,I){let D=this.curves,k=this.getFrameCount()+f*18;v==0&&(D[r]=2+k);let E=(c-u*2+M)*.03,X=(n-d*2+S)*.03,z=((u-M)*3-c+V)*.006,Q=((d-S)*3-n+I)*.006,st=E*2+z,ut=X*2+Q,nt=(u-c)*.3+E+z*.16666667,ot=(d-n)*.3+X+Q*.16666667,it=c+nt,W=n+ot;for(let et=k+18;k<et;k+=2)D[k]=it,D[k+1]=W,nt+=st,ot+=ut,st+=z,ut+=Q,it+=nt,W+=ot;}getBezierValue(f,r,v,c){let n=this.curves;if(n[c]>f){let S=this.frames[r],V=this.frames[r+v];return V+(f-S)/(n[c]-S)*(n[c+1]-V)}let u=c+18;for(c+=2;c<u;c+=2)if(n[c]>=f){let S=n[c-2],V=n[c-1];return V+(f-S)/(n[c]-S)*(n[c+1]-V)}r+=this.getFrameEntries();let d=n[u-2],M=n[u-1];return M+(f-d)/(this.frames[r]-d)*(this.frames[r+v]-M)}},On=class extends Dn{constructor(f,r,v){super(f,r,[v]);}getFrameEntries(){return 2}setFrame(f,r,v){f<<=1,this.frames[f]=r,this.frames[f+1]=v;}getCurveValue(f){let r=this.frames,v=r.length-2;for(let n=2;n<=v;n+=2)if(r[n]>f){v=n-2;break}let c=this.curves[v>>1];switch(c){case 0:let n=r[v],u=r[v+1];return u+(f-n)/(r[v+2]-n)*(r[v+2+1]-u);case 1:return r[v+1]}return this.getBezierValue(f,v,1,c-2)}getRelativeValue(f,r,v,c,n){if(f<this.frames[0]){switch(v){case Ue.setup:return n;case Ue.first:return c+(n-c)*r}return c}let u=this.getCurveValue(f);switch(v){case Ue.setup:return n+u*r;case Ue.first:case Ue.replace:u+=n-c;}return c+u*r}getAbsoluteValue(f,r,v,c,n){if(f<this.frames[0]){switch(v){case Ue.setup:return n;case Ue.first:return c+(n-c)*r}return c}let u=this.getCurveValue(f);return v==Ue.setup?n+(u-n)*r:c+(u-c)*r}getAbsoluteValue2(f,r,v,c,n,u){if(f<this.frames[0]){switch(v){case Ue.setup:return n;case Ue.first:return c+(n-c)*r}return c}return v==Ue.setup?n+(u-n)*r:c+(u-c)*r}getScaleValue(f,r,v,c,n,u){let d=this.frames;if(f<d[0]){switch(v){case Ue.setup:return u;case Ue.first:return n+(u-n)*r}return n}let M=this.getCurveValue(f)*u;if(r==1)return v==Ue.add?n+M-u:M;if(c==_s.mixOut)switch(v){case Ue.setup:return u+(Math.abs(M)*fs.signum(u)-u)*r;case Ue.first:case Ue.replace:return n+(Math.abs(M)*fs.signum(n)-n)*r}else {let S=0;switch(v){case Ue.setup:return S=Math.abs(u)*fs.signum(M),S+(M-S)*r;case Ue.first:case Ue.replace:return S=Math.abs(n)*fs.signum(M),S+(M-S)*r}}return n+(M-u)*r}};var Ni=class extends On{boneIndex=0;constructor(f,r,v){super(f,r,Ur.rotate+"|"+v),this.boneIndex=v;}apply(f,r,v,c,n,u,d){let M=f.bones[this.boneIndex];M.active&&(M.rotation=this.getRelativeValue(v,n,u,M.rotation,M.data.rotation));}};var ui=class extends Os{slotIndex=0;attachmentNames;constructor(f,r){super(f,[Ur.attachment+"|"+r]),this.slotIndex=r,this.attachmentNames=new Array(f);}getFrameCount(){return this.frames.length}setFrame(f,r,v){this.frames[f]=r,this.attachmentNames[f]=v;}apply(f,r,v,c,n,u,d){let M=f.slots[this.slotIndex];if(M.bone.active){if(d==_s.mixOut){u==Ue.setup&&this.setAttachment(f,M,M.data.attachmentName);return}if(v<this.frames[0]){(u==Ue.setup||u==Ue.first)&&this.setAttachment(f,M,M.data.attachmentName);return}this.setAttachment(f,M,this.attachmentNames[Os.search1(this.frames,v)]);}}setAttachment(f,r,v){r.setAttachment(v?f.getAttachment(this.slotIndex,v):null);}};var fr=class T extends Os{static propertyIds=[""+Ur.event];events;constructor(f){super(f,T.propertyIds),this.events=new Array(f);}getFrameCount(){return this.frames.length}setFrame(f,r){this.frames[f]=r.time,this.events[f]=r;}apply(f,r,v,c,n,u,d){if(!c)return;let M=this.frames,S=this.frames.length;if(r>v)this.apply(f,r,Number.MAX_VALUE,c,n,u,d),r=-1;else if(r>=M[S-1])return;if(v<M[0])return;let V=0;if(r<M[0])V=0;else {V=Os.search1(M,r)+1;let I=M[V];for(;V>0&&M[V-1]==I;)V--;}for(;V<S&&v>=M[V];V++)c.push(this.events[V]);}},yi=class T extends Os{static propertyIds=[""+Ur.drawOrder];drawOrders;constructor(f){super(f,T.propertyIds),this.drawOrders=new Array(f);}getFrameCount(){return this.frames.length}setFrame(f,r,v){this.frames[f]=r,this.drawOrders[f]=v;}apply(f,r,v,c,n,u,d){if(d==_s.mixOut){u==Ue.setup&&Ne.arrayCopy(f.slots,0,f.drawOrder,0,f.slots.length);return}if(v<this.frames[0]){(u==Ue.setup||u==Ue.first)&&Ne.arrayCopy(f.slots,0,f.drawOrder,0,f.slots.length);return}let M=Os.search1(this.frames,v),S=this.drawOrders[M];if(!S)Ne.arrayCopy(f.slots,0,f.drawOrder,0,f.slots.length);else {let V=f.drawOrder,I=f.slots;for(let D=0,k=S.length;D<k;D++)V[D]=I[S[D]];}}};(class T{static _emptyAnimation=new ur("<empty>",[],0);static emptyAnimation(){return T._emptyAnimation}data;tracks=new Array;timeScale=1;unkeyedState=0;events=new Array;listeners=new Array;queue=new zn(this);propertyIDs=new dr;animationsChanged=false;trackEntryPool=new Oi(()=>new Wn);constructor(f){this.data=f;}update(f){f*=this.timeScale;let r=this.tracks;for(let v=0,c=r.length;v<c;v++){let n=r[v];if(!n)continue;n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;let u=f*n.timeScale;if(n.delay>0){if(n.delay-=u,n.delay>0)continue;u=-n.delay,n.delay=0;}let d=n.next;if(d){let M=n.trackLast-d.delay;if(M>=0){for(d.delay=0,d.trackTime+=n.timeScale==0?0:(M/n.timeScale+f)*d.timeScale,n.trackTime+=u,this.setCurrent(v,d,true);d.mixingFrom;)d.mixTime+=f,d=d.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&!n.mixingFrom){r[v]=null,this.queue.end(n),this.clearNext(n);continue}if(n.mixingFrom&&this.updateMixingFrom(n,f)){let M=n.mixingFrom;for(n.mixingFrom=null,M&&(M.mixingTo=null);M;)this.queue.end(M),M=M.mixingFrom;}n.trackTime+=u;}this.queue.drain();}updateMixingFrom(f,r){let v=f.mixingFrom;if(!v)return  true;let c=this.updateMixingFrom(v,r);return v.animationLast=v.nextAnimationLast,v.trackLast=v.nextTrackLast,f.nextTrackLast!=-1&&f.mixTime>=f.mixDuration?((v.totalAlpha==0||f.mixDuration==0)&&(f.mixingFrom=v.mixingFrom,v.mixingFrom!=null&&(v.mixingFrom.mixingTo=f),f.interruptAlpha=v.interruptAlpha,this.queue.end(v)),c):(v.trackTime+=r*v.timeScale,f.mixTime+=r,false)}apply(f){if(!f)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let r=this.events,v=this.tracks,c=false;for(let D=0,k=v.length;D<k;D++){let E=v[D];if(!E||E.delay>0)continue;c=true;let X=D==0?Ue.first:E.mixBlend,z=E.alpha;E.mixingFrom?z*=this.applyMixingFrom(E,f,X):E.trackTime>=E.trackEnd&&!E.next&&(z=0);let Q=z>=E.alphaAttachmentThreshold,st=E.animationLast,ut=E.getAnimationTime(),nt=ut,ot=r;E.reverse&&(nt=E.animation.duration-nt,ot=null);let it=E.animation.timelines,W=it.length;if(D==0&&z==1||X==Ue.add){D==0&&(Q=true);for(let et=0;et<W;et++){var n=it[et];n instanceof ui?this.applyAttachmentTimeline(n,f,nt,X,Q):n.apply(f,st,nt,ot,z,X,_s.mixIn);}}else {let et=E.timelineMode,ft=E.shortestRotation,at=!ft&&E.timelinesRotation.length!=W<<1;at&&(E.timelinesRotation.length=W<<1);for(let Ct=0;Ct<W;Ct++){let dt=it[Ct],mt=et[Ct]==Nn?X:Ue.setup;!ft&&dt instanceof Ni?this.applyRotateTimeline(dt,f,nt,z,mt,E.timelinesRotation,Ct<<1,at):dt instanceof ui?this.applyAttachmentTimeline(dt,f,nt,X,Q):(dt.apply(f,st,nt,ot,z,mt,_s.mixIn));}}this.queueEvents(E,ut),r.length=0,E.nextAnimationLast=ut,E.nextTrackLast=E.trackTime;}for(var u=this.unkeyedState+ua,d=f.slots,M=0,S=f.slots.length;M<S;M++){var V=d[M];if(V.attachmentState==u){var I=V.data.attachmentName;V.setAttachment(I?f.getAttachment(V.data.index,I):null);}}return this.unkeyedState+=2,this.queue.drain(),c}applyMixingFrom(f,r,v){let c=f.mixingFrom;c.mixingFrom&&this.applyMixingFrom(c,r,v);let n=0;f.mixDuration==0?(n=1,v==Ue.first&&(v=Ue.setup)):(n=f.mixTime/f.mixDuration,n>1&&(n=1),v!=Ue.first&&(v=c.mixBlend));let u=n<c.mixAttachmentThreshold,d=n<c.mixDrawOrderThreshold,M=c.animation.timelines,S=M.length,V=c.alpha*f.interruptAlpha,I=V*(1-n),D=c.animationLast,k=c.getAnimationTime(),E=k,X=null;if(c.reverse?E=c.animation.duration-E:n<c.eventThreshold&&(X=this.events),v==Ue.add)for(let z=0;z<S;z++)M[z].apply(r,D,E,X,I,v,_s.mixOut);else {let z=c.timelineMode,Q=c.timelineHoldMix,st=c.shortestRotation,ut=!st&&c.timelinesRotation.length!=S<<1;ut&&(c.timelinesRotation.length=S<<1),c.totalAlpha=0;for(let nt=0;nt<S;nt++){let ot=M[nt],it=_s.mixOut,W,et=0;switch(z[nt]){case Nn:if(!d&&ot instanceof yi)continue;W=v,et=I;break;case ca:W=Ue.setup,et=I;break;case da:W=v,et=V;break;case Un:W=Ue.setup,et=V;break;default:W=Ue.setup;let ft=Q[nt];et=V*Math.max(0,1-ft.mixTime/ft.mixDuration);break}c.totalAlpha+=et,!st&&ot instanceof Ni?this.applyRotateTimeline(ot,r,E,et,W,c.timelinesRotation,nt<<1,ut):ot instanceof ui?this.applyAttachmentTimeline(ot,r,E,W,u&&et>=c.alphaAttachmentThreshold):(d&&ot instanceof yi&&W==Ue.setup&&(it=_s.mixIn),ot.apply(r,D,E,X,et,W,it));}}return f.mixDuration>0&&this.queueEvents(c,k),this.events.length=0,c.nextAnimationLast=k,c.nextTrackLast=c.trackTime,n}applyAttachmentTimeline(f,r,v,c,n){var u=r.slots[f.slotIndex];u.bone.active&&(v<f.frames[0]?(c==Ue.setup||c==Ue.first)&&this.setAttachment(r,u,u.data.attachmentName,n):this.setAttachment(r,u,f.attachmentNames[Os.search1(f.frames,v)],n),u.attachmentState<=this.unkeyedState&&(u.attachmentState=this.unkeyedState+ua));}setAttachment(f,r,v,c){r.setAttachment(v?f.getAttachment(r.data.index,v):null),c&&(r.attachmentState=this.unkeyedState+Oa);}applyRotateTimeline(f,r,v,c,n,u,d,M){if(M&&(u[d]=0),c==1){f.apply(r,0,v,null,1,n,_s.mixIn);return}let S=r.bones[f.boneIndex];if(!S.active)return;let V=f.frames,I=0,D=0;if(v<V[0])switch(n){case Ue.setup:S.rotation=S.data.rotation;default:return;case Ue.first:I=S.rotation,D=S.data.rotation;}else I=n==Ue.setup?S.data.rotation:S.rotation,D=S.data.rotation+f.getCurveValue(v);let k=0,E=D-I;if(E-=Math.ceil(E/360-.5)*360,E==0)k=u[d];else {let X=0,z=0;M?(X=0,z=E):(X=u[d],z=u[d+1]);let Q=X-X%360;k=E+Q;let st=E>=0,ut=X>=0;Math.abs(z)<=90&&fs.signum(z)!=fs.signum(E)&&(Math.abs(X-Q)>180?(k+=360*fs.signum(X),ut=st):Q!=0?k-=360*fs.signum(X):ut=st),ut!=st&&(k+=360*fs.signum(X)),u[d]=k;}u[d+1]=E,S.rotation=I+k*c;}queueEvents(f,r){let v=f.animationStart,c=f.animationEnd,n=c-v,u=f.trackLast%n,d=this.events,M=0,S=d.length;for(;M<S;M++){let I=d[M];if(I.time<u)break;I.time>c||this.queue.event(f,I);}let V=false;if(f.loop)if(n==0)V=true;else {let I=Math.floor(f.trackTime/n);V=I>0&&I>Math.floor(f.trackLast/n);}else V=r>=c&&f.animationLast<c;for(V&&this.queue.complete(f);M<S;M++){let I=d[M];I.time<v||this.queue.event(f,I);}}clearTracks(){let f=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let r=0,v=this.tracks.length;r<v;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=f,this.queue.drain();}clearTrack(f){if(f>=this.tracks.length)return;let r=this.tracks[f];if(!r)return;this.queue.end(r),this.clearNext(r);let v=r;for(;;){let c=v.mixingFrom;if(!c)break;this.queue.end(c),v.mixingFrom=null,v.mixingTo=null,v=c;}this.tracks[r.trackIndex]=null,this.queue.drain();}setCurrent(f,r,v){let c=this.expandToIndex(f);this.tracks[f]=r,r.previous=null,c&&(v&&this.queue.interrupt(c),r.mixingFrom=c,c.mixingTo=r,r.mixTime=0,c.mixingFrom&&c.mixDuration>0&&(r.interruptAlpha*=Math.min(1,c.mixTime/c.mixDuration)),c.timelinesRotation.length=0),this.queue.start(r);}setAnimation(f,r,v=false){let c=this.data.skeletonData.findAnimation(r);if(!c)throw new Error("Animation not found: "+r);return this.setAnimationWith(f,c,v)}setAnimationWith(f,r,v=false){if(!r)throw new Error("animation cannot be null.");let c=true,n=this.expandToIndex(f);n&&(n.nextTrackLast==-1?(this.tracks[f]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,c=false):this.clearNext(n));let u=this.trackEntry(f,r,v,n);return this.setCurrent(f,u,c),this.queue.drain(),u}addAnimation(f,r,v=false,c=0){let n=this.data.skeletonData.findAnimation(r);if(!n)throw new Error("Animation not found: "+r);return this.addAnimationWith(f,n,v,c)}addAnimationWith(f,r,v=false,c=0){if(!r)throw new Error("animation cannot be null.");let n=this.expandToIndex(f);if(n)for(;n.next;)n=n.next;let u=this.trackEntry(f,r,v,n);return n?(n.next=u,u.previous=n,c<=0&&(c=Math.max(c+n.getTrackComplete()-u.mixDuration,0))):(this.setCurrent(f,u,true),this.queue.drain(),c<0&&(c=0)),u.delay=c,u}setEmptyAnimation(f,r=0){let v=this.setAnimationWith(f,T.emptyAnimation(),false);return v.mixDuration=r,v.trackEnd=r,v}addEmptyAnimation(f,r=0,v=0){let c=this.addAnimationWith(f,T.emptyAnimation(),false,v);return v<=0&&(c.delay=Math.max(c.delay+c.mixDuration-r,0)),c.mixDuration=r,c.trackEnd=r,c}setEmptyAnimations(f=0){let r=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let v=0,c=this.tracks.length;v<c;v++){let n=this.tracks[v];n&&this.setEmptyAnimation(n.trackIndex,f);}this.queue.drainDisabled=r,this.queue.drain();}expandToIndex(f){return f<this.tracks.length?this.tracks[f]:(Ne.ensureArrayCapacity(this.tracks,f+1,null),this.tracks.length=f+1,null)}trackEntry(f,r,v,c){let n=this.trackEntryPool.obtain();return n.reset(),n.trackIndex=f,n.animation=r,n.loop=v,n.holdPrevious=false,n.reverse=false,n.shortestRotation=false,n.eventThreshold=0,n.alphaAttachmentThreshold=0,n.mixAttachmentThreshold=0,n.mixDrawOrderThreshold=0,n.animationStart=0,n.animationEnd=r.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.mixTime=0,n.mixDuration=c?this.data.getMix(c.animation,r):0,n.interruptAlpha=1,n.totalAlpha=0,n.mixBlend=Ue.replace,n}clearNext(f){let r=f.next;for(;r;)this.queue.dispose(r),r=r.next;f.next=null;}_animationsChanged(){this.animationsChanged=false,this.propertyIDs.clear();let f=this.tracks;for(let r=0,v=f.length;r<v;r++){let c=f[r];if(c){for(;c.mixingFrom;)c=c.mixingFrom;do(!c.mixingTo||c.mixBlend!=Ue.add)&&this.computeHold(c),c=c.mixingTo;while(c)}}}computeHold(f){let r=f.mixingTo,v=f.animation.timelines,c=f.animation.timelines.length,n=f.timelineMode;n.length=c;let u=f.timelineHoldMix;u.length=0;let d=this.propertyIDs;if(r&&r.holdPrevious){for(let M=0;M<c;M++)n[M]=d.addAll(v[M].getPropertyIds())?Un:da;return}t:for(let M=0;M<c;M++){let S=v[M],V=S.getPropertyIds();if(!d.addAll(V))n[M]=Nn;else if(!r||S instanceof ui||S instanceof yi||S instanceof fr||!r.animation.hasTimeline(V))n[M]=ca;else {for(let I=r.mixingTo;I;I=I.mixingTo)if(!I.animation.hasTimeline(V)){if(f.mixDuration>0){n[M]=Da,u[M]=I;continue t}break}n[M]=Un;}}}getCurrent(f){return f>=this.tracks.length?null:this.tracks[f]}addListener(f){if(!f)throw new Error("listener cannot be null.");this.listeners.push(f);}removeListener(f){let r=this.listeners.indexOf(f);r>=0&&this.listeners.splice(r,1);}clearListeners(){this.listeners.length=0;}clearListenerNotifications(){this.queue.clear();}});var Wn=class{animation=null;previous=null;next=null;mixingFrom=null;mixingTo=null;listener=null;trackIndex=0;loop=false;holdPrevious=false;reverse=false;shortestRotation=false;eventThreshold=0;mixAttachmentThreshold=0;alphaAttachmentThreshold=0;mixDrawOrderThreshold=0;animationStart=0;animationEnd=0;animationLast=0;nextAnimationLast=0;delay=0;trackTime=0;trackLast=0;nextTrackLast=0;trackEnd=0;timeScale=0;alpha=0;mixTime=0;_mixDuration=0;interruptAlpha=0;totalAlpha=0;get mixDuration(){return this._mixDuration}set mixDuration(f){this._mixDuration=f;}setMixDurationWithDelay(f,r){this._mixDuration=f,r<=0&&(this.previous!=null?r=Math.max(r+this.previous.getTrackComplete()-f,0):r=0),this.delay=r;}mixBlend=Ue.replace;timelineMode=new Array;timelineHoldMix=new Array;timelinesRotation=new Array;reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;}getAnimationTime(){if(this.loop){let f=this.animationEnd-this.animationStart;return f==0?this.animationStart:this.trackTime%f+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(f){this.animationLast=f,this.nextAnimationLast=f;}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0;}getTrackComplete(){let f=this.animationEnd-this.animationStart;if(f!=0){if(this.loop)return f*(1+(this.trackTime/f|0));if(this.trackTime<f)return f}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}},zn=class{objects=[];drainDisabled=false;animState;constructor(f){this.animState=f;}start(f){this.objects.push(Fs.start),this.objects.push(f),this.animState.animationsChanged=true;}interrupt(f){this.objects.push(Fs.interrupt),this.objects.push(f);}end(f){this.objects.push(Fs.end),this.objects.push(f),this.animState.animationsChanged=true;}dispose(f){this.objects.push(Fs.dispose),this.objects.push(f);}complete(f){this.objects.push(Fs.complete),this.objects.push(f);}event(f,r){this.objects.push(Fs.event),this.objects.push(f),this.objects.push(r);}drain(){if(this.drainDisabled)return;this.drainDisabled=true;let f=this.objects,r=this.animState.listeners;for(let v=0;v<f.length;v+=2){let c=f[v],n=f[v+1];switch(c){case Fs.start:n.listener&&n.listener.start&&n.listener.start(n);for(let d=0;d<r.length;d++){let M=r[d];M.start&&M.start(n);}break;case Fs.interrupt:n.listener&&n.listener.interrupt&&n.listener.interrupt(n);for(let d=0;d<r.length;d++){let M=r[d];M.interrupt&&M.interrupt(n);}break;case Fs.end:n.listener&&n.listener.end&&n.listener.end(n);for(let d=0;d<r.length;d++){let M=r[d];M.end&&M.end(n);}case Fs.dispose:n.listener&&n.listener.dispose&&n.listener.dispose(n);for(let d=0;d<r.length;d++){let M=r[d];M.dispose&&M.dispose(n);}this.animState.trackEntryPool.free(n);break;case Fs.complete:n.listener&&n.listener.complete&&n.listener.complete(n);for(let d=0;d<r.length;d++){let M=r[d];M.complete&&M.complete(n);}break;case Fs.event:let u=f[v+++2];n.listener&&n.listener.event&&n.listener.event(n,u);for(let d=0;d<r.length;d++){let M=r[d];M.event&&M.event(n,u);}break}}this.clear(),this.drainDisabled=false;}clear(){this.objects.length=0;}},Fs;(function(T){T[T.start=0]="start",T[T.interrupt=1]="interrupt",T[T.end=2]="end",T[T.dispose=3]="dispose",T[T.complete=4]="complete",T[T.event=5]="event";})(Fs||(Fs={}));var Nn=0,ca=1,da=2,Un=3,Da=4,ua=1,Oa=2;var dn;(function(T){T[T.Nearest=9728]="Nearest",T[T.Linear=9729]="Linear",T[T.MipMap=9987]="MipMap",T[T.MipMapNearestNearest=9984]="MipMapNearestNearest",T[T.MipMapLinearNearest=9985]="MipMapLinearNearest",T[T.MipMapNearestLinear=9986]="MipMapNearestLinear",T[T.MipMapLinearLinear=9987]="MipMapLinearLinear";})(dn||(dn={}));var Gn;(function(T){T[T.MirroredRepeat=33648]="MirroredRepeat",T[T.ClampToEdge=33071]="ClampToEdge",T[T.Repeat=10497]="Repeat";})(Gn||(Gn={}));var zr;(function(T){T[T.Normal=0]="Normal",T[T.OnlyTranslation=1]="OnlyTranslation",T[T.NoRotationOrReflection=2]="NoRotationOrReflection",T[T.NoScale=3]="NoScale",T[T.NoScaleOrReflection=4]="NoScaleOrReflection";})(zr||(zr={}));var Gr;(function(T){T[T.Fixed=0]="Fixed",T[T.Percent=1]="Percent";})(Gr||(Gr={}));var qr;(function(T){T[T.Length=0]="Length",T[T.Fixed=1]="Fixed",T[T.Percent=2]="Percent",T[T.Proportional=3]="Proportional";})(qr||(qr={}));var mn;(function(T){T[T.Tangent=0]="Tangent",T[T.Chain=1]="Chain",T[T.ChainScale=2]="ChainScale";})(mn||(mn={}));var Zn;(function(T){T[T.none=0]="none",T[T.reset=1]="reset",T[T.update=2]="update",T[T.pose=3]="pose";})(Zn||(Zn={}));var gn;(function(T){T[T.Normal=0]="Normal",T[T.Additive=1]="Additive",T[T.Multiply=2]="Multiply",T[T.Screen=3]="Screen";})(gn||(gn={}));var fa;(function(T){T[T.Region=0]="Region",T[T.BoundingBox=1]="BoundingBox",T[T.Mesh=2]="Mesh",T[T.LinkedMesh=3]="LinkedMesh",T[T.Path=4]="Path",T[T.Point=5]="Point",T[T.Clipping=6]="Clipping";})(fa||(fa={}));typeof Math.fround>"u"&&(Math.fround=(function(T){return function(f){return T[0]=f,T[0]}})(new Float32Array(1)));var bi=class{x=0;y=0;z=0;constructor(f=0,r=0,v=0){this.x=f,this.y=r,this.z=v;}setFrom(f){return this.x=f.x,this.y=f.y,this.z=f.z,this}set(f,r,v){return this.x=f,this.y=r,this.z=v,this}add(f){return this.x+=f.x,this.y+=f.y,this.z+=f.z,this}sub(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z,this}scale(f){return this.x*=f,this.y*=f,this.z*=f,this}normalize(){let f=this.length();return f==0?this:(f=1/f,this.x*=f,this.y*=f,this.z*=f,this)}cross(f){return this.set(this.y*f.z-this.z*f.y,this.z*f.x-this.x*f.z,this.x*f.y-this.y*f.x)}multiply(f){let r=f.values;return this.set(this.x*r[ye]+this.y*r[Ee]+this.z*r[Re]+r[Me],this.x*r[ke]+this.y*r[be]+this.z*r[Ye]+r[Ae],this.x*r[Fe]+this.y*r[Pe]+this.z*r[Se]+r[Ce])}project(f){let r=f.values,v=1/(this.x*r[Xe]+this.y*r[Be]+this.z*r[Ve]+r[Le]);return this.set((this.x*r[ye]+this.y*r[Ee]+this.z*r[Re]+r[Me])*v,(this.x*r[ke]+this.y*r[be]+this.z*r[Ye]+r[Ae])*v,(this.x*r[Fe]+this.y*r[Pe]+this.z*r[Se]+r[Ce])*v)}dot(f){return this.x*f.x+this.y*f.y+this.z*f.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(f){let r=f.x-this.x,v=f.y-this.y,c=f.z-this.z;return Math.sqrt(r*r+v*v+c*c)}};var ye=0,Ee=4,Re=8,Me=12,ke=1,be=5,Ye=9,Ae=13,Fe=2,Pe=6,Se=10,Ce=14,Xe=3,Be=7,Ve=11,Le=15;(class T{temp=new Float32Array(16);values=new Float32Array(16);static xAxis=new bi;static yAxis=new bi;static zAxis=new bi;static tmpMatrix=new T;constructor(){let f=this.values;f[ye]=1,f[be]=1,f[Se]=1,f[Le]=1;}set(f){return this.values.set(f),this}transpose(){let f=this.temp,r=this.values;return f[ye]=r[ye],f[Ee]=r[ke],f[Re]=r[Fe],f[Me]=r[Xe],f[ke]=r[Ee],f[be]=r[be],f[Ye]=r[Pe],f[Ae]=r[Be],f[Fe]=r[Re],f[Pe]=r[Ye],f[Se]=r[Se],f[Ce]=r[Ve],f[Xe]=r[Me],f[Be]=r[Ae],f[Ve]=r[Ce],f[Le]=r[Le],this.set(f)}identity(){let f=this.values;return f[ye]=1,f[Ee]=0,f[Re]=0,f[Me]=0,f[ke]=0,f[be]=1,f[Ye]=0,f[Ae]=0,f[Fe]=0,f[Pe]=0,f[Se]=1,f[Ce]=0,f[Xe]=0,f[Be]=0,f[Ve]=0,f[Le]=1,this}invert(){let f=this.values,r=this.temp,v=f[Xe]*f[Pe]*f[Ye]*f[Me]-f[Fe]*f[Be]*f[Ye]*f[Me]-f[Xe]*f[be]*f[Se]*f[Me]+f[ke]*f[Be]*f[Se]*f[Me]+f[Fe]*f[be]*f[Ve]*f[Me]-f[ke]*f[Pe]*f[Ve]*f[Me]-f[Xe]*f[Pe]*f[Re]*f[Ae]+f[Fe]*f[Be]*f[Re]*f[Ae]+f[Xe]*f[Ee]*f[Se]*f[Ae]-f[ye]*f[Be]*f[Se]*f[Ae]-f[Fe]*f[Ee]*f[Ve]*f[Ae]+f[ye]*f[Pe]*f[Ve]*f[Ae]+f[Xe]*f[be]*f[Re]*f[Ce]-f[ke]*f[Be]*f[Re]*f[Ce]-f[Xe]*f[Ee]*f[Ye]*f[Ce]+f[ye]*f[Be]*f[Ye]*f[Ce]+f[ke]*f[Ee]*f[Ve]*f[Ce]-f[ye]*f[be]*f[Ve]*f[Ce]-f[Fe]*f[be]*f[Re]*f[Le]+f[ke]*f[Pe]*f[Re]*f[Le]+f[Fe]*f[Ee]*f[Ye]*f[Le]-f[ye]*f[Pe]*f[Ye]*f[Le]-f[ke]*f[Ee]*f[Se]*f[Le]+f[ye]*f[be]*f[Se]*f[Le];if(v==0)throw new Error("non-invertible matrix");let c=1/v;return r[ye]=f[Ye]*f[Ce]*f[Be]-f[Ae]*f[Se]*f[Be]+f[Ae]*f[Pe]*f[Ve]-f[be]*f[Ce]*f[Ve]-f[Ye]*f[Pe]*f[Le]+f[be]*f[Se]*f[Le],r[Ee]=f[Me]*f[Se]*f[Be]-f[Re]*f[Ce]*f[Be]-f[Me]*f[Pe]*f[Ve]+f[Ee]*f[Ce]*f[Ve]+f[Re]*f[Pe]*f[Le]-f[Ee]*f[Se]*f[Le],r[Re]=f[Re]*f[Ae]*f[Be]-f[Me]*f[Ye]*f[Be]+f[Me]*f[be]*f[Ve]-f[Ee]*f[Ae]*f[Ve]-f[Re]*f[be]*f[Le]+f[Ee]*f[Ye]*f[Le],r[Me]=f[Me]*f[Ye]*f[Pe]-f[Re]*f[Ae]*f[Pe]-f[Me]*f[be]*f[Se]+f[Ee]*f[Ae]*f[Se]+f[Re]*f[be]*f[Ce]-f[Ee]*f[Ye]*f[Ce],r[ke]=f[Ae]*f[Se]*f[Xe]-f[Ye]*f[Ce]*f[Xe]-f[Ae]*f[Fe]*f[Ve]+f[ke]*f[Ce]*f[Ve]+f[Ye]*f[Fe]*f[Le]-f[ke]*f[Se]*f[Le],r[be]=f[Re]*f[Ce]*f[Xe]-f[Me]*f[Se]*f[Xe]+f[Me]*f[Fe]*f[Ve]-f[ye]*f[Ce]*f[Ve]-f[Re]*f[Fe]*f[Le]+f[ye]*f[Se]*f[Le],r[Ye]=f[Me]*f[Ye]*f[Xe]-f[Re]*f[Ae]*f[Xe]-f[Me]*f[ke]*f[Ve]+f[ye]*f[Ae]*f[Ve]+f[Re]*f[ke]*f[Le]-f[ye]*f[Ye]*f[Le],r[Ae]=f[Re]*f[Ae]*f[Fe]-f[Me]*f[Ye]*f[Fe]+f[Me]*f[ke]*f[Se]-f[ye]*f[Ae]*f[Se]-f[Re]*f[ke]*f[Ce]+f[ye]*f[Ye]*f[Ce],r[Fe]=f[be]*f[Ce]*f[Xe]-f[Ae]*f[Pe]*f[Xe]+f[Ae]*f[Fe]*f[Be]-f[ke]*f[Ce]*f[Be]-f[be]*f[Fe]*f[Le]+f[ke]*f[Pe]*f[Le],r[Pe]=f[Me]*f[Pe]*f[Xe]-f[Ee]*f[Ce]*f[Xe]-f[Me]*f[Fe]*f[Be]+f[ye]*f[Ce]*f[Be]+f[Ee]*f[Fe]*f[Le]-f[ye]*f[Pe]*f[Le],r[Se]=f[Ee]*f[Ae]*f[Xe]-f[Me]*f[be]*f[Xe]+f[Me]*f[ke]*f[Be]-f[ye]*f[Ae]*f[Be]-f[Ee]*f[ke]*f[Le]+f[ye]*f[be]*f[Le],r[Ce]=f[Me]*f[be]*f[Fe]-f[Ee]*f[Ae]*f[Fe]-f[Me]*f[ke]*f[Pe]+f[ye]*f[Ae]*f[Pe]+f[Ee]*f[ke]*f[Ce]-f[ye]*f[be]*f[Ce],r[Xe]=f[Ye]*f[Pe]*f[Xe]-f[be]*f[Se]*f[Xe]-f[Ye]*f[Fe]*f[Be]+f[ke]*f[Se]*f[Be]+f[be]*f[Fe]*f[Ve]-f[ke]*f[Pe]*f[Ve],r[Be]=f[Ee]*f[Se]*f[Xe]-f[Re]*f[Pe]*f[Xe]+f[Re]*f[Fe]*f[Be]-f[ye]*f[Se]*f[Be]-f[Ee]*f[Fe]*f[Ve]+f[ye]*f[Pe]*f[Ve],r[Ve]=f[Re]*f[be]*f[Xe]-f[Ee]*f[Ye]*f[Xe]-f[Re]*f[ke]*f[Be]+f[ye]*f[Ye]*f[Be]+f[Ee]*f[ke]*f[Ve]-f[ye]*f[be]*f[Ve],r[Le]=f[Ee]*f[Ye]*f[Fe]-f[Re]*f[be]*f[Fe]+f[Re]*f[ke]*f[Pe]-f[ye]*f[Ye]*f[Pe]-f[Ee]*f[ke]*f[Se]+f[ye]*f[be]*f[Se],f[ye]=r[ye]*c,f[Ee]=r[Ee]*c,f[Re]=r[Re]*c,f[Me]=r[Me]*c,f[ke]=r[ke]*c,f[be]=r[be]*c,f[Ye]=r[Ye]*c,f[Ae]=r[Ae]*c,f[Fe]=r[Fe]*c,f[Pe]=r[Pe]*c,f[Se]=r[Se]*c,f[Ce]=r[Ce]*c,f[Xe]=r[Xe]*c,f[Be]=r[Be]*c,f[Ve]=r[Ve]*c,f[Le]=r[Le]*c,this}determinant(){let f=this.values;return f[Xe]*f[Pe]*f[Ye]*f[Me]-f[Fe]*f[Be]*f[Ye]*f[Me]-f[Xe]*f[be]*f[Se]*f[Me]+f[ke]*f[Be]*f[Se]*f[Me]+f[Fe]*f[be]*f[Ve]*f[Me]-f[ke]*f[Pe]*f[Ve]*f[Me]-f[Xe]*f[Pe]*f[Re]*f[Ae]+f[Fe]*f[Be]*f[Re]*f[Ae]+f[Xe]*f[Ee]*f[Se]*f[Ae]-f[ye]*f[Be]*f[Se]*f[Ae]-f[Fe]*f[Ee]*f[Ve]*f[Ae]+f[ye]*f[Pe]*f[Ve]*f[Ae]+f[Xe]*f[be]*f[Re]*f[Ce]-f[ke]*f[Be]*f[Re]*f[Ce]-f[Xe]*f[Ee]*f[Ye]*f[Ce]+f[ye]*f[Be]*f[Ye]*f[Ce]+f[ke]*f[Ee]*f[Ve]*f[Ce]-f[ye]*f[be]*f[Ve]*f[Ce]-f[Fe]*f[be]*f[Re]*f[Le]+f[ke]*f[Pe]*f[Re]*f[Le]+f[Fe]*f[Ee]*f[Ye]*f[Le]-f[ye]*f[Pe]*f[Ye]*f[Le]-f[ke]*f[Ee]*f[Se]*f[Le]+f[ye]*f[be]*f[Se]*f[Le]}translate(f,r,v){let c=this.values;return c[Me]+=f,c[Ae]+=r,c[Ce]+=v,this}copy(){return new T().set(this.values)}projection(f,r,v,c){this.identity();let n=1/Math.tan(v*(Math.PI/180)/2),u=(r+f)/(f-r),d=2*r*f/(f-r),M=this.values;return M[ye]=n/c,M[ke]=0,M[Fe]=0,M[Xe]=0,M[Ee]=0,M[be]=n,M[Pe]=0,M[Be]=0,M[Re]=0,M[Ye]=0,M[Se]=u,M[Ve]=-1,M[Me]=0,M[Ae]=0,M[Ce]=d,M[Le]=0,this}ortho2d(f,r,v,c){return this.ortho(f,f+v,r,r+c,0,1)}ortho(f,r,v,c,n,u){this.identity();let d=2/(r-f),M=2/(c-v),S=-2/(u-n),V=-(r+f)/(r-f),I=-(c+v)/(c-v),D=-(u+n)/(u-n),k=this.values;return k[ye]=d,k[ke]=0,k[Fe]=0,k[Xe]=0,k[Ee]=0,k[be]=M,k[Pe]=0,k[Be]=0,k[Re]=0,k[Ye]=0,k[Se]=S,k[Ve]=0,k[Me]=V,k[Ae]=I,k[Ce]=D,k[Le]=1,this}multiply(f){let r=this.temp,v=this.values,c=f.values;return r[ye]=v[ye]*c[ye]+v[Ee]*c[ke]+v[Re]*c[Fe]+v[Me]*c[Xe],r[Ee]=v[ye]*c[Ee]+v[Ee]*c[be]+v[Re]*c[Pe]+v[Me]*c[Be],r[Re]=v[ye]*c[Re]+v[Ee]*c[Ye]+v[Re]*c[Se]+v[Me]*c[Ve],r[Me]=v[ye]*c[Me]+v[Ee]*c[Ae]+v[Re]*c[Ce]+v[Me]*c[Le],r[ke]=v[ke]*c[ye]+v[be]*c[ke]+v[Ye]*c[Fe]+v[Ae]*c[Xe],r[be]=v[ke]*c[Ee]+v[be]*c[be]+v[Ye]*c[Pe]+v[Ae]*c[Be],r[Ye]=v[ke]*c[Re]+v[be]*c[Ye]+v[Ye]*c[Se]+v[Ae]*c[Ve],r[Ae]=v[ke]*c[Me]+v[be]*c[Ae]+v[Ye]*c[Ce]+v[Ae]*c[Le],r[Fe]=v[Fe]*c[ye]+v[Pe]*c[ke]+v[Se]*c[Fe]+v[Ce]*c[Xe],r[Pe]=v[Fe]*c[Ee]+v[Pe]*c[be]+v[Se]*c[Pe]+v[Ce]*c[Be],r[Se]=v[Fe]*c[Re]+v[Pe]*c[Ye]+v[Se]*c[Se]+v[Ce]*c[Ve],r[Ce]=v[Fe]*c[Me]+v[Pe]*c[Ae]+v[Se]*c[Ce]+v[Ce]*c[Le],r[Xe]=v[Xe]*c[ye]+v[Be]*c[ke]+v[Ve]*c[Fe]+v[Le]*c[Xe],r[Be]=v[Xe]*c[Ee]+v[Be]*c[be]+v[Ve]*c[Pe]+v[Le]*c[Be],r[Ve]=v[Xe]*c[Re]+v[Be]*c[Ye]+v[Ve]*c[Se]+v[Le]*c[Ve],r[Le]=v[Xe]*c[Me]+v[Be]*c[Ae]+v[Ve]*c[Ce]+v[Le]*c[Le],this.set(this.temp)}multiplyLeft(f){let r=this.temp,v=this.values,c=f.values;return r[ye]=c[ye]*v[ye]+c[Ee]*v[ke]+c[Re]*v[Fe]+c[Me]*v[Xe],r[Ee]=c[ye]*v[Ee]+c[Ee]*v[be]+c[Re]*v[Pe]+c[Me]*v[Be],r[Re]=c[ye]*v[Re]+c[Ee]*v[Ye]+c[Re]*v[Se]+c[Me]*v[Ve],r[Me]=c[ye]*v[Me]+c[Ee]*v[Ae]+c[Re]*v[Ce]+c[Me]*v[Le],r[ke]=c[ke]*v[ye]+c[be]*v[ke]+c[Ye]*v[Fe]+c[Ae]*v[Xe],r[be]=c[ke]*v[Ee]+c[be]*v[be]+c[Ye]*v[Pe]+c[Ae]*v[Be],r[Ye]=c[ke]*v[Re]+c[be]*v[Ye]+c[Ye]*v[Se]+c[Ae]*v[Ve],r[Ae]=c[ke]*v[Me]+c[be]*v[Ae]+c[Ye]*v[Ce]+c[Ae]*v[Le],r[Fe]=c[Fe]*v[ye]+c[Pe]*v[ke]+c[Se]*v[Fe]+c[Ce]*v[Xe],r[Pe]=c[Fe]*v[Ee]+c[Pe]*v[be]+c[Se]*v[Pe]+c[Ce]*v[Be],r[Se]=c[Fe]*v[Re]+c[Pe]*v[Ye]+c[Se]*v[Se]+c[Ce]*v[Ve],r[Ce]=c[Fe]*v[Me]+c[Pe]*v[Ae]+c[Se]*v[Ce]+c[Ce]*v[Le],r[Xe]=c[Xe]*v[ye]+c[Be]*v[ke]+c[Ve]*v[Fe]+c[Le]*v[Xe],r[Be]=c[Xe]*v[Ee]+c[Be]*v[be]+c[Ve]*v[Pe]+c[Le]*v[Be],r[Ve]=c[Xe]*v[Re]+c[Be]*v[Ye]+c[Ve]*v[Se]+c[Le]*v[Ve],r[Le]=c[Xe]*v[Me]+c[Be]*v[Ae]+c[Ve]*v[Ce]+c[Le]*v[Le],this.set(this.temp)}lookAt(f,r,v){let c=T.xAxis,n=T.yAxis,u=T.zAxis;u.setFrom(r).normalize(),c.setFrom(r).normalize(),c.cross(v).normalize(),n.setFrom(c).cross(u).normalize(),this.identity();let d=this.values;return d[ye]=c.x,d[Ee]=c.y,d[Re]=c.z,d[ke]=n.x,d[be]=n.y,d[Ye]=n.z,d[Fe]=-u.x,d[Pe]=-u.y,d[Se]=-u.z,T.tmpMatrix.identity(),T.tmpMatrix.values[Me]=-f.x,T.tmpMatrix.values[Ae]=-f.y,T.tmpMatrix.values[Ce]=-f.z,this.multiply(T.tmpMatrix),this}});var ma;(function(T){T[T.Float=0]="Float";})(ma||(ma={}));var ga;(function(T){T[T.Point=0]="Point",T[T.Line=1]="Line",T[T.Filled=4]="Filled";})(ga||(ga={}));var _n;(function(T){T[T.Stretch=0]="Stretch",T[T.Expand=1]="Expand",T[T.Fit=2]="Fit";})(_n||(_n={}));var es=(function(){var T=function(f,r){return (T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,c){v.__proto__=c;}||function(v,c){for(var n in c)Object.prototype.hasOwnProperty.call(c,n)&&(v[n]=c[n]);})(f,r)};return function(f,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function v(){this.constructor=f;}T(f,r),f.prototype=r===null?Object.create(r):(v.prototype=r.prototype,new v);}})(),Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt;((function(T){var f=(function(){function it(W,et,ft){if(W==null)throw new Error("name cannot be null.");if(et==null)throw new Error("timelines cannot be null.");this.name=W,this.timelines=et,this.timelineIds=[];for(var at=0;at<et.length;at++)this.timelineIds[et[at].getPropertyId()]=true;this.duration=ft;}return it.prototype.hasTimeline=function(W){return this.timelineIds[W]==1},it.prototype.apply=function(W,et,ft,at,Ct,dt,mt,kt){if(W==null)throw new Error("skeleton cannot be null.");at&&this.duration!=0&&(ft%=this.duration,et>0&&(et%=this.duration));for(var ht=this.timelines,$=0,ct=ht.length;$<ct;$++)ht[$].apply(W,et,ft,Ct,dt,mt,kt);},it.binarySearch=function(W,et,ft){ft===void 0&&(ft=1);var at=0,Ct=W.length/ft-2;if(Ct==0)return ft;for(var dt=Ct>>>1;;){if(W[(dt+1)*ft]<=et?at=dt+1:Ct=dt,at==Ct)return (at+1)*ft;dt=at+Ct>>>1;}},it.linearSearch=function(W,et,ft){for(var at=0,Ct=W.length-ft;at<=Ct;at+=ft)if(W[at]>et)return at;return  -1},it})(),r,v,c;T.Animation=f,(function(it){it[it.setup=0]="setup",it[it.first=1]="first",it[it.replace=2]="replace",it[it.add=3]="add";})(r=T.MixBlend||(T.MixBlend={})),(function(it){it[it.mixIn=0]="mixIn",it[it.mixOut=1]="mixOut";})(v=T.MixDirection||(T.MixDirection={})),(function(it){it[it.rotate=0]="rotate",it[it.translate=1]="translate",it[it.scale=2]="scale",it[it.shear=3]="shear",it[it.attachment=4]="attachment",it[it.color=5]="color",it[it.deform=6]="deform",it[it.event=7]="event",it[it.drawOrder=8]="drawOrder",it[it.ikConstraint=9]="ikConstraint",it[it.transformConstraint=10]="transformConstraint",it[it.pathConstraintPosition=11]="pathConstraintPosition",it[it.pathConstraintSpacing=12]="pathConstraintSpacing",it[it.pathConstraintMix=13]="pathConstraintMix",it[it.twoColor=14]="twoColor";})(c=T.TimelineType||(T.TimelineType={}));var n=(function(){function it(W){if(W<=0)throw new Error("frameCount must be > 0: "+W);this.curves=T.Utils.newFloatArray((W-1)*it.BEZIER_SIZE);}return it.prototype.getFrameCount=function(){return this.curves.length/it.BEZIER_SIZE+1},it.prototype.setLinear=function(W){this.curves[W*it.BEZIER_SIZE]=it.LINEAR;},it.prototype.setStepped=function(W){this.curves[W*it.BEZIER_SIZE]=it.STEPPED;},it.prototype.getCurveType=function(W){var et=W*it.BEZIER_SIZE;if(et==this.curves.length)return it.LINEAR;var ft=this.curves[et];return ft==it.LINEAR?it.LINEAR:ft==it.STEPPED?it.STEPPED:it.BEZIER},it.prototype.setCurve=function(W,et,ft,at,Ct){var dt=.03*(2*-et+at),mt=.03*(2*-ft+Ct),kt=.006*(3*(et-at)+1),ht=.006*(3*(ft-Ct)+1),$=2*dt+kt,ct=2*mt+ht,wt=.3*et+dt+.16666667*kt,yt=.3*ft+mt+.16666667*ht,Xt=W*it.BEZIER_SIZE,Dt=this.curves;Dt[Xt++]=it.BEZIER;for(var Lt=wt,Bt=yt,zt=Xt+it.BEZIER_SIZE-1;Xt<zt;Xt+=2)Dt[Xt]=Lt,Dt[Xt+1]=Bt,wt+=$,yt+=ct,$+=kt,ct+=ht,Lt+=wt,Bt+=yt;},it.prototype.getCurvePercent=function(W,et){et=T.MathUtils.clamp(et,0,1);var ft=this.curves,at=W*it.BEZIER_SIZE,Ct=ft[at];if(Ct==it.LINEAR)return et;if(Ct==it.STEPPED)return 0;for(var dt=0,mt=++at,kt=at+it.BEZIER_SIZE-1;at<kt;at+=2)if((dt=ft[at])>=et){var ht=void 0,$=void 0;return at==mt?(ht=0,$=0):(ht=ft[at-2],$=ft[at-1]),$+(ft[at+1]-$)*(et-ht)/(dt-ht)}var ct=ft[at-1];return ct+(1-ct)*(et-dt)/(1-dt)},it.LINEAR=0,it.STEPPED=1,it.BEZIER=2,it.BEZIER_SIZE=19,it})();T.CurveTimeline=n;var u=(function(it){function W(et){var ft=it.call(this,et)||this;return ft.frames=T.Utils.newFloatArray(et<<1),ft}return es(W,it),W.prototype.getPropertyId=function(){return (c.rotate<<24)+this.boneIndex},W.prototype.setFrame=function(et,ft,at){et<<=1,this.frames[et]=ft,this.frames[et+W.ROTATION]=at;},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=this.frames,$=Skeleton.bones[this.boneIndex];if($.active)if(at<ht[0])switch(mt){case r.setup:return void($.rotation=$.data.rotation);case r.first:var ct=$.data.rotation-$.rotation;$.rotation+=(ct-360*(16384-(16384.499999999996-ct/360|0)))*dt;}else if(at>=ht[ht.length-W.ENTRIES]){var wt=ht[ht.length+W.PREV_ROTATION];switch(mt){case r.setup:$.rotation=$.data.rotation+wt*dt;break;case r.first:case r.replace:wt+=$.data.rotation-$.rotation,wt-=360*(16384-(16384.499999999996-wt/360|0));case r.add:$.rotation+=wt*dt;}}else {var yt=f.binarySearch(ht,at,W.ENTRIES),Xt=ht[yt+W.PREV_ROTATION],Dt=ht[yt],Lt=this.getCurvePercent((yt>>1)-1,1-(at-Dt)/(ht[yt+W.PREV_TIME]-Dt)),Bt=ht[yt+W.ROTATION]-Xt;switch(Bt=Xt+(Bt-360*(16384-(16384.499999999996-Bt/360|0)))*Lt,mt){case r.setup:$.rotation=$.data.rotation+(Bt-360*(16384-(16384.499999999996-Bt/360|0)))*dt;break;case r.first:case r.replace:Bt+=$.data.rotation-$.rotation;case r.add:$.rotation+=(Bt-360*(16384-(16384.499999999996-Bt/360|0)))*dt;}}},W.ENTRIES=2,W.PREV_TIME=-2,W.PREV_ROTATION=-1,W.ROTATION=1,W})(n);T.RotateTimeline=u;var d=(function(it){function W(et){var ft=it.call(this,et)||this;return ft.frames=T.Utils.newFloatArray(et*W.ENTRIES),ft}return es(W,it),W.prototype.getPropertyId=function(){return (c.translate<<24)+this.boneIndex},W.prototype.setFrame=function(et,ft,at,Ct){et*=W.ENTRIES,this.frames[et]=ft,this.frames[et+W.X]=at,this.frames[et+W.Y]=Ct;},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=this.frames,$=Skeleton.bones[this.boneIndex];if($.active)if(at<ht[0])switch(mt){case r.setup:return $.x=$.data.x,void($.y=$.data.y);case r.first:$.x+=($.data.x-$.x)*dt,$.y+=($.data.y-$.y)*dt;}else {var ct=0,wt=0;if(at>=ht[ht.length-W.ENTRIES])ct=ht[ht.length+W.PREV_X],wt=ht[ht.length+W.PREV_Y];else {var yt=f.binarySearch(ht,at,W.ENTRIES);ct=ht[yt+W.PREV_X],wt=ht[yt+W.PREV_Y];var Xt=ht[yt],Dt=this.getCurvePercent(yt/W.ENTRIES-1,1-(at-Xt)/(ht[yt+W.PREV_TIME]-Xt));ct+=(ht[yt+W.X]-ct)*Dt,wt+=(ht[yt+W.Y]-wt)*Dt;}switch(mt){case r.setup:$.x=$.data.x+ct*dt,$.y=$.data.y+wt*dt;break;case r.first:case r.replace:$.x+=($.data.x+ct-$.x)*dt,$.y+=($.data.y+wt-$.y)*dt;break;case r.add:$.x+=ct*dt,$.y+=wt*dt;}}},W.ENTRIES=3,W.PREV_TIME=-3,W.PREV_X=-2,W.PREV_Y=-1,W.X=1,W.Y=2,W})(n);T.TranslateTimeline=d;var M=(function(it){function W(et){return it.call(this,et)||this}return es(W,it),W.prototype.getPropertyId=function(){return (c.scale<<24)+this.boneIndex},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=this.frames,$=Skeleton.bones[this.boneIndex];if($.active)if(at<ht[0])switch(mt){case r.setup:return $.scaleX=$.data.scaleX,void($.scaleY=$.data.scaleY);case r.first:$.scaleX+=($.data.scaleX-$.scaleX)*dt,$.scaleY+=($.data.scaleY-$.scaleY)*dt;}else {var ct=0,wt=0;if(at>=ht[ht.length-W.ENTRIES])ct=ht[ht.length+W.PREV_X]*$.data.scaleX,wt=ht[ht.length+W.PREV_Y]*$.data.scaleY;else {var yt=f.binarySearch(ht,at,W.ENTRIES);ct=ht[yt+W.PREV_X],wt=ht[yt+W.PREV_Y];var Xt=ht[yt],Dt=this.getCurvePercent(yt/W.ENTRIES-1,1-(at-Xt)/(ht[yt+W.PREV_TIME]-Xt));ct=(ct+(ht[yt+W.X]-ct)*Dt)*$.data.scaleX,wt=(wt+(ht[yt+W.Y]-wt)*Dt)*$.data.scaleY;}if(dt==1)mt==r.add?($.scaleX+=ct-$.data.scaleX,$.scaleY+=wt-$.data.scaleY):($.scaleX=ct,$.scaleY=wt);else {var Lt=0,Bt=0;if(kt==v.mixOut)switch(mt){case r.setup:Lt=$.data.scaleX,Bt=$.data.scaleY,$.scaleX=Lt+(Math.abs(ct)*T.MathUtils.signum(Lt)-Lt)*dt,$.scaleY=Bt+(Math.abs(wt)*T.MathUtils.signum(Bt)-Bt)*dt;break;case r.first:case r.replace:Lt=$.scaleX,Bt=$.scaleY,$.scaleX=Lt+(Math.abs(ct)*T.MathUtils.signum(Lt)-Lt)*dt,$.scaleY=Bt+(Math.abs(wt)*T.MathUtils.signum(Bt)-Bt)*dt;break;case r.add:Lt=$.scaleX,Bt=$.scaleY,$.scaleX=Lt+(Math.abs(ct)*T.MathUtils.signum(Lt)-$.data.scaleX)*dt,$.scaleY=Bt+(Math.abs(wt)*T.MathUtils.signum(Bt)-$.data.scaleY)*dt;}else switch(mt){case r.setup:Lt=Math.abs($.data.scaleX)*T.MathUtils.signum(ct),Bt=Math.abs($.data.scaleY)*T.MathUtils.signum(wt),$.scaleX=Lt+(ct-Lt)*dt,$.scaleY=Bt+(wt-Bt)*dt;break;case r.first:case r.replace:Lt=Math.abs($.scaleX)*T.MathUtils.signum(ct),Bt=Math.abs($.scaleY)*T.MathUtils.signum(wt),$.scaleX=Lt+(ct-Lt)*dt,$.scaleY=Bt+(wt-Bt)*dt;break;case r.add:Lt=T.MathUtils.signum(ct),Bt=T.MathUtils.signum(wt),$.scaleX=Math.abs($.scaleX)*Lt+(ct-Math.abs($.data.scaleX)*Lt)*dt,$.scaleY=Math.abs($.scaleY)*Bt+(wt-Math.abs($.data.scaleY)*Bt)*dt;}}}},W})(d);T.ScaleTimeline=M;var S=(function(it){function W(et){return it.call(this,et)||this}return es(W,it),W.prototype.getPropertyId=function(){return (c.shear<<24)+this.boneIndex},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=this.frames,$=Skeleton.bones[this.boneIndex];if($.active)if(at<ht[0])switch(mt){case r.setup:return $.shearX=$.data.shearX,void($.shearY=$.data.shearY);case r.first:$.shearX+=($.data.shearX-$.shearX)*dt,$.shearY+=($.data.shearY-$.shearY)*dt;}else {var ct=0,wt=0;if(at>=ht[ht.length-W.ENTRIES])ct=ht[ht.length+W.PREV_X],wt=ht[ht.length+W.PREV_Y];else {var yt=f.binarySearch(ht,at,W.ENTRIES);ct=ht[yt+W.PREV_X],wt=ht[yt+W.PREV_Y];var Xt=ht[yt],Dt=this.getCurvePercent(yt/W.ENTRIES-1,1-(at-Xt)/(ht[yt+W.PREV_TIME]-Xt));ct+=(ht[yt+W.X]-ct)*Dt,wt+=(ht[yt+W.Y]-wt)*Dt;}switch(mt){case r.setup:$.shearX=$.data.shearX+ct*dt,$.shearY=$.data.shearY+wt*dt;break;case r.first:case r.replace:$.shearX+=($.data.shearX+ct-$.shearX)*dt,$.shearY+=($.data.shearY+wt-$.shearY)*dt;break;case r.add:$.shearX+=ct*dt,$.shearY+=wt*dt;}}},W})(d);T.ShearTimeline=S;var V=(function(it){function W(et){var ft=it.call(this,et)||this;return ft.frames=T.Utils.newFloatArray(et*W.ENTRIES),ft}return es(W,it),W.prototype.getPropertyId=function(){return (c.color<<24)+this.slotIndex},W.prototype.setFrame=function(et,ft,at,Ct,dt,mt){et*=W.ENTRIES,this.frames[et]=ft,this.frames[et+W.R]=at,this.frames[et+W.G]=Ct,this.frames[et+W.B]=dt,this.frames[et+W.A]=mt;},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=Skeleton.slots[this.slotIndex];if(ht.bone.active){var $=this.frames;if(at<$[0])switch(mt){case r.setup:return void ht.color.setFromColor(ht.data.color);case r.first:var ct=ht.color,wt=ht.data.color;ct.add((wt.r-ct.r)*dt,(wt.g-ct.g)*dt,(wt.b-ct.b)*dt,(wt.a-ct.a)*dt);}else {var yt=0,Xt=0,Dt=0,Lt=0;if(at>=$[$.length-W.ENTRIES]){var Bt=$.length;yt=$[Bt+W.PREV_R],Xt=$[Bt+W.PREV_G],Dt=$[Bt+W.PREV_B],Lt=$[Bt+W.PREV_A];}else {var zt=f.binarySearch($,at,W.ENTRIES);yt=$[zt+W.PREV_R],Xt=$[zt+W.PREV_G],Dt=$[zt+W.PREV_B],Lt=$[zt+W.PREV_A];var Yt=$[zt],Tt=this.getCurvePercent(zt/W.ENTRIES-1,1-(at-Yt)/($[zt+W.PREV_TIME]-Yt));yt+=($[zt+W.R]-yt)*Tt,Xt+=($[zt+W.G]-Xt)*Tt,Dt+=($[zt+W.B]-Dt)*Tt,Lt+=($[zt+W.A]-Lt)*Tt;}if(dt==1)ht.color.set(yt,Xt,Dt,Lt);else {var ct=ht.color;mt==r.setup&&ct.setFromColor(ht.data.color),ct.add((yt-ct.r)*dt,(Xt-ct.g)*dt,(Dt-ct.b)*dt,(Lt-ct.a)*dt);}}}},W.ENTRIES=5,W.PREV_TIME=-5,W.PREV_R=-4,W.PREV_G=-3,W.PREV_B=-2,W.PREV_A=-1,W.R=1,W.G=2,W.B=3,W.A=4,W})(n);T.ColorTimeline=V;var I=(function(it){function W(et){var ft=it.call(this,et)||this;return ft.frames=T.Utils.newFloatArray(et*W.ENTRIES),ft}return es(W,it),W.prototype.getPropertyId=function(){return (c.twoColor<<24)+this.slotIndex},W.prototype.setFrame=function(et,ft,at,Ct,dt,mt,kt,ht,$){et*=W.ENTRIES,this.frames[et]=ft,this.frames[et+W.R]=at,this.frames[et+W.G]=Ct,this.frames[et+W.B]=dt,this.frames[et+W.A]=mt,this.frames[et+W.R2]=kt,this.frames[et+W.G2]=ht,this.frames[et+W.B2]=$;},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=Skeleton.slots[this.slotIndex];if(ht.bone.active){var $=this.frames;if(at<$[0])switch(mt){case r.setup:return ht.color.setFromColor(ht.data.color),void ht.darkColor.setFromColor(ht.data.darkColor);case r.first:var ct=ht.color,wt=ht.darkColor,yt=ht.data.color,Xt=ht.data.darkColor;ct.add((yt.r-ct.r)*dt,(yt.g-ct.g)*dt,(yt.b-ct.b)*dt,(yt.a-ct.a)*dt),wt.add((Xt.r-wt.r)*dt,(Xt.g-wt.g)*dt,(Xt.b-wt.b)*dt,0);}else {var Dt=0,Lt=0,Bt=0,zt=0,Yt=0,Tt=0,bt=0;if(at>=$[$.length-W.ENTRIES]){var _t=$.length;Dt=$[_t+W.PREV_R],Lt=$[_t+W.PREV_G],Bt=$[_t+W.PREV_B],zt=$[_t+W.PREV_A],Yt=$[_t+W.PREV_R2],Tt=$[_t+W.PREV_G2],bt=$[_t+W.PREV_B2];}else {var se=f.binarySearch($,at,W.ENTRIES);Dt=$[se+W.PREV_R],Lt=$[se+W.PREV_G],Bt=$[se+W.PREV_B],zt=$[se+W.PREV_A],Yt=$[se+W.PREV_R2],Tt=$[se+W.PREV_G2],bt=$[se+W.PREV_B2];var Kt=$[se],De=this.getCurvePercent(se/W.ENTRIES-1,1-(at-Kt)/($[se+W.PREV_TIME]-Kt));Dt+=($[se+W.R]-Dt)*De,Lt+=($[se+W.G]-Lt)*De,Bt+=($[se+W.B]-Bt)*De,zt+=($[se+W.A]-zt)*De,Yt+=($[se+W.R2]-Yt)*De,Tt+=($[se+W.G2]-Tt)*De,bt+=($[se+W.B2]-bt)*De;}if(dt==1)ht.color.set(Dt,Lt,Bt,zt),ht.darkColor.set(Yt,Tt,bt,1);else {var ct=ht.color,wt=ht.darkColor;mt==r.setup&&(ct.setFromColor(ht.data.color),wt.setFromColor(ht.data.darkColor)),ct.add((Dt-ct.r)*dt,(Lt-ct.g)*dt,(Bt-ct.b)*dt,(zt-ct.a)*dt),wt.add((Yt-wt.r)*dt,(Tt-wt.g)*dt,(bt-wt.b)*dt,0);}}}},W.ENTRIES=8,W.PREV_TIME=-8,W.PREV_R=-7,W.PREV_G=-6,W.PREV_B=-5,W.PREV_A=-4,W.PREV_R2=-3,W.PREV_G2=-2,W.PREV_B2=-1,W.R=1,W.G=2,W.B=3,W.A=4,W.R2=5,W.G2=6,W.B2=7,W})(n);T.TwoColorTimeline=I;var D=(function(){function it(W){this.frames=T.Utils.newFloatArray(W),this.attachmentNames=new Array(W);}return it.prototype.getPropertyId=function(){return (c.attachment<<24)+this.slotIndex},it.prototype.getFrameCount=function(){return this.frames.length},it.prototype.setFrame=function(W,et,ft){this.frames[W]=et,this.attachmentNames[W]=ft;},it.prototype.apply=function(W,et,ft,at,Ct,dt,mt){var kt=Skeleton.slots[this.slotIndex];if(kt.bone.active)if(mt!=v.mixOut){var ht=this.frames;if(ft<ht[0])dt!=r.setup&&dt!=r.first||this.setAttachment(W,kt,kt.data.attachmentName);else {var $=0;$=ft>=ht[ht.length-1]?ht.length-1:f.binarySearch(ht,ft,1)-1;var ct=this.attachmentNames[$];W.slots[this.slotIndex].setAttachment(ct==null?null:Skeleton.getAttachment(this.slotIndex,ct));}}else dt==r.setup&&this.setAttachment(W,kt,kt.data.attachmentName);},it.prototype.setAttachment=function(W,et,ft){et.setAttachment(ft==null?null:Skeleton.getAttachment(this.slotIndex,ft));},it})();T.AttachmentTimeline=D;var k=null,E=(function(it){function W(et){var ft=it.call(this,et)||this;return ft.frames=T.Utils.newFloatArray(et),ft.frameVertices=new Array(et),k==null&&(k=T.Utils.newFloatArray(64)),ft}return es(W,it),W.prototype.getPropertyId=function(){return (c.deform<<27)+ +this.attachment.id+this.slotIndex},W.prototype.setFrame=function(et,ft,at){this.frames[et]=ft,this.frameVertices[et]=at;},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=Skeleton.slots[this.slotIndex];if(ht.bone.active){var $=ht.getAttachment();if($ instanceof T.VertexAttachment&&$.deformAttachment==this.attachment){var ct=ht.deform;ct.length==0&&(mt=r.setup);var wt=this.frameVertices,yt=wt[0].length,Xt=this.frames;if(at<Xt[0]){var Dt=$;switch(mt){case r.setup:return void(ct.length=0);case r.first:if(dt==1){ct.length=0;break}var Lt=T.Utils.setArraySize(ct,yt);if(Dt.bones==null)for(var Bt=Dt.vertices,zt=0;zt<yt;zt++)Lt[zt]+=(Bt[zt]-Lt[zt])*dt;else {dt=1-dt;for(var zt=0;zt<yt;zt++)Lt[zt]*=dt;}}}else {var Yt=T.Utils.setArraySize(ct,yt);if(at>=Xt[Xt.length-1]){var Tt=wt[Xt.length-1],Dt;if(dt==1)if(mt==r.add)if((Dt=$).bones==null)for(var Bt=Dt.vertices,bt=0;bt<yt;bt++)Yt[bt]+=Tt[bt]-Bt[bt];else for(var _t=0;_t<yt;_t++)Yt[_t]+=Tt[_t];else T.Utils.arrayCopy(Tt,0,Yt,0,yt);else switch(mt){case r.setup:var se=$;if(se.bones==null)for(var Bt=se.vertices,Kt=0;Kt<yt;Kt++){var De=Bt[Kt];Yt[Kt]=De+(Tt[Kt]-De)*dt;}else for(var $e=0;$e<yt;$e++)Yt[$e]=Tt[$e]*dt;break;case r.first:case r.replace:for(var Te=0;Te<yt;Te++)Yt[Te]+=(Tt[Te]-Yt[Te])*dt;break;case r.add:var Dt;if((Dt=$).bones==null)for(var Bt=Dt.vertices,Qe=0;Qe<yt;Qe++)Yt[Qe]+=(Tt[Qe]-Bt[Qe])*dt;else for(var ss=0;ss<yt;ss++)Yt[ss]+=Tt[ss]*dt;}}else {var us=f.binarySearch(Xt,at),hs=wt[us-1],as=wt[us],xs=Xt[us],os=this.getCurvePercent(us-1,1-(at-xs)/(Xt[us-1]-xs)),Dt;if(dt==1)if(mt==r.add)if((Dt=$).bones==null)for(var Bt=Dt.vertices,cs=0;cs<yt;cs++){var ts=hs[cs];Yt[cs]+=ts+(as[cs]-ts)*os-Bt[cs];}else for(var ws=0;ws<yt;ws++){var ts=hs[ws];Yt[ws]+=ts+(as[ws]-ts)*os;}else for(var is=0;is<yt;is++){var ts=hs[is];Yt[is]=ts+(as[is]-ts)*os;}else switch(mt){case r.setup:var Us=$;if(Us.bones==null)for(var Bt=Us.vertices,Ss=0;Ss<yt;Ss++){var ts=hs[Ss],De=Bt[Ss];Yt[Ss]=De+(ts+(as[Ss]-ts)*os-De)*dt;}else for(var Es=0;Es<yt;Es++){var ts=hs[Es];Yt[Es]=(ts+(as[Es]-ts)*os)*dt;}break;case r.first:case r.replace:for(var ys=0;ys<yt;ys++){var ts=hs[ys];Yt[ys]+=(ts+(as[ys]-ts)*os-Yt[ys])*dt;}break;case r.add:var Dt;if((Dt=$).bones==null)for(var Bt=Dt.vertices,ks=0;ks<yt;ks++){var ts=hs[ks];Yt[ks]+=(ts+(as[ks]-ts)*os-Bt[ks])*dt;}else for(var Ws=0;Ws<yt;Ws++){var ts=hs[Ws];Yt[Ws]+=(ts+(as[Ws]-ts)*os)*dt;}}}}}}},W})(n);T.DeformTimeline=E;var X=(function(){function it(W){this.frames=T.Utils.newFloatArray(W),this.events=new Array(W);}return it.prototype.getPropertyId=function(){return c.event<<24},it.prototype.getFrameCount=function(){return this.frames.length},it.prototype.setFrame=function(W,et){this.frames[W]=et.time,this.events[W]=et;},it.prototype.apply=function(W,et,ft,at,Ct,dt,mt){if(at!=null){var kt=this.frames,ht=this.frames.length;if(et>ft)this.apply(W,et,Number.MAX_VALUE,at,Ct,dt,mt),et=-1;else if(et>=kt[ht-1])return;if(!(ft<kt[0])){var $=0;if(et<kt[0])$=0;else for(var ct=kt[$=f.binarySearch(kt,et)];$>0&&kt[$-1]==ct;)$--;for(;$<ht&&ft>=kt[$];$++)at.push(this.events[$]);}}},it})();T.EventTimeline=X;var z=(function(){function it(W){this.frames=T.Utils.newFloatArray(W),this.drawOrders=new Array(W);}return it.prototype.getPropertyId=function(){return c.drawOrder<<24},it.prototype.getFrameCount=function(){return this.frames.length},it.prototype.setFrame=function(W,et,ft){this.frames[W]=et,this.drawOrders[W]=ft;},it.prototype.apply=function(W,et,ft,at,Ct,dt,mt){var kt=Skeleton.drawOrder,ht=Skeleton.slots;if(mt!=v.mixOut){var $=this.frames;if(ft<$[0])dt!=r.setup&&dt!=r.first||T.Utils.arrayCopy(W.slots,0,Skeleton.drawOrder,0,Skeleton.slots.length);else {var ct=0;ct=ft>=$[$.length-1]?$.length-1:f.binarySearch($,ft)-1;var wt=this.drawOrders[ct];if(wt==null)T.Utils.arrayCopy(ht,0,kt,0,ht.length);else for(var yt=0,Xt=wt.length;yt<Xt;yt++)kt[yt]=ht[wt[yt]];}}else dt==r.setup&&T.Utils.arrayCopy(W.slots,0,Skeleton.drawOrder,0,Skeleton.slots.length);},it})();T.DrawOrderTimeline=z;var Q=(function(it){function W(et){var ft=it.call(this,et)||this;return ft.frames=T.Utils.newFloatArray(et*W.ENTRIES),ft}return es(W,it),W.prototype.getPropertyId=function(){return (c.ikConstraint<<24)+this.ikConstraintIndex},W.prototype.setFrame=function(et,ft,at,Ct,dt,mt,kt){et*=W.ENTRIES,this.frames[et]=ft,this.frames[et+W.MIX]=at,this.frames[et+W.SOFTNESS]=Ct,this.frames[et+W.BEND_DIRECTION]=dt,this.frames[et+W.COMPRESS]=mt?1:0,this.frames[et+W.STRETCH]=kt?1:0;},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=this.frames,$=Skeleton.ikConstraints[this.ikConstraintIndex];if($.active)if(at<ht[0])switch(mt){case r.setup:return $.mix=$.data.mix,$.softness=$.data.softness,$.bendDirection=$.data.bendDirection,$.compress=$.data.compress,void($.stretch=$.data.stretch);case r.first:$.mix+=($.data.mix-$.mix)*dt,$.softness+=($.data.softness-$.softness)*dt,$.bendDirection=$.data.bendDirection,$.compress=$.data.compress,$.stretch=$.data.stretch;}else if(at>=ht[ht.length-W.ENTRIES])mt==r.setup?($.mix=$.data.mix+(ht[ht.length+W.PREV_MIX]-$.data.mix)*dt,$.softness=$.data.softness+(ht[ht.length+W.PREV_SOFTNESS]-$.data.softness)*dt,kt==v.mixOut?($.bendDirection=$.data.bendDirection,$.compress=$.data.compress,$.stretch=$.data.stretch):($.bendDirection=ht[ht.length+W.PREV_BEND_DIRECTION],$.compress=ht[ht.length+W.PREV_COMPRESS]!=0,$.stretch=ht[ht.length+W.PREV_STRETCH]!=0)):($.mix+=(ht[ht.length+W.PREV_MIX]-$.mix)*dt,$.softness+=(ht[ht.length+W.PREV_SOFTNESS]-$.softness)*dt,kt==v.mixIn&&($.bendDirection=ht[ht.length+W.PREV_BEND_DIRECTION],$.compress=ht[ht.length+W.PREV_COMPRESS]!=0,$.stretch=ht[ht.length+W.PREV_STRETCH]!=0));else {var ct=f.binarySearch(ht,at,W.ENTRIES),wt=ht[ct+W.PREV_MIX],yt=ht[ct+W.PREV_SOFTNESS],Xt=ht[ct],Dt=this.getCurvePercent(ct/W.ENTRIES-1,1-(at-Xt)/(ht[ct+W.PREV_TIME]-Xt));mt==r.setup?($.mix=$.data.mix+(wt+(ht[ct+W.MIX]-wt)*Dt-$.data.mix)*dt,$.softness=$.data.softness+(yt+(ht[ct+W.SOFTNESS]-yt)*Dt-$.data.softness)*dt,kt==v.mixOut?($.bendDirection=$.data.bendDirection,$.compress=$.data.compress,$.stretch=$.data.stretch):($.bendDirection=ht[ct+W.PREV_BEND_DIRECTION],$.compress=ht[ct+W.PREV_COMPRESS]!=0,$.stretch=ht[ct+W.PREV_STRETCH]!=0)):($.mix+=(wt+(ht[ct+W.MIX]-wt)*Dt-$.mix)*dt,$.softness+=(yt+(ht[ct+W.SOFTNESS]-yt)*Dt-$.softness)*dt,kt==v.mixIn&&($.bendDirection=ht[ct+W.PREV_BEND_DIRECTION],$.compress=ht[ct+W.PREV_COMPRESS]!=0,$.stretch=ht[ct+W.PREV_STRETCH]!=0));}},W.ENTRIES=6,W.PREV_TIME=-6,W.PREV_MIX=-5,W.PREV_SOFTNESS=-4,W.PREV_BEND_DIRECTION=-3,W.PREV_COMPRESS=-2,W.PREV_STRETCH=-1,W.MIX=1,W.SOFTNESS=2,W.BEND_DIRECTION=3,W.COMPRESS=4,W.STRETCH=5,W})(n);T.IkConstraintTimeline=Q;var st=(function(it){function W(et){var ft=it.call(this,et)||this;return ft.frames=T.Utils.newFloatArray(et*W.ENTRIES),ft}return es(W,it),W.prototype.getPropertyId=function(){return (c.transformConstraint<<24)+this.transformConstraintIndex},W.prototype.setFrame=function(et,ft,at,Ct,dt,mt){et*=W.ENTRIES,this.frames[et]=ft,this.frames[et+W.ROTATE]=at,this.frames[et+W.TRANSLATE]=Ct,this.frames[et+W.SCALE]=dt,this.frames[et+W.SHEAR]=mt;},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=this.frames,$=Skeleton.transformConstraints[this.transformConstraintIndex];if($.active)if(at<ht[0]){var ct=$.data;switch(mt){case r.setup:return $.rotateMix=ct.rotateMix,$.translateMix=ct.translateMix,$.scaleMix=ct.scaleMix,void($.shearMix=ct.shearMix);case r.first:$.rotateMix+=(ct.rotateMix-$.rotateMix)*dt,$.translateMix+=(ct.translateMix-$.translateMix)*dt,$.scaleMix+=(ct.scaleMix-$.scaleMix)*dt,$.shearMix+=(ct.shearMix-$.shearMix)*dt;}}else {var wt=0,yt=0,Xt=0,Dt=0;if(at>=ht[ht.length-W.ENTRIES]){var Lt=ht.length;wt=ht[Lt+W.PREV_ROTATE],yt=ht[Lt+W.PREV_TRANSLATE],Xt=ht[Lt+W.PREV_SCALE],Dt=ht[Lt+W.PREV_SHEAR];}else {var Bt=f.binarySearch(ht,at,W.ENTRIES);wt=ht[Bt+W.PREV_ROTATE],yt=ht[Bt+W.PREV_TRANSLATE],Xt=ht[Bt+W.PREV_SCALE],Dt=ht[Bt+W.PREV_SHEAR];var zt=ht[Bt],Yt=this.getCurvePercent(Bt/W.ENTRIES-1,1-(at-zt)/(ht[Bt+W.PREV_TIME]-zt));wt+=(ht[Bt+W.ROTATE]-wt)*Yt,yt+=(ht[Bt+W.TRANSLATE]-yt)*Yt,Xt+=(ht[Bt+W.SCALE]-Xt)*Yt,Dt+=(ht[Bt+W.SHEAR]-Dt)*Yt;}if(mt==r.setup){var ct=$.data;$.rotateMix=ct.rotateMix+(wt-ct.rotateMix)*dt,$.translateMix=ct.translateMix+(yt-ct.translateMix)*dt,$.scaleMix=ct.scaleMix+(Xt-ct.scaleMix)*dt,$.shearMix=ct.shearMix+(Dt-ct.shearMix)*dt;}else $.rotateMix+=(wt-$.rotateMix)*dt,$.translateMix+=(yt-$.translateMix)*dt,$.scaleMix+=(Xt-$.scaleMix)*dt,$.shearMix+=(Dt-$.shearMix)*dt;}},W.ENTRIES=5,W.PREV_TIME=-5,W.PREV_ROTATE=-4,W.PREV_TRANSLATE=-3,W.PREV_SCALE=-2,W.PREV_SHEAR=-1,W.ROTATE=1,W.TRANSLATE=2,W.SCALE=3,W.SHEAR=4,W})(n);T.TransformConstraintTimeline=st;var ut=(function(it){function W(et){var ft=it.call(this,et)||this;return ft.frames=T.Utils.newFloatArray(et*W.ENTRIES),ft}return es(W,it),W.prototype.getPropertyId=function(){return (c.pathConstraintPosition<<24)+this.pathConstraintIndex},W.prototype.setFrame=function(et,ft,at){et*=W.ENTRIES,this.frames[et]=ft,this.frames[et+W.VALUE]=at;},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=this.frames,$=Skeleton.pathConstraints[this.pathConstraintIndex];if($.active)if(at<ht[0])switch(mt){case r.setup:return void($.position=$.data.position);case r.first:$.position+=($.data.position-$.position)*dt;}else {var ct=0;if(at>=ht[ht.length-W.ENTRIES])ct=ht[ht.length+W.PREV_VALUE];else {var wt=f.binarySearch(ht,at,W.ENTRIES);ct=ht[wt+W.PREV_VALUE];var yt=ht[wt],Xt=this.getCurvePercent(wt/W.ENTRIES-1,1-(at-yt)/(ht[wt+W.PREV_TIME]-yt));ct+=(ht[wt+W.VALUE]-ct)*Xt;}mt==r.setup?$.position=$.data.position+(ct-$.data.position)*dt:$.position+=(ct-$.position)*dt;}},W.ENTRIES=2,W.PREV_TIME=-2,W.PREV_VALUE=-1,W.VALUE=1,W})(n);T.PathConstraintPositionTimeline=ut;var nt=(function(it){function W(et){return it.call(this,et)||this}return es(W,it),W.prototype.getPropertyId=function(){return (c.pathConstraintSpacing<<24)+this.pathConstraintIndex},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=this.frames,$=Skeleton.pathConstraints[this.pathConstraintIndex];if($.active)if(at<ht[0])switch(mt){case r.setup:return void($.spacing=$.data.spacing);case r.first:$.spacing+=($.data.spacing-$.spacing)*dt;}else {var ct=0;if(at>=ht[ht.length-W.ENTRIES])ct=ht[ht.length+W.PREV_VALUE];else {var wt=f.binarySearch(ht,at,W.ENTRIES);ct=ht[wt+W.PREV_VALUE];var yt=ht[wt],Xt=this.getCurvePercent(wt/W.ENTRIES-1,1-(at-yt)/(ht[wt+W.PREV_TIME]-yt));ct+=(ht[wt+W.VALUE]-ct)*Xt;}mt==r.setup?$.spacing=$.data.spacing+(ct-$.data.spacing)*dt:$.spacing+=(ct-$.spacing)*dt;}},W})(ut);T.PathConstraintSpacingTimeline=nt;var ot=(function(it){function W(et){var ft=it.call(this,et)||this;return ft.frames=T.Utils.newFloatArray(et*W.ENTRIES),ft}return es(W,it),W.prototype.getPropertyId=function(){return (c.pathConstraintMix<<24)+this.pathConstraintIndex},W.prototype.setFrame=function(et,ft,at,Ct){et*=W.ENTRIES,this.frames[et]=ft,this.frames[et+W.ROTATE]=at,this.frames[et+W.TRANSLATE]=Ct;},W.prototype.apply=function(et,ft,at,Ct,dt,mt,kt){var ht=this.frames,$=Skeleton.pathConstraints[this.pathConstraintIndex];if($.active)if(at<ht[0])switch(mt){case r.setup:return $.rotateMix=$.data.rotateMix,void($.translateMix=$.data.translateMix);case r.first:$.rotateMix+=($.data.rotateMix-$.rotateMix)*dt,$.translateMix+=($.data.translateMix-$.translateMix)*dt;}else {var ct=0,wt=0;if(at>=ht[ht.length-W.ENTRIES])ct=ht[ht.length+W.PREV_ROTATE],wt=ht[ht.length+W.PREV_TRANSLATE];else {var yt=f.binarySearch(ht,at,W.ENTRIES);ct=ht[yt+W.PREV_ROTATE],wt=ht[yt+W.PREV_TRANSLATE];var Xt=ht[yt],Dt=this.getCurvePercent(yt/W.ENTRIES-1,1-(at-Xt)/(ht[yt+W.PREV_TIME]-Xt));ct+=(ht[yt+W.ROTATE]-ct)*Dt,wt+=(ht[yt+W.TRANSLATE]-wt)*Dt;}mt==r.setup?($.rotateMix=$.data.rotateMix+(ct-$.data.rotateMix)*dt,$.translateMix=$.data.translateMix+(wt-$.data.translateMix)*dt):($.rotateMix+=(ct-$.rotateMix)*dt,$.translateMix+=(wt-$.translateMix)*dt);}},W.ENTRIES=3,W.PREV_TIME=-3,W.PREV_ROTATE=-2,W.PREV_TRANSLATE=-1,W.ROTATE=1,W.TRANSLATE=2,W})(n);T.PathConstraintMixTimeline=ot;}))(Rt||(Rt={})),(function(T){var f=(function(){function u(d){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new v(this),this.propertyIDs=new T.IntSet,this.animationsChanged=false,this.trackEntryPool=new T.Pool((function(){return new r})),this.data=d;}return u.prototype.update=function(d){d*=this.timeScale;for(var M=this.tracks,S=0,V=M.length;S<V;S++){var I=M[S];if(I!=null){I.animationLast=I.nextAnimationLast,I.trackLast=I.nextTrackLast;var D=d*I.timeScale;if(I.delay>0){if(I.delay-=D,I.delay>0)continue;D=-I.delay,I.delay=0;}var k=I.next;if(k!=null){var E=I.trackLast-k.delay;if(E>=0){for(k.delay=0,k.trackTime+=I.timeScale==0?0:(E/I.timeScale+d)*k.timeScale,I.trackTime+=D,this.setCurrent(S,k,true);k.mixingFrom!=null;)k.mixTime+=d,k=k.mixingFrom;continue}}else if(I.trackLast>=I.trackEnd&&I.mixingFrom==null){M[S]=null,this.queue.end(I),this.disposeNext(I);continue}if(I.mixingFrom!=null&&this.updateMixingFrom(I,d)){var X=I.mixingFrom;for(I.mixingFrom=null,X!=null&&(X.mixingTo=null);X!=null;)this.queue.end(X),X=X.mixingFrom;}I.trackTime+=D;}}this.queue.drain();},u.prototype.updateMixingFrom=function(d,M){var S=d.mixingFrom;if(S==null)return  true;var V=this.updateMixingFrom(S,M);return S.animationLast=S.nextAnimationLast,S.trackLast=S.nextTrackLast,d.mixTime>0&&d.mixTime>=d.mixDuration?(S.totalAlpha!=0&&d.mixDuration!=0||(d.mixingFrom=S.mixingFrom,S.mixingFrom!=null&&(S.mixingFrom.mixingTo=d),d.interruptAlpha=S.interruptAlpha,this.queue.end(S)),V):(S.trackTime+=M*S.timeScale,d.mixTime+=M,false)},u.prototype.apply=function(d){if(d==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var M=this.events,S=this.tracks,V=false,I=0,D=S.length;I<D;I++){var k=S[I];if(!(k==null||k.delay>0)){V=true;var E=I==0?T.MixBlend.first:k.mixBlend,X=k.alpha;k.mixingFrom!=null?X*=this.applyMixingFrom(k,Skeleton,E):k.trackTime>=k.trackEnd&&k.next==null&&(X=0);var z=k.animationLast,Q=k.getAnimationTime(),st=k.animation.timelines.length,ut=k.animation.timelines;if(I==0&&X==1||E==T.MixBlend.add)for(var nt=0;nt<st;nt++){T.Utils.webkit602BugfixHelper(X,E);var ot=ut[nt];ot instanceof T.AttachmentTimeline?this.applyAttachmentTimeline(ot,Skeleton,Q,E,true):ot.apply(d,z,Q,M,X,E,T.MixDirection.mixIn);}else {var it=k.timelineMode,W=k.timelinesRotation.length==0;W&&T.Utils.setArraySize(k.timelinesRotation,st<<1,null);for(var et=k.timelinesRotation,nt=0;nt<st;nt++){var ft=ut[nt],at=it[nt]==u.SUBSEQUENT?E:T.MixBlend.setup;ft instanceof T.RotateTimeline?this.applyRotateTimeline(ft,Skeleton,Q,X,at,et,nt<<1,W):ft instanceof T.AttachmentTimeline?this.applyAttachmentTimeline(ft,Skeleton,Q,E,true):(T.Utils.webkit602BugfixHelper(X,E),ft.apply(d,z,Q,M,X,at,T.MixDirection.mixIn));}}this.queueEvents(k,Q),M.length=0,k.nextAnimationLast=Q,k.nextTrackLast=k.trackTime;}}for(var Ct=this.unkeyedState+u.SETUP,dt=Skeleton.slots,mt=0,kt=Skeleton.slots.length;mt<kt;mt++){var ht=dt[mt];if(ht.attachmentState==Ct){var $=ht.data.attachmentName;ht.setAttachment($==null?null:Skeleton.getAttachment(ht.data.index,$));}}return this.unkeyedState+=2,this.queue.drain(),V},u.prototype.applyMixingFrom=function(d,M,S){var V=d.mixingFrom;V.mixingFrom!=null&&this.applyMixingFrom(V,M,S);var I=0;d.mixDuration==0?(I=1,S==T.MixBlend.first&&(S=T.MixBlend.setup)):((I=d.mixTime/d.mixDuration)>1&&(I=1),S!=T.MixBlend.first&&(S=V.mixBlend));var D=I<V.eventThreshold?this.events:null,k=I<V.attachmentThreshold,E=I<V.drawOrderThreshold,X=V.animationLast,z=V.getAnimationTime(),Q=V.animation.timelines.length,st=V.animation.timelines,ut=V.alpha*d.interruptAlpha,nt=ut*(1-I);if(S==T.MixBlend.add)for(var ot=0;ot<Q;ot++)st[ot].apply(skeleton,X,z,D,nt,S,T.MixDirection.mixOut);else {var it=V.timelineMode,W=V.timelineHoldMix,et=V.timelinesRotation.length==0;et&&T.Utils.setArraySize(V.timelinesRotation,Q<<1,null);var ft=V.timelinesRotation;V.totalAlpha=0;for(var ot=0;ot<Q;ot++){var at=st[ot],Ct=T.MixDirection.mixOut,dt=void 0,mt=0;switch(it[ot]){case u.SUBSEQUENT:if(!E&&at instanceof T.DrawOrderTimeline)continue;dt=S,mt=nt;break;case u.FIRST:dt=T.MixBlend.setup,mt=nt;break;case u.HOLD_SUBSEQUENT:dt=S,mt=ut;break;case u.HOLD_FIRST:dt=T.MixBlend.setup,mt=ut;break;default:dt=T.MixBlend.setup;var kt=W[ot];mt=ut*Math.max(0,1-kt.mixTime/kt.mixDuration);}V.totalAlpha+=mt,at instanceof T.RotateTimeline?this.applyRotateTimeline(at,M,z,mt,dt,ft,ot<<1,et):at instanceof T.AttachmentTimeline?this.applyAttachmentTimeline(at,M,z,dt,k):(T.Utils.webkit602BugfixHelper(mt,S),E&&at instanceof T.DrawOrderTimeline&&dt==T.MixBlend.setup&&(Ct=T.MixDirection.mixIn),at.apply(skeleton,X,z,D,mt,dt,Ct));}}return d.mixDuration>0&&this.queueEvents(V,z),this.events.length=0,V.nextAnimationLast=z,V.nextTrackLast=V.trackTime,I},u.prototype.applyAttachmentTimeline=function(d,M,S,V,I){var D=M.slots[d.slotIndex];if(D.bone.active){var k=d.frames,E;S<k[0]?V!=T.MixBlend.setup&&V!=T.MixBlend.first||this.setAttachment(skeleton,D,D.data.attachmentName,I):(E=S>=k[k.length-1]?k.length-1:T.Animation.binarySearch(k,S)-1,this.setAttachment(skeleton,D,d.attachmentNames[E],I)),D.attachmentState<=this.unkeyedState&&(D.attachmentState=this.unkeyedState+u.SETUP);}},u.prototype.setAttachment=function(d,M,S,V){M.setAttachment(S==null?null:Skeleton.getAttachment(M.data.index,S)),V&&(M.attachmentState=this.unkeyedState+u.CURRENT);},u.prototype.applyRotateTimeline=function(d,M,S,V,I,D,k,E){if(E&&(D[k]=0),V!=1){var X=d,z=X.frames,Q=M.bones[X.boneIndex];if(Q.active){var st=0,ut=0;if(S<z[0])switch(I){case T.MixBlend.setup:Q.rotation=Q.data.rotation;default:return;case T.MixBlend.first:st=Q.rotation,ut=Q.data.rotation;}else if(st=I==T.MixBlend.setup?Q.data.rotation:Q.rotation,S>=z[z.length-T.RotateTimeline.ENTRIES])ut=Q.data.rotation+z[z.length+T.RotateTimeline.PREV_ROTATION];else {var nt=T.Animation.binarySearch(z,S,T.RotateTimeline.ENTRIES),ot=z[nt+T.RotateTimeline.PREV_ROTATION],it=z[nt],W=X.getCurvePercent((nt>>1)-1,1-(S-it)/(z[nt+T.RotateTimeline.PREV_TIME]-it));ut=z[nt+T.RotateTimeline.ROTATION]-ot,ut=ot+(ut-=360*(16384-(16384.499999999996-ut/360|0)))*W+Q.data.rotation,ut-=360*(16384-(16384.499999999996-ut/360|0));}var et=0,ft=ut-st;if((ft-=360*(16384-(16384.499999999996-ft/360|0)))==0)et=D[k];else {var at=0,Ct=0;E?(at=0,Ct=ft):(at=D[k],Ct=D[k+1]);var dt=ft>0,mt=at>=0;T.MathUtils.signum(Ct)!=T.MathUtils.signum(ft)&&Math.abs(Ct)<=90&&(Math.abs(at)>180&&(at+=360*T.MathUtils.signum(at)),mt=dt),et=ft+at-at%360,mt!=dt&&(et+=360*T.MathUtils.signum(at)),D[k]=et;}D[k+1]=ft,st+=et*V,Q.rotation=st-360*(16384-(16384.499999999996-st/360|0));}}else d.apply(skeleton,0,S,null,1,I,T.MixDirection.mixIn);},u.prototype.queueEvents=function(d,M){for(var S=d.animationStart,V=d.animationEnd,I=V-S,D=d.trackLast%I,k=this.events,E=0,X=k.length;E<X;E++){var z=k[E];if(z.time<D)break;z.time>V||this.queue.event(d,z);}for((d.loop?I==0||D>d.trackTime%I:M>=V&&d.animationLast<V)&&this.queue.complete(d);E<X;E++){k[E].time<S||this.queue.event(d,k[E]);}},u.prototype.clearTracks=function(){var d=this.queue.drainDisabled;this.queue.drainDisabled=true;for(var M=0,S=this.tracks.length;M<S;M++)this.clearTrack(M);this.tracks.length=0,this.queue.drainDisabled=d,this.queue.drain();},u.prototype.clearTrack=function(d){if(!(d>=this.tracks.length)){var M=this.tracks[d];if(M!=null){this.queue.end(M),this.disposeNext(M);for(var S=M;;){var V=S.mixingFrom;if(V==null)break;this.queue.end(V),S.mixingFrom=null,S.mixingTo=null,S=V;}this.tracks[M.trackIndex]=null,this.queue.drain();}}},u.prototype.setCurrent=function(d,M,S){var V=this.expandToIndex(d);this.tracks[d]=M,V!=null&&(S&&this.queue.interrupt(V),M.mixingFrom=V,V.mixingTo=M,M.mixTime=0,V.mixingFrom!=null&&V.mixDuration>0&&(M.interruptAlpha*=Math.min(1,V.mixTime/V.mixDuration)),V.timelinesRotation.length=0),this.queue.start(M);},u.prototype.setAnimation=function(d,M,S){var V=this.data.skeletonData.findAnimation(M);if(V==null)throw new Error("Animation not found: "+M);return this.setAnimationWith(d,V,S)},u.prototype.setAnimationWith=function(d,M,S){if(M==null)throw new Error("animation cannot be null.");var V=true,I=this.expandToIndex(d);I!=null&&(I.nextTrackLast==-1?(this.tracks[d]=I.mixingFrom,this.queue.interrupt(I),this.queue.end(I),this.disposeNext(I),I=I.mixingFrom,V=false):this.disposeNext(I));var D=this.trackEntry(d,M,S,I);return this.setCurrent(d,D,V),this.queue.drain(),D},u.prototype.addAnimation=function(d,M,S,V){var I=this.data.skeletonData.findAnimation(M);if(I==null)throw new Error("Animation not found: "+M);return this.addAnimationWith(d,I,S,V)},u.prototype.addAnimationWith=function(d,M,S,V){if(M==null)throw new Error("animation cannot be null.");var I=this.expandToIndex(d);if(I!=null)for(;I.next!=null;)I=I.next;var D=this.trackEntry(d,M,S,I);if(I==null)this.setCurrent(d,D,true),this.queue.drain();else if(I.next=D,V<=0){var k=I.animationEnd-I.animationStart;k!=0?(I.loop?V+=k*(1+(I.trackTime/k|0)):V+=Math.max(k,I.trackTime),V-=this.data.getMix(I.animation,M)):V=I.trackTime;}return D.delay=V,D},u.prototype.setEmptyAnimation=function(d,M){var S=this.setAnimationWith(d,u.emptyAnimation,false);return S.mixDuration=M,S.trackEnd=M,S},u.prototype.addEmptyAnimation=function(d,M,S){S<=0&&(S-=M);var V=this.addAnimationWith(d,u.emptyAnimation,false,S);return V.mixDuration=M,V.trackEnd=M,V},u.prototype.setEmptyAnimations=function(d){var M=this.queue.drainDisabled;this.queue.drainDisabled=true;for(var S=0,V=this.tracks.length;S<V;S++){var I=this.tracks[S];I!=null&&this.setEmptyAnimation(I.trackIndex,d);}this.queue.drainDisabled=M,this.queue.drain();},u.prototype.expandToIndex=function(d){return d<this.tracks.length?this.tracks[d]:(T.Utils.ensureArrayCapacity(this.tracks,d+1,null),this.tracks.length=d+1,null)},u.prototype.trackEntry=function(d,M,S,V){var I=this.trackEntryPool.obtain();return I.trackIndex=d,I.animation=M,I.loop=S,I.holdPrevious=false,I.eventThreshold=0,I.attachmentThreshold=0,I.drawOrderThreshold=0,I.animationStart=0,I.animationEnd=M.duration,I.animationLast=-1,I.nextAnimationLast=-1,I.delay=0,I.trackTime=0,I.trackLast=-1,I.nextTrackLast=-1,I.trackEnd=Number.MAX_VALUE,I.timeScale=1,I.alpha=1,I.interruptAlpha=1,I.mixTime=0,I.mixDuration=V==null?0:this.data.getMix(V.animation,M),I.mixBlend=T.MixBlend.replace,I},u.prototype.disposeNext=function(d){for(var M=d.next;M!=null;)this.queue.dispose(M),M=M.next;d.next=null;},u.prototype._animationsChanged=function(){this.animationsChanged=false,this.propertyIDs.clear();for(var d=0,M=this.tracks.length;d<M;d++){var S=this.tracks[d];if(S!=null){for(;S.mixingFrom!=null;)S=S.mixingFrom;do S.mixingFrom!=null&&S.mixBlend==T.MixBlend.add||this.computeHold(S),S=S.mixingTo;while(S!=null)}}},u.prototype.computeHold=function(d){var M=d.mixingTo,S=d.animation.timelines,V=d.animation.timelines.length,I=T.Utils.setArraySize(d.timelineMode,V);d.timelineHoldMix.length=0;var D=T.Utils.setArraySize(d.timelineHoldMix,V),k=this.propertyIDs;if(M!=null&&M.holdPrevious)for(var E=0;E<V;E++)I[E]=k.add(S[E].getPropertyId())?u.HOLD_FIRST:u.HOLD_SUBSEQUENT;else t:for(var E=0;E<V;E++){var X=S[E],z=X.getPropertyId();if(k.add(z))if(M==null||X instanceof T.AttachmentTimeline||X instanceof T.DrawOrderTimeline||X instanceof T.EventTimeline||!M.animation.hasTimeline(z))I[E]=u.FIRST;else {for(var Q=M.mixingTo;Q!=null;Q=Q.mixingTo)if(!Q.animation.hasTimeline(z)){if(d.mixDuration>0){I[E]=u.HOLD_MIX,D[E]=Q;continue t}break}I[E]=u.HOLD_FIRST;}else I[E]=u.SUBSEQUENT;}},u.prototype.getCurrent=function(d){return d>=this.tracks.length?null:this.tracks[d]},u.prototype.addListener=function(d){if(d==null)throw new Error("listener cannot be null.");this.listeners.push(d);},u.prototype.removeListener=function(d){var M=this.listeners.indexOf(d);M>=0&&this.listeners.splice(M,1);},u.prototype.clearListeners=function(){this.listeners.length=0;},u.prototype.clearListenerNotifications=function(){this.queue.clear();},u.emptyAnimation=new T.Animation("<empty>",[],0),u.SUBSEQUENT=0,u.FIRST=1,u.HOLD_SUBSEQUENT=2,u.HOLD_FIRST=3,u.HOLD_MIX=4,u.SETUP=1,u.CURRENT=2,u})();T.AnimationState=f;var r=(function(){function u(){this.mixBlend=T.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array;}return u.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;},u.prototype.getAnimationTime=function(){if(this.loop){var d=this.animationEnd-this.animationStart;return d==0?this.animationStart:this.trackTime%d+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},u.prototype.setAnimationLast=function(d){this.animationLast=d,this.nextAnimationLast=d;},u.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},u.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0;},u})();T.TrackEntry=r;var v=(function(){function u(d){this.objects=[],this.drainDisabled=false,this.animState=d;}return u.prototype.start=function(d){this.objects.push(c.start),this.objects.push(d),this.animState.animationsChanged=true;},u.prototype.interrupt=function(d){this.objects.push(c.interrupt),this.objects.push(d);},u.prototype.end=function(d){this.objects.push(c.end),this.objects.push(d),this.animState.animationsChanged=true;},u.prototype.dispose=function(d){this.objects.push(c.dispose),this.objects.push(d);},u.prototype.complete=function(d){this.objects.push(c.complete),this.objects.push(d);},u.prototype.event=function(d,M){this.objects.push(c.event),this.objects.push(d),this.objects.push(M);},u.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=true;for(var d=this.objects,M=this.animState.listeners,S=0;S<d.length;S+=2){var V=d[S],I=d[S+1];switch(V){case c.start:I.listener!=null&&I.listener.start&&I.listener.start(I);for(var D=0;D<M.length;D++)M[D].start&&M[D].start(I);break;case c.interrupt:I.listener!=null&&I.listener.interrupt&&I.listener.interrupt(I);for(var D=0;D<M.length;D++)M[D].interrupt&&M[D].interrupt(I);break;case c.end:I.listener!=null&&I.listener.end&&I.listener.end(I);for(var D=0;D<M.length;D++)M[D].end&&M[D].end(I);case c.dispose:I.listener!=null&&I.listener.dispose&&I.listener.dispose(I);for(var D=0;D<M.length;D++)M[D].dispose&&M[D].dispose(I);this.animState.trackEntryPool.free(I);break;case c.complete:I.listener!=null&&I.listener.complete&&I.listener.complete(I);for(var D=0;D<M.length;D++)M[D].complete&&M[D].complete(I);break;case c.event:var k=d[2+S++];I.listener!=null&&I.listener.event&&I.listener.event(I,k);for(var D=0;D<M.length;D++)M[D].event&&M[D].event(I,k);}}this.clear(),this.drainDisabled=false;}},u.prototype.clear=function(){this.objects.length=0;},u})(),c;T.EventQueue=v,(function(u){u[u.start=0]="start",u[u.interrupt=1]="interrupt",u[u.end=2]="end",u[u.dispose=3]="dispose",u[u.complete=4]="complete",u[u.event=5]="event";})(c=T.EventType||(T.EventType={}));var n=(function(){function u(){}return u.prototype.start=function(d){},u.prototype.interrupt=function(d){},u.prototype.end=function(d){},u.prototype.dispose=function(d){},u.prototype.complete=function(d){},u.prototype.event=function(d,M){},u})();T.AnimationStateAdapter=n;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v){if(this.animationToMixTime={},this.defaultMix=0,v==null)throw new Error("skeletonData cannot be null.");this.skeletonData=SkeletonData;}return r.prototype.setMix=function(v,c,n){var u=this.skeletonData.findAnimation(v);if(u==null)throw new Error("Animation not found: "+v);var d=this.skeletonData.findAnimation(c);if(d==null)throw new Error("Animation not found: "+c);this.setMixWith(u,d,n);},r.prototype.setMixWith=function(v,c,n){if(v==null)throw new Error("from cannot be null.");if(c==null)throw new Error("to cannot be null.");var u=v.name+"."+c.name;this.animationToMixTime[u]=n;},r.prototype.getMix=function(v,c){var n=v.name+"."+c.name,u=this.animationToMixTime[n];return u===void 0?this.defaultMix:u},r})();T.AnimationStateData=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c){c===void 0&&(c=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=v,this.pathPrefix=c;}return r.prototype.downloadText=function(v,c,n){var u=new XMLHttpRequest;u.overrideMimeType("text/html"),this.rawDataUris[v]&&(v=this.rawDataUris[v]),u.open("GET",v,true),u.onload=function(){u.status==200?c(u.responseText):n(u.status,u.responseText);},u.onerror=function(){n(u.status,u.responseText);},u.send();},r.prototype.downloadBinary=function(v,c,n){var u=new XMLHttpRequest;this.rawDataUris[v]&&(v=this.rawDataUris[v]),u.open("GET",v,true),u.responseType="arraybuffer",u.onload=function(){u.status==200?c(new Uint8Array(u.response)):n(u.status,u.responseText);},u.onerror=function(){n(u.status,u.responseText);},u.send();},r.prototype.setRawDataURI=function(v,c){this.rawDataUris[this.pathPrefix+v]=c;},r.prototype.loadBinary=function(v,c,n){var u=this;c===void 0&&(c=null),n===void 0&&(n=null),v=this.pathPrefix+v,this.toLoad++,this.downloadBinary(v,(function(d){u.assets[v]=d,c&&c(v,d),u.toLoad--,u.loaded++;}),(function(d,M){u.errors[v]="Couldn't load binary "+v+": status "+status+", "+M,n&&n(v,"Couldn't load binary "+v+": status "+status+", "+M),u.toLoad--,u.loaded++;}));},r.prototype.loadText=function(v,c,n){var u=this;c===void 0&&(c=null),n===void 0&&(n=null),v=this.pathPrefix+v,this.toLoad++,this.downloadText(v,(function(d){u.assets[v]=d,c&&c(v,d),u.toLoad--,u.loaded++;}),(function(d,M){u.errors[v]="Couldn't load text "+v+": status "+status+", "+M,n&&n(v,"Couldn't load text "+v+": status "+status+", "+M),u.toLoad--,u.loaded++;}));},r.prototype.loadTexture=function(v,c,n){var u=this;c===void 0&&(c=null),n===void 0&&(n=null);var d=v=this.pathPrefix+v;this.toLoad++;var M=new Image;M.crossOrigin="anonymous",M.onload=function(S){var V=u.textureLoader(M);u.assets[d]=V,u.toLoad--,u.loaded++,c&&c(v,M);},M.onerror=function(S){u.errors[v]="Couldn't load image "+v,u.toLoad--,u.loaded++,n&&n(v,"Couldn't load image "+v);},this.rawDataUris[v]&&(v=this.rawDataUris[v]),M.src=v;},r.prototype.loadTextureAtlas=function(v,c,n){var u=this;c===void 0&&(c=null),n===void 0&&(n=null);var d=v.lastIndexOf("/")>=0?v.substring(0,v.lastIndexOf("/")):"";v=this.pathPrefix+v,this.toLoad++,this.downloadText(v,(function(M){var S={count:0},V=new Array;try{var I=new T.TextureAtlas(M,(function(Q){V.push(d==""?Q:d+"/"+Q);var st=document.createElement("img");return st.width=16,st.height=16,new T.FakeTexture(st)}));}catch(Q){var D=Q;return u.errors[v]="Couldn't load texture atlas "+v+": "+D.message,n&&n(v,"Couldn't load texture atlas "+v+": "+D.message),u.toLoad--,void u.loaded++}for(var k=function(Q){var st=false;u.loadTexture(Q,(function(ut,nt){if(S.count++,S.count==V.length)if(st)u.errors[v]="Couldn't load texture atlas page "+ut+"} of atlas "+v,n&&n(v,"Couldn't load texture atlas page "+ut+" of atlas "+v),u.toLoad--,u.loaded++;else try{var ot=new T.TextureAtlas(M,(function(W){return u.get(d==""?W:d+"/"+W)}));u.assets[v]=ot,c&&c(v,ot),u.toLoad--,u.loaded++;}catch(W){var it=W;u.errors[v]="Couldn't load texture atlas "+v+": "+it.message,n&&n(v,"Couldn't load texture atlas "+v+": "+it.message),u.toLoad--,u.loaded++;}}),(function(ut,nt){st=true,S.count++,S.count==V.length&&(u.errors[v]="Couldn't load texture atlas page "+ut+"} of atlas "+v,n&&n(v,"Couldn't load texture atlas page "+ut+" of atlas "+v),u.toLoad--,u.loaded++);}));},E=0,X=V;E<X.length;E++){k(X[E]);}}),(function(M,S){u.errors[v]="Couldn't load texture atlas "+v+": status "+status+", "+S,n&&n(v,"Couldn't load texture atlas "+v+": status "+status+", "+S),u.toLoad--,u.loaded++;}));},r.prototype.get=function(v){return v=this.pathPrefix+v,this.assets[v]},r.prototype.remove=function(v){v=this.pathPrefix+v;var c=this.assets[v];c.dispose&&c.dispose(),this.assets[v]=null;},r.prototype.removeAll=function(){for(var v in this.assets){var c=this.assets[v];c.dispose&&c.dispose();}this.assets={};},r.prototype.isLoadingComplete=function(){return this.toLoad==0},r.prototype.getToLoad=function(){return this.toLoad},r.prototype.getLoaded=function(){return this.loaded},r.prototype.dispose=function(){this.removeAll();},r.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},r.prototype.getErrors=function(){return this.errors},r})();T.AssetManager=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v){this.atlas=v;}return r.prototype.newRegionAttachment=function(v,c,n){var u=this.atlas.findRegion(n);if(u==null)throw new Error("Region not found in atlas: "+n+" (region attachment: "+c+")");u.renderObject=u;var d=new T.RegionAttachment(c);return d.setRegion(u),d},r.prototype.newMeshAttachment=function(v,c,n){var u=this.atlas.findRegion(n);if(u==null)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+c+")");u.renderObject=u;var d=new T.MeshAttachment(c);return d.region=u,d},r.prototype.newBoundingBoxAttachment=function(v,c){return new T.BoundingBoxAttachment(c)},r.prototype.newPathAttachment=function(v,c){return new T.PathAttachment(c)},r.prototype.newPointAttachment=function(v,c){return new T.PointAttachment(c)},r.prototype.newClippingAttachment=function(v,c){return new T.ClippingAttachment(c)},r})();T.AtlasAttachmentLoader=f;})(Rt||(Rt={})),(function(T){(function(r){r[r.Normal=0]="Normal",r[r.Additive=1]="Additive",r[r.Multiply=2]="Multiply",r[r.Screen=3]="Screen";})(T.BlendMode||(T.BlendMode={}));})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=false,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=false,this.active=false,v==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=v,this.skeleton=c,this.parent=n,this.setToSetupPose();}return r.prototype.isActive=function(){return this.active},r.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);},r.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);},r.prototype.updateWorldTransformWith=function(v,c,n,u,d,M,S){this.ax=v,this.ay=c,this.arotation=n,this.ascaleX=u,this.ascaleY=d,this.ashearX=M,this.ashearY=S,this.appliedValid=true;var V=this.parent;if(V==null){var I=this.skeleton,D=n+90+S,k=I.scaleX,E=I.scaleY;return this.a=T.MathUtils.cosDeg(n+M)*u*k,this.b=T.MathUtils.cosDeg(D)*d*k,this.c=T.MathUtils.sinDeg(n+M)*u*E,this.d=T.MathUtils.sinDeg(D)*d*E,this.worldX=v*k+I.x,void(this.worldY=c*E+I.y)}var X=V.a,z=V.b,Q=V.c,st=V.d;switch(this.worldX=X*v+z*c+V.worldX,this.worldY=Q*v+st*c+V.worldY,this.data.transformMode){case T.TransformMode.Normal:var D=n+90+S,kt=T.MathUtils.cosDeg(n+M)*u,ht=T.MathUtils.cosDeg(D)*d,$=T.MathUtils.sinDeg(n+M)*u,ct=T.MathUtils.sinDeg(D)*d;return this.a=X*kt+z*$,this.b=X*ht+z*ct,this.c=Q*kt+st*$,void(this.d=Q*ht+st*ct);case T.TransformMode.OnlyTranslation:var D=n+90+S;this.a=T.MathUtils.cosDeg(n+M)*u,this.b=T.MathUtils.cosDeg(D)*d,this.c=T.MathUtils.sinDeg(n+M)*u,this.d=T.MathUtils.sinDeg(D)*d;break;case T.TransformMode.NoRotationOrReflection:var at,ut=0;(at=X*X+Q*Q)>1e-4?(at=Math.abs(X*st-z*Q)/at,X/=this.skeleton.scaleX,z=(Q/=this.skeleton.scaleY)*at,st=X*at,ut=Math.atan2(Q,X)*T.MathUtils.radDeg):(X=0,Q=0,ut=90-Math.atan2(st,z)*T.MathUtils.radDeg);var nt=n+M-ut,ot=n+S-ut+90,kt=T.MathUtils.cosDeg(nt)*u,ht=T.MathUtils.cosDeg(ot)*d,$=T.MathUtils.sinDeg(nt)*u,ct=T.MathUtils.sinDeg(ot)*d;this.a=X*kt-z*$,this.b=X*ht-z*ct,this.c=Q*kt+st*$,this.d=Q*ht+st*ct;break;case T.TransformMode.NoScale:case T.TransformMode.NoScaleOrReflection:var it=T.MathUtils.cosDeg(n),W=T.MathUtils.sinDeg(n),et=(X*it+z*W)/this.skeleton.scaleX,ft=(Q*it+st*W)/this.skeleton.scaleY,at;(at=Math.sqrt(et*et+ft*ft))>1e-5&&(at=1/at),et*=at,ft*=at,at=Math.sqrt(et*et+ft*ft),this.data.transformMode==T.TransformMode.NoScale&&X*st-z*Q<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(at=-at);var Ct=Math.PI/2+Math.atan2(ft,et),dt=Math.cos(Ct)*at,mt=Math.sin(Ct)*at,kt=T.MathUtils.cosDeg(M)*u,ht=T.MathUtils.cosDeg(90+S)*d,$=T.MathUtils.sinDeg(M)*u,ct=T.MathUtils.sinDeg(90+S)*d;this.a=et*kt+dt*$,this.b=et*ht+dt*ct,this.c=ft*kt+mt*$,this.d=ft*ht+mt*ct;}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY;},r.prototype.setToSetupPose=function(){var v=this.data;this.x=v.x,this.y=v.y,this.rotation=v.rotation,this.scaleX=v.scaleX,this.scaleY=v.scaleY,this.shearX=v.shearX,this.shearY=v.shearY;},r.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*T.MathUtils.radDeg},r.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*T.MathUtils.radDeg},r.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},r.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},r.prototype.updateAppliedTransform=function(){this.appliedValid=true;var v=this.parent;if(v==null)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*T.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*T.MathUtils.radDeg);var c=v.a,n=v.b,u=v.c,d=v.d,M=1/(c*d-n*u),S=this.worldX-v.worldX,V=this.worldY-v.worldY;this.ax=S*d*M-V*n*M,this.ay=V*c*M-S*u*M;var I=M*d,D=M*c,k=M*n,E=M*u,X=I*this.a-k*this.c,z=I*this.b-k*this.d,Q=D*this.c-E*this.a,st=D*this.d-E*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(X*X+Q*Q),this.ascaleX>1e-4){var ut=X*st-z*Q;this.ascaleY=ut/this.ascaleX,this.ashearY=Math.atan2(X*z+Q*st,ut)*T.MathUtils.radDeg,this.arotation=Math.atan2(Q,X)*T.MathUtils.radDeg;}else this.ascaleX=0,this.ascaleY=Math.sqrt(z*z+st*st),this.ashearY=0,this.arotation=90-Math.atan2(st,z)*T.MathUtils.radDeg;},r.prototype.worldToLocal=function(v){var c=this.a,n=this.b,u=this.c,d=this.d,M=1/(c*d-n*u),S=v.x-this.worldX,V=v.y-this.worldY;return v.x=S*d*M-V*n*M,v.y=V*c*M-S*u*M,v},r.prototype.localToWorld=function(v){var c=v.x,n=v.y;return v.x=c*this.a+n*this.b+this.worldX,v.y=c*this.c+n*this.d+this.worldY,v},r.prototype.worldToLocalRotation=function(v){var c=T.MathUtils.sinDeg(v),n=T.MathUtils.cosDeg(v);return Math.atan2(this.a*c-this.c*n,this.d*n-this.b*c)*T.MathUtils.radDeg+this.rotation-this.shearX},r.prototype.localToWorldRotation=function(v){v-=this.rotation-this.shearX;var c=T.MathUtils.sinDeg(v),n=T.MathUtils.cosDeg(v);return Math.atan2(n*this.c+c*this.d,n*this.a+c*this.b)*T.MathUtils.radDeg},r.prototype.rotateWorld=function(v){var c=this.a,n=this.b,u=this.c,d=this.d,M=T.MathUtils.cosDeg(v),S=T.MathUtils.sinDeg(v);this.a=M*c-S*u,this.b=M*n-S*d,this.c=S*c+M*u,this.d=S*n+M*d,this.appliedValid=false;},r})();T.Bone=f;})(Rt||(Rt={})),(function(T){var f=(function(){function v(c,n,u){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=r.Normal,this.skinRequired=false,this.color=new T.Color,c<0)throw new Error("index must be >= 0.");if(n==null)throw new Error("name cannot be null.");this.index=c,this.name=n,this.parent=u;}return v})(),r;T.BoneData=f,(function(v){v[v.Normal=0]="Normal",v[v.OnlyTranslation=1]="OnlyTranslation",v[v.NoRotationOrReflection=2]="NoRotationOrReflection",v[v.NoScale=3]="NoScale",v[v.NoScaleOrReflection=4]="NoScaleOrReflection";})(r=T.TransformMode||(T.TransformMode={}));})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c,n){this.name=v,this.order=c,this.skinRequired=n;}return r})();T.ConstraintData=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c){if(c==null)throw new Error("data cannot be null.");this.time=v,this.data=c;}return r})();T.Event=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v){this.name=v;}return r})();T.EventData=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c){if(this.bendDirection=0,this.compress=false,this.stretch=false,this.mix=1,this.softness=0,this.active=false,v==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=v,this.mix=v.mix,this.softness=v.softness,this.bendDirection=v.bendDirection,this.compress=v.compress,this.stretch=v.stretch,this.bones=new Array;for(var n=0;n<v.bones.length;n++)this.bones.push(skeleton.findBone(v.bones[n].name));this.target=c.findBone(v.target.name);}return r.prototype.isActive=function(){return this.active},r.prototype.apply=function(){this.update();},r.prototype.update=function(){var v=this.target,c=this.bones;switch(c.length){case 1:this.apply1(c[0],v.worldX,v.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(c[0],c[1],v.worldX,v.worldY,this.bendDirection,this.stretch,this.softness,this.mix);}},r.prototype.apply1=function(v,c,n,u,d,M,S){v.appliedValid||v.updateAppliedTransform();var V=v.parent,I=V.a,D=V.b,k=V.c,E=V.d,X=-v.ashearX-v.arotation,z=0,Q=0;switch(v.data.transformMode){case T.TransformMode.OnlyTranslation:z=c-v.worldX,Q=n-v.worldY;break;case T.TransformMode.NoRotationOrReflection:var st=Math.abs(I*E-D*k)/(I*I+k*k),ut=I/v.skeleton.scaleX,nt=k/v.skeleton.scaleY;D=-nt*st*v.skeleton.scaleX,E=ut*st*v.skeleton.scaleY,X+=Math.atan2(nt,ut)*T.MathUtils.radDeg;default:var ot=c-V.worldX,it=n-V.worldY,W=I*E-D*k;z=(ot*E-it*D)/W-v.ax,Q=(it*I-ot*k)/W-v.ay;}X+=Math.atan2(Q,z)*T.MathUtils.radDeg,v.ascaleX<0&&(X+=180),X>180?X-=360:X<-180&&(X+=360);var et=v.ascaleX,ft=v.ascaleY;if(u||d){switch(v.data.transformMode){case T.TransformMode.NoScale:case T.TransformMode.NoScaleOrReflection:z=c-v.worldX,Q=n-v.worldY;}var at=v.data.length*et,Ct=Math.sqrt(z*z+Q*Q),st;(u&&Ct<at||d&&Ct>at&&at>1e-4)&&(et*=st=(Ct/at-1)*S+1,M&&(ft*=st));}v.updateWorldTransformWith(v.ax,v.ay,v.arotation+X*S,et,ft,v.ashearX,v.ashearY);},r.prototype.apply2=function(v,c,n,u,d,M,S,V){if(V!=0){v.appliedValid||v.updateAppliedTransform(),c.appliedValid||c.updateAppliedTransform();var I=v.ax,D=v.ay,k=v.ascaleX,E=k,X=v.ascaleY,z=c.ascaleX,Q=0,st=0,ut=0;k<0?(k=-k,Q=180,ut=-1):(Q=0,ut=1),X<0&&(X=-X,ut=-ut),z<0?(z=-z,st=180):st=0;var nt=c.ax,ot=0,it=0,W=0,et=v.a,ft=v.b,at=v.c,Ct=v.d,dt=Math.abs(k-X)<=1e-4;dt?(it=et*nt+ft*(ot=c.ay)+v.worldX,W=at*nt+Ct*ot+v.worldY):(ot=0,it=et*nt+v.worldX,W=at*nt+v.worldY);var mt=v.parent;et=mt.a,ft=mt.b,at=mt.c;var kt=1/(et*(Ct=mt.d)-ft*at),ht=it-mt.worldX,$=W-mt.worldY,ct=(ht*Ct-$*ft)*kt-I,wt=($*et-ht*at)*kt-D,yt=Math.sqrt(ct*ct+wt*wt),Xt=c.data.length*z,Dt,Lt;if(yt<1e-4)return this.apply1(v,n,u,false,M,false,V),void c.updateWorldTransformWith(nt,ot,0,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY);var Bt=((ht=n-mt.worldX)*Ct-($=u-mt.worldY)*ft)*kt-I,zt=($*et-ht*at)*kt-D,Yt=Bt*Bt+zt*zt;if(S!=0){S*=k*(z+1)/2;var Tt=Math.sqrt(Yt),bt=Tt-yt-Xt*k+S;if(bt>0){var _t=Math.min(1,bt/(2*S))-1;Yt=(Bt-=(_t=(bt-S*(1-_t*_t))/Tt)*Bt)*Bt+(zt-=_t*zt)*zt;}}t:if(dt){var se=(Yt-yt*yt-(Xt*=k)*Xt)/(2*yt*Xt);se<-1?se=-1:se>1&&(se=1,M&&(E*=(Math.sqrt(Yt)/(yt+Xt)-1)*V+1)),Lt=Math.acos(se)*d,et=yt+Xt*se,ft=Xt*Math.sin(Lt),Dt=Math.atan2(zt*et-Bt*ft,Bt*et+zt*ft);}else {var Kt=(et=k*Xt)*et,De=(ft=X*Xt)*ft,$e=Math.atan2(zt,Bt),Te=-2*De*yt,Qe=De-Kt;if((Ct=Te*Te-4*Qe*(at=De*yt*yt+Kt*Yt-Kt*De))>=0){var ss=Math.sqrt(Ct);Te<0&&(ss=-ss);var us=(ss=-(Te+ss)/2)/Qe,hs=at/ss,as=Math.abs(us)<Math.abs(hs)?us:hs;if(as*as<=Yt){$=Math.sqrt(Yt-as*as)*d,Dt=$e-Math.atan2($,as),Lt=Math.atan2($/X,(as-yt)/k);break t}}var xs=T.MathUtils.PI,os=yt-et,cs=os*os,ts=0,ws=0,is=yt+et,Us=is*is,Ss=0;(at=-et*yt/(Kt-De))>=-1&&at<=1&&(at=Math.acos(at),(Ct=(ht=et*Math.cos(at)+yt)*ht+($=ft*Math.sin(at))*$)<cs&&(xs=at,cs=Ct,os=ht,ts=$),Ct>Us&&(ws=at,Us=Ct,is=ht,Ss=$)),Yt<=(cs+Us)/2?(Dt=$e-Math.atan2(ts*d,os),Lt=xs*d):(Dt=$e-Math.atan2(Ss*d,is),Lt=ws*d);}var Es=Math.atan2(ot,nt)*ut,ys=v.arotation;(Dt=(Dt-Es)*T.MathUtils.radDeg+Q-ys)>180?Dt-=360:Dt<-180&&(Dt+=360),v.updateWorldTransformWith(I,D,ys+Dt*V,E,v.ascaleY,0,0),ys=c.arotation,(Lt=((Lt+Es)*T.MathUtils.radDeg-c.ashearX)*ut+st-ys)>180?Lt-=360:Lt<-180&&(Lt+=360),c.updateWorldTransformWith(nt,ot,ys+Lt*V,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY);}else c.updateWorldTransform();},r})();T.IkConstraint=f;})(Rt||(Rt={})),(function(T){var f=(function(r){function v(c){var n=r.call(this,c,0,false)||this;return n.bones=new Array,n.bendDirection=1,n.compress=false,n.stretch=false,n.uniform=false,n.mix=1,n.softness=0,n}return es(v,r),v})(T.ConstraintData);T.IkConstraintData=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=false,v==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=v,this.bones=new Array;for(var n=0,u=v.bones.length;n<u;n++)this.bones.push(skeleton.findBone(v.bones[n].name));this.target=c.findSlot(v.target.name),this.position=v.position,this.spacing=v.spacing,this.rotateMix=v.rotateMix,this.translateMix=v.translateMix;}return r.prototype.isActive=function(){return this.active},r.prototype.apply=function(){this.update();},r.prototype.update=function(){var v=this.target.getAttachment();if(v instanceof T.PathAttachment){var c=this.rotateMix,n=this.translateMix,d=c>0;if(n>0||d){var M=this.data,S=M.spacingMode==T.SpacingMode.Percent,V=M.rotateMode,I=V==T.RotateMode.Tangent,D=V==T.RotateMode.ChainScale,k=this.bones.length,E=I?k:k+1,X=this.bones,z=T.Utils.setArraySize(this.spaces,E),Q=null,st=this.spacing;if(D||!S){D&&(Q=T.Utils.setArraySize(this.lengths,k));for(var ut=M.spacingMode==T.SpacingMode.Length,nt=0,ot=E-1;nt<ot;){var it,W=(it=X[nt]).data.length;if(W<r.epsilon)D&&(Q[nt]=0),z[++nt]=0;else if(S){if(D){var et=W*it.a,ft=W*it.c,at=Math.sqrt(et*et+ft*ft);Q[nt]=at;}z[++nt]=st;}else {var et=W*it.a,ft=W*it.c,Ct=Math.sqrt(et*et+ft*ft);D&&(Q[nt]=Ct),z[++nt]=(ut?W+st:st)*Ct/W;}}}else for(var nt=1;nt<E;nt++)z[nt]=st;var dt=this.computeWorldPositions(v,E,I,M.positionMode==T.PositionMode.Percent,S),mt=dt[0],kt=dt[1],ht=M.offsetRotation,$=false,ct;ht==0?$=V==T.RotateMode.Chain:($=false,ht*=(ct=this.target.bone).a*ct.d-ct.b*ct.c>0?T.MathUtils.degRad:-T.MathUtils.degRad);for(var nt=0,ct=3;nt<k;nt++,ct+=3){var it;(it=X[nt]).worldX+=(mt-it.worldX)*n,it.worldY+=(kt-it.worldY)*n;var et,ft,wt=(et=dt[ct])-mt,yt=(ft=dt[ct+1])-kt;if(D){var Xt=Q[nt];if(Xt!=0){var Dt=(Math.sqrt(wt*wt+yt*yt)/Xt-1)*c+1;it.a*=Dt,it.c*=Dt;}}if(mt=et,kt=ft,d){var Lt=it.a,Bt=it.b,zt=it.c,Yt=it.d,Tt=0,bt=0,_t=0;if(Tt=I?dt[ct-1]:z[nt+1]==0?dt[ct+2]:Math.atan2(yt,wt),Tt-=Math.atan2(zt,Lt),$){bt=Math.cos(Tt),_t=Math.sin(Tt);var se=it.data.length;mt+=(se*(bt*Lt-_t*zt)-wt)*c,kt+=(se*(_t*Lt+bt*zt)-yt)*c;}else Tt+=ht;Tt>T.MathUtils.PI?Tt-=T.MathUtils.PI2:Tt<-T.MathUtils.PI&&(Tt+=T.MathUtils.PI2),Tt*=c,bt=Math.cos(Tt),_t=Math.sin(Tt),it.a=bt*Lt-_t*zt,it.b=bt*Bt-_t*Yt,it.c=_t*Lt+bt*zt,it.d=_t*Bt+bt*Yt;}it.appliedValid=false;}}}},r.prototype.computeWorldPositions=function(v,c,n,u,d){var M=this.target,S=this.position,V=this.spaces,I=T.Utils.setArraySize(this.positions,3*c+2),D=null,k=v.closed,E=v.worldVerticesLength,X=E/6,z=r.NONE;if(!v.constantSpeed){var Q=v.lengths,st=Q[X-=k?1:2];if(u&&(S*=st),d)for(var ut=1;ut<c;ut++)V[ut]*=st;D=T.Utils.setArraySize(this.world,8);for(var ut=0,nt=0,ot=0;ut<c;ut++,nt+=3){var it,W=S+=it=V[ut];if(k)(W%=st)<0&&(W+=st),ot=0;else {if(W<0){z!=r.BEFORE&&(z=r.BEFORE,v.computeWorldVertices(M,2,4,D,0,2)),this.addBeforePosition(W,D,0,I,nt);continue}if(W>st){z!=r.AFTER&&(z=r.AFTER,v.computeWorldVertices(M,E-6,4,D,0,2)),this.addAfterPosition(W-st,D,0,I,nt);continue}}for(;;ot++){var et=Q[ot];if(!(W>et)){var ft;ot==0?W/=et:W=(W-(ft=Q[ot-1]))/(et-ft);break}}ot!=z&&(z=ot,k&&ot==X?(v.computeWorldVertices(M,E-4,4,D,0,2),v.computeWorldVertices(M,0,4,D,4,2)):v.computeWorldVertices(M,6*ot+2,8,D,0,2)),this.addCurvePosition(W,D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],I,nt,n||ut>0&&it==0);}return I}k?(E+=2,D=T.Utils.setArraySize(this.world,E),v.computeWorldVertices(M,2,E-4,D,0,2),v.computeWorldVertices(M,0,2,D,E-4,2),D[E-2]=D[0],D[E-1]=D[1]):(X--,E-=4,D=T.Utils.setArraySize(this.world,E),v.computeWorldVertices(M,2,E,D,0,2));for(var at=T.Utils.setArraySize(this.curves,X),Ct=0,dt=D[0],mt=D[1],kt=0,ht=0,$=0,ct=0,wt=0,yt=0,Xt=0,Dt=0,Lt=0,Bt=0,zt=0,Yt=0,Tt=0,bt=0,ut=0,_t=2;ut<X;ut++,_t+=6)kt=D[_t],ht=D[_t+1],$=D[_t+2],ct=D[_t+3],zt=2*(Xt=.1875*(dt-2*kt+$))+(Lt=.09375*(3*(kt-$)-dt+(wt=D[_t+4]))),Yt=2*(Dt=.1875*(mt-2*ht+ct))+(Bt=.09375*(3*(ht-ct)-mt+(yt=D[_t+5]))),Tt=.75*(kt-dt)+Xt+.16666667*Lt,bt=.75*(ht-mt)+Dt+.16666667*Bt,Ct+=Math.sqrt(Tt*Tt+bt*bt),Tt+=zt,bt+=Yt,zt+=Lt,Yt+=Bt,Ct+=Math.sqrt(Tt*Tt+bt*bt),Tt+=zt,bt+=Yt,Ct+=Math.sqrt(Tt*Tt+bt*bt),Tt+=zt+Lt,bt+=Yt+Bt,Ct+=Math.sqrt(Tt*Tt+bt*bt),at[ut]=Ct,dt=wt,mt=yt;if(S*=u?Ct:Ct/v.lengths[X-1],d)for(var ut=1;ut<c;ut++)V[ut]*=Ct;for(var se=this.segments,Kt=0,ut=0,nt=0,ot=0,De=0;ut<c;ut++,nt+=3){var it,W=S+=it=V[ut];if(k)(W%=Ct)<0&&(W+=Ct),ot=0;else {if(W<0){this.addBeforePosition(W,D,0,I,nt);continue}if(W>Ct){this.addAfterPosition(W-Ct,D,E-4,I,nt);continue}}for(;;ot++){var $e=at[ot];if(!(W>$e)){var ft;ot==0?W/=$e:W=(W-(ft=at[ot-1]))/($e-ft);break}}if(ot!=z){z=ot;var Te=6*ot;for(dt=D[Te],mt=D[Te+1],kt=D[Te+2],ht=D[Te+3],$=D[Te+4],ct=D[Te+5],zt=2*(Xt=.03*(dt-2*kt+$))+(Lt=.006*(3*(kt-$)-dt+(wt=D[Te+6]))),Yt=2*(Dt=.03*(mt-2*ht+ct))+(Bt=.006*(3*(ht-ct)-mt+(yt=D[Te+7]))),Tt=.3*(kt-dt)+Xt+.16666667*Lt,bt=.3*(ht-mt)+Dt+.16666667*Bt,Kt=Math.sqrt(Tt*Tt+bt*bt),se[0]=Kt,Te=1;Te<8;Te++)Tt+=zt,bt+=Yt,zt+=Lt,Yt+=Bt,Kt+=Math.sqrt(Tt*Tt+bt*bt),se[Te]=Kt;Tt+=zt,bt+=Yt,Kt+=Math.sqrt(Tt*Tt+bt*bt),se[8]=Kt,Tt+=zt+Lt,bt+=Yt+Bt,Kt+=Math.sqrt(Tt*Tt+bt*bt),se[9]=Kt,De=0;}for(W*=Kt;;De++){var Qe=se[De];if(!(W>Qe)){var ft;De==0?W/=Qe:W=De+(W-(ft=se[De-1]))/(Qe-ft);break}}this.addCurvePosition(.1*W,dt,mt,kt,ht,$,ct,wt,yt,I,nt,n||ut>0&&it==0);}return I},r.prototype.addBeforePosition=function(v,c,n,u,d){var M=c[n],S=c[n+1],V=c[n+2]-M,I=c[n+3]-S,D=Math.atan2(I,V);u[d]=M+v*Math.cos(D),u[d+1]=S+v*Math.sin(D),u[d+2]=D;},r.prototype.addAfterPosition=function(v,c,n,u,d){var M=c[n+2],S=c[n+3],V=M-c[n],I=S-c[n+1],D=Math.atan2(I,V);u[d]=M+v*Math.cos(D),u[d+1]=S+v*Math.sin(D),u[d+2]=D;},r.prototype.addCurvePosition=function(v,c,n,u,d,M,S,V,I,D,k,E){if(v==0||isNaN(v))return D[k]=c,D[k+1]=n,void(D[k+2]=Math.atan2(d-n,u-c));var X=v*v,z=X*v,Q=1-v,st=Q*Q,ut=st*Q,nt=Q*v,ot=3*nt,it=Q*ot,W=ot*v,et=c*ut+u*it+M*W+V*z,ft=n*ut+d*it+S*W+I*z;D[k]=et,D[k+1]=ft,E&&(D[k+2]=v<.001?Math.atan2(d-n,u-c):Math.atan2(ft-(n*st+d*nt*2+S*X),et-(c*st+u*nt*2+M*X)));},r.NONE=-1,r.BEFORE=-2,r.AFTER=-3,r.epsilon=1e-5,r})();T.PathConstraint=f;})(Rt||(Rt={})),(function(T){var f=(function(n){function u(d){var M=n.call(this,d,0,false)||this;return M.bones=new Array,M}return es(u,n),u})(T.ConstraintData);T.PathConstraintData=f,(function(n){n[n.Fixed=0]="Fixed",n[n.Percent=1]="Percent";})(T.PositionMode||(T.PositionMode={})),(function(n){n[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent";})(T.SpacingMode||(T.SpacingMode={})),(function(n){n[n.Tangent=0]="Tangent",n[n.Chain=1]="Chain",n[n.ChainScale=2]="ChainScale";})(T.RotateMode||(T.RotateMode={}));})(Rt||(Rt={})),(function(T){var f=(function(){function v(c){this.toLoad=new Array,this.assets={},this.clientId=c;}return v.prototype.loaded=function(){var c=0;for(var n in this.assets)c++;return c},v})(),r=(function(){function v(c){c===void 0&&(c=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=c;}return v.prototype.queueAsset=function(c,n,u){var d=this.clientAssets[c];return d==null&&(d=new f(c),this.clientAssets[c]=d),n!==null&&(d.textureLoader=n),d.toLoad.push(u),this.queuedAssets[u]!==u&&(this.queuedAssets[u]=u,true)},v.prototype.loadText=function(c,n){var u=this;if(n=this.pathPrefix+n,this.queueAsset(c,null,n)){var d=new XMLHttpRequest;d.overrideMimeType("text/html"),d.onreadystatechange=function(){d.readyState==XMLHttpRequest.DONE&&(d.status>=200&&d.status<300?u.rawAssets[n]=d.responseText:u.errors[n]="Couldn't load text "+n+": status "+d.status+", "+d.responseText);},d.open("GET",n,true),d.send();}},v.prototype.loadJson=function(c,n){var u=this;if(n=this.pathPrefix+n,this.queueAsset(c,null,n)){var d=new XMLHttpRequest;d.overrideMimeType("text/html"),d.onreadystatechange=function(){d.readyState==XMLHttpRequest.DONE&&(d.status>=200&&d.status<300?u.rawAssets[n]=JSON.parse(d.responseText):u.errors[n]="Couldn't load text "+n+": status "+d.status+", "+d.responseText);},d.open("GET",n,true),d.send();}},v.prototype.loadTexture=function(c,n,u){var d=this;if(u=this.pathPrefix+u,this.queueAsset(c,n,u))if((typeof window>"u"||typeof navigator>"u"||!window.document)&&typeof importScripts<"u"){fetch(u,{mode:"cors"}).then((function(D){return D.ok||(d.errors[u]="Couldn't load image "+u),D.blob()})).then((function(D){return createImageBitmap(D,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(D){d.rawAssets[u]=D;}));}else {var I=new Image;I.crossOrigin="anonymous",I.onload=function(D){d.rawAssets[u]=I;},I.onerror=function(D){d.errors[u]="Couldn't load image "+u;},I.src=u;}},v.prototype.get=function(c,n){n=this.pathPrefix+n;var u=this.clientAssets[c];return u==null||u.assets[n]},v.prototype.updateClientAssets=function(c){for(var n,u=(typeof window>"u"||typeof navigator>"u"||!window.document)&&typeof importScripts<"u",d=0;d<c.toLoad.length;d++){var M=c.toLoad[d],S=c.assets[M];if(S==null){var V=this.rawAssets[M];if(V==null)continue;u?V instanceof ImageBitmap?c.assets[M]=c.textureLoader(V):c.assets[M]=V:V instanceof HTMLImageElement?c.assets[M]=c.textureLoader(V):c.assets[M]=V;}}},v.prototype.isLoadingComplete=function(c){var n=this.clientAssets[c];return n==null||(this.updateClientAssets(n),n.toLoad.length==n.loaded())},v.prototype.dispose=function(){},v.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},v.prototype.getErrors=function(){return this.errors},v})();T.SharedAssetManager=r;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,v==null)throw new Error("data cannot be null.");this.data=v,this.bones=new Array;for(var c=0;c<v.bones.length;c++){var n=v.bones[c],u=void 0;if(n.parent==null)u=new T.Bone(n,this,null);else {var d=this.bones[n.parent.index];u=new T.Bone(n,this,d),d.children.push(u);}this.bones.push(u);}this.slots=new Array,this.drawOrder=new Array;for(var c=0;c<v.slots.length;c++){var M=v.slots[c],u=this.bones[M.boneData.index],S=new T.Slot(M,u);this.slots.push(S),this.drawOrder.push(S);}this.ikConstraints=new Array;for(var c=0;c<v.ikConstraints.length;c++){var V=v.ikConstraints[c];this.ikConstraints.push(new T.IkConstraint(V,this));}this.transformConstraints=new Array;for(var c=0;c<v.transformConstraints.length;c++){var I=v.transformConstraints[c];this.transformConstraints.push(new T.TransformConstraint(I,this));}this.pathConstraints=new Array;for(var c=0;c<v.pathConstraints.length;c++){var D=v.pathConstraints[c];this.pathConstraints.push(new T.PathConstraint(D,this));}this.color=new T.Color(1,1,1,1),this.updateCache();}return r.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var c=this.bones,n=0,u=c.length;n<u;n++){var d;(d=c[n]).sorted=d.data.skinRequired,d.active=!d.sorted;}if(this.skin!=null)for(var M=this.skin.bones,n=0,u=this.skin.bones.length;n<u;n++){var d=this.bones[M[n].index];do d.sorted=false,d.active=true,d=d.parent;while(d!=null)}var S=this.ikConstraints,V=this.transformConstraints,I=this.pathConstraints,D=S.length,k=V.length,E=I.length,X=D+k+E;t:for(var n=0;n<X;n++){for(var z=0;z<D;z++){var Q;if((Q=S[z]).data.order==n){this.sortIkConstraint(Q);continue t}}for(var z=0;z<k;z++){var Q;if((Q=V[z]).data.order==n){this.sortTransformConstraint(Q);continue t}}for(var z=0;z<E;z++){var Q;if((Q=I[z]).data.order==n){this.sortPathConstraint(Q);continue t}}}for(var n=0,u=c.length;n<u;n++)this.sortBone(c[n]);},r.prototype.sortIkConstraint=function(v){if(v.active=v.target.isActive()&&(!v.data.skinRequired||this.skin!=null&&T.Utils.contains(this.skin.constraints,v.data,true)),v.active){var c=v.target;this.sortBone(c);var n=v.bones,u=n[0];if(this.sortBone(u),n.length>1){var d=n[n.length-1];this._updateCache.indexOf(d)>-1||this.updateCacheReset.push(d);}this._updateCache.push(v),this.sortReset(u.children),n[n.length-1].sorted=true;}},r.prototype.sortPathConstraint=function(v){if(v.active=v.target.bone.isActive()&&(!v.data.skinRequired||this.skin!=null&&T.Utils.contains(this.skin.constraints,v.data,true)),v.active){var c=v.target,n=c.data.index,u=c.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,n,u),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,u);for(var d=0,M=this.data.skins.length;d<M;d++)this.sortPathConstraintAttachment(this.data.skins[d],n,u);var S=c.getAttachment();S instanceof T.PathAttachment&&this.sortPathConstraintAttachmentWith(S,u);for(var V=v.bones,I=V.length,d=0;d<I;d++)this.sortBone(V[d]);this._updateCache.push(v);for(var d=0;d<I;d++)this.sortReset(V[d].children);for(var d=0;d<I;d++)V[d].sorted=true;}},r.prototype.sortTransformConstraint=function(v){if(v.active=v.target.isActive()&&(!v.data.skinRequired||this.skin!=null&&T.Utils.contains(this.skin.constraints,v.data,true)),v.active){this.sortBone(v.target);var c=v.bones,n=c.length;if(v.data.local)for(var u=0;u<n;u++){var d=c[u];this.sortBone(d.parent),this._updateCache.indexOf(d)>-1||this.updateCacheReset.push(d);}else for(var u=0;u<n;u++)this.sortBone(c[u]);this._updateCache.push(v);for(var M=0;M<n;M++)this.sortReset(c[M].children);for(var M=0;M<n;M++)c[M].sorted=true;}},r.prototype.sortPathConstraintAttachment=function(v,c,n){var u=v.attachments[c];if(u)for(var d in u)this.sortPathConstraintAttachmentWith(u[d],n);},r.prototype.sortPathConstraintAttachmentWith=function(v,c){if(v instanceof T.PathAttachment){var n=v.bones;if(n==null)this.sortBone(c);else for(var u=this.bones,d=0;d<n.length;)for(var M=n[d++],S=d+M;d<S;d++){var V=n[d];this.sortBone(u[V]);}}},r.prototype.sortBone=function(v){if(!v.sorted){var c=v.parent;c!=null&&this.sortBone(c),v.sorted=true,this._updateCache.push(v);}},r.prototype.sortReset=function(v){for(var c=0,n=v.length;c<n;c++){var u=v[c];u.active&&(u.sorted&&this.sortReset(u.children),u.sorted=false);}},r.prototype.updateWorldTransform=function(){for(var v=this.updateCacheReset,c=0,n=v.length;c<n;c++){var u=v[c];u.ax=u.x,u.ay=u.y,u.arotation=u.rotation,u.ascaleX=u.scaleX,u.ascaleY=u.scaleY,u.ashearX=u.shearX,u.ashearY=u.shearY,u.appliedValid=true;}for(var d=this._updateCache,c=0,n=d.length;c<n;c++)d[c].update();},r.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose();},r.prototype.setBonesToSetupPose=function(){for(var v=this.bones,c=0,n=v.length;c<n;c++)v[c].setToSetupPose();for(var u=this.ikConstraints,c=0,n=u.length;c<n;c++){var d;(d=u[c]).mix=d.data.mix,d.softness=d.data.softness,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch;}for(var M=this.transformConstraints,c=0,n=M.length;c<n;c++){var d,S=(d=M[c]).data;d.rotateMix=S.rotateMix,d.translateMix=S.translateMix,d.scaleMix=S.scaleMix,d.shearMix=S.shearMix;}for(var V=this.pathConstraints,c=0,n=V.length;c<n;c++){var d,S=(d=V[c]).data;d.position=S.position,d.spacing=S.spacing,d.rotateMix=S.rotateMix,d.translateMix=S.translateMix;}},r.prototype.setSlotsToSetupPose=function(){var v=this.slots;T.Utils.arrayCopy(v,0,this.drawOrder,0,v.length);for(var c=0,n=v.length;c<n;c++)v[c].setToSetupPose();},r.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},r.prototype.findBone=function(v){if(v==null)throw new Error("boneName cannot be null.");for(var c=this.bones,n=0,u=c.length;n<u;n++){var d=c[n];if(d.data.name==v)return d}return null},r.prototype.findBoneIndex=function(v){if(v==null)throw new Error("boneName cannot be null.");for(var c=this.bones,n=0,u=c.length;n<u;n++)if(c[n].data.name==v)return n;return  -1},r.prototype.findSlot=function(v){if(v==null)throw new Error("slotName cannot be null.");for(var c=this.slots,n=0,u=c.length;n<u;n++){var d=c[n];if(d.data.name==v)return d}return null},r.prototype.findSlotIndex=function(v){if(v==null)throw new Error("slotName cannot be null.");for(var c=this.slots,n=0,u=c.length;n<u;n++)if(c[n].data.name==v)return n;return  -1},r.prototype.setSkinByName=function(v){var c=this.data.findSkin(v);if(c==null)throw new Error("Skin not found: "+v);this.setSkin(c);},r.prototype.setSkin=function(v){if(v!=this.skin){if(v!=null)if(this.skin!=null)v.attachAll(this,this.skin);else for(var c=this.slots,n=0,u=c.length;n<u;n++){var d=c[n],M=d.data.attachmentName;if(M!=null){var S=v.getAttachment(n,M);S!=null&&d.setAttachment(S);}}this.skin=v,this.updateCache();}},r.prototype.getAttachmentByName=function(v,c){return this.getAttachment(this.data.findSlotIndex(v),c)},r.prototype.getAttachment=function(v,c){if(c==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var n=this.skin.getAttachment(v,c);if(n!=null)return n}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(v,c):null},r.prototype.setAttachment=function(v,c){if(v==null)throw new Error("slotName cannot be null.");for(var n=this.slots,u=0,d=n.length;u<d;u++){var M=n[u];if(M.data.name==v){var S=null;if(c!=null&&(S=this.getAttachment(u,c))==null)throw new Error("Attachment not found: "+c+", for slot: "+v);return void M.setAttachment(S)}}throw new Error("Slot not found: "+v)},r.prototype.findIkConstraint=function(v){if(v==null)throw new Error("constraintName cannot be null.");for(var c=this.ikConstraints,n=0,u=c.length;n<u;n++){var d=c[n];if(d.data.name==v)return d}return null},r.prototype.findTransformConstraint=function(v){if(v==null)throw new Error("constraintName cannot be null.");for(var c=this.transformConstraints,n=0,u=c.length;n<u;n++){var d=c[n];if(d.data.name==v)return d}return null},r.prototype.findPathConstraint=function(v){if(v==null)throw new Error("constraintName cannot be null.");for(var c=this.pathConstraints,n=0,u=c.length;n<u;n++){var d=c[n];if(d.data.name==v)return d}return null},r.prototype.getBounds=function(v,c,n){if(n===void 0&&(n=new Array(2)),v==null)throw new Error("offset cannot be null.");if(c==null)throw new Error("size cannot be null.");for(var u=this.drawOrder,d=Number.POSITIVE_INFINITY,M=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,V=Number.NEGATIVE_INFINITY,I=0,D=u.length;I<D;I++){var k=u[I];if(k.bone.active){var E=0,X=null,z=k.getAttachment();if(z instanceof T.RegionAttachment)E=8,X=T.Utils.setArraySize(n,E,0),z.computeWorldVertices(k.bone,X,0,2);else if(z instanceof T.MeshAttachment){var Q=z;E=Q.worldVerticesLength,X=T.Utils.setArraySize(n,E,0),Q.computeWorldVertices(k,0,E,X,0,2);}if(X!=null)for(var st=0,ut=X.length;st<ut;st+=2){var nt=X[st],ot=X[st+1];d=Math.min(d,nt),M=Math.min(M,ot),S=Math.max(S,nt),V=Math.max(V,ot);}}}v.set(d,M),c.set(S-d,V-M);},r.prototype.update=function(v){this.time+=v;},r})();T.Skeleton=f;})(Rt||(Rt={})),(function(T){var f=(function(){function n(u){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=u;}return n.prototype.readSkeletonData=function(u){var d=this.scale,M=new M;skeletonData.name="";var S=new r(u);skeletonData.hash=S.readString(),skeletonData.version=S.readString(),skeletonData.x=S.readFloat(),skeletonData.y=S.readFloat(),skeletonData.width=S.readFloat(),skeletonData.height=S.readFloat();var V=S.readBoolean();V&&(skeletonData.fps=S.readFloat(),skeletonData.imagesPath=S.readString(),skeletonData.audioPath=S.readString());var I=0;I=S.readInt(true);for(var ot=0;ot<I;ot++)S.strings.push(S.readString());I=S.readInt(true);for(var ot=0;ot<I;ot++){var D=S.readString(),k=ot==0?null:M.bones[S.readInt(true)],E;(E=new T.BoneData(ot,D,k)).rotation=S.readFloat(),E.x=S.readFloat()*d,E.y=S.readFloat()*d,E.scaleX=S.readFloat(),E.scaleY=S.readFloat(),E.shearX=S.readFloat(),E.shearY=S.readFloat(),E.length=S.readFloat()*d,E.transformMode=n.TransformModeValues[S.readInt(true)],E.skinRequired=S.readBoolean(),V&&T.Color.rgba8888ToColor(E.color,S.readInt32()),skeletonData.bones.push(E);}I=S.readInt(true);for(var ot=0;ot<I;ot++){var X=S.readString(),z=M.bones[S.readInt(true)],E=new T.SlotData(ot,X,z);T.Color.rgba8888ToColor(E.color,S.readInt32());var Q=S.readInt32();Q!=-1&&T.Color.rgb888ToColor(E.darkColor=new T.Color,Q),E.attachmentName=S.readStringRef(),E.blendMode=n.BlendModeValues[S.readInt(true)],skeletonData.slots.push(E);}I=S.readInt(true);for(var ot=0,st=void 0;ot<I;ot++){var E;(E=new T.IkConstraintData(S.readString())).order=S.readInt(true),E.skinRequired=S.readBoolean(),st=S.readInt(true);for(var ut=0;ut<st;ut++)E.bones.push(skeletonData.bones[S.readInt(true)]);E.target=M.bones[S.readInt(true)],E.mix=S.readFloat(),E.softness=S.readFloat()*d,E.bendDirection=S.readByte(),E.compress=S.readBoolean(),E.stretch=S.readBoolean(),E.uniform=S.readBoolean(),skeletonData.ikConstraints.push(E);}I=S.readInt(true);for(var ot=0,st=void 0;ot<I;ot++){var E;(E=new T.TransformConstraintData(S.readString())).order=S.readInt(true),E.skinRequired=S.readBoolean(),st=S.readInt(true);for(var ut=0;ut<st;ut++)E.bones.push(skeletonData.bones[S.readInt(true)]);E.target=M.bones[S.readInt(true)],E.local=S.readBoolean(),E.relative=S.readBoolean(),E.offsetRotation=S.readFloat(),E.offsetX=S.readFloat()*d,E.offsetY=S.readFloat()*d,E.offsetScaleX=S.readFloat(),E.offsetScaleY=S.readFloat(),E.offsetShearY=S.readFloat(),E.rotateMix=S.readFloat(),E.translateMix=S.readFloat(),E.scaleMix=S.readFloat(),E.shearMix=S.readFloat(),skeletonData.transformConstraints.push(E);}I=S.readInt(true);for(var ot=0,st=void 0;ot<I;ot++){var E;(E=new T.PathConstraintData(S.readString())).order=S.readInt(true),E.skinRequired=S.readBoolean(),st=S.readInt(true);for(var ut=0;ut<st;ut++)E.bones.push(skeletonData.bones[S.readInt(true)]);E.target=M.slots[S.readInt(true)],E.positionMode=n.PositionModeValues[S.readInt(true)],E.spacingMode=n.SpacingModeValues[S.readInt(true)],E.rotateMode=n.RotateModeValues[S.readInt(true)],E.offsetRotation=S.readFloat(),E.position=S.readFloat(),E.positionMode==T.PositionMode.Fixed&&(E.position*=d),E.spacing=S.readFloat(),E.spacingMode!=T.SpacingMode.Length&&E.spacingMode!=T.SpacingMode.Fixed||(E.spacing*=d),E.rotateMix=S.readFloat(),E.translateMix=S.readFloat(),skeletonData.pathConstraints.push(E);}var nt=this.readSkin(S,M,true,V);nt!=null&&(skeletonData.defaultSkin=nt,skeletonData.skins.push(nt));var ot=M.skins.length;for(T.Utils.setArraySize(skeletonData.skins,I=ot+S.readInt(true));ot<I;ot++)skeletonData.skins[ot]=this.readSkin(S,M,false,V);I=this.linkedMeshes.length;for(var ot=0;ot<I;ot++){var it=this.linkedMeshes[ot],W=it.skin==null?M.defaultSkin:M.findSkin(it.skin);if(W==null)throw new Error("Skin not found: "+it.skin);var et=W.getAttachment(it.slotIndex,it.parent);if(et==null)throw new Error("Parent mesh not found: "+it.parent);it.mesh.deformAttachment=it.inheritDeform?et:it.mesh,it.mesh.setParentMesh(et),it.mesh.updateUVs();}this.linkedMeshes.length=0,I=S.readInt(true);for(var ot=0;ot<I;ot++){var E;(E=new T.EventData(S.readStringRef())).intValue=S.readInt(false),E.floatValue=S.readFloat(),E.stringValue=S.readString(),E.audioPath=S.readString(),E.audioPath!=null&&(E.volume=S.readFloat(),E.balance=S.readFloat()),skeletonData.events.push(E);}I=S.readInt(true);for(var ot=0;ot<I;ot++)skeletonData.animations.push(this.readAnimation(S,S.readString(),M));return M},n.prototype.readSkin=function(u,d,M,S){var V=null,I=0;if(M){if((I=u.readInt(true))==0)return null;V=new T.Skin("default");}else {(V=new T.Skin(u.readStringRef())).bones.length=u.readInt(true);for(var D=0,k=V.bones.length;D<k;D++)V.bones[D]=d.bones[u.readInt(true)];for(var D=0,k=u.readInt(true);D<k;D++)V.constraints.push(skeletonData.ikConstraints[u.readInt(true)]);for(var D=0,k=u.readInt(true);D<k;D++)V.constraints.push(skeletonData.transformConstraints[u.readInt(true)]);for(var D=0,k=u.readInt(true);D<k;D++)V.constraints.push(skeletonData.pathConstraints[u.readInt(true)]);I=u.readInt(true);}for(var D=0;D<I;D++)for(var E=u.readInt(true),X=0,z=u.readInt(true);X<z;X++){var Q=u.readStringRef(),st=this.readAttachment(u,d,V,E,Q,S);st!=null&&V.setAttachment(E,Q,st);}return V},n.prototype.readAttachment=function(u,d,M,S,V,I){var D=this.scale,k=u.readStringRef();k==null&&(k=V);var E=u.readByte();switch(n.AttachmentTypeValues[E]){case T.AttachmentType.Region:var yt=u.readStringRef(),Xt=u.readFloat(),Dt=u.readFloat(),Lt=u.readFloat(),z=u.readFloat(),Q=u.readFloat(),Ct=u.readFloat(),dt=u.readFloat(),bt=u.readInt32();yt==null&&(yt=k);var st=this.attachmentLoader.newRegionAttachment(M,k,yt);return st==null?null:(st.path=yt,st.x=Dt*D,st.y=Lt*D,st.scaleX=z,st.scaleY=Q,st.rotation=Xt,st.width=Ct*D,st.height=dt*D,T.Color.rgba8888ToColor(st.color,bt),st.updateOffset(),st);case T.AttachmentType.BoundingBox:var Yt=u.readInt(true),Tt=this.readVertices(u,Yt),bt=I?u.readInt32():0,ut=this.attachmentLoader.newBoundingBoxAttachment(M,k);return ut==null?null:(ut.worldVerticesLength=Yt<<1,ut.vertices=Tt.vertices,ut.bones=Tt.bones,I&&T.Color.rgba8888ToColor(ut.color,bt),ut);case T.AttachmentType.Mesh:var yt=u.readStringRef(),bt=u.readInt32(),Yt=u.readInt(true),nt=this.readFloatArray(u,Yt<<1,1),ot=this.readShortArray(u),Tt=this.readVertices(u,Yt),it=u.readInt(true),W=null,Ct=0,dt=0,mt;return I&&(W=this.readShortArray(u),Ct=u.readFloat(),dt=u.readFloat()),yt==null&&(yt=k),(mt=this.attachmentLoader.newMeshAttachment(M,k,yt))==null?null:(mt.path=yt,T.Color.rgba8888ToColor(mt.color,bt),mt.bones=Tt.bones,mt.vertices=Tt.vertices,mt.worldVerticesLength=Yt<<1,mt.triangles=ot,mt.regionUVs=nt,mt.updateUVs(),mt.hullLength=it<<1,I&&(mt.edges=W,mt.width=Ct*D,mt.height=dt*D),mt);case T.AttachmentType.LinkedMesh:var yt=u.readStringRef(),bt=u.readInt32(),et=u.readStringRef(),ft=u.readStringRef(),at=u.readBoolean(),Ct=0,dt=0,mt;return I&&(Ct=u.readFloat(),dt=u.readFloat()),yt==null&&(yt=k),(mt=this.attachmentLoader.newMeshAttachment(M,k,yt))==null?null:(mt.path=yt,T.Color.rgba8888ToColor(mt.color,bt),I&&(mt.width=Ct*D,mt.height=dt*D),this.linkedMeshes.push(new v(mt,et,S,ft,at)),mt);case T.AttachmentType.Path:for(var kt=u.readBoolean(),ht=u.readBoolean(),Yt=u.readInt(true),Tt=this.readVertices(u,Yt),$=T.Utils.newArray(Yt/3,0),ct=0,wt=$.length;ct<wt;ct++)$[ct]=u.readFloat()*D;var bt=I?u.readInt32():0,yt;return (yt=this.attachmentLoader.newPathAttachment(M,k))==null?null:(yt.closed=kt,yt.constantSpeed=ht,yt.worldVerticesLength=Yt<<1,yt.vertices=Tt.vertices,yt.bones=Tt.bones,yt.lengths=$,I&&T.Color.rgba8888ToColor(yt.color,bt),yt);case T.AttachmentType.Point:var Xt=u.readFloat(),Dt=u.readFloat(),Lt=u.readFloat(),bt=I?u.readInt32():0,Bt=this.attachmentLoader.newPointAttachment(M,k);return Bt==null?null:(Bt.x=Dt*D,Bt.y=Lt*D,Bt.rotation=Xt,I&&T.Color.rgba8888ToColor(Bt.color,bt),Bt);case T.AttachmentType.Clipping:var zt=u.readInt(true),Yt=u.readInt(true),Tt=this.readVertices(u,Yt),bt=I?u.readInt32():0,_t=this.attachmentLoader.newClippingAttachment(M,k);return _t==null?null:(_t.endSlot=d.slots[zt],_t.worldVerticesLength=Yt<<1,_t.vertices=Tt.vertices,_t.bones=Tt.bones,I&&T.Color.rgba8888ToColor(_t.color,bt),_t)}return null},n.prototype.readVertices=function(u,d){var M=d<<1,S=new c,V=this.scale;if(!u.readBoolean())return S.vertices=this.readFloatArray(u,M,V),S;for(var I=new Array,D=new Array,k=0;k<d;k++){var E=u.readInt(true);D.push(E);for(var X=0;X<E;X++)D.push(u.readInt(true)),I.push(u.readFloat()*V),I.push(u.readFloat()*V),I.push(u.readFloat());}return S.vertices=T.Utils.toFloatArray(I),S.bones=D,S},n.prototype.readFloatArray=function(u,d,M){var S=new Array(d);if(M==1)for(var V=0;V<d;V++)S[V]=u.readFloat();else for(var V=0;V<d;V++)S[V]=u.readFloat()*M;return S},n.prototype.readShortArray=function(u){for(var d=u.readInt(true),M=new Array(d),S=0;S<d;S++)M[S]=u.readShort();return M},n.prototype.readAnimation=function(u,d,M){for(var S=new Array,V=this.scale,I=0,D=new T.Color,k=new T.Color,E=0,X=u.readInt(true);E<X;E++)for(var z=u.readInt(true),Q=0,st=u.readInt(true);Q<st;Q++){var ut=u.readByte(),nt=u.readInt(true);switch(ut){case n.SLOT_ATTACHMENT:var W;(W=new T.AttachmentTimeline(nt)).slotIndex=z;for(var ot=0;ot<nt;ot++)W.setFrame(ot,u.readFloat(),u.readStringRef());S.push(W),I=Math.max(I,W.frames[nt-1]);break;case n.SLOT_COLOR:var W;(W=new T.ColorTimeline(nt)).slotIndex=z;for(var ot=0;ot<nt;ot++){var it=u.readFloat();T.Color.rgba8888ToColor(D,u.readInt32()),W.setFrame(ot,it,D.r,D.g,D.b,D.a),ot<nt-1&&this.readCurve(u,ot,W);}S.push(W),I=Math.max(I,W.frames[(nt-1)*T.ColorTimeline.ENTRIES]);break;case n.SLOT_TWO_COLOR:var W;(W=new T.TwoColorTimeline(nt)).slotIndex=z;for(var ot=0;ot<nt;ot++){var it=u.readFloat();T.Color.rgba8888ToColor(D,u.readInt32()),T.Color.rgb888ToColor(k,u.readInt32()),W.setFrame(ot,it,D.r,D.g,D.b,D.a,k.r,k.g,k.b),ot<nt-1&&this.readCurve(u,ot,W);}S.push(W),I=Math.max(I,W.frames[(nt-1)*T.TwoColorTimeline.ENTRIES]);}}for(var E=0,X=u.readInt(true);E<X;E++)for(var et=u.readInt(true),Q=0,st=u.readInt(true);Q<st;Q++){var ut=u.readByte(),nt=u.readInt(true);switch(ut){case n.BONE_ROTATE:var W;(W=new T.RotateTimeline(nt)).boneIndex=et;for(var ot=0;ot<nt;ot++)W.setFrame(ot,u.readFloat(),u.readFloat()),ot<nt-1&&this.readCurve(u,ot,W);S.push(W),I=Math.max(I,W.frames[(nt-1)*T.RotateTimeline.ENTRIES]);break;case n.BONE_TRANSLATE:case n.BONE_SCALE:case n.BONE_SHEAR:var W=void 0,ft=1;ut==n.BONE_SCALE?W=new T.ScaleTimeline(nt):ut==n.BONE_SHEAR?W=new T.ShearTimeline(nt):(W=new T.TranslateTimeline(nt),ft=V),W.boneIndex=et;for(var ot=0;ot<nt;ot++)W.setFrame(ot,u.readFloat(),u.readFloat()*ft,u.readFloat()*ft),ot<nt-1&&this.readCurve(u,ot,W);S.push(W),I=Math.max(I,W.frames[(nt-1)*T.TranslateTimeline.ENTRIES]);}}for(var E=0,X=u.readInt(true);E<X;E++){var at=u.readInt(true),nt=u.readInt(true),W;(W=new T.IkConstraintTimeline(nt)).ikConstraintIndex=at;for(var ot=0;ot<nt;ot++)W.setFrame(ot,u.readFloat(),u.readFloat(),u.readFloat()*V,u.readByte(),u.readBoolean(),u.readBoolean()),ot<nt-1&&this.readCurve(u,ot,W);S.push(W),I=Math.max(I,W.frames[(nt-1)*T.IkConstraintTimeline.ENTRIES]);}for(var E=0,X=u.readInt(true);E<X;E++){var at=u.readInt(true),nt=u.readInt(true),W;(W=new T.TransformConstraintTimeline(nt)).transformConstraintIndex=at;for(var ot=0;ot<nt;ot++)W.setFrame(ot,u.readFloat(),u.readFloat(),u.readFloat(),u.readFloat(),u.readFloat()),ot<nt-1&&this.readCurve(u,ot,W);S.push(W),I=Math.max(I,W.frames[(nt-1)*T.TransformConstraintTimeline.ENTRIES]);}for(var E=0,X=u.readInt(true);E<X;E++)for(var at=u.readInt(true),Ct=M.pathConstraints[at],Q=0,st=u.readInt(true);Q<st;Q++){var ut=u.readByte(),nt=u.readInt(true);switch(ut){case n.PATH_POSITION:case n.PATH_SPACING:var W=void 0,ft=1;ut==n.PATH_SPACING?(W=new T.PathConstraintSpacingTimeline(nt),Ct.spacingMode!=T.SpacingMode.Length&&Ct.spacingMode!=T.SpacingMode.Fixed||(ft=V)):(W=new T.PathConstraintPositionTimeline(nt),Ct.positionMode==T.PositionMode.Fixed&&(ft=V)),W.pathConstraintIndex=at;for(var ot=0;ot<nt;ot++)W.setFrame(ot,u.readFloat(),u.readFloat()*ft),ot<nt-1&&this.readCurve(u,ot,W);S.push(W),I=Math.max(I,W.frames[(nt-1)*T.PathConstraintPositionTimeline.ENTRIES]);break;case n.PATH_MIX:var W;(W=new T.PathConstraintMixTimeline(nt)).pathConstraintIndex=at;for(var ot=0;ot<nt;ot++)W.setFrame(ot,u.readFloat(),u.readFloat(),u.readFloat()),ot<nt-1&&this.readCurve(u,ot,W);S.push(W),I=Math.max(I,W.frames[(nt-1)*T.PathConstraintMixTimeline.ENTRIES]);}}for(var E=0,X=u.readInt(true);E<X;E++)for(var dt=M.skins[u.readInt(true)],Q=0,st=u.readInt(true);Q<st;Q++)for(var z=u.readInt(true),mt=0,kt=u.readInt(true);mt<kt;mt++){var ht=dt.getAttachment(z,u.readStringRef()),$=ht.bones!=null,ct=ht.vertices,wt=$?ct.length/3*2:ct.length,nt=u.readInt(true),W;(W=new T.DeformTimeline(nt)).slotIndex=z,W.attachment=ht;for(var ot=0;ot<nt;ot++){var it=u.readFloat(),yt=void 0,Xt=u.readInt(true);if(Xt==0)yt=$?T.Utils.newFloatArray(wt):ct;else {yt=T.Utils.newFloatArray(wt);var Dt=u.readInt(true);if(Xt+=Dt,V==1)for(var Lt=Dt;Lt<Xt;Lt++)yt[Lt]=u.readFloat();else for(var Lt=Dt;Lt<Xt;Lt++)yt[Lt]=u.readFloat()*V;if(!$)for(var Lt=0,Bt=yt.length;Lt<Bt;Lt++)yt[Lt]+=ct[Lt];}W.setFrame(ot,it,yt),ot<nt-1&&this.readCurve(u,ot,W);}S.push(W),I=Math.max(I,W.frames[nt-1]);}var zt=u.readInt(true);if(zt>0){for(var W=new T.DrawOrderTimeline(zt),Yt=M.slots.length,E=0;E<zt;E++){for(var it=u.readFloat(),Tt=u.readInt(true),bt=T.Utils.newArray(Yt,0),Q=Yt-1;Q>=0;Q--)bt[Q]=-1;for(var _t=T.Utils.newArray(Yt-Tt,0),se=0,Kt=0,Q=0;Q<Tt;Q++){for(var z=u.readInt(true);se!=z;)_t[Kt++]=se++;bt[se+u.readInt(true)]=se++;}for(;se<Yt;)_t[Kt++]=se++;for(var Q=Yt-1;Q>=0;Q--)bt[Q]==-1&&(bt[Q]=_t[--Kt]);W.setFrame(E,it,bt);}S.push(W),I=Math.max(I,W.frames[zt-1]);}var De=u.readInt(true);if(De>0){for(var W=new T.EventTimeline(De),E=0;E<De;E++){var it=u.readFloat(),$e=M.events[u.readInt(true)],Te=new T.Event(it,$e);Te.intValue=u.readInt(false),Te.floatValue=u.readFloat(),Te.stringValue=u.readBoolean()?u.readString():$e.stringValue,Te.data.audioPath!=null&&(Te.volume=u.readFloat(),Te.balance=u.readFloat()),W.setFrame(E,Te);}S.push(W),I=Math.max(I,W.frames[De-1]);}return new T.Animation(d,S,I)},n.prototype.readCurve=function(u,d,M){switch(u.readByte()){case n.CURVE_STEPPED:M.setStepped(d);break;case n.CURVE_BEZIER:this.setCurve(M,d,u.readFloat(),u.readFloat(),u.readFloat(),u.readFloat());}},n.prototype.setCurve=function(u,d,M,S,V,I){u.setCurve(d,M,S,V,I);},n.AttachmentTypeValues=[0,1,2,3,4,5,6],n.TransformModeValues=[T.TransformMode.Normal,T.TransformMode.OnlyTranslation,T.TransformMode.NoRotationOrReflection,T.TransformMode.NoScale,T.TransformMode.NoScaleOrReflection],n.PositionModeValues=[T.PositionMode.Fixed,T.PositionMode.Percent],n.SpacingModeValues=[T.SpacingMode.Length,T.SpacingMode.Fixed,T.SpacingMode.Percent],n.RotateModeValues=[T.RotateMode.Tangent,T.RotateMode.Chain,T.RotateMode.ChainScale],n.BlendModeValues=[T.BlendMode.Normal,T.BlendMode.Additive,T.BlendMode.Multiply,T.BlendMode.Screen],n.BONE_ROTATE=0,n.BONE_TRANSLATE=1,n.BONE_SCALE=2,n.BONE_SHEAR=3,n.SLOT_ATTACHMENT=0,n.SLOT_COLOR=1,n.SLOT_TWO_COLOR=2,n.PATH_POSITION=0,n.PATH_SPACING=1,n.PATH_MIX=2,n.CURVE_LINEAR=0,n.CURVE_STEPPED=1,n.CURVE_BEZIER=2,n})();T.SkeletonBinary=f;var r=(function(){function n(u,d,M,S){d===void 0&&(d=new Array),M===void 0&&(M=0),S===void 0&&(S=new DataView(u.buffer)),this.strings=d,this.index=M,this.buffer=S;}return n.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},n.prototype.readShort=function(){var u=this.buffer.getInt16(this.index);return this.index+=2,u},n.prototype.readInt32=function(){var u=this.buffer.getInt32(this.index);return this.index+=4,u},n.prototype.readInt=function(u){var d=this.readByte(),M=127&d;return (128&d)!=0&&(M|=(127&(d=this.readByte()))<<7,(128&d)!=0&&(M|=(127&(d=this.readByte()))<<14,(128&d)!=0&&(M|=(127&(d=this.readByte()))<<21,(128&d)!=0&&(M|=(127&(d=this.readByte()))<<28)))),u?M:M>>>1^-(1&M)},n.prototype.readStringRef=function(){var u=this.readInt(true);return u==0?null:this.strings[u-1]},n.prototype.readString=function(){var u=this.readInt(true);switch(u){case 0:return null;case 1:return ""}u--;for(var d="",M=0,S=0;S<u;){var V=this.readByte();switch(V>>4){case 12:case 13:d+=String.fromCharCode((31&V)<<6|63&this.readByte()),S+=2;break;case 14:d+=String.fromCharCode((15&V)<<12|(63&this.readByte())<<6|63&this.readByte()),S+=3;break;default:d+=String.fromCharCode(V),S++;}}return d},n.prototype.readFloat=function(){var u=this.buffer.getFloat32(this.index);return this.index+=4,u},n.prototype.readBoolean=function(){return this.readByte()!=0},n})(),v=(function(){function n(u,d,M,S,V){this.mesh=u,this.skin=d,this.slotIndex=M,this.parent=S,this.inheritDeform=V;}return n})(),c=(function(){function n(u,d){u===void 0&&(u=null),d===void 0&&(d=null),this.bones=u,this.vertices=d;}return n})();})(Rt||(Rt={})),(function(T){var f=(function(){function r(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new T.Pool((function(){return T.Utils.newFloatArray(16)}));}return r.prototype.update=function(v,c){if(v==null)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,u=this.polygons,d=this.polygonPool,M=Skeleton.slots,S=M.length;n.length=0,d.freeAll(u),u.length=0;for(var V=0;V<S;V++){var I=M[V];if(I.bone.active){var D=I.getAttachment();if(D instanceof T.BoundingBoxAttachment){var k=D;n.push(k);var E=d.obtain();E.length!=k.worldVerticesLength&&(E=T.Utils.newFloatArray(k.worldVerticesLength)),u.push(E),k.computeWorldVertices(I,0,k.worldVerticesLength,E,0,2);}}}c?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY);},r.prototype.aabbCompute=function(){for(var v=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,d=this.polygons,M=0,S=d.length;M<S;M++)for(var V=d[M],I=V,D=0,k=V.length;D<k;D+=2){var E=I[D],X=I[D+1];v=Math.min(v,E),c=Math.min(c,X),n=Math.max(n,E),u=Math.max(u,X);}this.minX=v,this.minY=c,this.maxX=n,this.maxY=u;},r.prototype.aabbContainsPoint=function(v,c){return v>=this.minX&&v<=this.maxX&&c>=this.minY&&c<=this.maxY},r.prototype.aabbIntersectsSegment=function(v,c,n,u){var d=this.minX,M=this.minY,S=this.maxX,V=this.maxY;if(v<=d&&n<=d||c<=M&&u<=M||v>=S&&n>=S||c>=V&&u>=V)return  false;var I=(u-c)/(n-v),D=I*(d-v)+c;if(D>M&&D<V||(D=I*(S-v)+c)>M&&D<V)return  true;var k=(M-c)/I+v;return k>d&&k<S||(k=(V-c)/I+v)>d&&k<S},r.prototype.aabbIntersectsSkeleton=function(v){return this.minX<v.maxX&&this.maxX>v.minX&&this.minY<v.maxY&&this.maxY>v.minY},r.prototype.containsPoint=function(v,c){for(var n=this.polygons,u=0,d=n.length;u<d;u++)if(this.containsPointPolygon(n[u],v,c))return this.boundingBoxes[u];return null},r.prototype.containsPointPolygon=function(v,c,n){for(var u=v,d=v.length,M=d-2,S=false,V=0;V<d;V+=2){var I=u[V+1],D=u[M+1];if(I<n&&D>=n||D<n&&I>=n){var k=u[V];k+(n-I)/(D-I)*(u[M]-k)<c&&(S=!S);}M=V;}return S},r.prototype.intersectsSegment=function(v,c,n,u){for(var d=this.polygons,M=0,S=d.length;M<S;M++)if(this.intersectsSegmentPolygon(d[M],v,c,n,u))return this.boundingBoxes[M];return null},r.prototype.intersectsSegmentPolygon=function(v,c,n,u,d){for(var M=v,S=v.length,V=c-u,I=n-d,D=c*d-n*u,k=M[S-2],E=M[S-1],X=0;X<S;X+=2){var z=M[X],Q=M[X+1],st=k*Q-E*z,ut=k-z,nt=E-Q,ot=V*nt-I*ut,it=(D*ut-V*st)/ot;if((it>=k&&it<=z||it>=z&&it<=k)&&(it>=c&&it<=u||it>=u&&it<=c)){var W=(D*nt-I*st)/ot;if((W>=E&&W<=Q||W>=Q&&W<=E)&&(W>=n&&W<=d||W>=d&&W<=n))return  true}k=z,E=Q;}return  false},r.prototype.getPolygon=function(v){if(v==null)throw new Error("boundingBox cannot be null.");var c=this.boundingBoxes.indexOf(v);return c==-1?null:this.polygons[c]},r.prototype.getWidth=function(){return this.maxX-this.minX},r.prototype.getHeight=function(){return this.maxY-this.minY},r})();T.SkeletonBounds=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(){this.triangulator=new T.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array;}return r.prototype.clipStart=function(v,c){if(this.clipAttachment!=null)return 0;this.clipAttachment=c;var n=c.worldVerticesLength,u=T.Utils.setArraySize(this.clippingPolygon,n);c.computeWorldVertices(v,0,n,u,0,2);var d=this.clippingPolygon;r.makeClockwise(d);for(var M=this.clippingPolygons=this.triangulator.decompose(d,this.triangulator.triangulate(d)),S=0,V=M.length;S<V;S++){var I=M[S];r.makeClockwise(I),I.push(I[0]),I.push(I[1]);}return M.length},r.prototype.clipEndWithSlot=function(v){this.clipAttachment!=null&&this.clipAttachment.endSlot==v.data&&this.clipEnd();},r.prototype.clipEnd=function(){this.clipAttachment!=null&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0);},r.prototype.isClipping=function(){return this.clipAttachment!=null},r.prototype.clipTriangles=function(v,c,n,u,d,M,S,V){var I=this.clipOutput,D=this.clippedVertices,k=this.clippedTriangles,E=this.clippingPolygons,X=this.clippingPolygons.length,z=V?12:8,Q=0;D.length=0,k.length=0;t:for(var st=0;st<u;st+=3)for(var ut=n[st]<<1,nt=v[ut],ot=v[ut+1],it=d[ut],W=d[ut+1],et=v[ut=n[st+1]<<1],ft=v[ut+1],at=d[ut],Ct=d[ut+1],dt=v[ut=n[st+2]<<1],mt=v[ut+1],kt=d[ut],ht=d[ut+1],$=0;$<X;$++){var ct=D.length;if(!this.clip(nt,ot,et,ft,dt,mt,E[$],I)){var wt,yt;(wt=T.Utils.setArraySize(D,ct+3*z))[ct]=nt,wt[ct+1]=ot,wt[ct+2]=M.r,wt[ct+3]=M.g,wt[ct+4]=M.b,wt[ct+5]=M.a,V?(wt[ct+6]=it,wt[ct+7]=W,wt[ct+8]=S.r,wt[ct+9]=S.g,wt[ct+10]=S.b,wt[ct+11]=S.a,wt[ct+12]=et,wt[ct+13]=ft,wt[ct+14]=M.r,wt[ct+15]=M.g,wt[ct+16]=M.b,wt[ct+17]=M.a,wt[ct+18]=at,wt[ct+19]=Ct,wt[ct+20]=S.r,wt[ct+21]=S.g,wt[ct+22]=S.b,wt[ct+23]=S.a,wt[ct+24]=dt,wt[ct+25]=mt,wt[ct+26]=M.r,wt[ct+27]=M.g,wt[ct+28]=M.b,wt[ct+29]=M.a,wt[ct+30]=kt,wt[ct+31]=ht,wt[ct+32]=S.r,wt[ct+33]=S.g,wt[ct+34]=S.b,wt[ct+35]=S.a):(wt[ct+6]=it,wt[ct+7]=W,wt[ct+8]=et,wt[ct+9]=ft,wt[ct+10]=M.r,wt[ct+11]=M.g,wt[ct+12]=M.b,wt[ct+13]=M.a,wt[ct+14]=at,wt[ct+15]=Ct,wt[ct+16]=dt,wt[ct+17]=mt,wt[ct+18]=M.r,wt[ct+19]=M.g,wt[ct+20]=M.b,wt[ct+21]=M.a,wt[ct+22]=kt,wt[ct+23]=ht),ct=k.length,(yt=T.Utils.setArraySize(k,ct+3))[ct]=Q,yt[ct+1]=Q+1,yt[ct+2]=Q+2,Q+=3;continue t}var Xt=I.length;if(Xt!=0){for(var Dt=ft-mt,Lt=dt-et,Bt=nt-dt,zt=mt-ot,Yt=1/(Dt*Bt+Lt*(ot-mt)),Tt=Xt>>1,bt=this.clipOutput,wt=T.Utils.setArraySize(D,ct+Tt*z),_t=0;_t<Xt;_t+=2){var se=bt[_t],Kt=bt[_t+1];wt[ct]=se,wt[ct+1]=Kt,wt[ct+2]=M.r,wt[ct+3]=M.g,wt[ct+4]=M.b,wt[ct+5]=M.a;var De=se-dt,$e=Kt-mt,Te=(Dt*De+Lt*$e)*Yt,Qe=(zt*De+Bt*$e)*Yt,ss=1-Te-Qe;wt[ct+6]=it*Te+at*Qe+kt*ss,wt[ct+7]=W*Te+Ct*Qe+ht*ss,V&&(wt[ct+8]=S.r,wt[ct+9]=S.g,wt[ct+10]=S.b,wt[ct+11]=S.a),ct+=z;}ct=k.length;var yt=T.Utils.setArraySize(k,ct+3*(Tt-2));Tt--;for(var _t=1;_t<Tt;_t++)yt[ct]=Q,yt[ct+1]=Q+_t,yt[ct+2]=Q+_t+1,ct+=3;Q+=Tt+1;}}},r.prototype.clip=function(v,c,n,u,d,M,S,V){var I=V,D=false,k=null;S.length%4>=2?(k=V,V=this.scratch):k=this.scratch,k.length=0,k.push(v),k.push(c),k.push(n),k.push(u),k.push(d),k.push(M),k.push(v),k.push(c),V.length=0;for(var E=S,X=S.length-4,z=0;;z+=2){for(var Q=E[z],st=E[z+1],ut=E[z+2],nt=E[z+3],ot=Q-ut,it=st-nt,W=k,et=k.length-2,ft=V.length,at=0;at<et;at+=2){var Ct=W[at],dt=W[at+1],mt=W[at+2],kt=W[at+3],ht=ot*(kt-nt)-it*(mt-ut)>0;if(ot*(dt-nt)-it*(Ct-ut)>0){if(ht){V.push(mt),V.push(kt);continue}var $,ct,wt=($=kt-dt)*(ut-Q)-(ct=mt-Ct)*(nt-st);if(Math.abs(wt)>1e-6){var yt=(ct*(st-dt)-$*(Q-Ct))/wt;V.push(Q+(ut-Q)*yt),V.push(st+(nt-st)*yt);}else V.push(Q),V.push(st);}else if(ht){var $,ct,wt=($=kt-dt)*(ut-Q)-(ct=mt-Ct)*(nt-st);if(Math.abs(wt)>1e-6){var yt=(ct*(st-dt)-$*(Q-Ct))/wt;V.push(Q+(ut-Q)*yt),V.push(st+(nt-st)*yt);}else V.push(Q),V.push(st);V.push(mt),V.push(kt);}D=true;}if(ft==V.length)return I.length=0,true;if(V.push(V[0]),V.push(V[1]),z==X)break;var Xt=V;(V=k).length=0,k=Xt;}if(I!=V){I.length=0;for(var z=0,Dt=V.length-2;z<Dt;z++)I[z]=V[z];}else I.length=I.length-2;return D},r.makeClockwise=function(v){for(var c=v,n=v.length,u=c[n-2]*c[1]-c[0]*c[n-1],d=0,M=0,S=0,V=0,I=0,D=n-3;I<D;I+=2)d=c[I],M=c[I+1],S=c[I+2],u+=d*(V=c[I+3])-S*M;if(!(u<0))for(var I=0,k=n-2,D=n>>1;I<D;I+=2){var E=c[I],X=c[I+1],z=k-I;c[I]=c[z],c[I+1]=c[z+1],c[z]=E,c[z+1]=X;}},r})();T.SkeletonClipping=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0;}return r.prototype.findBone=function(v){if(v==null)throw new Error("boneName cannot be null.");for(var c=this.bones,n=0,u=c.length;n<u;n++){var d=c[n];if(d.name==v)return d}return null},r.prototype.findBoneIndex=function(v){if(v==null)throw new Error("boneName cannot be null.");for(var c=this.bones,n=0,u=c.length;n<u;n++)if(c[n].name==v)return n;return  -1},r.prototype.findSlot=function(v){if(v==null)throw new Error("slotName cannot be null.");for(var c=this.slots,n=0,u=c.length;n<u;n++){var d=c[n];if(d.name==v)return d}return null},r.prototype.findSlotIndex=function(v){if(v==null)throw new Error("slotName cannot be null.");for(var c=this.slots,n=0,u=c.length;n<u;n++)if(c[n].name==v)return n;return  -1},r.prototype.findSkin=function(v){if(v==null)throw new Error("skinName cannot be null.");for(var c=this.skins,n=0,u=c.length;n<u;n++){var d=c[n];if(d.name==v)return d}return null},r.prototype.findEvent=function(v){if(v==null)throw new Error("eventDataName cannot be null.");for(var c=this.events,n=0,u=c.length;n<u;n++){var d=c[n];if(d.name==v)return d}return null},r.prototype.findAnimation=function(v){if(v==null)throw new Error("animationName cannot be null.");for(var c=this.animations,n=0,u=c.length;n<u;n++){var d=c[n];if(d.name==v)return d}return null},r.prototype.findIkConstraint=function(v){if(v==null)throw new Error("constraintName cannot be null.");for(var c=this.ikConstraints,n=0,u=c.length;n<u;n++){var d=c[n];if(d.name==v)return d}return null},r.prototype.findTransformConstraint=function(v){if(v==null)throw new Error("constraintName cannot be null.");for(var c=this.transformConstraints,n=0,u=c.length;n<u;n++){var d=c[n];if(d.name==v)return d}return null},r.prototype.findPathConstraint=function(v){if(v==null)throw new Error("constraintName cannot be null.");for(var c=this.pathConstraints,n=0,u=c.length;n<u;n++){var d=c[n];if(d.name==v)return d}return null},r.prototype.findPathConstraintIndex=function(v){if(v==null)throw new Error("pathConstraintName cannot be null.");for(var c=this.pathConstraints,n=0,u=c.length;n<u;n++)if(c[n].name==v)return n;return  -1},r})();T.SkeletonData=f;})(Rt||(Rt={})),(function(T){var f=(function(){function v(c){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=c;}return v.prototype.readSkeletonData=function(c){var n=this.scale,u=new T.SkeletonData,d=typeof c=="string"?JSON.parse(c):c,M=d.skeleton;if(M!=null&&(u.hash=M.hash,u.version=M.spine,u.x=M.x,u.y=M.y,u.width=M.width,u.height=M.height,u.fps=M.fps,u.imagesPath=M.images),d.bones)for(var S=0;S<d.bones.length;S++){var V=d.bones[S],I=null,D=this.getValue(V,"parent",null),k;if(D!=null&&(I=u.findBone(D))==null)throw new Error("Parent bone not found: "+D);(k=new T.BoneData(u.bones.length,V.name,I)).length=this.getValue(V,"length",0)*n,k.x=this.getValue(V,"x",0)*n,k.y=this.getValue(V,"y",0)*n,k.rotation=this.getValue(V,"rotation",0),k.scaleX=this.getValue(V,"scaleX",1),k.scaleY=this.getValue(V,"scaleY",1),k.shearX=this.getValue(V,"shearX",0),k.shearY=this.getValue(V,"shearY",0),k.transformMode=v.transformModeFromString(this.getValue(V,"transform","normal")),k.skinRequired=this.getValue(V,"skin",false),u.bones.push(k);}if(d.slots)for(var S=0;S<d.slots.length;S++){var E,X=(E=d.slots[S]).name,z=E.bone,Q=u.findBone(z);if(Q==null)throw new Error("Slot bone not found: "+z);var k=new T.SlotData(u.slots.length,X,Q),st=this.getValue(E,"color",null);st!=null&&k.color.setFromString(st);var ut=this.getValue(E,"dark",null);ut!=null&&(k.darkColor=new T.Color(1,1,1,1),k.darkColor.setFromString(ut)),k.attachmentName=this.getValue(E,"attachment",null),k.blendMode=v.blendModeFromString(this.getValue(E,"blend","normal")),u.slots.push(k);}if(d.ik)for(var S=0;S<d.ik.length;S++){var nt=d.ik[S],k;(k=new T.IkConstraintData(nt.name)).order=this.getValue(nt,"order",0),k.skinRequired=this.getValue(nt,"skin",false);for(var ot=0;ot<nt.bones.length;ot++){var z=nt.bones[ot],it;if((it=SkeletonData.findBone(z))==null)throw new Error("IK bone not found: "+z);k.bones.push(it);}var W=nt.target;if(k.target=SkeletonData.findBone(W),k.target==null)throw new Error("IK target bone not found: "+W);k.mix=this.getValue(nt,"mix",1),k.softness=this.getValue(nt,"softness",0)*n,k.bendDirection=this.getValue(nt,"bendPositive",true)?1:-1,k.compress=this.getValue(nt,"compress",false),k.stretch=this.getValue(nt,"stretch",false),k.uniform=this.getValue(nt,"uniform",false),u.ikConstraints.push(k);}if(d.transform)for(var S=0;S<d.transform.length;S++){var nt=d.transform[S],k;(k=new T.TransformConstraintData(nt.name)).order=this.getValue(nt,"order",0),k.skinRequired=this.getValue(nt,"skin",false);for(var ot=0;ot<nt.bones.length;ot++){var z=nt.bones[ot],it;if((it=SkeletonData.findBone(z))==null)throw new Error("Transform constraint bone not found: "+z);k.bones.push(it);}var W=nt.target;if(k.target=SkeletonData.findBone(W),k.target==null)throw new Error("Transform constraint target bone not found: "+W);k.local=this.getValue(nt,"local",false),k.relative=this.getValue(nt,"relative",false),k.offsetRotation=this.getValue(nt,"rotation",0),k.offsetX=this.getValue(nt,"x",0)*n,k.offsetY=this.getValue(nt,"y",0)*n,k.offsetScaleX=this.getValue(nt,"scaleX",0),k.offsetScaleY=this.getValue(nt,"scaleY",0),k.offsetShearY=this.getValue(nt,"shearY",0),k.rotateMix=this.getValue(nt,"rotateMix",1),k.translateMix=this.getValue(nt,"translateMix",1),k.scaleMix=this.getValue(nt,"scaleMix",1),k.shearMix=this.getValue(nt,"shearMix",1),u.transformConstraints.push(k);}if(d.path)for(var S=0;S<d.path.length;S++){var nt=d.path[S],k;(k=new T.PathConstraintData(nt.name)).order=this.getValue(nt,"order",0),k.skinRequired=this.getValue(nt,"skin",false);for(var ot=0;ot<nt.bones.length;ot++){var z=nt.bones[ot],it;if((it=SkeletonData.findBone(z))==null)throw new Error("Transform constraint bone not found: "+z);k.bones.push(it);}var W=nt.target;if(k.target=SkeletonData.findSlot(W),k.target==null)throw new Error("Path target slot not found: "+W);k.positionMode=v.positionModeFromString(this.getValue(nt,"positionMode","percent")),k.spacingMode=v.spacingModeFromString(this.getValue(nt,"spacingMode","length")),k.rotateMode=v.rotateModeFromString(this.getValue(nt,"rotateMode","tangent")),k.offsetRotation=this.getValue(nt,"rotation",0),k.position=this.getValue(nt,"position",0),k.positionMode==T.PositionMode.Fixed&&(k.position*=n),k.spacing=this.getValue(nt,"spacing",0),k.spacingMode!=T.SpacingMode.Length&&k.spacingMode!=T.SpacingMode.Fixed||(k.spacing*=n),k.rotateMix=this.getValue(nt,"rotateMix",1),k.translateMix=this.getValue(nt,"translateMix",1),u.pathConstraints.push(k);}if(d.skins)for(var S=0;S<d.skins.length;S++){var et=d.skins[S],ft=new T.Skin(et.name);if(et.bones)for(var at=0;at<et.bones.length;at++){var it;if((it=SkeletonData.findBone(et.bones[at]))==null)throw new Error("Skin bone not found: "+et.bones[S]);ft.bones.push(it);}if(et.ik)for(var at=0;at<et.ik.length;at++){var Ct;if((Ct=SkeletonData.findIkConstraint(et.ik[at]))==null)throw new Error("Skin IK constraint not found: "+et.ik[S]);ft.constraints.push(Ct);}if(et.transform)for(var at=0;at<et.transform.length;at++){var Ct;if((Ct=SkeletonData.findTransformConstraint(et.transform[at]))==null)throw new Error("Skin transform constraint not found: "+et.transform[S]);ft.constraints.push(Ct);}if(et.path)for(var at=0;at<et.path.length;at++){var Ct;if((Ct=SkeletonData.findPathConstraint(et.path[at]))==null)throw new Error("Skin path constraint not found: "+et.path[S]);ft.constraints.push(Ct);}for(var X in et.attachments){var dt=SkeletonData.findSlot(X);if(dt==null)throw new Error("Slot not found: "+X);var E=et.attachments[X];for(var mt in E){var kt=this.readAttachment(E[mt],ft,dt.index,mt,SkeletonData);kt!=null&&ft.setAttachment(dt.index,mt,kt);}}u.skins.push(ft),ft.name=="default"&&(u.defaultSkin=ft);}for(var S=0,ht=this.linkedMeshes.length;S<ht;S++){var $=this.linkedMeshes[S],ft;if((ft=$.skin==null?SkeletonData.defaultSkin:SkeletonData.findSkin($.skin))==null)throw new Error("Skin not found: "+$.skin);var ct=ft.getAttachment($.slotIndex,$.parent);if(ct==null)throw new Error("Parent mesh not found: "+$.parent);$.mesh.deformAttachment=$.inheritDeform?ct:$.mesh,$.mesh.setParentMesh(ct),$.mesh.updateUVs();}if(this.linkedMeshes.length=0,d.events)for(var wt in d.events){var yt=d.events[wt],k;(k=new T.EventData(wt)).intValue=this.getValue(yt,"int",0),k.floatValue=this.getValue(yt,"float",0),k.stringValue=this.getValue(yt,"string",""),k.audioPath=this.getValue(yt,"audio",null),k.audioPath!=null&&(k.volume=this.getValue(yt,"volume",1),k.balance=this.getValue(yt,"balance",0)),u.events.push(k);}if(d.animations)for(var Xt in d.animations){var Dt=d.animations[Xt];this.readAnimation(Dt,Xt,SkeletonData);}return SkeletonData},v.prototype.readAttachment=function(c,n,u,d,M){var S=this.scale;switch(d=this.getValue(c,"name",d),this.getValue(c,"type","region")){case "region":var z=this.getValue(c,"path",d),I=this.attachmentLoader.newRegionAttachment(n,d,z),et;return I==null?null:(I.path=z,I.x=this.getValue(c,"x",0)*S,I.y=this.getValue(c,"y",0)*S,I.scaleX=this.getValue(c,"scaleX",1),I.scaleY=this.getValue(c,"scaleY",1),I.rotation=this.getValue(c,"rotation",0),I.width=c.width*S,I.height=c.height*S,(et=this.getValue(c,"color",null))!=null&&I.color.setFromString(et),I.updateOffset(),I);case "boundingbox":var D=this.attachmentLoader.newBoundingBoxAttachment(n,d),et;return D==null?null:(this.readVertices(c,D,c.vertexCount<<1),(et=this.getValue(c,"color",null))!=null&&D.color.setFromString(et),D);case "mesh":case "linkedmesh":var z=this.getValue(c,"path",d),k=this.attachmentLoader.newMeshAttachment(n,d,z),et;if(k==null)return null;k.path=z,(et=this.getValue(c,"color",null))!=null&&k.color.setFromString(et),k.width=this.getValue(c,"width",0)*S,k.height=this.getValue(c,"height",0)*S;var E=this.getValue(c,"parent",null);if(E!=null)return this.linkedMeshes.push(new r(k,this.getValue(c,"skin",null),u,E,this.getValue(c,"deform",true))),k;var X=c.uvs;return this.readVertices(c,k,X.length),k.triangles=c.triangles,k.regionUVs=X,k.updateUVs(),k.edges=this.getValue(c,"edges",null),k.hullLength=2*this.getValue(c,"hull",0),k;case "path":var z;if((z=this.attachmentLoader.newPathAttachment(n,d))==null)return null;z.closed=this.getValue(c,"closed",false),z.constantSpeed=this.getValue(c,"constantSpeed",true);var W=c.vertexCount,et;this.readVertices(c,z,W<<1);for(var Q=T.Utils.newArray(W/3,0),st=0;st<c.lengths.length;st++)Q[st]=c.lengths[st]*S;return z.lengths=Q,(et=this.getValue(c,"color",null))!=null&&z.color.setFromString(et),z;case "point":var ut=this.attachmentLoader.newPointAttachment(n,d),et;return ut==null?null:(ut.x=this.getValue(c,"x",0)*S,ut.y=this.getValue(c,"y",0)*S,ut.rotation=this.getValue(c,"rotation",0),(et=this.getValue(c,"color",null))!=null&&ut.color.setFromString(et),ut);case "clipping":var nt=this.attachmentLoader.newClippingAttachment(n,d);if(nt==null)return null;var ot=this.getValue(c,"end",null);if(ot!=null){var it=M.findSlot(ot);if(it==null)throw new Error("Clipping end slot not found: "+ot);nt.endSlot=it;}var W=c.vertexCount,et;return this.readVertices(c,nt,W<<1),(et=this.getValue(c,"color",null))!=null&&nt.color.setFromString(et),nt}return null},v.prototype.readVertices=function(c,n,u){var d=this.scale;n.worldVerticesLength=u;var M=c.vertices;if(u!=M.length){for(var S=new Array,V=new Array,I=0,D=M.length;I<D;){var k=M[I++];V.push(k);for(var E=I+4*k;I<E;I+=4)V.push(M[I]),S.push(M[I+1]*d),S.push(M[I+2]*d),S.push(M[I+3]);}n.bones=V,n.vertices=T.Utils.toFloatArray(S);}else {var X=T.Utils.toFloatArray(M);if(d!=1)for(var I=0,D=M.length;I<D;I++)X[I]*=d;n.vertices=X;}},v.prototype.readAnimation=function(c,n,u){var d=this.scale,M=new Array,S=0;if(c.slots)for(var V in c.slots){var I=c.slots[V],D;if((D=u.findSlotIndex(V))==-1)throw new Error("Slot not found: "+V);for(var k in I){var E=I[k];if(k=="attachment"){var X;(X=new T.AttachmentTimeline(E.length)).slotIndex=D;for(var z=0,Q=0;Q<E.length;Q++){var st=E[Q];X.setFrame(z++,this.getValue(st,"time",0),st.name);}M.push(X),S=Math.max(S,X.frames[X.getFrameCount()-1]);}else if(k=="color"){var X;(X=new T.ColorTimeline(E.length)).slotIndex=D;for(var z=0,Q=0;Q<E.length;Q++){var st=E[Q],ut=new T.Color;ut.setFromString(st.color),X.setFrame(z,this.getValue(st,"time",0),ut.r,ut.g,ut.b,ut.a),this.readCurve(st,X,z),z++;}M.push(X),S=Math.max(S,X.frames[(X.getFrameCount()-1)*T.ColorTimeline.ENTRIES]);}else {if(k!="twoColor")throw new Error("Invalid timeline type for a slot: "+k+" ("+V+")");var X;(X=new T.TwoColorTimeline(E.length)).slotIndex=D;for(var z=0,Q=0;Q<E.length;Q++){var st=E[Q],nt=new T.Color,ot=new T.Color;nt.setFromString(st.light),ot.setFromString(st.dark),X.setFrame(z,this.getValue(st,"time",0),nt.r,nt.g,nt.b,nt.a,ot.r,ot.g,ot.b),this.readCurve(st,X,z),z++;}M.push(X),S=Math.max(S,X.frames[(X.getFrameCount()-1)*T.TwoColorTimeline.ENTRIES]);}}}if(c.bones)for(var it in c.bones){var W=c.bones[it],et=u.findBoneIndex(it);if(et==-1)throw new Error("Bone not found: "+it);for(var k in W){var E=W[k];if(k==="rotate"){var X;(X=new T.RotateTimeline(E.length)).boneIndex=et;for(var z=0,Q=0;Q<E.length;Q++){var st=E[Q];X.setFrame(z,this.getValue(st,"time",0),this.getValue(st,"angle",0)),this.readCurve(st,X,z),z++;}M.push(X),S=Math.max(S,X.frames[(X.getFrameCount()-1)*T.RotateTimeline.ENTRIES]);}else {if(k!=="translate"&&k!=="scale"&&k!=="shear")throw new Error("Invalid timeline type for a bone: "+k+" ("+it+")");var X=null,ft=1,at=0;k==="scale"?(X=new T.ScaleTimeline(E.length),at=1):k==="shear"?X=new T.ShearTimeline(E.length):(X=new T.TranslateTimeline(E.length),ft=d),X.boneIndex=et;for(var z=0,Q=0;Q<E.length;Q++){var st=E[Q],Ct=this.getValue(st,"x",at),dt=this.getValue(st,"y",at);X.setFrame(z,this.getValue(st,"time",0),Ct*ft,dt*ft),this.readCurve(st,X,z),z++;}M.push(X),S=Math.max(S,X.frames[(X.getFrameCount()-1)*T.TranslateTimeline.ENTRIES]);}}}if(c.ik)for(var mt in c.ik){var kt=c.ik[mt],ht=u.findIkConstraint(mt),X;(X=new T.IkConstraintTimeline(kt.length)).ikConstraintIndex=u.ikConstraints.indexOf(ht);for(var z=0,Q=0;Q<kt.length;Q++){var st=kt[Q];X.setFrame(z,this.getValue(st,"time",0),this.getValue(st,"mix",1),this.getValue(st,"softness",0)*d,this.getValue(st,"bendPositive",true)?1:-1,this.getValue(st,"compress",false),this.getValue(st,"stretch",false)),this.readCurve(st,X,z),z++;}M.push(X),S=Math.max(S,X.frames[(X.getFrameCount()-1)*T.IkConstraintTimeline.ENTRIES]);}if(c.transform)for(var mt in c.transform){var kt=c.transform[mt],ht=u.findTransformConstraint(mt),X;(X=new T.TransformConstraintTimeline(kt.length)).transformConstraintIndex=u.transformConstraints.indexOf(ht);for(var z=0,Q=0;Q<kt.length;Q++){var st=kt[Q];X.setFrame(z,this.getValue(st,"time",0),this.getValue(st,"rotateMix",1),this.getValue(st,"translateMix",1),this.getValue(st,"scaleMix",1),this.getValue(st,"shearMix",1)),this.readCurve(st,X,z),z++;}M.push(X),S=Math.max(S,X.frames[(X.getFrameCount()-1)*T.TransformConstraintTimeline.ENTRIES]);}if(c.path)for(var mt in c.path){var kt=c.path[mt],$=u.findPathConstraintIndex(mt);if($==-1)throw new Error("Path constraint not found: "+mt);var ct=u.pathConstraints[$];for(var k in kt){var E=kt[k];if(k==="position"||k==="spacing"){var X=null,ft=1;k==="spacing"?(X=new T.PathConstraintSpacingTimeline(E.length),ct.spacingMode!=T.SpacingMode.Length&&ct.spacingMode!=T.SpacingMode.Fixed||(ft=d)):(X=new T.PathConstraintPositionTimeline(E.length),ct.positionMode==T.PositionMode.Fixed&&(ft=d)),X.pathConstraintIndex=$;for(var z=0,Q=0;Q<E.length;Q++){var st=E[Q];X.setFrame(z,this.getValue(st,"time",0),this.getValue(st,k,0)*ft),this.readCurve(st,X,z),z++;}M.push(X),S=Math.max(S,X.frames[(X.getFrameCount()-1)*T.PathConstraintPositionTimeline.ENTRIES]);}else if(k==="mix"){var X;(X=new T.PathConstraintMixTimeline(E.length)).pathConstraintIndex=$;for(var z=0,Q=0;Q<E.length;Q++){var st=E[Q];X.setFrame(z,this.getValue(st,"time",0),this.getValue(st,"rotateMix",1),this.getValue(st,"translateMix",1)),this.readCurve(st,X,z),z++;}M.push(X),S=Math.max(S,X.frames[(X.getFrameCount()-1)*T.PathConstraintMixTimeline.ENTRIES]);}}}if(c.deform)for(var wt in c.deform){var yt=c.deform[wt],Xt=u.findSkin(wt);if(Xt==null)throw new Error("Skin not found: "+wt);for(var V in yt){var I=yt[V],D;if((D=u.findSlotIndex(V))==-1)throw new Error("Slot not found: "+I.name);for(var k in I){var E=I[k],Dt=Xt.getAttachment(D,k);if(Dt==null)throw new Error("Deform attachment not found: "+E.name);var Lt=Dt.bones!=null,Bt=Dt.vertices,zt=Lt?Bt.length/3*2:Bt.length,X;(X=new T.DeformTimeline(E.length)).slotIndex=D,X.attachment=Dt;for(var z=0,Yt=0;Yt<E.length;Yt++){var st=E[Yt],Tt=void 0,bt=this.getValue(st,"vertices",null);if(bt==null)Tt=Lt?T.Utils.newFloatArray(zt):Bt;else {Tt=T.Utils.newFloatArray(zt);var _t=this.getValue(st,"offset",0);if(T.Utils.arrayCopy(bt,0,Tt,_t,bt.length),d!=1)for(var Q,se=(Q=_t)+bt.length;Q<se;Q++)Tt[Q]*=d;if(!Lt)for(var Q=0;Q<zt;Q++)Tt[Q]+=Bt[Q];}X.setFrame(z,this.getValue(st,"time",0),Tt),this.readCurve(st,X,z),z++;}M.push(X),S=Math.max(S,X.frames[X.getFrameCount()-1]);}}}var Kt=c.drawOrder;if(Kt==null&&(Kt=c.draworder),Kt!=null){for(var X=new T.DrawOrderTimeline(Kt.length),De=u.slots.length,z=0,Yt=0;Yt<Kt.length;Yt++){var $e=Kt[Yt],Te=null,Qe=this.getValue($e,"offsets",null);if(Qe!=null){Te=T.Utils.newArray(De,-1);for(var ss=T.Utils.newArray(De-Qe.length,0),us=0,hs=0,Q=0;Q<Qe.length;Q++){var as=Qe[Q],D;if((D=u.findSlotIndex(as.slot))==-1)throw new Error("Slot not found: "+as.slot);for(;us!=D;)ss[hs++]=us++;Te[us+as.offset]=us++;}for(;us<De;)ss[hs++]=us++;for(var Q=De-1;Q>=0;Q--)Te[Q]==-1&&(Te[Q]=ss[--hs]);}X.setFrame(z++,this.getValue($e,"time",0),Te);}M.push(X),S=Math.max(S,X.frames[X.getFrameCount()-1]);}if(c.events){for(var X=new T.EventTimeline(c.events.length),z=0,Q=0;Q<c.events.length;Q++){var xs=c.events[Q],os=u.findEvent(xs.name);if(os==null)throw new Error("Event not found: "+xs.name);var cs=new T.Event(T.Utils.toSinglePrecision(this.getValue(xs,"time",0)),os);cs.intValue=this.getValue(xs,"int",os.intValue),cs.floatValue=this.getValue(xs,"float",os.floatValue),cs.stringValue=this.getValue(xs,"string",os.stringValue),cs.data.audioPath!=null&&(cs.volume=this.getValue(xs,"volume",1),cs.balance=this.getValue(xs,"balance",0)),X.setFrame(z++,cs);}M.push(X),S=Math.max(S,X.frames[X.getFrameCount()-1]);}if(isNaN(S))throw new Error("Error while parsing animation, duration is NaN");skeletonData.animations.push(new T.Animation(n,M,S));},v.prototype.readCurve=function(c,n,u){if(c.hasOwnProperty("curve"))if(c.curve=="stepped")n.setStepped(u);else {var d=c.curve;n.setCurve(u,d,this.getValue(c,"c2",0),this.getValue(c,"c3",1),this.getValue(c,"c4",1));}},v.prototype.getValue=function(c,n,u){return c[n]!==void 0?c[n]:u},v.blendModeFromString=function(c){if((c=c.toLowerCase())=="normal")return T.BlendMode.Normal;if(c=="additive")return T.BlendMode.Additive;if(c=="multiply")return T.BlendMode.Multiply;if(c=="screen")return T.BlendMode.Screen;throw new Error("Unknown blend mode: "+c)},v.positionModeFromString=function(c){if((c=c.toLowerCase())=="fixed")return T.PositionMode.Fixed;if(c=="percent")return T.PositionMode.Percent;throw new Error("Unknown position mode: "+c)},v.spacingModeFromString=function(c){if((c=c.toLowerCase())=="length")return T.SpacingMode.Length;if(c=="fixed")return T.SpacingMode.Fixed;if(c=="percent")return T.SpacingMode.Percent;throw new Error("Unknown position mode: "+c)},v.rotateModeFromString=function(c){if((c=c.toLowerCase())=="tangent")return T.RotateMode.Tangent;if(c=="chain")return T.RotateMode.Chain;if(c=="chainscale")return T.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+c)},v.transformModeFromString=function(c){if((c=c.toLowerCase())=="normal")return T.TransformMode.Normal;if(c=="onlytranslation")return T.TransformMode.OnlyTranslation;if(c=="norotationorreflection")return T.TransformMode.NoRotationOrReflection;if(c=="noscale")return T.TransformMode.NoScale;if(c=="noscaleorreflection")return T.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+c)},v})();T.SkeletonJson=f;var r=(function(){function v(c,n,u,d,M){this.mesh=c,this.skin=n,this.slotIndex=u,this.parent=d,this.inheritDeform=M;}return v})();})(Rt||(Rt={})),(function(T){var f=(function(){function v(c,n,u){this.slotIndex=c,this.name=n,this.attachment=u;}return v})();T.SkinEntry=f;var r=(function(){function v(c){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,c==null)throw new Error("name cannot be null.");this.name=c;}return v.prototype.setAttachment=function(c,n,u){if(u==null)throw new Error("attachment cannot be null.");var d=this.attachments;c>=d.length&&(d.length=c+1),d[c]||(d[c]={}),d[c][n]=u;},v.prototype.addSkin=function(c){for(var n=0;n<c.bones.length;n++){for(var u=c.bones[n],d=false,M=0;M<this.bones.length;M++)if(this.bones[M]==u){d=true;break}d||this.bones.push(u);}for(var n=0;n<c.constraints.length;n++){for(var S=c.constraints[n],d=false,M=0;M<this.constraints.length;M++)if(this.constraints[M]==S){d=true;break}d||this.constraints.push(S);}for(var V=c.getAttachments(),n=0;n<V.length;n++){var I=V[n];this.setAttachment(I.slotIndex,I.name,I.attachment);}},v.prototype.copySkin=function(c){for(var n=0;n<c.bones.length;n++){for(var u=c.bones[n],d=false,M=0;M<this.bones.length;M++)if(this.bones[M]==u){d=true;break}d||this.bones.push(u);}for(var n=0;n<c.constraints.length;n++){for(var S=c.constraints[n],d=false,M=0;M<this.constraints.length;M++)if(this.constraints[M]==S){d=true;break}d||this.constraints.push(S);}for(var V=c.getAttachments(),n=0;n<V.length;n++){var I=V[n];I.attachment!=null&&(I.attachment instanceof T.MeshAttachment?(I.attachment=I.attachment.newLinkedMesh(),this.setAttachment(I.slotIndex,I.name,I.attachment)):(I.attachment=I.attachment.copy(),this.setAttachment(I.slotIndex,I.name,I.attachment)));}},v.prototype.getAttachment=function(c,n){var u=this.attachments[c];return u?u[n]:null},v.prototype.removeAttachment=function(c,n){var u=this.attachments[c];u&&(u[n]=null);},v.prototype.getAttachments=function(){for(var c=new Array,n=0;n<this.attachments.length;n++){var u=this.attachments[n];if(u)for(var d in u){var M=u[d];M&&c.push(new f(n,d,M));}}return c},v.prototype.getAttachmentsForSlot=function(c,n){var u=this.attachments[c];if(u)for(var d in u){var M=u[d];M&&n.push(new f(c,d,M));}},v.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0;},v.prototype.attachAll=function(c,n){for(var u=0,d=0;d<Skeleton.slots.length;d++){var M=Skeleton.slots[d],S=M.getAttachment();if(S&&u<n.attachments.length){var V=n.attachments[u];for(var I in V){if(S==V[I]){var k=this.getAttachment(u,I);k!=null&&M.setAttachment(k);break}}}u++;}},v})();T.Skin=r;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c){if(this.deform=new Array,v==null)throw new Error("data cannot be null.");if(c==null)throw new Error("bone cannot be null.");this.data=v,this.bone=c,this.color=new T.Color,this.darkColor=v.darkColor==null?null:new T.Color,this.setToSetupPose();}return r.prototype.getSkeleton=function(){return this.bone.skeleton},r.prototype.getAttachment=function(){return this.attachment},r.prototype.setAttachment=function(v){this.attachment!=v&&(this.attachment=v,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0);},r.prototype.setAttachmentTime=function(v){this.attachmentTime=this.bone.skeleton.time-v;},r.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},r.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)));},r})();T.Slot=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c,n){if(this.color=new T.Color(1,1,1,1),v<0)throw new Error("index must be >= 0.");if(c==null)throw new Error("name cannot be null.");if(n==null)throw new Error("boneData cannot be null.");this.index=v,this.name=c,this.boneData=n;}return r})();T.SlotData=f;})(Rt||(Rt={})),(function(T){var f=(function(){function u(d){this._image=d;}return u.prototype.getImage=function(){return this._image},u.filterFromString=function(d){switch(d.toLowerCase()){case "nearest":return r.Nearest;case "linear":return r.Linear;case "mipmap":return r.MipMap;case "mipmapnearestnearest":return r.MipMapNearestNearest;case "mipmaplinearnearest":return r.MipMapLinearNearest;case "mipmapnearestlinear":return r.MipMapNearestLinear;case "mipmaplinearlinear":return r.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+d)}},u.wrapFromString=function(d){switch(d.toLowerCase()){case "mirroredtepeat":return v.MirroredRepeat;case "clamptoedge":return v.ClampToEdge;case "repeat":return v.Repeat;default:throw new Error("Unknown texture wrap "+d)}},u})(),r,v;T.Texture=f,(function(u){u[u.Nearest=9728]="Nearest",u[u.Linear=9729]="Linear",u[u.MipMap=9987]="MipMap",u[u.MipMapNearestNearest=9984]="MipMapNearestNearest",u[u.MipMapLinearNearest=9985]="MipMapLinearNearest",u[u.MipMapNearestLinear=9986]="MipMapNearestLinear",u[u.MipMapLinearLinear=9987]="MipMapLinearLinear";})(r=T.TextureFilter||(T.TextureFilter={})),(function(u){u[u.MirroredRepeat=33648]="MirroredRepeat",u[u.ClampToEdge=33071]="ClampToEdge",u[u.Repeat=10497]="Repeat";})(v=T.TextureWrap||(T.TextureWrap={}));var c=(function(){function u(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=false,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0;}return u})();T.TextureRegion=c;var n=(function(u){function d(){return u!==null&&u.apply(this,arguments)||this}return es(d,u),d.prototype.setFilters=function(M,S){},d.prototype.setWraps=function(M,S){},d.prototype.dispose=function(){},d})(f);T.FakeTexture=n;})(Rt||(Rt={})),(function(T){var f=(function(){function n(u,d){this.pages=new Array,this.regions=new Array,this.load(u,d);}return n.prototype.load=function(u,d){if(d==null)throw new Error("textureLoader cannot be null.");for(var M=new r(u),S=new Array(4),V=null;;){var I=M.readLine();if(I==null)break;if((I=I.trim()).length==0)V=null;else if(V){var D=new c;D.name=I,D.page=V;var k=M.readValue();k.toLocaleLowerCase()=="true"?D.degrees=90:k.toLocaleLowerCase()=="false"?D.degrees=0:D.degrees=parseFloat(k),D.rotate=D.degrees==90,M.readTuple(S);var E=parseInt(S[0]),X=parseInt(S[1]);M.readTuple(S);var z=parseInt(S[0]),Q=parseInt(S[1]);D.u=E/V.width,D.v=X/V.height,D.rotate?(D.u2=(E+Q)/V.width,D.v2=(X+z)/V.height):(D.u2=(E+z)/V.width,D.v2=(X+Q)/V.height),D.x=E,D.y=X,D.width=Math.abs(z),D.height=Math.abs(Q),M.readTuple(S)==4&&M.readTuple(S)==4&&M.readTuple(S),D.originalWidth=parseInt(S[0]),D.originalHeight=parseInt(S[1]),M.readTuple(S),D.offsetX=parseInt(S[0]),D.offsetY=parseInt(S[1]),D.index=parseInt(M.readValue()),D.texture=V.texture,this.regions.push(D);}else {(V=new v).name=I,M.readTuple(S)==2&&(V.width=parseInt(S[0]),V.height=parseInt(S[1]),M.readTuple(S)),M.readTuple(S),V.minFilter=T.Texture.filterFromString(S[0]),V.magFilter=T.Texture.filterFromString(S[1]);var st=M.readValue();V.uWrap=T.TextureWrap.ClampToEdge,V.vWrap=T.TextureWrap.ClampToEdge,st=="x"?V.uWrap=T.TextureWrap.Repeat:st=="y"?V.vWrap=T.TextureWrap.Repeat:st=="xy"&&(V.uWrap=V.vWrap=T.TextureWrap.Repeat),V.texture=d(I),V.texture.setFilters(V.minFilter,V.magFilter),V.texture.setWraps(V.uWrap,V.vWrap),V.width=V.texture.getImage().width,V.height=V.texture.getImage().height,this.pages.push(V);}}},n.prototype.findRegion=function(u){for(var d=0;d<this.regions.length;d++)if(this.regions[d].name==u)return this.regions[d];return null},n.prototype.dispose=function(){for(var u=0;u<this.pages.length;u++)this.pages[u].texture.dispose();},n})();T.TextureAtlas=f;var r=(function(){function n(u){this.index=0,this.lines=u.split(/\r\n|\r|\n/);}return n.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},n.prototype.readValue=function(){var u=this.readLine(),d=u.indexOf(":");if(d==-1)throw new Error("Invalid line: "+u);return u.substring(d+1).trim()},n.prototype.readTuple=function(u){var d=this.readLine(),M=d.indexOf(":");if(M==-1)throw new Error("Invalid line: "+d);for(var S=0,V=M+1;S<3;S++){var I=d.indexOf(",",V);if(I==-1)break;u[S]=d.substr(V,I-V).trim(),V=I+1;}return u[S]=d.substring(V).trim(),S+1},n})(),v=(function(){function n(){}return n})();T.TextureAtlasPage=v;var c=(function(n){function u(){return n!==null&&n.apply(this,arguments)||this}return es(u,n),u})(T.TextureRegion);T.TextureAtlasRegion=c;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new T.Vector2,this.active=false,v==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=v,this.rotateMix=v.rotateMix,this.translateMix=v.translateMix,this.scaleMix=v.scaleMix,this.shearMix=v.shearMix,this.bones=new Array;for(var n=0;n<v.bones.length;n++)this.bones.push(skeleton.findBone(v.bones[n].name));this.target=c.findBone(v.target.name);}return r.prototype.isActive=function(){return this.active},r.prototype.apply=function(){this.update();},r.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld();},r.prototype.applyAbsoluteWorld=function(){for(var v=this.rotateMix,c=this.translateMix,n=this.scaleMix,u=this.shearMix,d=this.target,M=d.a,S=d.b,V=d.c,I=d.d,D=M*I-S*V>0?T.MathUtils.degRad:-T.MathUtils.degRad,k=this.data.offsetRotation*D,E=this.data.offsetShearY*D,X=this.bones,z=0,Q=X.length;z<Q;z++){var st=X[z],ut=false;if(v!=0){var nt=st.a,ot=st.b,it=st.c,W=st.d,et;(et=Math.atan2(V,M)-Math.atan2(it,nt)+k)>T.MathUtils.PI?et-=T.MathUtils.PI2:et<-T.MathUtils.PI&&(et+=T.MathUtils.PI2),et*=v;var ft=Math.cos(et),at=Math.sin(et);st.a=ft*nt-at*it,st.b=ft*ot-at*W,st.c=at*nt+ft*it,st.d=at*ot+ft*W,ut=true;}if(c!=0){var Ct=this.temp;d.localToWorld(Ct.set(this.data.offsetX,this.data.offsetY)),st.worldX+=(Ct.x-st.worldX)*c,st.worldY+=(Ct.y-st.worldY)*c,ut=true;}if(n>0){var dt=Math.sqrt(st.a*st.a+st.c*st.c),mt=Math.sqrt(M*M+V*V);dt>1e-5&&(dt=(dt+(mt-dt+this.data.offsetScaleX)*n)/dt),st.a*=dt,st.c*=dt,dt=Math.sqrt(st.b*st.b+st.d*st.d),mt=Math.sqrt(S*S+I*I),dt>1e-5&&(dt=(dt+(mt-dt+this.data.offsetScaleY)*n)/dt),st.b*=dt,st.d*=dt,ut=true;}if(u>0){var ot=st.b,W=st.d,kt=Math.atan2(W,ot),et;(et=Math.atan2(I,S)-Math.atan2(V,M)-(kt-Math.atan2(st.c,st.a)))>T.MathUtils.PI?et-=T.MathUtils.PI2:et<-T.MathUtils.PI&&(et+=T.MathUtils.PI2),et=kt+(et+E)*u;var dt=Math.sqrt(ot*ot+W*W);st.b=Math.cos(et)*dt,st.d=Math.sin(et)*dt,ut=true;}ut&&(st.appliedValid=false);}},r.prototype.applyRelativeWorld=function(){for(var v=this.rotateMix,c=this.translateMix,n=this.scaleMix,u=this.shearMix,d=this.target,M=d.a,S=d.b,V=d.c,I=d.d,D=M*I-S*V>0?T.MathUtils.degRad:-T.MathUtils.degRad,k=this.data.offsetRotation*D,E=this.data.offsetShearY*D,X=this.bones,z=0,Q=X.length;z<Q;z++){var st=X[z],ut=false;if(v!=0){var nt=st.a,ot=st.b,it=st.c,W=st.d,et;(et=Math.atan2(V,M)+k)>T.MathUtils.PI?et-=T.MathUtils.PI2:et<-T.MathUtils.PI&&(et+=T.MathUtils.PI2),et*=v;var ft=Math.cos(et),at=Math.sin(et);st.a=ft*nt-at*it,st.b=ft*ot-at*W,st.c=at*nt+ft*it,st.d=at*ot+ft*W,ut=true;}if(c!=0){var Ct=this.temp;d.localToWorld(Ct.set(this.data.offsetX,this.data.offsetY)),st.worldX+=Ct.x*c,st.worldY+=Ct.y*c,ut=true;}if(n>0){var dt=(Math.sqrt(M*M+V*V)-1+this.data.offsetScaleX)*n+1;st.a*=dt,st.c*=dt,dt=(Math.sqrt(S*S+I*I)-1+this.data.offsetScaleY)*n+1,st.b*=dt,st.d*=dt,ut=true;}if(u>0){var et;(et=Math.atan2(I,S)-Math.atan2(V,M))>T.MathUtils.PI?et-=T.MathUtils.PI2:et<-T.MathUtils.PI&&(et+=T.MathUtils.PI2);var ot=st.b,W=st.d;et=Math.atan2(W,ot)+(et-T.MathUtils.PI/2+E)*u;var dt=Math.sqrt(ot*ot+W*W);st.b=Math.cos(et)*dt,st.d=Math.sin(et)*dt,ut=true;}ut&&(st.appliedValid=false);}},r.prototype.applyAbsoluteLocal=function(){var v=this.rotateMix,c=this.translateMix,n=this.scaleMix,u=this.shearMix,d=this.target;d.appliedValid||d.updateAppliedTransform();for(var M=this.bones,S=0,V=M.length;S<V;S++){var I=M[S];I.appliedValid||I.updateAppliedTransform();var D=I.arotation;if(v!=0){var k=d.arotation-D+this.data.offsetRotation;D+=(k-=360*(16384-(16384.499999999996-k/360|0)))*v;}var E=I.ax,X=I.ay;c!=0&&(E+=(d.ax-E+this.data.offsetX)*c,X+=(d.ay-X+this.data.offsetY)*c);var z=I.ascaleX,Q=I.ascaleY;n!=0&&(z>1e-5&&(z=(z+(d.ascaleX-z+this.data.offsetScaleX)*n)/z),Q>1e-5&&(Q=(Q+(d.ascaleY-Q+this.data.offsetScaleY)*n)/Q));var st=I.ashearY;if(u!=0){var k=d.ashearY-st+this.data.offsetShearY;k-=360*(16384-(16384.499999999996-k/360|0)),I.shearY+=k*u;}I.updateWorldTransformWith(E,X,D,z,Q,I.ashearX,st);}},r.prototype.applyRelativeLocal=function(){var v=this.rotateMix,c=this.translateMix,n=this.scaleMix,u=this.shearMix,d=this.target;d.appliedValid||d.updateAppliedTransform();for(var M=this.bones,S=0,V=M.length;S<V;S++){var I=M[S];I.appliedValid||I.updateAppliedTransform();var D=I.arotation;v!=0&&(D+=(d.arotation+this.data.offsetRotation)*v);var k=I.ax,E=I.ay;c!=0&&(k+=(d.ax+this.data.offsetX)*c,E+=(d.ay+this.data.offsetY)*c);var X=I.ascaleX,z=I.ascaleY;n!=0&&(X>1e-5&&(X*=(d.ascaleX-1+this.data.offsetScaleX)*n+1),z>1e-5&&(z*=(d.ascaleY-1+this.data.offsetScaleY)*n+1));var Q=I.ashearY;u!=0&&(Q+=(d.ashearY+this.data.offsetShearY)*u),I.updateWorldTransformWith(k,E,D,X,z,I.ashearX,Q);}},r})();T.TransformConstraint=f;})(Rt||(Rt={})),(function(T){var f=(function(r){function v(c){var n=r.call(this,c,0,false)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=false,n.local=false,n}return es(v,r),v})(T.ConstraintData);T.TransformConstraintData=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new T.Pool((function(){return new Array})),this.polygonIndicesPool=new T.Pool((function(){return new Array}));}return r.prototype.triangulate=function(v){var c=v,n=v.length>>1,u=this.indicesArray;u.length=0;for(var d=0;d<n;d++)u[d]=d;var M=this.isConcaveArray;M.length=0;for(var d=0,S=n;d<S;++d)M[d]=r.isConcave(d,n,c,u);var V=this.triangles;for(V.length=0;n>3;){for(var I=n-1,d=0,D=1;;){t:if(!M[d]){for(var k=u[I]<<1,E=u[d]<<1,X=u[D]<<1,z=c[k],Q=c[k+1],st=c[E],ut=c[E+1],nt=c[X],ot=c[X+1],it=(D+1)%n;it!=I;it=(it+1)%n)if(M[it]){var W=u[it]<<1,et=c[W],ft=c[W+1];if(r.positiveArea(nt,ot,z,Q,et,ft)&&r.positiveArea(z,Q,st,ut,et,ft)&&r.positiveArea(st,ut,nt,ot,et,ft))break t}break}if(D==0){do{if(!M[d])break;d--;}while(d>0);break}I=d,d=D,D=(D+1)%n;}V.push(u[(n+d-1)%n]),V.push(u[d]),V.push(u[(d+1)%n]),u.splice(d,1),M.splice(d,1);var at=(--n+d-1)%n,Ct=d==n?0:d;M[at]=r.isConcave(at,n,c,u),M[Ct]=r.isConcave(Ct,n,c,u);}return n==3&&(V.push(u[2]),V.push(u[0]),V.push(u[1])),V},r.prototype.decompose=function(v,c){var n=v,u=this.convexPolygons;this.polygonPool.freeAll(u),u.length=0;var d=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(d),d.length=0;var M=this.polygonIndicesPool.obtain();M.length=0;var S=this.polygonPool.obtain();S.length=0;for(var V=-1,I=0,D=0,k=c.length;D<k;D+=3){var E=c[D]<<1,X=c[D+1]<<1,z=c[D+2]<<1,Q=n[E],st=n[E+1],ut=n[X],nt=n[X+1],ot=n[z],it=n[z+1],W=false;if(V==E){var et=S.length-4,ft=r.winding(S[et],S[et+1],S[et+2],S[et+3],ot,it),at=r.winding(ot,it,S[0],S[1],S[2],S[3]);ft==I&&at==I&&(S.push(ot),S.push(it),M.push(z),W=true);}W||(S.length>0?(u.push(S),d.push(M)):(this.polygonPool.free(S),this.polygonIndicesPool.free(M)),(S=this.polygonPool.obtain()).length=0,S.push(Q),S.push(st),S.push(ut),S.push(nt),S.push(ot),S.push(it),(M=this.polygonIndicesPool.obtain()).length=0,M.push(E),M.push(X),M.push(z),I=r.winding(Q,st,ut,nt,ot,it),V=E);}S.length>0&&(u.push(S),d.push(M));for(var D=0,k=u.length;D<k;D++)if((M=d[D]).length!=0){for(var Ct=M[0],dt=M[M.length-1],et,mt=(S=u[D])[et=S.length-4],kt=S[et+1],ht=S[et+2],$=S[et+3],ct=S[0],wt=S[1],yt=S[2],Xt=S[3],Dt=r.winding(mt,kt,ht,$,ct,wt),Lt=0;Lt<k;Lt++)if(Lt!=D){var Bt=d[Lt];if(Bt.length==3){var zt=Bt[0],Yt=Bt[1],Tt=Bt[2],bt=u[Lt],ot=bt[bt.length-2],it=bt[bt.length-1];if(zt==Ct&&Yt==dt){var ft=r.winding(mt,kt,ht,$,ot,it),at=r.winding(ot,it,ct,wt,yt,Xt);ft==Dt&&at==Dt&&(bt.length=0,Bt.length=0,S.push(ot),S.push(it),M.push(Tt),mt=ht,kt=$,ht=ot,$=it,Lt=0);}}}}for(var D=u.length-1;D>=0;D--)(S=u[D]).length==0&&(u.splice(D,1),this.polygonPool.free(S),M=d[D],d.splice(D,1),this.polygonIndicesPool.free(M));return u},r.isConcave=function(v,c,n,u){var d=u[(c+v-1)%c]<<1,M=u[v]<<1,S=u[(v+1)%c]<<1;return !this.positiveArea(n[d],n[d+1],n[M],n[M+1],n[S],n[S+1])},r.positiveArea=function(v,c,n,u,d,M){return v*(M-u)+n*(c-M)+d*(u-c)>=0},r.winding=function(v,c,n,u,d,M){var S=n-v,V=u-c;return d*V-M*S+S*c-v*V>=0?1:-1},r})();T.Triangulator=f;})(Rt||(Rt={})),(function(T){var f=(function(){function k(){this.array=new Array;}return k.prototype.add=function(E){var X=this.contains(E);return this.array[0|E]=0|E,!X},k.prototype.contains=function(E){return this.array[0|E]!=null},k.prototype.remove=function(E){this.array[0|E]=void 0;},k.prototype.clear=function(){this.array.length=0;},k})();T.IntSet=f;var r=(function(){function k(E,X,z,Q){E===void 0&&(E=0),X===void 0&&(X=0),z===void 0&&(z=0),Q===void 0&&(Q=0),this.r=E,this.g=X,this.b=z,this.a=Q;}return k.prototype.set=function(E,X,z,Q){return this.r=E,this.g=X,this.b=z,this.a=Q,this.clamp(),this},k.prototype.setFromColor=function(E){return this.r=E.r,this.g=E.g,this.b=E.b,this.a=E.a,this},k.prototype.setFromString=function(E){return E=E.charAt(0)=="#"?E.substr(1):E,this.r=parseInt(E.substr(0,2),16)/255,this.g=parseInt(E.substr(2,2),16)/255,this.b=parseInt(E.substr(4,2),16)/255,this.a=(E.length!=8?255:parseInt(E.substr(6,2),16))/255,this},k.prototype.add=function(E,X,z,Q){return this.r+=E,this.g+=X,this.b+=z,this.a+=Q,this.clamp(),this},k.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},k.rgba8888ToColor=function(E,X){E.r=((4278190080&X)>>>24)/255,E.g=((16711680&X)>>>16)/255,E.b=((65280&X)>>>8)/255,E.a=(255&X)/255;},k.rgb888ToColor=function(E,X){E.r=((16711680&X)>>>16)/255,E.g=((65280&X)>>>8)/255,E.b=(255&X)/255;},k.WHITE=new k(1,1,1,1),k.RED=new k(1,0,0,1),k.GREEN=new k(0,1,0,1),k.BLUE=new k(0,0,1,1),k.MAGENTA=new k(1,0,1,1),k})();T.Color=r;var v=(function(){function k(){}return k.clamp=function(E,X,z){return E<X?X:E>z?z:E},k.cosDeg=function(E){return Math.cos(E*k.degRad)},k.sinDeg=function(E){return Math.sin(E*k.degRad)},k.signum=function(E){return E>0?1:E<0?-1:0},k.toInt=function(E){return E>0?Math.floor(E):Math.ceil(E)},k.cbrt=function(E){var X=Math.pow(Math.abs(E),.3333333333333333);return E<0?-X:X},k.randomTriangular=function(E,X){return k.randomTriangularWith(E,X,.5*(E+X))},k.randomTriangularWith=function(E,X,z){var Q=Math.random(),st=X-E;return Q<=(z-E)/st?E+Math.sqrt(Q*st*(z-E)):X-Math.sqrt((1-Q)*st*(X-z))},k.PI=3.1415927,k.PI2=2*k.PI,k.radiansToDegrees=180/k.PI,k.radDeg=k.radiansToDegrees,k.degreesToRadians=k.PI/180,k.degRad=k.degreesToRadians,k})();T.MathUtils=v;var c=(function(){function k(){}return k.prototype.apply=function(E,X,z){return E+(X-E)*this.applyInternal(z)},k})();T.Interpolation=c;var n=(function(k){function E(X){var z=k.call(this)||this;return z.power=2,z.power=X,z}return es(E,k),E.prototype.applyInternal=function(X){return X<=.5?Math.pow(2*X,this.power)/2:Math.pow(2*(X-1),this.power)/(this.power%2==0?-2:2)+1},E})(c);T.Pow=n;var u=(function(k){function E(X){return k.call(this,X)||this}return es(E,k),E.prototype.applyInternal=function(X){return Math.pow(X-1,this.power)*(this.power%2==0?-1:1)+1},E})(n);T.PowOut=u;var d=(function(){function k(){}return k.arrayCopy=function(E,X,z,Q,st){for(var ut=X,nt=Q;ut<X+st;ut++,nt++)z[nt]=E[ut];},k.setArraySize=function(E,X,z){z===void 0&&(z=0);var Q=E.length;if(Q==X)return E;if(E.length=X,Q<X)for(var st=Q;st<X;st++)E[st]=z;return E},k.ensureArrayCapacity=function(E,X,z){return z===void 0&&(z=0),E.length>=X?E:k.setArraySize(E,X,z)},k.newArray=function(E,X){for(var z=new Array(E),Q=0;Q<E;Q++)z[Q]=X;return z},k.newFloatArray=function(E){if(k.SUPPORTS_TYPED_ARRAYS)return new Float32Array(E);for(var X=new Array(E),z=0;z<X.length;z++)X[z]=0;return X},k.newShortArray=function(E){if(k.SUPPORTS_TYPED_ARRAYS)return new Int16Array(E);for(var X=new Array(E),z=0;z<X.length;z++)X[z]=0;return X},k.toFloatArray=function(E){return k.SUPPORTS_TYPED_ARRAYS?new Float32Array(E):E},k.toSinglePrecision=function(E){return k.SUPPORTS_TYPED_ARRAYS?Math.fround(E):E},k.webkit602BugfixHelper=function(E,X){},k.contains=function(E,X,z){for(var Q=0;Q<E.length;Q++)if(E[Q]==X)return  true;return  false},k.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",k})();T.Utils=d;var M=(function(){function k(){}return k.logBones=function(E){for(var X=0;X<Skeleton.bones.length;X++){var z=Skeleton.bones[X];console.log(z.data.name+", "+z.a+", "+z.b+", "+z.c+", "+z.d+", "+z.worldX+", "+z.worldY);}},k})();T.DebugUtils=M;var S=(function(){function k(E){this.items=new Array,this.instantiator=E;}return k.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},k.prototype.free=function(E){E.reset&&E.reset(),this.items.push(E);},k.prototype.freeAll=function(E){for(var X=0;X<E.length;X++)this.free(E[X]);},k.prototype.clear=function(){this.items.length=0;},k})();T.Pool=S;var V=(function(){function k(E,X){E===void 0&&(E=0),X===void 0&&(X=0),this.x=E,this.y=X;}return k.prototype.set=function(E,X){return this.x=E,this.y=X,this},k.prototype.length=function(){var E=this.x,X=this.y;return Math.sqrt(E*E+X*X)},k.prototype.normalize=function(){var E=this.length();return E!=0&&(this.x/=E,this.y/=E),this},k})();T.Vector2=V;var I=(function(){function k(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0;}return k.prototype.update=function(){var E=Date.now()/1e3;this.delta=E-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=E,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0);},k})();T.TimeKeeper=I;var D=(function(){function k(E){E===void 0&&(E=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=true,this.values=new Array(E);}return k.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},k.prototype.addValue=function(E){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=E,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=true;},k.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var E=0,X=0;X<this.values.length;X++)E+=this.values[X];this.mean=E/this.values.length,this.dirty=false;}return this.mean}return 0},k})();T.WindowedMean=D;})(Rt||(Rt={})),(function(){var T;Math.fround||(Math.fround=(T=new Float32Array(1),function(f){return T[0]=f,T[0]}));})(),(function(T){var f=(function(){function v(c){if(c==null)throw new Error("name cannot be null.");this.name=c;}return v})();T.Attachment=f;var r=(function(v){function c(n){var u=v.call(this,n)||this;return u.id=(65535&c.nextID++)<<11,u.worldVerticesLength=0,u.deformAttachment=u,u}return es(c,v),c.prototype.computeWorldVertices=function(n,u,d,M,S,V){d=S+(d>>1)*V;var I=n.bone.skeleton,D=n.deform,k=this.vertices,E=this.bones;if(E!=null){for(var X=0,z=0,Q=0;Q<u;Q+=2){var st;X+=(st=E[X])+1,z+=st;}var ut=I.bones;if(D.length==0)for(var nt=S,ot=3*z;nt<d;nt+=V){var it=0,W=0,st=E[X++];for(st+=X;X<st;X++,ot+=3){var et=ut[E[X]],ft=k[ot],at=k[ot+1],Ct=k[ot+2];it+=(ft*et.a+at*et.b+et.worldX)*Ct,W+=(ft*et.c+at*et.d+et.worldY)*Ct;}M[nt]=it,M[nt+1]=W;}else for(var dt=D,nt=S,ot=3*z,mt=z<<1;nt<d;nt+=V){var it=0,W=0,st=E[X++];for(st+=X;X<st;X++,ot+=3,mt+=2){var et=ut[E[X]],ft=k[ot]+dt[mt],at=k[ot+1]+dt[mt+1],Ct=k[ot+2];it+=(ft*et.a+at*et.b+et.worldX)*Ct,W+=(ft*et.c+at*et.d+et.worldY)*Ct;}M[nt]=it,M[nt+1]=W;}}else {D.length>0&&(k=D);for(var et,kt=(et=n.bone).worldX,ht=et.worldY,$=et.a,ot=et.b,ct=et.c,wt=et.d,yt=u,nt=S;nt<d;yt+=2,nt+=V){var ft=k[yt],at=k[yt+1];M[nt]=ft*$+at*ot+kt,M[nt+1]=ft*ct+at*wt+ht;}}},c.prototype.copyTo=function(n){this.bones!=null?(n.bones=new Array(this.bones.length),T.Utils.arrayCopy(this.bones,0,n.bones,0,this.bones.length)):n.bones=null,this.vertices!=null?(n.vertices=T.Utils.newFloatArray(this.vertices.length),T.Utils.arrayCopy(this.vertices,0,n.vertices,0,this.vertices.length)):n.vertices=null,n.worldVerticesLength=this.worldVerticesLength,n.deformAttachment=this.deformAttachment;},c.nextID=0,c})(f);T.VertexAttachment=r;})(Rt||(Rt={})),(function(T){(function(r){r[r.Region=0]="Region",r[r.BoundingBox=1]="BoundingBox",r[r.Mesh=2]="Mesh",r[r.LinkedMesh=3]="LinkedMesh",r[r.Path=4]="Path",r[r.Point=5]="Point",r[r.Clipping=6]="Clipping";})(T.AttachmentType||(T.AttachmentType={}));})(Rt||(Rt={})),(function(T){var f=(function(r){function v(c){var n=r.call(this,c)||this;return n.color=new T.Color(1,1,1,1),n}return es(v,r),v.prototype.copy=function(){var c=new v(this.name);return this.copyTo(c),c.color.setFromColor(this.color),c},v})(T.VertexAttachment);T.BoundingBoxAttachment=f;})(Rt||(Rt={})),(function(T){var f=(function(r){function v(c){var n=r.call(this,c)||this;return n.color=new T.Color(.2275,.2275,.8078,1),n}return es(v,r),v.prototype.copy=function(){var c=new v(this.name);return this.copyTo(c),c.endSlot=this.endSlot,c.color.setFromColor(this.color),c},v})(T.VertexAttachment);T.ClippingAttachment=f;})(Rt||(Rt={})),(function(T){var f=(function(r){function v(c){var n=r.call(this,c)||this;return n.color=new T.Color(1,1,1,1),n.tempColor=new T.Color(0,0,0,0),n}return es(v,r),v.prototype.updateUVs=function(){var c=this.regionUVs;this.uvs!=null&&this.uvs.length==c.length||(this.uvs=T.Utils.newFloatArray(c.length));var n=this.uvs,u=this.uvs.length,d=this.region.u,M=this.region.v,S=0,V=0;if(this.region instanceof T.TextureAtlasRegion){var I=this.region,D=I.texture.getImage().width,k=I.texture.getImage().height;switch(I.degrees){case 90:d-=(I.originalHeight-I.offsetY-I.height)/D,M-=(I.originalWidth-I.offsetX-I.width)/k,S=I.originalHeight/D,V=I.originalWidth/k;for(var E=0;E<u;E+=2)n[E]=d+c[E+1]*S,n[E+1]=M+(1-c[E])*V;return;case 180:d-=(I.originalWidth-I.offsetX-I.width)/D,M-=I.offsetY/k,S=I.originalWidth/D,V=I.originalHeight/k;for(var E=0;E<u;E+=2)n[E]=d+(1-c[E])*S,n[E+1]=M+(1-c[E+1])*V;return;case 270:d-=I.offsetY/D,M-=I.offsetX/k,S=I.originalHeight/D,V=I.originalWidth/k;for(var E=0;E<u;E+=2)n[E]=d+(1-c[E+1])*S,n[E+1]=M+c[E]*V;return}d-=I.offsetX/D,M-=(I.originalHeight-I.offsetY-I.height)/k,S=I.originalWidth/D,V=I.originalHeight/k;}else this.region==null?(d=M=0,S=V=1):(S=this.region.u2-d,V=this.region.v2-M);for(var E=0;E<u;E+=2)n[E]=d+c[E]*S,n[E+1]=M+c[E+1]*V;},v.prototype.getParentMesh=function(){return this.parentMesh},v.prototype.setParentMesh=function(c){this.parentMesh=c,c!=null&&(this.bones=c.bones,this.vertices=c.vertices,this.worldVerticesLength=c.worldVerticesLength,this.regionUVs=c.regionUVs,this.triangles=c.triangles,this.hullLength=c.hullLength,this.worldVerticesLength=c.worldVerticesLength);},v.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var c=new v(this.name);return c.region=this.region,c.path=this.path,c.color.setFromColor(this.color),this.copyTo(c),c.regionUVs=new Array(this.regionUVs.length),T.Utils.arrayCopy(this.regionUVs,0,c.regionUVs,0,this.regionUVs.length),c.uvs=new Array(this.uvs.length),T.Utils.arrayCopy(this.uvs,0,c.uvs,0,this.uvs.length),c.triangles=new Array(this.triangles.length),T.Utils.arrayCopy(this.triangles,0,c.triangles,0,this.triangles.length),c.hullLength=this.hullLength,this.edges!=null&&(c.edges=new Array(this.edges.length),T.Utils.arrayCopy(this.edges,0,c.edges,0,this.edges.length)),c.width=this.width,c.height=this.height,c},v.prototype.newLinkedMesh=function(){var c=new v(this.name);return c.region=this.region,c.path=this.path,c.color.setFromColor(this.color),c.deformAttachment=this.deformAttachment,c.setParentMesh(this.parentMesh!=null?this.parentMesh:this),c.updateUVs(),c},v})(T.VertexAttachment);T.MeshAttachment=f;})(Rt||(Rt={})),(function(T){var f=(function(r){function v(c){var n=r.call(this,c)||this;return n.closed=false,n.constantSpeed=false,n.color=new T.Color(1,1,1,1),n}return es(v,r),v.prototype.copy=function(){var c=new v(this.name);return this.copyTo(c),c.lengths=new Array(this.lengths.length),T.Utils.arrayCopy(this.lengths,0,c.lengths,0,this.lengths.length),c.closed=closed,c.constantSpeed=this.constantSpeed,c.color.setFromColor(this.color),c},v})(T.VertexAttachment);T.PathAttachment=f;})(Rt||(Rt={})),(function(T){var f=(function(r){function v(c){var n=r.call(this,c)||this;return n.color=new T.Color(.38,.94,0,1),n}return es(v,r),v.prototype.computeWorldPosition=function(c,n){return n.x=this.x*c.a+this.y*c.b+c.worldX,n.y=this.x*c.c+this.y*c.d+c.worldY,n},v.prototype.computeWorldRotation=function(c){var n=T.MathUtils.cosDeg(this.rotation),u=T.MathUtils.sinDeg(this.rotation),d=n*c.a+u*c.b,M=n*c.c+u*c.d;return Math.atan2(M,d)*T.MathUtils.radDeg},v.prototype.copy=function(){var c=new v(this.name);return c.x=this.x,c.y=this.y,c.rotation=this.rotation,c.color.setFromColor(this.color),c},v})(T.VertexAttachment);T.PointAttachment=f;})(Rt||(Rt={})),(function(T){var f=(function(r){function v(c){var n=r.call(this,c)||this;return n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new T.Color(1,1,1,1),n.offset=T.Utils.newFloatArray(8),n.uvs=T.Utils.newFloatArray(8),n.tempColor=new T.Color(1,1,1,1),n}return es(v,r),v.prototype.updateOffset=function(){var c=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,u=-this.width/2*this.scaleX+this.region.offsetX*c,d=-this.height/2*this.scaleY+this.region.offsetY*n,M=u+this.region.width*c,S=d+this.region.height*n,V=this.rotation*Math.PI/180,I=Math.cos(V),D=Math.sin(V),k=u*I+this.x,E=u*D,X=d*I+this.y,z=d*D,Q=M*I+this.x,st=M*D,ut=S*I+this.y,nt=S*D,ot=this.offset;ot[v.OX1]=k-z,ot[v.OY1]=X+E,ot[v.OX2]=k-nt,ot[v.OY2]=ut+E,ot[v.OX3]=Q-nt,ot[v.OY3]=ut+st,ot[v.OX4]=Q-z,ot[v.OY4]=X+st;},v.prototype.setRegion=function(c){this.region=c;var n=this.uvs;c.rotate?(n[2]=c.u,n[3]=c.v2,n[4]=c.u,n[5]=c.v,n[6]=c.u2,n[7]=c.v,n[0]=c.u2,n[1]=c.v2):(n[0]=c.u,n[1]=c.v2,n[2]=c.u,n[3]=c.v,n[4]=c.u2,n[5]=c.v,n[6]=c.u2,n[7]=c.v2);},v.prototype.computeWorldVertices=function(c,n,u,d){var M=this.offset,S=c.worldX,V=c.worldY,I=c.a,D=c.b,k=c.c,E=c.d,X=0,z=0;X=M[v.OX1],z=M[v.OY1],n[u]=X*I+z*D+S,n[u+1]=X*k+z*E+V,u+=d,X=M[v.OX2],z=M[v.OY2],n[u]=X*I+z*D+S,n[u+1]=X*k+z*E+V,u+=d,X=M[v.OX3],z=M[v.OY3],n[u]=X*I+z*D+S,n[u+1]=X*k+z*E+V,u+=d,X=M[v.OX4],z=M[v.OY4],n[u]=X*I+z*D+S,n[u+1]=X*k+z*E+V;},v.prototype.copy=function(){var c=new v(this.name);return c.region=this.region,c.rendererObject=this.rendererObject,c.path=this.path,c.x=this.x,c.y=this.y,c.scaleX=this.scaleX,c.scaleY=this.scaleY,c.rotation=this.rotation,c.width=this.width,c.height=this.height,T.Utils.arrayCopy(this.uvs,0,c.uvs,0,8),T.Utils.arrayCopy(this.offset,0,c.offset,0,8),c.color.setFromColor(this.color),c},v.OX1=0,v.OY1=1,v.OX2=2,v.OY2=3,v.OX3=4,v.OY3=5,v.OX4=6,v.OY4=7,v.X1=0,v.Y1=1,v.C1R=2,v.C1G=3,v.C1B=4,v.C1A=5,v.U1=6,v.V1=7,v.X2=8,v.Y2=9,v.C2R=10,v.C2G=11,v.C2B=12,v.C2A=13,v.U2=14,v.V2=15,v.X3=16,v.Y3=17,v.C3R=18,v.C3G=19,v.C3B=20,v.C3A=21,v.U3=22,v.V3=23,v.X4=24,v.Y4=25,v.C4R=26,v.C4G=27,v.C4B=28,v.C4A=29,v.U4=30,v.V4=31,v})(T.Attachment);T.RegionAttachment=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v,c){this.jitterX=0,this.jitterY=0,this.jitterX=v,this.jitterY=c;}return r.prototype.begin=function(v){},r.prototype.transform=function(v,c,n,u){v.x+=T.MathUtils.randomTriangular(-this.jitterX,this.jitterY),v.y+=T.MathUtils.randomTriangular(-this.jitterX,this.jitterY);},r.prototype.end=function(){},r})();T.JitterEffect=f;})(Rt||(Rt={})),(function(T){var f=(function(){function r(v){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=v;}return r.prototype.begin=function(v){this.worldX=Skeleton.x+this.centerX,this.worldY=Skeleton.y+this.centerY;},r.prototype.transform=function(v,c,n,u){var d=this.angle*T.MathUtils.degreesToRadians,M=v.x-this.worldX,S=v.y-this.worldY,V=Math.sqrt(M*M+S*S);if(V<this.radius){var I=r.interpolation.apply(0,d,(this.radius-V)/this.radius),D=Math.cos(I),k=Math.sin(I);v.x=D*M-k*S+this.worldX,v.y=k*M+D*S+this.worldY;}},r.prototype.end=function(){},r.interpolation=new T.PowOut(2),r})();T.SwirlEffect=f;})(Rt||(Rt={})),(function(T){(function(r){var v=(function(c){function n(u,d){return d===void 0&&(d=""),c.call(this,(function(M){return new T.webgl.GLTexture(u,M)}),d)||this}return es(n,c),n})(T.AssetManager);r.AssetManager=v;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function c(n,u){this.position=new r.Vector3(0,0,0),this.direction=new r.Vector3(0,0,-1),this.up=new r.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new r.Matrix4,this.inverseProjectionView=new r.Matrix4,this.projection=new r.Matrix4,this.view=new r.Matrix4,this.tmp=new r.Vector3,this.viewportWidth=n,this.viewportHeight=u,this.update();}return c.prototype.update=function(){var n=this.projection,u=this.view,d=this.projectionView,M=this.inverseProjectionView,S=this.zoom,V=this.viewportWidth,I=this.viewportHeight;n.ortho(S*(-V/2),S*(V/2),S*(-I/2),S*(I/2),this.near,this.far),u.lookAt(this.position,this.direction,this.up),d.set(n.values),d.multiply(u),M.set(d.values).invert();},c.prototype.screenToWorld=function(n,u,d){var M=n.x,S=d-n.y-1,V=this.tmp;return V.x=2*M/u-1,V.y=2*S/d-1,V.z=2*n.z-1,V.project(this.inverseProjectionView),n.set(V.x,V.y,V.z),n},c.prototype.setViewport=function(n,u){this.viewportWidth=n,this.viewportHeight=u;},c})();r.OrthoCamera=v;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(c){function n(u,d,M){M===void 0&&(M=false);var S=c.call(this,d)||this;return S.texture=null,S.boundUnit=0,S.useMipMaps=false,S.context=u instanceof r.ManagedWebGLRenderingContext?u:new r.ManagedWebGLRenderingContext(u),S.useMipMaps=M,S.restore(),S.context.addRestorable(S),S}return es(n,c),n.prototype.setFilters=function(u,d){var M=this.context.gl;this.bind(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,u),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,n.validateMagFilter(d));},n.validateMagFilter=function(u){switch(u){case T.TextureFilter.MipMap:case T.TextureFilter.MipMapLinearLinear:case T.TextureFilter.MipMapLinearNearest:case T.TextureFilter.MipMapNearestLinear:case T.TextureFilter.MipMapNearestNearest:return T.TextureFilter.Linear;default:return u}},n.prototype.setWraps=function(u,d){var M=this.context.gl;this.bind(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,u),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,d);},n.prototype.update=function(u){var d=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),n.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,false),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,this._image),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,u?d.LINEAR_MIPMAP_LINEAR:d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),u&&d.generateMipmap(d.TEXTURE_2D);},n.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps);},n.prototype.bind=function(u){u===void 0&&(u=0);var d=this.context.gl;this.boundUnit=u,d.activeTexture(d.TEXTURE0+u),d.bindTexture(d.TEXTURE_2D,this.texture);},n.prototype.unbind=function(){var u=this.context.gl;u.activeTexture(u.TEXTURE0+this.boundUnit),u.bindTexture(u.TEXTURE_2D,null);},n.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture);},n.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=false,n})(T.Texture);r.GLTexture=v;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function n(u){this.lastX=0,this.lastY=0,this.buttonDown=false,this.currTouch=null,this.touchesPool=new T.Pool((function(){return new T.webgl.Touch(0,0,0)})),this.listeners=new Array,this.element=u,this.setupCallbacks(u);}return n.prototype.setupCallbacks=function(u){var d=this,M=function(I){if(I instanceof MouseEvent){for(var D=u.getBoundingClientRect(),k=I.clientX-D.left,E=I.clientY-D.top,X=d.listeners,z=0;z<X.length;z++)X[z].down&&X[z].down(k,E);d.lastX=k,d.lastY=E,d.buttonDown=true,document.addEventListener("mousemove",S),document.addEventListener("mouseup",V);}},S=function(I){if(I instanceof MouseEvent){for(var D=u.getBoundingClientRect(),k=I.clientX-D.left,E=I.clientY-D.top,X=d.listeners,z=0;z<X.length;z++)d.buttonDown?X[z].dragged&&X[z].dragged(k,E):X[z].moved&&X[z].moved(k,E);d.lastX=k,d.lastY=E;}},V=function(I){if(I instanceof MouseEvent){for(var D=u.getBoundingClientRect(),k=I.clientX-D.left,E=I.clientY-D.top,X=d.listeners,z=0;z<X.length;z++)X[z].up&&X[z].up(k,E);d.lastX=k,d.lastY=E,d.buttonDown=false,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",V);}};u.addEventListener("mousedown",M,true),u.addEventListener("mousemove",S,true),u.addEventListener("mouseup",V,true),u.addEventListener("touchstart",(function(I){if(d.currTouch==null){for(var D=I.changedTouches,k=0;k<D.length;k++){var E=D[k],X=u.getBoundingClientRect(),z=E.clientX-X.left,Q=E.clientY-X.top;d.currTouch=d.touchesPool.obtain(),d.currTouch.identifier=E.identifier,d.currTouch.x=z,d.currTouch.y=Q;break}for(var st=d.listeners,ut=0;ut<st.length;ut++)st[ut].down&&st[ut].down(d.currTouch.x,d.currTouch.y);d.lastX=d.currTouch.x,d.lastY=d.currTouch.y,d.buttonDown=true,I.preventDefault();}}),false),u.addEventListener("touchend",(function(I){for(var D=I.changedTouches,k=0;k<D.length;k++){var E=D[k];if(d.currTouch.identifier===E.identifier){var X=u.getBoundingClientRect(),z=d.currTouch.x=E.clientX-X.left,Q=d.currTouch.y=E.clientY-X.top;d.touchesPool.free(d.currTouch);for(var st=d.listeners,ut=0;ut<st.length;ut++)st[ut].up&&st[ut].up(z,Q);d.lastX=z,d.lastY=Q,d.buttonDown=false,d.currTouch=null;break}}I.preventDefault();}),false),u.addEventListener("touchcancel",(function(I){for(var D=I.changedTouches,k=0;k<D.length;k++){var E=D[k];if(d.currTouch.identifier===E.identifier){var X=u.getBoundingClientRect(),z=d.currTouch.x=E.clientX-X.left,Q=d.currTouch.y=E.clientY-X.top;d.touchesPool.free(d.currTouch);for(var st=d.listeners,ut=0;ut<st.length;ut++)st[ut].up&&st[ut].up(z,Q);d.lastX=z,d.lastY=Q,d.buttonDown=false,d.currTouch=null;break}}I.preventDefault();}),false),u.addEventListener("touchmove",(function(I){if(d.currTouch!=null){for(var D=I.changedTouches,k=0;k<D.length;k++){var E=D[k];if(d.currTouch.identifier===E.identifier){for(var X=u.getBoundingClientRect(),z=E.clientX-X.left,Q=E.clientY-X.top,st=d.listeners,ut=0;ut<st.length;ut++)st[ut].dragged&&st[ut].dragged(z,Q);d.lastX=d.currTouch.x=z,d.lastY=d.currTouch.y=Q;break}}I.preventDefault();}}),false);},n.prototype.addListener=function(u){this.listeners.push(u);},n.prototype.removeListener=function(u){var d=this.listeners.indexOf(u);d>-1&&this.listeners.splice(d,1);},n})();r.Input=v;var c=(function(){function n(u,d,M){this.identifier=u,this.x=d,this.y=M;}return n})();r.Touch=c;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function c(n){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.timeKeeper=new T.TimeKeeper,this.backgroundColor=new T.Color(.135,.135,.135,1),this.tempColor=new T.Color,this.firstDraw=0,this.renderer=n,this.timeKeeper.maxDelta=9,c.logoImg===null){var u=navigator.userAgent.indexOf("Safari")>-1;c.logoImg=new Image,c.logoImg.src=c.SPINE_LOGO_DATA,u||(c.logoImg.crossOrigin="anonymous"),c.logoImg.onload=function(d){c.loaded++;},c.spinnerImg=new Image,c.spinnerImg.src=c.SPINNER_DATA,u||(c.spinnerImg.crossOrigin="anonymous"),c.spinnerImg.onload=function(d){c.loaded++;};}}return c.prototype.draw=function(n){if(n===void 0&&(n=false),!(n&&this.fadeOut>c.FADE_SECONDS)){this.timeKeeper.update();var u=Math.abs(Math.sin(this.timeKeeper.totalTime+.75));this.angle-=this.timeKeeper.delta/1.4*360*(1+1.5*Math.pow(u,5));var d=this.renderer,M=d.canvas,S=d.context.gl;d.resize(r.ResizeMode.Stretch);var V=d.camera.position.x,I=d.camera.position.y;if(d.camera.position.set(M.width/2,M.height/2,0),d.camera.viewportWidth=M.width,d.camera.viewportHeight=M.height,n){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>c.FADE_SECONDS)return void d.camera.position.set(V,I,0);u=1-this.fadeOut/c.FADE_SECONDS,this.tempColor.setFromColor(this.backgroundColor),this.tempColor.a=1-(u-1)*(u-1),d.begin(),d.quad(true,0,0,M.width,0,M.width,M.height,0,M.height,this.tempColor,this.tempColor,this.tempColor,this.tempColor),d.end();}else S.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),S.clear(S.COLOR_BUFFER_BIT),this.tempColor.a=1;if(this.tempColor.set(1,1,1,this.tempColor.a),c.loaded==2){this.logo===null&&(this.logo=new r.GLTexture(d.context,c.logoImg),this.spinner=new r.GLTexture(d.context,c.spinnerImg)),this.logo.update(false),this.spinner.update(false);var D=this.logo.getImage().width,k=this.logo.getImage().height,E=this.spinner.getImage().width,X=this.spinner.getImage().height;d.batcher.setBlendMode(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA),d.begin(),d.drawTexture(this.logo,(M.width-D)/2,(M.height-k)/2,D,k,this.tempColor),d.drawTextureRotated(this.spinner,(M.width-E)/2,(M.height-X)/2,E,X,E/2,X/2,this.angle,this.tempColor),d.end(),d.camera.position.set(V,I,0);}}},c.FADE_SECONDS=1,c.loaded=0,c.spinnerImg=null,c.logoImg=null,c.SPINNER_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAAACXBIWXMAAAsTAAALEwEAmpwYAAALB2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTEtMTVUMTY6NDA6NTkrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpmZDhlNTljMC02NGJjLTIxNGQtODAyZi1jZDlhODJjM2ZjMGMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmYmNmZWJlYS03MjY2LWE0NGQtOTI4NS0wOTJmNGNhYzk4ZWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjk3IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMjQyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHN0RXZ0OndoZW49IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiNThlMTlkNi0xYTRjLTQyNDEtODU0ZC01MDVlZjYxMjRhODQiIHN0RXZ0OndoZW49IjIwMTgtMTEtMTVUMTY6NDA6MjMrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ3YzYzYzIwLWJkYjgtYzM0YS1hYzMyLWQ5MDdjOWEyOTA0MCIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNVQxNjo0MDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZmQ4ZTU5YzAtNjRiYy0yMTRkLTgwMmYtY2Q5YTgyYzNmYzBjIiBzdEV2dDp3aGVuPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0N2M2M2MyMC1iZGI4LWMzNGEtYWMzMi1kOTA3YzlhMjkwNDAiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2OWRmZjljYy01YzFiLWE5NDctOTc3OS03ODgxZjM0ODk3MDMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFu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",c.SPINE_LOGO_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAACXBIWXMAAAsTAAALEwEAmpwYAAALB2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTEtMTVUMTY6NDA6NTkrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMTdhZGQ3Ni04OTZlLThlNGUtYmM5MS00ZjEyNjI1YjA3MjgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDplMTViNGE2ZS1hMDg3LWEzNDktODdhOS1mNDYzYjE2MzQ0Y2MiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjk3IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMjQyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHN0RXZ0OndoZW49IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiNThlMTlkNi0xYTRjLTQyNDEtODU0ZC01MDVlZjYxMjRhODQiIHN0RXZ0OndoZW49IjIwMTgtMTEtMTVUMTY6NDA6MjMrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJlNjJiMWM2LWIxYzQtNDk0MC04MDMxLWU4ZDkyNTBmODJjNSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNVQxNjo0MDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDE3YWRkNzYtODk2ZS04ZTRlLWJjOTEtNGYxMjYyNWIwNzI4IiBzdEV2dDp3aGVuPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyZTYyYjFjNi1iMWM0LTQ5NDAtODAzMS1lOGQ5MjUwZjgyYzUiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2OWRmZjljYy01YzFiLWE5NDctOTc3OS03ODgxZjM0ODk3MDMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFu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",c})();r.LoadingScreen=v;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){r.M00=0,r.M01=4,r.M02=8,r.M03=12,r.M10=1,r.M11=5,r.M12=9,r.M13=13,r.M20=2,r.M21=6,r.M22=10,r.M23=14,r.M30=3,r.M31=7,r.M32=11,r.M33=15;var v=(function(){function c(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var n=this.values;n[r.M00]=1,n[r.M11]=1,n[r.M22]=1,n[r.M33]=1;}return c.prototype.set=function(n){return this.values.set(n),this},c.prototype.transpose=function(){var n=this.temp,u=this.values;return n[r.M00]=u[r.M00],n[r.M01]=u[r.M10],n[r.M02]=u[r.M20],n[r.M03]=u[r.M30],n[r.M10]=u[r.M01],n[r.M11]=u[r.M11],n[r.M12]=u[r.M21],n[r.M13]=u[r.M31],n[r.M20]=u[r.M02],n[r.M21]=u[r.M12],n[r.M22]=u[r.M22],n[r.M23]=u[r.M32],n[r.M30]=u[r.M03],n[r.M31]=u[r.M13],n[r.M32]=u[r.M23],n[r.M33]=u[r.M33],this.set(n)},c.prototype.identity=function(){var n=this.values;return n[r.M00]=1,n[r.M01]=0,n[r.M02]=0,n[r.M03]=0,n[r.M10]=0,n[r.M11]=1,n[r.M12]=0,n[r.M13]=0,n[r.M20]=0,n[r.M21]=0,n[r.M22]=1,n[r.M23]=0,n[r.M30]=0,n[r.M31]=0,n[r.M32]=0,n[r.M33]=1,this},c.prototype.invert=function(){var n=this.values,u=this.temp,d=n[r.M30]*n[r.M21]*n[r.M12]*n[r.M03]-n[r.M20]*n[r.M31]*n[r.M12]*n[r.M03]-n[r.M30]*n[r.M11]*n[r.M22]*n[r.M03]+n[r.M10]*n[r.M31]*n[r.M22]*n[r.M03]+n[r.M20]*n[r.M11]*n[r.M32]*n[r.M03]-n[r.M10]*n[r.M21]*n[r.M32]*n[r.M03]-n[r.M30]*n[r.M21]*n[r.M02]*n[r.M13]+n[r.M20]*n[r.M31]*n[r.M02]*n[r.M13]+n[r.M30]*n[r.M01]*n[r.M22]*n[r.M13]-n[r.M00]*n[r.M31]*n[r.M22]*n[r.M13]-n[r.M20]*n[r.M01]*n[r.M32]*n[r.M13]+n[r.M00]*n[r.M21]*n[r.M32]*n[r.M13]+n[r.M30]*n[r.M11]*n[r.M02]*n[r.M23]-n[r.M10]*n[r.M31]*n[r.M02]*n[r.M23]-n[r.M30]*n[r.M01]*n[r.M12]*n[r.M23]+n[r.M00]*n[r.M31]*n[r.M12]*n[r.M23]+n[r.M10]*n[r.M01]*n[r.M32]*n[r.M23]-n[r.M00]*n[r.M11]*n[r.M32]*n[r.M23]-n[r.M20]*n[r.M11]*n[r.M02]*n[r.M33]+n[r.M10]*n[r.M21]*n[r.M02]*n[r.M33]+n[r.M20]*n[r.M01]*n[r.M12]*n[r.M33]-n[r.M00]*n[r.M21]*n[r.M12]*n[r.M33]-n[r.M10]*n[r.M01]*n[r.M22]*n[r.M33]+n[r.M00]*n[r.M11]*n[r.M22]*n[r.M33];if(d==0)throw new Error("non-invertible matrix");var M=1/d;return u[r.M00]=n[r.M12]*n[r.M23]*n[r.M31]-n[r.M13]*n[r.M22]*n[r.M31]+n[r.M13]*n[r.M21]*n[r.M32]-n[r.M11]*n[r.M23]*n[r.M32]-n[r.M12]*n[r.M21]*n[r.M33]+n[r.M11]*n[r.M22]*n[r.M33],u[r.M01]=n[r.M03]*n[r.M22]*n[r.M31]-n[r.M02]*n[r.M23]*n[r.M31]-n[r.M03]*n[r.M21]*n[r.M32]+n[r.M01]*n[r.M23]*n[r.M32]+n[r.M02]*n[r.M21]*n[r.M33]-n[r.M01]*n[r.M22]*n[r.M33],u[r.M02]=n[r.M02]*n[r.M13]*n[r.M31]-n[r.M03]*n[r.M12]*n[r.M31]+n[r.M03]*n[r.M11]*n[r.M32]-n[r.M01]*n[r.M13]*n[r.M32]-n[r.M02]*n[r.M11]*n[r.M33]+n[r.M01]*n[r.M12]*n[r.M33],u[r.M03]=n[r.M03]*n[r.M12]*n[r.M21]-n[r.M02]*n[r.M13]*n[r.M21]-n[r.M03]*n[r.M11]*n[r.M22]+n[r.M01]*n[r.M13]*n[r.M22]+n[r.M02]*n[r.M11]*n[r.M23]-n[r.M01]*n[r.M12]*n[r.M23],u[r.M10]=n[r.M13]*n[r.M22]*n[r.M30]-n[r.M12]*n[r.M23]*n[r.M30]-n[r.M13]*n[r.M20]*n[r.M32]+n[r.M10]*n[r.M23]*n[r.M32]+n[r.M12]*n[r.M20]*n[r.M33]-n[r.M10]*n[r.M22]*n[r.M33],u[r.M11]=n[r.M02]*n[r.M23]*n[r.M30]-n[r.M03]*n[r.M22]*n[r.M30]+n[r.M03]*n[r.M20]*n[r.M32]-n[r.M00]*n[r.M23]*n[r.M32]-n[r.M02]*n[r.M20]*n[r.M33]+n[r.M00]*n[r.M22]*n[r.M33],u[r.M12]=n[r.M03]*n[r.M12]*n[r.M30]-n[r.M02]*n[r.M13]*n[r.M30]-n[r.M03]*n[r.M10]*n[r.M32]+n[r.M00]*n[r.M13]*n[r.M32]+n[r.M02]*n[r.M10]*n[r.M33]-n[r.M00]*n[r.M12]*n[r.M33],u[r.M13]=n[r.M02]*n[r.M13]*n[r.M20]-n[r.M03]*n[r.M12]*n[r.M20]+n[r.M03]*n[r.M10]*n[r.M22]-n[r.M00]*n[r.M13]*n[r.M22]-n[r.M02]*n[r.M10]*n[r.M23]+n[r.M00]*n[r.M12]*n[r.M23],u[r.M20]=n[r.M11]*n[r.M23]*n[r.M30]-n[r.M13]*n[r.M21]*n[r.M30]+n[r.M13]*n[r.M20]*n[r.M31]-n[r.M10]*n[r.M23]*n[r.M31]-n[r.M11]*n[r.M20]*n[r.M33]+n[r.M10]*n[r.M21]*n[r.M33],u[r.M21]=n[r.M03]*n[r.M21]*n[r.M30]-n[r.M01]*n[r.M23]*n[r.M30]-n[r.M03]*n[r.M20]*n[r.M31]+n[r.M00]*n[r.M23]*n[r.M31]+n[r.M01]*n[r.M20]*n[r.M33]-n[r.M00]*n[r.M21]*n[r.M33],u[r.M22]=n[r.M01]*n[r.M13]*n[r.M30]-n[r.M03]*n[r.M11]*n[r.M30]+n[r.M03]*n[r.M10]*n[r.M31]-n[r.M00]*n[r.M13]*n[r.M31]-n[r.M01]*n[r.M10]*n[r.M33]+n[r.M00]*n[r.M11]*n[r.M33],u[r.M23]=n[r.M03]*n[r.M11]*n[r.M20]-n[r.M01]*n[r.M13]*n[r.M20]-n[r.M03]*n[r.M10]*n[r.M21]+n[r.M00]*n[r.M13]*n[r.M21]+n[r.M01]*n[r.M10]*n[r.M23]-n[r.M00]*n[r.M11]*n[r.M23],u[r.M30]=n[r.M12]*n[r.M21]*n[r.M30]-n[r.M11]*n[r.M22]*n[r.M30]-n[r.M12]*n[r.M20]*n[r.M31]+n[r.M10]*n[r.M22]*n[r.M31]+n[r.M11]*n[r.M20]*n[r.M32]-n[r.M10]*n[r.M21]*n[r.M32],u[r.M31]=n[r.M01]*n[r.M22]*n[r.M30]-n[r.M02]*n[r.M21]*n[r.M30]+n[r.M02]*n[r.M20]*n[r.M31]-n[r.M00]*n[r.M22]*n[r.M31]-n[r.M01]*n[r.M20]*n[r.M32]+n[r.M00]*n[r.M21]*n[r.M32],u[r.M32]=n[r.M02]*n[r.M11]*n[r.M30]-n[r.M01]*n[r.M12]*n[r.M30]-n[r.M02]*n[r.M10]*n[r.M31]+n[r.M00]*n[r.M12]*n[r.M31]+n[r.M01]*n[r.M10]*n[r.M32]-n[r.M00]*n[r.M11]*n[r.M32],u[r.M33]=n[r.M01]*n[r.M12]*n[r.M20]-n[r.M02]*n[r.M11]*n[r.M20]+n[r.M02]*n[r.M10]*n[r.M21]-n[r.M00]*n[r.M12]*n[r.M21]-n[r.M01]*n[r.M10]*n[r.M22]+n[r.M00]*n[r.M11]*n[r.M22],n[r.M00]=u[r.M00]*M,n[r.M01]=u[r.M01]*M,n[r.M02]=u[r.M02]*M,n[r.M03]=u[r.M03]*M,n[r.M10]=u[r.M10]*M,n[r.M11]=u[r.M11]*M,n[r.M12]=u[r.M12]*M,n[r.M13]=u[r.M13]*M,n[r.M20]=u[r.M20]*M,n[r.M21]=u[r.M21]*M,n[r.M22]=u[r.M22]*M,n[r.M23]=u[r.M23]*M,n[r.M30]=u[r.M30]*M,n[r.M31]=u[r.M31]*M,n[r.M32]=u[r.M32]*M,n[r.M33]=u[r.M33]*M,this},c.prototype.determinant=function(){var n=this.values;return n[r.M30]*n[r.M21]*n[r.M12]*n[r.M03]-n[r.M20]*n[r.M31]*n[r.M12]*n[r.M03]-n[r.M30]*n[r.M11]*n[r.M22]*n[r.M03]+n[r.M10]*n[r.M31]*n[r.M22]*n[r.M03]+n[r.M20]*n[r.M11]*n[r.M32]*n[r.M03]-n[r.M10]*n[r.M21]*n[r.M32]*n[r.M03]-n[r.M30]*n[r.M21]*n[r.M02]*n[r.M13]+n[r.M20]*n[r.M31]*n[r.M02]*n[r.M13]+n[r.M30]*n[r.M01]*n[r.M22]*n[r.M13]-n[r.M00]*n[r.M31]*n[r.M22]*n[r.M13]-n[r.M20]*n[r.M01]*n[r.M32]*n[r.M13]+n[r.M00]*n[r.M21]*n[r.M32]*n[r.M13]+n[r.M30]*n[r.M11]*n[r.M02]*n[r.M23]-n[r.M10]*n[r.M31]*n[r.M02]*n[r.M23]-n[r.M30]*n[r.M01]*n[r.M12]*n[r.M23]+n[r.M00]*n[r.M31]*n[r.M12]*n[r.M23]+n[r.M10]*n[r.M01]*n[r.M32]*n[r.M23]-n[r.M00]*n[r.M11]*n[r.M32]*n[r.M23]-n[r.M20]*n[r.M11]*n[r.M02]*n[r.M33]+n[r.M10]*n[r.M21]*n[r.M02]*n[r.M33]+n[r.M20]*n[r.M01]*n[r.M12]*n[r.M33]-n[r.M00]*n[r.M21]*n[r.M12]*n[r.M33]-n[r.M10]*n[r.M01]*n[r.M22]*n[r.M33]+n[r.M00]*n[r.M11]*n[r.M22]*n[r.M33]},c.prototype.translate=function(n,u,d){var M=this.values;return M[r.M03]+=n,M[r.M13]+=u,M[r.M23]+=d,this},c.prototype.copy=function(){return new c().set(this.values)},c.prototype.projection=function(n,u,d,M){this.identity();var S=1/Math.tan(d*(Math.PI/180)/2),V=(u+n)/(n-u),I=2*u*n/(n-u),D=this.values;return D[r.M00]=S/M,D[r.M10]=0,D[r.M20]=0,D[r.M30]=0,D[r.M01]=0,D[r.M11]=S,D[r.M21]=0,D[r.M31]=0,D[r.M02]=0,D[r.M12]=0,D[r.M22]=V,D[r.M32]=-1,D[r.M03]=0,D[r.M13]=0,D[r.M23]=I,D[r.M33]=0,this},c.prototype.ortho2d=function(n,u,d,M){return this.ortho(n,n+d,u,u+M,0,1)},c.prototype.ortho=function(n,u,d,M,S,V){this.identity();var I=2/(u-n),D=2/(M-d),k=-2/(V-S),E=-(u+n)/(u-n),X=-(M+d)/(M-d),z=-(V+S)/(V-S),Q=this.values;return Q[r.M00]=I,Q[r.M10]=0,Q[r.M20]=0,Q[r.M30]=0,Q[r.M01]=0,Q[r.M11]=D,Q[r.M21]=0,Q[r.M31]=0,Q[r.M02]=0,Q[r.M12]=0,Q[r.M22]=k,Q[r.M32]=0,Q[r.M03]=E,Q[r.M13]=X,Q[r.M23]=z,Q[r.M33]=1,this},c.prototype.multiply=function(n){var u=this.temp,d=this.values,M=n.values;return u[r.M00]=d[r.M00]*M[r.M00]+d[r.M01]*M[r.M10]+d[r.M02]*M[r.M20]+d[r.M03]*M[r.M30],u[r.M01]=d[r.M00]*M[r.M01]+d[r.M01]*M[r.M11]+d[r.M02]*M[r.M21]+d[r.M03]*M[r.M31],u[r.M02]=d[r.M00]*M[r.M02]+d[r.M01]*M[r.M12]+d[r.M02]*M[r.M22]+d[r.M03]*M[r.M32],u[r.M03]=d[r.M00]*M[r.M03]+d[r.M01]*M[r.M13]+d[r.M02]*M[r.M23]+d[r.M03]*M[r.M33],u[r.M10]=d[r.M10]*M[r.M00]+d[r.M11]*M[r.M10]+d[r.M12]*M[r.M20]+d[r.M13]*M[r.M30],u[r.M11]=d[r.M10]*M[r.M01]+d[r.M11]*M[r.M11]+d[r.M12]*M[r.M21]+d[r.M13]*M[r.M31],u[r.M12]=d[r.M10]*M[r.M02]+d[r.M11]*M[r.M12]+d[r.M12]*M[r.M22]+d[r.M13]*M[r.M32],u[r.M13]=d[r.M10]*M[r.M03]+d[r.M11]*M[r.M13]+d[r.M12]*M[r.M23]+d[r.M13]*M[r.M33],u[r.M20]=d[r.M20]*M[r.M00]+d[r.M21]*M[r.M10]+d[r.M22]*M[r.M20]+d[r.M23]*M[r.M30],u[r.M21]=d[r.M20]*M[r.M01]+d[r.M21]*M[r.M11]+d[r.M22]*M[r.M21]+d[r.M23]*M[r.M31],u[r.M22]=d[r.M20]*M[r.M02]+d[r.M21]*M[r.M12]+d[r.M22]*M[r.M22]+d[r.M23]*M[r.M32],u[r.M23]=d[r.M20]*M[r.M03]+d[r.M21]*M[r.M13]+d[r.M22]*M[r.M23]+d[r.M23]*M[r.M33],u[r.M30]=d[r.M30]*M[r.M00]+d[r.M31]*M[r.M10]+d[r.M32]*M[r.M20]+d[r.M33]*M[r.M30],u[r.M31]=d[r.M30]*M[r.M01]+d[r.M31]*M[r.M11]+d[r.M32]*M[r.M21]+d[r.M33]*M[r.M31],u[r.M32]=d[r.M30]*M[r.M02]+d[r.M31]*M[r.M12]+d[r.M32]*M[r.M22]+d[r.M33]*M[r.M32],u[r.M33]=d[r.M30]*M[r.M03]+d[r.M31]*M[r.M13]+d[r.M32]*M[r.M23]+d[r.M33]*M[r.M33],this.set(this.temp)},c.prototype.multiplyLeft=function(n){var u=this.temp,d=this.values,M=n.values;return u[r.M00]=M[r.M00]*d[r.M00]+M[r.M01]*d[r.M10]+M[r.M02]*d[r.M20]+M[r.M03]*d[r.M30],u[r.M01]=M[r.M00]*d[r.M01]+M[r.M01]*d[r.M11]+M[r.M02]*d[r.M21]+M[r.M03]*d[r.M31],u[r.M02]=M[r.M00]*d[r.M02]+M[r.M01]*d[r.M12]+M[r.M02]*d[r.M22]+M[r.M03]*d[r.M32],u[r.M03]=M[r.M00]*d[r.M03]+M[r.M01]*d[r.M13]+M[r.M02]*d[r.M23]+M[r.M03]*d[r.M33],u[r.M10]=M[r.M10]*d[r.M00]+M[r.M11]*d[r.M10]+M[r.M12]*d[r.M20]+M[r.M13]*d[r.M30],u[r.M11]=M[r.M10]*d[r.M01]+M[r.M11]*d[r.M11]+M[r.M12]*d[r.M21]+M[r.M13]*d[r.M31],u[r.M12]=M[r.M10]*d[r.M02]+M[r.M11]*d[r.M12]+M[r.M12]*d[r.M22]+M[r.M13]*d[r.M32],u[r.M13]=M[r.M10]*d[r.M03]+M[r.M11]*d[r.M13]+M[r.M12]*d[r.M23]+M[r.M13]*d[r.M33],u[r.M20]=M[r.M20]*d[r.M00]+M[r.M21]*d[r.M10]+M[r.M22]*d[r.M20]+M[r.M23]*d[r.M30],u[r.M21]=M[r.M20]*d[r.M01]+M[r.M21]*d[r.M11]+M[r.M22]*d[r.M21]+M[r.M23]*d[r.M31],u[r.M22]=M[r.M20]*d[r.M02]+M[r.M21]*d[r.M12]+M[r.M22]*d[r.M22]+M[r.M23]*d[r.M32],u[r.M23]=M[r.M20]*d[r.M03]+M[r.M21]*d[r.M13]+M[r.M22]*d[r.M23]+M[r.M23]*d[r.M33],u[r.M30]=M[r.M30]*d[r.M00]+M[r.M31]*d[r.M10]+M[r.M32]*d[r.M20]+M[r.M33]*d[r.M30],u[r.M31]=M[r.M30]*d[r.M01]+M[r.M31]*d[r.M11]+M[r.M32]*d[r.M21]+M[r.M33]*d[r.M31],u[r.M32]=M[r.M30]*d[r.M02]+M[r.M31]*d[r.M12]+M[r.M32]*d[r.M22]+M[r.M33]*d[r.M32],u[r.M33]=M[r.M30]*d[r.M03]+M[r.M31]*d[r.M13]+M[r.M32]*d[r.M23]+M[r.M33]*d[r.M33],this.set(this.temp)},c.prototype.lookAt=function(n,u,d){c.initTemps();var M=c.xAxis,S=c.yAxis,V=c.zAxis;V.setFrom(u).normalize(),M.setFrom(u).normalize(),M.cross(d).normalize(),S.setFrom(M).cross(V).normalize(),this.identity();var I=this.values;return I[r.M00]=M.x,I[r.M01]=M.y,I[r.M02]=M.z,I[r.M10]=S.x,I[r.M11]=S.y,I[r.M12]=S.z,I[r.M20]=-V.x,I[r.M21]=-V.y,I[r.M22]=-V.z,c.tmpMatrix.identity(),c.tmpMatrix.values[r.M03]=-n.x,c.tmpMatrix.values[r.M13]=-n.y,c.tmpMatrix.values[r.M23]=-n.z,this.multiply(c.tmpMatrix),this},c.initTemps=function(){c.xAxis===null&&(c.xAxis=new r.Vector3),c.yAxis===null&&(c.yAxis=new r.Vector3),c.zAxis===null&&(c.zAxis=new r.Vector3);},c.xAxis=null,c.yAxis=null,c.zAxis=null,c.tmpMatrix=new c,c})();r.Matrix4=v;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function I(D,k,E,X){this.attributes=k,this.verticesLength=0,this.dirtyVertices=false,this.indicesLength=0,this.dirtyIndices=false,this.elementsPerVertex=0,this.context=D instanceof r.ManagedWebGLRenderingContext?D:new r.ManagedWebGLRenderingContext(D),this.elementsPerVertex=0;for(var z=0;z<k.length;z++)this.elementsPerVertex+=k[z].numElements;this.vertices=new Float32Array(E*this.elementsPerVertex),this.indices=new Uint16Array(X),this.context.addRestorable(this);}return I.prototype.getAttributes=function(){return this.attributes},I.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},I.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},I.prototype.setVerticesLength=function(D){this.dirtyVertices=true,this.verticesLength=D;},I.prototype.getVertices=function(){return this.vertices},I.prototype.maxIndices=function(){return this.indices.length},I.prototype.numIndices=function(){return this.indicesLength},I.prototype.setIndicesLength=function(D){this.dirtyIndices=true,this.indicesLength=D;},I.prototype.getIndices=function(){return this.indices},I.prototype.getVertexSizeInFloats=function(){for(var D=0,k=0;k<this.attributes.length;k++){D+=this.attributes[k].numElements;}return D},I.prototype.setVertices=function(D){if(this.dirtyVertices=true,D.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(D,0),this.verticesLength=D.length;},I.prototype.setIndices=function(D){if(this.dirtyIndices=true,D.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(D,0),this.indicesLength=D.length;},I.prototype.draw=function(D,k){this.drawWithOffset(D,k,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex);},I.prototype.drawWithOffset=function(D,k,E,X){var z=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(D),this.indicesLength>0?z.drawElements(k,X,z.UNSIGNED_SHORT,2*E):z.drawArrays(k,E,X),this.unbind(D);},I.prototype.bind=function(D){var k=this.context.gl;k.bindBuffer(k.ARRAY_BUFFER,this.verticesBuffer);for(var E=0,X=0;X<this.attributes.length;X++){var z=this.attributes[X],Q=D.getAttributeLocation(z.name);k.enableVertexAttribArray(Q),k.vertexAttribPointer(Q,z.numElements,k.FLOAT,false,4*this.elementsPerVertex,4*E),E+=z.numElements;}this.indicesLength>0&&k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);},I.prototype.unbind=function(D){for(var k=this.context.gl,E=0;E<this.attributes.length;E++){var X=this.attributes[E],z=D.getAttributeLocation(X.name);k.disableVertexAttribArray(z);}k.bindBuffer(k.ARRAY_BUFFER,null),this.indicesLength>0&&k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,null);},I.prototype.update=function(){var D=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=D.createBuffer()),D.bindBuffer(D.ARRAY_BUFFER,this.verticesBuffer),D.bufferData(D.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),D.DYNAMIC_DRAW),this.dirtyVertices=false),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=D.createBuffer()),D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),D.DYNAMIC_DRAW),this.dirtyIndices=false);},I.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update();},I.prototype.dispose=function(){this.context.removeRestorable(this);var D=this.context.gl;D.deleteBuffer(this.verticesBuffer),D.deleteBuffer(this.indicesBuffer);},I})();r.Mesh=v;var c=(function(){function I(D,k,E){this.name=D,this.type=k,this.numElements=E;}return I})();r.VertexAttribute=c;var n=(function(I){function D(){return I.call(this,r.Shader.POSITION,V.Float,2)||this}return es(D,I),D})(c);r.Position2Attribute=n;var u=(function(I){function D(){return I.call(this,r.Shader.POSITION,V.Float,3)||this}return es(D,I),D})(c);r.Position3Attribute=u;var d=(function(I){function D(k){return k===void 0&&(k=0),I.call(this,r.Shader.TEXCOORDS+(k==0?"":k),V.Float,2)||this}return es(D,I),D})(c);r.TexCoordAttribute=d;var M=(function(I){function D(){return I.call(this,r.Shader.COLOR,V.Float,4)||this}return es(D,I),D})(c);r.ColorAttribute=M;var S=(function(I){function D(){return I.call(this,r.Shader.COLOR2,V.Float,4)||this}return es(D,I),D})(c),V;r.Color2Attribute=S,(function(I){I[I.Float=0]="Float";})(V=r.VertexAttributeType||(r.VertexAttributeType={}));})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function c(n,u,d){if(u===void 0&&(u=true),d===void 0&&(d=10920),this.isDrawing=false,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,d>10920)throw new Error("Can't have more than 10920 triangles per batch: "+d);this.context=n instanceof r.ManagedWebGLRenderingContext?n:new r.ManagedWebGLRenderingContext(n);var M=u?[new r.Position2Attribute,new r.ColorAttribute,new r.TexCoordAttribute,new r.Color2Attribute]:[new r.Position2Attribute,new r.ColorAttribute,new r.TexCoordAttribute];this.mesh=new r.Mesh(n,M,d,3*d),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA;}return c.prototype.begin=function(n){var u=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=n,this.lastTexture=null,this.isDrawing=true,u.enable(u.BLEND),u.blendFunc(this.srcBlend,this.dstBlend);},c.prototype.setBlendMode=function(n,u){var d=this.context.gl;this.srcBlend=n,this.dstBlend=u,this.isDrawing&&(this.flush(),d.blendFunc(this.srcBlend,this.dstBlend));},c.prototype.draw=function(n,u,d){n!=this.lastTexture?(this.flush(),this.lastTexture=n):(this.verticesLength+u.length>this.mesh.getVertices().length||this.indicesLength+d.length>this.mesh.getIndices().length)&&this.flush();var M=this.mesh.numVertices();this.mesh.getVertices().set(u,this.verticesLength),this.verticesLength+=u.length,this.mesh.setVerticesLength(this.verticesLength);for(var S=this.mesh.getIndices(),V=this.indicesLength,I=0;I<d.length;V++,I++)S[V]=d[I]+M;this.indicesLength+=d.length,this.mesh.setIndicesLength(this.indicesLength);},c.prototype.flush=function(){var n=this.context.gl;this.verticesLength!=0&&(this.lastTexture.bind(),this.mesh.draw(this.shader,n.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++);},c.prototype.end=function(){var n=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=false,n.disable(n.BLEND);},c.prototype.getDrawCalls=function(){return this.drawCalls},c.prototype.dispose=function(){this.mesh.dispose();},c})();r.PolygonBatcher=v;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function n(u,d,M){M===void 0&&(M=true),this.twoColorTint=false,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new T.Color(1,1,1,1),this.canvas=u,this.context=d instanceof r.ManagedWebGLRenderingContext?d:new r.ManagedWebGLRenderingContext(d),this.twoColorTint=M,this.camera=new r.OrthoCamera(u.width,u.height),this.batcherShader=M?r.Shader.newTwoColoredTextured(this.context):r.Shader.newColoredTextured(this.context),this.batcher=new r.PolygonBatcher(this.context,M),this.shapesShader=r.Shader.newColored(this.context),this.shapes=new r.ShapeRenderer(this.context),this.skeletonRenderer=new r.SkeletonRenderer(this.context,M),this.skeletonDebugRenderer=new r.SkeletonDebugRenderer(this.context);}return n.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher);},n.prototype.drawSkeleton=function(u,d,M,S){d===void 0&&(d=false),M===void 0&&(M=-1),S===void 0&&(S=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=d,this.skeletonRenderer.draw(this.batcher,Skeleton,M,S);},n.prototype.drawSkeletonDebug=function(u,d,M){d===void 0&&(d=false),M===void 0&&(M=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=d,this.skeletonDebugRenderer.draw(this.shapes,Skeleton,M);},n.prototype.drawTexture=function(u,d,M,S,V,I){I===void 0&&(I=null),this.enableRenderer(this.batcher),I===null&&(I=this.WHITE);var D=this.QUAD,k=0;D[k++]=d,D[k++]=M,D[k++]=I.r,D[k++]=I.g,D[k++]=I.b,D[k++]=I.a,D[k++]=0,D[k++]=1,this.twoColorTint&&(D[k++]=0,D[k++]=0,D[k++]=0,D[k++]=0),D[k++]=d+S,D[k++]=M,D[k++]=I.r,D[k++]=I.g,D[k++]=I.b,D[k++]=I.a,D[k++]=1,D[k++]=1,this.twoColorTint&&(D[k++]=0,D[k++]=0,D[k++]=0,D[k++]=0),D[k++]=d+S,D[k++]=M+V,D[k++]=I.r,D[k++]=I.g,D[k++]=I.b,D[k++]=I.a,D[k++]=1,D[k++]=0,this.twoColorTint&&(D[k++]=0,D[k++]=0,D[k++]=0,D[k++]=0),D[k++]=d,D[k++]=M+V,D[k++]=I.r,D[k++]=I.g,D[k++]=I.b,D[k++]=I.a,D[k++]=0,D[k++]=0,this.twoColorTint&&(D[k++]=0,D[k++]=0,D[k++]=0,D[k++]=0),this.batcher.draw(u,D,this.QUAD_TRIANGLES);},n.prototype.drawTextureUV=function(u,d,M,S,V,I,D,k,E,X){X===void 0&&(X=null),this.enableRenderer(this.batcher),X===null&&(X=this.WHITE);var z=this.QUAD,Q=0;z[Q++]=d,z[Q++]=M,z[Q++]=X.r,z[Q++]=X.g,z[Q++]=X.b,z[Q++]=X.a,z[Q++]=I,z[Q++]=D,this.twoColorTint&&(z[Q++]=0,z[Q++]=0,z[Q++]=0,z[Q++]=0),z[Q++]=d+S,z[Q++]=M,z[Q++]=X.r,z[Q++]=X.g,z[Q++]=X.b,z[Q++]=X.a,z[Q++]=k,z[Q++]=D,this.twoColorTint&&(z[Q++]=0,z[Q++]=0,z[Q++]=0,z[Q++]=0),z[Q++]=d+S,z[Q++]=M+V,z[Q++]=X.r,z[Q++]=X.g,z[Q++]=X.b,z[Q++]=X.a,z[Q++]=k,z[Q++]=E,this.twoColorTint&&(z[Q++]=0,z[Q++]=0,z[Q++]=0,z[Q++]=0),z[Q++]=d,z[Q++]=M+V,z[Q++]=X.r,z[Q++]=X.g,z[Q++]=X.b,z[Q++]=X.a,z[Q++]=I,z[Q++]=E,this.twoColorTint&&(z[Q++]=0,z[Q++]=0,z[Q++]=0,z[Q++]=0),this.batcher.draw(u,z,this.QUAD_TRIANGLES);},n.prototype.drawTextureRotated=function(u,d,M,S,V,I,D,k,E,X){E===void 0&&(E=null),this.enableRenderer(this.batcher),E===null&&(E=this.WHITE);var z=this.QUAD,Q=d+I,st=M+D,ut=-I,nt=-D,ot=S-I,it=V-D,W=ut,et=nt,ft=ut,at=it,Ct=ot,dt=it,mt=ot,kt=nt,ht=0,$=0,ct=0,wt=0,yt=0,Xt=0,Dt=0,Lt=0;if(k!=0){var Bt=T.MathUtils.cosDeg(k),zt=T.MathUtils.sinDeg(k);ct=(yt=Bt*Ct-zt*dt)+((ht=Bt*W-zt*et)-(Dt=Bt*ft-zt*at)),wt=(Xt=zt*Ct+Bt*dt)+(($=zt*W+Bt*et)-(Lt=zt*ft+Bt*at));}else ht=W,$=et,Dt=ft,Lt=at,yt=Ct,Xt=dt,ct=mt,wt=kt;ht+=Q,$+=st,ct+=Q,wt+=st,yt+=Q,Xt+=st,Dt+=Q,Lt+=st;var Yt=0;z[Yt++]=ht,z[Yt++]=$,z[Yt++]=E.r,z[Yt++]=E.g,z[Yt++]=E.b,z[Yt++]=E.a,z[Yt++]=0,z[Yt++]=1,this.twoColorTint&&(z[Yt++]=0,z[Yt++]=0,z[Yt++]=0,z[Yt++]=0),z[Yt++]=ct,z[Yt++]=wt,z[Yt++]=E.r,z[Yt++]=E.g,z[Yt++]=E.b,z[Yt++]=E.a,z[Yt++]=1,z[Yt++]=1,this.twoColorTint&&(z[Yt++]=0,z[Yt++]=0,z[Yt++]=0,z[Yt++]=0),z[Yt++]=yt,z[Yt++]=Xt,z[Yt++]=E.r,z[Yt++]=E.g,z[Yt++]=E.b,z[Yt++]=E.a,z[Yt++]=1,z[Yt++]=0,this.twoColorTint&&(z[Yt++]=0,z[Yt++]=0,z[Yt++]=0,z[Yt++]=0),z[Yt++]=Dt,z[Yt++]=Lt,z[Yt++]=E.r,z[Yt++]=E.g,z[Yt++]=E.b,z[Yt++]=E.a,z[Yt++]=0,z[Yt++]=0,this.twoColorTint&&(z[Yt++]=0,z[Yt++]=0,z[Yt++]=0,z[Yt++]=0),this.batcher.draw(u,z,this.QUAD_TRIANGLES);},n.prototype.drawRegion=function(u,d,M,S,V,I,D){I===void 0&&(I=null),this.enableRenderer(this.batcher),I===null&&(I=this.WHITE);var k=this.QUAD,E=0;k[E++]=d,k[E++]=M,k[E++]=I.r,k[E++]=I.g,k[E++]=I.b,k[E++]=I.a,k[E++]=u.u,k[E++]=u.v2,this.twoColorTint&&(k[E++]=0,k[E++]=0,k[E++]=0,k[E++]=0),k[E++]=d+S,k[E++]=M,k[E++]=I.r,k[E++]=I.g,k[E++]=I.b,k[E++]=I.a,k[E++]=u.u2,k[E++]=u.v2,this.twoColorTint&&(k[E++]=0,k[E++]=0,k[E++]=0,k[E++]=0),k[E++]=d+S,k[E++]=M+V,k[E++]=I.r,k[E++]=I.g,k[E++]=I.b,k[E++]=I.a,k[E++]=u.u2,k[E++]=u.v,this.twoColorTint&&(k[E++]=0,k[E++]=0,k[E++]=0,k[E++]=0),k[E++]=d,k[E++]=M+V,k[E++]=I.r,k[E++]=I.g,k[E++]=I.b,k[E++]=I.a,k[E++]=u.u,k[E++]=u.v,this.twoColorTint&&(k[E++]=0,k[E++]=0,k[E++]=0,k[E++]=0),this.batcher.draw(u.texture,k,this.QUAD_TRIANGLES);},n.prototype.line=function(u,d,M,S,V,I){V===void 0&&(V=null),this.enableRenderer(this.shapes),this.shapes.line(u,d,M,S,V);},n.prototype.triangle=function(u,d,M,S,V,I,D,k,E,X){k===void 0&&(k=null),E===void 0&&(E=null),X===void 0&&(X=null),this.enableRenderer(this.shapes),this.shapes.triangle(u,d,M,S,V,I,D,k,E,X);},n.prototype.quad=function(u,d,M,S,V,I,D,k,E,X,z,Q,st){X===void 0&&(X=null),z===void 0&&(z=null),Q===void 0&&(Q=null),st===void 0&&(st=null),this.enableRenderer(this.shapes),this.shapes.quad(u,d,M,S,V,I,D,k,E,X,z,Q,st);},n.prototype.rect=function(u,d,M,S,V,I){I===void 0&&(I=null),this.enableRenderer(this.shapes),this.shapes.rect(u,d,M,S,V,I);},n.prototype.rectLine=function(u,d,M,S,V,I,D){D===void 0&&(D=null),this.enableRenderer(this.shapes),this.shapes.rectLine(u,d,M,S,V,I,D);},n.prototype.polygon=function(u,d,M,S){S===void 0&&(S=null),this.enableRenderer(this.shapes),this.shapes.polygon(u,d,M,S);},n.prototype.circle=function(u,d,M,S,V,I){V===void 0&&(V=null),I===void 0&&(I=0),this.enableRenderer(this.shapes),this.shapes.circle(u,d,M,S,V,I);},n.prototype.curve=function(u,d,M,S,V,I,D,k,E,X){X===void 0&&(X=null),this.enableRenderer(this.shapes),this.shapes.curve(u,d,M,S,V,I,D,k,E,X);},n.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null;},n.prototype.resize=function(u){var d=this.canvas,M=d.clientWidth,S=d.clientHeight;if(d.width==M&&d.height==S||(d.width=M,d.height=S),this.context.gl.viewport(0,0,d.width,d.height),u!==c.Stretch){if(u===c.Expand)this.camera.setViewport(M,S);else if(u===c.Fit){var V=d.width,I=d.height,D=this.camera.viewportWidth,k=this.camera.viewportHeight,z=k/D<I/V?D/V:k/I;this.camera.viewportWidth=V*z,this.camera.viewportHeight=I*z;}}this.camera.update();},n.prototype.enableRenderer=function(u){this.activeRenderer!==u&&(this.end(),u instanceof r.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(r.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):u instanceof r.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(r.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer);},n.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose();},n})(),c;r.SceneRenderer=v,(function(n){n[n.Stretch=0]="Stretch",n[n.Expand=1]="Expand",n[n.Fit=2]="Fit";})(c=r.ResizeMode||(r.ResizeMode={}));})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function c(n,u,d){this.vertexShader=u,this.fragmentShader=d,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=u,this.fsSource=d,this.context=n instanceof r.ManagedWebGLRenderingContext?n:new r.ManagedWebGLRenderingContext(n),this.context.addRestorable(this),this.compile();}return c.prototype.getProgram=function(){return this.program},c.prototype.getVertexShader=function(){return this.vertexShader},c.prototype.getFragmentShader=function(){return this.fragmentShader},c.prototype.getVertexShaderSource=function(){return this.vsSource},c.prototype.getFragmentSource=function(){return this.fsSource},c.prototype.compile=function(){var n=this.context.gl;try{this.vs=this.compileShader(n.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(n.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs);}catch(u){throw this.dispose(),u}},c.prototype.compileShader=function(n,u){var d=this.context.gl,M=d.createShader(n);if(d.shaderSource(M,u),d.compileShader(M),!d.getShaderParameter(M,d.COMPILE_STATUS)){var S="Couldn't compile shader: "+d.getShaderInfoLog(M);if(d.deleteShader(M),!d.isContextLost())throw new Error(S)}return M},c.prototype.compileProgram=function(n,u){var d=this.context.gl,M=d.createProgram();if(d.attachShader(M,n),d.attachShader(M,u),d.linkProgram(M),!d.getProgramParameter(M,d.LINK_STATUS)){var S="Couldn't compile shader program: "+d.getProgramInfoLog(M);if(d.deleteProgram(M),!d.isContextLost())throw new Error(S)}return M},c.prototype.restore=function(){this.compile();},c.prototype.bind=function(){this.context.gl.useProgram(this.program);},c.prototype.unbind=function(){this.context.gl.useProgram(null);},c.prototype.setUniformi=function(n,u){this.context.gl.uniform1i(this.getUniformLocation(n),u);},c.prototype.setUniformf=function(n,u){this.context.gl.uniform1f(this.getUniformLocation(n),u);},c.prototype.setUniform2f=function(n,u,d){this.context.gl.uniform2f(this.getUniformLocation(n),u,d);},c.prototype.setUniform3f=function(n,u,d,M){this.context.gl.uniform3f(this.getUniformLocation(n),u,d,M);},c.prototype.setUniform4f=function(n,u,d,M,S){this.context.gl.uniform4f(this.getUniformLocation(n),u,d,M,S);},c.prototype.setUniform2x2f=function(n,u){var d=this.context.gl;this.tmp2x2.set(u),d.uniformMatrix2fv(this.getUniformLocation(n),false,this.tmp2x2);},c.prototype.setUniform3x3f=function(n,u){var d=this.context.gl;this.tmp3x3.set(u),d.uniformMatrix3fv(this.getUniformLocation(n),false,this.tmp3x3);},c.prototype.setUniform4x4f=function(n,u){var d=this.context.gl;this.tmp4x4.set(u),d.uniformMatrix4fv(this.getUniformLocation(n),false,this.tmp4x4);},c.prototype.getUniformLocation=function(n){var u=this.context.gl,d=u.getUniformLocation(this.program,n);if(!d&&!u.isContextLost())throw new Error("Couldn't find location for uniform "+n);return d},c.prototype.getAttributeLocation=function(n){var u=this.context.gl,d=u.getAttribLocation(this.program,n);if(d==-1&&!u.isContextLost())throw new Error("Couldn't find location for attribute "+n);return d},c.prototype.dispose=function(){this.context.removeRestorable(this);var n=this.context.gl;this.vs&&(n.deleteShader(this.vs),this.vs=null),this.fs&&(n.deleteShader(this.fs),this.fs=null),this.program&&(n.deleteProgram(this.program),this.program=null);},c.newColoredTextured=function(n){return new c(n,`
				attribute vec4 `+c.POSITION+`;
				attribute vec4 `+c.COLOR+`;
				attribute vec2 `+c.TEXCOORDS+`;
				uniform mat4 `+c.MVP_MATRIX+`;
				varying vec4 v_color;
				varying vec2 v_texCoords;

				void main () {
					v_color = `+c.COLOR+`;
					v_texCoords = `+c.TEXCOORDS+`;
					gl_Position = `+c.MVP_MATRIX+" * "+c.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
				}
			`)},c.newTwoColoredTextured=function(n){return new c(n,`
				attribute vec4 `+c.POSITION+`;
				attribute vec4 `+c.COLOR+`;
				attribute vec4 `+c.COLOR2+`;
				attribute vec2 `+c.TEXCOORDS+`;
				uniform mat4 `+c.MVP_MATRIX+`;
				varying vec4 v_light;
				varying vec4 v_dark;
				varying vec2 v_texCoords;

				void main () {
					v_light = `+c.COLOR+`;
					v_dark = `+c.COLOR2+`;
					v_texCoords = `+c.TEXCOORDS+`;
					gl_Position = `+c.MVP_MATRIX+" * "+c.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_light;
				varying LOWP vec4 v_dark;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					vec4 texColor = texture2D(u_texture, v_texCoords);
					gl_FragColor.a = texColor.a * v_light.a;
					gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
				}
			`)},c.newColored=function(n){return new c(n,`
				attribute vec4 `+c.POSITION+`;
				attribute vec4 `+c.COLOR+`;
				uniform mat4 `+c.MVP_MATRIX+`;
				varying vec4 v_color;

				void main () {
					v_color = `+c.COLOR+`;
					gl_Position = `+c.MVP_MATRIX+" * "+c.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;

				void main () {
					gl_FragColor = v_color;
				}
			`)},c.MVP_MATRIX="u_projTrans",c.POSITION="a_position",c.COLOR="a_color",c.COLOR2="a_color2",c.TEXCOORDS="a_texCoords",c.SAMPLER="u_texture",c})();r.Shader=v;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function n(u,d){if(d===void 0&&(d=10920),this.isDrawing=false,this.shapeType=c.Filled,this.color=new T.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new T.Vector2,d>10920)throw new Error("Can't have more than 10920 triangles per batch: "+d);this.context=u instanceof r.ManagedWebGLRenderingContext?u:new r.ManagedWebGLRenderingContext(u),this.mesh=new r.Mesh(u,[new r.Position2Attribute,new r.ColorAttribute],d,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA;}return n.prototype.begin=function(u){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=u,this.vertexIndex=0,this.isDrawing=true;var d=this.context.gl;d.enable(d.BLEND),d.blendFunc(this.srcBlend,this.dstBlend);},n.prototype.setBlendMode=function(u,d){var M=this.context.gl;this.srcBlend=u,this.dstBlend=d,this.isDrawing&&(this.flush(),M.blendFunc(this.srcBlend,this.dstBlend));},n.prototype.setColor=function(u){this.color.setFromColor(u);},n.prototype.setColorWith=function(u,d,M,S){this.color.set(u,d,M,S);},n.prototype.point=function(u,d,M){M===void 0&&(M=null),this.check(c.Point,1),M===null&&(M=this.color),this.vertex(u,d,M);},n.prototype.line=function(u,d,M,S,V){V===void 0&&(V=null),this.check(c.Line,2);this.mesh.getVertices();this.vertexIndex;V===null&&(V=this.color),this.vertex(u,d,V),this.vertex(M,S,V);},n.prototype.triangle=function(u,d,M,S,V,I,D,k,E,X){k===void 0&&(k=null),E===void 0&&(E=null),X===void 0&&(X=null),this.check(u?c.Filled:c.Line,3);this.mesh.getVertices();this.vertexIndex;k===null&&(k=this.color),E===null&&(E=this.color),X===null&&(X=this.color),u?(this.vertex(d,M,k),this.vertex(S,V,E),this.vertex(I,D,X)):(this.vertex(d,M,k),this.vertex(S,V,E),this.vertex(S,V,k),this.vertex(I,D,E),this.vertex(I,D,k),this.vertex(d,M,E));},n.prototype.quad=function(u,d,M,S,V,I,D,k,E,X,z,Q,st){X===void 0&&(X=null),z===void 0&&(z=null),Q===void 0&&(Q=null),st===void 0&&(st=null),this.check(u?c.Filled:c.Line,3);this.mesh.getVertices();this.vertexIndex;X===null&&(X=this.color),z===null&&(z=this.color),Q===null&&(Q=this.color),st===null&&(st=this.color),u?(this.vertex(d,M,X),this.vertex(S,V,z),this.vertex(I,D,Q),this.vertex(I,D,Q),this.vertex(k,E,st),this.vertex(d,M,X)):(this.vertex(d,M,X),this.vertex(S,V,z),this.vertex(S,V,z),this.vertex(I,D,Q),this.vertex(I,D,Q),this.vertex(k,E,st),this.vertex(k,E,st),this.vertex(d,M,X));},n.prototype.rect=function(u,d,M,S,V,I){I===void 0&&(I=null),this.quad(u,d,M,d+S,M,d+S,M+V,d,M+V,I,I,I,I);},n.prototype.rectLine=function(u,d,M,S,V,I,D){D===void 0&&(D=null),this.check(u?c.Filled:c.Line,8),D===null&&(D=this.color);var k=this.tmp.set(V-M,d-S);k.normalize(),I*=.5;var E=k.x*I,X=k.y*I;u?(this.vertex(d+E,M+X,D),this.vertex(d-E,M-X,D),this.vertex(S+E,V+X,D),this.vertex(S-E,V-X,D),this.vertex(S+E,V+X,D),this.vertex(d-E,M-X,D)):(this.vertex(d+E,M+X,D),this.vertex(d-E,M-X,D),this.vertex(S+E,V+X,D),this.vertex(S-E,V-X,D),this.vertex(S+E,V+X,D),this.vertex(d+E,M+X,D),this.vertex(S-E,V-X,D),this.vertex(d-E,M-X,D));},n.prototype.x=function(u,d,M){this.line(u-M,d-M,u+M,d+M),this.line(u-M,d+M,u+M,d-M);},n.prototype.polygon=function(u,d,M,S){if(S===void 0&&(S=null),M<3)throw new Error("Polygon must contain at least 3 vertices");this.check(c.Line,2*M),S===null&&(S=this.color);this.mesh.getVertices();this.vertexIndex;M<<=1;for(var D=u[d<<=1],k=u[d+1],E=d+M,X=d,z=d+M-2;X<z;X+=2){var Q=u[X],st=u[X+1],ut=0,nt=0;X+2>=E?(ut=D,nt=k):(ut=u[X+2],nt=u[X+3]),this.vertex(Q,st,S),this.vertex(ut,nt,S);}},n.prototype.circle=function(u,d,M,S,V,I){if(V===void 0&&(V=null),I===void 0&&(I=0),I===0&&(I=Math.max(1,6*T.MathUtils.cbrt(S)|0)),I<=0)throw new Error("segments must be > 0.");V===null&&(V=this.color);var D=2*T.MathUtils.PI/I,k=Math.cos(D),E=Math.sin(D),X=S,z=0;if(u){this.check(c.Filled,3*I+3),I--;for(var Q=0;Q<I;Q++){this.vertex(d,M,V),this.vertex(d+X,M+z,V);var st=X;X=k*X-E*z,z=E*st+k*z,this.vertex(d+X,M+z,V);}this.vertex(d,M,V),this.vertex(d+X,M+z,V);}else {this.check(c.Line,2*I+2);for(var Q=0;Q<I;Q++){this.vertex(d+X,M+z,V);var ut=X;X=k*X-E*z,z=E*ut+k*z,this.vertex(d+X,M+z,V);}this.vertex(d+X,M+z,V);}X=S,z=0,this.vertex(d+X,M+z,V);},n.prototype.curve=function(u,d,M,S,V,I,D,k,E,X){X===void 0&&(X=null),this.check(c.Line,2*E+2),X===null&&(X=this.color);for(var z=1/E,Q=z*z,st=z*z*z,ut=3*z,nt=3*Q,ot=6*Q,it=6*st,W=u-2*M+V,et=d-2*S+I,ft=3*(M-V)-u+D,at=3*(S-I)-d+k,Ct=u,dt=d,mt=(M-u)*ut+W*nt+ft*st,kt=(S-d)*ut+et*nt+at*st,ht=W*ot+ft*it,$=et*ot+at*it,ct=ft*it,wt=at*it;E-- >0;)this.vertex(Ct,dt,X),Ct+=mt,dt+=kt,mt+=ht,kt+=$,ht+=ct,$+=wt,this.vertex(Ct,dt,X);this.vertex(Ct,dt,X),this.vertex(D,k,X);},n.prototype.vertex=function(u,d,M){var S=this.vertexIndex,V=this.mesh.getVertices();V[S++]=u,V[S++]=d,V[S++]=M.r,V[S++]=M.g,V[S++]=M.b,V[S++]=M.a,this.vertexIndex=S;},n.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=false;},n.prototype.flush=function(){this.vertexIndex!=0&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0);},n.prototype.check=function(u,d){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==u){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<d))return;this.flush();}else this.flush(),this.shapeType=u;},n.prototype.dispose=function(){this.mesh.dispose();},n})(),c;r.ShapeRenderer=v,(function(n){n[n.Point=0]="Point",n[n.Line=1]="Line",n[n.Filled=4]="Filled";})(c=r.ShapeType||(r.ShapeType={}));})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function c(n){this.boneLineColor=new T.Color(1,0,0,1),this.boneOriginColor=new T.Color(0,1,0,1),this.attachmentLineColor=new T.Color(0,0,1,.5),this.triangleLineColor=new T.Color(1,.64,0,.5),this.pathColor=new T.Color().setFromString("FF7F00"),this.clipColor=new T.Color(.8,0,0,2),this.aabbColor=new T.Color(0,1,0,.5),this.drawBones=true,this.drawRegionAttachments=true,this.drawBoundingBoxes=true,this.drawMeshHull=true,this.drawMeshTriangles=true,this.drawPaths=true,this.drawSkeletonXY=false,this.drawClipping=true,this.premultipliedAlpha=false,this.scale=1,this.boneWidth=2,this.bounds=new T.SkeletonBounds,this.temp=new Array,this.vertices=T.Utils.newFloatArray(2048),this.context=n instanceof r.ManagedWebGLRenderingContext?n:new r.ManagedWebGLRenderingContext(n);}return c.prototype.draw=function(n,u,d){d===void 0&&(d=null);var M=u.x,S=u.y,V=this.context.gl,I=this.premultipliedAlpha?V.ONE:V.SRC_ALPHA;n.setBlendMode(I,V.ONE_MINUS_SRC_ALPHA);var D=u.bones;if(this.drawBones){n.setColor(this.boneLineColor);for(var k=0,E=D.length;k<E;k++){var X=D[k];if(!(d&&d.indexOf(X.data.name)>-1)&&X.parent!=null){var z=M+X.data.length*X.a+X.worldX,Q=S+X.data.length*X.c+X.worldY;n.rectLine(true,M+X.worldX,S+X.worldY,z,Q,this.boneWidth*this.scale);}}this.drawSkeletonXY&&n.x(skeletonX,S,4*this.scale);}if(this.drawRegionAttachments){n.setColor(this.attachmentLineColor);for(var st,k=0,E=(st=u.slots).length;k<E;k++){var ut,nt;if((nt=(ut=st[k]).getAttachment())instanceof T.RegionAttachment){var ot=nt,it=this.vertices;ot.computeWorldVertices(ut.bone,it,0,2),n.line(it[0],it[1],it[2],it[3]),n.line(it[2],it[3],it[4],it[5]),n.line(it[4],it[5],it[6],it[7]),n.line(it[6],it[7],it[0],it[1]);}}}if(this.drawMeshHull||this.drawMeshTriangles)for(var st,k=0,E=(st=u.slots).length;k<E;k++){var ut,nt;if((ut=st[k]).bone.active&&(nt=ut.getAttachment())instanceof T.MeshAttachment){var W=nt,it=this.vertices;W.computeWorldVertices(ut,0,W.worldVerticesLength,it,0,2);var et=W.triangles,ft=W.hullLength;if(this.drawMeshTriangles){n.setColor(this.triangleLineColor);for(var at=0,Ct=et.length;at<Ct;at+=3){var dt=2*et[at],mt=2*et[at+1],kt=2*et[at+2];n.triangle(false,it[dt],it[dt+1],it[mt],it[mt+1],it[kt],it[kt+1]);}}if(this.drawMeshHull&&ft>0){n.setColor(this.attachmentLineColor);for(var ht=it[(ft=2*(ft>>1))-2],$=it[ft-1],at=0,Ct=ft;at<Ct;at+=2){var z=it[at],Q=it[at+1];n.line(z,Q,ht,$),ht=z,$=Q;}}}}if(this.drawBoundingBoxes){var ct=this.bounds;ct.update(skeleton,true),n.setColor(this.aabbColor),n.rect(false,ct.minX,ct.minY,ct.getWidth(),ct.getHeight());for(var wt=ct.polygons,yt=ct.boundingBoxes,k=0,E=wt.length;k<E;k++){var Xt=wt[k];n.setColor(yt[k].color),n.polygon(Xt,0,Xt.length);}}if(this.drawPaths)for(var st,k=0,E=(st=u.slots).length;k<E;k++){var ut,nt;if((ut=st[k]).bone.active&&(nt=ut.getAttachment())instanceof T.PathAttachment){var Dt=nt,Ct=Dt.worldVerticesLength,Lt=this.temp=T.Utils.setArraySize(this.temp,Ct,0);Dt.computeWorldVertices(ut,0,Ct,Lt,0,2);var Bt=this.pathColor,zt=Lt[2],Yt=Lt[3],Tt=0,bt=0;if(Dt.closed){n.setColor(Bt);var _t=Lt[0],se=Lt[1],Kt=Lt[Ct-2],De=Lt[Ct-1];Tt=Lt[Ct-4],bt=Lt[Ct-3],n.curve(zt,Yt,_t,se,Kt,De,Tt,bt,32),n.setColor(c.LIGHT_GRAY),n.line(zt,Yt,_t,se),n.line(Tt,bt,Kt,De);}Ct-=4;for(var at=4;at<Ct;at+=6){var _t=Lt[at],se=Lt[at+1],Kt=Lt[at+2],De=Lt[at+3];Tt=Lt[at+4],bt=Lt[at+5],n.setColor(Bt),n.curve(zt,Yt,_t,se,Kt,De,Tt,bt,32),n.setColor(c.LIGHT_GRAY),n.line(zt,Yt,_t,se),n.line(Tt,bt,Kt,De),zt=Tt,Yt=bt;}}}if(this.drawBones){n.setColor(this.boneOriginColor);for(var k=0,E=D.length;k<E;k++){var X=D[k];d&&d.indexOf(X.data.name)>-1||n.circle(true,M+X.worldX,S+X.worldY,3*this.scale,c.GREEN,8);}}if(this.drawClipping){var st=u.slots;n.setColor(this.clipColor);for(var k=0,E=st.length;k<E;k++){var ut,nt;if((ut=st[k]).bone.active&&(nt=ut.getAttachment())instanceof T.ClippingAttachment){var $e=nt,Ct=$e.worldVerticesLength,Lt=this.temp=T.Utils.setArraySize(this.temp,Ct,0);$e.computeWorldVertices(ut,0,Ct,Lt,0,2);for(var Te=0,Qe=Lt.length;Te<Qe;Te+=2){var z=Lt[Te],Q=Lt[Te+1],Tt=Lt[(Te+2)%Lt.length],bt=Lt[(Te+3)%Lt.length];n.line(z,Q,Tt,bt);}}}}},c.prototype.dispose=function(){},c.LIGHT_GRAY=new T.Color(.7529411764705882,.7529411764705882,.7529411764705882,1),c.GREEN=new T.Color(0,1,0,1),c})();r.SkeletonDebugRenderer=v;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function n(u,d,M){this.vertices=u,this.numVertices=d,this.numFloats=M;}return n})(),c=(function(){function n(u,d){d===void 0&&(d=true),this.premultipliedAlpha=false,this.vertexEffect=null,this.tempColor=new T.Color,this.tempColor2=new T.Color,this.vertexSize=8,this.twoColorTint=false,this.renderable=new v(null,0,0),this.clipper=new T.SkeletonClipping,this.temp=new T.Vector2,this.temp2=new T.Vector2,this.temp3=new T.Color,this.temp4=new T.Color,this.twoColorTint=d,d&&(this.vertexSize+=4),this.vertices=T.Utils.newFloatArray(1024*this.vertexSize);}return n.prototype.draw=function(u,d,M,S){M===void 0&&(M=-1),S===void 0&&(S=-1);var V=this.clipper,I=this.premultipliedAlpha,D=this.twoColorTint,k=null,E=this.temp,X=this.temp2,z=this.temp3,Q=this.temp4,st=this.renderable,ut=null,nt=null,ot=d.drawOrder,it=null,W=d.color,et=D?12:8,ft=false;M==-1&&(ft=true);for(var at=0,Ct=ot.length;at<Ct;at++){var dt=V.isClipping()?2:et,mt=ot[at];if(mt.bone.active)if(M>=0&&M==mt.data.index&&(ft=true),ft){S>=0&&S==mt.data.index&&(ft=false);var kt=mt.getAttachment(),ht=null;if(kt instanceof T.RegionAttachment){var $=kt;st.vertices=this.vertices,st.numVertices=4,st.numFloats=dt<<2,$.computeWorldVertices(mt.bone,st.vertices,0,dt),nt=n.QUAD_TRIANGLES,ut=$.uvs,ht=$.region.renderObject.texture,it=$.color;}else {if(!(kt instanceof T.MeshAttachment)){if(kt instanceof T.ClippingAttachment){var ct=kt;V.clipStart(mt,ct);continue}V.clipEndWithSlot(mt);continue}var wt=kt;st.vertices=this.vertices,st.numVertices=wt.worldVerticesLength>>1,st.numFloats=st.numVertices*dt,st.numFloats>st.vertices.length&&(st.vertices=this.vertices=T.Utils.newFloatArray(st.numFloats)),wt.computeWorldVertices(mt,0,wt.worldVerticesLength,st.vertices,0,dt),nt=wt.triangles,ht=wt.region.renderObject.texture,ut=wt.uvs,it=wt.color;}if(ht!=null){var yt=mt.color,Xt=this.tempColor;Xt.r=W.r*yt.r*it.r,Xt.g=W.g*yt.g*it.g,Xt.b=W.b*yt.b*it.b,Xt.a=W.a*yt.a*it.a,I&&(Xt.r*=Xt.a,Xt.g*=Xt.a,Xt.b*=Xt.a);var Dt=this.tempColor2;mt.darkColor==null?Dt.set(0,0,0,1):(I?(Dt.r=mt.darkColor.r*Xt.a,Dt.g=mt.darkColor.g*Xt.a,Dt.b=mt.darkColor.b*Xt.a):Dt.setFromColor(mt.darkColor),Dt.a=I?1:0);var Lt=mt.data.blendMode;if(Lt!=k&&(k=Lt,u.setBlendMode(r.WebGLBlendModeConverter.getSourceGLBlendMode(k,I),r.WebGLBlendModeConverter.getDestGLBlendMode(k))),V.isClipping()){V.clipTriangles(st.vertices,st.numFloats,nt,nt.length,ut,Xt,Dt,D);var Bt=new Float32Array(V.clippedVertices),zt=V.clippedTriangles;if(this.vertexEffect!=null){var Yt=this.vertexEffect,Tt=Bt;if(D)for(var bt=0,_t=Bt.length;bt<_t;bt+=et)E.x=Tt[bt],E.y=Tt[bt+1],z.set(Tt[bt+2],Tt[bt+3],Tt[bt+4],Tt[bt+5]),X.x=Tt[bt+6],X.y=Tt[bt+7],Q.set(Tt[bt+8],Tt[bt+9],Tt[bt+10],Tt[bt+11]),Yt.transform(E,X,z,Q),Tt[bt]=E.x,Tt[bt+1]=E.y,Tt[bt+2]=z.r,Tt[bt+3]=z.g,Tt[bt+4]=z.b,Tt[bt+5]=z.a,Tt[bt+6]=X.x,Tt[bt+7]=X.y,Tt[bt+8]=Q.r,Tt[bt+9]=Q.g,Tt[bt+10]=Q.b,Tt[bt+11]=Q.a;else for(var bt=0,se=Bt.length;bt<se;bt+=et)E.x=Tt[bt],E.y=Tt[bt+1],z.set(Tt[bt+2],Tt[bt+3],Tt[bt+4],Tt[bt+5]),X.x=Tt[bt+6],X.y=Tt[bt+7],Q.set(0,0,0,0),Yt.transform(E,X,z,Q),Tt[bt]=E.x,Tt[bt+1]=E.y,Tt[bt+2]=z.r,Tt[bt+3]=z.g,Tt[bt+4]=z.b,Tt[bt+5]=z.a,Tt[bt+6]=X.x,Tt[bt+7]=X.y;}u.draw(ht,Bt,zt);}else {var Tt=st.vertices;if(this.vertexEffect!=null){var Yt=this.vertexEffect;if(D)for(var bt=0,Kt=0,De=st.numFloats;bt<De;bt+=et,Kt+=2)E.x=Tt[bt],E.y=Tt[bt+1],X.x=ut[Kt],X.y=ut[Kt+1],z.setFromColor(Xt),Q.setFromColor(Dt),Yt.transform(E,X,z,Q),Tt[bt]=E.x,Tt[bt+1]=E.y,Tt[bt+2]=z.r,Tt[bt+3]=z.g,Tt[bt+4]=z.b,Tt[bt+5]=z.a,Tt[bt+6]=X.x,Tt[bt+7]=X.y,Tt[bt+8]=Q.r,Tt[bt+9]=Q.g,Tt[bt+10]=Q.b,Tt[bt+11]=Q.a;else for(var bt=0,Kt=0,$e=st.numFloats;bt<$e;bt+=et,Kt+=2)E.x=Tt[bt],E.y=Tt[bt+1],X.x=ut[Kt],X.y=ut[Kt+1],z.setFromColor(Xt),Q.set(0,0,0,0),Yt.transform(E,X,z,Q),Tt[bt]=E.x,Tt[bt+1]=E.y,Tt[bt+2]=z.r,Tt[bt+3]=z.g,Tt[bt+4]=z.b,Tt[bt+5]=z.a,Tt[bt+6]=X.x,Tt[bt+7]=X.y;}else if(D)for(var bt=2,Kt=0,Te=st.numFloats;bt<Te;bt+=et,Kt+=2)Tt[bt]=Xt.r,Tt[bt+1]=Xt.g,Tt[bt+2]=Xt.b,Tt[bt+3]=Xt.a,Tt[bt+4]=ut[Kt],Tt[bt+5]=ut[Kt+1],Tt[bt+6]=Dt.r,Tt[bt+7]=Dt.g,Tt[bt+8]=Dt.b,Tt[bt+9]=Dt.a;else for(var bt=2,Kt=0,Qe=st.numFloats;bt<Qe;bt+=et,Kt+=2)Tt[bt]=Xt.r,Tt[bt+1]=Xt.g,Tt[bt+2]=Xt.b,Tt[bt+3]=Xt.a,Tt[bt+4]=ut[Kt],Tt[bt+5]=ut[Kt+1];var ss=st.vertices.subarray(0,st.numFloats);u.draw(ht,ss,nt);}}V.clipEndWithSlot(mt);}else V.clipEndWithSlot(mt);else V.clipEndWithSlot(mt);}V.clipEnd();},n.QUAD_TRIANGLES=[0,1,2,2,3,0],n})();r.SkeletonRenderer=c;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function c(n,u,d){n===void 0&&(n=0),u===void 0&&(u=0),d===void 0&&(d=0),this.x=0,this.y=0,this.z=0,this.x=n,this.y=u,this.z=d;}return c.prototype.setFrom=function(n){return this.x=n.x,this.y=n.y,this.z=n.z,this},c.prototype.set=function(n,u,d){return this.x=n,this.y=u,this.z=d,this},c.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this},c.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this},c.prototype.scale=function(n){return this.x*=n,this.y*=n,this.z*=n,this},c.prototype.normalize=function(){var n=this.length();return n==0?this:(n=1/n,this.x*=n,this.y*=n,this.z*=n,this)},c.prototype.cross=function(n){return this.set(this.y*n.z-this.z*n.y,this.z*n.x-this.x*n.z,this.x*n.y-this.y*n.x)},c.prototype.multiply=function(n){var u=n.values;return this.set(this.x*u[r.M00]+this.y*u[r.M01]+this.z*u[r.M02]+u[r.M03],this.x*u[r.M10]+this.y*u[r.M11]+this.z*u[r.M12]+u[r.M13],this.x*u[r.M20]+this.y*u[r.M21]+this.z*u[r.M22]+u[r.M23])},c.prototype.project=function(n){var u=n.values,d=1/(this.x*u[r.M30]+this.y*u[r.M31]+this.z*u[r.M32]+u[r.M33]);return this.set((this.x*u[r.M00]+this.y*u[r.M01]+this.z*u[r.M02]+u[r.M03])*d,(this.x*u[r.M10]+this.y*u[r.M11]+this.z*u[r.M12]+u[r.M13])*d,(this.x*u[r.M20]+this.y*u[r.M21]+this.z*u[r.M22]+u[r.M23])*d)},c.prototype.dot=function(n){return this.x*n.x+this.y*n.y+this.z*n.z},c.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},c.prototype.distance=function(n){var u=n.x-this.x,d=n.y-this.y,M=n.z-this.z;return Math.sqrt(u*u+d*d+M*M)},c})();r.Vector3=v;})(T.webgl||(T.webgl={}));})(Rt||(Rt={})),(function(T){(function(r){var v=(function(){function n(u,d){d===void 0&&(d={alpha:"true"}),this.restorables=new Array,u instanceof WebGLRenderingContext||u instanceof WebGL2RenderingContext?(this.gl=u,this.canvas=this.gl.canvas):this.setupCanvas(u,d);}return n.prototype.setupCanvas=function(u,d){var M=this;this.gl=u.getContext("webgl2",d)||u.getContext("webgl",d),this.canvas=u,u.addEventListener("webglcontextlost",(function(S){S&&S.preventDefault();})),u.addEventListener("webglcontextrestored",(function(S){for(var V=0,I=M.restorables.length;V<I;V++)M.restorables[V].restore();}));},n.prototype.addRestorable=function(u){this.restorables.push(u);},n.prototype.removeRestorable=function(u){var d=this.restorables.indexOf(u);d>-1&&this.restorables.splice(d,1);},n})();r.ManagedWebGLRenderingContext=v;var c=(function(){function n(){}return n.getDestGLBlendMode=function(u){switch(u){case T.BlendMode.Normal:return n.ONE_MINUS_SRC_ALPHA;case T.BlendMode.Additive:return n.ONE;case T.BlendMode.Multiply:case T.BlendMode.Screen:return n.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+u)}},n.getSourceGLBlendMode=function(u,d){switch(d===void 0&&(d=false),u){case T.BlendMode.Normal:case T.BlendMode.Additive:return d?n.ONE:n.SRC_ALPHA;case T.BlendMode.Multiply:return n.DST_COLOR;case T.BlendMode.Screen:return n.ONE;default:throw new Error("Unknown blend mode: "+u)}},n.ZERO=0,n.ONE=1,n.SRC_COLOR=768,n.ONE_MINUS_SRC_COLOR=769,n.SRC_ALPHA=770,n.ONE_MINUS_SRC_ALPHA=771,n.DST_ALPHA=772,n.ONE_MINUS_DST_ALPHA=773,n.DST_COLOR=774,n})();r.WebGLBlendModeConverter=c;})(T.webgl||(T.webgl={}));})(Rt||(Rt={}));Object.assign(Rt,Rt.webgl);(()=>{var T=Object.defineProperty,f=t=>T(t,"__esModule",{value:true}),r=(t,l)=>{f(t);for(var h in l)T(t,h,{get:l[h],enumerable:true});},v={};r(v,{AlphaTimeline:()=>bt,Animation:()=>W,AnimationState:()=>cs,AnimationStateAdapter:()=>Us,AnimationStateData:()=>jr,AssetManager:()=>Vs,AssetManagerBase:()=>Ji,AtlasAttachmentLoader:()=>Hr,Attachment:()=>nt,AttachmentTimeline:()=>Kt,BinaryInput:()=>_r,BlendMode:()=>Ms,Bone:()=>br,BoneData:()=>Mr,BoundingBoxAttachment:()=>Ti,CURRENT:()=>Zi,CameraController:()=>we,ClippingAttachment:()=>fi,Color:()=>d,Color2Attribute:()=>Fr,ColorAttribute:()=>oi,ConstraintData:()=>Ri,CurveTimeline:()=>dt,CurveTimeline1:()=>mt,CurveTimeline2:()=>kt,DebugUtils:()=>X,DeformTimeline:()=>De,Downloader:()=>li,DrawOrderTimeline:()=>ss,Event:()=>ai,EventData:()=>_i,EventQueue:()=>ws,EventTimeline:()=>Te,EventType:()=>is,FIRST:()=>Es,FakeTexture:()=>Hi,GLTexture:()=>Li,HOLD_FIRST:()=>ks,HOLD_MIX:()=>Ws,HOLD_SUBSEQUENT:()=>ys,IkConstraint:()=>mi,IkConstraintData:()=>Ar,IkConstraintTimeline:()=>us,Input:()=>ce,IntSet:()=>c,Interpolation:()=>V,JitterEffect:()=>Pn,LoadingScreen:()=>an,M00:()=>ae,M01:()=>ue,M02:()=>fe,M03:()=>me,M10:()=>ve,M11:()=>Qt,M12:()=>oe,M13:()=>Gt,M20:()=>gt,M21:()=>Jt,M22:()=>ee,M23:()=>le,M30:()=>$t,M31:()=>Ot,M32:()=>Wt,M33:()=>Nt,ManagedWebGLRenderingContext:()=>Is,MathUtils:()=>S,Matrix4:()=>te,Mesh:()=>ie,MeshAttachment:()=>zs,MixBlend:()=>et,MixDirection:()=>ft,OrthoCamera:()=>he,PathAttachment:()=>Ps,PathConstraint:()=>hi,PathConstraintData:()=>ki,PathConstraintMixTimeline:()=>os,PathConstraintPositionTimeline:()=>as,PathConstraintSpacingTimeline:()=>xs,PointAttachment:()=>Ii,PolygonBatcher:()=>nr,Pool:()=>z,Position2Attribute:()=>ge,Position3Attribute:()=>Ie,PositionMode:()=>Ys,Pow:()=>I,PowOut:()=>D,RGB2Timeline:()=>se,RGBA2Timeline:()=>_t,RGBATimeline:()=>Yt,RGBTimeline:()=>Tt,RegionAttachment:()=>qe,ResizeMode:()=>vi,RotateMode:()=>Ls,RotateTimeline:()=>ht,SETUP:()=>Ci,SUBSEQUENT:()=>Ss,ScaleTimeline:()=>yt,ScaleXTimeline:()=>Xt,ScaleYTimeline:()=>Dt,SceneRenderer:()=>Js,Shader:()=>jt,ShapeRenderer:()=>Pr,ShapeType:()=>rs,ShearTimeline:()=>Lt,ShearXTimeline:()=>Bt,ShearYTimeline:()=>zt,Skeleton:()=>Sr,SkeletonBinary:()=>Jr,SkeletonBounds:()=>tn,SkeletonClipping:()=>sr,SkeletonData:()=>$i,SkeletonDebugRenderer:()=>ti,SkeletonJson:()=>Yn,SkeletonRenderer:()=>Xi,Skin:()=>gi,SkinEntry:()=>Yi,Slot:()=>Qi,SlotData:()=>Fi,SpacingMode:()=>ms,SpineCanvas:()=>lr,StringSet:()=>n,SwirlEffect:()=>sn,TexCoordAttribute:()=>pe,Texture:()=>pr,TextureAtlas:()=>xr,TextureAtlasPage:()=>wr,TextureAtlasRegion:()=>yr,TextureFilter:()=>Cs,TextureRegion:()=>ji,TextureWrap:()=>$s,TimeKeeper:()=>st,Timeline:()=>Ct,Touch:()=>de,TrackEntry:()=>ts,TransformConstraint:()=>Ki,TransformConstraintData:()=>Pi,TransformConstraintTimeline:()=>hs,TransformMode:()=>bs,TranslateTimeline:()=>$,TranslateXTimeline:()=>ct,TranslateYTimeline:()=>wt,Triangulator:()=>Rs,Utils:()=>E,Vector2:()=>Q,Vector3:()=>gs,VertexAttachment:()=>it,VertexAttribute:()=>re,VertexAttributeType:()=>Hs,WebGLBlendModeConverter:()=>rr,WindowedMean:()=>ut});var c=class{constructor(){this.array=new Array;}add(t){let l=this.contains(t);return this.array[t|0]=t|0,!l}contains(t){return this.array[t|0]!=null}remove(t){this.array[t|0]=void 0;}clear(){this.array.length=0;}},n=class{constructor(){this.entries={},this.size=0;}add(t){let l=this.entries[t];return this.entries[t]=true,l?false:(this.size++,true)}addAll(t){let l=this.size;for(var h=0,x=t.length;h<x;h++)this.add(t[h]);return l!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0;}},u=class{constructor(t=0,l=0,h=0,x=0){this.r=t,this.g=l,this.b=h,this.a=x;}set(t,l,h,x){return this.r=t,this.g=l,this.b=h,this.a=x,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this}add(t,l,h,x){return this.r+=t,this.g+=l,this.b+=h,this.a+=x,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,l){t.r=((l&4278190080)>>>24)/255,t.g=((l&16711680)>>>16)/255,t.b=((l&65280)>>>8)/255,t.a=(l&255)/255;}static rgb888ToColor(t,l){t.r=((l&16711680)>>>16)/255,t.g=((l&65280)>>>8)/255,t.b=(l&255)/255;}static fromString(t){return new u().setFromString(t)}},d=u;d.WHITE=new u(1,1,1,1),d.RED=new u(1,0,0,1),d.GREEN=new u(0,1,0,1),d.BLUE=new u(0,0,1,1),d.MAGENTA=new u(1,0,1,1);var M=class{static clamp(t,l,h){return t<l?l:t>h?h:t}static cosDeg(t){return Math.cos(t*M.degRad)}static sinDeg(t){return Math.sin(t*M.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let l=Math.pow(Math.abs(t),.3333333333333333);return t<0?-l:l}static randomTriangular(t,l){return M.randomTriangularWith(t,l,(t+l)*.5)}static randomTriangularWith(t,l,h){let x=Math.random(),A=l-t;return x<=(h-t)/A?t+Math.sqrt(x*A*(h-t)):l-Math.sqrt((1-x)*A*(l-h))}static isPowerOfTwo(t){return t&&(t&t-1)==0}},S=M;S.PI=3.1415927,S.PI2=M.PI*2,S.radiansToDegrees=180/M.PI,S.radDeg=M.radiansToDegrees,S.degreesToRadians=M.PI/180,S.degRad=M.degreesToRadians;var V=class{apply(t,l,h){return t+(l-t)*this.applyInternal(h)}},I=class extends V{constructor(t){super(),this.power=2,this.power=t;}applyInternal(t){return t<=.5?Math.pow(t*2,this.power)/2:Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1}},D=class extends I{constructor(t){super(t);}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},k=class{static arrayCopy(t,l,h,x,A){for(let U=l,R=x;U<l+A;U++,R++)h[R]=t[U];}static arrayFill(t,l,h,x){for(let A=l;A<h;A++)t[A]=x;}static setArraySize(t,l,h=0){let x=t.length;if(x==l)return t;if(t.length=l,x<l)for(let A=x;A<l;A++)t[A]=h;return t}static ensureArrayCapacity(t,l,h=0){return t.length>=l?t:k.setArraySize(t,l,h)}static newArray(t,l){let h=new Array(t);for(let x=0;x<t;x++)h[x]=l;return h}static newFloatArray(t){if(k.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let l=new Array(t);for(let h=0;h<l.length;h++)l[h]=0;return l}}static newShortArray(t){if(k.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let l=new Array(t);for(let h=0;h<l.length;h++)l[h]=0;return l}}static toFloatArray(t){return k.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return k.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,l){}static contains(t,l,h=true){for(var x=0;x<t.length;x++)if(t[x]==l)return  true;return  false}static enumValue(t,l){return t[l[0].toUpperCase()+l.slice(1)]}},E=k;E.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";var X=class{static logBones(t){for(let l=0;l<t.bones.length;l++){let h=t.bones[l];console.log(h.data.name+", "+h.a+", "+h.b+", "+h.c+", "+h.d+", "+h.worldX+", "+h.worldY);}}},z=class{constructor(t){this.items=new Array,this.instantiator=t;}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t);}freeAll(t){for(let l=0;l<t.length;l++)this.free(t[l]);}clear(){this.items.length=0;}},Q=class{constructor(t=0,l=0){this.x=t,this.y=l;}set(t,l){return this.x=t,this.y=l,this}length(){let t=this.x,l=this.y;return Math.sqrt(t*t+l*l)}normalize(){let t=this.length();return t!=0&&(this.x/=t,this.y/=t),this}},st=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0;}update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0);}},ut=class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=true,this.values=new Array(t);}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=true;}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let l=0;l<this.values.length;l++)t+=this.values[l];this.mean=t/this.values.length,this.dirty=false;}return this.mean}return 0}},nt=class{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t;}},ot=class extends nt{constructor(t){super(t),this.id=ot.nextID++,this.bones=null,this.vertices=null,this.worldVerticesLength=0,this.deformAttachment=this;}computeWorldVertices(t,l,h,x,A,U){h=A+(h>>1)*U;let R=t.bone.skeleton,y=t.deform,P=this.vertices,Y=this.bones;if(!Y){y.length>0&&(P=y);let tt=t.bone,s=tt.worldX,e=tt.worldY,i=tt.a,o=tt.b,a=tt.c,p=tt.d;for(let m=l,g=A;g<h;m+=2,g+=U){let w=P[m],b=P[m+1];x[g]=w*i+b*o+s,x[g+1]=w*a+b*p+e;}return}let B=0,G=0;for(let tt=0;tt<l;tt+=2){let s=Y[B];B+=s+1,G+=s;}let J=R.bones;if(y.length==0)for(let tt=A,s=G*3;tt<h;tt+=U){let e=0,i=0,o=Y[B++];for(o+=B;B<o;B++,s+=3){let a=J[Y[B]],p=P[s],m=P[s+1],g=P[s+2];e+=(p*a.a+m*a.b+a.worldX)*g,i+=(p*a.c+m*a.d+a.worldY)*g;}x[tt]=e,x[tt+1]=i;}else {let tt=y;for(let s=A,e=G*3,i=G<<1;s<h;s+=U){let o=0,a=0,p=Y[B++];for(p+=B;B<p;B++,e+=3,i+=2){let m=J[Y[B]],g=P[e]+tt[i],w=P[e+1]+tt[i+1],b=P[e+2];o+=(g*m.a+w*m.b+m.worldX)*b,a+=(g*m.c+w*m.d+m.worldY)*b;}x[s]=o,x[s+1]=a;}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),E.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=E.newFloatArray(this.vertices.length),E.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment;}},it=ot;it.nextID=0;var W=class{constructor(t,l,h){if(this.timelines=null,this.timelineIds=null,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(l),this.duration=h;}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new n;for(var l=0;l<t.length;l++)this.timelineIds.addAll(t[l].getPropertyIds());}hasTimeline(t){for(let l=0;l<t.length;l++)if(this.timelineIds.contains(t[l]))return  true;return  false}apply(t,l,h,x,A,U,R,y){if(!t)throw new Error("skeleton cannot be null.");x&&this.duration!=0&&(h%=this.duration,l>0&&(l%=this.duration));let P=this.timelines;for(let Y=0,B=P.length;Y<B;Y++)P[Y].apply(t,l,h,A,U,R,y);}},et;(function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add";})(et||(et={}));var ft;(function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut";})(ft||(ft={}));var at={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18},Ct=class{constructor(t,l){this.propertyIds=null,this.frames=null,this.propertyIds=l,this.frames=E.newFloatArray(t*this.getFrameEntries());}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,l){let h=t.length;for(let x=1;x<h;x++)if(t[x]>l)return x-1;return h-1}static search(t,l,h){let x=t.length;for(let A=h;A<x;A+=h)if(t[A]>l)return A-h;return x-h}},dt=class extends Ct{constructor(t,l,h){super(t,h),this.curves=null,this.curves=E.newFloatArray(t+l*18),this.curves[t-1]=1;}setLinear(t){this.curves[t]=0;}setStepped(t){this.curves[t]=1;}shrink(t){let l=this.getFrameCount()+t*18;if(this.curves.length>l){let h=E.newFloatArray(l);E.arrayCopy(this.curves,0,h,0,l),this.curves=h;}}setBezier(t,l,h,x,A,U,R,y,P,Y,B){let G=this.curves,J=this.getFrameCount()+t*18;h==0&&(G[l]=2+J);let tt=(x-U*2+y)*.03,s=(A-R*2+P)*.03,e=((U-y)*3-x+Y)*.006,i=((R-P)*3-A+B)*.006,o=tt*2+e,a=s*2+i,p=(U-x)*.3+tt+e*.16666667,m=(R-A)*.3+s+i*.16666667,g=x+p,w=A+m;for(let b=J+18;J<b;J+=2)G[J]=g,G[J+1]=w,p+=o,m+=a,o+=e,a+=i,g+=p,w+=m;}getBezierValue(t,l,h,x){let A=this.curves;if(A[x]>t){let P=this.frames[l],Y=this.frames[l+h];return Y+(t-P)/(A[x]-P)*(A[x+1]-Y)}let U=x+18;for(x+=2;x<U;x+=2)if(A[x]>=t){let P=A[x-2],Y=A[x-1];return Y+(t-P)/(A[x]-P)*(A[x+1]-Y)}l+=this.getFrameEntries();let R=A[U-2],y=A[U-1];return y+(t-R)/(this.frames[l]-R)*(this.frames[l+h]-y)}},mt=class extends dt{constructor(t,l,h){super(t,l,[h]);}getFrameEntries(){return 2}setFrame(t,l,h){t<<=1,this.frames[t]=l,this.frames[t+1]=h;}getCurveValue(t){let l=this.frames,h=l.length-2;for(let A=2;A<=h;A+=2)if(l[A]>t){h=A-2;break}let x=this.curves[h>>1];switch(x){case 0:let A=l[h],U=l[h+1];return U+(t-A)/(l[h+2]-A)*(l[h+2+1]-U);case 1:return l[h+1]}return this.getBezierValue(t,h,1,x-2)}},kt=class extends dt{constructor(t,l,h,x){super(t,l,[h,x]);}getFrameEntries(){return 3}setFrame(t,l,h,x){t*=3,this.frames[t]=l,this.frames[t+1]=h,this.frames[t+2]=x;}},ht=class extends mt{constructor(t,l,h){super(t,l,at.rotate+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.rotation=y.data.rotation;return;case 1:y.rotation+=(y.data.rotation-y.rotation)*A;}return}let Y=this.getCurveValue(h);switch(U){case 0:y.rotation=y.data.rotation+Y*A;break;case 1:case 2:Y+=y.data.rotation-y.rotation;case 3:y.rotation+=Y*A;}}},$=class extends kt{constructor(t,l,h){super(t,l,at.x+"|"+h,at.y+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.x=y.data.x,y.y=y.data.y;return;case 1:y.x+=(y.data.x-y.x)*A,y.y+=(y.data.y-y.y)*A;}return}let Y=0,B=0,G=Ct.search(P,h,3),J=this.curves[G/3];switch(J){case 0:let tt=P[G];Y=P[G+1],B=P[G+2];let s=(h-tt)/(P[G+3]-tt);Y+=(P[G+3+1]-Y)*s,B+=(P[G+3+2]-B)*s;break;case 1:Y=P[G+1],B=P[G+2];break;default:Y=this.getBezierValue(h,G,1,J-2),B=this.getBezierValue(h,G,2,J+18-2);}switch(U){case 0:y.x=y.data.x+Y*A,y.y=y.data.y+B*A;break;case 1:case 2:y.x+=(y.data.x+Y-y.x)*A,y.y+=(y.data.y+B-y.y)*A;break;case 3:y.x+=Y*A,y.y+=B*A;}}},ct=class extends mt{constructor(t,l,h){super(t,l,at.x+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.x=y.data.x;return;case 1:y.x+=(y.data.x-y.x)*A;}return}let Y=this.getCurveValue(h);switch(U){case 0:y.x=y.data.x+Y*A;break;case 1:case 2:y.x+=(y.data.x+Y-y.x)*A;break;case 3:y.x+=Y*A;}}},wt=class extends mt{constructor(t,l,h){super(t,l,at.y+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.y=y.data.y;return;case 1:y.y+=(y.data.y-y.y)*A;}return}let Y=this.getCurveValue(h);switch(U){case 0:y.y=y.data.y+Y*A;break;case 1:case 2:y.y+=(y.data.y+Y-y.y)*A;break;case 3:y.y+=Y*A;}}},yt=class extends kt{constructor(t,l,h){super(t,l,at.scaleX+"|"+h,at.scaleY+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.scaleX=y.data.scaleX,y.scaleY=y.data.scaleY;return;case 1:y.scaleX+=(y.data.scaleX-y.scaleX)*A,y.scaleY+=(y.data.scaleY-y.scaleY)*A;}return}let Y,B,G=Ct.search(P,h,3),J=this.curves[G/3];switch(J){case 0:let tt=P[G];Y=P[G+1],B=P[G+2];let s=(h-tt)/(P[G+3]-tt);Y+=(P[G+3+1]-Y)*s,B+=(P[G+3+2]-B)*s;break;case 1:Y=P[G+1],B=P[G+2];break;default:Y=this.getBezierValue(h,G,1,J-2),B=this.getBezierValue(h,G,2,J+18-2);}if(Y*=y.data.scaleX,B*=y.data.scaleY,A==1)U==3?(y.scaleX+=Y-y.data.scaleX,y.scaleY+=B-y.data.scaleY):(y.scaleX=Y,y.scaleY=B);else {let tt=0,s=0;if(R==1)switch(U){case 0:tt=y.data.scaleX,s=y.data.scaleY,y.scaleX=tt+(Math.abs(Y)*S.signum(tt)-tt)*A,y.scaleY=s+(Math.abs(B)*S.signum(s)-s)*A;break;case 1:case 2:tt=y.scaleX,s=y.scaleY,y.scaleX=tt+(Math.abs(Y)*S.signum(tt)-tt)*A,y.scaleY=s+(Math.abs(B)*S.signum(s)-s)*A;break;case 3:y.scaleX+=(Y-y.data.scaleX)*A,y.scaleY+=(B-y.data.scaleY)*A;}else switch(U){case 0:tt=Math.abs(y.data.scaleX)*S.signum(Y),s=Math.abs(y.data.scaleY)*S.signum(B),y.scaleX=tt+(Y-tt)*A,y.scaleY=s+(B-s)*A;break;case 1:case 2:tt=Math.abs(y.scaleX)*S.signum(Y),s=Math.abs(y.scaleY)*S.signum(B),y.scaleX=tt+(Y-tt)*A,y.scaleY=s+(B-s)*A;break;case 3:y.scaleX+=(Y-y.data.scaleX)*A,y.scaleY+=(B-y.data.scaleY)*A;}}}},Xt=class extends mt{constructor(t,l,h){super(t,l,at.scaleX+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.scaleX=y.data.scaleX;return;case 1:y.scaleX+=(y.data.scaleX-y.scaleX)*A;}return}let Y=this.getCurveValue(h)*y.data.scaleX;if(A==1)U==3?y.scaleX+=Y-y.data.scaleX:y.scaleX=Y;else {let B=0;if(R==1)switch(U){case 0:B=y.data.scaleX,y.scaleX=B+(Math.abs(Y)*S.signum(B)-B)*A;break;case 1:case 2:B=y.scaleX,y.scaleX=B+(Math.abs(Y)*S.signum(B)-B)*A;break;case 3:y.scaleX+=(Y-y.data.scaleX)*A;}else switch(U){case 0:B=Math.abs(y.data.scaleX)*S.signum(Y),y.scaleX=B+(Y-B)*A;break;case 1:case 2:B=Math.abs(y.scaleX)*S.signum(Y),y.scaleX=B+(Y-B)*A;break;case 3:y.scaleX+=(Y-y.data.scaleX)*A;}}}},Dt=class extends mt{constructor(t,l,h){super(t,l,at.scaleY+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.scaleY=y.data.scaleY;return;case 1:y.scaleY+=(y.data.scaleY-y.scaleY)*A;}return}let Y=this.getCurveValue(h)*y.data.scaleY;if(A==1)U==3?y.scaleY+=Y-y.data.scaleY:y.scaleY=Y;else {let B=0;if(R==1)switch(U){case 0:B=y.data.scaleY,y.scaleY=B+(Math.abs(Y)*S.signum(B)-B)*A;break;case 1:case 2:B=y.scaleY,y.scaleY=B+(Math.abs(Y)*S.signum(B)-B)*A;break;case 3:y.scaleY+=(Y-y.data.scaleY)*A;}else switch(U){case 0:B=Math.abs(y.data.scaleY)*S.signum(Y),y.scaleY=B+(Y-B)*A;break;case 1:case 2:B=Math.abs(y.scaleY)*S.signum(Y),y.scaleY=B+(Y-B)*A;break;case 3:y.scaleY+=(Y-y.data.scaleY)*A;}}}},Lt=class extends kt{constructor(t,l,h){super(t,l,at.shearX+"|"+h,at.shearY+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.shearX=y.data.shearX,y.shearY=y.data.shearY;return;case 1:y.shearX+=(y.data.shearX-y.shearX)*A,y.shearY+=(y.data.shearY-y.shearY)*A;}return}let Y=0,B=0,G=Ct.search(P,h,3),J=this.curves[G/3];switch(J){case 0:let tt=P[G];Y=P[G+1],B=P[G+2];let s=(h-tt)/(P[G+3]-tt);Y+=(P[G+3+1]-Y)*s,B+=(P[G+3+2]-B)*s;break;case 1:Y=P[G+1],B=P[G+2];break;default:Y=this.getBezierValue(h,G,1,J-2),B=this.getBezierValue(h,G,2,J+18-2);}switch(U){case 0:y.shearX=y.data.shearX+Y*A,y.shearY=y.data.shearY+B*A;break;case 1:case 2:y.shearX+=(y.data.shearX+Y-y.shearX)*A,y.shearY+=(y.data.shearY+B-y.shearY)*A;break;case 3:y.shearX+=Y*A,y.shearY+=B*A;}}},Bt=class extends mt{constructor(t,l,h){super(t,l,at.shearX+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.shearX=y.data.shearX;return;case 1:y.shearX+=(y.data.shearX-y.shearX)*A;}return}let Y=this.getCurveValue(h);switch(U){case 0:y.shearX=y.data.shearX+Y*A;break;case 1:case 2:y.shearX+=(y.data.shearX+Y-y.shearX)*A;break;case 3:y.shearX+=Y*A;}}},zt=class extends mt{constructor(t,l,h){super(t,l,at.shearY+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,l,h,x,A,U,R){let y=t.bones[this.boneIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.shearY=y.data.shearY;return;case 1:y.shearY+=(y.data.shearY-y.shearY)*A;}return}let Y=this.getCurveValue(h);switch(U){case 0:y.shearY=y.data.shearY+Y*A;break;case 1:case 2:y.shearY+=(y.data.shearY+Y-y.shearY)*A;break;case 3:y.shearY+=Y*A;}}},Yt=class extends dt{constructor(t,l,h){super(t,l,[at.rgb+"|"+h,at.alpha+"|"+h]),this.slotIndex=0,this.slotIndex=h;}getFrameEntries(){return 5}setFrame(t,l,h,x,A,U){t*=5,this.frames[t]=l,this.frames[t+1]=h,this.frames[t+2]=x,this.frames[t+3]=A,this.frames[t+4]=U;}apply(t,l,h,x,A,U,R){let y=t.slots[this.slotIndex];if(!y.bone.active)return;let P=this.frames,Y=y.color;if(h<P[0]){let i=y.data.color;switch(U){case 0:Y.setFromColor(i);return;case 1:Y.add((i.r-Y.r)*A,(i.g-Y.g)*A,(i.b-Y.b)*A,(i.a-Y.a)*A);}return}let B=0,G=0,J=0,tt=0,s=Ct.search(P,h,5),e=this.curves[s/5];switch(e){case 0:let i=P[s];B=P[s+1],G=P[s+2],J=P[s+3],tt=P[s+4];let o=(h-i)/(P[s+5]-i);B+=(P[s+5+1]-B)*o,G+=(P[s+5+2]-G)*o,J+=(P[s+5+3]-J)*o,tt+=(P[s+5+4]-tt)*o;break;case 1:B=P[s+1],G=P[s+2],J=P[s+3],tt=P[s+4];break;default:B=this.getBezierValue(h,s,1,e-2),G=this.getBezierValue(h,s,2,e+18-2),J=this.getBezierValue(h,s,3,e+36-2),tt=this.getBezierValue(h,s,4,e+54-2);}A==1?Y.set(B,G,J,tt):(U==0&&Y.setFromColor(y.data.color),Y.add((B-Y.r)*A,(G-Y.g)*A,(J-Y.b)*A,(tt-Y.a)*A));}},Tt=class extends dt{constructor(t,l,h){super(t,l,[at.rgb+"|"+h]),this.slotIndex=0,this.slotIndex=h;}getFrameEntries(){return 4}setFrame(t,l,h,x,A){t<<=2,this.frames[t]=l,this.frames[t+1]=h,this.frames[t+2]=x,this.frames[t+3]=A;}apply(t,l,h,x,A,U,R){let y=t.slots[this.slotIndex];if(!y.bone.active)return;let P=this.frames,Y=y.color;if(h<P[0]){let e=y.data.color;switch(U){case 0:Y.r=e.r,Y.g=e.g,Y.b=e.b;return;case 1:Y.r+=(e.r-Y.r)*A,Y.g+=(e.g-Y.g)*A,Y.b+=(e.b-Y.b)*A;}return}let B=0,G=0,J=0,tt=Ct.search(P,h,4),s=this.curves[tt>>2];switch(s){case 0:let e=P[tt];B=P[tt+1],G=P[tt+2],J=P[tt+3];let i=(h-e)/(P[tt+4]-e);B+=(P[tt+4+1]-B)*i,G+=(P[tt+4+2]-G)*i,J+=(P[tt+4+3]-J)*i;break;case 1:B=P[tt+1],G=P[tt+2],J=P[tt+3];break;default:B=this.getBezierValue(h,tt,1,s-2),G=this.getBezierValue(h,tt,2,s+18-2),J=this.getBezierValue(h,tt,3,s+36-2);}if(A==1)Y.r=B,Y.g=G,Y.b=J;else {if(U==0){let e=y.data.color;Y.r=e.r,Y.g=e.g,Y.b=e.b;}Y.r+=(B-Y.r)*A,Y.g+=(G-Y.g)*A,Y.b+=(J-Y.b)*A;}}},bt=class extends mt{constructor(t,l,h){super(t,l,at.alpha+"|"+h),this.slotIndex=0,this.slotIndex=h;}apply(t,l,h,x,A,U,R){let y=t.slots[this.slotIndex];if(!y.bone.active)return;let P=y.color;if(h<this.frames[0]){let B=y.data.color;switch(U){case 0:P.a=B.a;return;case 1:P.a+=(B.a-P.a)*A;}return}let Y=this.getCurveValue(h);A==1?P.a=Y:(U==0&&(P.a=y.data.color.a),P.a+=(Y-P.a)*A);}},_t=class extends dt{constructor(t,l,h){super(t,l,[at.rgb+"|"+h,at.alpha+"|"+h,at.rgb2+"|"+h]),this.slotIndex=0,this.slotIndex=h;}getFrameEntries(){return 8}setFrame(t,l,h,x,A,U,R,y,P){t<<=3,this.frames[t]=l,this.frames[t+1]=h,this.frames[t+2]=x,this.frames[t+3]=A,this.frames[t+4]=U,this.frames[t+5]=R,this.frames[t+6]=y,this.frames[t+7]=P;}apply(t,l,h,x,A,U,R){let y=t.slots[this.slotIndex];if(!y.bone.active)return;let P=this.frames,Y=y.color,B=y.darkColor;if(h<P[0]){let m=y.data.color,g=y.data.darkColor;switch(U){case 0:Y.setFromColor(m),B.r=g.r,B.g=g.g,B.b=g.b;return;case 1:Y.add((m.r-Y.r)*A,(m.g-Y.g)*A,(m.b-Y.b)*A,(m.a-Y.a)*A),B.r+=(g.r-B.r)*A,B.g+=(g.g-B.g)*A,B.b+=(g.b-B.b)*A;}return}let G=0,J=0,tt=0,s=0,e=0,i=0,o=0,a=Ct.search(P,h,8),p=this.curves[a>>3];switch(p){case 0:let m=P[a];G=P[a+1],J=P[a+2],tt=P[a+3],s=P[a+4],e=P[a+5],i=P[a+6],o=P[a+7];let g=(h-m)/(P[a+8]-m);G+=(P[a+8+1]-G)*g,J+=(P[a+8+2]-J)*g,tt+=(P[a+8+3]-tt)*g,s+=(P[a+8+4]-s)*g,e+=(P[a+8+5]-e)*g,i+=(P[a+8+6]-i)*g,o+=(P[a+8+7]-o)*g;break;case 1:G=P[a+1],J=P[a+2],tt=P[a+3],s=P[a+4],e=P[a+5],i=P[a+6],o=P[a+7];break;default:G=this.getBezierValue(h,a,1,p-2),J=this.getBezierValue(h,a,2,p+18-2),tt=this.getBezierValue(h,a,3,p+36-2),s=this.getBezierValue(h,a,4,p+54-2),e=this.getBezierValue(h,a,5,p+72-2),i=this.getBezierValue(h,a,6,p+90-2),o=this.getBezierValue(h,a,7,p+108-2);}if(A==1)Y.set(G,J,tt,s),B.r=e,B.g=i,B.b=o;else {if(U==0){Y.setFromColor(y.data.color);let m=y.data.darkColor;B.r=m.r,B.g=m.g,B.b=m.b;}Y.add((G-Y.r)*A,(J-Y.g)*A,(tt-Y.b)*A,(s-Y.a)*A),B.r+=(e-B.r)*A,B.g+=(i-B.g)*A,B.b+=(o-B.b)*A;}}},se=class extends dt{constructor(t,l,h){super(t,l,[at.rgb+"|"+h,at.rgb2+"|"+h]),this.slotIndex=0,this.slotIndex=h;}getFrameEntries(){return 7}setFrame(t,l,h,x,A,U,R,y){t*=7,this.frames[t]=l,this.frames[t+1]=h,this.frames[t+2]=x,this.frames[t+3]=A,this.frames[t+4]=U,this.frames[t+5]=R,this.frames[t+6]=y;}apply(t,l,h,x,A,U,R){let y=t.slots[this.slotIndex];if(!y.bone.active)return;let P=this.frames,Y=y.color,B=y.darkColor;if(h<P[0]){let m=y.data.color,g=y.data.darkColor;switch(U){case 0:Y.r=m.r,Y.g=m.g,Y.b=m.b,B.r=g.r,B.g=g.g,B.b=g.b;return;case 1:Y.r+=(m.r-Y.r)*A,Y.g+=(m.g-Y.g)*A,Y.b+=(m.b-Y.b)*A,B.r+=(g.r-B.r)*A,B.g+=(g.g-B.g)*A,B.b+=(g.b-B.b)*A;}return}let G=0,J=0,tt=0,e=0,i=0,o=0,a=Ct.search(P,h,7),p=this.curves[a/7];switch(p){case 0:let m=P[a];G=P[a+1],J=P[a+2],tt=P[a+3],e=P[a+4],i=P[a+5],o=P[a+6];let g=(h-m)/(P[a+7]-m);G+=(P[a+7+1]-G)*g,J+=(P[a+7+2]-J)*g,tt+=(P[a+7+3]-tt)*g,e+=(P[a+7+4]-e)*g,i+=(P[a+7+5]-i)*g,o+=(P[a+7+6]-o)*g;break;case 1:G=P[a+1],J=P[a+2],tt=P[a+3],e=P[a+4],i=P[a+5],o=P[a+6];break;default:G=this.getBezierValue(h,a,1,p-2),J=this.getBezierValue(h,a,2,p+18-2),tt=this.getBezierValue(h,a,3,p+36-2),e=this.getBezierValue(h,a,4,p+54-2),i=this.getBezierValue(h,a,5,p+72-2),o=this.getBezierValue(h,a,6,p+90-2);}if(A==1)Y.r=G,Y.g=J,Y.b=tt,B.r=e,B.g=i,B.b=o;else {if(U==0){let m=y.data.color,g=y.data.darkColor;Y.r=m.r,Y.g=m.g,Y.b=m.b,B.r=g.r,B.g=g.g,B.b=g.b;}Y.r+=(G-Y.r)*A,Y.g+=(J-Y.g)*A,Y.b+=(tt-Y.b)*A,B.r+=(e-B.r)*A,B.g+=(i-B.g)*A,B.b+=(o-B.b)*A;}}},Kt=class extends Ct{constructor(t,l){super(t,[at.attachment+"|"+l]),this.slotIndex=0,this.slotIndex=l,this.attachmentNames=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,l,h){this.frames[t]=l,this.attachmentNames[t]=h;}apply(t,l,h,x,A,U,R){let y=t.slots[this.slotIndex];if(y.bone.active){if(R==1){U==0&&this.setAttachment(t,y,y.data.attachmentName);return}if(h<this.frames[0]){(U==0||U==1)&&this.setAttachment(t,y,y.data.attachmentName);return}this.setAttachment(t,y,this.attachmentNames[Ct.search1(this.frames,h)]);}}setAttachment(t,l,h){l.setAttachment(h?t.getAttachment(this.slotIndex,h):null);}},De=class extends dt{constructor(t,l,h,x){super(t,l,[at.deform+"|"+h+"|"+x.id]),this.slotIndex=0,this.attachment=null,this.vertices=null,this.slotIndex=h,this.attachment=x,this.vertices=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,l,h){this.frames[t]=l,this.vertices[t]=h;}setBezier(t,l,h,x,A,U,R,y,P,Y,B){let G=this.curves,J=this.getFrameCount()+t*18;h==0&&(G[l]=2+J);let tt=(x-U*2+y)*.03,s=P*.03-R*.06,e=((U-y)*3-x+Y)*.006,i=(R-P+.33333333)*.018,o=tt*2+e,a=s*2+i,p=(U-x)*.3+tt+e*.16666667,m=R*.3+s+i*.16666667,g=x+p,w=m;for(let b=J+18;J<b;J+=2)G[J]=g,G[J+1]=w,p+=o,m+=a,o+=e,a+=i,g+=p,w+=m;}getCurvePercent(t,l){let h=this.curves,x=h[l];switch(x){case 0:let y=this.frames[l];return (t-y)/(this.frames[l+this.getFrameEntries()]-y);case 1:return 0}if(x-=2,h[x]>t){let y=this.frames[l];return h[x+1]*(t-y)/(h[x]-y)}let A=x+18;for(x+=2;x<A;x+=2)if(h[x]>=t){let y=h[x-2],P=h[x-1];return P+(t-y)/(h[x]-y)*(h[x+1]-P)}let U=h[A-2],R=h[A-1];return R+(1-R)*(t-U)/(this.frames[l+this.getFrameEntries()]-U)}apply(t,l,h,x,A,U,R){let y=t.slots[this.slotIndex];if(!y.bone.active)return;let P=y.getAttachment();if(!(P instanceof it)||P.deformAttachment!=this.attachment)return;let Y=y.deform;Y.length==0&&(U=0);let B=this.vertices,G=B[0].length,J=this.frames;if(h<J[0]){let a=P;switch(U){case 0:Y.length=0;return;case 1:if(A==1){Y.length=0;return}if(Y.length=G,a.bones){A=1-A;for(var tt=0;tt<G;tt++)Y[tt]*=A;}else {let p=a.vertices;for(var tt=0;tt<G;tt++)Y[tt]+=(p[tt]-Y[tt])*A;}}return}if(Y.length=G,h>=J[J.length-1]){let a=B[J.length-1];if(A==1)if(U==3){let p=P;if(p.bones)for(let m=0;m<G;m++)Y[m]+=a[m];else {let m=p.vertices;for(let g=0;g<G;g++)Y[g]+=a[g]-m[g];}}else E.arrayCopy(a,0,Y,0,G);else switch(U){case 0:{let m=P;if(m.bones)for(let g=0;g<G;g++)Y[g]=a[g]*A;else {let g=m.vertices;for(let w=0;w<G;w++){let b=g[w];Y[w]=b+(a[w]-b)*A;}}break}case 1:case 2:for(let m=0;m<G;m++)Y[m]+=(a[m]-Y[m])*A;break;case 3:let p=P;if(p.bones)for(let m=0;m<G;m++)Y[m]+=a[m]*A;else {let m=p.vertices;for(let g=0;g<G;g++)Y[g]+=(a[g]-m[g])*A;}}return}let s=Ct.search1(J,h),e=this.getCurvePercent(h,s),i=B[s],o=B[s+1];if(A==1)if(U==3){let a=P;if(a.bones)for(let p=0;p<G;p++){let m=i[p];Y[p]+=m+(o[p]-m)*e;}else {let p=a.vertices;for(let m=0;m<G;m++){let g=i[m];Y[m]+=g+(o[m]-g)*e-p[m];}}}else for(let a=0;a<G;a++){let p=i[a];Y[a]=p+(o[a]-p)*e;}else switch(U){case 0:{let p=P;if(p.bones)for(let m=0;m<G;m++){let g=i[m];Y[m]=(g+(o[m]-g)*e)*A;}else {let m=p.vertices;for(let g=0;g<G;g++){let w=i[g],b=m[g];Y[g]=b+(w+(o[g]-w)*e-b)*A;}}break}case 1:case 2:for(let p=0;p<G;p++){let m=i[p];Y[p]+=(m+(o[p]-m)*e-Y[p])*A;}break;case 3:let a=P;if(a.bones)for(let p=0;p<G;p++){let m=i[p];Y[p]+=(m+(o[p]-m)*e)*A;}else {let p=a.vertices;for(let m=0;m<G;m++){let g=i[m];Y[m]+=(g+(o[m]-g)*e-p[m])*A;}}}}},$e=class extends Ct{constructor(t){super(t,$e.propertyIds),this.events=null,this.events=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,l){this.frames[t]=l.time,this.events[t]=l;}apply(t,l,h,x,A,U,R){if(!x)return;let y=this.frames,P=this.frames.length;if(l>h)this.apply(t,l,Number.MAX_VALUE,x,A,U,R),l=-1;else if(l>=y[P-1])return;if(h<y[0])return;let Y=0;if(l<y[0])Y=0;else {Y=Ct.search1(y,l)+1;let B=y[Y];for(;Y>0&&y[Y-1]==B;)Y--;}for(;Y<P&&h>=y[Y];Y++)x.push(this.events[Y]);}},Te=$e;Te.propertyIds=[""+at.event];var Qe=class extends Ct{constructor(t){super(t,Qe.propertyIds),this.drawOrders=null,this.drawOrders=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,l,h){this.frames[t]=l,this.drawOrders[t]=h;}apply(t,l,h,x,A,U,R){if(R==1){U==0&&E.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(h<this.frames[0]){(U==0||U==1)&&E.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let y=this.drawOrders[Ct.search1(this.frames,h)];if(!y)E.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else {let P=t.drawOrder,Y=t.slots;for(let B=0,G=y.length;B<G;B++)P[B]=Y[y[B]];}}},ss=Qe;ss.propertyIds=[""+at.drawOrder];var us=class extends dt{constructor(t,l,h){super(t,l,[at.ikConstraint+"|"+h]),this.ikConstraintIndex=0,this.ikConstraintIndex=h;}getFrameEntries(){return 6}setFrame(t,l,h,x,A,U,R){t*=6,this.frames[t]=l,this.frames[t+1]=h,this.frames[t+2]=x,this.frames[t+3]=A,this.frames[t+4]=U?1:0,this.frames[t+5]=R?1:0;}apply(t,l,h,x,A,U,R){let y=t.ikConstraints[this.ikConstraintIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.mix=y.data.mix,y.softness=y.data.softness,y.bendDirection=y.data.bendDirection,y.compress=y.data.compress,y.stretch=y.data.stretch;return;case 1:y.mix+=(y.data.mix-y.mix)*A,y.softness+=(y.data.softness-y.softness)*A,y.bendDirection=y.data.bendDirection,y.compress=y.data.compress,y.stretch=y.data.stretch;}return}let Y=0,B=0,G=Ct.search(P,h,6),J=this.curves[G/6];switch(J){case 0:let tt=P[G];Y=P[G+1],B=P[G+2];let s=(h-tt)/(P[G+6]-tt);Y+=(P[G+6+1]-Y)*s,B+=(P[G+6+2]-B)*s;break;case 1:Y=P[G+1],B=P[G+2];break;default:Y=this.getBezierValue(h,G,1,J-2),B=this.getBezierValue(h,G,2,J+18-2);}U==0?(y.mix=y.data.mix+(Y-y.data.mix)*A,y.softness=y.data.softness+(B-y.data.softness)*A,R==1?(y.bendDirection=y.data.bendDirection,y.compress=y.data.compress,y.stretch=y.data.stretch):(y.bendDirection=P[G+3],y.compress=P[G+4]!=0,y.stretch=P[G+5]!=0)):(y.mix+=(Y-y.mix)*A,y.softness+=(B-y.softness)*A,R==0&&(y.bendDirection=P[G+3],y.compress=P[G+4]!=0,y.stretch=P[G+5]!=0));}},hs=class extends dt{constructor(t,l,h){super(t,l,[at.transformConstraint+"|"+h]),this.transformConstraintIndex=0,this.transformConstraintIndex=h;}getFrameEntries(){return 7}setFrame(t,l,h,x,A,U,R,y){let P=this.frames;t*=7,P[t]=l,P[t+1]=h,P[t+2]=x,P[t+3]=A,P[t+4]=U,P[t+5]=R,P[t+6]=y;}apply(t,l,h,x,A,U,R){let y=t.transformConstraints[this.transformConstraintIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){let o=y.data;switch(U){case 0:y.mixRotate=o.mixRotate,y.mixX=o.mixX,y.mixY=o.mixY,y.mixScaleX=o.mixScaleX,y.mixScaleY=o.mixScaleY,y.mixShearY=o.mixShearY;return;case 1:y.mixRotate+=(o.mixRotate-y.mixRotate)*A,y.mixX+=(o.mixX-y.mixX)*A,y.mixY+=(o.mixY-y.mixY)*A,y.mixScaleX+=(o.mixScaleX-y.mixScaleX)*A,y.mixScaleY+=(o.mixScaleY-y.mixScaleY)*A,y.mixShearY+=(o.mixShearY-y.mixShearY)*A;}return}let Y,B,G,J,tt,s,e=Ct.search(P,h,7),i=this.curves[e/7];switch(i){case 0:let o=P[e];Y=P[e+1],B=P[e+2],G=P[e+3],J=P[e+4],tt=P[e+5],s=P[e+6];let a=(h-o)/(P[e+7]-o);Y+=(P[e+7+1]-Y)*a,B+=(P[e+7+2]-B)*a,G+=(P[e+7+3]-G)*a,J+=(P[e+7+4]-J)*a,tt+=(P[e+7+5]-tt)*a,s+=(P[e+7+6]-s)*a;break;case 1:Y=P[e+1],B=P[e+2],G=P[e+3],J=P[e+4],tt=P[e+5],s=P[e+6];break;default:Y=this.getBezierValue(h,e,1,i-2),B=this.getBezierValue(h,e,2,i+18-2),G=this.getBezierValue(h,e,3,i+36-2),J=this.getBezierValue(h,e,4,i+54-2),tt=this.getBezierValue(h,e,5,i+72-2),s=this.getBezierValue(h,e,6,i+90-2);}if(U==0){let o=y.data;y.mixRotate=o.mixRotate+(Y-o.mixRotate)*A,y.mixX=o.mixX+(B-o.mixX)*A,y.mixY=o.mixY+(G-o.mixY)*A,y.mixScaleX=o.mixScaleX+(J-o.mixScaleX)*A,y.mixScaleY=o.mixScaleY+(tt-o.mixScaleY)*A,y.mixShearY=o.mixShearY+(s-o.mixShearY)*A;}else y.mixRotate+=(Y-y.mixRotate)*A,y.mixX+=(B-y.mixX)*A,y.mixY+=(G-y.mixY)*A,y.mixScaleX+=(J-y.mixScaleX)*A,y.mixScaleY+=(tt-y.mixScaleY)*A,y.mixShearY+=(s-y.mixShearY)*A;}},as=class extends mt{constructor(t,l,h){super(t,l,at.pathConstraintPosition+"|"+h),this.pathConstraintIndex=0,this.pathConstraintIndex=h;}apply(t,l,h,x,A,U,R){let y=t.pathConstraints[this.pathConstraintIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.position=y.data.position;return;case 1:y.position+=(y.data.position-y.position)*A;}return}let Y=this.getCurveValue(h);U==0?y.position=y.data.position+(Y-y.data.position)*A:y.position+=(Y-y.position)*A;}},xs=class extends mt{constructor(t,l,h){super(t,l,at.pathConstraintSpacing+"|"+h),this.pathConstraintIndex=0,this.pathConstraintIndex=h;}apply(t,l,h,x,A,U,R){let y=t.pathConstraints[this.pathConstraintIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.spacing=y.data.spacing;return;case 1:y.spacing+=(y.data.spacing-y.spacing)*A;}return}let Y=this.getCurveValue(h);U==0?y.spacing=y.data.spacing+(Y-y.data.spacing)*A:y.spacing+=(Y-y.spacing)*A;}},os=class extends dt{constructor(t,l,h){super(t,l,[at.pathConstraintMix+"|"+h]),this.pathConstraintIndex=0,this.pathConstraintIndex=h;}getFrameEntries(){return 4}setFrame(t,l,h,x,A){let U=this.frames;t<<=2,U[t]=l,U[t+1]=h,U[t+2]=x,U[t+3]=A;}apply(t,l,h,x,A,U,R){let y=t.pathConstraints[this.pathConstraintIndex];if(!y.active)return;let P=this.frames;if(h<P[0]){switch(U){case 0:y.mixRotate=y.data.mixRotate,y.mixX=y.data.mixX,y.mixY=y.data.mixY;return;case 1:y.mixRotate+=(y.data.mixRotate-y.mixRotate)*A,y.mixX+=(y.data.mixX-y.mixX)*A,y.mixY+=(y.data.mixY-y.mixY)*A;}return}let Y,B,G,J=Ct.search(P,h,4),tt=this.curves[J>>2];switch(tt){case 0:let s=P[J];Y=P[J+1],B=P[J+2],G=P[J+3];let e=(h-s)/(P[J+4]-s);Y+=(P[J+4+1]-Y)*e,B+=(P[J+4+2]-B)*e,G+=(P[J+4+3]-G)*e;break;case 1:Y=P[J+1],B=P[J+2],G=P[J+3];break;default:Y=this.getBezierValue(h,J,1,tt-2),B=this.getBezierValue(h,J,2,tt+18-2),G=this.getBezierValue(h,J,3,tt+36-2);}if(U==0){let s=y.data;y.mixRotate=s.mixRotate+(Y-s.mixRotate)*A,y.mixX=s.mixX+(B-s.mixX)*A,y.mixY=s.mixY+(G-s.mixY)*A;}else y.mixRotate+=(Y-y.mixRotate)*A,y.mixX+=(B-y.mixX)*A,y.mixY+=(G-y.mixY)*A;}},cs=class{constructor(t){this.data=null,this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new ws(this),this.propertyIDs=new n,this.animationsChanged=false,this.trackEntryPool=new z(()=>new ts),this.data=t;}static emptyAnimation(){return gr||(gr=new W("<empty>",[],0)),gr}update(t){t*=this.timeScale;let l=this.tracks;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(!A)continue;A.animationLast=A.nextAnimationLast,A.trackLast=A.nextTrackLast;let U=t*A.timeScale;if(A.delay>0){if(A.delay-=U,A.delay>0)continue;U=-A.delay,A.delay=0;}let R=A.next;if(R){let y=A.trackLast-R.delay;if(y>=0){for(R.delay=0,R.trackTime+=A.timeScale==0?0:(y/A.timeScale+t)*R.timeScale,A.trackTime+=U,this.setCurrent(h,R,true);R.mixingFrom;)R.mixTime+=t,R=R.mixingFrom;continue}}else if(A.trackLast>=A.trackEnd&&!A.mixingFrom){l[h]=null,this.queue.end(A),this.clearNext(A);continue}if(A.mixingFrom&&this.updateMixingFrom(A,t)){let y=A.mixingFrom;for(A.mixingFrom=null,y&&(y.mixingTo=null);y;)this.queue.end(y),y=y.mixingFrom;}A.trackTime+=U;}this.queue.drain();}updateMixingFrom(t,l){let h=t.mixingFrom;if(!h)return  true;let x=this.updateMixingFrom(h,l);return h.animationLast=h.nextAnimationLast,h.trackLast=h.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((h.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=h.mixingFrom,h.mixingFrom&&(h.mixingFrom.mixingTo=t),t.interruptAlpha=h.interruptAlpha,this.queue.end(h)),x):(h.trackTime+=l*h.timeScale,t.mixTime+=l,false)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let l=this.events,h=this.tracks,x=false;for(let G=0,J=h.length;G<J;G++){let tt=h[G];if(!tt||tt.delay>0)continue;x=true;let s=G==0?et.first:tt.mixBlend,e=tt.alpha;tt.mixingFrom?e*=this.applyMixingFrom(tt,t,s):tt.trackTime>=tt.trackEnd&&!tt.next&&(e=0);let i=tt.animationLast,o=tt.getAnimationTime(),a=o,p=l;tt.reverse&&(a=tt.animation.duration-a,p=null);let m=tt.animation.timelines,g=m.length;if(G==0&&e==1||s==et.add)for(let w=0;w<g;w++){var A=m[w];A instanceof Kt?this.applyAttachmentTimeline(A,t,a,s,true):A.apply(t,i,a,p,e,s,ft.mixIn);}else {let w=tt.timelineMode,b=tt.timelinesRotation.length!=g<<1;b&&(tt.timelinesRotation.length=g<<1);for(let C=0;C<g;C++){let F=m[C],L=w[C]==Ss?s:et.setup;F instanceof ht?this.applyRotateTimeline(F,t,a,e,L,tt.timelinesRotation,C<<1,b):F instanceof Kt?this.applyAttachmentTimeline(F,t,a,s,true):(F.apply(t,i,a,p,e,L,ft.mixIn));}}this.queueEvents(tt,o),l.length=0,tt.nextAnimationLast=o,tt.nextTrackLast=tt.trackTime;}for(var U=this.unkeyedState+Ci,R=t.slots,y=0,P=t.slots.length;y<P;y++){var Y=R[y];if(Y.attachmentState==U){var B=Y.data.attachmentName;Y.setAttachment(B?t.getAttachment(Y.data.index,B):null);}}return this.unkeyedState+=2,this.queue.drain(),x}applyMixingFrom(t,l,h){let x=t.mixingFrom;x.mixingFrom&&this.applyMixingFrom(x,l,h);let A=0;t.mixDuration==0?(A=1,h==et.first&&(h=et.setup)):(A=t.mixTime/t.mixDuration,A>1&&(A=1),h!=et.first&&(h=x.mixBlend));let U=A<x.attachmentThreshold,R=A<x.drawOrderThreshold,y=x.animation.timelines,P=y.length,Y=x.alpha*t.interruptAlpha,B=Y*(1-A),G=x.animationLast,J=x.getAnimationTime(),tt=J,s=null;if(x.reverse?tt=x.animation.duration-tt:A<x.eventThreshold&&(s=this.events),h==et.add)for(let e=0;e<P;e++)y[e].apply(l,G,tt,s,B,h,ft.mixOut);else {let e=x.timelineMode,i=x.timelineHoldMix,o=x.timelinesRotation.length!=P<<1;o&&(x.timelinesRotation.length=P<<1),x.totalAlpha=0;for(let a=0;a<P;a++){let p=y[a],m=ft.mixOut,g,w=0;switch(e[a]){case Ss:if(!R&&p instanceof ss)continue;g=h,w=B;break;case Es:g=et.setup,w=B;break;case ys:g=h,w=Y;break;case ks:g=et.setup,w=Y;break;default:g=et.setup;let b=i[a];w=Y*Math.max(0,1-b.mixTime/b.mixDuration);break}x.totalAlpha+=w,p instanceof ht?this.applyRotateTimeline(p,l,tt,w,g,x.timelinesRotation,a<<1,o):p instanceof Kt?this.applyAttachmentTimeline(p,l,tt,g,U):(R&&p instanceof ss&&g==et.setup&&(m=ft.mixIn),p.apply(l,G,tt,s,w,g,m));}}return t.mixDuration>0&&this.queueEvents(x,J),this.events.length=0,x.nextAnimationLast=J,x.nextTrackLast=x.trackTime,A}applyAttachmentTimeline(t,l,h,x,A){var U=l.slots[t.slotIndex];!U.bone.active||(h<t.frames[0]?(x==et.setup||x==et.first)&&this.setAttachment(l,U,U.data.attachmentName,A):this.setAttachment(l,U,t.attachmentNames[Ct.search1(t.frames,h)],A),U.attachmentState<=this.unkeyedState&&(U.attachmentState=this.unkeyedState+Ci));}setAttachment(t,l,h,x){l.setAttachment(h?t.getAttachment(l.data.index,h):null),x&&(l.attachmentState=this.unkeyedState+Zi);}applyRotateTimeline(t,l,h,x,A,U,R,y){if(y&&(U[R]=0),x==1){t.apply(l,0,h,null,1,A,ft.mixIn);return}let P=l.bones[t.boneIndex];if(!P.active)return;let Y=t.frames,B=0,G=0;if(h<Y[0])switch(A){case et.setup:P.rotation=P.data.rotation;default:return;case et.first:B=P.rotation,G=P.data.rotation;}else B=A==et.setup?P.data.rotation:P.rotation,G=P.data.rotation+t.getCurveValue(h);let J=0,tt=G-B;if(tt-=(16384-(16384.499999999996-tt/360|0))*360,tt==0)J=U[R];else {let s=0,e=0;y?(s=0,e=tt):(s=U[R],e=U[R+1]);let i=tt>0,o=s>=0;S.signum(e)!=S.signum(tt)&&Math.abs(e)<=90&&(Math.abs(s)>180&&(s+=360*S.signum(s)),o=i),J=tt+s-s%360,o!=i&&(J+=360*S.signum(s)),U[R]=J;}U[R+1]=tt,P.rotation=B+J*x;}queueEvents(t,l){let h=t.animationStart,x=t.animationEnd,A=x-h,U=t.trackLast%A,R=this.events,y=0,P=R.length;for(;y<P;y++){let B=R[y];if(B.time<U)break;B.time>x||this.queue.event(t,B);}let Y=false;for(t.loop?Y=A==0||U>t.trackTime%A:Y=l>=x&&t.animationLast<x,Y&&this.queue.complete(t);y<P;y++){let B=R[y];B.time<h||this.queue.event(t,B);}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let l=0,h=this.tracks.length;l<h;l++)this.clearTrack(l);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain();}clearTrack(t){if(t>=this.tracks.length)return;let l=this.tracks[t];if(!l)return;this.queue.end(l),this.clearNext(l);let h=l;for(;;){let x=h.mixingFrom;if(!x)break;this.queue.end(x),h.mixingFrom=null,h.mixingTo=null,h=x;}this.tracks[l.trackIndex]=null,this.queue.drain();}setCurrent(t,l,h){let x=this.expandToIndex(t);this.tracks[t]=l,l.previous=null,x&&(h&&this.queue.interrupt(x),l.mixingFrom=x,x.mixingTo=l,l.mixTime=0,x.mixingFrom&&x.mixDuration>0&&(l.interruptAlpha*=Math.min(1,x.mixTime/x.mixDuration)),x.timelinesRotation.length=0),this.queue.start(l);}setAnimation(t,l,h=false){let x=this.data.skeletonData.findAnimation(l);if(!x)throw new Error("Animation not found: "+l);return this.setAnimationWith(t,x,h)}setAnimationWith(t,l,h=false){if(!l)throw new Error("animation cannot be null.");let x=true,A=this.expandToIndex(t);A&&(A.nextTrackLast==-1?(this.tracks[t]=A.mixingFrom,this.queue.interrupt(A),this.queue.end(A),this.clearNext(A),A=A.mixingFrom,x=false):this.clearNext(A));let U=this.trackEntry(t,l,h,A);return this.setCurrent(t,U,x),this.queue.drain(),U}addAnimation(t,l,h=false,x=0){let A=this.data.skeletonData.findAnimation(l);if(!A)throw new Error("Animation not found: "+l);return this.addAnimationWith(t,A,h,x)}addAnimationWith(t,l,h=false,x=0){if(!l)throw new Error("animation cannot be null.");let A=this.expandToIndex(t);if(A)for(;A.next;)A=A.next;let U=this.trackEntry(t,l,h,A);return A?(A.next=U,U.previous=A,x<=0&&(x+=A.getTrackComplete()-U.mixDuration)):(this.setCurrent(t,U,true),this.queue.drain()),U.delay=x,U}setEmptyAnimation(t,l=0){let h=this.setAnimationWith(t,cs.emptyAnimation(),false);return h.mixDuration=l,h.trackEnd=l,h}addEmptyAnimation(t,l=0,h=0){let x=this.addAnimationWith(t,cs.emptyAnimation(),false,h);return h<=0&&(x.delay+=x.mixDuration-l),x.mixDuration=l,x.trackEnd=l,x}setEmptyAnimations(t=0){let l=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let h=0,x=this.tracks.length;h<x;h++){let A=this.tracks[h];A&&this.setEmptyAnimation(A.trackIndex,t);}this.queue.drainDisabled=l,this.queue.drain();}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(E.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,l,h,x){let A=this.trackEntryPool.obtain();return A.reset(),A.trackIndex=t,A.animation=l,A.loop=h,A.holdPrevious=false,A.eventThreshold=0,A.attachmentThreshold=0,A.drawOrderThreshold=0,A.animationStart=0,A.animationEnd=l.duration,A.animationLast=-1,A.nextAnimationLast=-1,A.delay=0,A.trackTime=0,A.trackLast=-1,A.nextTrackLast=-1,A.trackEnd=Number.MAX_VALUE,A.timeScale=1,A.alpha=1,A.interruptAlpha=1,A.mixTime=0,A.mixDuration=x?this.data.getMix(x.animation,l):0,A.mixBlend=et.replace,A}clearNext(t){let l=t.next;for(;l;)this.queue.dispose(l),l=l.next;t.next=null;}_animationsChanged(){this.animationsChanged=false,this.propertyIDs.clear();let t=this.tracks;for(let l=0,h=t.length;l<h;l++){let x=t[l];if(x){for(;x.mixingFrom;)x=x.mixingFrom;do(!x.mixingTo||x.mixBlend!=et.add)&&this.computeHold(x),x=x.mixingTo;while(x)}}}computeHold(t){let l=t.mixingTo,h=t.animation.timelines,x=t.animation.timelines.length,A=t.timelineMode;A.length=x;let U=t.timelineHoldMix;U.length=0;let R=this.propertyIDs;if(l&&l.holdPrevious){for(let y=0;y<x;y++)A[y]=R.addAll(h[y].getPropertyIds())?ks:ys;return}t:for(let y=0;y<x;y++){let P=h[y],Y=P.getPropertyIds();if(!R.addAll(Y))A[y]=Ss;else if(!l||P instanceof Kt||P instanceof ss||P instanceof Te||!l.animation.hasTimeline(Y))A[y]=Es;else {for(let B=l.mixingTo;B;B=B.mixingTo)if(!B.animation.hasTimeline(Y)){if(t.mixDuration>0){A[y]=Ws,U[y]=B;continue t}break}A[y]=ks;}}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t);}removeListener(t){let l=this.listeners.indexOf(t);l>=0&&this.listeners.splice(l,1);}clearListeners(){this.listeners.length=0;}clearListenerNotifications(){this.queue.clear();}},ts=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=false,this.holdPrevious=false,this.reverse=false,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=et.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array;}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t;}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0;}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(t!=0){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},ws=class{constructor(t){this.objects=[],this.drainDisabled=false,this.animState=null,this.animState=t;}start(t){this.objects.push(is.start),this.objects.push(t),this.animState.animationsChanged=true;}interrupt(t){this.objects.push(is.interrupt),this.objects.push(t);}end(t){this.objects.push(is.end),this.objects.push(t),this.animState.animationsChanged=true;}dispose(t){this.objects.push(is.dispose),this.objects.push(t);}complete(t){this.objects.push(is.complete),this.objects.push(t);}event(t,l){this.objects.push(is.event),this.objects.push(t),this.objects.push(l);}drain(){if(this.drainDisabled)return;this.drainDisabled=true;let t=this.objects,l=this.animState.listeners;for(let h=0;h<t.length;h+=2){let x=t[h],A=t[h+1];switch(x){case is.start:A.listener&&A.listener.start&&A.listener.start(A);for(let R=0;R<l.length;R++)l[R].start&&l[R].start(A);break;case is.interrupt:A.listener&&A.listener.interrupt&&A.listener.interrupt(A);for(let R=0;R<l.length;R++)l[R].interrupt&&l[R].interrupt(A);break;case is.end:A.listener&&A.listener.end&&A.listener.end(A);for(let R=0;R<l.length;R++)l[R].end&&l[R].end(A);case is.dispose:A.listener&&A.listener.dispose&&A.listener.dispose(A);for(let R=0;R<l.length;R++)l[R].dispose&&l[R].dispose(A);this.animState.trackEntryPool.free(A);break;case is.complete:A.listener&&A.listener.complete&&A.listener.complete(A);for(let R=0;R<l.length;R++)l[R].complete&&l[R].complete(A);break;case is.event:let U=t[h+++2];A.listener&&A.listener.event&&A.listener.event(A,U);for(let R=0;R<l.length;R++)l[R].event&&l[R].event(A,U);break}}this.clear(),this.drainDisabled=false;}clear(){this.objects.length=0;}},is;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event";})(is||(is={}));var Us=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,l){}},Ss=0,Es=1,ys=2,ks=3,Ws=4,Ci=1,Zi=2,gr=null,jr=class{constructor(t){if(this.skeletonData=null,this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t;}setMix(t,l,h){let x=this.skeletonData.findAnimation(t);if(!x)throw new Error("Animation not found: "+t);let A=this.skeletonData.findAnimation(l);if(!A)throw new Error("Animation not found: "+l);this.setMixWith(x,A,h);}setMixWith(t,l,h){if(!t)throw new Error("from cannot be null.");if(!l)throw new Error("to cannot be null.");let x=t.name+"."+l.name;this.animationToMixTime[x]=h;}getMix(t,l){let h=t.name+"."+l.name,x=this.animationToMixTime[h];return x===void 0?this.defaultMix:x}},Ti=class extends it{constructor(t){super(t),this.color=new d(1,1,1,1);}copy(){let t=new Ti(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},fi=class extends it{constructor(t){super(t),this.endSlot=null,this.color=new d(.2275,.2275,.8078,1);}copy(){let t=new fi(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},pr=class{constructor(t){this._image=t;}getImage(){return this._image}},Cs;(function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear";})(Cs||(Cs={}));var $s;(function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat";})($s||($s={}));var ji=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0;}},Hi=class extends pr{setFilters(t,l){}setWraps(t,l){}dispose(){}},xr=class{constructor(t){this.pages=new Array,this.regions=new Array;let l=new vr(t),h=new Array(4),x=null,A=null,U={};U.size=()=>{x.width=parseInt(h[1]),x.height=parseInt(h[2]);},U.format=()=>{},U.filter=()=>{x.minFilter=E.enumValue(Cs,h[1]),x.magFilter=E.enumValue(Cs,h[2]);},U.repeat=()=>{h[1].indexOf("x")!=-1&&(x.uWrap=$s.Repeat),h[1].indexOf("y")!=-1&&(x.vWrap=$s.Repeat);},U.pma=()=>{x.pma=h[1]=="true";};var R={};R.xy=()=>{A.x=parseInt(h[1]),A.y=parseInt(h[2]);},R.size=()=>{A.width=parseInt(h[1]),A.height=parseInt(h[2]);},R.bounds=()=>{A.x=parseInt(h[1]),A.y=parseInt(h[2]),A.width=parseInt(h[3]),A.height=parseInt(h[4]);},R.offset=()=>{A.offsetX=parseInt(h[1]),A.offsetY=parseInt(h[2]);},R.orig=()=>{A.originalWidth=parseInt(h[1]),A.originalHeight=parseInt(h[2]);},R.offsets=()=>{A.offsetX=parseInt(h[1]),A.offsetY=parseInt(h[2]),A.originalWidth=parseInt(h[3]),A.originalHeight=parseInt(h[4]);},R.rotate=()=>{let B=h[1];B=="true"?A.degrees=90:B!="false"&&(A.degrees=parseInt(B));},R.index=()=>{A.index=parseInt(h[1]);};let y=l.readLine();for(;y&&y.trim().length==0;)y=l.readLine();for(;!(!y||y.trim().length==0||l.readEntry(h,y)==0);)y=l.readLine();let P=null,Y=null;for(;y!==null;)if(y.trim().length==0)x=null,y=l.readLine();else if(x){for(A=new yr,A.page=x,A.name=y;;){let B=l.readEntry(h,y=l.readLine());if(B==0)break;let G=R[h[0]];if(G)G();else {P||(P=[],Y=[]),P.push(h[0]);let J=[];for(let tt=0;tt<B;tt++)J.push(parseInt(h[tt+1]));Y.push(J);}}A.originalWidth==0&&A.originalHeight==0&&(A.originalWidth=A.width,A.originalHeight=A.height),P&&P.length>0&&(A.names=P,A.values=Y,P=null,Y=null),A.u=A.x/x.width,A.v=A.y/x.height,A.degrees==90?(A.u2=(A.x+A.height)/x.width,A.v2=(A.y+A.width)/x.height):(A.u2=(A.x+A.width)/x.width,A.v2=(A.y+A.height)/x.height),this.regions.push(A);}else {for(x=new wr,x.name=y.trim();l.readEntry(h,y=l.readLine())!=0;){let B=U[h[0]];B&&B();}this.pages.push(x);}}findRegion(t){for(let l=0;l<this.regions.length;l++)if(this.regions[l].name==t)return this.regions[l];return null}setTextures(t,l=""){for(let h of this.pages)h.setTexture(t.get(l+h.name));}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].texture.dispose();}},vr=class{constructor(t){this.lines=null,this.index=0,this.lines=t.split(/\r\n|\r|\n/);}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,l){if(!l||(l=l.trim(),l.length==0))return 0;let h=l.indexOf(":");if(h==-1)return 0;t[0]=l.substr(0,h).trim();for(let x=1,A=h+1;;x++){let U=l.indexOf(",",A);if(U==-1)return t[x]=l.substr(A).trim(),x;if(t[x]=l.substr(A,U-A).trim(),A=U+1,x==4)return 4}}},wr=class{constructor(){this.name=null,this.minFilter=Cs.Nearest,this.magFilter=Cs.Nearest,this.uWrap=$s.ClampToEdge,this.vWrap=$s.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=false;}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);}},yr=class extends ji{constructor(){super(...arguments),this.page=null,this.name=null,this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null;}},zs=class extends it{constructor(t){super(t),this.region=null,this.path=null,this.regionUVs=null,this.uvs=null,this.triangles=null,this.color=new d(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=null,this.parentMesh=null,this.tempColor=new d(0,0,0,0);}updateUVs(){let t=this.regionUVs;(!this.uvs||this.uvs.length!=t.length)&&(this.uvs=E.newFloatArray(t.length));let l=this.uvs,h=this.uvs.length,x=this.region.u,A=this.region.v,U=0,R=0;if(this.region instanceof yr){let y=this.region,P=y.page.texture.getImage(),Y=P.width,B=P.height;switch(y.degrees){case 90:x-=(y.originalHeight-y.offsetY-y.height)/Y,A-=(y.originalWidth-y.offsetX-y.width)/B,U=y.originalHeight/Y,R=y.originalWidth/B;for(let G=0;G<h;G+=2)l[G]=x+t[G+1]*U,l[G+1]=A+(1-t[G])*R;return;case 180:x-=(y.originalWidth-y.offsetX-y.width)/Y,A-=y.offsetY/B,U=y.originalWidth/Y,R=y.originalHeight/B;for(let G=0;G<h;G+=2)l[G]=x+(1-t[G])*U,l[G+1]=A+(1-t[G+1])*R;return;case 270:x-=y.offsetY/Y,A-=y.offsetX/B,U=y.originalHeight/Y,R=y.originalWidth/B;for(let G=0;G<h;G+=2)l[G]=x+(1-t[G+1])*U,l[G+1]=A+t[G]*R;return}x-=y.offsetX/Y,A-=(y.originalHeight-y.offsetY-y.height)/B,U=y.originalWidth/Y,R=y.originalHeight/B;}else this.region?(U=this.region.u2-x,R=this.region.v2-A):(x=A=0,U=R=1);for(let y=0;y<h;y+=2)l[y]=x+t[y]*U,l[y+1]=A+t[y+1]*R;}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength);}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new zs(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),E.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),E.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),E.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=new Array(this.edges.length),E.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){let t=new zs(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.updateUVs(),t}},Ps=class extends it{constructor(t){super(t),this.lengths=null,this.closed=false,this.constantSpeed=false,this.color=new d(1,1,1,1);}copy(){let t=new Ps(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),E.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},Ii=class extends it{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new d(.38,.94,0,1);}computeWorldPosition(t,l){return l.x=this.x*t.a+this.y*t.b+t.worldX,l.y=this.x*t.c+this.y*t.d+t.worldY,l}computeWorldRotation(t){let l=S.cosDeg(this.rotation),h=S.sinDeg(this.rotation),x=l*t.a+h*t.b,A=l*t.c+h*t.d;return Math.atan2(A,x)*S.radDeg}copy(){let t=new Ii(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},Ei=class extends nt{constructor(t){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new d(1,1,1,1),this.path=null,this.rendererObject=null,this.region=null,this.offset=E.newFloatArray(8),this.uvs=E.newFloatArray(8),this.tempColor=new d(1,1,1,1);}updateOffset(){this.region;let l=this.width/this.region.originalWidth*this.scaleX,h=this.height/this.region.originalHeight*this.scaleY,x=-this.width/2*this.scaleX+this.region.offsetX*l,A=-this.height/2*this.scaleY+this.region.offsetY*h,U=x+this.region.width*l,R=A+this.region.height*h,y=this.rotation*Math.PI/180,P=Math.cos(y),Y=Math.sin(y),B=this.x,G=this.y,J=x*P+B,tt=x*Y,s=A*P+G,e=A*Y,i=U*P+B,o=U*Y,a=R*P+G,p=R*Y,m=this.offset;m[0]=J-e,m[1]=s+tt,m[2]=J-p,m[3]=a+tt,m[4]=i-p,m[5]=a+o,m[6]=i-e,m[7]=s+o;}setRegion(t){this.region=t;let l=this.uvs;t.degrees==90?(l[2]=t.u,l[3]=t.v2,l[4]=t.u,l[5]=t.v,l[6]=t.u2,l[7]=t.v,l[0]=t.u2,l[1]=t.v2):(l[0]=t.u,l[1]=t.v2,l[2]=t.u,l[3]=t.v,l[4]=t.u2,l[5]=t.v,l[6]=t.u2,l[7]=t.v2);}computeWorldVertices(t,l,h,x){let A=this.offset,U=t.worldX,R=t.worldY,y=t.a,P=t.b,Y=t.c,B=t.d,G=0,J=0;G=A[0],J=A[1],l[h]=G*y+J*P+U,l[h+1]=G*Y+J*B+R,h+=x,G=A[2],J=A[3],l[h]=G*y+J*P+U,l[h+1]=G*Y+J*B+R,h+=x,G=A[4],J=A[5],l[h]=G*y+J*P+U,l[h+1]=G*Y+J*B+R,h+=x,G=A[6],J=A[7],l[h]=G*y+J*P+U,l[h+1]=G*Y+J*B+R;}copy(){let t=new Ei(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,E.arrayCopy(this.uvs,0,t.uvs,0,8),E.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}},qe=Ei;qe.X1=0,qe.Y1=1,qe.C1R=2,qe.C1G=3,qe.C1B=4,qe.C1A=5,qe.U1=6,qe.V1=7,qe.X2=8,qe.Y2=9,qe.C2R=10,qe.C2G=11,qe.C2B=12,qe.C2A=13,qe.U2=14,qe.V2=15,qe.X3=16,qe.Y3=17,qe.C3R=18,qe.C3G=19,qe.C3B=20,qe.C3A=21,qe.U3=22,qe.V3=23,qe.X4=24,qe.Y4=25,qe.C4R=26,qe.C4G=27,qe.C4B=28,qe.C4A=29,qe.U4=30,qe.V4=31;var Hr=class{constructor(t){this.atlas=null,this.atlas=t;}newRegionAttachment(t,l,h){let x=this.atlas.findRegion(h);if(!x)throw new Error("Region not found in atlas: "+h+" (region attachment: "+l+")");x.renderObject=x;let A=new qe(l);return A.setRegion(x),A}newMeshAttachment(t,l,h){let x=this.atlas.findRegion(h);if(!x)throw new Error("Region not found in atlas: "+h+" (mesh attachment: "+l+")");x.renderObject=x;let A=new zs(l);return A.region=x,A}newBoundingBoxAttachment(t,l){return new Ti(l)}newPathAttachment(t,l){return new Ps(l)}newPointAttachment(t,l){return new Ii(l)}newClippingAttachment(t,l){return new fi(l)}},Mr=class{constructor(t,l,h){if(this.index=0,this.name=null,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=bs.Normal,this.skinRequired=false,this.color=new d,t<0)throw new Error("index must be >= 0.");if(!l)throw new Error("name cannot be null.");this.index=t,this.name=l,this.parent=h;}},bs;(function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection";})(bs||(bs={}));var br=class{constructor(t,l,h){if(this.data=null,this.skeleton=null,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=false,this.active=false,!t)throw new Error("data cannot be null.");if(!l)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=l,this.parent=h,this.setToSetupPose();}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY);}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);}updateWorldTransformWith(t,l,h,x,A,U,R){this.ax=t,this.ay=l,this.arotation=h,this.ascaleX=x,this.ascaleY=A,this.ashearX=U,this.ashearY=R;let y=this.parent;if(!y){let J=this.skeleton,tt=h+90+R,s=J.scaleX,e=J.scaleY;this.a=S.cosDeg(h+U)*x*s,this.b=S.cosDeg(tt)*A*s,this.c=S.sinDeg(h+U)*x*e,this.d=S.sinDeg(tt)*A*e,this.worldX=t*s+J.x,this.worldY=l*e+J.y;return}let P=y.a,Y=y.b,B=y.c,G=y.d;switch(this.worldX=P*t+Y*l+y.worldX,this.worldY=B*t+G*l+y.worldY,this.data.transformMode){case bs.Normal:{let J=h+90+R,tt=S.cosDeg(h+U)*x,s=S.cosDeg(J)*A,e=S.sinDeg(h+U)*x,i=S.sinDeg(J)*A;this.a=P*tt+Y*e,this.b=P*s+Y*i,this.c=B*tt+G*e,this.d=B*s+G*i;return}case bs.OnlyTranslation:{let J=h+90+R;this.a=S.cosDeg(h+U)*x,this.b=S.cosDeg(J)*A,this.c=S.sinDeg(h+U)*x,this.d=S.sinDeg(J)*A;break}case bs.NoRotationOrReflection:{let J=P*P+B*B,tt=0;J>1e-4?(J=Math.abs(P*G-Y*B)/J,P/=this.skeleton.scaleX,B/=this.skeleton.scaleY,Y=B*J,G=P*J,tt=Math.atan2(B,P)*S.radDeg):(P=0,B=0,tt=90-Math.atan2(G,Y)*S.radDeg);let s=h+U-tt,e=h+R-tt+90,i=S.cosDeg(s)*x,o=S.cosDeg(e)*A,a=S.sinDeg(s)*x,p=S.sinDeg(e)*A;this.a=P*i-Y*a,this.b=P*o-Y*p,this.c=B*i+G*a,this.d=B*o+G*p;break}case bs.NoScale:case bs.NoScaleOrReflection:{let J=S.cosDeg(h),tt=S.sinDeg(h),s=(P*J+Y*tt)/this.skeleton.scaleX,e=(B*J+G*tt)/this.skeleton.scaleY,i=Math.sqrt(s*s+e*e);i>1e-5&&(i=1/i),s*=i,e*=i,i=Math.sqrt(s*s+e*e),this.data.transformMode==bs.NoScale&&P*G-Y*B<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(i=-i);let o=Math.PI/2+Math.atan2(e,s),a=Math.cos(o)*i,p=Math.sin(o)*i,m=S.cosDeg(U)*x,g=S.cosDeg(90+R)*A,w=S.sinDeg(U)*x,b=S.sinDeg(90+R)*A;this.a=s*m+a*w,this.b=s*g+a*b,this.c=e*m+p*w,this.d=e*g+p*b;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY;}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY;}getWorldRotationX(){return Math.atan2(this.c,this.a)*S.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*S.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*S.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*S.radDeg;return}let l=t.a,h=t.b,x=t.c,A=t.d,U=1/(l*A-h*x),R=this.worldX-t.worldX,y=this.worldY-t.worldY;this.ax=R*A*U-y*h*U,this.ay=y*l*U-R*x*U;let P=U*A,Y=U*l,B=U*h,G=U*x,J=P*this.a-B*this.c,tt=P*this.b-B*this.d,s=Y*this.c-G*this.a,e=Y*this.d-G*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(J*J+s*s),this.ascaleX>1e-4){let i=J*e-tt*s;this.ascaleY=i/this.ascaleX,this.ashearY=Math.atan2(J*tt+s*e,i)*S.radDeg,this.arotation=Math.atan2(s,J)*S.radDeg;}else this.ascaleX=0,this.ascaleY=Math.sqrt(tt*tt+e*e),this.ashearY=0,this.arotation=90-Math.atan2(e,tt)*S.radDeg;}worldToLocal(t){let l=1/(this.a*this.d-this.b*this.c),h=t.x-this.worldX,x=t.y-this.worldY;return t.x=h*this.d*l-x*this.b*l,t.y=x*this.a*l-h*this.c*l,t}localToWorld(t){let l=t.x,h=t.y;return t.x=l*this.a+h*this.b+this.worldX,t.y=l*this.c+h*this.d+this.worldY,t}worldToLocalRotation(t){let l=S.sinDeg(t),h=S.cosDeg(t);return Math.atan2(this.a*l-this.c*h,this.d*h-this.b*l)*S.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let l=S.sinDeg(t),h=S.cosDeg(t);return Math.atan2(h*this.c+l*this.d,h*this.a+l*this.b)*S.radDeg}rotateWorld(t){let l=this.a,h=this.b,x=this.c,A=this.d,U=S.cosDeg(t),R=S.sinDeg(t);this.a=U*l-R*x,this.b=U*h-R*A,this.c=R*l+U*x,this.d=R*h+U*A;}},Ri=class{constructor(t,l,h){this.name=t,this.order=l,this.skinRequired=h;}},Ji=class{constructor(t,l="",h=null){this.pathPrefix=null,this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=l,this.downloader=h||new li;}start(t){return this.toLoad++,this.pathPrefix+t}success(t,l,h){this.toLoad--,this.loaded++,this.assets[l]=h,t&&t(l,h);}error(t,l,h){this.toLoad--,this.loaded++,this.errors[l]=h,t&&t(l,h);}loadAll(){return new Promise((t,l)=>{let h=()=>{if(this.isLoadingComplete()){this.hasErrors()?l(this.errors):t(this);return}requestAnimationFrame(h);};requestAnimationFrame(h);})}setRawDataURI(t,l){this.downloader.rawDataUris[this.pathPrefix+t]=l;}loadBinary(t,l=null,h=null){t=this.start(t),this.downloader.downloadBinary(t,x=>{this.success(l,t,x);},(x,A)=>{this.error(h,t,`Couldn't load binary ${t}: status ${x}, ${A}`);});}loadText(t,l=null,h=null){t=this.start(t),this.downloader.downloadText(t,x=>{this.success(l,t,x);},(x,A)=>{this.error(h,t,`Couldn't load text ${t}: status ${x}, ${A}`);});}loadJson(t,l=null,h=null){t=this.start(t),this.downloader.downloadJson(t,x=>{this.success(l,t,x);},(x,A)=>{this.error(h,t,`Couldn't load JSON ${t}: status ${x}, ${A}`);});}loadTexture(t,l=null,h=null){if(t=this.start(t),!(typeof window<"u"&&typeof navigator<"u"&&window.document))fetch(t,{mode:"cors"}).then(x=>x.ok?x.blob():(this.error(h,t,`Couldn't load image: ${t}`),null)).then(x=>x?createImageBitmap(x,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(x=>{x&&this.success(l,t,this.textureLoader(x));});else {let x=new Image;x.crossOrigin="anonymous",x.onload=()=>{this.success(l,t,this.textureLoader(x));},x.onerror=()=>{this.error(h,t,`Couldn't load image: ${t}`);},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),x.src=t;}}loadTextureAtlas(t,l=null,h=null,x=null){let A=t.lastIndexOf("/"),U=A>=0?t.substring(0,A+1):"";t=this.start(t),this.downloader.downloadText(t,R=>{try{let y=new xr(R),P=y.pages.length,Y=!1;for(let B of y.pages)this.loadTexture(x==null?U+B.name:x[B.name],(G,J)=>{Y||(B.setTexture(J),--P==0&&this.success(l,t,y));},(G,J)=>{Y||this.error(h,t,`Couldn't load texture atlas ${t} page image: ${G}`),Y=!0;});}catch(y){this.error(h,t,`Couldn't parse texture atlas ${t}: ${y.message}`);}},(R,y)=>{this.error(h,t,`Couldn't load texture atlas ${t}: status ${R}, ${y}`);});}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let l=this.assets[t];if(l)return l;let h=this.errors[t];throw Error("Asset not found: "+t+(h?`
`+h:""))}remove(t){t=this.pathPrefix+t;let l=this.assets[t];return l.dispose&&l.dispose(),delete this.assets[t],l}removeAll(){for(let t in this.assets){let l=this.assets[t];l.dispose&&l.dispose();}this.assets={};}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll();}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},li=class{constructor(){this.callbacks={},this.rawDataUris={};}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let l=t.indexOf("base64,");return l!=-1?(l+=7,atob(t.substr(l))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var l=window.atob(t),h=l.length,x=new Uint8Array(h),A=0;A<h;A++)x[A]=l.charCodeAt(A);return x}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let l=t.indexOf("base64,");if(l==-1)throw new Error("Not a binary data URI.");return l+=7,this.base64ToUint8Array(t.substr(l))}downloadText(t,l,h){if(this.start(t,l,h))return;if(this.rawDataUris[t]){try{let U=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(U));}catch(U){this.finish(t,400,JSON.stringify(U));}return}let x=new XMLHttpRequest;x.overrideMimeType("text/html"),x.open("GET",t,true);let A=()=>{this.finish(t,x.status,x.responseText);};x.onload=A,x.onerror=A,x.send();}downloadJson(t,l,h){this.downloadText(t,x=>{l(JSON.parse(x));},h);}downloadBinary(t,l,h){if(this.start(t,l,h))return;if(this.rawDataUris[t]){try{let U=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(U));}catch(U){this.finish(t,400,JSON.stringify(U));}return}let x=new XMLHttpRequest;x.open("GET",t,true),x.responseType="arraybuffer";let A=()=>{this.finish(t,x.status,x.response);};x.onload=()=>{x.status==200||x.status==0?this.finish(t,200,new Uint8Array(x.response)):A();},x.onerror=A,x.send();}start(t,l,h){let x=this.callbacks[t];try{if(x)return !0;this.callbacks[t]=x=[];}finally{x.push(l,h);}}finish(t,l,h){let x=this.callbacks[t];delete this.callbacks[t];let A=l==200||l==0?[h]:[l,h];for(let U=A.length-1,R=x.length;U<R;U+=2)x[U].apply(null,A);}},ai=class{constructor(t,l){if(this.data=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!l)throw new Error("data cannot be null.");this.time=t,this.data=l;}},_i=class{constructor(t){this.name=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t;}},mi=class{constructor(t,l){if(this.data=null,this.bones=null,this.target=null,this.bendDirection=0,this.compress=false,this.stretch=false,this.mix=1,this.softness=0,this.active=false,!t)throw new Error("data cannot be null.");if(!l)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let h=0;h<t.bones.length;h++)this.bones.push(l.findBone(t.bones[h].name));this.target=l.findBone(t.target.name);}isActive(){return this.active}update(){if(this.mix==0)return;let t=this.target,l=this.bones;switch(l.length){case 1:this.apply1(l[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(l[0],l[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(t,l,h,x,A,U,R){let y=t.parent,P=y.a,Y=y.b,B=y.c,G=y.d,J=-t.ashearX-t.arotation,tt=0,s=0;switch(t.data.transformMode){case bs.OnlyTranslation:tt=l-t.worldX,s=h-t.worldY;break;case bs.NoRotationOrReflection:let o=Math.abs(P*G-Y*B)/(P*P+B*B),a=P/t.skeleton.scaleX,p=B/t.skeleton.scaleY;Y=-p*o*t.skeleton.scaleX,G=a*o*t.skeleton.scaleY,J+=Math.atan2(p,a)*S.radDeg;default:let m=l-y.worldX,g=h-y.worldY,w=P*G-Y*B;tt=(m*G-g*Y)/w-t.ax,s=(g*P-m*B)/w-t.ay;}J+=Math.atan2(s,tt)*S.radDeg,t.ascaleX<0&&(J+=180),J>180?J-=360:J<-180&&(J+=360);let e=t.ascaleX,i=t.ascaleY;if(x||A){switch(t.data.transformMode){case bs.NoScale:case bs.NoScaleOrReflection:tt=l-t.worldX,s=h-t.worldY;}let o=t.data.length*e,a=Math.sqrt(tt*tt+s*s);if(x&&a<o||A&&a>o&&o>1e-4){let p=(a/o-1)*R+1;e*=p,U&&(i*=p);}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+J*R,e,i,t.ashearX,t.ashearY);}apply2(t,l,h,x,A,U,R,y,P){let Y=t.ax,B=t.ay,G=t.ascaleX,J=t.ascaleY,tt=G,s=J,e=l.ascaleX,i=0,o=0,a=0;G<0?(G=-G,i=180,a=-1):(i=0,a=1),J<0&&(J=-J,a=-a),e<0?(e=-e,o=180):o=0;let p=l.ax,m=0,g=0,w=0,b=t.a,C=t.b,F=t.c,L=t.d,N=Math.abs(G-J)<=1e-4;!N||U?(m=0,g=b*p+t.worldX,w=F*p+t.worldY):(m=l.ay,g=b*p+C*m+t.worldX,w=F*p+L*m+t.worldY);let O=t.parent;b=O.a,C=O.b,F=O.c,L=O.d;let Z=1/(b*L-C*F),q=g-O.worldX,j=w-O.worldY,_=(q*L-j*C)*Z-Y,H=(j*b-q*F)*Z-B,K=Math.sqrt(_*_+H*H),rt=l.data.length*e,lt,vt;if(K<1e-4){this.apply1(t,h,x,false,U,false,P),l.updateWorldTransformWith(p,m,0,l.ascaleX,l.ascaleY,l.ashearX,l.ashearY);return}q=h-O.worldX,j=x-O.worldY;let pt=(q*L-j*C)*Z-Y,xt=(j*b-q*F)*Z-B,Et=pt*pt+xt*xt;if(y!=0){y*=G*(e+1)*.5;let Ut=Math.sqrt(Et),St=Ut-K-rt*G+y;if(St>0){let It=Math.min(1,St/(y*2))-1;It=(St-y*(1-It*It))/Ut,pt-=It*pt,xt-=It*xt,Et=pt*pt+xt*xt;}}t:if(N){rt*=G;let Ut=(Et-K*K-rt*rt)/(2*K*rt);Ut<-1?(Ut=-1,vt=Math.PI*A):Ut>1?(Ut=1,vt=0,U&&(b=(Math.sqrt(Et)/(K+rt)-1)*P+1,tt*=b,R&&(s*=b))):vt=Math.acos(Ut)*A,b=K+rt*Ut,C=rt*Math.sin(vt),lt=Math.atan2(xt*b-pt*C,pt*b+xt*C);}else {b=G*rt,C=J*rt;let Ut=b*b,St=C*C,It=Math.atan2(xt,pt);F=St*K*K+Ut*Et-Ut*St;let Ht=-2*St*K,Oe=St-Ut;if(L=Ht*Ht-4*Oe*F,L>=0){let vs=Math.sqrt(L);Ht<0&&(vs=-vs),vs=-(Ht+vs)*.5;let ds=vs/Oe,As=F/vs,ps=Math.abs(ds)<Math.abs(As)?ds:As;if(ps*ps<=Et){j=Math.sqrt(Et-ps*ps)*A,lt=It-Math.atan2(j,ps),vt=Math.atan2(j/J,(ps-K)/G);break t}}let xe=S.PI,We=K-b,Ke=We*We,He=0,ls=0,ne=K+b,ze=ne*ne,_e=0;F=-b*K/(Ut-St),F>=-1&&F<=1&&(F=Math.acos(F),q=b*Math.cos(F)+K,j=C*Math.sin(F),L=q*q+j*j,L<Ke&&(xe=F,Ke=L,We=q,He=j),L>ze&&(ls=F,ze=L,ne=q,_e=j)),Et<=(Ke+ze)*.5?(lt=It-Math.atan2(He*A,We),vt=xe*A):(lt=It-Math.atan2(_e*A,ne),vt=ls*A);}let Ft=Math.atan2(m,p)*a,Vt=t.arotation;lt=(lt-Ft)*S.radDeg+i-Vt,lt>180?lt-=360:lt<-180&&(lt+=360),t.updateWorldTransformWith(Y,B,Vt+lt*P,tt,s,0,0),Vt=l.arotation,vt=((vt+Ft)*S.radDeg-l.ashearX)*a+o-Vt,vt>180?vt-=360:vt<-180&&(vt+=360),l.updateWorldTransformWith(p,m,Vt+vt*P,l.ascaleX,l.ascaleY,l.ashearX,l.ashearY);}},Ar=class extends Ri{constructor(t){super(t,0,false),this.bones=new Array,this.target=null,this.bendDirection=1,this.compress=false,this.stretch=false,this.uniform=false,this.mix=1,this.softness=0;}},ki=class extends Ri{constructor(t){super(t,0,false),this.bones=new Array,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0;}},Ys;(function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent";})(Ys||(Ys={}));var ms;(function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional";})(ms||(ms={}));var Ls;(function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale";})(Ls||(Ls={}));var Gs=class{constructor(t,l){if(this.data=null,this.bones=null,this.target=null,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=false,!t)throw new Error("data cannot be null.");if(!l)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let h=0,x=t.bones.length;h<x;h++)this.bones.push(l.findBone(t.bones[h].name));this.target=l.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY;}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof Ps))return;let l=this.mixRotate,h=this.mixX,x=this.mixY;if(l==0&&h==0&&x==0)return;let A=this.data,U=A.rotateMode==Ls.Tangent,R=A.rotateMode==Ls.ChainScale,y=this.bones,P=y.length,Y=U?P:P+1,B=E.setArraySize(this.spaces,Y),G=R?this.lengths=E.setArraySize(this.lengths,P):null,J=this.spacing;switch(A.spacingMode){case ms.Percent:if(R)for(let m=0,g=Y-1;m<g;m++){let w=y[m],b=w.data.length;if(b<Gs.epsilon)G[m]=0;else {let C=b*w.a,F=b*w.c;G[m]=Math.sqrt(C*C+F*F);}}E.arrayFill(B,1,Y,J);break;case ms.Proportional:let a=0;for(let m=0,g=Y-1;m<g;){let w=y[m],b=w.data.length;if(b<Gs.epsilon)R&&(G[m]=0),B[++m]=J;else {let C=b*w.a,F=b*w.c,L=Math.sqrt(C*C+F*F);R&&(G[m]=L),B[++m]=L,a+=L;}}if(a>0){a=Y/a*J;for(let m=1;m<Y;m++)B[m]*=a;}break;default:let p=A.spacingMode==ms.Length;for(let m=0,g=Y-1;m<g;){let w=y[m],b=w.data.length;if(b<Gs.epsilon)R&&(G[m]=0),B[++m]=J;else {let C=b*w.a,F=b*w.c,L=Math.sqrt(C*C+F*F);R&&(G[m]=L),B[++m]=(p?b+J:J)*L/b;}}}let tt=this.computeWorldPositions(t,Y,U),s=tt[0],e=tt[1],i=A.offsetRotation,o=false;if(i==0)o=A.rotateMode==Ls.Chain;else {o=false;let a=this.target.bone;i*=a.a*a.d-a.b*a.c>0?S.degRad:-S.degRad;}for(let a=0,p=3;a<P;a++,p+=3){let m=y[a];m.worldX+=(s-m.worldX)*h,m.worldY+=(e-m.worldY)*x;let g=tt[p],w=tt[p+1],b=g-s,C=w-e;if(R){let F=G[a];if(F!=0){let L=(Math.sqrt(b*b+C*C)/F-1)*l+1;m.a*=L,m.c*=L;}}if(s=g,e=w,l>0){let F=m.a,L=m.b,N=m.c,O=m.d,Z=0,q=0,j=0;if(U?Z=tt[p-1]:B[a+1]==0?Z=tt[p+2]:Z=Math.atan2(C,b),Z-=Math.atan2(N,F),o){q=Math.cos(Z),j=Math.sin(Z);let _=m.data.length;s+=(_*(q*F-j*N)-b)*l,e+=(_*(j*F+q*N)-C)*l;}else Z+=i;Z>S.PI?Z-=S.PI2:Z<-S.PI&&(Z+=S.PI2),Z*=l,q=Math.cos(Z),j=Math.sin(Z),m.a=q*F-j*N,m.b=q*L-j*O,m.c=j*F+q*N,m.d=j*L+q*O;}m.updateAppliedTransform();}}computeWorldPositions(t,l,h){let x=this.target,A=this.position,U=this.spaces,R=E.setArraySize(this.positions,l*3+2),y=null,P=t.closed,Y=t.worldVerticesLength,B=Y/6,G=Gs.NONE;if(!t.constantSpeed){let H=t.lengths;B-=P?1:2;let K=H[B];this.data.positionMode==Ys.Percent&&(A*=K);let rt;switch(this.data.spacingMode){case ms.Percent:rt=K;break;case ms.Proportional:rt=K/l;break;default:rt=1;}y=E.setArraySize(this.world,8);for(let lt=0,vt=0,pt=0;lt<l;lt++,vt+=3){let xt=U[lt]*rt;A+=xt;let Et=A;if(P)Et%=K,Et<0&&(Et+=K),pt=0;else if(Et<0){G!=Gs.BEFORE&&(G=Gs.BEFORE,t.computeWorldVertices(x,2,4,y,0,2)),this.addBeforePosition(Et,y,0,R,vt);continue}else if(Et>K){G!=Gs.AFTER&&(G=Gs.AFTER,t.computeWorldVertices(x,Y-6,4,y,0,2)),this.addAfterPosition(Et-K,y,0,R,vt);continue}for(;;pt++){let Ft=H[pt];if(!(Et>Ft)){if(pt==0)Et/=Ft;else {let Vt=H[pt-1];Et=(Et-Vt)/(Ft-Vt);}break}}pt!=G&&(G=pt,P&&pt==B?(t.computeWorldVertices(x,Y-4,4,y,0,2),t.computeWorldVertices(x,0,4,y,4,2)):t.computeWorldVertices(x,pt*6+2,8,y,0,2)),this.addCurvePosition(Et,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],R,vt,h||lt>0&&xt==0);}return R}P?(Y+=2,y=E.setArraySize(this.world,Y),t.computeWorldVertices(x,2,Y-4,y,0,2),t.computeWorldVertices(x,0,2,y,Y-4,2),y[Y-2]=y[0],y[Y-1]=y[1]):(B--,Y-=4,y=E.setArraySize(this.world,Y),t.computeWorldVertices(x,2,Y,y,0,2));let J=E.setArraySize(this.curves,B),tt=0,s=y[0],e=y[1],i=0,o=0,a=0,p=0,m=0,g=0,w=0,b=0,C=0,F=0,L=0,N=0,O=0,Z=0;for(let H=0,K=2;H<B;H++,K+=6)i=y[K],o=y[K+1],a=y[K+2],p=y[K+3],m=y[K+4],g=y[K+5],w=(s-i*2+a)*.1875,b=(e-o*2+p)*.1875,C=((i-a)*3-s+m)*.09375,F=((o-p)*3-e+g)*.09375,L=w*2+C,N=b*2+F,O=(i-s)*.75+w+C*.16666667,Z=(o-e)*.75+b+F*.16666667,tt+=Math.sqrt(O*O+Z*Z),O+=L,Z+=N,L+=C,N+=F,tt+=Math.sqrt(O*O+Z*Z),O+=L,Z+=N,tt+=Math.sqrt(O*O+Z*Z),O+=L+C,Z+=N+F,tt+=Math.sqrt(O*O+Z*Z),J[H]=tt,s=m,e=g;this.data.positionMode==Ys.Percent&&(A*=tt);let q;switch(this.data.spacingMode){case ms.Percent:q=tt;break;case ms.Proportional:q=tt/l;break;default:q=1;}let j=this.segments,_=0;for(let H=0,K=0,rt=0,lt=0;H<l;H++,K+=3){let vt=U[H]*q;A+=vt;let pt=A;if(P)pt%=tt,pt<0&&(pt+=tt),rt=0;else if(pt<0){this.addBeforePosition(pt,y,0,R,K);continue}else if(pt>tt){this.addAfterPosition(pt-tt,y,Y-4,R,K);continue}for(;;rt++){let xt=J[rt];if(!(pt>xt)){if(rt==0)pt/=xt;else {let Et=J[rt-1];pt=(pt-Et)/(xt-Et);}break}}if(rt!=G){G=rt;let xt=rt*6;for(s=y[xt],e=y[xt+1],i=y[xt+2],o=y[xt+3],a=y[xt+4],p=y[xt+5],m=y[xt+6],g=y[xt+7],w=(s-i*2+a)*.03,b=(e-o*2+p)*.03,C=((i-a)*3-s+m)*.006,F=((o-p)*3-e+g)*.006,L=w*2+C,N=b*2+F,O=(i-s)*.3+w+C*.16666667,Z=(o-e)*.3+b+F*.16666667,_=Math.sqrt(O*O+Z*Z),j[0]=_,xt=1;xt<8;xt++)O+=L,Z+=N,L+=C,N+=F,_+=Math.sqrt(O*O+Z*Z),j[xt]=_;O+=L,Z+=N,_+=Math.sqrt(O*O+Z*Z),j[8]=_,O+=L+C,Z+=N+F,_+=Math.sqrt(O*O+Z*Z),j[9]=_,lt=0;}for(pt*=_;;lt++){let xt=j[lt];if(!(pt>xt)){if(lt==0)pt/=xt;else {let Et=j[lt-1];pt=lt+(pt-Et)/(xt-Et);}break}}this.addCurvePosition(pt*.1,s,e,i,o,a,p,m,g,R,K,h||H>0&&vt==0);}return R}addBeforePosition(t,l,h,x,A){let U=l[h],R=l[h+1],y=l[h+2]-U,P=l[h+3]-R,Y=Math.atan2(P,y);x[A]=U+t*Math.cos(Y),x[A+1]=R+t*Math.sin(Y),x[A+2]=Y;}addAfterPosition(t,l,h,x,A){let U=l[h+2],R=l[h+3],y=U-l[h],P=R-l[h+1],Y=Math.atan2(P,y);x[A]=U+t*Math.cos(Y),x[A+1]=R+t*Math.sin(Y),x[A+2]=Y;}addCurvePosition(t,l,h,x,A,U,R,y,P,Y,B,G){if(t==0||isNaN(t)){Y[B]=l,Y[B+1]=h,Y[B+2]=Math.atan2(A-h,x-l);return}let J=t*t,tt=J*t,s=1-t,e=s*s,i=e*s,o=s*t,a=o*3,p=s*a,m=a*t,g=l*i+x*p+U*m+y*tt,w=h*i+A*p+R*m+P*tt;Y[B]=g,Y[B+1]=w,G&&(t<.001?Y[B+2]=Math.atan2(A-h,x-l):Y[B+2]=Math.atan2(w-(h*e+A*o*2+R*J),g-(l*e+x*o*2+U*J)));}},hi=Gs;hi.NONE=-1,hi.BEFORE=-2,hi.AFTER=-3,hi.epsilon=1e-5;var Qi=class{constructor(t,l){if(this.data=null,this.bone=null,this.color=null,this.darkColor=null,this.attachment=null,this.attachmentTime=0,this.attachmentState=0,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!l)throw new Error("bone cannot be null.");this.data=t,this.bone=l,this.color=new d,this.darkColor=t.darkColor?new d:null,this.setToSetupPose();}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&((!(t instanceof it)||!(this.attachment instanceof it)||t.deformAttachment!=this.attachment.deformAttachment)&&(this.deform.length=0),this.attachment=t,this.attachmentTime=this.bone.skeleton.time);}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t;}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null;}},Ki=class{constructor(t,l){if(this.data=null,this.bones=null,this.target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new Q,this.active=false,!t)throw new Error("data cannot be null.");if(!l)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let h=0;h<t.bones.length;h++)this.bones.push(l.findBone(t.bones[h].name));this.target=l.findBone(t.target.name);}isActive(){return this.active}update(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld());}applyAbsoluteWorld(){let t=this.mixRotate,l=this.mixX,h=this.mixY,x=this.mixScaleX,A=this.mixScaleY,U=this.mixShearY,R=l!=0||h!=0,y=this.target,P=y.a,Y=y.b,B=y.c,G=y.d,J=P*G-Y*B>0?S.degRad:-S.degRad,tt=this.data.offsetRotation*J,s=this.data.offsetShearY*J,e=this.bones;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(t!=0){let p=a.a,m=a.b,g=a.c,w=a.d,b=Math.atan2(B,P)-Math.atan2(g,p)+tt;b>S.PI?b-=S.PI2:b<-S.PI&&(b+=S.PI2),b*=t;let C=Math.cos(b),F=Math.sin(b);a.a=C*p-F*g,a.b=C*m-F*w,a.c=F*p+C*g,a.d=F*m+C*w;}if(R){let p=this.temp;y.localToWorld(p.set(this.data.offsetX,this.data.offsetY)),a.worldX+=(p.x-a.worldX)*l,a.worldY+=(p.y-a.worldY)*h;}if(x!=0){let p=Math.sqrt(a.a*a.a+a.c*a.c);p!=0&&(p=(p+(Math.sqrt(P*P+B*B)-p+this.data.offsetScaleX)*x)/p),a.a*=p,a.c*=p;}if(A!=0){let p=Math.sqrt(a.b*a.b+a.d*a.d);p!=0&&(p=(p+(Math.sqrt(Y*Y+G*G)-p+this.data.offsetScaleY)*A)/p),a.b*=p,a.d*=p;}if(U>0){let p=a.b,m=a.d,g=Math.atan2(m,p),w=Math.atan2(G,Y)-Math.atan2(B,P)-(g-Math.atan2(a.c,a.a));w>S.PI?w-=S.PI2:w<-S.PI&&(w+=S.PI2),w=g+(w+s)*U;let b=Math.sqrt(p*p+m*m);a.b=Math.cos(w)*b,a.d=Math.sin(w)*b;}a.updateAppliedTransform();}}applyRelativeWorld(){let t=this.mixRotate,l=this.mixX,h=this.mixY,x=this.mixScaleX,A=this.mixScaleY,U=this.mixShearY,R=l!=0||h!=0,y=this.target,P=y.a,Y=y.b,B=y.c,G=y.d,J=P*G-Y*B>0?S.degRad:-S.degRad,tt=this.data.offsetRotation*J,s=this.data.offsetShearY*J,e=this.bones;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(t!=0){let p=a.a,m=a.b,g=a.c,w=a.d,b=Math.atan2(B,P)+tt;b>S.PI?b-=S.PI2:b<-S.PI&&(b+=S.PI2),b*=t;let C=Math.cos(b),F=Math.sin(b);a.a=C*p-F*g,a.b=C*m-F*w,a.c=F*p+C*g,a.d=F*m+C*w;}if(R){let p=this.temp;y.localToWorld(p.set(this.data.offsetX,this.data.offsetY)),a.worldX+=p.x*l,a.worldY+=p.y*h;}if(x!=0){let p=(Math.sqrt(P*P+B*B)-1+this.data.offsetScaleX)*x+1;a.a*=p,a.c*=p;}if(A!=0){let p=(Math.sqrt(Y*Y+G*G)-1+this.data.offsetScaleY)*A+1;a.b*=p,a.d*=p;}if(U>0){let p=Math.atan2(G,Y)-Math.atan2(B,P);p>S.PI?p-=S.PI2:p<-S.PI&&(p+=S.PI2);let m=a.b,g=a.d;p=Math.atan2(g,m)+(p-S.PI/2+s)*U;let w=Math.sqrt(m*m+g*g);a.b=Math.cos(p)*w,a.d=Math.sin(p)*w;}a.updateAppliedTransform();}}applyAbsoluteLocal(){let t=this.mixRotate,l=this.mixX,h=this.mixY,x=this.mixScaleX,A=this.mixScaleY,U=this.mixShearY,R=this.target,y=this.bones;for(let P=0,Y=y.length;P<Y;P++){let B=y[P],G=B.arotation;if(t!=0){let o=R.arotation-G+this.data.offsetRotation;o-=(16384-(16384.499999999996-o/360|0))*360,G+=o*t;}let J=B.ax,tt=B.ay;J+=(R.ax-J+this.data.offsetX)*l,tt+=(R.ay-tt+this.data.offsetY)*h;let s=B.ascaleX,e=B.ascaleY;x!=0&&s!=0&&(s=(s+(R.ascaleX-s+this.data.offsetScaleX)*x)/s),A!=0&&e!=0&&(e=(e+(R.ascaleY-e+this.data.offsetScaleY)*A)/e);let i=B.ashearY;if(U!=0){let o=R.ashearY-i+this.data.offsetShearY;o-=(16384-(16384.499999999996-o/360|0))*360,i+=o*U;}B.updateWorldTransformWith(J,tt,G,s,e,B.ashearX,i);}}applyRelativeLocal(){let t=this.mixRotate,l=this.mixX,h=this.mixY,x=this.mixScaleX,A=this.mixScaleY,U=this.mixShearY,R=this.target,y=this.bones;for(let P=0,Y=y.length;P<Y;P++){let B=y[P],G=B.arotation+(R.arotation+this.data.offsetRotation)*t,J=B.ax+(R.ax+this.data.offsetX)*l,tt=B.ay+(R.ay+this.data.offsetY)*h,s=B.ascaleX*((R.ascaleX-1+this.data.offsetScaleX)*x+1),e=B.ascaleY*((R.ascaleY-1+this.data.offsetScaleY)*A+1),i=B.ashearY+(R.ashearY+this.data.offsetShearY)*U;B.updateWorldTransformWith(J,tt,G,s,e,B.ashearX,i);}}},Sr=class{constructor(t){if(this.data=null,this.bones=null,this.slots=null,this.drawOrder=null,this.ikConstraints=null,this.transformConstraints=null,this.pathConstraints=null,this._updateCache=new Array,this.skin=null,this.color=null,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let l=0;l<t.bones.length;l++){let h=t.bones[l],x;if(!h.parent)x=new br(h,this,null);else {let A=this.bones[h.parent.index];x=new br(h,this,A),A.children.push(x);}this.bones.push(x);}this.slots=new Array,this.drawOrder=new Array;for(let l=0;l<t.slots.length;l++){let h=t.slots[l],x=this.bones[h.boneData.index],A=new Qi(h,x);this.slots.push(A),this.drawOrder.push(A);}this.ikConstraints=new Array;for(let l=0;l<t.ikConstraints.length;l++){let h=t.ikConstraints[l];this.ikConstraints.push(new mi(h,this));}this.transformConstraints=new Array;for(let l=0;l<t.transformConstraints.length;l++){let h=t.transformConstraints[l];this.transformConstraints.push(new Ki(h,this));}this.pathConstraints=new Array;for(let l=0;l<t.pathConstraints.length;l++){let h=t.pathConstraints[l];this.pathConstraints.push(new hi(h,this));}this.color=new d(1,1,1,1),this.updateCache();}updateCache(){let t=this._updateCache;t.length=0;let l=this.bones;for(let Y=0,B=l.length;Y<B;Y++){let G=l[Y];G.sorted=G.data.skinRequired,G.active=!G.sorted;}if(this.skin){let Y=this.skin.bones;for(let B=0,G=this.skin.bones.length;B<G;B++){let J=this.bones[Y[B].index];do J.sorted=false,J.active=true,J=J.parent;while(J)}}let h=this.ikConstraints,x=this.transformConstraints,A=this.pathConstraints,U=h.length,R=x.length,y=A.length,P=U+R+y;t:for(let Y=0;Y<P;Y++){for(let B=0;B<U;B++){let G=h[B];if(G.data.order==Y){this.sortIkConstraint(G);continue t}}for(let B=0;B<R;B++){let G=x[B];if(G.data.order==Y){this.sortTransformConstraint(G);continue t}}for(let B=0;B<y;B++){let G=A[B];if(G.data.order==Y){this.sortPathConstraint(G);continue t}}}for(let Y=0,B=l.length;Y<B;Y++)this.sortBone(l[Y]);}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&E.contains(this.skin.constraints,t.data,true)),!t.active)return;let l=t.target;this.sortBone(l);let h=t.bones,x=h[0];if(this.sortBone(x),h.length==1)this._updateCache.push(t),this.sortReset(x.children);else {let A=h[h.length-1];this.sortBone(A),this._updateCache.push(t),this.sortReset(x.children),A.sorted=true;}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&E.contains(this.skin.constraints,t.data,true)),!t.active)return;let l=t.target,h=l.data.index,x=l.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,h,x),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,h,x);for(let y=0,P=this.data.skins.length;y<P;y++)this.sortPathConstraintAttachment(this.data.skins[y],h,x);let A=l.getAttachment();A instanceof Ps&&this.sortPathConstraintAttachmentWith(A,x);let U=t.bones,R=U.length;for(let y=0;y<R;y++)this.sortBone(U[y]);this._updateCache.push(t);for(let y=0;y<R;y++)this.sortReset(U[y].children);for(let y=0;y<R;y++)U[y].sorted=true;}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&E.contains(this.skin.constraints,t.data,true)),!t.active)return;this.sortBone(t.target);let l=t.bones,h=l.length;if(t.data.local)for(let x=0;x<h;x++){let A=l[x];this.sortBone(A.parent),this.sortBone(A);}else for(let x=0;x<h;x++)this.sortBone(l[x]);this._updateCache.push(t);for(let x=0;x<h;x++)this.sortReset(l[x].children);for(let x=0;x<h;x++)l[x].sorted=true;}sortPathConstraintAttachment(t,l,h){let x=t.attachments[l];if(x)for(let A in x)this.sortPathConstraintAttachmentWith(x[A],h);}sortPathConstraintAttachmentWith(t,l){if(!(t instanceof Ps))return;let h=t.bones;if(!h)this.sortBone(l);else {let x=this.bones;for(let A=0,U=h.length;A<U;){let R=h[A++];for(R+=A;A<R;)this.sortBone(x[h[A++]]);}}}sortBone(t){if(t.sorted)return;let l=t.parent;l&&this.sortBone(l),t.sorted=true,this._updateCache.push(t);}sortReset(t){for(let l=0,h=t.length;l<h;l++){let x=t[l];!x.active||(x.sorted&&this.sortReset(x.children),x.sorted=false);}}updateWorldTransform(){let t=this.bones;for(let h=0,x=t.length;h<x;h++){let A=t[h];A.ax=A.x,A.ay=A.y,A.arotation=A.rotation,A.ascaleX=A.scaleX,A.ascaleY=A.scaleY,A.ashearX=A.shearX,A.ashearY=A.shearY;}let l=this._updateCache;for(let h=0,x=l.length;h<x;h++)l[h].update();}updateWorldTransformWith(t){let l=this.getRootBone(),h=t.a,x=t.b,A=t.c,U=t.d;l.worldX=h*this.x+x*this.y+t.worldX,l.worldY=A*this.x+U*this.y+t.worldY;let R=l.rotation+90+l.shearY,y=S.cosDeg(l.rotation+l.shearX)*l.scaleX,P=S.cosDeg(R)*l.scaleY,Y=S.sinDeg(l.rotation+l.shearX)*l.scaleX,B=S.sinDeg(R)*l.scaleY;l.a=(h*y+x*Y)*this.scaleX,l.b=(h*P+x*B)*this.scaleX,l.c=(A*y+U*Y)*this.scaleY,l.d=(A*P+U*B)*this.scaleY;let G=this._updateCache;for(let J=0,tt=G.length;J<tt;J++){let s=G[J];s!=l&&s.update();}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose();}setBonesToSetupPose(){let t=this.bones;for(let A=0,U=t.length;A<U;A++)t[A].setToSetupPose();let l=this.ikConstraints;for(let A=0,U=l.length;A<U;A++){let R=l[A];R.mix=R.data.mix,R.softness=R.data.softness,R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch;}let h=this.transformConstraints;for(let A=0,U=h.length;A<U;A++){let R=h[A],y=R.data;R.mixRotate=y.mixRotate,R.mixX=y.mixX,R.mixY=y.mixY,R.mixScaleX=y.mixScaleX,R.mixScaleY=y.mixScaleY,R.mixShearY=y.mixShearY;}let x=this.pathConstraints;for(let A=0,U=x.length;A<U;A++){let R=x[A],y=R.data;R.position=y.position,R.spacing=y.spacing,R.mixRotate=y.mixRotate,R.mixX=y.mixX,R.mixY=y.mixY;}}setSlotsToSetupPose(){let t=this.slots;E.arrayCopy(t,0,this.drawOrder,0,t.length);for(let l=0,h=t.length;l<h;l++)t[l].setToSetupPose();}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let l=this.bones;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.data.name==t)return A}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let l=this.slots;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.data.name==t)return A}return null}setSkinByName(t){let l=this.data.findSkin(t);if(!l)throw new Error("Skin not found: "+t);this.setSkin(l);}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else {let l=this.slots;for(let h=0,x=l.length;h<x;h++){let A=l[h],U=A.data.attachmentName;if(U){let R=t.getAttachment(h,U);R&&A.setAttachment(R);}}}this.skin=t,this.updateCache();}}getAttachmentByName(t,l){return this.getAttachment(this.data.findSlot(t).index,l)}getAttachment(t,l){if(!l)throw new Error("attachmentName cannot be null.");if(this.skin){let h=this.skin.getAttachment(t,l);if(h)return h}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,l):null}setAttachment(t,l){if(!t)throw new Error("slotName cannot be null.");let h=this.slots;for(let x=0,A=h.length;x<A;x++){let U=h[x];if(U.data.name==t){let R=null;if(l&&(R=this.getAttachment(x,l),!R))throw new Error("Attachment not found: "+l+", for slot: "+t);U.setAttachment(R);return}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let l=this.ikConstraints;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.data.name==t)return A}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let l=this.transformConstraints;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.data.name==t)return A}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let l=this.pathConstraints;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.data.name==t)return A}return null}getBoundsRect(){let t=new Q,l=new Q;return this.getBounds(t,l),{x:t.x,y:t.y,width:l.x,height:l.y}}getBounds(t,l,h=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!l)throw new Error("size cannot be null.");let x=this.drawOrder,A=Number.POSITIVE_INFINITY,U=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,y=Number.NEGATIVE_INFINITY;for(let P=0,Y=x.length;P<Y;P++){let B=x[P];if(!B.bone.active)continue;let G=0,J=null,tt=B.getAttachment();if(tt instanceof qe)G=8,J=E.setArraySize(h,G,0),tt.computeWorldVertices(B.bone,J,0,2);else if(tt instanceof zs){let s=tt;G=s.worldVerticesLength,J=E.setArraySize(h,G,0),s.computeWorldVertices(B,0,G,J,0,2);}if(J)for(let s=0,e=J.length;s<e;s+=2){let i=J[s],o=J[s+1];A=Math.min(A,i),U=Math.min(U,o),R=Math.max(R,i),y=Math.max(y,o);}}t.set(A,U),l.set(R-A,y-U);}update(t){this.time+=t;}},$i=class{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null;}findBone(t){if(!t)throw new Error("boneName cannot be null.");let l=this.bones;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.name==t)return A}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let l=this.slots;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.name==t)return A}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let l=this.skins;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.name==t)return A}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let l=this.events;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.name==t)return A}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let l=this.animations;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.name==t)return A}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let l=this.ikConstraints;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.name==t)return A}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let l=this.transformConstraints;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.name==t)return A}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let l=this.pathConstraints;for(let h=0,x=l.length;h<x;h++){let A=l[h];if(A.name==t)return A}return null}},Yi=class{constructor(t=0,l=null,h=null){this.slotIndex=t,this.name=l,this.attachment=h;}},gi=class{constructor(t){if(this.name=null,this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t;}setAttachment(t,l,h){if(!h)throw new Error("attachment cannot be null.");let x=this.attachments;t>=x.length&&(x.length=t+1),x[t]||(x[t]={}),x[t][l]=h;}addSkin(t){for(let x=0;x<t.bones.length;x++){let A=t.bones[x],U=false;for(let R=0;R<this.bones.length;R++)if(this.bones[R]==A){U=true;break}U||this.bones.push(A);}for(let x=0;x<t.constraints.length;x++){let A=t.constraints[x],U=false;for(let R=0;R<this.constraints.length;R++)if(this.constraints[R]==A){U=true;break}U||this.constraints.push(A);}let l=t.getAttachments();for(let x=0;x<l.length;x++){var h=l[x];this.setAttachment(h.slotIndex,h.name,h.attachment);}}copySkin(t){for(let x=0;x<t.bones.length;x++){let A=t.bones[x],U=false;for(let R=0;R<this.bones.length;R++)if(this.bones[R]==A){U=true;break}U||this.bones.push(A);}for(let x=0;x<t.constraints.length;x++){let A=t.constraints[x],U=false;for(let R=0;R<this.constraints.length;R++)if(this.constraints[R]==A){U=true;break}U||this.constraints.push(A);}let l=t.getAttachments();for(let x=0;x<l.length;x++){var h=l[x];!h.attachment||(h.attachment instanceof zs?(h.attachment=h.attachment.newLinkedMesh(),this.setAttachment(h.slotIndex,h.name,h.attachment)):(h.attachment=h.attachment.copy(),this.setAttachment(h.slotIndex,h.name,h.attachment)));}}getAttachment(t,l){let h=this.attachments[t];return h?h[l]:null}removeAttachment(t,l){let h=this.attachments[t];h&&(h[l]=null);}getAttachments(){let t=new Array;for(var l=0;l<this.attachments.length;l++){let h=this.attachments[l];if(h)for(let x in h){let A=h[x];A&&t.push(new Yi(l,x,A));}}return t}getAttachmentsForSlot(t,l){let h=this.attachments[t];if(h)for(let x in h){let A=h[x];A&&l.push(new Yi(t,x,A));}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0;}attachAll(t,l){let h=0;for(let x=0;x<t.slots.length;x++){let A=t.slots[x],U=A.getAttachment();if(U&&h<l.attachments.length){let R=l.attachments[h];for(let y in R){let P=R[y];if(U==P){let Y=this.getAttachment(h,y);Y&&A.setAttachment(Y);break}}}h++;}}},Fi=class{constructor(t,l,h){if(this.index=0,this.name=null,this.boneData=null,this.color=new d(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=null,t<0)throw new Error("index must be >= 0.");if(!l)throw new Error("name cannot be null.");if(!h)throw new Error("boneData cannot be null.");this.index=t,this.name=l,this.boneData=h;}},Ms;(function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen";})(Ms||(Ms={}));var Pi=class extends Ri{constructor(t){super(t,0,false),this.bones=new Array,this.target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=false,this.local=false;}},Jr=class{constructor(t){this.scale=1,this.attachmentLoader=null,this.linkedMeshes=new Array,this.attachmentLoader=t;}readSkeletonData(t){let l=this.scale,h=new $i;h.name="";let x=new _r(t),A=x.readInt32(),U=x.readInt32();h.hash=U==0&&A==0?null:U.toString(16)+A.toString(16),h.version=x.readString(),h.x=x.readFloat(),h.y=x.readFloat(),h.width=x.readFloat(),h.height=x.readFloat();let R=x.readBoolean();R&&(h.fps=x.readFloat(),h.imagesPath=x.readString(),h.audioPath=x.readString());let y=0;y=x.readInt(true);for(let Y=0;Y<y;Y++)x.strings.push(x.readString());y=x.readInt(true);for(let Y=0;Y<y;Y++){let B=x.readString(),G=Y==0?null:h.bones[x.readInt(true)],J=new Mr(Y,B,G);J.rotation=x.readFloat(),J.x=x.readFloat()*l,J.y=x.readFloat()*l,J.scaleX=x.readFloat(),J.scaleY=x.readFloat(),J.shearX=x.readFloat(),J.shearY=x.readFloat(),J.length=x.readFloat()*l,J.transformMode=x.readInt(true),J.skinRequired=x.readBoolean(),R&&d.rgba8888ToColor(J.color,x.readInt32()),h.bones.push(J);}y=x.readInt(true);for(let Y=0;Y<y;Y++){let B=x.readString(),G=h.bones[x.readInt(true)],J=new Fi(Y,B,G);d.rgba8888ToColor(J.color,x.readInt32());let tt=x.readInt32();tt!=-1&&d.rgb888ToColor(J.darkColor=new d,tt),J.attachmentName=x.readStringRef(),J.blendMode=x.readInt(true),h.slots.push(J);}y=x.readInt(true);for(let Y=0,B;Y<y;Y++){let G=new Ar(x.readString());G.order=x.readInt(true),G.skinRequired=x.readBoolean(),B=x.readInt(true);for(let J=0;J<B;J++)G.bones.push(h.bones[x.readInt(true)]);G.target=h.bones[x.readInt(true)],G.mix=x.readFloat(),G.softness=x.readFloat()*l,G.bendDirection=x.readByte(),G.compress=x.readBoolean(),G.stretch=x.readBoolean(),G.uniform=x.readBoolean(),h.ikConstraints.push(G);}y=x.readInt(true);for(let Y=0,B;Y<y;Y++){let G=new Pi(x.readString());G.order=x.readInt(true),G.skinRequired=x.readBoolean(),B=x.readInt(true);for(let J=0;J<B;J++)G.bones.push(h.bones[x.readInt(true)]);G.target=h.bones[x.readInt(true)],G.local=x.readBoolean(),G.relative=x.readBoolean(),G.offsetRotation=x.readFloat(),G.offsetX=x.readFloat()*l,G.offsetY=x.readFloat()*l,G.offsetScaleX=x.readFloat(),G.offsetScaleY=x.readFloat(),G.offsetShearY=x.readFloat(),G.mixRotate=x.readFloat(),G.mixX=x.readFloat(),G.mixY=x.readFloat(),G.mixScaleX=x.readFloat(),G.mixScaleY=x.readFloat(),G.mixShearY=x.readFloat(),h.transformConstraints.push(G);}y=x.readInt(true);for(let Y=0,B;Y<y;Y++){let G=new ki(x.readString());G.order=x.readInt(true),G.skinRequired=x.readBoolean(),B=x.readInt(true);for(let J=0;J<B;J++)G.bones.push(h.bones[x.readInt(true)]);G.target=h.slots[x.readInt(true)],G.positionMode=x.readInt(true),G.spacingMode=x.readInt(true),G.rotateMode=x.readInt(true),G.offsetRotation=x.readFloat(),G.position=x.readFloat(),G.positionMode==Ys.Fixed&&(G.position*=l),G.spacing=x.readFloat(),(G.spacingMode==ms.Length||G.spacingMode==ms.Fixed)&&(G.spacing*=l),G.mixRotate=x.readFloat(),G.mixX=x.readFloat(),G.mixY=x.readFloat(),h.pathConstraints.push(G);}let P=this.readSkin(x,h,true,R);P&&(h.defaultSkin=P,h.skins.push(P));{let Y=h.skins.length;for(E.setArraySize(h.skins,y=Y+x.readInt(true));Y<y;Y++)h.skins[Y]=this.readSkin(x,h,false,R);}y=this.linkedMeshes.length;for(let Y=0;Y<y;Y++){let B=this.linkedMeshes[Y],G=(B.skin?h.findSkin(B.skin):h.defaultSkin).getAttachment(B.slotIndex,B.parent);B.mesh.deformAttachment=B.inheritDeform?G:B.mesh,B.mesh.setParentMesh(G),B.mesh.updateUVs();}this.linkedMeshes.length=0,y=x.readInt(true);for(let Y=0;Y<y;Y++){let B=new _i(x.readStringRef());B.intValue=x.readInt(false),B.floatValue=x.readFloat(),B.stringValue=x.readString(),B.audioPath=x.readString(),B.audioPath&&(B.volume=x.readFloat(),B.balance=x.readFloat()),h.events.push(B);}y=x.readInt(true);for(let Y=0;Y<y;Y++)h.animations.push(this.readAnimation(x,x.readString(),h));return h}readSkin(t,l,h,x){let A=null,U=0;if(h){if(U=t.readInt(true),U==0)return null;A=new gi("default");}else {A=new gi(t.readStringRef()),A.bones.length=t.readInt(true);for(let R=0,y=A.bones.length;R<y;R++)A.bones[R]=l.bones[t.readInt(true)];for(let R=0,y=t.readInt(true);R<y;R++)A.constraints.push(l.ikConstraints[t.readInt(true)]);for(let R=0,y=t.readInt(true);R<y;R++)A.constraints.push(l.transformConstraints[t.readInt(true)]);for(let R=0,y=t.readInt(true);R<y;R++)A.constraints.push(l.pathConstraints[t.readInt(true)]);U=t.readInt(true);}for(let R=0;R<U;R++){let y=t.readInt(true);for(let P=0,Y=t.readInt(true);P<Y;P++){let B=t.readStringRef(),G=this.readAttachment(t,l,A,y,B,x);G&&A.setAttachment(y,B,G);}}return A}readAttachment(t,l,h,x,A,U){let R=this.scale,y=t.readStringRef();switch(y||(y=A),t.readByte()){case qs.Region:{let P=t.readStringRef(),Y=t.readFloat(),B=t.readFloat(),G=t.readFloat(),J=t.readFloat(),tt=t.readFloat(),s=t.readFloat(),e=t.readFloat(),i=t.readInt32();P||(P=y);let o=this.attachmentLoader.newRegionAttachment(h,y,P);return o?(o.path=P,o.x=B*R,o.y=G*R,o.scaleX=J,o.scaleY=tt,o.rotation=Y,o.width=s*R,o.height=e*R,d.rgba8888ToColor(o.color,i),o.updateOffset(),o):null}case qs.BoundingBox:{let P=t.readInt(true),Y=this.readVertices(t,P),B=U?t.readInt32():0,G=this.attachmentLoader.newBoundingBoxAttachment(h,y);return G?(G.worldVerticesLength=P<<1,G.vertices=Y.vertices,G.bones=Y.bones,U&&d.rgba8888ToColor(G.color,B),G):null}case qs.Mesh:{let P=t.readStringRef(),Y=t.readInt32(),B=t.readInt(true),G=this.readFloatArray(t,B<<1,1),J=this.readShortArray(t),tt=this.readVertices(t,B),s=t.readInt(true),e=null,i=0,o=0;U&&(e=this.readShortArray(t),i=t.readFloat(),o=t.readFloat()),P||(P=y);let a=this.attachmentLoader.newMeshAttachment(h,y,P);return a?(a.path=P,d.rgba8888ToColor(a.color,Y),a.bones=tt.bones,a.vertices=tt.vertices,a.worldVerticesLength=B<<1,a.triangles=J,a.regionUVs=G,a.updateUVs(),a.hullLength=s<<1,U&&(a.edges=e,a.width=i*R,a.height=o*R),a):null}case qs.LinkedMesh:{let P=t.readStringRef(),Y=t.readInt32(),B=t.readStringRef(),G=t.readStringRef(),J=t.readBoolean(),tt=0,s=0;U&&(tt=t.readFloat(),s=t.readFloat()),P||(P=y);let e=this.attachmentLoader.newMeshAttachment(h,y,P);return e?(e.path=P,d.rgba8888ToColor(e.color,Y),U&&(e.width=tt*R,e.height=s*R),this.linkedMeshes.push(new Qr(e,B,x,G,J)),e):null}case qs.Path:{let P=t.readBoolean(),Y=t.readBoolean(),B=t.readInt(true),G=this.readVertices(t,B),J=E.newArray(B/3,0);for(let e=0,i=J.length;e<i;e++)J[e]=t.readFloat()*R;let tt=U?t.readInt32():0,s=this.attachmentLoader.newPathAttachment(h,y);return s?(s.closed=P,s.constantSpeed=Y,s.worldVerticesLength=B<<1,s.vertices=G.vertices,s.bones=G.bones,s.lengths=J,U&&d.rgba8888ToColor(s.color,tt),s):null}case qs.Point:{let P=t.readFloat(),Y=t.readFloat(),B=t.readFloat(),G=U?t.readInt32():0,J=this.attachmentLoader.newPointAttachment(h,y);return J?(J.x=Y*R,J.y=B*R,J.rotation=P,U&&d.rgba8888ToColor(J.color,G),J):null}case qs.Clipping:{let P=t.readInt(true),Y=t.readInt(true),B=this.readVertices(t,Y),G=U?t.readInt32():0,J=this.attachmentLoader.newClippingAttachment(h,y);return J?(J.endSlot=l.slots[P],J.worldVerticesLength=Y<<1,J.vertices=B.vertices,J.bones=B.bones,U&&d.rgba8888ToColor(J.color,G),J):null}}return null}readVertices(t,l){let h=this.scale,x=l<<1,A=new Kr;if(!t.readBoolean())return A.vertices=this.readFloatArray(t,x,h),A;let U=new Array,R=new Array;for(let y=0;y<l;y++){let P=t.readInt(true);R.push(P);for(let Y=0;Y<P;Y++)R.push(t.readInt(true)),U.push(t.readFloat()*h),U.push(t.readFloat()*h),U.push(t.readFloat());}return A.vertices=E.toFloatArray(U),A.bones=R,A}readFloatArray(t,l,h){let x=new Array(l);if(h==1)for(let A=0;A<l;A++)x[A]=t.readFloat();else for(let A=0;A<l;A++)x[A]=t.readFloat()*h;return x}readShortArray(t){let l=t.readInt(true),h=new Array(l);for(let x=0;x<l;x++)h[x]=t.readShort();return h}readAnimation(t,l,h){t.readInt(true);let x=new Array,A=this.scale;for(let B=0,G=t.readInt(true);B<G;B++){let J=t.readInt(true);for(let tt=0,s=t.readInt(true);tt<s;tt++){let e=t.readByte(),i=t.readInt(true),o=i-1;switch(e){case Rr:{let a=new Kt(i,J);for(let p=0;p<i;p++)a.setFrame(p,t.readFloat(),t.readStringRef());x.push(a);break}case je:{let a=t.readInt(true),p=new Yt(i,a,J),m=t.readFloat(),g=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255;for(let F=0,L=0;p.setFrame(F,m,g,w,b,C),F!=o;F++){let N=t.readFloat(),O=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255,q=t.readUnsignedByte()/255,j=t.readUnsignedByte()/255;switch(t.readByte()){case Xs:p.setStepped(F);break;case Bs:Ze(t,p,L++,F,0,m,N,g,O,1),Ze(t,p,L++,F,1,m,N,w,Z,1),Ze(t,p,L++,F,2,m,N,b,q,1),Ze(t,p,L++,F,3,m,N,C,j,1);}m=N,g=O,w=Z,b=q,C=j;}x.push(p);break}case Sn:{let a=t.readInt(true),p=new Tt(i,a,J),m=t.readFloat(),g=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255;for(let C=0,F=0;p.setFrame(C,m,g,w,b),C!=o;C++){let L=t.readFloat(),N=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255;switch(t.readByte()){case Xs:p.setStepped(C);break;case Bs:Ze(t,p,F++,C,0,m,L,g,N,1),Ze(t,p,F++,C,1,m,L,w,O,1),Ze(t,p,F++,C,2,m,L,b,Z,1);}m=L,g=N,w=O,b=Z;}x.push(p);break}case Cn:{let a=t.readInt(true),p=new _t(i,a,J),m=t.readFloat(),g=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255;for(let O=0,Z=0;p.setFrame(O,m,g,w,b,C,F,L,N),O!=o;O++){let q=t.readFloat(),j=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,K=t.readUnsignedByte()/255,rt=t.readUnsignedByte()/255,lt=t.readUnsignedByte()/255,vt=t.readUnsignedByte()/255;switch(t.readByte()){case Xs:p.setStepped(O);break;case Bs:Ze(t,p,Z++,O,0,m,q,g,j,1),Ze(t,p,Z++,O,1,m,q,w,_,1),Ze(t,p,Z++,O,2,m,q,b,H,1),Ze(t,p,Z++,O,3,m,q,C,K,1),Ze(t,p,Z++,O,4,m,q,F,rt,1),Ze(t,p,Z++,O,5,m,q,L,lt,1),Ze(t,p,Z++,O,6,m,q,N,vt,1);}m=q,g=j,w=_,b=H,C=K,F=rt,L=lt,N=vt;}x.push(p);break}case Tn:{let a=t.readInt(true),p=new se(i,a,J),m=t.readFloat(),g=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255;for(let N=0,O=0;p.setFrame(N,m,g,w,b,C,F,L),N!=o;N++){let Z=t.readFloat(),q=t.readUnsignedByte()/255,j=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,K=t.readUnsignedByte()/255,rt=t.readUnsignedByte()/255;switch(t.readByte()){case Xs:p.setStepped(N);break;case Bs:Ze(t,p,O++,N,0,m,Z,g,q,1),Ze(t,p,O++,N,1,m,Z,w,j,1),Ze(t,p,O++,N,2,m,Z,b,_,1),Ze(t,p,O++,N,3,m,Z,C,H,1),Ze(t,p,O++,N,4,m,Z,F,K,1),Ze(t,p,O++,N,5,m,Z,L,rt,1);}m=Z,g=q,w=j,b=_,C=H,F=K,L=rt;}x.push(p);break}case In:{let a=new bt(i,t.readInt(true),J),p=t.readFloat(),m=t.readUnsignedByte()/255;for(let g=0,w=0;a.setFrame(g,p,m),g!=o;g++){let b=t.readFloat(),C=t.readUnsignedByte()/255;switch(t.readByte()){case Xs:a.setStepped(g);break;case Bs:Ze(t,a,w++,g,0,p,b,m,C,1);}p=b,m=C;}x.push(a);break}}}}for(let B=0,G=t.readInt(true);B<G;B++){let J=t.readInt(true);for(let tt=0,s=t.readInt(true);tt<s;tt++){let e=t.readByte(),i=t.readInt(true),o=t.readInt(true);switch(e){case Cr:x.push(Zs(t,new ht(i,o,J),1));break;case er:x.push(tr(t,new $(i,o,J),A));break;case Tr:x.push(Zs(t,new ct(i,o,J),A));break;case Ir:x.push(Zs(t,new wt(i,o,J),A));break;case Er:x.push(tr(t,new yt(i,o,J),1));break;case Mn:x.push(Zs(t,new Xt(i,o,J),1));break;case $r:x.push(Zs(t,new Dt(i,o,J),1));break;case bn:x.push(tr(t,new Lt(i,o,J),1));break;case An:x.push(Zs(t,new Bt(i,o,J),1));break;case Ts:x.push(Zs(t,new zt(i,o,J),1));}}}for(let B=0,G=t.readInt(true);B<G;B++){let J=t.readInt(true),tt=t.readInt(true),s=tt-1,e=new us(tt,t.readInt(true),J),i=t.readFloat(),o=t.readFloat(),a=t.readFloat()*A;for(let p=0,m=0;e.setFrame(p,i,o,a,t.readByte(),t.readBoolean(),t.readBoolean()),p!=s;p++){let g=t.readFloat(),w=t.readFloat(),b=t.readFloat()*A;switch(t.readByte()){case Xs:e.setStepped(p);break;case Bs:Ze(t,e,m++,p,0,i,g,o,w,1),Ze(t,e,m++,p,1,i,g,a,b,A);}i=g,o=w,a=b;}x.push(e);}for(let B=0,G=t.readInt(true);B<G;B++){let J=t.readInt(true),tt=t.readInt(true),s=tt-1,e=new hs(tt,t.readInt(true),J),i=t.readFloat(),o=t.readFloat(),a=t.readFloat(),p=t.readFloat(),m=t.readFloat(),g=t.readFloat(),w=t.readFloat();for(let b=0,C=0;e.setFrame(b,i,o,a,p,m,g,w),b!=s;b++){let F=t.readFloat(),L=t.readFloat(),N=t.readFloat(),O=t.readFloat(),Z=t.readFloat(),q=t.readFloat(),j=t.readFloat();switch(t.readByte()){case Xs:e.setStepped(b);break;case Bs:Ze(t,e,C++,b,0,i,F,o,L,1),Ze(t,e,C++,b,1,i,F,a,N,1),Ze(t,e,C++,b,2,i,F,p,O,1),Ze(t,e,C++,b,3,i,F,m,Z,1),Ze(t,e,C++,b,4,i,F,g,q,1),Ze(t,e,C++,b,5,i,F,w,j,1);}i=F,o=L,a=N,p=O,m=Z,g=q,w=j;}x.push(e);}for(let B=0,G=t.readInt(true);B<G;B++){let J=t.readInt(true),tt=h.pathConstraints[J];for(let s=0,e=t.readInt(true);s<e;s++)switch(t.readByte()){case En:x.push(Zs(t,new as(t.readInt(true),t.readInt(true),J),tt.positionMode==Ys.Fixed?A:1));break;case Rn:x.push(Zs(t,new xs(t.readInt(true),t.readInt(true),J),tt.spacingMode==ms.Length||tt.spacingMode==ms.Fixed?A:1));break;case kn:let i=new os(t.readInt(true),t.readInt(true),J),o=t.readFloat(),a=t.readFloat(),p=t.readFloat(),m=t.readFloat();for(let g=0,w=0,b=i.getFrameCount()-1;i.setFrame(g,o,a,p,m),g!=b;g++){let C=t.readFloat(),F=t.readFloat(),L=t.readFloat(),N=t.readFloat();switch(t.readByte()){case Xs:i.setStepped(g);break;case Bs:Ze(t,i,w++,g,0,o,C,a,F,1),Ze(t,i,w++,g,1,o,C,p,L,1),Ze(t,i,w++,g,2,o,C,m,N,1);}o=C,a=F,p=L,m=N;}x.push(i);}}for(let B=0,G=t.readInt(true);B<G;B++){let J=h.skins[t.readInt(true)];for(let tt=0,s=t.readInt(true);tt<s;tt++){let e=t.readInt(true);for(let i=0,o=t.readInt(true);i<o;i++){let a=t.readStringRef(),p=J.getAttachment(e,a),m=p.bones,g=p.vertices,w=m?g.length/3*2:g.length,b=t.readInt(true),C=b-1,F=t.readInt(true),L=new De(b,F,e,p),N=t.readFloat();for(let O=0,Z=0;;O++){let q,j=t.readInt(true);if(j==0)q=m?E.newFloatArray(w):g;else {q=E.newFloatArray(w);let H=t.readInt(true);if(j+=H,A==1)for(let K=H;K<j;K++)q[K]=t.readFloat();else for(let K=H;K<j;K++)q[K]=t.readFloat()*A;if(!m)for(let K=0,rt=q.length;K<rt;K++)q[K]+=g[K];}if(L.setFrame(O,N,q),O==C)break;let _=t.readFloat();switch(t.readByte()){case Xs:L.setStepped(O);break;case Bs:Ze(t,L,Z++,O,0,N,_,0,1,1);}N=_;}x.push(L);}}}let y=t.readInt(true);if(y>0){let B=new ss(y),G=h.slots.length;for(let J=0;J<y;J++){let tt=t.readFloat(),s=t.readInt(true),e=E.newArray(G,0);for(let p=G-1;p>=0;p--)e[p]=-1;let i=E.newArray(G-s,0),o=0,a=0;for(let p=0;p<s;p++){let m=t.readInt(true);for(;o!=m;)i[a++]=o++;e[o+t.readInt(true)]=o++;}for(;o<G;)i[a++]=o++;for(let p=G-1;p>=0;p--)e[p]==-1&&(e[p]=i[--a]);B.setFrame(J,tt,e);}x.push(B);}let P=t.readInt(true);if(P>0){let B=new Te(P);for(let G=0;G<P;G++){let J=t.readFloat(),tt=h.events[t.readInt(true)],s=new ai(J,tt);s.intValue=t.readInt(false),s.floatValue=t.readFloat(),s.stringValue=t.readBoolean()?t.readString():tt.stringValue,s.data.audioPath&&(s.volume=t.readFloat(),s.balance=t.readFloat()),B.setFrame(G,s);}x.push(B);}let Y=0;for(let B=0,G=x.length;B<G;B++)Y=Math.max(Y,x[B].getDuration());return new W(l,x,Y)}},_r=class{constructor(t,l=new Array,h=0,x=new DataView(t.buffer)){this.strings=l,this.index=h,this.buffer=x;}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let l=this.readByte(),h=l&127;return (l&128)!=0&&(l=this.readByte(),h|=(l&127)<<7,(l&128)!=0&&(l=this.readByte(),h|=(l&127)<<14,(l&128)!=0&&(l=this.readByte(),h|=(l&127)<<21,(l&128)!=0&&(l=this.readByte(),h|=(l&127)<<28)))),t?h:h>>>1^-(h&1)}readStringRef(){let t=this.readInt(true);return t==0?null:this.strings[t-1]}readString(){let t=this.readInt(true);switch(t){case 0:return null;case 1:return ""}t--;let l="";for(let x=0;x<t;){let A=this.readUnsignedByte();switch(A>>4){case 12:case 13:l+=String.fromCharCode((A&31)<<6|this.readByte()&63),x+=2;break;case 14:l+=String.fromCharCode((A&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),x+=3;break;default:l+=String.fromCharCode(A),x++;}}return l}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return this.readByte()!=0}},Qr=class{constructor(t,l,h,x,A){this.mesh=t,this.skin=l,this.slotIndex=h,this.parent=x,this.inheritDeform=A;}},Kr=class{constructor(t=null,l=null){this.bones=t,this.vertices=l;}},qs;(function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping";})(qs||(qs={}));function Zs(t,l,h){let x=t.readFloat(),A=t.readFloat()*h;for(let U=0,R=0,y=l.getFrameCount()-1;l.setFrame(U,x,A),U!=y;U++){let P=t.readFloat(),Y=t.readFloat()*h;switch(t.readByte()){case Xs:l.setStepped(U);break;case Bs:Ze(t,l,R++,U,0,x,P,A,Y,h);}x=P,A=Y;}return l}function tr(t,l,h){let x=t.readFloat(),A=t.readFloat()*h,U=t.readFloat()*h;for(let R=0,y=0,P=l.getFrameCount()-1;l.setFrame(R,x,A,U),R!=P;R++){let Y=t.readFloat(),B=t.readFloat()*h,G=t.readFloat()*h;switch(t.readByte()){case Xs:l.setStepped(R);break;case Bs:Ze(t,l,y++,R,0,x,Y,A,B,h),Ze(t,l,y++,R,1,x,Y,U,G,h);}x=Y,A=B,U=G;}return l}function Ze(t,l,h,x,A,U,R,y,P,Y){l.setBezier(h,x,A,U,y,t.readFloat(),t.readFloat()*Y,t.readFloat(),t.readFloat()*Y,R,P);}var Cr=0,er=1,Tr=2,Ir=3,Er=4,Mn=5,$r=6,bn=7,An=8,Ts=9,Rr=0,je=1,Sn=2,Cn=3,Tn=4,In=5,En=0,Rn=1,kn=2,Xs=1,Bs=2,tn=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new z(()=>E.newFloatArray(16));}update(t,l){if(!t)throw new Error("skeleton cannot be null.");let h=this.boundingBoxes,x=this.polygons,A=this.polygonPool,U=t.slots,R=U.length;h.length=0,A.freeAll(x),x.length=0;for(let y=0;y<R;y++){let P=U[y];if(!P.bone.active)continue;let Y=P.getAttachment();if(Y instanceof Ti){let B=Y;h.push(B);let G=A.obtain();G.length!=B.worldVerticesLength&&(G=E.newFloatArray(B.worldVerticesLength)),x.push(G),B.computeWorldVertices(P,0,B.worldVerticesLength,G,0,2);}}l?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY);}aabbCompute(){let t=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,x=Number.NEGATIVE_INFINITY,A=this.polygons;for(let U=0,R=A.length;U<R;U++){let y=A[U],P=y;for(let Y=0,B=y.length;Y<B;Y+=2){let G=P[Y],J=P[Y+1];t=Math.min(t,G),l=Math.min(l,J),h=Math.max(h,G),x=Math.max(x,J);}}this.minX=t,this.minY=l,this.maxX=h,this.maxY=x;}aabbContainsPoint(t,l){return t>=this.minX&&t<=this.maxX&&l>=this.minY&&l<=this.maxY}aabbIntersectsSegment(t,l,h,x){let A=this.minX,U=this.minY,R=this.maxX,y=this.maxY;if(t<=A&&h<=A||l<=U&&x<=U||t>=R&&h>=R||l>=y&&x>=y)return  false;let P=(x-l)/(h-t),Y=P*(A-t)+l;if(Y>U&&Y<y||(Y=P*(R-t)+l,Y>U&&Y<y))return  true;let B=(U-l)/P+t;return B>A&&B<R||(B=(y-l)/P+t,B>A&&B<R)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,l){let h=this.polygons;for(let x=0,A=h.length;x<A;x++)if(this.containsPointPolygon(h[x],t,l))return this.boundingBoxes[x];return null}containsPointPolygon(t,l,h){let x=t,A=t.length,U=A-2,R=false;for(let y=0;y<A;y+=2){let P=x[y+1],Y=x[U+1];if(P<h&&Y>=h||Y<h&&P>=h){let B=x[y];B+(h-P)/(Y-P)*(x[U]-B)<l&&(R=!R);}U=y;}return R}intersectsSegment(t,l,h,x){let A=this.polygons;for(let U=0,R=A.length;U<R;U++)if(this.intersectsSegmentPolygon(A[U],t,l,h,x))return this.boundingBoxes[U];return null}intersectsSegmentPolygon(t,l,h,x,A){let U=t,R=t.length,y=l-x,P=h-A,Y=l*A-h*x,B=U[R-2],G=U[R-1];for(let J=0;J<R;J+=2){let tt=U[J],s=U[J+1],e=B*s-G*tt,i=B-tt,o=G-s,a=y*o-P*i,p=(Y*i-y*e)/a;if((p>=B&&p<=tt||p>=tt&&p<=B)&&(p>=l&&p<=x||p>=x&&p<=l)){let m=(Y*o-P*e)/a;if((m>=G&&m<=s||m>=s&&m<=G)&&(m>=h&&m<=A||m>=A&&m<=h))return  true}B=tt,G=s;}return  false}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let l=this.boundingBoxes.indexOf(t);return l==-1?null:this.polygons[l]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},Rs=class{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new z(()=>new Array),this.polygonIndicesPool=new z(()=>new Array);}triangulate(t){let l=t,h=t.length>>1,x=this.indicesArray;x.length=0;for(let R=0;R<h;R++)x[R]=R;let A=this.isConcaveArray;A.length=0;for(let R=0,y=h;R<y;++R)A[R]=Rs.isConcave(R,h,l,x);let U=this.triangles;for(U.length=0;h>3;){let R=h-1,y=0,P=1;for(;;){t:if(!A[y]){let G=x[R]<<1,J=x[y]<<1,tt=x[P]<<1,s=l[G],e=l[G+1],i=l[J],o=l[J+1],a=l[tt],p=l[tt+1];for(let m=(P+1)%h;m!=R;m=(m+1)%h){if(!A[m])continue;let g=x[m]<<1,w=l[g],b=l[g+1];if(Rs.positiveArea(a,p,s,e,w,b)&&Rs.positiveArea(s,e,i,o,w,b)&&Rs.positiveArea(i,o,a,p,w,b))break t}break}if(P==0){do{if(!A[y])break;y--;}while(y>0);break}R=y,y=P,P=(P+1)%h;}U.push(x[(h+y-1)%h]),U.push(x[y]),U.push(x[(y+1)%h]),x.splice(y,1),A.splice(y,1),h--;let Y=(h+y-1)%h,B=y==h?0:y;A[Y]=Rs.isConcave(Y,h,l,x),A[B]=Rs.isConcave(B,h,l,x);}return h==3&&(U.push(x[2]),U.push(x[0]),U.push(x[1])),U}decompose(t,l){let h=t,x=this.convexPolygons;this.polygonPool.freeAll(x),x.length=0;let A=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(A),A.length=0;let U=this.polygonIndicesPool.obtain();U.length=0;let R=this.polygonPool.obtain();R.length=0;let y=-1,P=0;for(let Y=0,B=l.length;Y<B;Y+=3){let G=l[Y]<<1,J=l[Y+1]<<1,tt=l[Y+2]<<1,s=h[G],e=h[G+1],i=h[J],o=h[J+1],a=h[tt],p=h[tt+1],m=false;if(y==G){let g=R.length-4,w=Rs.winding(R[g],R[g+1],R[g+2],R[g+3],a,p),b=Rs.winding(a,p,R[0],R[1],R[2],R[3]);w==P&&b==P&&(R.push(a),R.push(p),U.push(tt),m=true);}m||(R.length>0?(x.push(R),A.push(U)):(this.polygonPool.free(R),this.polygonIndicesPool.free(U)),R=this.polygonPool.obtain(),R.length=0,R.push(s),R.push(e),R.push(i),R.push(o),R.push(a),R.push(p),U=this.polygonIndicesPool.obtain(),U.length=0,U.push(G),U.push(J),U.push(tt),P=Rs.winding(s,e,i,o,a,p),y=G);}R.length>0&&(x.push(R),A.push(U));for(let Y=0,B=x.length;Y<B;Y++){if(U=A[Y],U.length==0)continue;let G=U[0],J=U[U.length-1];R=x[Y];let tt=R.length-4,s=R[tt],e=R[tt+1],i=R[tt+2],o=R[tt+3],a=R[0],p=R[1],m=R[2],g=R[3],w=Rs.winding(s,e,i,o,a,p);for(let b=0;b<B;b++){if(b==Y)continue;let C=A[b];if(C.length!=3)continue;let F=C[0],L=C[1],N=C[2],O=x[b],Z=O[O.length-2],q=O[O.length-1];if(F!=G||L!=J)continue;let j=Rs.winding(s,e,i,o,Z,q),_=Rs.winding(Z,q,a,p,m,g);j==w&&_==w&&(O.length=0,C.length=0,R.push(Z),R.push(q),U.push(N),s=i,e=o,i=Z,o=q,b=0);}}for(let Y=x.length-1;Y>=0;Y--)R=x[Y],R.length==0&&(x.splice(Y,1),this.polygonPool.free(R),U=A[Y],A.splice(Y,1),this.polygonIndicesPool.free(U));return x}static isConcave(t,l,h,x){let A=x[(l+t-1)%l]<<1,U=x[t]<<1,R=x[(t+1)%l]<<1;return !this.positiveArea(h[A],h[A+1],h[U],h[U+1],h[R],h[R+1])}static positiveArea(t,l,h,x,A,U){return t*(U-x)+h*(l-U)+A*(x-l)>=0}static winding(t,l,h,x,A,U){let R=h-t,y=x-l;return A*y-U*R+R*l-t*y>=0?1:-1}},sr=class{constructor(){this.triangulator=new Rs,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array;}clipStart(t,l){if(this.clipAttachment)return 0;this.clipAttachment=l;let h=l.worldVerticesLength,x=E.setArraySize(this.clippingPolygon,h);l.computeWorldVertices(t,0,h,x,0,2);let A=this.clippingPolygon;sr.makeClockwise(A);let U=this.clippingPolygons=this.triangulator.decompose(A,this.triangulator.triangulate(A));for(let R=0,y=U.length;R<y;R++){let P=U[R];sr.makeClockwise(P),P.push(P[0]),P.push(P[1]);}return U.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd();}clipEnd(){!this.clipAttachment||(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0);}isClipping(){return this.clipAttachment!=null}clipTriangles(t,l,h,x,A,U,R,y){let P=this.clipOutput,Y=this.clippedVertices,B=this.clippedTriangles,G=this.clippingPolygons,J=this.clippingPolygons.length,tt=y?12:8,s=0;Y.length=0,B.length=0;t:for(let e=0;e<x;e+=3){let i=h[e]<<1,o=t[i],a=t[i+1],p=A[i],m=A[i+1];i=h[e+1]<<1;let g=t[i],w=t[i+1],b=A[i],C=A[i+1];i=h[e+2]<<1;let F=t[i],L=t[i+1],N=A[i],O=A[i+1];for(let Z=0;Z<J;Z++){let q=Y.length;if(this.clip(o,a,g,w,F,L,G[Z],P)){let j=P.length;if(j==0)continue;let _=w-L,H=F-g,K=o-F,rt=L-a,lt=1/(_*K+H*(a-L)),vt=j>>1,pt=this.clipOutput,xt=E.setArraySize(Y,q+vt*tt);for(let Ft=0;Ft<j;Ft+=2){let Vt=pt[Ft],Ut=pt[Ft+1];xt[q]=Vt,xt[q+1]=Ut,xt[q+2]=U.r,xt[q+3]=U.g,xt[q+4]=U.b,xt[q+5]=U.a;let St=Vt-F,It=Ut-L,Ht=(_*St+H*It)*lt,Oe=(rt*St+K*It)*lt,xe=1-Ht-Oe;xt[q+6]=p*Ht+b*Oe+N*xe,xt[q+7]=m*Ht+C*Oe+O*xe,y&&(xt[q+8]=R.r,xt[q+9]=R.g,xt[q+10]=R.b,xt[q+11]=R.a),q+=tt;}q=B.length;let Et=E.setArraySize(B,q+3*(vt-2));vt--;for(let Ft=1;Ft<vt;Ft++)Et[q]=s,Et[q+1]=s+Ft,Et[q+2]=s+Ft+1,q+=3;s+=vt+1;}else {let j=E.setArraySize(Y,q+3*tt);j[q]=o,j[q+1]=a,j[q+2]=U.r,j[q+3]=U.g,j[q+4]=U.b,j[q+5]=U.a,y?(j[q+6]=p,j[q+7]=m,j[q+8]=R.r,j[q+9]=R.g,j[q+10]=R.b,j[q+11]=R.a,j[q+12]=g,j[q+13]=w,j[q+14]=U.r,j[q+15]=U.g,j[q+16]=U.b,j[q+17]=U.a,j[q+18]=b,j[q+19]=C,j[q+20]=R.r,j[q+21]=R.g,j[q+22]=R.b,j[q+23]=R.a,j[q+24]=F,j[q+25]=L,j[q+26]=U.r,j[q+27]=U.g,j[q+28]=U.b,j[q+29]=U.a,j[q+30]=N,j[q+31]=O,j[q+32]=R.r,j[q+33]=R.g,j[q+34]=R.b,j[q+35]=R.a):(j[q+6]=p,j[q+7]=m,j[q+8]=g,j[q+9]=w,j[q+10]=U.r,j[q+11]=U.g,j[q+12]=U.b,j[q+13]=U.a,j[q+14]=b,j[q+15]=C,j[q+16]=F,j[q+17]=L,j[q+18]=U.r,j[q+19]=U.g,j[q+20]=U.b,j[q+21]=U.a,j[q+22]=N,j[q+23]=O),q=B.length;let _=E.setArraySize(B,q+3);_[q]=s,_[q+1]=s+1,_[q+2]=s+2,s+=3;continue t}}}}clip(t,l,h,x,A,U,R,y){let P=y,Y=false,B=null;R.length%4>=2?(B=y,y=this.scratch):B=this.scratch,B.length=0,B.push(t),B.push(l),B.push(h),B.push(x),B.push(A),B.push(U),B.push(t),B.push(l),y.length=0;let G=R,J=R.length-4;for(let tt=0;;tt+=2){let s=G[tt],e=G[tt+1],i=G[tt+2],o=G[tt+3],a=s-i,p=e-o,m=B,g=B.length-2,w=y.length;for(let C=0;C<g;C+=2){let F=m[C],L=m[C+1],N=m[C+2],O=m[C+3],Z=a*(O-o)-p*(N-i)>0;if(a*(L-o)-p*(F-i)>0){if(Z){y.push(N),y.push(O);continue}let q=O-L,j=N-F,_=q*(i-s)-j*(o-e);if(Math.abs(_)>1e-6){let H=(j*(e-L)-q*(s-F))/_;y.push(s+(i-s)*H),y.push(e+(o-e)*H);}else y.push(s),y.push(e);}else if(Z){let q=O-L,j=N-F,_=q*(i-s)-j*(o-e);if(Math.abs(_)>1e-6){let H=(j*(e-L)-q*(s-F))/_;y.push(s+(i-s)*H),y.push(e+(o-e)*H);}else y.push(s),y.push(e);y.push(N),y.push(O);}Y=true;}if(w==y.length)return P.length=0,true;if(y.push(y[0]),y.push(y[1]),tt==J)break;let b=y;y=B,y.length=0,B=b;}if(P!=y){P.length=0;for(let tt=0,s=y.length-2;tt<s;tt++)P[tt]=y[tt];}else P.length=P.length-2;return Y}static makeClockwise(t){let l=t,h=t.length,x=l[h-2]*l[1]-l[0]*l[h-1],A=0,U=0,R=0,y=0;for(let P=0,Y=h-3;P<Y;P+=2)A=l[P],U=l[P+1],R=l[P+2],y=l[P+3],x+=A*y-R*U;if(!(x<0))for(let P=0,Y=h-2,B=h>>1;P<B;P+=2){let G=l[P],J=l[P+1],tt=Y-P;l[P]=l[tt],l[P+1]=l[tt+1],l[tt]=G,l[tt+1]=J;}}},Yn=class{constructor(t){this.attachmentLoader=null,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t;}readSkeletonData(t){let l=this.scale,h=new $i,x=typeof t=="string"?JSON.parse(t):t,A=x.skeleton;if(A&&(h.hash=A.hash,h.version=A.spine,h.x=A.x,h.y=A.y,h.width=A.width,h.height=A.height,h.fps=A.fps,h.imagesPath=A.images),x.bones)for(let U=0;U<x.bones.length;U++){let R=x.bones[U],y=null,P=Pt(R,"parent",null);P&&(y=h.findBone(P));let Y=new Mr(h.bones.length,R.name,y);Y.length=Pt(R,"length",0)*l,Y.x=Pt(R,"x",0)*l,Y.y=Pt(R,"y",0)*l,Y.rotation=Pt(R,"rotation",0),Y.scaleX=Pt(R,"scaleX",1),Y.scaleY=Pt(R,"scaleY",1),Y.shearX=Pt(R,"shearX",0),Y.shearY=Pt(R,"shearY",0),Y.transformMode=E.enumValue(bs,Pt(R,"transform","Normal")),Y.skinRequired=Pt(R,"skin",false);let B=Pt(R,"color",null);B&&Y.color.setFromString(B),h.bones.push(Y);}if(x.slots)for(let U=0;U<x.slots.length;U++){let R=x.slots[U],y=h.findBone(R.bone),P=new Fi(h.slots.length,R.name,y),Y=Pt(R,"color",null);Y&&P.color.setFromString(Y);let B=Pt(R,"dark",null);B&&(P.darkColor=d.fromString(B)),P.attachmentName=Pt(R,"attachment",null),P.blendMode=E.enumValue(Ms,Pt(R,"blend","normal")),h.slots.push(P);}if(x.ik)for(let U=0;U<x.ik.length;U++){let R=x.ik[U],y=new Ar(R.name);y.order=Pt(R,"order",0),y.skinRequired=Pt(R,"skin",false);for(let P=0;P<R.bones.length;P++)y.bones.push(h.findBone(R.bones[P]));y.target=h.findBone(R.target),y.mix=Pt(R,"mix",1),y.softness=Pt(R,"softness",0)*l,y.bendDirection=Pt(R,"bendPositive",true)?1:-1,y.compress=Pt(R,"compress",false),y.stretch=Pt(R,"stretch",false),y.uniform=Pt(R,"uniform",false),h.ikConstraints.push(y);}if(x.transform)for(let U=0;U<x.transform.length;U++){let R=x.transform[U],y=new Pi(R.name);y.order=Pt(R,"order",0),y.skinRequired=Pt(R,"skin",false);for(let Y=0;Y<R.bones.length;Y++)y.bones.push(h.findBone(R.bones[Y]));let P=R.target;y.target=h.findBone(P),y.local=Pt(R,"local",false),y.relative=Pt(R,"relative",false),y.offsetRotation=Pt(R,"rotation",0),y.offsetX=Pt(R,"x",0)*l,y.offsetY=Pt(R,"y",0)*l,y.offsetScaleX=Pt(R,"scaleX",0),y.offsetScaleY=Pt(R,"scaleY",0),y.offsetShearY=Pt(R,"shearY",0),y.mixRotate=Pt(R,"mixRotate",1),y.mixX=Pt(R,"mixX",1),y.mixY=Pt(R,"mixY",y.mixX),y.mixScaleX=Pt(R,"mixScaleX",1),y.mixScaleY=Pt(R,"mixScaleY",y.mixScaleX),y.mixShearY=Pt(R,"mixShearY",1),h.transformConstraints.push(y);}if(x.path)for(let U=0;U<x.path.length;U++){let R=x.path[U],y=new ki(R.name);y.order=Pt(R,"order",0),y.skinRequired=Pt(R,"skin",false);for(let Y=0;Y<R.bones.length;Y++)y.bones.push(h.findBone(R.bones[Y]));let P=R.target;y.target=h.findSlot(P),y.positionMode=E.enumValue(Ys,Pt(R,"positionMode","Percent")),y.spacingMode=E.enumValue(ms,Pt(R,"spacingMode","Length")),y.rotateMode=E.enumValue(Ls,Pt(R,"rotateMode","Tangent")),y.offsetRotation=Pt(R,"rotation",0),y.position=Pt(R,"position",0),y.positionMode==Ys.Fixed&&(y.position*=l),y.spacing=Pt(R,"spacing",0),(y.spacingMode==ms.Length||y.spacingMode==ms.Fixed)&&(y.spacing*=l),y.mixRotate=Pt(R,"mixRotate",1),y.mixX=Pt(R,"mixX",1),y.mixY=Pt(R,"mixY",y.mixX),h.pathConstraints.push(y);}if(x.skins)for(let U=0;U<x.skins.length;U++){let R=x.skins[U],y=new gi(R.name);if(R.bones)for(let P=0;P<R.bones.length;P++)y.bones.push(h.findBone(R.bones[P]));if(R.ik)for(let P=0;P<R.ik.length;P++)y.constraints.push(h.findIkConstraint(R.ik[P]));if(R.transform)for(let P=0;P<R.transform.length;P++)y.constraints.push(h.findTransformConstraint(R.transform[P]));if(R.path)for(let P=0;P<R.path.length;P++)y.constraints.push(h.findPathConstraint(R.path[P]));for(let P in R.attachments){let Y=h.findSlot(P),B=R.attachments[P];for(let G in B){let J=this.readAttachment(B[G],y,Y.index,G,h);J&&y.setAttachment(Y.index,G,J);}}h.skins.push(y),y.name=="default"&&(h.defaultSkin=y);}for(let U=0,R=this.linkedMeshes.length;U<R;U++){let y=this.linkedMeshes[U],P=(y.skin?h.findSkin(y.skin):h.defaultSkin).getAttachment(y.slotIndex,y.parent);y.mesh.deformAttachment=y.inheritDeform?P:y.mesh,y.mesh.setParentMesh(P),y.mesh.updateUVs();}if(this.linkedMeshes.length=0,x.events)for(let U in x.events){let R=x.events[U],y=new _i(U);y.intValue=Pt(R,"int",0),y.floatValue=Pt(R,"float",0),y.stringValue=Pt(R,"string",""),y.audioPath=Pt(R,"audio",null),y.audioPath&&(y.volume=Pt(R,"volume",1),y.balance=Pt(R,"balance",0)),h.events.push(y);}if(x.animations)for(let U in x.animations){let R=x.animations[U];this.readAnimation(R,U,h);}return h}readAttachment(t,l,h,x,A){let U=this.scale;switch(x=Pt(t,"name",x),Pt(t,"type","region")){case "region":{let R=Pt(t,"path",x),y=this.attachmentLoader.newRegionAttachment(l,x,R);if(!y)return null;y.path=R,y.x=Pt(t,"x",0)*U,y.y=Pt(t,"y",0)*U,y.scaleX=Pt(t,"scaleX",1),y.scaleY=Pt(t,"scaleY",1),y.rotation=Pt(t,"rotation",0),y.width=t.width*U,y.height=t.height*U;let P=Pt(t,"color",null);return P&&y.color.setFromString(P),y.updateOffset(),y}case "boundingbox":{let R=this.attachmentLoader.newBoundingBoxAttachment(l,x);if(!R)return null;this.readVertices(t,R,t.vertexCount<<1);let y=Pt(t,"color",null);return y&&R.color.setFromString(y),R}case "mesh":case "linkedmesh":{let R=Pt(t,"path",x),y=this.attachmentLoader.newMeshAttachment(l,x,R);if(!y)return null;y.path=R;let P=Pt(t,"color",null);P&&y.color.setFromString(P),y.width=Pt(t,"width",0)*U,y.height=Pt(t,"height",0)*U;let Y=Pt(t,"parent",null);if(Y)return this.linkedMeshes.push(new Fn(y,Pt(t,"skin",null),h,Y,Pt(t,"deform",true))),y;let B=t.uvs;return this.readVertices(t,y,B.length),y.triangles=t.triangles,y.regionUVs=B,y.updateUVs(),y.edges=Pt(t,"edges",null),y.hullLength=Pt(t,"hull",0)*2,y}case "path":{let R=this.attachmentLoader.newPathAttachment(l,x);if(!R)return null;R.closed=Pt(t,"closed",false),R.constantSpeed=Pt(t,"constantSpeed",true);let y=t.vertexCount;this.readVertices(t,R,y<<1);let P=E.newArray(y/3,0);for(let B=0;B<t.lengths.length;B++)P[B]=t.lengths[B]*U;R.lengths=P;let Y=Pt(t,"color",null);return Y&&R.color.setFromString(Y),R}case "point":{let R=this.attachmentLoader.newPointAttachment(l,x);if(!R)return null;R.x=Pt(t,"x",0)*U,R.y=Pt(t,"y",0)*U,R.rotation=Pt(t,"rotation",0);let y=Pt(t,"color",null);return y&&R.color.setFromString(y),R}case "clipping":{let R=this.attachmentLoader.newClippingAttachment(l,x);if(!R)return null;let y=Pt(t,"end",null);y&&(R.endSlot=A.findSlot(y));let P=t.vertexCount;this.readVertices(t,R,P<<1);let Y=Pt(t,"color",null);return Y&&R.color.setFromString(Y),R}}return null}readVertices(t,l,h){let x=this.scale;l.worldVerticesLength=h;let A=t.vertices;if(h==A.length){let y=E.toFloatArray(A);if(x!=1)for(let P=0,Y=A.length;P<Y;P++)y[P]*=x;l.vertices=y;return}let U=new Array,R=new Array;for(let y=0,P=A.length;y<P;){let Y=A[y++];R.push(Y);for(let B=y+Y*4;y<B;y+=4)R.push(A[y]),U.push(A[y+1]*x),U.push(A[y+2]*x),U.push(A[y+3]);}l.bones=R,l.vertices=E.toFloatArray(U);}readAnimation(t,l,h){let x=this.scale,A=new Array;if(t.slots)for(let R in t.slots){let y=t.slots[R],P=h.findSlot(R).index;for(let Y in y){let B=y[Y];if(!B)continue;let G=B.length;if(Y=="attachment"){let J=new Kt(G,P);for(let tt=0;tt<G;tt++){let s=B[tt];J.setFrame(tt,Pt(s,"time",0),s.name);}A.push(J);}else if(Y=="rgba"){let J=new Yt(G,G<<2,P),tt=B[0],s=Pt(tt,"time",0),e=d.fromString(tt.color);for(let i=0,o=0;;i++){J.setFrame(i,s,e.r,e.g,e.b,e.a);let a=B[i+1];if(!a){J.shrink(o);break}let p=Pt(a,"time",0),m=d.fromString(a.color),g=tt.curve;g&&(o=Je(g,J,o,i,0,s,p,e.r,m.r,1),o=Je(g,J,o,i,1,s,p,e.g,m.g,1),o=Je(g,J,o,i,2,s,p,e.b,m.b,1),o=Je(g,J,o,i,3,s,p,e.a,m.a,1)),s=p,e=m,tt=a;}A.push(J);}else if(Y=="rgb"){let J=new Tt(G,G*3,P),tt=B[0],s=Pt(tt,"time",0),e=d.fromString(tt.color);for(let i=0,o=0;;i++){J.setFrame(i,s,e.r,e.g,e.b);let a=B[i+1];if(!a){J.shrink(o);break}let p=Pt(a,"time",0),m=d.fromString(a.color),g=tt.curve;g&&(o=Je(g,J,o,i,0,s,p,e.r,m.r,1),o=Je(g,J,o,i,1,s,p,e.g,m.g,1),o=Je(g,J,o,i,2,s,p,e.b,m.b,1)),s=p,e=m,tt=a;}A.push(J);}else if(Y=="alpha")A.push(js(B,new bt(G,G,P),0,1));else if(Y=="rgba2"){let J=new _t(G,G*7,P),tt=B[0],s=Pt(tt,"time",0),e=d.fromString(tt.light),i=d.fromString(tt.dark);for(let o=0,a=0;;o++){J.setFrame(o,s,e.r,e.g,e.b,e.a,i.r,i.g,i.b);let p=B[o+1];if(!p){J.shrink(a);break}let m=Pt(p,"time",0),g=d.fromString(p.light),w=d.fromString(p.dark),b=tt.curve;b&&(a=Je(b,J,a,o,0,s,m,e.r,g.r,1),a=Je(b,J,a,o,1,s,m,e.g,g.g,1),a=Je(b,J,a,o,2,s,m,e.b,g.b,1),a=Je(b,J,a,o,3,s,m,e.a,g.a,1),a=Je(b,J,a,o,4,s,m,i.r,w.r,1),a=Je(b,J,a,o,5,s,m,i.g,w.g,1),a=Je(b,J,a,o,6,s,m,i.b,w.b,1)),s=m,e=g,i=w,tt=p;}A.push(J);}else if(Y=="rgb2"){let J=new se(G,G*6,P),tt=B[0],s=Pt(tt,"time",0),e=d.fromString(tt.light),i=d.fromString(tt.dark);for(let o=0,a=0;;o++){J.setFrame(o,s,e.r,e.g,e.b,i.r,i.g,i.b);let p=B[o+1];if(!p){J.shrink(a);break}let m=Pt(p,"time",0),g=d.fromString(p.light),w=d.fromString(p.dark),b=tt.curve;b&&(a=Je(b,J,a,o,0,s,m,e.r,g.r,1),a=Je(b,J,a,o,1,s,m,e.g,g.g,1),a=Je(b,J,a,o,2,s,m,e.b,g.b,1),a=Je(b,J,a,o,3,s,m,i.r,w.r,1),a=Je(b,J,a,o,4,s,m,i.g,w.g,1),a=Je(b,J,a,o,5,s,m,i.b,w.b,1)),s=m,e=g,i=w,tt=p;}A.push(J);}}}if(t.bones)for(let R in t.bones){let y=t.bones[R],P=h.findBone(R).index;for(let Y in y){let B=y[Y],G=B.length;if(G!=0){if(Y==="rotate")A.push(js(B,new ht(G,G,P),0,1));else if(Y==="translate"){let J=new $(G,G<<1,P);A.push(kr(B,J,"x","y",0,x));}else if(Y==="translatex"){let J=new ct(G,G,P);A.push(js(B,J,0,x));}else if(Y==="translatey"){let J=new wt(G,G,P);A.push(js(B,J,0,x));}else if(Y==="scale"){let J=new yt(G,G<<1,P);A.push(kr(B,J,"x","y",1,1));}else if(Y==="scalex"){let J=new Xt(G,G,P);A.push(js(B,J,1,1));}else if(Y==="scaley"){let J=new Dt(G,G,P);A.push(js(B,J,1,1));}else if(Y==="shear"){let J=new Lt(G,G<<1,P);A.push(kr(B,J,"x","y",0,1));}else if(Y==="shearx"){let J=new Bt(G,G,P);A.push(js(B,J,0,1));}else if(Y==="sheary"){let J=new zt(G,G,P);A.push(js(B,J,0,1));}}}}if(t.ik)for(let R in t.ik){let y=t.ik[R],P=y[0];if(!P)continue;let Y=h.findIkConstraint(R),B=h.ikConstraints.indexOf(Y),G=new us(y.length,y.length<<1,B),J=Pt(P,"time",0),tt=Pt(P,"mix",1),s=Pt(P,"softness",0)*x;for(let e=0,i=0;;e++){G.setFrame(e,J,tt,s,Pt(P,"bendPositive",true)?1:-1,Pt(P,"compress",false),Pt(P,"stretch",false));let o=y[e+1];if(!o){G.shrink(i);break}let a=Pt(o,"time",0),p=Pt(o,"mix",1),m=Pt(o,"softness",0)*x,g=P.curve;g&&(i=Je(g,G,i,e,0,J,a,tt,p,1),i=Je(g,G,i,e,1,J,a,s,m,x)),J=a,tt=p,s=m,P=o;}A.push(G);}if(t.transform)for(let R in t.transform){let y=t.transform[R],P=y[0];if(!P)continue;let Y=h.findTransformConstraint(R),B=h.transformConstraints.indexOf(Y),G=new hs(y.length,y.length*6,B),J=Pt(P,"time",0),tt=Pt(P,"mixRotate",1),s=Pt(P,"mixX",1),e=Pt(P,"mixY",s),i=Pt(P,"mixScaleX",1),o=Pt(P,"mixScaleY",i),a=Pt(P,"mixShearY",1);for(let p=0,m=0;;p++){G.setFrame(p,J,tt,s,e,i,o,a);let g=y[p+1];if(!g){G.shrink(m);break}let w=Pt(g,"time",0),b=Pt(g,"mixRotate",1),C=Pt(g,"mixX",1),F=Pt(g,"mixY",C),L=Pt(g,"mixScaleX",1),N=Pt(g,"mixScaleY",L),O=Pt(g,"mixShearY",1),Z=P.curve;Z&&(m=Je(Z,G,m,p,0,J,w,tt,b,1),m=Je(Z,G,m,p,1,J,w,s,C,1),m=Je(Z,G,m,p,2,J,w,e,F,1),m=Je(Z,G,m,p,3,J,w,i,L,1),m=Je(Z,G,m,p,4,J,w,o,N,1),m=Je(Z,G,m,p,5,J,w,a,O,1)),J=w,tt=b,s=C,e=F,i=L,o=N,i=L,P=g;}A.push(G);}if(t.path)for(let R in t.path){let y=t.path[R],P=h.findPathConstraint(R),Y=h.pathConstraints.indexOf(P);for(let B in y){let G=y[B],J=G[0];if(!J)continue;let tt=G.length;if(B==="position"){let s=new as(tt,tt,Y);A.push(js(G,s,0,P.positionMode==Ys.Fixed?x:1));}else if(B==="spacing"){let s=new xs(tt,tt,Y);A.push(js(G,s,0,P.spacingMode==ms.Length||P.spacingMode==ms.Fixed?x:1));}else if(B==="mix"){let s=new os(tt,tt*3,Y),e=Pt(J,"time",0),i=Pt(J,"mixRotate",1),o=Pt(J,"mixX",1),a=Pt(J,"mixY",o);for(let p=0,m=0;;p++){s.setFrame(p,e,i,o,a);let g=G[p+1];if(!g){s.shrink(m);break}let w=Pt(g,"time",0),b=Pt(g,"mixRotate",1),C=Pt(g,"mixX",1),F=Pt(g,"mixY",C),L=J.curve;L&&(m=Je(L,s,m,p,0,e,w,i,b,1),m=Je(L,s,m,p,1,e,w,o,C,1),m=Je(L,s,m,p,2,e,w,a,F,1)),e=w,i=b,o=C,a=F,J=g;}A.push(s);}}}if(t.deform)for(let R in t.deform){let y=t.deform[R],P=h.findSkin(R);for(let Y in y){let B=y[Y],G=h.findSlot(Y).index;for(let J in B){let tt=B[J],s=tt[0];if(!s)continue;let e=P.getAttachment(G,J),i=e.bones,o=e.vertices,a=i?o.length/3*2:o.length,p=new De(tt.length,tt.length,G,e),m=Pt(s,"time",0);for(let g=0,w=0;;g++){let b,C=Pt(s,"vertices",null);if(!C)b=i?E.newFloatArray(a):o;else {b=E.newFloatArray(a);let O=Pt(s,"offset",0);if(E.arrayCopy(C,0,b,O,C.length),x!=1)for(let Z=O,q=Z+C.length;Z<q;Z++)b[Z]*=x;if(!i)for(let Z=0;Z<a;Z++)b[Z]+=o[Z];}p.setFrame(g,m,b);let F=tt[g+1];if(!F){p.shrink(w);break}let L=Pt(F,"time",0),N=s.curve;N&&(w=Je(N,p,w,g,0,m,L,0,1,1)),m=L,s=F;}A.push(p);}}}if(t.drawOrder){let R=new ss(t.drawOrder.length),y=h.slots.length,P=0;for(let Y=0;Y<t.drawOrder.length;Y++,P++){let B=t.drawOrder[Y],G=null,J=Pt(B,"offsets",null);if(J){G=E.newArray(y,-1);let tt=E.newArray(y-J.length,0),s=0,e=0;for(let i=0;i<J.length;i++){let o=J[i],a=h.findSlot(o.slot).index;for(;s!=a;)tt[e++]=s++;G[s+o.offset]=s++;}for(;s<y;)tt[e++]=s++;for(let i=y-1;i>=0;i--)G[i]==-1&&(G[i]=tt[--e]);}R.setFrame(P,Pt(B,"time",0),G);}A.push(R);}if(t.events){let R=new Te(t.events.length),y=0;for(let P=0;P<t.events.length;P++,y++){let Y=t.events[P],B=h.findEvent(Y.name),G=new ai(E.toSinglePrecision(Pt(Y,"time",0)),B);G.intValue=Pt(Y,"int",B.intValue),G.floatValue=Pt(Y,"float",B.floatValue),G.stringValue=Pt(Y,"string",B.stringValue),G.data.audioPath&&(G.volume=Pt(Y,"volume",1),G.balance=Pt(Y,"balance",0)),R.setFrame(y,G);}A.push(R);}let U=0;for(let R=0,y=A.length;R<y;R++)U=Math.max(U,A[R].getDuration());h.animations.push(new W(l,A,U));}},Fn=class{constructor(t,l,h,x,A){this.mesh=t,this.skin=l,this.slotIndex=h,this.parent=x,this.inheritDeform=A;}};function js(t,l,h,x){let A=t[0],U=Pt(A,"time",0),R=Pt(A,"value",h)*x,y=0;for(let P=0;;P++){l.setFrame(P,U,R);let Y=t[P+1];if(!Y)return l.shrink(y),l;let B=Pt(Y,"time",0),G=Pt(Y,"value",h)*x;A.curve&&(y=Je(A.curve,l,y,P,0,U,B,R,G,x)),U=B,R=G,A=Y;}}function kr(t,l,h,x,A,U){let R=t[0],y=Pt(R,"time",0),P=Pt(R,h,A)*U,Y=Pt(R,x,A)*U,B=0;for(let G=0;;G++){l.setFrame(G,y,P,Y);let J=t[G+1];if(!J)return l.shrink(B),l;let tt=Pt(J,"time",0),s=Pt(J,h,A)*U,e=Pt(J,x,A)*U,i=R.curve;i&&(B=Je(i,l,B,G,0,y,tt,P,s,U),B=Je(i,l,B,G,1,y,tt,Y,e,U)),y=tt,P=s,Y=e,R=J;}}function Je(t,l,h,x,A,U,R,y,P,Y){if(t=="stepped")return l.setStepped(x),h;let B=A<<2,G=t[B],J=t[B+1]*Y,tt=t[B+2],s=t[B+3]*Y;return l.setBezier(h,x,A,U,y,G,J,tt,s,R,P),h+1}function Pt(t,l,h){return t[l]!==void 0?t[l]:h}typeof Math.fround>"u"&&(Math.fround=(function(t){return function(l){return t[0]=l,t[0]}})(new Float32Array(1)));var Pn=class{constructor(t,l){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=l;}begin(t){}transform(t,l,h,x){t.x+=S.randomTriangular(-this.jitterX,this.jitterY),t.y+=S.randomTriangular(-this.jitterX,this.jitterY);}end(){}},en=class{constructor(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t;}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY;}transform(t,l,h,x){let A=this.angle*S.degreesToRadians,U=t.x-this.worldX,R=t.y-this.worldY,y=Math.sqrt(U*U+R*R);if(y<this.radius){let P=en.interpolation.apply(0,A,(this.radius-y)/this.radius),Y=Math.cos(P),B=Math.sin(P);t.x=Y*U-B*R+this.worldX,t.y=B*U+Y*R+this.worldY;}}end(){}},sn=en;sn.interpolation=new D(2);var Is=class{constructor(t,l={alpha:"true"}){this.restorables=new Array,t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?(this.gl=t,this.canvas=this.gl.canvas):this.setupCanvas(t,l);}setupCanvas(t,l){this.gl=t.getContext("webgl2",l)||t.getContext("webgl",l),this.canvas=t,t.addEventListener("webglcontextlost",h=>{h&&h.preventDefault();}),t.addEventListener("webglcontextrestored",h=>{for(let x=0,A=this.restorables.length;x<A;x++)this.restorables[x].restore();});}addRestorable(t){this.restorables.push(t);}removeRestorable(t){let l=this.restorables.indexOf(t);l>-1&&this.restorables.splice(l,1);}},pi=1,Ln=769,rn=770,ir=771,Xn=774,rr=class{static getDestGLBlendMode(t){switch(t){case Ms.Normal:return ir;case Ms.Additive:return pi;case Ms.Multiply:return ir;case Ms.Screen:return ir;default:throw new Error("Unknown blend mode: "+t)}}static getSourceColorGLBlendMode(t,l=false){switch(t){case Ms.Normal:return l?pi:rn;case Ms.Additive:return l?pi:rn;case Ms.Multiply:return Xn;case Ms.Screen:return pi;default:throw new Error("Unknown blend mode: "+t)}}static getSourceAlphaGLBlendMode(t){switch(t){case Ms.Normal:return pi;case Ms.Additive:return pi;case Ms.Multiply:return ir;case Ms.Screen:return Ln;default:throw new Error("Unknown blend mode: "+t)}}},Yr=class extends pr{constructor(t,l,h=false){super(l),this.texture=null,this.boundUnit=0,this.useMipMaps=false,this.context=t instanceof Is?t:new Is(t),this.useMipMaps=h,this.restore(),this.context.addRestorable(this);}setFilters(t,l){let h=this.context.gl;this.bind(),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,t),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,Yr.validateMagFilter(l));}static validateMagFilter(t){switch(t){case Cs.MipMap:case Cs.MipMapLinearLinear:case Cs.MipMapLinearNearest:case Cs.MipMapNearestLinear:case Cs.MipMapNearestNearest:return Cs.Linear;default:return t}}setWraps(t,l){let h=this.context.gl;this.bind(),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,t),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,l);}update(t){let l=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),Yr.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,false),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,this._image),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,t?l.LINEAR_MIPMAP_LINEAR:l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),t&&l.generateMipmap(l.TEXTURE_2D);}restore(){this.texture=null,this.update(this.useMipMaps);}bind(t=0){let l=this.context.gl;this.boundUnit=t,l.activeTexture(l.TEXTURE0+t),l.bindTexture(l.TEXTURE_2D,this.texture);}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null);}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture);}},Li=Yr;Li.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=false;var Vs=class extends Ji{constructor(t,l="",h=null){super(x=>new Li(t,x),l,h);}},gs=class{constructor(t=0,l=0,h=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=l,this.z=h;}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,l,h){return this.x=t,this.y=l,this.z=h,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return t==0?this:(t=1/t,this.x*=t,this.y*=t,this.z*=t,this)}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let l=t.values;return this.set(this.x*l[ae]+this.y*l[ue]+this.z*l[fe]+l[me],this.x*l[ve]+this.y*l[Qt]+this.z*l[oe]+l[Gt],this.x*l[gt]+this.y*l[Jt]+this.z*l[ee]+l[le])}project(t){let l=t.values,h=1/(this.x*l[$t]+this.y*l[Ot]+this.z*l[Wt]+l[Nt]);return this.set((this.x*l[ae]+this.y*l[ue]+this.z*l[fe]+l[me])*h,(this.x*l[ve]+this.y*l[Qt]+this.z*l[oe]+l[Gt])*h,(this.x*l[gt]+this.y*l[Jt]+this.z*l[ee]+l[le])*h)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let l=t.x-this.x,h=t.y-this.y,x=t.z-this.z;return Math.sqrt(l*l+h*h+x*x)}},ae=0,ue=4,fe=8,me=12,ve=1,Qt=5,oe=9,Gt=13,gt=2,Jt=6,ee=10,le=14,$t=3,Ot=7,Wt=11,Nt=15,Zt=class{constructor(){this.temp=new Float32Array(16),this.values=new Float32Array(16);let t=this.values;t[ae]=1,t[Qt]=1,t[ee]=1,t[Nt]=1;}set(t){return this.values.set(t),this}transpose(){let t=this.temp,l=this.values;return t[ae]=l[ae],t[ue]=l[ve],t[fe]=l[gt],t[me]=l[$t],t[ve]=l[ue],t[Qt]=l[Qt],t[oe]=l[Jt],t[Gt]=l[Ot],t[gt]=l[fe],t[Jt]=l[oe],t[ee]=l[ee],t[le]=l[Wt],t[$t]=l[me],t[Ot]=l[Gt],t[Wt]=l[le],t[Nt]=l[Nt],this.set(t)}identity(){let t=this.values;return t[ae]=1,t[ue]=0,t[fe]=0,t[me]=0,t[ve]=0,t[Qt]=1,t[oe]=0,t[Gt]=0,t[gt]=0,t[Jt]=0,t[ee]=1,t[le]=0,t[$t]=0,t[Ot]=0,t[Wt]=0,t[Nt]=1,this}invert(){let t=this.values,l=this.temp,h=t[$t]*t[Jt]*t[oe]*t[me]-t[gt]*t[Ot]*t[oe]*t[me]-t[$t]*t[Qt]*t[ee]*t[me]+t[ve]*t[Ot]*t[ee]*t[me]+t[gt]*t[Qt]*t[Wt]*t[me]-t[ve]*t[Jt]*t[Wt]*t[me]-t[$t]*t[Jt]*t[fe]*t[Gt]+t[gt]*t[Ot]*t[fe]*t[Gt]+t[$t]*t[ue]*t[ee]*t[Gt]-t[ae]*t[Ot]*t[ee]*t[Gt]-t[gt]*t[ue]*t[Wt]*t[Gt]+t[ae]*t[Jt]*t[Wt]*t[Gt]+t[$t]*t[Qt]*t[fe]*t[le]-t[ve]*t[Ot]*t[fe]*t[le]-t[$t]*t[ue]*t[oe]*t[le]+t[ae]*t[Ot]*t[oe]*t[le]+t[ve]*t[ue]*t[Wt]*t[le]-t[ae]*t[Qt]*t[Wt]*t[le]-t[gt]*t[Qt]*t[fe]*t[Nt]+t[ve]*t[Jt]*t[fe]*t[Nt]+t[gt]*t[ue]*t[oe]*t[Nt]-t[ae]*t[Jt]*t[oe]*t[Nt]-t[ve]*t[ue]*t[ee]*t[Nt]+t[ae]*t[Qt]*t[ee]*t[Nt];if(h==0)throw new Error("non-invertible matrix");let x=1/h;return l[ae]=t[oe]*t[le]*t[Ot]-t[Gt]*t[ee]*t[Ot]+t[Gt]*t[Jt]*t[Wt]-t[Qt]*t[le]*t[Wt]-t[oe]*t[Jt]*t[Nt]+t[Qt]*t[ee]*t[Nt],l[ue]=t[me]*t[ee]*t[Ot]-t[fe]*t[le]*t[Ot]-t[me]*t[Jt]*t[Wt]+t[ue]*t[le]*t[Wt]+t[fe]*t[Jt]*t[Nt]-t[ue]*t[ee]*t[Nt],l[fe]=t[fe]*t[Gt]*t[Ot]-t[me]*t[oe]*t[Ot]+t[me]*t[Qt]*t[Wt]-t[ue]*t[Gt]*t[Wt]-t[fe]*t[Qt]*t[Nt]+t[ue]*t[oe]*t[Nt],l[me]=t[me]*t[oe]*t[Jt]-t[fe]*t[Gt]*t[Jt]-t[me]*t[Qt]*t[ee]+t[ue]*t[Gt]*t[ee]+t[fe]*t[Qt]*t[le]-t[ue]*t[oe]*t[le],l[ve]=t[Gt]*t[ee]*t[$t]-t[oe]*t[le]*t[$t]-t[Gt]*t[gt]*t[Wt]+t[ve]*t[le]*t[Wt]+t[oe]*t[gt]*t[Nt]-t[ve]*t[ee]*t[Nt],l[Qt]=t[fe]*t[le]*t[$t]-t[me]*t[ee]*t[$t]+t[me]*t[gt]*t[Wt]-t[ae]*t[le]*t[Wt]-t[fe]*t[gt]*t[Nt]+t[ae]*t[ee]*t[Nt],l[oe]=t[me]*t[oe]*t[$t]-t[fe]*t[Gt]*t[$t]-t[me]*t[ve]*t[Wt]+t[ae]*t[Gt]*t[Wt]+t[fe]*t[ve]*t[Nt]-t[ae]*t[oe]*t[Nt],l[Gt]=t[fe]*t[Gt]*t[gt]-t[me]*t[oe]*t[gt]+t[me]*t[ve]*t[ee]-t[ae]*t[Gt]*t[ee]-t[fe]*t[ve]*t[le]+t[ae]*t[oe]*t[le],l[gt]=t[Qt]*t[le]*t[$t]-t[Gt]*t[Jt]*t[$t]+t[Gt]*t[gt]*t[Ot]-t[ve]*t[le]*t[Ot]-t[Qt]*t[gt]*t[Nt]+t[ve]*t[Jt]*t[Nt],l[Jt]=t[me]*t[Jt]*t[$t]-t[ue]*t[le]*t[$t]-t[me]*t[gt]*t[Ot]+t[ae]*t[le]*t[Ot]+t[ue]*t[gt]*t[Nt]-t[ae]*t[Jt]*t[Nt],l[ee]=t[ue]*t[Gt]*t[$t]-t[me]*t[Qt]*t[$t]+t[me]*t[ve]*t[Ot]-t[ae]*t[Gt]*t[Ot]-t[ue]*t[ve]*t[Nt]+t[ae]*t[Qt]*t[Nt],l[le]=t[me]*t[Qt]*t[gt]-t[ue]*t[Gt]*t[gt]-t[me]*t[ve]*t[Jt]+t[ae]*t[Gt]*t[Jt]+t[ue]*t[ve]*t[le]-t[ae]*t[Qt]*t[le],l[$t]=t[oe]*t[Jt]*t[$t]-t[Qt]*t[ee]*t[$t]-t[oe]*t[gt]*t[Ot]+t[ve]*t[ee]*t[Ot]+t[Qt]*t[gt]*t[Wt]-t[ve]*t[Jt]*t[Wt],l[Ot]=t[ue]*t[ee]*t[$t]-t[fe]*t[Jt]*t[$t]+t[fe]*t[gt]*t[Ot]-t[ae]*t[ee]*t[Ot]-t[ue]*t[gt]*t[Wt]+t[ae]*t[Jt]*t[Wt],l[Wt]=t[fe]*t[Qt]*t[$t]-t[ue]*t[oe]*t[$t]-t[fe]*t[ve]*t[Ot]+t[ae]*t[oe]*t[Ot]+t[ue]*t[ve]*t[Wt]-t[ae]*t[Qt]*t[Wt],l[Nt]=t[ue]*t[oe]*t[gt]-t[fe]*t[Qt]*t[gt]+t[fe]*t[ve]*t[Jt]-t[ae]*t[oe]*t[Jt]-t[ue]*t[ve]*t[ee]+t[ae]*t[Qt]*t[ee],t[ae]=l[ae]*x,t[ue]=l[ue]*x,t[fe]=l[fe]*x,t[me]=l[me]*x,t[ve]=l[ve]*x,t[Qt]=l[Qt]*x,t[oe]=l[oe]*x,t[Gt]=l[Gt]*x,t[gt]=l[gt]*x,t[Jt]=l[Jt]*x,t[ee]=l[ee]*x,t[le]=l[le]*x,t[$t]=l[$t]*x,t[Ot]=l[Ot]*x,t[Wt]=l[Wt]*x,t[Nt]=l[Nt]*x,this}determinant(){let t=this.values;return t[$t]*t[Jt]*t[oe]*t[me]-t[gt]*t[Ot]*t[oe]*t[me]-t[$t]*t[Qt]*t[ee]*t[me]+t[ve]*t[Ot]*t[ee]*t[me]+t[gt]*t[Qt]*t[Wt]*t[me]-t[ve]*t[Jt]*t[Wt]*t[me]-t[$t]*t[Jt]*t[fe]*t[Gt]+t[gt]*t[Ot]*t[fe]*t[Gt]+t[$t]*t[ue]*t[ee]*t[Gt]-t[ae]*t[Ot]*t[ee]*t[Gt]-t[gt]*t[ue]*t[Wt]*t[Gt]+t[ae]*t[Jt]*t[Wt]*t[Gt]+t[$t]*t[Qt]*t[fe]*t[le]-t[ve]*t[Ot]*t[fe]*t[le]-t[$t]*t[ue]*t[oe]*t[le]+t[ae]*t[Ot]*t[oe]*t[le]+t[ve]*t[ue]*t[Wt]*t[le]-t[ae]*t[Qt]*t[Wt]*t[le]-t[gt]*t[Qt]*t[fe]*t[Nt]+t[ve]*t[Jt]*t[fe]*t[Nt]+t[gt]*t[ue]*t[oe]*t[Nt]-t[ae]*t[Jt]*t[oe]*t[Nt]-t[ve]*t[ue]*t[ee]*t[Nt]+t[ae]*t[Qt]*t[ee]*t[Nt]}translate(t,l,h){let x=this.values;return x[me]+=t,x[Gt]+=l,x[le]+=h,this}copy(){return new Zt().set(this.values)}projection(t,l,h,x){this.identity();let A=1/Math.tan(h*(Math.PI/180)/2),U=(l+t)/(t-l),R=2*l*t/(t-l),y=this.values;return y[ae]=A/x,y[ve]=0,y[gt]=0,y[$t]=0,y[ue]=0,y[Qt]=A,y[Jt]=0,y[Ot]=0,y[fe]=0,y[oe]=0,y[ee]=U,y[Wt]=-1,y[me]=0,y[Gt]=0,y[le]=R,y[Nt]=0,this}ortho2d(t,l,h,x){return this.ortho(t,t+h,l,l+x,0,1)}ortho(t,l,h,x,A,U){this.identity();let R=2/(l-t),y=2/(x-h),P=-2/(U-A),Y=-(l+t)/(l-t),B=-(x+h)/(x-h),G=-(U+A)/(U-A),J=this.values;return J[ae]=R,J[ve]=0,J[gt]=0,J[$t]=0,J[ue]=0,J[Qt]=y,J[Jt]=0,J[Ot]=0,J[fe]=0,J[oe]=0,J[ee]=P,J[Wt]=0,J[me]=Y,J[Gt]=B,J[le]=G,J[Nt]=1,this}multiply(t){let l=this.temp,h=this.values,x=t.values;return l[ae]=h[ae]*x[ae]+h[ue]*x[ve]+h[fe]*x[gt]+h[me]*x[$t],l[ue]=h[ae]*x[ue]+h[ue]*x[Qt]+h[fe]*x[Jt]+h[me]*x[Ot],l[fe]=h[ae]*x[fe]+h[ue]*x[oe]+h[fe]*x[ee]+h[me]*x[Wt],l[me]=h[ae]*x[me]+h[ue]*x[Gt]+h[fe]*x[le]+h[me]*x[Nt],l[ve]=h[ve]*x[ae]+h[Qt]*x[ve]+h[oe]*x[gt]+h[Gt]*x[$t],l[Qt]=h[ve]*x[ue]+h[Qt]*x[Qt]+h[oe]*x[Jt]+h[Gt]*x[Ot],l[oe]=h[ve]*x[fe]+h[Qt]*x[oe]+h[oe]*x[ee]+h[Gt]*x[Wt],l[Gt]=h[ve]*x[me]+h[Qt]*x[Gt]+h[oe]*x[le]+h[Gt]*x[Nt],l[gt]=h[gt]*x[ae]+h[Jt]*x[ve]+h[ee]*x[gt]+h[le]*x[$t],l[Jt]=h[gt]*x[ue]+h[Jt]*x[Qt]+h[ee]*x[Jt]+h[le]*x[Ot],l[ee]=h[gt]*x[fe]+h[Jt]*x[oe]+h[ee]*x[ee]+h[le]*x[Wt],l[le]=h[gt]*x[me]+h[Jt]*x[Gt]+h[ee]*x[le]+h[le]*x[Nt],l[$t]=h[$t]*x[ae]+h[Ot]*x[ve]+h[Wt]*x[gt]+h[Nt]*x[$t],l[Ot]=h[$t]*x[ue]+h[Ot]*x[Qt]+h[Wt]*x[Jt]+h[Nt]*x[Ot],l[Wt]=h[$t]*x[fe]+h[Ot]*x[oe]+h[Wt]*x[ee]+h[Nt]*x[Wt],l[Nt]=h[$t]*x[me]+h[Ot]*x[Gt]+h[Wt]*x[le]+h[Nt]*x[Nt],this.set(this.temp)}multiplyLeft(t){let l=this.temp,h=this.values,x=t.values;return l[ae]=x[ae]*h[ae]+x[ue]*h[ve]+x[fe]*h[gt]+x[me]*h[$t],l[ue]=x[ae]*h[ue]+x[ue]*h[Qt]+x[fe]*h[Jt]+x[me]*h[Ot],l[fe]=x[ae]*h[fe]+x[ue]*h[oe]+x[fe]*h[ee]+x[me]*h[Wt],l[me]=x[ae]*h[me]+x[ue]*h[Gt]+x[fe]*h[le]+x[me]*h[Nt],l[ve]=x[ve]*h[ae]+x[Qt]*h[ve]+x[oe]*h[gt]+x[Gt]*h[$t],l[Qt]=x[ve]*h[ue]+x[Qt]*h[Qt]+x[oe]*h[Jt]+x[Gt]*h[Ot],l[oe]=x[ve]*h[fe]+x[Qt]*h[oe]+x[oe]*h[ee]+x[Gt]*h[Wt],l[Gt]=x[ve]*h[me]+x[Qt]*h[Gt]+x[oe]*h[le]+x[Gt]*h[Nt],l[gt]=x[gt]*h[ae]+x[Jt]*h[ve]+x[ee]*h[gt]+x[le]*h[$t],l[Jt]=x[gt]*h[ue]+x[Jt]*h[Qt]+x[ee]*h[Jt]+x[le]*h[Ot],l[ee]=x[gt]*h[fe]+x[Jt]*h[oe]+x[ee]*h[ee]+x[le]*h[Wt],l[le]=x[gt]*h[me]+x[Jt]*h[Gt]+x[ee]*h[le]+x[le]*h[Nt],l[$t]=x[$t]*h[ae]+x[Ot]*h[ve]+x[Wt]*h[gt]+x[Nt]*h[$t],l[Ot]=x[$t]*h[ue]+x[Ot]*h[Qt]+x[Wt]*h[Jt]+x[Nt]*h[Ot],l[Wt]=x[$t]*h[fe]+x[Ot]*h[oe]+x[Wt]*h[ee]+x[Nt]*h[Wt],l[Nt]=x[$t]*h[me]+x[Ot]*h[Gt]+x[Wt]*h[le]+x[Nt]*h[Nt],this.set(this.temp)}lookAt(t,l,h){Zt.initTemps();let x=Zt.xAxis,A=Zt.yAxis,U=Zt.zAxis;U.setFrom(l).normalize(),x.setFrom(l).normalize(),x.cross(h).normalize(),A.setFrom(x).cross(U).normalize(),this.identity();let R=this.values;return R[ae]=x.x,R[ue]=x.y,R[fe]=x.z,R[ve]=A.x,R[Qt]=A.y,R[oe]=A.z,R[gt]=-U.x,R[Jt]=-U.y,R[ee]=-U.z,Zt.tmpMatrix.identity(),Zt.tmpMatrix.values[me]=-t.x,Zt.tmpMatrix.values[Gt]=-t.y,Zt.tmpMatrix.values[le]=-t.z,this.multiply(Zt.tmpMatrix),this}static initTemps(){Zt.xAxis===null&&(Zt.xAxis=new gs),Zt.yAxis===null&&(Zt.yAxis=new gs),Zt.zAxis===null&&(Zt.zAxis=new gs);}},te=Zt;te.xAxis=null,te.yAxis=null,te.zAxis=null,te.tmpMatrix=new Zt;var he=class{constructor(t,l){this.position=new gs(0,0,0),this.direction=new gs(0,0,-1),this.up=new gs(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new te,this.inverseProjectionView=new te,this.projection=new te,this.view=new te,this.viewportWidth=t,this.viewportHeight=l,this.update();}update(){let t=this.projection,l=this.view,h=this.projectionView,x=this.inverseProjectionView,A=this.zoom,U=this.viewportWidth,R=this.viewportHeight;t.ortho(A*(-U/2),A*(U/2),A*(-R/2),A*(R/2),this.near,this.far),l.lookAt(this.position,this.direction,this.up),h.set(t.values),h.multiply(l),x.set(h.values).invert();}screenToWorld(t,l,h){let x=t.x,A=h-t.y-1;return t.x=2*x/l-1,t.y=2*A/h-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,l,h){return t.project(this.projectionView),t.x=l*(t.x+1)/2,t.y=h*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,l){this.viewportWidth=t,this.viewportHeight=l;}},ce=class{constructor(t){this.mouseX=0,this.mouseY=0,this.buttonDown=false,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=new Array,this.eventListeners=[],this.element=t,this.setupCallbacks(t);}setupCallbacks(t){let l=R=>{if(R instanceof MouseEvent){let y=t.getBoundingClientRect();this.mouseX=R.clientX-y.left,this.mouseY=R.clientY-y.top,this.buttonDown=true,this.listeners.map(P=>{P.down&&P.down(this.mouseX,this.mouseY);}),document.addEventListener("mousemove",h),document.addEventListener("mouseup",x);}},h=R=>{if(R instanceof MouseEvent){let y=t.getBoundingClientRect();this.mouseX=R.clientX-y.left,this.mouseY=R.clientY-y.top,this.listeners.map(P=>{this.buttonDown?P.dragged&&P.dragged(this.mouseX,this.mouseY):P.moved&&P.moved(this.mouseX,this.mouseY);});}},x=R=>{if(R instanceof MouseEvent){let y=t.getBoundingClientRect();this.mouseX=R.clientX-y.left,this.mouseY=R.clientY-y.top,this.buttonDown=false,this.listeners.map(P=>{P.up&&P.up(this.mouseX,this.mouseY);}),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",x);}},A=R=>{R.preventDefault();let y=R.deltaY;R.deltaMode==WheelEvent.DOM_DELTA_LINE&&(y*=8),R.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(y*=24),this.listeners.map(P=>{P.wheel&&P.wheel(R.deltaY);});};t.addEventListener("mousedown",l,true),t.addEventListener("mousemove",h,true),t.addEventListener("mouseup",x,true),t.addEventListener("wheel",A,true),t.addEventListener("touchstart",R=>{if(!this.touch0||!this.touch1){var y=R.changedTouches;let P=y.item(0),Y=t.getBoundingClientRect(),B=P.clientX-Y.left,G=P.clientY-Y.top,J=new de(P.identifier,B,G);if(this.mouseX=B,this.mouseY=G,this.buttonDown=true,!this.touch0)this.touch0=J,this.listeners.map(tt=>{tt.down&&tt.down(J.x,J.y);});else if(!this.touch1){this.touch1=J;let tt=this.touch1.x-this.touch0.x,s=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(tt*tt+s*s),this.listeners.map(e=>{e.zoom&&e.zoom(this.initialPinchDistance,this.initialPinchDistance);});}}R.preventDefault();},false),t.addEventListener("touchmove",R=>{if(this.touch0){var y=R.changedTouches;let B=t.getBoundingClientRect();for(var P=0;P<y.length;P++){var Y=y[P];let G=Y.clientX-B.left,J=Y.clientY-B.top;this.touch0.identifier===Y.identifier&&(this.touch0.x=this.mouseX=G,this.touch0.y=this.mouseY=J,this.listeners.map(tt=>{tt.dragged&&tt.dragged(G,J);})),this.touch1&&this.touch1.identifier===Y.identifier&&(this.touch1.x=this.mouseX=G,this.touch1.y=this.mouseY=J);}if(this.touch0&&this.touch1){let G=this.touch1.x-this.touch0.x,J=this.touch1.x-this.touch0.x,tt=Math.sqrt(G*G+J*J);this.listeners.map(s=>{s.zoom&&s.zoom(this.initialPinchDistance,tt);});}}R.preventDefault();},false);let U=R=>{if(this.touch0){var y=R.changedTouches;let B=t.getBoundingClientRect();for(var P=0;P<y.length;P++){var Y=y[P];let G=Y.clientX-B.left,J=Y.clientY-B.top;if(this.touch0.identifier===Y.identifier)if(this.touch0=null,this.mouseX=G,this.mouseY=J,this.listeners.map(tt=>{tt.up&&tt.up(G,J);}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=true,this.listeners.map(tt=>{tt.down&&tt.down(this.touch0.x,this.touch0.y);});else {this.buttonDown=false;break}this.touch1&&this.touch1.identifier&&(this.touch1=null);}}R.preventDefault();};t.addEventListener("touchend",U,false),t.addEventListener("touchcancel",U);}addListener(t){this.listeners.push(t);}removeListener(t){let l=this.listeners.indexOf(t);l>-1&&this.listeners.splice(l,1);}},de=class{constructor(t,l,h){this.identifier=t,this.x=l,this.y=h;}},we=class{constructor(t,l){this.canvas=t,this.camera=l;let h=0,x=0,U=0,R=0,y=0,P=0,Y=0;new ce(t).addListener({down:(B,G)=>{h=l.position.x,x=l.position.y,U=y=B,R=P=G,Y=l.zoom;},dragged:(B,G)=>{let J=B-U,tt=G-R,s=l.screenToWorld(new gs(0,0),t.clientWidth,t.clientHeight),e=l.screenToWorld(new gs(J,tt),t.clientWidth,t.clientHeight).sub(s);l.position.set(h-e.x,x-e.y,0),l.update(),y=B,P=G;},wheel:B=>{let G=B/200*l.zoom,J=l.zoom+G;if(J>0){let tt=0,s=0;if(B<0)tt=y,s=P;else {let o=new gs(t.clientWidth/2+15,t.clientHeight/2),a=y-o.x,p=t.clientHeight-1-P-o.y;tt=o.x-a,s=t.clientHeight-1-o.y+p;}let e=l.screenToWorld(new gs(tt,s),t.clientWidth,t.clientHeight);l.zoom=J,l.update();let i=l.screenToWorld(new gs(tt,s),t.clientWidth,t.clientHeight);l.position.add(e.sub(i)),l.update();}},zoom:(B,G)=>{let J=B/G;l.zoom=Y*J;},up:(B,G)=>{y=B,P=G;},moved:(B,G)=>{y=B,P=G;}});}},qt=class{constructor(t,l,h){this.vertexShader=l,this.fragmentShader=h,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=l,this.fsSource=h,this.context=t instanceof Is?t:new Is(t),this.context.addRestorable(this),this.compile();}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs);}catch(l){throw this.dispose(),l}}compileShader(t,l){let h=this.context.gl,x=h.createShader(t);if(h.shaderSource(x,l),h.compileShader(x),!h.getShaderParameter(x,h.COMPILE_STATUS)){let A="Couldn't compile shader: "+h.getShaderInfoLog(x);if(h.deleteShader(x),!h.isContextLost())throw new Error(A)}return x}compileProgram(t,l){let h=this.context.gl,x=h.createProgram();if(h.attachShader(x,t),h.attachShader(x,l),h.linkProgram(x),!h.getProgramParameter(x,h.LINK_STATUS)){let A="Couldn't compile shader program: "+h.getProgramInfoLog(x);if(h.deleteProgram(x),!h.isContextLost())throw new Error(A)}return x}restore(){this.compile();}bind(){this.context.gl.useProgram(this.program);}unbind(){this.context.gl.useProgram(null);}setUniformi(t,l){this.context.gl.uniform1i(this.getUniformLocation(t),l);}setUniformf(t,l){this.context.gl.uniform1f(this.getUniformLocation(t),l);}setUniform2f(t,l,h){this.context.gl.uniform2f(this.getUniformLocation(t),l,h);}setUniform3f(t,l,h,x){this.context.gl.uniform3f(this.getUniformLocation(t),l,h,x);}setUniform4f(t,l,h,x,A){this.context.gl.uniform4f(this.getUniformLocation(t),l,h,x,A);}setUniform2x2f(t,l){let h=this.context.gl;this.tmp2x2.set(l),h.uniformMatrix2fv(this.getUniformLocation(t),false,this.tmp2x2);}setUniform3x3f(t,l){let h=this.context.gl;this.tmp3x3.set(l),h.uniformMatrix3fv(this.getUniformLocation(t),false,this.tmp3x3);}setUniform4x4f(t,l){let h=this.context.gl;this.tmp4x4.set(l),h.uniformMatrix4fv(this.getUniformLocation(t),false,this.tmp4x4);}getUniformLocation(t){let l=this.context.gl,h=l.getUniformLocation(this.program,t);if(!h&&!l.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return h}getAttributeLocation(t){let l=this.context.gl,h=l.getAttribLocation(this.program,t);if(h==-1&&!l.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return h}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null);}static newColoredTextured(t){let l=`
				attribute vec4 ${qt.POSITION};
				attribute vec4 ${qt.COLOR};
				attribute vec2 ${qt.TEXCOORDS};
				uniform mat4 ${qt.MVP_MATRIX};
				varying vec4 v_color;
				varying vec2 v_texCoords;

				void main () {
					v_color = ${qt.COLOR};
					v_texCoords = ${qt.TEXCOORDS};
					gl_Position = ${qt.MVP_MATRIX} * ${qt.POSITION};
				}
			`,h=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
				}
			`;return new qt(t,l,h)}static newTwoColoredTextured(t){let l=`
				attribute vec4 ${qt.POSITION};
				attribute vec4 ${qt.COLOR};
				attribute vec4 ${qt.COLOR2};
				attribute vec2 ${qt.TEXCOORDS};
				uniform mat4 ${qt.MVP_MATRIX};
				varying vec4 v_light;
				varying vec4 v_dark;
				varying vec2 v_texCoords;

				void main () {
					v_light = ${qt.COLOR};
					v_dark = ${qt.COLOR2};
					v_texCoords = ${qt.TEXCOORDS};
					gl_Position = ${qt.MVP_MATRIX} * ${qt.POSITION};
				}
			`,h=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_light;
				varying LOWP vec4 v_dark;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					vec4 texColor = texture2D(u_texture, v_texCoords);
					gl_FragColor.a = texColor.a * v_light.a;
					gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
				}
			`;return new qt(t,l,h)}static newColored(t){let l=`
				attribute vec4 ${qt.POSITION};
				attribute vec4 ${qt.COLOR};
				uniform mat4 ${qt.MVP_MATRIX};
				varying vec4 v_color;

				void main () {
					v_color = ${qt.COLOR};
					gl_Position = ${qt.MVP_MATRIX} * ${qt.POSITION};
				}
			`,h=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;

				void main () {
					gl_FragColor = v_color;
				}
			`;return new qt(t,l,h)}},jt=qt;jt.MVP_MATRIX="u_projTrans",jt.POSITION="a_position",jt.COLOR="a_color",jt.COLOR2="a_color2",jt.TEXCOORDS="a_texCoords",jt.SAMPLER="u_texture";var ie=class{constructor(t,l,h,x){this.attributes=l,this.verticesLength=0,this.dirtyVertices=false,this.indicesLength=0,this.dirtyIndices=false,this.elementsPerVertex=0,this.context=t instanceof Is?t:new Is(t),this.elementsPerVertex=0;for(let A=0;A<l.length;A++)this.elementsPerVertex+=l[A].numElements;this.vertices=new Float32Array(h*this.elementsPerVertex),this.indices=new Uint16Array(x),this.context.addRestorable(this);}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=true,this.verticesLength=t;}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=true,this.indicesLength=t;}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var l=0;l<this.attributes.length;l++)t+=this.attributes[l].numElements;return t}setVertices(t){if(this.dirtyVertices=true,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length;}setIndices(t){if(this.dirtyIndices=true,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length;}draw(t,l){this.drawWithOffset(t,l,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex);}drawWithOffset(t,l,h,x){let A=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?A.drawElements(l,x,A.UNSIGNED_SHORT,h*2):A.drawArrays(l,h,x),this.unbind(t);}bind(t){let l=this.context.gl;l.bindBuffer(l.ARRAY_BUFFER,this.verticesBuffer);let h=0;for(let x=0;x<this.attributes.length;x++){let A=this.attributes[x],U=t.getAttributeLocation(A.name);l.enableVertexAttribArray(U),l.vertexAttribPointer(U,A.numElements,l.FLOAT,false,this.elementsPerVertex*4,h*4),h+=A.numElements;}this.indicesLength>0&&l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);}unbind(t){let l=this.context.gl;for(let h=0;h<this.attributes.length;h++){let x=this.attributes[h],A=t.getAttributeLocation(x.name);l.disableVertexAttribArray(A);}l.bindBuffer(l.ARRAY_BUFFER,null),this.indicesLength>0&&l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=false),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=false);}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update();}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer);}},re=class{constructor(t,l,h){this.name=t,this.type=l,this.numElements=h;}},ge=class extends re{constructor(){super(jt.POSITION,Hs.Float,2);}},Ie=class extends re{constructor(){super(jt.POSITION,Hs.Float,3);}},pe=class extends re{constructor(t=0){super(jt.TEXCOORDS+(t==0?"":t),Hs.Float,2);}},oi=class extends re{constructor(){super(jt.COLOR,Hs.Float,4);}},Fr=class extends re{constructor(){super(jt.COLOR2,Hs.Float,4);}},Hs;(function(t){t[t.Float=0]="Float";})(Hs||(Hs={}));var nr=class{constructor(t,l=true,h=10920){if(this.isDrawing=false,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,h>10920)throw new Error("Can't have more than 10920 triangles per batch: "+h);this.context=t instanceof Is?t:new Is(t);let x=l?[new ge,new oi,new pe,new Fr]:[new ge,new oi,new pe];this.mesh=new ie(t,x,h,h*3);let A=this.context.gl;this.srcColorBlend=A.SRC_ALPHA,this.srcAlphaBlend=A.ONE,this.dstBlend=A.ONE_MINUS_SRC_ALPHA;}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=true;let l=this.context.gl;l.enable(l.BLEND),l.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}setBlendMode(t,l,h){this.srcColorBlend==t&&this.srcAlphaBlend==l&&this.dstBlend==h||(this.srcColorBlend=t,this.srcAlphaBlend=l,this.dstBlend=h,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,h,l,h)));}draw(t,l,h){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+l.length>this.mesh.getVertices().length||this.indicesLength+h.length>this.mesh.getIndices().length)&&this.flush();let x=this.mesh.numVertices();this.mesh.getVertices().set(l,this.verticesLength),this.verticesLength+=l.length,this.mesh.setVerticesLength(this.verticesLength);let A=this.mesh.getIndices();for(let U=this.indicesLength,R=0;R<h.length;U++,R++)A[U]=h[R]+x;this.indicesLength+=h.length,this.mesh.setIndicesLength(this.indicesLength);}flush(){this.verticesLength!=0&&(this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++);}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=false;let t=this.context.gl;t.disable(t.BLEND);}getDrawCalls(){return this.drawCalls}dispose(){this.mesh.dispose();}},Pr=class{constructor(t,l=10920){if(this.isDrawing=false,this.shapeType=rs.Filled,this.color=new d(1,1,1,1),this.vertexIndex=0,this.tmp=new Q,l>10920)throw new Error("Can't have more than 10920 triangles per batch: "+l);this.context=t instanceof Is?t:new Is(t),this.mesh=new ie(t,[new ge,new oi],l,0);let h=this.context.gl;this.srcColorBlend=h.SRC_ALPHA,this.srcAlphaBlend=h.ONE,this.dstBlend=h.ONE_MINUS_SRC_ALPHA;}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=true;let l=this.context.gl;l.enable(l.BLEND),l.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}setBlendMode(t,l,h){this.srcColorBlend=t,this.srcAlphaBlend=l,this.dstBlend=h,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,h,l,h));}setColor(t){this.color.setFromColor(t);}setColorWith(t,l,h,x){this.color.set(t,l,h,x);}point(t,l,h=null){this.check(rs.Point,1),h===null&&(h=this.color),this.vertex(t,l,h);}line(t,l,h,x,A=null){this.check(rs.Line,2);this.mesh.getVertices();this.vertexIndex;A===null&&(A=this.color),this.vertex(t,l,A),this.vertex(h,x,A);}triangle(t,l,h,x,A,U,R,y=null,P=null,Y=null){this.check(t?rs.Filled:rs.Line,3);this.mesh.getVertices();this.vertexIndex;y===null&&(y=this.color),P===null&&(P=this.color),Y===null&&(Y=this.color),t?(this.vertex(l,h,y),this.vertex(x,A,P),this.vertex(U,R,Y)):(this.vertex(l,h,y),this.vertex(x,A,P),this.vertex(x,A,y),this.vertex(U,R,P),this.vertex(U,R,y),this.vertex(l,h,P));}quad(t,l,h,x,A,U,R,y,P,Y=null,B=null,G=null,J=null){this.check(t?rs.Filled:rs.Line,3);this.mesh.getVertices();this.vertexIndex;Y===null&&(Y=this.color),B===null&&(B=this.color),G===null&&(G=this.color),J===null&&(J=this.color),t?(this.vertex(l,h,Y),this.vertex(x,A,B),this.vertex(U,R,G),this.vertex(U,R,G),this.vertex(y,P,J),this.vertex(l,h,Y)):(this.vertex(l,h,Y),this.vertex(x,A,B),this.vertex(x,A,B),this.vertex(U,R,G),this.vertex(U,R,G),this.vertex(y,P,J),this.vertex(y,P,J),this.vertex(l,h,Y));}rect(t,l,h,x,A,U=null){this.quad(t,l,h,l+x,h,l+x,h+A,l,h+A,U,U,U,U);}rectLine(t,l,h,x,A,U,R=null){this.check(t?rs.Filled:rs.Line,8),R===null&&(R=this.color);let y=this.tmp.set(A-h,l-x);y.normalize(),U*=.5;let P=y.x*U,Y=y.y*U;t?(this.vertex(l+P,h+Y,R),this.vertex(l-P,h-Y,R),this.vertex(x+P,A+Y,R),this.vertex(x-P,A-Y,R),this.vertex(x+P,A+Y,R),this.vertex(l-P,h-Y,R)):(this.vertex(l+P,h+Y,R),this.vertex(l-P,h-Y,R),this.vertex(x+P,A+Y,R),this.vertex(x-P,A-Y,R),this.vertex(x+P,A+Y,R),this.vertex(l+P,h+Y,R),this.vertex(x-P,A-Y,R),this.vertex(l-P,h-Y,R));}x(t,l,h){this.line(t-h,l-h,t+h,l+h),this.line(t-h,l+h,t+h,l-h);}polygon(t,l,h,x=null){if(h<3)throw new Error("Polygon must contain at least 3 vertices");this.check(rs.Line,h*2),x===null&&(x=this.color);this.mesh.getVertices();this.vertexIndex;l<<=1,h<<=1;let R=t[l],y=t[l+1],P=l+h;for(let Y=l,B=l+h-2;Y<B;Y+=2){let G=t[Y],J=t[Y+1],tt=0,s=0;Y+2>=P?(tt=R,s=y):(tt=t[Y+2],s=t[Y+3]),this.vertex(G,J,x),this.vertex(tt,s,x);}}circle(t,l,h,x,A=null,U=0){if(U===0&&(U=Math.max(1,6*S.cbrt(x)|0)),U<=0)throw new Error("segments must be > 0.");A===null&&(A=this.color);let R=2*S.PI/U,y=Math.cos(R),P=Math.sin(R),Y=x,B=0;if(t){this.check(rs.Filled,U*3+3),U--;for(let J=0;J<U;J++){this.vertex(l,h,A),this.vertex(l+Y,h+B,A);let tt=Y;Y=y*Y-P*B,B=P*tt+y*B,this.vertex(l+Y,h+B,A);}this.vertex(l,h,A),this.vertex(l+Y,h+B,A);}else {this.check(rs.Line,U*2+2);for(let J=0;J<U;J++){this.vertex(l+Y,h+B,A);let tt=Y;Y=y*Y-P*B,B=P*tt+y*B,this.vertex(l+Y,h+B,A);}this.vertex(l+Y,h+B,A);}Y=x,B=0,this.vertex(l+Y,h+B,A);}curve(t,l,h,x,A,U,R,y,P,Y=null){this.check(rs.Line,P*2+2),Y===null&&(Y=this.color);let B=1/P,G=B*B,J=B*B*B,tt=3*B,s=3*G,e=6*G,i=6*J,o=t-h*2+A,a=l-x*2+U,p=(h-A)*3-t+R,m=(x-U)*3-l+y,g=t,w=l,b=(h-t)*tt+o*s+p*J,C=(x-l)*tt+a*s+m*J,F=o*e+p*i,L=a*e+m*i,N=p*i,O=m*i;for(;P-- >0;)this.vertex(g,w,Y),g+=b,w+=C,b+=F,C+=L,F+=N,L+=O,this.vertex(g,w,Y);this.vertex(g,w,Y),this.vertex(R,y,Y);}vertex(t,l,h){let x=this.vertexIndex,A=this.mesh.getVertices();A[x++]=t,A[x++]=l,A[x++]=h.r,A[x++]=h.g,A[x++]=h.b,A[x++]=h.a,this.vertexIndex=x;}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=false;}flush(){this.vertexIndex!=0&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0);}check(t,l){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t)if(this.mesh.maxVertices()-this.mesh.numVertices()<l)this.flush();else return;else this.flush(),this.shapeType=t;}dispose(){this.mesh.dispose();}},rs;(function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled";})(rs||(rs={}));var xi=class{constructor(t){this.boneLineColor=new d(1,0,0,1),this.boneOriginColor=new d(0,1,0,1),this.attachmentLineColor=new d(0,0,1,.5),this.triangleLineColor=new d(1,.64,0,.5),this.pathColor=new d().setFromString("FF7F00"),this.clipColor=new d(.8,0,0,2),this.aabbColor=new d(0,1,0,.5),this.drawBones=true,this.drawRegionAttachments=true,this.drawBoundingBoxes=true,this.drawMeshHull=true,this.drawMeshTriangles=true,this.drawPaths=true,this.drawSkeletonXY=false,this.drawClipping=true,this.premultipliedAlpha=false,this.scale=1,this.boneWidth=2,this.bounds=new tn,this.temp=new Array,this.vertices=E.newFloatArray(2*1024),this.context=t instanceof Is?t:new Is(t);}draw(t,l,h=null){let x=l.x,A=l.y,U=this.context.gl,R=this.premultipliedAlpha?U.ONE:U.SRC_ALPHA;t.setBlendMode(R,U.ONE,U.ONE_MINUS_SRC_ALPHA);let y=l.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let P=0,Y=y.length;P<Y;P++){let B=y[P];if(h&&h.indexOf(B.data.name)>-1||!B.parent)continue;let G=x+B.data.length*B.a+B.worldX,J=A+B.data.length*B.c+B.worldY;t.rectLine(true,x+B.worldX,A+B.worldY,G,J,this.boneWidth*this.scale);}this.drawSkeletonXY&&t.x(x,A,4*this.scale);}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let P=l.slots;for(let Y=0,B=P.length;Y<B;Y++){let G=P[Y],J=G.getAttachment();if(J instanceof qe){let tt=J,s=this.vertices;tt.computeWorldVertices(G.bone,s,0,2),t.line(s[0],s[1],s[2],s[3]),t.line(s[2],s[3],s[4],s[5]),t.line(s[4],s[5],s[6],s[7]),t.line(s[6],s[7],s[0],s[1]);}}}if(this.drawMeshHull||this.drawMeshTriangles){let P=l.slots;for(let Y=0,B=P.length;Y<B;Y++){let G=P[Y];if(!G.bone.active)continue;let J=G.getAttachment();if(!(J instanceof zs))continue;let tt=J,s=this.vertices;tt.computeWorldVertices(G,0,tt.worldVerticesLength,s,0,2);let e=tt.triangles,i=tt.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let o=0,a=e.length;o<a;o+=3){let p=e[o]*2,m=e[o+1]*2,g=e[o+2]*2;t.triangle(false,s[p],s[p+1],s[m],s[m+1],s[g],s[g+1]);}}if(this.drawMeshHull&&i>0){t.setColor(this.attachmentLineColor),i=(i>>1)*2;let o=s[i-2],a=s[i-1];for(let p=0,m=i;p<m;p+=2){let g=s[p],w=s[p+1];t.line(g,w,o,a),o=g,a=w;}}}}if(this.drawBoundingBoxes){let P=this.bounds;P.update(l,true),t.setColor(this.aabbColor),t.rect(false,P.minX,P.minY,P.getWidth(),P.getHeight());let Y=P.polygons,B=P.boundingBoxes;for(let G=0,J=Y.length;G<J;G++){let tt=Y[G];t.setColor(B[G].color),t.polygon(tt,0,tt.length);}}if(this.drawPaths){let P=l.slots;for(let Y=0,B=P.length;Y<B;Y++){let G=P[Y];if(!G.bone.active)continue;let J=G.getAttachment();if(!(J instanceof Ps))continue;let tt=J,s=tt.worldVerticesLength,e=this.temp=E.setArraySize(this.temp,s,0);tt.computeWorldVertices(G,0,s,e,0,2);let i=this.pathColor,o=e[2],a=e[3],p=0,m=0;if(tt.closed){t.setColor(i);let g=e[0],w=e[1],b=e[s-2],C=e[s-1];p=e[s-4],m=e[s-3],t.curve(o,a,g,w,b,C,p,m,32),t.setColor(xi.LIGHT_GRAY),t.line(o,a,g,w),t.line(p,m,b,C);}s-=4;for(let g=4;g<s;g+=6){let w=e[g],b=e[g+1],C=e[g+2],F=e[g+3];p=e[g+4],m=e[g+5],t.setColor(i),t.curve(o,a,w,b,C,F,p,m,32),t.setColor(xi.LIGHT_GRAY),t.line(o,a,w,b),t.line(p,m,C,F),o=p,a=m;}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let P=0,Y=y.length;P<Y;P++){let B=y[P];h&&h.indexOf(B.data.name)>-1||t.circle(true,x+B.worldX,A+B.worldY,3*this.scale,xi.GREEN,8);}}if(this.drawClipping){let P=l.slots;t.setColor(this.clipColor);for(let Y=0,B=P.length;Y<B;Y++){let G=P[Y];if(!G.bone.active)continue;let J=G.getAttachment();if(!(J instanceof fi))continue;let tt=J,s=tt.worldVerticesLength,e=this.temp=E.setArraySize(this.temp,s,0);tt.computeWorldVertices(G,0,s,e,0,2);for(let i=0,o=e.length;i<o;i+=2){let a=e[i],p=e[i+1],m=e[(i+2)%e.length],g=e[(i+3)%e.length];t.line(a,p,m,g);}}}}dispose(){}},ti=xi;ti.LIGHT_GRAY=new d(.7529411764705882,.7529411764705882,.7529411764705882,1),ti.GREEN=new d(0,1,0,1);var ar=class{constructor(t,l,h){this.vertices=t,this.numVertices=l,this.numFloats=h;}},nn=class{constructor(t,l=true){this.premultipliedAlpha=false,this.vertexEffect=null,this.tempColor=new d,this.tempColor2=new d,this.vertexSize=8,this.twoColorTint=false,this.renderable=new ar(null,0,0),this.clipper=new sr,this.temp=new Q,this.temp2=new Q,this.temp3=new d,this.temp4=new d,this.twoColorTint=l,l&&(this.vertexSize+=4),this.vertices=E.newFloatArray(this.vertexSize*1024);}draw(t,l,h=-1,x=-1){let A=this.clipper,U=this.premultipliedAlpha,R=this.twoColorTint,y=null,P=this.temp,Y=this.temp2,B=this.temp3,G=this.temp4,J=this.renderable,tt=null,s=null,e=l.drawOrder,i=null,o=l.color,a=R?12:8,p=false;h==-1&&(p=true);for(let m=0,g=e.length;m<g;m++){let w=A.isClipping()?2:a,b=e[m];if(!b.bone.active){A.clipEndWithSlot(b);continue}if(h>=0&&h==b.data.index&&(p=true),!p){A.clipEndWithSlot(b);continue}x>=0&&x==b.data.index&&(p=false);let C=b.getAttachment(),F=null;if(C instanceof qe){let L=C;J.vertices=this.vertices,J.numVertices=4,J.numFloats=w<<2,L.computeWorldVertices(b.bone,J.vertices,0,w),s=nn.QUAD_TRIANGLES,tt=L.uvs,F=L.region.renderObject.page.texture,i=L.color;}else if(C instanceof zs){let L=C;J.vertices=this.vertices,J.numVertices=L.worldVerticesLength>>1,J.numFloats=J.numVertices*w,J.numFloats>J.vertices.length&&(J.vertices=this.vertices=E.newFloatArray(J.numFloats)),L.computeWorldVertices(b,0,L.worldVerticesLength,J.vertices,0,w),s=L.triangles,F=L.region.renderObject.page.texture,tt=L.uvs,i=L.color;}else if(C instanceof fi){let L=C;A.clipStart(b,L);continue}else {A.clipEndWithSlot(b);continue}if(F){let L=b.color,N=this.tempColor;N.r=o.r*L.r*i.r,N.g=o.g*L.g*i.g,N.b=o.b*L.b*i.b,N.a=o.a*L.a*i.a,U&&(N.r*=N.a,N.g*=N.a,N.b*=N.a);let O=this.tempColor2;b.darkColor?(U?(O.r=b.darkColor.r*N.a,O.g=b.darkColor.g*N.a,O.b=b.darkColor.b*N.a):O.setFromColor(b.darkColor),O.a=U?1:0):O.set(0,0,0,1);let Z=b.data.blendMode;if(Z!=y&&(y=Z,t.setBlendMode(rr.getSourceColorGLBlendMode(y,U),rr.getSourceAlphaGLBlendMode(y),rr.getDestGLBlendMode(y))),A.isClipping()){A.clipTriangles(J.vertices,J.numFloats,s,s.length,tt,N,O,R);let q=new Float32Array(A.clippedVertices),j=A.clippedTriangles;if(this.vertexEffect){let _=this.vertexEffect,H=q;if(R)for(let K=0,rt=q.length;K<rt;K+=a)P.x=H[K],P.y=H[K+1],B.set(H[K+2],H[K+3],H[K+4],H[K+5]),Y.x=H[K+6],Y.y=H[K+7],G.set(H[K+8],H[K+9],H[K+10],H[K+11]),_.transform(P,Y,B,G),H[K]=P.x,H[K+1]=P.y,H[K+2]=B.r,H[K+3]=B.g,H[K+4]=B.b,H[K+5]=B.a,H[K+6]=Y.x,H[K+7]=Y.y,H[K+8]=G.r,H[K+9]=G.g,H[K+10]=G.b,H[K+11]=G.a;else for(let K=0,rt=q.length;K<rt;K+=a)P.x=H[K],P.y=H[K+1],B.set(H[K+2],H[K+3],H[K+4],H[K+5]),Y.x=H[K+6],Y.y=H[K+7],G.set(0,0,0,0),_.transform(P,Y,B,G),H[K]=P.x,H[K+1]=P.y,H[K+2]=B.r,H[K+3]=B.g,H[K+4]=B.b,H[K+5]=B.a,H[K+6]=Y.x,H[K+7]=Y.y;}t.draw(F,q,j);}else {let q=J.vertices;if(this.vertexEffect){let _=this.vertexEffect;if(R)for(let H=0,K=0,rt=J.numFloats;H<rt;H+=a,K+=2)P.x=q[H],P.y=q[H+1],Y.x=tt[K],Y.y=tt[K+1],B.setFromColor(N),G.setFromColor(O),_.transform(P,Y,B,G),q[H]=P.x,q[H+1]=P.y,q[H+2]=B.r,q[H+3]=B.g,q[H+4]=B.b,q[H+5]=B.a,q[H+6]=Y.x,q[H+7]=Y.y,q[H+8]=G.r,q[H+9]=G.g,q[H+10]=G.b,q[H+11]=G.a;else for(let H=0,K=0,rt=J.numFloats;H<rt;H+=a,K+=2)P.x=q[H],P.y=q[H+1],Y.x=tt[K],Y.y=tt[K+1],B.setFromColor(N),G.set(0,0,0,0),_.transform(P,Y,B,G),q[H]=P.x,q[H+1]=P.y,q[H+2]=B.r,q[H+3]=B.g,q[H+4]=B.b,q[H+5]=B.a,q[H+6]=Y.x,q[H+7]=Y.y;}else if(R)for(let _=2,H=0,K=J.numFloats;_<K;_+=a,H+=2)q[_]=N.r,q[_+1]=N.g,q[_+2]=N.b,q[_+3]=N.a,q[_+4]=tt[H],q[_+5]=tt[H+1],q[_+6]=O.r,q[_+7]=O.g,q[_+8]=O.b,q[_+9]=O.a;else for(let _=2,H=0,K=J.numFloats;_<K;_+=a,H+=2)q[_]=N.r,q[_+1]=N.g,q[_+2]=N.b,q[_+3]=N.a,q[_+4]=tt[H],q[_+5]=tt[H+1];let j=J.vertices.subarray(0,J.numFloats);t.draw(F,j,s);}}A.clipEndWithSlot(b);}A.clipEnd();}},Xi=nn;Xi.QUAD_TRIANGLES=[0,1,2,2,3,0];var Mt=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Bi=[0,1,2,2,3,0],Vi=new d(1,1,1,1),Js=class{constructor(t,l,h=true){this.twoColorTint=false,this.canvas=t,this.context=l instanceof Is?l:new Is(l),this.twoColorTint=h,this.camera=new he(t.width,t.height),this.batcherShader=h?jt.newTwoColoredTextured(this.context):jt.newColoredTextured(this.context),this.batcher=new nr(this.context,h),this.shapesShader=jt.newColored(this.context),this.shapes=new Pr(this.context),this.skeletonRenderer=new Xi(this.context,h),this.skeletonDebugRenderer=new ti(this.context);}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose();}begin(){this.camera.update(),this.enableRenderer(this.batcher);}drawSkeleton(t,l=false,h=-1,x=-1){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=l,this.skeletonRenderer.draw(this.batcher,t,h,x);}drawSkeletonDebug(t,l=false,h=null){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=l,this.skeletonDebugRenderer.draw(this.shapes,t,h);}drawTexture(t,l,h,x,A,U=null){this.enableRenderer(this.batcher),U===null&&(U=Vi);var R=0;Mt[R++]=l,Mt[R++]=h,Mt[R++]=U.r,Mt[R++]=U.g,Mt[R++]=U.b,Mt[R++]=U.a,Mt[R++]=0,Mt[R++]=1,this.twoColorTint&&(Mt[R++]=0,Mt[R++]=0,Mt[R++]=0,Mt[R++]=0),Mt[R++]=l+x,Mt[R++]=h,Mt[R++]=U.r,Mt[R++]=U.g,Mt[R++]=U.b,Mt[R++]=U.a,Mt[R++]=1,Mt[R++]=1,this.twoColorTint&&(Mt[R++]=0,Mt[R++]=0,Mt[R++]=0,Mt[R++]=0),Mt[R++]=l+x,Mt[R++]=h+A,Mt[R++]=U.r,Mt[R++]=U.g,Mt[R++]=U.b,Mt[R++]=U.a,Mt[R++]=1,Mt[R++]=0,this.twoColorTint&&(Mt[R++]=0,Mt[R++]=0,Mt[R++]=0,Mt[R++]=0),Mt[R++]=l,Mt[R++]=h+A,Mt[R++]=U.r,Mt[R++]=U.g,Mt[R++]=U.b,Mt[R++]=U.a,Mt[R++]=0,Mt[R++]=0,this.twoColorTint&&(Mt[R++]=0,Mt[R++]=0,Mt[R++]=0,Mt[R]=0),this.batcher.draw(t,Mt,Bi);}drawTextureUV(t,l,h,x,A,U,R,y,P,Y=null){this.enableRenderer(this.batcher),Y===null&&(Y=Vi);var B=0;Mt[B++]=l,Mt[B++]=h,Mt[B++]=Y.r,Mt[B++]=Y.g,Mt[B++]=Y.b,Mt[B++]=Y.a,Mt[B++]=U,Mt[B++]=R,this.twoColorTint&&(Mt[B++]=0,Mt[B++]=0,Mt[B++]=0,Mt[B++]=0),Mt[B++]=l+x,Mt[B++]=h,Mt[B++]=Y.r,Mt[B++]=Y.g,Mt[B++]=Y.b,Mt[B++]=Y.a,Mt[B++]=y,Mt[B++]=R,this.twoColorTint&&(Mt[B++]=0,Mt[B++]=0,Mt[B++]=0,Mt[B++]=0),Mt[B++]=l+x,Mt[B++]=h+A,Mt[B++]=Y.r,Mt[B++]=Y.g,Mt[B++]=Y.b,Mt[B++]=Y.a,Mt[B++]=y,Mt[B++]=P,this.twoColorTint&&(Mt[B++]=0,Mt[B++]=0,Mt[B++]=0,Mt[B++]=0),Mt[B++]=l,Mt[B++]=h+A,Mt[B++]=Y.r,Mt[B++]=Y.g,Mt[B++]=Y.b,Mt[B++]=Y.a,Mt[B++]=U,Mt[B++]=P,this.twoColorTint&&(Mt[B++]=0,Mt[B++]=0,Mt[B++]=0,Mt[B]=0),this.batcher.draw(t,Mt,Bi);}drawTextureRotated(t,l,h,x,A,U,R,y,P=null){this.enableRenderer(this.batcher),P===null&&(P=Vi);let Y=l+U,B=h+R,G=-U,J=-R,tt=x-U,s=A-R,e=G,i=J,o=G,a=s,p=tt,m=s,g=tt,w=J,b=0,C=0,F=0,L=0,N=0,O=0,Z=0,q=0;if(y!=0){let _=S.cosDeg(y),H=S.sinDeg(y);b=_*e-H*i,C=H*e+_*i,Z=_*o-H*a,q=H*o+_*a,N=_*p-H*m,O=H*p+_*m,F=N+(b-Z),L=O+(C-q);}else b=e,C=i,Z=o,q=a,N=p,O=m,F=g,L=w;b+=Y,C+=B,F+=Y,L+=B,N+=Y,O+=B,Z+=Y,q+=B;var j=0;Mt[j++]=b,Mt[j++]=C,Mt[j++]=P.r,Mt[j++]=P.g,Mt[j++]=P.b,Mt[j++]=P.a,Mt[j++]=0,Mt[j++]=1,this.twoColorTint&&(Mt[j++]=0,Mt[j++]=0,Mt[j++]=0,Mt[j++]=0),Mt[j++]=F,Mt[j++]=L,Mt[j++]=P.r,Mt[j++]=P.g,Mt[j++]=P.b,Mt[j++]=P.a,Mt[j++]=1,Mt[j++]=1,this.twoColorTint&&(Mt[j++]=0,Mt[j++]=0,Mt[j++]=0,Mt[j++]=0),Mt[j++]=N,Mt[j++]=O,Mt[j++]=P.r,Mt[j++]=P.g,Mt[j++]=P.b,Mt[j++]=P.a,Mt[j++]=1,Mt[j++]=0,this.twoColorTint&&(Mt[j++]=0,Mt[j++]=0,Mt[j++]=0,Mt[j++]=0),Mt[j++]=Z,Mt[j++]=q,Mt[j++]=P.r,Mt[j++]=P.g,Mt[j++]=P.b,Mt[j++]=P.a,Mt[j++]=0,Mt[j++]=0,this.twoColorTint&&(Mt[j++]=0,Mt[j++]=0,Mt[j++]=0,Mt[j]=0),this.batcher.draw(t,Mt,Bi);}drawRegion(t,l,h,x,A,U=null){this.enableRenderer(this.batcher),U===null&&(U=Vi);var R=0;Mt[R++]=l,Mt[R++]=h,Mt[R++]=U.r,Mt[R++]=U.g,Mt[R++]=U.b,Mt[R++]=U.a,Mt[R++]=t.u,Mt[R++]=t.v2,this.twoColorTint&&(Mt[R++]=0,Mt[R++]=0,Mt[R++]=0,Mt[R++]=0),Mt[R++]=l+x,Mt[R++]=h,Mt[R++]=U.r,Mt[R++]=U.g,Mt[R++]=U.b,Mt[R++]=U.a,Mt[R++]=t.u2,Mt[R++]=t.v2,this.twoColorTint&&(Mt[R++]=0,Mt[R++]=0,Mt[R++]=0,Mt[R++]=0),Mt[R++]=l+x,Mt[R++]=h+A,Mt[R++]=U.r,Mt[R++]=U.g,Mt[R++]=U.b,Mt[R++]=U.a,Mt[R++]=t.u2,Mt[R++]=t.v,this.twoColorTint&&(Mt[R++]=0,Mt[R++]=0,Mt[R++]=0,Mt[R++]=0),Mt[R++]=l,Mt[R++]=h+A,Mt[R++]=U.r,Mt[R++]=U.g,Mt[R++]=U.b,Mt[R++]=U.a,Mt[R++]=t.u,Mt[R++]=t.v,this.twoColorTint&&(Mt[R++]=0,Mt[R++]=0,Mt[R++]=0,Mt[R]=0),this.batcher.draw(t.page.texture,Mt,Bi);}line(t,l,h,x,A=null,U=null){this.enableRenderer(this.shapes),this.shapes.line(t,l,h,x,A);}triangle(t,l,h,x,A,U,R,y=null,P=null,Y=null){this.enableRenderer(this.shapes),this.shapes.triangle(t,l,h,x,A,U,R,y,P,Y);}quad(t,l,h,x,A,U,R,y,P,Y=null,B=null,G=null,J=null){this.enableRenderer(this.shapes),this.shapes.quad(t,l,h,x,A,U,R,y,P,Y,B,G,J);}rect(t,l,h,x,A,U=null){this.enableRenderer(this.shapes),this.shapes.rect(t,l,h,x,A,U);}rectLine(t,l,h,x,A,U,R=null){this.enableRenderer(this.shapes),this.shapes.rectLine(t,l,h,x,A,U,R);}polygon(t,l,h,x=null){this.enableRenderer(this.shapes),this.shapes.polygon(t,l,h,x);}circle(t,l,h,x,A=null,U=0){this.enableRenderer(this.shapes),this.shapes.circle(t,l,h,x,A,U);}curve(t,l,h,x,A,U,R,y,P,Y=null){this.enableRenderer(this.shapes),this.shapes.curve(t,l,h,x,A,U,R,y,P,Y);}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null;}resize(t){let l=this.canvas;var h=window.devicePixelRatio||1,x=Math.round(l.clientWidth*h),A=Math.round(l.clientHeight*h);if((l.width!=x||l.height!=A)&&(l.width=x,l.height=A),this.context.gl.viewport(0,0,l.width,l.height),t===vi.Expand)this.camera.setViewport(x,A);else if(t===vi.Fit){let U=l.width,R=l.height,y=this.camera.viewportWidth,P=this.camera.viewportHeight,Y=P/y,B=R/U,G=Y<B?y/U:P/R;this.camera.setViewport(U*G,R*G);}this.camera.update();}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof nr?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(jt.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof Pr?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(jt.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer);}},vi;(function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit";})(vi||(vi={}));var wi,ci,Lr=0,Xr=1,Di=1,Br=165,Vr=108,di=163,an=class{constructor(t){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new st,this.backgroundColor=new d(.135,.135,.135,1),this.tempColor=new d,this.renderer=t,this.timeKeeper.maxDelta=9,!ci){let l=navigator.userAgent.indexOf("Safari")>-1,h=()=>Lr++;ci=new Image,ci.src=or,l||(ci.crossOrigin="anonymous"),ci.onload=h,wi=new Image,wi.src=At,l||(wi.crossOrigin="anonymous"),wi.onload=h;}}dispose(){var t,l;(t=this.logo)==null||t.dispose(),(l=this.spinner)==null||l.dispose();}draw(t=false){if(Lr<2||t&&this.fadeOut>Di)return;this.timeKeeper.update();let l=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=this.timeKeeper.delta*200*(1+1.5*Math.pow(l,5));let h=this.tempColor,x=this.renderer,A=x.canvas,U=x.context.gl;if(x.resize(vi.Expand),x.camera.position.set(A.width/2,A.height/2,0),x.batcher.setBlendMode(U.ONE,U.ONE,U.ONE_MINUS_SRC_ALPHA),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>Di)return;h.setFromColor(this.backgroundColor),l=1-this.fadeOut/Di,l=1-(l-1)*(l-1),h.a*=l,h.a>0&&(x.camera.zoom=1,x.begin(),x.quad(true,0,0,A.width,0,A.width,A.height,0,A.height,h,h,h,h),x.end());}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(U.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),U.clear(U.COLOR_BUFFER_BIT)),l=1;l*=Math.min(this.fadeIn/Xr,1),h.set(l,l,l,l),this.logo||(this.logo=new Li(x.context,ci),this.spinner=new Li(x.context,wi)),x.camera.zoom=Math.max(1,di/A.height),x.begin(),x.drawTexture(this.logo,(A.width-Br)/2,(A.height-Vr)/2,Br,Vr,h),x.drawTextureRotated(this.spinner,(A.width-di)/2,(A.height-di)/2,di,di,di/2,di/2,this.angle,h),x.end();}},At="data:image/png;base64,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",or="data:image/png;base64,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",lr=class{constructor(t,l){this.time=new st,l.pathPrefix===void 0&&(l.pathPrefix=""),l.app===void 0&&(l.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),l.webglConfig===void 0&&(l.webglConfig={alpha:true}),this.htmlCanvas=t,this.context=new Is(t,l.webglConfig),this.renderer=new Js(t,this.context),this.gl=this.context.gl,this.assetManager=new Vs(this.context,l.pathPrefix),this.input=new ce(t),l.app.loadAssets(this);let h=()=>{requestAnimationFrame(h),this.time.update(),l.app.update(this,this.time.delta),l.app.render(this);},x=()=>{if(this.assetManager.isLoadingComplete()){this.assetManager.hasErrors()?l.app.error(this,this.assetManager.getErrors()):(l.app.initialize(this),h());return}requestAnimationFrame(x);};requestAnimationFrame(x);}clear(t,l,h,x){this.gl.clearColor(t,l,h,x),this.gl.clear(this.gl.COLOR_BUFFER_BIT);}};return v})();var Bo=(()=>{var T=Object.defineProperty,f=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,c=(s,e)=>{for(var i in e)T(s,i,{get:e[i],enumerable:true});},n=(s,e,i,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of r(e))!v.call(s,a)&&a!==i&&T(s,a,{get:()=>e[a],enumerable:!(o=f(e,a))||o.enumerable});return s},u=s=>n(T({},"__esModule",{value:true}),s),d={};c(d,{AlphaTimeline:()=>De,Animation:()=>at,AnimationState:()=>gr,AnimationStateAdapter:()=>pr,AnimationStateData:()=>yr,AssetCache:()=>hi,AssetManager:()=>le,AssetManagerBase:()=>Gs,AtlasAttachmentLoader:()=>Ar,Attachment:()=>ot,AttachmentTimeline:()=>Qe,BinaryInput:()=>$r,BlendMode:()=>Ir,Bone:()=>ms,BoneData:()=>ki,BoundingBoxAttachment:()=>zs,CURRENT:()=>wr,CameraController:()=>Pr,ClippingAttachment:()=>Ps,Color:()=>V,Color2Attribute:()=>Bi,ColorAttribute:()=>Mt,ConstraintData:()=>Ls,CurveTimeline:()=>ht,CurveTimeline1:()=>$,CurveTimeline2:()=>ct,DebugUtils:()=>z,DeformTimeline:()=>ss,Downloader:()=>Qi,DrawOrderTimeline:()=>hs,Event:()=>Ki,EventData:()=>Sr,EventQueue:()=>Ti,EventTimeline:()=>us,EventType:()=>fi,FIRST:()=>$s,FakeTexture:()=>Mr,GLTexture:()=>ee,HOLD_FIRST:()=>Hi,HOLD_MIX:()=>xr,HOLD_SUBSEQUENT:()=>ji,IkConstraint:()=>$i,IkConstraintData:()=>Yi,IkConstraintTimeline:()=>as,Inherit:()=>Ys,InheritTimeline:()=>_t,Input:()=>Hs,IntSet:()=>M,Interpolation:()=>D,LoadingScreen:()=>B,M00:()=>Ot,M01:()=>Wt,M02:()=>Nt,M03:()=>Zt,M10:()=>te,M11:()=>he,M12:()=>ce,M13:()=>de,M20:()=>we,M21:()=>qt,M22:()=>jt,M23:()=>ie,M30:()=>re,M31:()=>ge,M32:()=>Ie,M33:()=>pe,ManagedWebGLRenderingContext:()=>Jt,MathUtils:()=>I,Matrix4:()=>oi,Mesh:()=>xi,MeshAttachment:()=>li,MixBlend:()=>Ct,MixDirection:()=>dt,OrthoCamera:()=>Fr,PathAttachment:()=>ai,PathConstraint:()=>Jr,PathConstraintData:()=>gi,PathConstraintMixTimeline:()=>ts,PathConstraintPositionTimeline:()=>os,PathConstraintSpacingTimeline:()=>cs,Physics:()=>Zs,PhysicsConstraintDampingTimeline:()=>Ss,PhysicsConstraintGravityTimeline:()=>ks,PhysicsConstraintInertiaTimeline:()=>is,PhysicsConstraintMassTimeline:()=>Es,PhysicsConstraintMixTimeline:()=>Ws,PhysicsConstraintResetTimeline:()=>Ci,PhysicsConstraintStrengthTimeline:()=>Us,PhysicsConstraintTimeline:()=>ws,PhysicsConstraintWindTimeline:()=>ys,PointAttachment:()=>_i,PolygonBatcher:()=>Xr,Pool:()=>Q,Position2Attribute:()=>ar,Position3Attribute:()=>nn,PositionMode:()=>Fi,Pow:()=>k,PowOut:()=>E,RGB2Timeline:()=>Te,RGBA2Timeline:()=>$e,RGBATimeline:()=>se,RGBTimeline:()=>Kt,RegionAttachment:()=>mi,ResizeMode:()=>l,RotateMode:()=>Pi,RotateTimeline:()=>wt,SETUP:()=>vr,SUBSEQUENT:()=>Cs,ScaleTimeline:()=>Lt,ScaleXTimeline:()=>Bt,ScaleYTimeline:()=>zt,SceneRenderer:()=>t,SequenceTimeline:()=>Zi,Shader:()=>rs,ShapeRenderer:()=>Di,ShapeType:()=>Br,ShearTimeline:()=>Yt,ShearXTimeline:()=>Tt,ShearYTimeline:()=>bt,Skeleton:()=>qs,SkeletonBinary:()=>Mn,SkeletonBounds:()=>ae,SkeletonClipping:()=>fe,SkeletonData:()=>Ze,SkeletonDebugRenderer:()=>Vr,SkeletonJson:()=>me,SkeletonRenderer:()=>an,Skin:()=>er,SkinEntry:()=>Cr,Slot:()=>Qr,SlotData:()=>Tr,SpacingMode:()=>Ms,SpineCanvas:()=>tt,StringSet:()=>S,TexCoordAttribute:()=>Xi,Texture:()=>Ii,TextureAtlas:()=>bs,TextureAtlasPage:()=>Ri,TextureAtlasRegion:()=>Ji,TextureFilter:()=>Ei,TextureRegion:()=>Hr,TextureWrap:()=>qe,TimeKeeper:()=>ut,Timeline:()=>kt,Touch:()=>nr,TrackEntry:()=>jr,TransformConstraint:()=>Kr,TransformConstraintData:()=>Er,TransformConstraintTimeline:()=>xs,TranslateTimeline:()=>yt,TranslateXTimeline:()=>Xt,TranslateYTimeline:()=>Dt,Triangulator:()=>ue,Utils:()=>X,Vector2:()=>st,Vector3:()=>$t,VertexAttachment:()=>it,VertexAttribute:()=>ti,VertexAttributeType:()=>Vi,WindowedMean:()=>nt});var M=class{array=new Array;add(s){let e=this.contains(s);return this.array[s|0]=s|0,!e}contains(s){return this.array[s|0]!=null}remove(s){this.array[s|0]=void 0;}clear(){this.array.length=0;}},S=class{entries={};size=0;add(s){let e=this.entries[s];return this.entries[s]=true,e?false:(this.size++,true)}addAll(s){let e=this.size;for(var i=0,o=s.length;i<o;i++)this.add(s[i]);return e!=this.size}contains(s){return this.entries[s]}clear(){this.entries={},this.size=0;}},V=class Gi{constructor(e=0,i=0,o=0,a=0){this.r=e,this.g=i,this.b=o,this.a=a;}static WHITE=new Gi(1,1,1,1);static RED=new Gi(1,0,0,1);static GREEN=new Gi(0,1,0,1);static BLUE=new Gi(0,0,1,1);static MAGENTA=new Gi(1,0,1,1);set(e,i,o,a){return this.r=e,this.g=i,this.b=o,this.a=a,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this}add(e,i,o,a){return this.r+=e,this.g+=i,this.b+=o,this.a+=a,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,i){e.r=((i&4278190080)>>>24)/255,e.g=((i&16711680)>>>16)/255,e.b=((i&65280)>>>8)/255,e.a=(i&255)/255;}static rgb888ToColor(e,i){e.r=((i&16711680)>>>16)/255,e.g=((i&65280)>>>8)/255,e.b=(i&255)/255;}toRgb888(){let e=i=>("0"+(i*255).toString(16)).slice(-2);return +("0x"+e(this.r)+e(this.g)+e(this.b))}static fromString(e,i=new Gi){return i.setFromString(e)}},I=class ii{static PI=3.1415927;static PI2=ii.PI*2;static invPI2=1/ii.PI2;static radiansToDegrees=180/ii.PI;static radDeg=ii.radiansToDegrees;static degreesToRadians=ii.PI/180;static degRad=ii.degreesToRadians;static clamp(e,i,o){return e<i?i:e>o?o:e}static cosDeg(e){return Math.cos(e*ii.degRad)}static sinDeg(e){return Math.sin(e*ii.degRad)}static atan2Deg(e,i){return Math.atan2(e,i)*ii.degRad}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let i=Math.pow(Math.abs(e),.3333333333333333);return e<0?-i:i}static randomTriangular(e,i){return ii.randomTriangularWith(e,i,(e+i)*.5)}static randomTriangularWith(e,i,o){let a=Math.random(),p=i-e;return a<=(o-e)/p?e+Math.sqrt(a*p*(o-e)):i-Math.sqrt((1-a)*p*(i-o))}static isPowerOfTwo(e){return e&&(e&e-1)===0}},D=class{apply(s,e,i){return s+(e-s)*this.applyInternal(i)}},k=class extends D{power=2;constructor(s){super(),this.power=s;}applyInternal(s){return s<=.5?Math.pow(s*2,this.power)/2:Math.pow((s-1)*2,this.power)/(this.power%2==0?-2:2)+1}},E=class extends k{constructor(s){super(s);}applyInternal(s){return Math.pow(s-1,this.power)*(this.power%2==0?-1:1)+1}},X=class mr{static SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";static arrayCopy(e,i,o,a,p){for(let m=i,g=a;m<i+p;m++,g++)o[g]=e[m];}static arrayFill(e,i,o,a){for(let p=i;p<o;p++)e[p]=a;}static setArraySize(e,i,o=0){let a=e.length;if(a==i)return e;if(e.length=i,a<i)for(let p=a;p<i;p++)e[p]=o;return e}static ensureArrayCapacity(e,i,o=0){return e.length>=i?e:mr.setArraySize(e,i,o)}static newArray(e,i){let o=new Array(e);for(let a=0;a<e;a++)o[a]=i;return o}static newFloatArray(e){if(mr.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);{let i=new Array(e);for(let o=0;o<i.length;o++)i[o]=0;return i}}static newShortArray(e){if(mr.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);{let i=new Array(e);for(let o=0;o<i.length;o++)i[o]=0;return i}}static toFloatArray(e){return mr.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}static toSinglePrecision(e){return mr.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}static webkit602BugfixHelper(e,i){}static contains(e,i,o=true){for(var a=0;a<e.length;a++)if(e[a]==i)return  true;return  false}static enumValue(e,i){return e[i[0].toUpperCase()+i.slice(1)]}},z=class{static logBones(s){for(let e=0;e<s.bones.length;e++){let i=s.bones[e];console.log(i.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.worldX+", "+i.worldY);}}},Q=class{items=new Array;instantiator;constructor(s){this.instantiator=s;}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(s){s.reset&&s.reset(),this.items.push(s);}freeAll(s){for(let e=0;e<s.length;e++)this.free(s[e]);}clear(){this.items.length=0;}},st=class{constructor(s=0,e=0){this.x=s,this.y=e;}set(s,e){return this.x=s,this.y=e,this}length(){let s=this.x,e=this.y;return Math.sqrt(s*s+e*e)}normalize(){let s=this.length();return s!=0&&(this.x/=s,this.y/=s),this}},ut=class{maxDelta=.064;framesPerSecond=0;delta=0;totalTime=0;lastTime=Date.now()/1e3;frameCount=0;frameTime=0;update(){let s=Date.now()/1e3;this.delta=s-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=s,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0);}},nt=class{values;addedValues=0;lastValue=0;mean=0;dirty=true;constructor(s=32){this.values=new Array(s);}hasEnoughData(){return this.addedValues>=this.values.length}addValue(s){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=s,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=true;}getMean(){if(this.hasEnoughData()){if(this.dirty){let s=0;for(let e=0;e<this.values.length;e++)s+=this.values[e];this.mean=s/this.values.length,this.dirty=false;}return this.mean}return 0}},ot=class{name;constructor(s){if(!s)throw new Error("name cannot be null.");this.name=s;}},it=class va extends ot{static nextID=0;id=va.nextID++;bones=null;vertices=[];worldVerticesLength=0;timelineAttachment=this;constructor(e){super(e);}computeWorldVertices(e,i,o,a,p,m){o=p+(o>>1)*m;let g=e.bone.skeleton,w=e.deform,b=this.vertices,C=this.bones;if(!C){w.length>0&&(b=w);let O=e.bone,Z=O.worldX,q=O.worldY,j=O.a,_=O.b,H=O.c,K=O.d;for(let rt=i,lt=p;lt<o;rt+=2,lt+=m){let vt=b[rt],pt=b[rt+1];a[lt]=vt*j+pt*_+Z,a[lt+1]=vt*H+pt*K+q;}return}let F=0,L=0;for(let O=0;O<i;O+=2){let Z=C[F];F+=Z+1,L+=Z;}let N=g.bones;if(w.length==0)for(let O=p,Z=L*3;O<o;O+=m){let q=0,j=0,_=C[F++];for(_+=F;F<_;F++,Z+=3){let H=N[C[F]],K=b[Z],rt=b[Z+1],lt=b[Z+2];q+=(K*H.a+rt*H.b+H.worldX)*lt,j+=(K*H.c+rt*H.d+H.worldY)*lt;}a[O]=q,a[O+1]=j;}else {let O=w;for(let Z=p,q=L*3,j=L<<1;Z<o;Z+=m){let _=0,H=0,K=C[F++];for(K+=F;F<K;F++,q+=3,j+=2){let rt=N[C[F]],lt=b[q]+O[j],vt=b[q+1]+O[j+1],pt=b[q+2];_+=(lt*rt.a+vt*rt.b+rt.worldX)*pt,H+=(lt*rt.c+vt*rt.d+rt.worldY)*pt;}a[Z]=_,a[Z+1]=H;}}}copyTo(e){this.bones?(e.bones=new Array(this.bones.length),X.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices&&(e.vertices=X.newFloatArray(this.vertices.length),X.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)),e.worldVerticesLength=this.worldVerticesLength,e.timelineAttachment=this.timelineAttachment;}},W=class xn{static _nextID=0;id=xn.nextID();regions;start=0;digits=0;setupIndex=0;constructor(e){this.regions=new Array(e);}copy(){let e=new xn(this.regions.length);return X.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}apply(e,i){let o=e.sequenceIndex;o==-1&&(o=this.setupIndex),o>=this.regions.length&&(o=this.regions.length-1);let a=this.regions[o];i.region!=a&&(i.region=a,i.updateRegion());}getPath(e,i){let o=e,a=(this.start+i).toString();for(let p=this.digits-a.length;p>0;p--)o+="0";return o+=a,o}static nextID(){return xn._nextID++}},et=(s=>(s[s.hold=0]="hold",s[s.once=1]="once",s[s.loop=2]="loop",s[s.pingpong=3]="pingpong",s[s.onceReverse=4]="onceReverse",s[s.loopReverse=5]="loopReverse",s[s.pingpongReverse=6]="pingpongReverse",s))(et||{}),ft=[0,1,2,3,4,5,6],at=class{name;timelines=[];timelineIds=new S;duration;constructor(s,e,i){if(!s)throw new Error("name cannot be null.");this.name=s,this.setTimelines(e),this.duration=i;}setTimelines(s){if(!s)throw new Error("timelines cannot be null.");this.timelines=s,this.timelineIds.clear();for(var e=0;e<s.length;e++)this.timelineIds.addAll(s[e].getPropertyIds());}hasTimeline(s){for(let e=0;e<s.length;e++)if(this.timelineIds.contains(s[e]))return  true;return  false}apply(s,e,i,o,a,p,m,g){if(!s)throw new Error("skeleton cannot be null.");o&&this.duration!=0&&(i%=this.duration,e>0&&(e%=this.duration));let w=this.timelines;for(let b=0,C=w.length;b<C;b++)w[b].apply(s,e,i,a,p,m,g);}},Ct=(s=>(s[s.setup=0]="setup",s[s.first=1]="first",s[s.replace=2]="replace",s[s.add=3]="add",s))(Ct||{}),dt=(s=>(s[s.mixIn=0]="mixIn",s[s.mixOut=1]="mixOut",s))(dt||{}),mt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28},kt=class{propertyIds;frames;constructor(s,e){this.propertyIds=e,this.frames=X.newFloatArray(s*this.getFrameEntries());}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(s,e){let i=s.length;for(let o=1;o<i;o++)if(s[o]>e)return o-1;return i-1}static search(s,e,i){let o=s.length;for(let a=i;a<o;a+=i)if(s[a]>e)return a-i;return o-i}},ht=class extends kt{curves;constructor(s,e,i){super(s,i),this.curves=X.newFloatArray(s+e*18),this.curves[s-1]=1;}setLinear(s){this.curves[s]=0;}setStepped(s){this.curves[s]=1;}shrink(s){let e=this.getFrameCount()+s*18;if(this.curves.length>e){let i=X.newFloatArray(e);X.arrayCopy(this.curves,0,i,0,e),this.curves=i;}}setBezier(s,e,i,o,a,p,m,g,w,b,C){let F=this.curves,L=this.getFrameCount()+s*18;i==0&&(F[e]=2+L);let N=(o-p*2+g)*.03,O=(a-m*2+w)*.03,Z=((p-g)*3-o+b)*.006,q=((m-w)*3-a+C)*.006,j=N*2+Z,_=O*2+q,H=(p-o)*.3+N+Z*.16666667,K=(m-a)*.3+O+q*.16666667,rt=o+H,lt=a+K;for(let vt=L+18;L<vt;L+=2)F[L]=rt,F[L+1]=lt,H+=j,K+=_,j+=Z,_+=q,rt+=H,lt+=K;}getBezierValue(s,e,i,o){let a=this.curves;if(a[o]>s){let w=this.frames[e],b=this.frames[e+i];return b+(s-w)/(a[o]-w)*(a[o+1]-b)}let p=o+18;for(o+=2;o<p;o+=2)if(a[o]>=s){let w=a[o-2],b=a[o-1];return b+(s-w)/(a[o]-w)*(a[o+1]-b)}e+=this.getFrameEntries();let m=a[p-2],g=a[p-1];return g+(s-m)/(this.frames[e]-m)*(this.frames[e+i]-g)}},$=class extends ht{constructor(s,e,i){super(s,e,[i]);}getFrameEntries(){return 2}setFrame(s,e,i){s<<=1,this.frames[s]=e,this.frames[s+1]=i;}getCurveValue(s){let e=this.frames,i=e.length-2;for(let a=2;a<=i;a+=2)if(e[a]>s){i=a-2;break}let o=this.curves[i>>1];switch(o){case 0:let a=e[i],p=e[i+1];return p+(s-a)/(e[i+2]-a)*(e[i+2+1]-p);case 1:return e[i+1]}return this.getBezierValue(s,i,1,o-2)}getRelativeValue(s,e,i,o,a){if(s<this.frames[0]){switch(i){case 0:return a;case 1:return o+(a-o)*e}return o}let p=this.getCurveValue(s);switch(i){case 0:return a+p*e;case 1:case 2:p+=a-o;}return o+p*e}getAbsoluteValue(s,e,i,o,a){if(s<this.frames[0]){switch(i){case 0:return a;case 1:return o+(a-o)*e}return o}let p=this.getCurveValue(s);return i==0?a+(p-a)*e:o+(p-o)*e}getAbsoluteValue2(s,e,i,o,a,p){if(s<this.frames[0]){switch(i){case 0:return a;case 1:return o+(a-o)*e}return o}return i==0?a+(p-a)*e:o+(p-o)*e}getScaleValue(s,e,i,o,a,p){let m=this.frames;if(s<m[0]){switch(i){case 0:return p;case 1:return a+(p-a)*e}return a}let g=this.getCurveValue(s)*p;if(e==1)return i==3?a+g-p:g;if(o==1)switch(i){case 0:return p+(Math.abs(g)*I.signum(p)-p)*e;case 1:case 2:return a+(Math.abs(g)*I.signum(a)-a)*e}else {let w=0;switch(i){case 0:return w=Math.abs(p)*I.signum(g),w+(g-w)*e;case 1:case 2:return w=Math.abs(a)*I.signum(g),w+(g-w)*e}}return a+(g-p)*e}},ct=class extends ht{constructor(s,e,i,o){super(s,e,[i,o]);}getFrameEntries(){return 3}setFrame(s,e,i,o){s*=3,this.frames[s]=e,this.frames[s+1]=i,this.frames[s+2]=o;}},wt=class extends ${boneIndex=0;constructor(s,e,i){super(s,e,mt.rotate+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];g.active&&(g.rotation=this.getRelativeValue(i,a,p,g.rotation,g.data.rotation));}},yt=class extends ct{boneIndex=0;constructor(s,e,i){super(s,e,mt.x+"|"+i,mt.y+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];if(!g.active)return;let w=this.frames;if(i<w[0]){switch(p){case 0:g.x=g.data.x,g.y=g.data.y;return;case 1:g.x+=(g.data.x-g.x)*a,g.y+=(g.data.y-g.y)*a;}return}let b=0,C=0,F=kt.search(w,i,3),L=this.curves[F/3];switch(L){case 0:let N=w[F];b=w[F+1],C=w[F+2];let O=(i-N)/(w[F+3]-N);b+=(w[F+3+1]-b)*O,C+=(w[F+3+2]-C)*O;break;case 1:b=w[F+1],C=w[F+2];break;default:b=this.getBezierValue(i,F,1,L-2),C=this.getBezierValue(i,F,2,L+18-2);}switch(p){case 0:g.x=g.data.x+b*a,g.y=g.data.y+C*a;break;case 1:case 2:g.x+=(g.data.x+b-g.x)*a,g.y+=(g.data.y+C-g.y)*a;break;case 3:g.x+=b*a,g.y+=C*a;}}},Xt=class extends ${boneIndex=0;constructor(s,e,i){super(s,e,mt.x+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];g.active&&(g.x=this.getRelativeValue(i,a,p,g.x,g.data.x));}},Dt=class extends ${boneIndex=0;constructor(s,e,i){super(s,e,mt.y+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];g.active&&(g.y=this.getRelativeValue(i,a,p,g.y,g.data.y));}},Lt=class extends ct{boneIndex=0;constructor(s,e,i){super(s,e,mt.scaleX+"|"+i,mt.scaleY+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];if(!g.active)return;let w=this.frames;if(i<w[0]){switch(p){case 0:g.scaleX=g.data.scaleX,g.scaleY=g.data.scaleY;return;case 1:g.scaleX+=(g.data.scaleX-g.scaleX)*a,g.scaleY+=(g.data.scaleY-g.scaleY)*a;}return}let b,C,F=kt.search(w,i,3),L=this.curves[F/3];switch(L){case 0:let N=w[F];b=w[F+1],C=w[F+2];let O=(i-N)/(w[F+3]-N);b+=(w[F+3+1]-b)*O,C+=(w[F+3+2]-C)*O;break;case 1:b=w[F+1],C=w[F+2];break;default:b=this.getBezierValue(i,F,1,L-2),C=this.getBezierValue(i,F,2,L+18-2);}if(b*=g.data.scaleX,C*=g.data.scaleY,a==1)p==3?(g.scaleX+=b-g.data.scaleX,g.scaleY+=C-g.data.scaleY):(g.scaleX=b,g.scaleY=C);else {let N=0,O=0;if(m==1)switch(p){case 0:N=g.data.scaleX,O=g.data.scaleY,g.scaleX=N+(Math.abs(b)*I.signum(N)-N)*a,g.scaleY=O+(Math.abs(C)*I.signum(O)-O)*a;break;case 1:case 2:N=g.scaleX,O=g.scaleY,g.scaleX=N+(Math.abs(b)*I.signum(N)-N)*a,g.scaleY=O+(Math.abs(C)*I.signum(O)-O)*a;break;case 3:g.scaleX+=(b-g.data.scaleX)*a,g.scaleY+=(C-g.data.scaleY)*a;}else switch(p){case 0:N=Math.abs(g.data.scaleX)*I.signum(b),O=Math.abs(g.data.scaleY)*I.signum(C),g.scaleX=N+(b-N)*a,g.scaleY=O+(C-O)*a;break;case 1:case 2:N=Math.abs(g.scaleX)*I.signum(b),O=Math.abs(g.scaleY)*I.signum(C),g.scaleX=N+(b-N)*a,g.scaleY=O+(C-O)*a;break;case 3:g.scaleX+=(b-g.data.scaleX)*a,g.scaleY+=(C-g.data.scaleY)*a;}}}},Bt=class extends ${boneIndex=0;constructor(s,e,i){super(s,e,mt.scaleX+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];g.active&&(g.scaleX=this.getScaleValue(i,a,p,m,g.scaleX,g.data.scaleX));}},zt=class extends ${boneIndex=0;constructor(s,e,i){super(s,e,mt.scaleY+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];g.active&&(g.scaleY=this.getScaleValue(i,a,p,m,g.scaleY,g.data.scaleY));}},Yt=class extends ct{boneIndex=0;constructor(s,e,i){super(s,e,mt.shearX+"|"+i,mt.shearY+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];if(!g.active)return;let w=this.frames;if(i<w[0]){switch(p){case 0:g.shearX=g.data.shearX,g.shearY=g.data.shearY;return;case 1:g.shearX+=(g.data.shearX-g.shearX)*a,g.shearY+=(g.data.shearY-g.shearY)*a;}return}let b=0,C=0,F=kt.search(w,i,3),L=this.curves[F/3];switch(L){case 0:let N=w[F];b=w[F+1],C=w[F+2];let O=(i-N)/(w[F+3]-N);b+=(w[F+3+1]-b)*O,C+=(w[F+3+2]-C)*O;break;case 1:b=w[F+1],C=w[F+2];break;default:b=this.getBezierValue(i,F,1,L-2),C=this.getBezierValue(i,F,2,L+18-2);}switch(p){case 0:g.shearX=g.data.shearX+b*a,g.shearY=g.data.shearY+C*a;break;case 1:case 2:g.shearX+=(g.data.shearX+b-g.shearX)*a,g.shearY+=(g.data.shearY+C-g.shearY)*a;break;case 3:g.shearX+=b*a,g.shearY+=C*a;}}},Tt=class extends ${boneIndex=0;constructor(s,e,i){super(s,e,mt.shearX+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];g.active&&(g.shearX=this.getRelativeValue(i,a,p,g.shearX,g.data.shearX));}},bt=class extends ${boneIndex=0;constructor(s,e,i){super(s,e,mt.shearY+"|"+i),this.boneIndex=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];g.active&&(g.shearY=this.getRelativeValue(i,a,p,g.shearY,g.data.shearY));}},_t=class extends kt{boneIndex=0;constructor(s,e){super(s,[mt.inherit+"|"+e]),this.boneIndex=e;}getFrameEntries(){return 2}setFrame(s,e,i){s*=2,this.frames[s]=e,this.frames[s+1]=i;}apply(s,e,i,o,a,p,m){let g=s.bones[this.boneIndex];if(!g.active)return;if(m==1){p==0&&(g.inherit=g.data.inherit);return}let w=this.frames;if(i<w[0]){(p==0||p==1)&&(g.inherit=g.data.inherit);return}g.inherit=this.frames[kt.search(w,i,2)+1];}},se=class extends ht{slotIndex=0;constructor(s,e,i){super(s,e,[mt.rgb+"|"+i,mt.alpha+"|"+i]),this.slotIndex=i;}getFrameEntries(){return 5}setFrame(s,e,i,o,a,p){s*=5,this.frames[s]=e,this.frames[s+1]=i,this.frames[s+2]=o,this.frames[s+3]=a,this.frames[s+4]=p;}apply(s,e,i,o,a,p,m){let g=s.slots[this.slotIndex];if(!g.bone.active)return;let w=this.frames,b=g.color;if(i<w[0]){let q=g.data.color;switch(p){case 0:b.setFromColor(q);return;case 1:b.add((q.r-b.r)*a,(q.g-b.g)*a,(q.b-b.b)*a,(q.a-b.a)*a);}return}let C=0,F=0,L=0,N=0,O=kt.search(w,i,5),Z=this.curves[O/5];switch(Z){case 0:let q=w[O];C=w[O+1],F=w[O+2],L=w[O+3],N=w[O+4];let j=(i-q)/(w[O+5]-q);C+=(w[O+5+1]-C)*j,F+=(w[O+5+2]-F)*j,L+=(w[O+5+3]-L)*j,N+=(w[O+5+4]-N)*j;break;case 1:C=w[O+1],F=w[O+2],L=w[O+3],N=w[O+4];break;default:C=this.getBezierValue(i,O,1,Z-2),F=this.getBezierValue(i,O,2,Z+18-2),L=this.getBezierValue(i,O,3,Z+36-2),N=this.getBezierValue(i,O,4,Z+54-2);}a==1?b.set(C,F,L,N):(p==0&&b.setFromColor(g.data.color),b.add((C-b.r)*a,(F-b.g)*a,(L-b.b)*a,(N-b.a)*a));}},Kt=class extends ht{slotIndex=0;constructor(s,e,i){super(s,e,[mt.rgb+"|"+i]),this.slotIndex=i;}getFrameEntries(){return 4}setFrame(s,e,i,o,a){s<<=2,this.frames[s]=e,this.frames[s+1]=i,this.frames[s+2]=o,this.frames[s+3]=a;}apply(s,e,i,o,a,p,m){let g=s.slots[this.slotIndex];if(!g.bone.active)return;let w=this.frames,b=g.color;if(i<w[0]){let Z=g.data.color;switch(p){case 0:b.r=Z.r,b.g=Z.g,b.b=Z.b;return;case 1:b.r+=(Z.r-b.r)*a,b.g+=(Z.g-b.g)*a,b.b+=(Z.b-b.b)*a;}return}let C=0,F=0,L=0,N=kt.search(w,i,4),O=this.curves[N>>2];switch(O){case 0:let Z=w[N];C=w[N+1],F=w[N+2],L=w[N+3];let q=(i-Z)/(w[N+4]-Z);C+=(w[N+4+1]-C)*q,F+=(w[N+4+2]-F)*q,L+=(w[N+4+3]-L)*q;break;case 1:C=w[N+1],F=w[N+2],L=w[N+3];break;default:C=this.getBezierValue(i,N,1,O-2),F=this.getBezierValue(i,N,2,O+18-2),L=this.getBezierValue(i,N,3,O+36-2);}if(a==1)b.r=C,b.g=F,b.b=L;else {if(p==0){let Z=g.data.color;b.r=Z.r,b.g=Z.g,b.b=Z.b;}b.r+=(C-b.r)*a,b.g+=(F-b.g)*a,b.b+=(L-b.b)*a;}}},De=class extends ${slotIndex=0;constructor(s,e,i){super(s,e,mt.alpha+"|"+i),this.slotIndex=i;}apply(s,e,i,o,a,p,m){let g=s.slots[this.slotIndex];if(!g.bone.active)return;let w=g.color;if(i<this.frames[0]){let C=g.data.color;switch(p){case 0:w.a=C.a;return;case 1:w.a+=(C.a-w.a)*a;}return}let b=this.getCurveValue(i);a==1?w.a=b:(p==0&&(w.a=g.data.color.a),w.a+=(b-w.a)*a);}},$e=class extends ht{slotIndex=0;constructor(s,e,i){super(s,e,[mt.rgb+"|"+i,mt.alpha+"|"+i,mt.rgb2+"|"+i]),this.slotIndex=i;}getFrameEntries(){return 8}setFrame(s,e,i,o,a,p,m,g,w){s<<=3,this.frames[s]=e,this.frames[s+1]=i,this.frames[s+2]=o,this.frames[s+3]=a,this.frames[s+4]=p,this.frames[s+5]=m,this.frames[s+6]=g,this.frames[s+7]=w;}apply(s,e,i,o,a,p,m){let g=s.slots[this.slotIndex];if(!g.bone.active)return;let w=this.frames,b=g.color,C=g.darkColor;if(i<w[0]){let K=g.data.color,rt=g.data.darkColor;switch(p){case 0:b.setFromColor(K),C.r=rt.r,C.g=rt.g,C.b=rt.b;return;case 1:b.add((K.r-b.r)*a,(K.g-b.g)*a,(K.b-b.b)*a,(K.a-b.a)*a),C.r+=(rt.r-C.r)*a,C.g+=(rt.g-C.g)*a,C.b+=(rt.b-C.b)*a;}return}let F=0,L=0,N=0,O=0,Z=0,q=0,j=0,_=kt.search(w,i,8),H=this.curves[_>>3];switch(H){case 0:let K=w[_];F=w[_+1],L=w[_+2],N=w[_+3],O=w[_+4],Z=w[_+5],q=w[_+6],j=w[_+7];let rt=(i-K)/(w[_+8]-K);F+=(w[_+8+1]-F)*rt,L+=(w[_+8+2]-L)*rt,N+=(w[_+8+3]-N)*rt,O+=(w[_+8+4]-O)*rt,Z+=(w[_+8+5]-Z)*rt,q+=(w[_+8+6]-q)*rt,j+=(w[_+8+7]-j)*rt;break;case 1:F=w[_+1],L=w[_+2],N=w[_+3],O=w[_+4],Z=w[_+5],q=w[_+6],j=w[_+7];break;default:F=this.getBezierValue(i,_,1,H-2),L=this.getBezierValue(i,_,2,H+18-2),N=this.getBezierValue(i,_,3,H+36-2),O=this.getBezierValue(i,_,4,H+54-2),Z=this.getBezierValue(i,_,5,H+72-2),q=this.getBezierValue(i,_,6,H+90-2),j=this.getBezierValue(i,_,7,H+108-2);}if(a==1)b.set(F,L,N,O),C.r=Z,C.g=q,C.b=j;else {if(p==0){b.setFromColor(g.data.color);let K=g.data.darkColor;C.r=K.r,C.g=K.g,C.b=K.b;}b.add((F-b.r)*a,(L-b.g)*a,(N-b.b)*a,(O-b.a)*a),C.r+=(Z-C.r)*a,C.g+=(q-C.g)*a,C.b+=(j-C.b)*a;}}},Te=class extends ht{slotIndex=0;constructor(s,e,i){super(s,e,[mt.rgb+"|"+i,mt.rgb2+"|"+i]),this.slotIndex=i;}getFrameEntries(){return 7}setFrame(s,e,i,o,a,p,m,g){s*=7,this.frames[s]=e,this.frames[s+1]=i,this.frames[s+2]=o,this.frames[s+3]=a,this.frames[s+4]=p,this.frames[s+5]=m,this.frames[s+6]=g;}apply(s,e,i,o,a,p,m){let g=s.slots[this.slotIndex];if(!g.bone.active)return;let w=this.frames,b=g.color,C=g.darkColor;if(i<w[0]){let K=g.data.color,rt=g.data.darkColor;switch(p){case 0:b.r=K.r,b.g=K.g,b.b=K.b,C.r=rt.r,C.g=rt.g,C.b=rt.b;return;case 1:b.r+=(K.r-b.r)*a,b.g+=(K.g-b.g)*a,b.b+=(K.b-b.b)*a,C.r+=(rt.r-C.r)*a,C.g+=(rt.g-C.g)*a,C.b+=(rt.b-C.b)*a;}return}let F=0,L=0,N=0,Z=0,q=0,j=0,_=kt.search(w,i,7),H=this.curves[_/7];switch(H){case 0:let K=w[_];F=w[_+1],L=w[_+2],N=w[_+3],Z=w[_+4],q=w[_+5],j=w[_+6];let rt=(i-K)/(w[_+7]-K);F+=(w[_+7+1]-F)*rt,L+=(w[_+7+2]-L)*rt,N+=(w[_+7+3]-N)*rt,Z+=(w[_+7+4]-Z)*rt,q+=(w[_+7+5]-q)*rt,j+=(w[_+7+6]-j)*rt;break;case 1:F=w[_+1],L=w[_+2],N=w[_+3],Z=w[_+4],q=w[_+5],j=w[_+6];break;default:F=this.getBezierValue(i,_,1,H-2),L=this.getBezierValue(i,_,2,H+18-2),N=this.getBezierValue(i,_,3,H+36-2),Z=this.getBezierValue(i,_,4,H+54-2),q=this.getBezierValue(i,_,5,H+72-2),j=this.getBezierValue(i,_,6,H+90-2);}if(a==1)b.r=F,b.g=L,b.b=N,C.r=Z,C.g=q,C.b=j;else {if(p==0){let K=g.data.color,rt=g.data.darkColor;b.r=K.r,b.g=K.g,b.b=K.b,C.r=rt.r,C.g=rt.g,C.b=rt.b;}b.r+=(F-b.r)*a,b.g+=(L-b.g)*a,b.b+=(N-b.b)*a,C.r+=(Z-C.r)*a,C.g+=(q-C.g)*a,C.b+=(j-C.b)*a;}}},Qe=class extends kt{slotIndex=0;attachmentNames;constructor(s,e){super(s,[mt.attachment+"|"+e]),this.slotIndex=e,this.attachmentNames=new Array(s);}getFrameCount(){return this.frames.length}setFrame(s,e,i){this.frames[s]=e,this.attachmentNames[s]=i;}apply(s,e,i,o,a,p,m){let g=s.slots[this.slotIndex];if(g.bone.active){if(m==1){p==0&&this.setAttachment(s,g,g.data.attachmentName);return}if(i<this.frames[0]){(p==0||p==1)&&this.setAttachment(s,g,g.data.attachmentName);return}this.setAttachment(s,g,this.attachmentNames[kt.search1(this.frames,i)]);}}setAttachment(s,e,i){e.setAttachment(i?s.getAttachment(this.slotIndex,i):null);}},ss=class extends ht{slotIndex=0;attachment;vertices;constructor(s,e,i,o){super(s,e,[mt.deform+"|"+i+"|"+o.id]),this.slotIndex=i,this.attachment=o,this.vertices=new Array(s);}getFrameCount(){return this.frames.length}setFrame(s,e,i){this.frames[s]=e,this.vertices[s]=i;}setBezier(s,e,i,o,a,p,m,g,w,b,C){let F=this.curves,L=this.getFrameCount()+s*18;i==0&&(F[e]=2+L);let N=(o-p*2+g)*.03,O=w*.03-m*.06,Z=((p-g)*3-o+b)*.006,q=(m-w+.33333333)*.018,j=N*2+Z,_=O*2+q,H=(p-o)*.3+N+Z*.16666667,K=m*.3+O+q*.16666667,rt=o+H,lt=K;for(let vt=L+18;L<vt;L+=2)F[L]=rt,F[L+1]=lt,H+=j,K+=_,j+=Z,_+=q,rt+=H,lt+=K;}getCurvePercent(s,e){let i=this.curves,o=i[e];switch(o){case 0:let g=this.frames[e];return (s-g)/(this.frames[e+this.getFrameEntries()]-g);case 1:return 0}if(o-=2,i[o]>s){let g=this.frames[e];return i[o+1]*(s-g)/(i[o]-g)}let a=o+18;for(o+=2;o<a;o+=2)if(i[o]>=s){let g=i[o-2],w=i[o-1];return w+(s-g)/(i[o]-g)*(i[o+1]-w)}let p=i[a-2],m=i[a-1];return m+(1-m)*(s-p)/(this.frames[e+this.getFrameEntries()]-p)}apply(s,e,i,o,a,p,m){let g=s.slots[this.slotIndex];if(!g.bone.active)return;let w=g.getAttachment();if(!w||!(w instanceof it)||w.timelineAttachment!=this.attachment)return;let b=g.deform;b.length==0&&(p=0);let C=this.vertices,F=C[0].length,L=this.frames;if(i<L[0]){switch(p){case 0:b.length=0;return;case 1:if(a==1){b.length=0;return}b.length=F;let _=w;if(_.bones){a=1-a;for(var N=0;N<F;N++)b[N]*=a;}else {let H=_.vertices;for(var N=0;N<F;N++)b[N]+=(H[N]-b[N])*a;}}return}if(b.length=F,i>=L[L.length-1]){let _=C[L.length-1];if(a==1)if(p==3){let H=w;if(H.bones)for(let K=0;K<F;K++)b[K]+=_[K];else {let K=H.vertices;for(let rt=0;rt<F;rt++)b[rt]+=_[rt]-K[rt];}}else X.arrayCopy(_,0,b,0,F);else switch(p){case 0:{let K=w;if(K.bones)for(let rt=0;rt<F;rt++)b[rt]=_[rt]*a;else {let rt=K.vertices;for(let lt=0;lt<F;lt++){let vt=rt[lt];b[lt]=vt+(_[lt]-vt)*a;}}break}case 1:case 2:for(let K=0;K<F;K++)b[K]+=(_[K]-b[K])*a;break;case 3:let H=w;if(H.bones)for(let K=0;K<F;K++)b[K]+=_[K]*a;else {let K=H.vertices;for(let rt=0;rt<F;rt++)b[rt]+=(_[rt]-K[rt])*a;}}return}let O=kt.search1(L,i),Z=this.getCurvePercent(i,O),q=C[O],j=C[O+1];if(a==1)if(p==3){let _=w;if(_.bones)for(let H=0;H<F;H++){let K=q[H];b[H]+=K+(j[H]-K)*Z;}else {let H=_.vertices;for(let K=0;K<F;K++){let rt=q[K];b[K]+=rt+(j[K]-rt)*Z-H[K];}}}else for(let _=0;_<F;_++){let H=q[_];b[_]=H+(j[_]-H)*Z;}else switch(p){case 0:{let H=w;if(H.bones)for(let K=0;K<F;K++){let rt=q[K];b[K]=(rt+(j[K]-rt)*Z)*a;}else {let K=H.vertices;for(let rt=0;rt<F;rt++){let lt=q[rt],vt=K[rt];b[rt]=vt+(lt+(j[rt]-lt)*Z-vt)*a;}}break}case 1:case 2:for(let H=0;H<F;H++){let K=q[H];b[H]+=(K+(j[H]-K)*Z-b[H])*a;}break;case 3:let _=w;if(_.bones)for(let H=0;H<F;H++){let K=q[H];b[H]+=(K+(j[H]-K)*Z)*a;}else {let H=_.vertices;for(let K=0;K<F;K++){let rt=q[K];b[K]+=(rt+(j[K]-rt)*Z-H[K])*a;}}}}},us=class wa extends kt{static propertyIds=[""+mt.event];events;constructor(e){super(e,wa.propertyIds),this.events=new Array(e);}getFrameCount(){return this.frames.length}setFrame(e,i){this.frames[e]=i.time,this.events[e]=i;}apply(e,i,o,a,p,m,g){if(!a)return;let w=this.frames,b=this.frames.length;if(i>o)this.apply(e,i,Number.MAX_VALUE,a,p,m,g),i=-1;else if(i>=w[b-1])return;if(o<w[0])return;let C=0;if(i<w[0])C=0;else {C=kt.search1(w,i)+1;let F=w[C];for(;C>0&&w[C-1]==F;)C--;}for(;C<b&&o>=w[C];C++)a.push(this.events[C]);}},hs=class ya extends kt{static propertyIds=[""+mt.drawOrder];drawOrders;constructor(e){super(e,ya.propertyIds),this.drawOrders=new Array(e);}getFrameCount(){return this.frames.length}setFrame(e,i,o){this.frames[e]=i,this.drawOrders[e]=o;}apply(e,i,o,a,p,m,g){if(g==1){m==0&&X.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}if(o<this.frames[0]){(m==0||m==1)&&X.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}let w=kt.search1(this.frames,o),b=this.drawOrders[w];if(!b)X.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else {let C=e.drawOrder,F=e.slots;for(let L=0,N=b.length;L<N;L++)C[L]=F[b[L]];}}},as=class extends ht{constraintIndex=0;constructor(s,e,i){super(s,e,[mt.ikConstraint+"|"+i]),this.constraintIndex=i;}getFrameEntries(){return 6}setFrame(s,e,i,o,a,p,m){s*=6,this.frames[s]=e,this.frames[s+1]=i,this.frames[s+2]=o,this.frames[s+3]=a,this.frames[s+4]=p?1:0,this.frames[s+5]=m?1:0;}apply(s,e,i,o,a,p,m){let g=s.ikConstraints[this.constraintIndex];if(!g.active)return;let w=this.frames;if(i<w[0]){switch(p){case 0:g.mix=g.data.mix,g.softness=g.data.softness,g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch;return;case 1:g.mix+=(g.data.mix-g.mix)*a,g.softness+=(g.data.softness-g.softness)*a,g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch;}return}let b=0,C=0,F=kt.search(w,i,6),L=this.curves[F/6];switch(L){case 0:let N=w[F];b=w[F+1],C=w[F+2];let O=(i-N)/(w[F+6]-N);b+=(w[F+6+1]-b)*O,C+=(w[F+6+2]-C)*O;break;case 1:b=w[F+1],C=w[F+2];break;default:b=this.getBezierValue(i,F,1,L-2),C=this.getBezierValue(i,F,2,L+18-2);}p==0?(g.mix=g.data.mix+(b-g.data.mix)*a,g.softness=g.data.softness+(C-g.data.softness)*a,m==1?(g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch):(g.bendDirection=w[F+3],g.compress=w[F+4]!=0,g.stretch=w[F+5]!=0)):(g.mix+=(b-g.mix)*a,g.softness+=(C-g.softness)*a,m==0&&(g.bendDirection=w[F+3],g.compress=w[F+4]!=0,g.stretch=w[F+5]!=0));}},xs=class extends ht{constraintIndex=0;constructor(s,e,i){super(s,e,[mt.transformConstraint+"|"+i]),this.constraintIndex=i;}getFrameEntries(){return 7}setFrame(s,e,i,o,a,p,m,g){let w=this.frames;s*=7,w[s]=e,w[s+1]=i,w[s+2]=o,w[s+3]=a,w[s+4]=p,w[s+5]=m,w[s+6]=g;}apply(s,e,i,o,a,p,m){let g=s.transformConstraints[this.constraintIndex];if(!g.active)return;let w=this.frames;if(i<w[0]){let j=g.data;switch(p){case 0:g.mixRotate=j.mixRotate,g.mixX=j.mixX,g.mixY=j.mixY,g.mixScaleX=j.mixScaleX,g.mixScaleY=j.mixScaleY,g.mixShearY=j.mixShearY;return;case 1:g.mixRotate+=(j.mixRotate-g.mixRotate)*a,g.mixX+=(j.mixX-g.mixX)*a,g.mixY+=(j.mixY-g.mixY)*a,g.mixScaleX+=(j.mixScaleX-g.mixScaleX)*a,g.mixScaleY+=(j.mixScaleY-g.mixScaleY)*a,g.mixShearY+=(j.mixShearY-g.mixShearY)*a;}return}let b,C,F,L,N,O,Z=kt.search(w,i,7),q=this.curves[Z/7];switch(q){case 0:let j=w[Z];b=w[Z+1],C=w[Z+2],F=w[Z+3],L=w[Z+4],N=w[Z+5],O=w[Z+6];let _=(i-j)/(w[Z+7]-j);b+=(w[Z+7+1]-b)*_,C+=(w[Z+7+2]-C)*_,F+=(w[Z+7+3]-F)*_,L+=(w[Z+7+4]-L)*_,N+=(w[Z+7+5]-N)*_,O+=(w[Z+7+6]-O)*_;break;case 1:b=w[Z+1],C=w[Z+2],F=w[Z+3],L=w[Z+4],N=w[Z+5],O=w[Z+6];break;default:b=this.getBezierValue(i,Z,1,q-2),C=this.getBezierValue(i,Z,2,q+18-2),F=this.getBezierValue(i,Z,3,q+36-2),L=this.getBezierValue(i,Z,4,q+54-2),N=this.getBezierValue(i,Z,5,q+72-2),O=this.getBezierValue(i,Z,6,q+90-2);}if(p==0){let j=g.data;g.mixRotate=j.mixRotate+(b-j.mixRotate)*a,g.mixX=j.mixX+(C-j.mixX)*a,g.mixY=j.mixY+(F-j.mixY)*a,g.mixScaleX=j.mixScaleX+(L-j.mixScaleX)*a,g.mixScaleY=j.mixScaleY+(N-j.mixScaleY)*a,g.mixShearY=j.mixShearY+(O-j.mixShearY)*a;}else g.mixRotate+=(b-g.mixRotate)*a,g.mixX+=(C-g.mixX)*a,g.mixY+=(F-g.mixY)*a,g.mixScaleX+=(L-g.mixScaleX)*a,g.mixScaleY+=(N-g.mixScaleY)*a,g.mixShearY+=(O-g.mixShearY)*a;}},os=class extends ${constraintIndex=0;constructor(s,e,i){super(s,e,mt.pathConstraintPosition+"|"+i),this.constraintIndex=i;}apply(s,e,i,o,a,p,m){let g=s.pathConstraints[this.constraintIndex];g.active&&(g.position=this.getAbsoluteValue(i,a,p,g.position,g.data.position));}},cs=class extends ${constraintIndex=0;constructor(s,e,i){super(s,e,mt.pathConstraintSpacing+"|"+i),this.constraintIndex=i;}apply(s,e,i,o,a,p,m){let g=s.pathConstraints[this.constraintIndex];g.active&&(g.spacing=this.getAbsoluteValue(i,a,p,g.spacing,g.data.spacing));}},ts=class extends ht{constraintIndex=0;constructor(s,e,i){super(s,e,[mt.pathConstraintMix+"|"+i]),this.constraintIndex=i;}getFrameEntries(){return 4}setFrame(s,e,i,o,a){let p=this.frames;s<<=2,p[s]=e,p[s+1]=i,p[s+2]=o,p[s+3]=a;}apply(s,e,i,o,a,p,m){let g=s.pathConstraints[this.constraintIndex];if(!g.active)return;let w=this.frames;if(i<w[0]){switch(p){case 0:g.mixRotate=g.data.mixRotate,g.mixX=g.data.mixX,g.mixY=g.data.mixY;return;case 1:g.mixRotate+=(g.data.mixRotate-g.mixRotate)*a,g.mixX+=(g.data.mixX-g.mixX)*a,g.mixY+=(g.data.mixY-g.mixY)*a;}return}let b,C,F,L=kt.search(w,i,4),N=this.curves[L>>2];switch(N){case 0:let O=w[L];b=w[L+1],C=w[L+2],F=w[L+3];let Z=(i-O)/(w[L+4]-O);b+=(w[L+4+1]-b)*Z,C+=(w[L+4+2]-C)*Z,F+=(w[L+4+3]-F)*Z;break;case 1:b=w[L+1],C=w[L+2],F=w[L+3];break;default:b=this.getBezierValue(i,L,1,N-2),C=this.getBezierValue(i,L,2,N+18-2),F=this.getBezierValue(i,L,3,N+36-2);}if(p==0){let O=g.data;g.mixRotate=O.mixRotate+(b-O.mixRotate)*a,g.mixX=O.mixX+(C-O.mixX)*a,g.mixY=O.mixY+(F-O.mixY)*a;}else g.mixRotate+=(b-g.mixRotate)*a,g.mixX+=(C-g.mixX)*a,g.mixY+=(F-g.mixY)*a;}},ws=class extends ${constraintIndex=0;constructor(s,e,i,o){super(s,e,o+"|"+i),this.constraintIndex=i;}apply(s,e,i,o,a,p,m){let g;if(this.constraintIndex==-1){let w=i>=this.frames[0]?this.getCurveValue(i):0;for(let b of s.physicsConstraints)b.active&&this.global(b.data)&&this.set(b,this.getAbsoluteValue2(i,a,p,this.get(b),this.setup(b),w));}else g=s.physicsConstraints[this.constraintIndex],g.active&&this.set(g,this.getAbsoluteValue(i,a,p,this.get(g),this.setup(g)));}},is=class extends ws{constructor(s,e,i){super(s,e,i,mt.physicsConstraintInertia);}setup(s){return s.data.inertia}get(s){return s.inertia}set(s,e){s.inertia=e;}global(s){return s.inertiaGlobal}},Us=class extends ws{constructor(s,e,i){super(s,e,i,mt.physicsConstraintStrength);}setup(s){return s.data.strength}get(s){return s.strength}set(s,e){s.strength=e;}global(s){return s.strengthGlobal}},Ss=class extends ws{constructor(s,e,i){super(s,e,i,mt.physicsConstraintDamping);}setup(s){return s.data.damping}get(s){return s.damping}set(s,e){s.damping=e;}global(s){return s.dampingGlobal}},Es=class extends ws{constructor(s,e,i){super(s,e,i,mt.physicsConstraintMass);}setup(s){return 1/s.data.massInverse}get(s){return 1/s.massInverse}set(s,e){s.massInverse=1/e;}global(s){return s.massGlobal}},ys=class extends ws{constructor(s,e,i){super(s,e,i,mt.physicsConstraintWind);}setup(s){return s.data.wind}get(s){return s.wind}set(s,e){s.wind=e;}global(s){return s.windGlobal}},ks=class extends ws{constructor(s,e,i){super(s,e,i,mt.physicsConstraintGravity);}setup(s){return s.data.gravity}get(s){return s.gravity}set(s,e){s.gravity=e;}global(s){return s.gravityGlobal}},Ws=class extends ws{constructor(s,e,i){super(s,e,i,mt.physicsConstraintMix);}setup(s){return s.data.mix}get(s){return s.mix}set(s,e){s.mix=e;}global(s){return s.mixGlobal}},Ci=class Ma extends kt{static propertyIds=[mt.physicsConstraintReset.toString()];constraintIndex;constructor(e,i){super(e,Ma.propertyIds),this.constraintIndex=i;}getFrameCount(){return this.frames.length}setFrame(e,i){this.frames[e]=i;}apply(e,i,o,a,p,m,g){let w;if(this.constraintIndex!=-1&&(w=e.physicsConstraints[this.constraintIndex],!w.active))return;let b=this.frames;if(i>o)this.apply(e,i,Number.MAX_VALUE,[],p,m,g),i=-1;else if(i>=b[b.length-1])return;if(!(o<b[0])&&(i<b[0]||o>=b[kt.search1(b,i)+1]))if(w!=null)w.reset();else for(let C of e.physicsConstraints)C.active&&C.reset();}},Zi=class Ai extends kt{static ENTRIES=3;static MODE=1;static DELAY=2;slotIndex;attachment;constructor(e,i,o){super(e,[mt.sequence+"|"+i+"|"+o.sequence.id]),this.slotIndex=i,this.attachment=o;}getFrameEntries(){return Ai.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(e,i,o,a,p){let m=this.frames;e*=Ai.ENTRIES,m[e]=i,m[e+Ai.MODE]=o|a<<4,m[e+Ai.DELAY]=p;}apply(e,i,o,a,p,m,g){let w=e.slots[this.slotIndex];if(!w.bone.active)return;let b=w.attachment,C=this.attachment;if(b!=C&&(!(b instanceof it)||b.timelineAttachment!=C))return;if(g==1){m==0&&(w.sequenceIndex=-1);return}let F=this.frames;if(o<F[0]){(m==0||m==1)&&(w.sequenceIndex=-1);return}let L=kt.search(F,o,Ai.ENTRIES),N=F[L],O=F[L+Ai.MODE],Z=F[L+Ai.DELAY];if(!this.attachment.sequence)return;let q=O>>4,j=this.attachment.sequence.regions.length,_=ft[O&15];if(_!=0)switch(q+=(o-N)/Z+1e-5|0,_){case 1:q=Math.min(j-1,q);break;case 2:q%=j;break;case 3:{let H=(j<<1)-2;q=H==0?0:q%H,q>=j&&(q=H-q);break}case 4:q=Math.max(j-1-q,0);break;case 5:q=j-1-q%j;break;case 6:{let H=(j<<1)-2;q=H==0?0:(q+j-1)%H,q>=j&&(q=H-q);}}w.sequenceIndex=q;}},gr=class vn{static _emptyAnimation=new at("<empty>",[],0);static emptyAnimation(){return vn._emptyAnimation}data;tracks=new Array;timeScale=1;unkeyedState=0;events=new Array;listeners=new Array;queue=new Ti(this);propertyIDs=new S;animationsChanged=false;trackEntryPool=new Q(()=>new jr);constructor(e){this.data=e;}update(e){e*=this.timeScale;let i=this.tracks;for(let o=0,a=i.length;o<a;o++){let p=i[o];if(!p)continue;p.animationLast=p.nextAnimationLast,p.trackLast=p.nextTrackLast;let m=e*p.timeScale;if(p.delay>0){if(p.delay-=m,p.delay>0)continue;m=-p.delay,p.delay=0;}let g=p.next;if(g){let w=p.trackLast-g.delay;if(w>=0){for(g.delay=0,g.trackTime+=p.timeScale==0?0:(w/p.timeScale+e)*g.timeScale,p.trackTime+=m,this.setCurrent(o,g,true);g.mixingFrom;)g.mixTime+=e,g=g.mixingFrom;continue}}else if(p.trackLast>=p.trackEnd&&!p.mixingFrom){i[o]=null,this.queue.end(p),this.clearNext(p);continue}if(p.mixingFrom&&this.updateMixingFrom(p,e)){let w=p.mixingFrom;for(p.mixingFrom=null,w&&(w.mixingTo=null);w;)this.queue.end(w),w=w.mixingFrom;}p.trackTime+=m;}this.queue.drain();}updateMixingFrom(e,i){let o=e.mixingFrom;if(!o)return  true;let a=this.updateMixingFrom(o,i);return o.animationLast=o.nextAnimationLast,o.trackLast=o.nextTrackLast,e.nextTrackLast!=-1&&e.mixTime>=e.mixDuration?((o.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=o.mixingFrom,o.mixingFrom!=null&&(o.mixingFrom.mixingTo=e),e.interruptAlpha=o.interruptAlpha,this.queue.end(o)),a):(o.trackTime+=i*o.timeScale,e.mixTime+=i,false)}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let i=this.events,o=this.tracks,a=false;for(let L=0,N=o.length;L<N;L++){let O=o[L];if(!O||O.delay>0)continue;a=true;let Z=L==0?1:O.mixBlend,q=O.alpha;O.mixingFrom?q*=this.applyMixingFrom(O,e,Z):O.trackTime>=O.trackEnd&&!O.next&&(q=0);let j=q>=O.alphaAttachmentThreshold,_=O.animationLast,H=O.getAnimationTime(),K=H,rt=i;O.reverse&&(K=O.animation.duration-K,rt=null);let lt=O.animation.timelines,vt=lt.length;if(L==0&&q==1||Z==3){L==0&&(j=true);for(let pt=0;pt<vt;pt++){var p=lt[pt];p instanceof Qe?this.applyAttachmentTimeline(p,e,K,Z,j):p.apply(e,_,K,rt,q,Z,0);}}else {let pt=O.timelineMode,xt=O.shortestRotation,Et=!xt&&O.timelinesRotation.length!=vt<<1;Et&&(O.timelinesRotation.length=vt<<1);for(let Ft=0;Ft<vt;Ft++){let Vt=lt[Ft],Ut=pt[Ft]==Cs?Z:0;!xt&&Vt instanceof wt?this.applyRotateTimeline(Vt,e,K,q,Ut,O.timelinesRotation,Ft<<1,Et):Vt instanceof Qe?this.applyAttachmentTimeline(Vt,e,K,Z,j):(Vt.apply(e,_,K,rt,q,Ut,0));}}this.queueEvents(O,H),i.length=0,O.nextAnimationLast=H,O.nextTrackLast=O.trackTime;}for(var m=this.unkeyedState+vr,g=e.slots,w=0,b=e.slots.length;w<b;w++){var C=g[w];if(C.attachmentState==m){var F=C.data.attachmentName;C.setAttachment(F?e.getAttachment(C.data.index,F):null);}}return this.unkeyedState+=2,this.queue.drain(),a}applyMixingFrom(e,i,o){let a=e.mixingFrom;a.mixingFrom&&this.applyMixingFrom(a,i,o);let p=0;e.mixDuration==0?(p=1,o==1&&(o=0)):(p=e.mixTime/e.mixDuration,p>1&&(p=1),o!=1&&(o=a.mixBlend));let m=p<a.mixAttachmentThreshold,g=p<a.mixDrawOrderThreshold,w=a.animation.timelines,b=w.length,C=a.alpha*e.interruptAlpha,F=C*(1-p),L=a.animationLast,N=a.getAnimationTime(),O=N,Z=null;if(a.reverse?O=a.animation.duration-O:p<a.eventThreshold&&(Z=this.events),o==3)for(let q=0;q<b;q++)w[q].apply(i,L,O,Z,F,o,1);else {let q=a.timelineMode,j=a.timelineHoldMix,_=a.shortestRotation,H=!_&&a.timelinesRotation.length!=b<<1;H&&(a.timelinesRotation.length=b<<1),a.totalAlpha=0;for(let K=0;K<b;K++){let rt=w[K],lt=1,vt,pt=0;switch(q[K]){case Cs:if(!g&&rt instanceof hs)continue;vt=o,pt=F;break;case $s:vt=0,pt=F;break;case ji:vt=o,pt=C;break;case Hi:vt=0,pt=C;break;default:vt=0;let xt=j[K];pt=C*Math.max(0,1-xt.mixTime/xt.mixDuration);break}a.totalAlpha+=pt,!_&&rt instanceof wt?this.applyRotateTimeline(rt,i,O,pt,vt,a.timelinesRotation,K<<1,H):rt instanceof Qe?this.applyAttachmentTimeline(rt,i,O,vt,m&&pt>=a.alphaAttachmentThreshold):(g&&rt instanceof hs&&vt==0&&(lt=0),rt.apply(i,L,O,Z,pt,vt,lt));}}return e.mixDuration>0&&this.queueEvents(a,N),this.events.length=0,a.nextAnimationLast=N,a.nextTrackLast=a.trackTime,p}applyAttachmentTimeline(e,i,o,a,p){var m=i.slots[e.slotIndex];m.bone.active&&(o<e.frames[0]?(a==0||a==1)&&this.setAttachment(i,m,m.data.attachmentName,p):this.setAttachment(i,m,e.attachmentNames[kt.search1(e.frames,o)],p),m.attachmentState<=this.unkeyedState&&(m.attachmentState=this.unkeyedState+vr));}setAttachment(e,i,o,a){i.setAttachment(o?e.getAttachment(i.data.index,o):null),a&&(i.attachmentState=this.unkeyedState+wr);}applyRotateTimeline(e,i,o,a,p,m,g,w){if(w&&(m[g]=0),a==1){e.apply(i,0,o,null,1,p,0);return}let b=i.bones[e.boneIndex];if(!b.active)return;let C=e.frames,F=0,L=0;if(o<C[0])switch(p){case 0:b.rotation=b.data.rotation;default:return;case 1:F=b.rotation,L=b.data.rotation;}else F=p==0?b.data.rotation:b.rotation,L=b.data.rotation+e.getCurveValue(o);let N=0,O=L-F;if(O-=Math.ceil(O/360-.5)*360,O==0)N=m[g];else {let Z=0,q=0;w?(Z=0,q=O):(Z=m[g],q=m[g+1]);let j=Z-Z%360;N=O+j;let _=O>=0,H=Z>=0;Math.abs(q)<=90&&I.signum(q)!=I.signum(O)&&(Math.abs(Z-j)>180?(N+=360*I.signum(Z),H=_):j!=0?N-=360*I.signum(Z):H=_),H!=_&&(N+=360*I.signum(Z)),m[g]=N;}m[g+1]=O,b.rotation=F+N*a;}queueEvents(e,i){let o=e.animationStart,a=e.animationEnd,p=a-o,m=e.trackLast%p,g=this.events,w=0,b=g.length;for(;w<b;w++){let F=g[w];if(F.time<m)break;F.time>a||this.queue.event(e,F);}let C=false;if(e.loop)if(p==0)C=true;else {let F=Math.floor(e.trackTime/p);C=F>0&&F>Math.floor(e.trackLast/p);}else C=i>=a&&e.animationLast<a;for(C&&this.queue.complete(e);w<b;w++){let F=g[w];F.time<o||this.queue.event(e,F);}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let i=0,o=this.tracks.length;i<o;i++)this.clearTrack(i);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain();}clearTrack(e){if(e>=this.tracks.length)return;let i=this.tracks[e];if(!i)return;this.queue.end(i),this.clearNext(i);let o=i;for(;;){let a=o.mixingFrom;if(!a)break;this.queue.end(a),o.mixingFrom=null,o.mixingTo=null,o=a;}this.tracks[i.trackIndex]=null,this.queue.drain();}setCurrent(e,i,o){let a=this.expandToIndex(e);this.tracks[e]=i,i.previous=null,a&&(o&&this.queue.interrupt(a),i.mixingFrom=a,a.mixingTo=i,i.mixTime=0,a.mixingFrom&&a.mixDuration>0&&(i.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(i);}setAnimation(e,i,o=false){let a=this.data.skeletonData.findAnimation(i);if(!a)throw new Error("Animation not found: "+i);return this.setAnimationWith(e,a,o)}setAnimationWith(e,i,o=false){if(!i)throw new Error("animation cannot be null.");let a=true,p=this.expandToIndex(e);p&&(p.nextTrackLast==-1?(this.tracks[e]=p.mixingFrom,this.queue.interrupt(p),this.queue.end(p),this.clearNext(p),p=p.mixingFrom,a=false):this.clearNext(p));let m=this.trackEntry(e,i,o,p);return this.setCurrent(e,m,a),this.queue.drain(),m}addAnimation(e,i,o=false,a=0){let p=this.data.skeletonData.findAnimation(i);if(!p)throw new Error("Animation not found: "+i);return this.addAnimationWith(e,p,o,a)}addAnimationWith(e,i,o=false,a=0){if(!i)throw new Error("animation cannot be null.");let p=this.expandToIndex(e);if(p)for(;p.next;)p=p.next;let m=this.trackEntry(e,i,o,p);return p?(p.next=m,m.previous=p,a<=0&&(a=Math.max(a+p.getTrackComplete()-m.mixDuration,0))):(this.setCurrent(e,m,true),this.queue.drain(),a<0&&(a=0)),m.delay=a,m}setEmptyAnimation(e,i=0){let o=this.setAnimationWith(e,vn.emptyAnimation(),false);return o.mixDuration=i,o.trackEnd=i,o}addEmptyAnimation(e,i=0,o=0){let a=this.addAnimationWith(e,vn.emptyAnimation(),false,o);return o<=0&&(a.delay=Math.max(a.delay+a.mixDuration-i,0)),a.mixDuration=i,a.trackEnd=i,a}setEmptyAnimations(e=0){let i=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let o=0,a=this.tracks.length;o<a;o++){let p=this.tracks[o];p&&this.setEmptyAnimation(p.trackIndex,e);}this.queue.drainDisabled=i,this.queue.drain();}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(X.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,i,o,a){let p=this.trackEntryPool.obtain();return p.reset(),p.trackIndex=e,p.animation=i,p.loop=o,p.holdPrevious=false,p.reverse=false,p.shortestRotation=false,p.eventThreshold=0,p.alphaAttachmentThreshold=0,p.mixAttachmentThreshold=0,p.mixDrawOrderThreshold=0,p.animationStart=0,p.animationEnd=i.duration,p.animationLast=-1,p.nextAnimationLast=-1,p.delay=0,p.trackTime=0,p.trackLast=-1,p.nextTrackLast=-1,p.trackEnd=Number.MAX_VALUE,p.timeScale=1,p.alpha=1,p.mixTime=0,p.mixDuration=a?this.data.getMix(a.animation,i):0,p.interruptAlpha=1,p.totalAlpha=0,p.mixBlend=2,p}clearNext(e){let i=e.next;for(;i;)this.queue.dispose(i),i=i.next;e.next=null;}_animationsChanged(){this.animationsChanged=false,this.propertyIDs.clear();let e=this.tracks;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a){for(;a.mixingFrom;)a=a.mixingFrom;do(!a.mixingTo||a.mixBlend!=3)&&this.computeHold(a),a=a.mixingTo;while(a)}}}computeHold(e){let i=e.mixingTo,o=e.animation.timelines,a=e.animation.timelines.length,p=e.timelineMode;p.length=a;let m=e.timelineHoldMix;m.length=0;let g=this.propertyIDs;if(i&&i.holdPrevious){for(let w=0;w<a;w++)p[w]=g.addAll(o[w].getPropertyIds())?Hi:ji;return}t:for(let w=0;w<a;w++){let b=o[w],C=b.getPropertyIds();if(!g.addAll(C))p[w]=Cs;else if(!i||b instanceof Qe||b instanceof hs||b instanceof us||!i.animation.hasTimeline(C))p[w]=$s;else {for(let F=i.mixingTo;F;F=F.mixingTo)if(!F.animation.hasTimeline(C)){if(e.mixDuration>0){p[w]=xr,m[w]=F;continue t}break}p[w]=Hi;}}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e);}removeListener(e){let i=this.listeners.indexOf(e);i>=0&&this.listeners.splice(i,1);}clearListeners(){this.listeners.length=0;}clearListenerNotifications(){this.queue.clear();}},jr=class{animation=null;previous=null;next=null;mixingFrom=null;mixingTo=null;listener=null;trackIndex=0;loop=false;holdPrevious=false;reverse=false;shortestRotation=false;eventThreshold=0;mixAttachmentThreshold=0;alphaAttachmentThreshold=0;mixDrawOrderThreshold=0;animationStart=0;animationEnd=0;animationLast=0;nextAnimationLast=0;delay=0;trackTime=0;trackLast=0;nextTrackLast=0;trackEnd=0;timeScale=0;alpha=0;mixTime=0;_mixDuration=0;interruptAlpha=0;totalAlpha=0;get mixDuration(){return this._mixDuration}set mixDuration(s){this._mixDuration=s;}setMixDurationWithDelay(s,e){this._mixDuration=s,e<=0&&(this.previous!=null?e=Math.max(e+this.previous.getTrackComplete()-s,0):e=0),this.delay=e;}mixBlend=2;timelineMode=new Array;timelineHoldMix=new Array;timelinesRotation=new Array;reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;}getAnimationTime(){if(this.loop){let s=this.animationEnd-this.animationStart;return s==0?this.animationStart:this.trackTime%s+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(s){this.animationLast=s,this.nextAnimationLast=s;}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0;}getTrackComplete(){let s=this.animationEnd-this.animationStart;if(s!=0){if(this.loop)return s*(1+(this.trackTime/s|0));if(this.trackTime<s)return s}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}},Ti=class{objects=[];drainDisabled=false;animState;constructor(s){this.animState=s;}start(s){this.objects.push(0),this.objects.push(s),this.animState.animationsChanged=true;}interrupt(s){this.objects.push(1),this.objects.push(s);}end(s){this.objects.push(2),this.objects.push(s),this.animState.animationsChanged=true;}dispose(s){this.objects.push(3),this.objects.push(s);}complete(s){this.objects.push(4),this.objects.push(s);}event(s,e){this.objects.push(5),this.objects.push(s),this.objects.push(e);}drain(){if(this.drainDisabled)return;this.drainDisabled=true;let s=this.objects,e=this.animState.listeners;for(let i=0;i<s.length;i+=2){let o=s[i],a=s[i+1];switch(o){case 0:a.listener&&a.listener.start&&a.listener.start(a);for(let m=0;m<e.length;m++){let g=e[m];g.start&&g.start(a);}break;case 1:a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(let m=0;m<e.length;m++){let g=e[m];g.interrupt&&g.interrupt(a);}break;case 2:a.listener&&a.listener.end&&a.listener.end(a);for(let m=0;m<e.length;m++){let g=e[m];g.end&&g.end(a);}case 3:a.listener&&a.listener.dispose&&a.listener.dispose(a);for(let m=0;m<e.length;m++){let g=e[m];g.dispose&&g.dispose(a);}this.animState.trackEntryPool.free(a);break;case 4:a.listener&&a.listener.complete&&a.listener.complete(a);for(let m=0;m<e.length;m++){let g=e[m];g.complete&&g.complete(a);}break;case 5:let p=s[i+++2];a.listener&&a.listener.event&&a.listener.event(a,p);for(let m=0;m<e.length;m++){let g=e[m];g.event&&g.event(a,p);}break}}this.clear(),this.drainDisabled=false;}clear(){this.objects.length=0;}},fi=(s=>(s[s.start=0]="start",s[s.interrupt=1]="interrupt",s[s.end=2]="end",s[s.dispose=3]="dispose",s[s.complete=4]="complete",s[s.event=5]="event",s))(fi||{}),pr=class{start(s){}interrupt(s){}end(s){}dispose(s){}complete(s){}event(s,e){}},Cs=0,$s=1,ji=2,Hi=3,xr=4,vr=1,wr=2,yr=class{skeletonData;animationToMixTime={};defaultMix=0;constructor(s){if(!s)throw new Error("skeletonData cannot be null.");this.skeletonData=s;}setMix(s,e,i){let o=this.skeletonData.findAnimation(s);if(!o)throw new Error("Animation not found: "+s);let a=this.skeletonData.findAnimation(e);if(!a)throw new Error("Animation not found: "+e);this.setMixWith(o,a,i);}setMixWith(s,e,i){if(!s)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let o=s.name+"."+e.name;this.animationToMixTime[o]=i;}getMix(s,e){let i=s.name+"."+e.name,o=this.animationToMixTime[i];return o===void 0?this.defaultMix:o}},zs=class ba extends it{color=new V(1,1,1,1);constructor(e){super(e);}copy(){let e=new ba(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e}},Ps=class Aa extends it{endSlot=null;color=new V(.2275,.2275,.8078,1);constructor(e){super(e);}copy(){let e=new Aa(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e}},Ii=class{_image;constructor(s){this._image=s;}getImage(){return this._image}},Ei=(s=>(s[s.Nearest=9728]="Nearest",s[s.Linear=9729]="Linear",s[s.MipMap=9987]="MipMap",s[s.MipMapNearestNearest=9984]="MipMapNearestNearest",s[s.MipMapLinearNearest=9985]="MipMapLinearNearest",s[s.MipMapNearestLinear=9986]="MipMapNearestLinear",s[s.MipMapLinearLinear=9987]="MipMapLinearLinear",s))(Ei||{}),qe=(s=>(s[s.MirroredRepeat=33648]="MirroredRepeat",s[s.ClampToEdge=33071]="ClampToEdge",s[s.Repeat=10497]="Repeat",s))(qe||{}),Hr=class{texture;u=0;v=0;u2=0;v2=0;width=0;height=0;degrees=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0},Mr=class extends Ii{setFilters(s,e){}setWraps(s,e){}dispose(){}},bs=class{pages=new Array;regions=new Array;constructor(s){let e=new br(s),i=new Array(4),o={};o.size=b=>{b.width=parseInt(i[1]),b.height=parseInt(i[2]);},o.format=()=>{},o.filter=b=>{b.minFilter=X.enumValue(Ei,i[1]),b.magFilter=X.enumValue(Ei,i[2]);},o.repeat=b=>{i[1].indexOf("x")!=-1&&(b.uWrap=10497),i[1].indexOf("y")!=-1&&(b.vWrap=10497);},o.pma=b=>{b.pma=i[1]=="true";};var a={};a.xy=b=>{b.x=parseInt(i[1]),b.y=parseInt(i[2]);},a.size=b=>{b.width=parseInt(i[1]),b.height=parseInt(i[2]);},a.bounds=b=>{b.x=parseInt(i[1]),b.y=parseInt(i[2]),b.width=parseInt(i[3]),b.height=parseInt(i[4]);},a.offset=b=>{b.offsetX=parseInt(i[1]),b.offsetY=parseInt(i[2]);},a.orig=b=>{b.originalWidth=parseInt(i[1]),b.originalHeight=parseInt(i[2]);},a.offsets=b=>{b.offsetX=parseInt(i[1]),b.offsetY=parseInt(i[2]),b.originalWidth=parseInt(i[3]),b.originalHeight=parseInt(i[4]);},a.rotate=b=>{let C=i[1];C=="true"?b.degrees=90:C!="false"&&(b.degrees=parseInt(C));},a.index=b=>{b.index=parseInt(i[1]);};let p=e.readLine();for(;p&&p.trim().length==0;)p=e.readLine();for(;!(!p||p.trim().length==0||e.readEntry(i,p)==0);)p=e.readLine();let m=null,g=null,w=null;for(;p!==null;)if(p.trim().length==0)m=null,p=e.readLine();else if(m){let b=new Ji(m,p);for(;;){let C=e.readEntry(i,p=e.readLine());if(C==0)break;let F=a[i[0]];if(F)F(b);else {g||(g=[]),w||(w=[]),g.push(i[0]);let L=[];for(let N=0;N<C;N++)L.push(parseInt(i[N+1]));w.push(L);}}b.originalWidth==0&&b.originalHeight==0&&(b.originalWidth=b.width,b.originalHeight=b.height),g&&g.length>0&&w&&w.length>0&&(b.names=g,b.values=w,g=null,w=null),b.u=b.x/m.width,b.v=b.y/m.height,b.degrees==90?(b.u2=(b.x+b.height)/m.width,b.v2=(b.y+b.width)/m.height):(b.u2=(b.x+b.width)/m.width,b.v2=(b.y+b.height)/m.height),this.regions.push(b);}else {for(m=new Ri(p.trim());e.readEntry(i,p=e.readLine())!=0;){let b=o[i[0]];b&&b(m);}this.pages.push(m);}}findRegion(s){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==s)return this.regions[e];return null}setTextures(s,e=""){for(let i of this.pages)i.setTexture(s.get(e+i.name));}dispose(){var s;for(let e=0;e<this.pages.length;e++)(s=this.pages[e].texture)==null||s.dispose();}},br=class{lines;index=0;constructor(s){this.lines=s.split(/\r\n|\r|\n/);}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(s,e){if(!e||(e=e.trim(),e.length==0))return 0;let i=e.indexOf(":");if(i==-1)return 0;s[0]=e.substr(0,i).trim();for(let o=1,a=i+1;;o++){let p=e.indexOf(",",a);if(p==-1)return s[o]=e.substr(a).trim(),o;if(s[o]=e.substr(a,p-a).trim(),a=p+1,o==4)return 4}}},Ri=class{name;minFilter=9728;magFilter=9728;uWrap=33071;vWrap=33071;texture=null;width=0;height=0;pma=false;regions=new Array;constructor(s){this.name=s;}setTexture(s){this.texture=s,s.setFilters(this.minFilter,this.magFilter),s.setWraps(this.uWrap,this.vWrap);for(let e of this.regions)e.texture=s;}},Ji=class extends Hr{page;name;x=0;y=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0;index=0;degrees=0;names=null;values=null;constructor(s,e){super(),this.page=s,this.name=e,s.regions.push(this);}},li=class Qn extends it{region=null;path;regionUVs=[];uvs=[];triangles=[];color=new V(1,1,1,1);width=0;height=0;hullLength=0;edges=[];parentMesh=null;sequence=null;tempColor=new V(0,0,0,0);constructor(e,i){super(e),this.path=i;}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.regionUVs;(!this.uvs||this.uvs.length!=e.length)&&(this.uvs=X.newFloatArray(e.length));let i=this.uvs,o=this.uvs.length,a=this.region.u,p=this.region.v,m=0,g=0;if(this.region instanceof Ji){let w=this.region,b=w.page,C=b.width,F=b.height;switch(w.degrees){case 90:a-=(w.originalHeight-w.offsetY-w.height)/C,p-=(w.originalWidth-w.offsetX-w.width)/F,m=w.originalHeight/C,g=w.originalWidth/F;for(let L=0;L<o;L+=2)i[L]=a+e[L+1]*m,i[L+1]=p+(1-e[L])*g;return;case 180:a-=(w.originalWidth-w.offsetX-w.width)/C,p-=w.offsetY/F,m=w.originalWidth/C,g=w.originalHeight/F;for(let L=0;L<o;L+=2)i[L]=a+(1-e[L])*m,i[L+1]=p+(1-e[L+1])*g;return;case 270:a-=w.offsetY/C,p-=w.offsetX/F,m=w.originalHeight/C,g=w.originalWidth/F;for(let L=0;L<o;L+=2)i[L]=a+(1-e[L+1])*m,i[L+1]=p+e[L]*g;return}a-=w.offsetX/C,p-=(w.originalHeight-w.offsetY-w.height)/F,m=w.originalWidth/C,g=w.originalHeight/F;}else this.region?(m=this.region.u2-a,g=this.region.v2-p):(a=p=0,m=g=1);for(let w=0;w<o;w+=2)i[w]=a+e[w]*m,i[w+1]=p+e[w+1]*g;}getParentMesh(){return this.parentMesh}setParentMesh(e){this.parentMesh=e,e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength);}copy(){if(this.parentMesh)return this.newLinkedMesh();let e=new Qn(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Array(this.regionUVs.length),X.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=this.uvs instanceof Float32Array?X.newFloatArray(this.uvs.length):new Array(this.uvs.length),X.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),X.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,e.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(e.edges=new Array(this.edges.length),X.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e}computeWorldVertices(e,i,o,a,p,m){this.sequence!=null&&this.sequence.apply(e,this),super.computeWorldVertices(e,i,o,a,p,m);}newLinkedMesh(){let e=new Qn(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),e.timelineAttachment=this.timelineAttachment,e.setParentMesh(this.parentMesh?this.parentMesh:this),e.region!=null&&e.updateRegion(),e}},ai=class Sa extends it{lengths=[];closed=false;constantSpeed=false;color=new V(1,1,1,1);constructor(e){super(e);}copy(){let e=new Sa(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),X.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e}},_i=class Ca extends it{x=0;y=0;rotation=0;color=new V(.38,.94,0,1);constructor(e){super(e);}computeWorldPosition(e,i){return i.x=this.x*e.a+this.y*e.b+e.worldX,i.y=this.x*e.c+this.y*e.d+e.worldY,i}computeWorldRotation(e){let i=this.rotation*I.degRad,o=Math.cos(i),a=Math.sin(i),p=o*e.a+a*e.b,m=o*e.c+a*e.d;return I.atan2Deg(m,p)}copy(){let e=new Ca(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e}},mi=class Ta extends ot{x=0;y=0;scaleX=1;scaleY=1;rotation=0;width=0;height=0;color=new V(1,1,1,1);path;region=null;sequence=null;offset=X.newFloatArray(8);uvs=X.newFloatArray(8);tempColor=new V(1,1,1,1);constructor(e,i){super(e),this.path=i;}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.region,i=this.uvs;if(e==null){i[0]=0,i[1]=0,i[2]=0,i[3]=1,i[4]=1,i[5]=1,i[6]=1,i[7]=0;return}let o=this.width/this.region.originalWidth*this.scaleX,a=this.height/this.region.originalHeight*this.scaleY,p=-this.width/2*this.scaleX+this.region.offsetX*o,m=-this.height/2*this.scaleY+this.region.offsetY*a,g=p+this.region.width*o,w=m+this.region.height*a,b=this.rotation*I.degRad,C=Math.cos(b),F=Math.sin(b),L=this.x,N=this.y,O=p*C+L,Z=p*F,q=m*C+N,j=m*F,_=g*C+L,H=g*F,K=w*C+N,rt=w*F,lt=this.offset;lt[0]=O-j,lt[1]=q+Z,lt[2]=O-rt,lt[3]=K+Z,lt[4]=_-rt,lt[5]=K+H,lt[6]=_-j,lt[7]=q+H,e.degrees==90?(i[0]=e.u2,i[1]=e.v2,i[2]=e.u,i[3]=e.v2,i[4]=e.u,i[5]=e.v,i[6]=e.u2,i[7]=e.v):(i[0]=e.u,i[1]=e.v2,i[2]=e.u,i[3]=e.v,i[4]=e.u2,i[5]=e.v,i[6]=e.u2,i[7]=e.v2);}computeWorldVertices(e,i,o,a){this.sequence!=null&&this.sequence.apply(e,this);let p=e.bone,m=this.offset,g=p.worldX,w=p.worldY,b=p.a,C=p.b,F=p.c,L=p.d,N=0,O=0;N=m[0],O=m[1],i[o]=N*b+O*C+g,i[o+1]=N*F+O*L+w,o+=a,N=m[2],O=m[3],i[o]=N*b+O*C+g,i[o+1]=N*F+O*L+w,o+=a,N=m[4],O=m[5],i[o]=N*b+O*C+g,i[o+1]=N*F+O*L+w,o+=a,N=m[6],O=m[7],i[o]=N*b+O*C+g,i[o+1]=N*F+O*L+w;}copy(){let e=new Ta(this.name,this.path);return e.region=this.region,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,X.arrayCopy(this.uvs,0,e.uvs,0,8),X.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e.sequence=this.sequence!=null?this.sequence.copy():null,e}static X1=0;static Y1=1;static C1R=2;static C1G=3;static C1B=4;static C1A=5;static U1=6;static V1=7;static X2=8;static Y2=9;static C2R=10;static C2G=11;static C2B=12;static C2A=13;static U2=14;static V2=15;static X3=16;static Y3=17;static C3R=18;static C3G=19;static C3B=20;static C3A=21;static U3=22;static V3=23;static X4=24;static Y4=25;static C4R=26;static C4G=27;static C4B=28;static C4A=29;static U4=30;static V4=31},Ar=class{atlas;constructor(s){this.atlas=s;}loadSequence(s,e,i){let o=i.regions;for(let a=0,p=o.length;a<p;a++){let m=i.getPath(e,a),g=this.atlas.findRegion(m);if(g==null)throw new Error("Region not found in atlas: "+m+" (sequence: "+s+")");o[a]=g;}}newRegionAttachment(s,e,i,o){let a=new mi(e,i);if(o!=null)this.loadSequence(e,i,o);else {let p=this.atlas.findRegion(i);if(!p)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");a.region=p;}return a}newMeshAttachment(s,e,i,o){let a=new li(e,i);if(o!=null)this.loadSequence(e,i,o);else {let p=this.atlas.findRegion(i);if(!p)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");a.region=p;}return a}newBoundingBoxAttachment(s,e){return new zs(e)}newPathAttachment(s,e){return new ai(e)}newPointAttachment(s,e){return new _i(e)}newClippingAttachment(s,e){return new Ps(e)}},ki=class{index=0;name;parent=null;length=0;x=0;y=0;rotation=0;scaleX=1;scaleY=1;shearX=0;shearY=0;inherit=0;skinRequired=false;color=new V;icon;visible=false;constructor(s,e,i){if(s<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=s,this.name=e,this.parent=i;}},Ys=(s=>(s[s.Normal=0]="Normal",s[s.OnlyTranslation=1]="OnlyTranslation",s[s.NoRotationOrReflection=2]="NoRotationOrReflection",s[s.NoScale=3]="NoScale",s[s.NoScaleOrReflection=4]="NoScaleOrReflection",s))(Ys||{}),ms=class{data;skeleton;parent=null;children=new Array;x=0;y=0;rotation=0;scaleX=0;scaleY=0;shearX=0;shearY=0;ax=0;ay=0;arotation=0;ascaleX=0;ascaleY=0;ashearX=0;ashearY=0;a=0;b=0;c=0;d=0;worldY=0;worldX=0;inherit=0;sorted=false;active=false;constructor(s,e,i){if(!s)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=s,this.skeleton=e,this.parent=i,this.setToSetupPose();}isActive(){return this.active}update(s){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY);}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);}updateWorldTransformWith(s,e,i,o,a,p,m){this.ax=s,this.ay=e,this.arotation=i,this.ascaleX=o,this.ascaleY=a,this.ashearX=p,this.ashearY=m;let g=this.parent;if(!g){let L=this.skeleton,N=L.scaleX,O=L.scaleY,Z=(i+p)*I.degRad,q=(i+90+m)*I.degRad;this.a=Math.cos(Z)*o*N,this.b=Math.cos(q)*a*N,this.c=Math.sin(Z)*o*O,this.d=Math.sin(q)*a*O,this.worldX=s*N+L.x,this.worldY=e*O+L.y;return}let w=g.a,b=g.b,C=g.c,F=g.d;switch(this.worldX=w*s+b*e+g.worldX,this.worldY=C*s+F*e+g.worldY,this.inherit){case 0:{let L=(i+p)*I.degRad,N=(i+90+m)*I.degRad,O=Math.cos(L)*o,Z=Math.cos(N)*a,q=Math.sin(L)*o,j=Math.sin(N)*a;this.a=w*O+b*q,this.b=w*Z+b*j,this.c=C*O+F*q,this.d=C*Z+F*j;return}case 1:{let L=(i+p)*I.degRad,N=(i+90+m)*I.degRad;this.a=Math.cos(L)*o,this.b=Math.cos(N)*a,this.c=Math.sin(L)*o,this.d=Math.sin(N)*a;break}case 2:{let L=1/this.skeleton.scaleX,N=1/this.skeleton.scaleY;w*=L,C*=N;let O=w*w+C*C,Z=0;O>1e-4?(O=Math.abs(w*F*N-b*L*C)/O,b=C*O,F=w*O,Z=Math.atan2(C,w)*I.radDeg):(w=0,C=0,Z=90-Math.atan2(F,b)*I.radDeg);let q=(i+p-Z)*I.degRad,j=(i+m-Z+90)*I.degRad,_=Math.cos(q)*o,H=Math.cos(j)*a,K=Math.sin(q)*o,rt=Math.sin(j)*a;this.a=w*_-b*K,this.b=w*H-b*rt,this.c=C*_+F*K,this.d=C*H+F*rt;break}case 3:case 4:{i*=I.degRad;let L=Math.cos(i),N=Math.sin(i),O=(w*L+b*N)/this.skeleton.scaleX,Z=(C*L+F*N)/this.skeleton.scaleY,q=Math.sqrt(O*O+Z*Z);q>1e-5&&(q=1/q),O*=q,Z*=q,q=Math.sqrt(O*O+Z*Z),this.inherit==3&&w*F-b*C<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(q=-q),i=Math.PI/2+Math.atan2(Z,O);let j=Math.cos(i)*q,_=Math.sin(i)*q;p*=I.degRad,m=(90+m)*I.degRad;let H=Math.cos(p)*o,K=Math.cos(m)*a,rt=Math.sin(p)*o,lt=Math.sin(m)*a;this.a=O*H+j*rt,this.b=O*K+j*lt,this.c=Z*H+_*rt,this.d=Z*K+_*lt;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY;}setToSetupPose(){let s=this.data;this.x=s.x,this.y=s.y,this.rotation=s.rotation,this.scaleX=s.scaleX,this.scaleY=s.scaleY,this.shearX=s.shearX,this.shearY=s.shearY,this.inherit=s.inherit;}updateAppliedTransform(){let s=this.parent;if(!s){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*I.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*I.radDeg;return}let e=s.a,i=s.b,o=s.c,a=s.d,p=1/(e*a-i*o),m=a*p,g=i*p,w=o*p,b=e*p,C=this.worldX-s.worldX,F=this.worldY-s.worldY;this.ax=C*m-F*g,this.ay=F*b-C*w;let L,N,O,Z;if(this.inherit==1)L=this.a,N=this.b,O=this.c,Z=this.d;else {switch(this.inherit){case 2:{let K=Math.abs(e*a-i*o)/(e*e+o*o);i=-o*this.skeleton.scaleX*K/this.skeleton.scaleY,a=e*this.skeleton.scaleY*K/this.skeleton.scaleX,p=1/(e*a-i*o),m=a*p,g=i*p;break}case 3:case 4:let q=I.cosDeg(this.rotation),j=I.sinDeg(this.rotation);e=(e*q+i*j)/this.skeleton.scaleX,o=(o*q+a*j)/this.skeleton.scaleY;let _=Math.sqrt(e*e+o*o);_>1e-5&&(_=1/_),e*=_,o*=_,_=Math.sqrt(e*e+o*o),this.inherit==3&&p<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_);let H=I.PI/2+Math.atan2(o,e);i=Math.cos(H)*_,a=Math.sin(H)*_,p=1/(e*a-i*o),m=a*p,g=i*p,w=o*p,b=e*p;}L=m*this.a-g*this.c,N=m*this.b-g*this.d,O=b*this.c-w*this.a,Z=b*this.d-w*this.b;}if(this.ashearX=0,this.ascaleX=Math.sqrt(L*L+O*O),this.ascaleX>1e-4){let q=L*Z-N*O;this.ascaleY=q/this.ascaleX,this.ashearY=-Math.atan2(L*N+O*Z,q)*I.radDeg,this.arotation=Math.atan2(O,L)*I.radDeg;}else this.ascaleX=0,this.ascaleY=Math.sqrt(N*N+Z*Z),this.ashearY=0,this.arotation=90-Math.atan2(Z,N)*I.radDeg;}getWorldRotationX(){return Math.atan2(this.c,this.a)*I.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*I.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(s){let e=1/(this.a*this.d-this.b*this.c),i=s.x-this.worldX,o=s.y-this.worldY;return s.x=i*this.d*e-o*this.b*e,s.y=o*this.a*e-i*this.c*e,s}localToWorld(s){let e=s.x,i=s.y;return s.x=e*this.a+i*this.b+this.worldX,s.y=e*this.c+i*this.d+this.worldY,s}worldToParent(s){if(s==null)throw new Error("world cannot be null.");return this.parent==null?s:this.parent.worldToLocal(s)}parentToWorld(s){if(s==null)throw new Error("world cannot be null.");return this.parent==null?s:this.parent.localToWorld(s)}worldToLocalRotation(s){let e=I.sinDeg(s),i=I.cosDeg(s);return Math.atan2(this.a*e-this.c*i,this.d*i-this.b*e)*I.radDeg+this.rotation-this.shearX}localToWorldRotation(s){s-=this.rotation-this.shearX;let e=I.sinDeg(s),i=I.cosDeg(s);return Math.atan2(i*this.c+e*this.d,i*this.a+e*this.b)*I.radDeg}rotateWorld(s){s*=I.degRad;let e=Math.sin(s),i=Math.cos(s),o=this.a,a=this.b;this.a=i*o-e*this.c,this.b=i*a-e*this.d,this.c=e*o+i*this.c,this.d=e*a+i*this.d;}},Ls=class{constructor(s,e,i){this.name=s,this.order=e,this.skinRequired=i;}},Gs=class{pathPrefix="";textureLoader;downloader;cache;errors={};toLoad=0;loaded=0;constructor(s,e="",i=new Qi,o=new hi){this.textureLoader=s,this.pathPrefix=e,this.downloader=i,this.cache=o;}start(s){return this.toLoad++,this.pathPrefix+s}success(s,e,i){this.toLoad--,this.loaded++,this.cache.assets[e]=i,this.cache.assetsRefCount[e]=(this.cache.assetsRefCount[e]||0)+1,s&&s(e,i);}error(s,e,i){this.toLoad--,this.loaded++,this.errors[e]=i,s&&s(e,i);}loadAll(){return new Promise((s,e)=>{let i=()=>{if(this.isLoadingComplete()){this.hasErrors()?e(this.errors):s(this);return}requestAnimationFrame(i);};requestAnimationFrame(i);})}setRawDataURI(s,e){this.downloader.rawDataUris[this.pathPrefix+s]=e;}loadBinary(s,e=()=>{},i=()=>{}){s=this.start(s),!this.reuseAssets(s,e,i)&&(this.cache.assetsLoaded[s]=new Promise((o,a)=>{this.downloader.downloadBinary(s,p=>{this.success(e,s,p),o(p);},(p,m)=>{let g=`Couldn't load binary ${s}: status ${p}, ${m}`;this.error(i,s,g),a(g);});}));}loadText(s,e=()=>{},i=()=>{}){s=this.start(s),this.downloader.downloadText(s,o=>{this.success(e,s,o);},(o,a)=>{this.error(i,s,`Couldn't load text ${s}: status ${o}, ${a}`);});}loadJson(s,e=()=>{},i=()=>{}){s=this.start(s),!this.reuseAssets(s,e,i)&&(this.cache.assetsLoaded[s]=new Promise((o,a)=>{this.downloader.downloadJson(s,p=>{this.success(e,s,p),o(p);},(p,m)=>{let g=`Couldn't load JSON ${s}: status ${p}, ${m}`;this.error(i,s,g),a(g);});}));}reuseAssets(s,e=()=>{},i=()=>{}){let o=this.cache.assetsLoaded[s],a=o!==void 0;return a&&(this.cache.assetsLoaded[s]=o.then(p=>(p=p instanceof Image||p instanceof ImageBitmap?this.textureLoader(p):p,this.success(e,s,p),p)).catch(p=>this.error(i,s,p))),a}loadTexture(s,e=()=>{},i=()=>{}){s=this.start(s),!this.reuseAssets(s,e,i)&&(this.cache.assetsLoaded[s]=new Promise((o,a)=>{if(!(typeof window<"u"&&typeof navigator<"u"&&window.document))fetch(s,{mode:"cors"}).then(p=>{if(p.ok)return p.blob();let m=`Couldn't load image: ${s}`;this.error(i,s,`Couldn't load image: ${s}`),a(m);}).then(p=>p?createImageBitmap(p,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(p=>{if(p){let m=this.createTexture(s,p);this.success(e,s,m),o(m);}});else {let p=new Image;p.crossOrigin="anonymous",p.onload=()=>{let m=this.createTexture(s,p);this.success(e,s,m),o(m);},p.onerror=()=>{let m=`Couldn't load image: ${s}`;this.error(i,s,m),a(m);},this.downloader.rawDataUris[s]&&(s=this.downloader.rawDataUris[s]),p.src=s;}}));}loadTextureAtlas(s,e=()=>{},i=()=>{},o){let a=s.lastIndexOf("/"),p=a>=0?s.substring(0,a+1):"";s=this.start(s),!this.reuseAssets(s,e,i)&&(this.cache.assetsLoaded[s]=new Promise((m,g)=>{this.downloader.downloadText(s,w=>{try{let b=this.createTextureAtlas(s,w),C=b.pages.length,F=!1;for(let L of b.pages)this.loadTexture(o?o[L.name]:p+L.name,(N,O)=>{F||(L.setTexture(O),--C==0&&(this.success(e,s,b),m(b)));},(N,O)=>{if(!F){let Z=`Couldn't load texture ${s} page image: ${N}`;this.error(i,s,Z),g(Z);}F=!0;});}catch(b){let C=`Couldn't parse texture atlas ${s}: ${b.message}`;this.error(i,s,C),g(C);}},(w,b)=>{let C=`Couldn't load texture atlas ${s}: status ${w}, ${b}`;this.error(i,s,C),g(C);});}));}loadTextureAtlasButNoTextures(s,e=()=>{},i=()=>{},o){s=this.start(s),!this.reuseAssets(s,e,i)&&(this.cache.assetsLoaded[s]=new Promise((a,p)=>{this.downloader.downloadText(s,m=>{try{let g=this.createTextureAtlas(s,m);this.success(e,s,g),a(g);}catch(g){let w=`Couldn't parse texture atlas ${s}: ${g.message}`;this.error(i,s,w),p(w);}},(m,g)=>{let w=`Couldn't load texture atlas ${s}: status ${m}, ${g}`;this.error(i,s,w),p(w);});}));}async loadBinaryAsync(s){return new Promise((e,i)=>{this.loadBinary(s,(o,a)=>e(a),(o,a)=>i(a));})}async loadJsonAsync(s){return new Promise((e,i)=>{this.loadJson(s,(o,a)=>e(a),(o,a)=>i(a));})}async loadTextureAsync(s){return new Promise((e,i)=>{this.loadTexture(s,(o,a)=>e(a),(o,a)=>i(a));})}async loadTextureAtlasAsync(s){return new Promise((e,i)=>{this.loadTextureAtlas(s,(o,a)=>e(a),(o,a)=>i(a));})}async loadTextureAtlasButNoTexturesAsync(s){return new Promise((e,i)=>{this.loadTextureAtlasButNoTextures(s,(o,a)=>e(a),(o,a)=>i(a));})}setCache(s){this.cache=s;}get(s){return this.cache.assets[this.pathPrefix+s]}require(s){s=this.pathPrefix+s;let e=this.cache.assets[s];if(e)return e;let i=this.errors[s];throw Error("Asset not found: "+s+(i?`
`+i:""))}remove(s){s=this.pathPrefix+s;let e=this.cache.assets[s];return e.dispose&&e.dispose(),delete this.cache.assets[s],delete this.cache.assetsRefCount[s],delete this.cache.assetsLoaded[s],e}removeAll(){for(let s in this.cache.assets){let e=this.cache.assets[s];e.dispose&&e.dispose();}this.cache.assets={},this.cache.assetsLoaded={},this.cache.assetsRefCount={};}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll();}disposeAsset(s){let e=this.cache.assets[s];if(e instanceof bs){e.dispose();return}this.disposeAssetInternal(s);}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}disposeAssetInternal(s){if(this.cache.assetsRefCount[s]>0&&--this.cache.assetsRefCount[s]===0)return this.remove(s)}createTextureAtlas(s,e){let i=new bs(e);return i.dispose=()=>{var o;if(!(this.cache.assetsRefCount[s]<=0)){this.disposeAssetInternal(s);for(let a of i.pages)(o=a.texture)==null||o.dispose();}},i}createTexture(s,e){let i=this.textureLoader(e),o=i.dispose.bind(i);return i.dispose=()=>{this.disposeAssetInternal(s)&&o();},i}},hi=class wn{assets={};assetsRefCount={};assetsLoaded={};static AVAILABLE_CACHES=new Map;static getCache(e){let i=wn.AVAILABLE_CACHES.get(e);if(i)return i;let o=new wn;return wn.AVAILABLE_CACHES.set(e,o),o}async addAsset(e,i){this.assetsLoaded[e]=Promise.resolve(i),this.assets[e]=await i;}},Qi=class{callbacks={};rawDataUris={};dataUriToString(s){if(!s.startsWith("data:"))throw new Error("Not a data URI.");let e=s.indexOf("base64,");return e!=-1?(e+=7,atob(s.substr(e))):s.substr(s.indexOf(",")+1)}base64ToUint8Array(s){for(var e=window.atob(s),i=e.length,o=new Uint8Array(i),a=0;a<i;a++)o[a]=e.charCodeAt(a);return o}dataUriToUint8Array(s){if(!s.startsWith("data:"))throw new Error("Not a data URI.");let e=s.indexOf("base64,");if(e==-1)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(s.substr(e))}downloadText(s,e,i){if(this.start(s,e,i))return;let o=this.rawDataUris[s];if(o&&!o.includes(".")){try{this.finish(s,200,this.dataUriToString(o));}catch(m){this.finish(s,400,JSON.stringify(m));}return}let a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.open("GET",o||s,true);let p=()=>{this.finish(s,a.status,a.responseText);};a.onload=p,a.onerror=p,a.send();}downloadJson(s,e,i){this.downloadText(s,o=>{e(JSON.parse(o));},i);}downloadBinary(s,e,i){if(this.start(s,e,i))return;let o=this.rawDataUris[s];if(o&&!o.includes(".")){try{this.finish(s,200,this.dataUriToUint8Array(o));}catch(m){this.finish(s,400,JSON.stringify(m));}return}let a=new XMLHttpRequest;a.open("GET",o||s,true),a.responseType="arraybuffer";let p=()=>{this.finish(s,a.status,a.response);};a.onload=()=>{a.status==200||a.status==0?this.finish(s,200,new Uint8Array(a.response)):p();},a.onerror=p,a.send();}start(s,e,i){let o=this.callbacks[s];try{if(o)return !0;this.callbacks[s]=o=[];}finally{o.push(e,i);}}finish(s,e,i){let o=this.callbacks[s];delete this.callbacks[s];let a=e==200||e==0?[i]:[e,i];for(let p=a.length-1,m=o.length;p<m;p+=2)o[p].apply(null,a);}},Ki=class{data;intValue=0;floatValue=0;stringValue=null;time=0;volume=0;balance=0;constructor(s,e){if(!e)throw new Error("data cannot be null.");this.time=s,this.data=e;}},Sr=class{name;intValue=0;floatValue=0;stringValue=null;audioPath=null;volume=0;balance=0;constructor(s){this.name=s;}},$i=class{data;bones;target;bendDirection=0;compress=false;stretch=false;mix=1;softness=0;active=false;constructor(s,e){if(!s)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=s,this.bones=new Array;for(let o=0;o<s.bones.length;o++){let a=e.findBone(s.bones[o].name);if(!a)throw new Error(`Couldn't find bone ${s.bones[o].name}`);this.bones.push(a);}let i=e.findBone(s.target.name);if(!i)throw new Error(`Couldn't find bone ${s.target.name}`);this.target=i,this.mix=s.mix,this.softness=s.softness,this.bendDirection=s.bendDirection,this.compress=s.compress,this.stretch=s.stretch;}isActive(){return this.active}setToSetupPose(){let s=this.data;this.mix=s.mix,this.softness=s.softness,this.bendDirection=s.bendDirection,this.compress=s.compress,this.stretch=s.stretch;}update(s){if(this.mix==0)return;let e=this.target,i=this.bones;switch(i.length){case 1:this.apply1(i[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(i[0],i[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(s,e,i,o,a,p,m){let g=s.parent;if(!g)throw new Error("IK bone must have parent.");let w=g.a,b=g.b,C=g.c,F=g.d,L=-s.ashearX-s.arotation,N=0,O=0;switch(s.inherit){case 1:N=(e-s.worldX)*I.signum(s.skeleton.scaleX),O=(i-s.worldY)*I.signum(s.skeleton.scaleY);break;case 2:let j=Math.abs(w*F-b*C)/Math.max(1e-4,w*w+C*C),_=w/s.skeleton.scaleX,H=C/s.skeleton.scaleY;b=-H*j*s.skeleton.scaleX,F=_*j*s.skeleton.scaleY,L+=Math.atan2(H,_)*I.radDeg;default:let K=e-g.worldX,rt=i-g.worldY,lt=w*F-b*C;Math.abs(lt)<=1e-4?(N=0,O=0):(N=(K*F-rt*b)/lt-s.ax,O=(rt*w-K*C)/lt-s.ay);}L+=Math.atan2(O,N)*I.radDeg,s.ascaleX<0&&(L+=180),L>180?L-=360:L<-180&&(L+=360);let Z=s.ascaleX,q=s.ascaleY;if(o||a){switch(s.inherit){case 3:case 4:N=e-s.worldX,O=i-s.worldY;}let j=s.data.length*Z;if(j>1e-4){let _=N*N+O*O;if(o&&_<j*j||a&&_>j*j){let H=(Math.sqrt(_)/j-1)*m+1;Z*=H,p&&(q*=H);}}}s.updateWorldTransformWith(s.ax,s.ay,s.arotation+L*m,Z,q,s.ashearX,s.ashearY);}apply2(s,e,i,o,a,p,m,g,w){if(s.inherit!=0||e.inherit!=0)return;let b=s.ax,C=s.ay,F=s.ascaleX,L=s.ascaleY,N=F,O=L,Z=e.ascaleX,q=0,j=0,_=0;F<0?(F=-F,q=180,_=-1):(q=0,_=1),L<0&&(L=-L,_=-_),Z<0?(Z=-Z,j=180):j=0;let H=e.ax,K=0,rt=0,lt=0,vt=s.a,pt=s.b,xt=s.c,Et=s.d,Ft=Math.abs(F-L)<=1e-4;!Ft||p?(K=0,rt=vt*H+s.worldX,lt=xt*H+s.worldY):(K=e.ay,rt=vt*H+pt*K+s.worldX,lt=xt*H+Et*K+s.worldY);let Vt=s.parent;if(!Vt)throw new Error("IK parent must itself have a parent.");vt=Vt.a,pt=Vt.b,xt=Vt.c,Et=Vt.d;let Ut=vt*Et-pt*xt,St=rt-Vt.worldX,It=lt-Vt.worldY;Ut=Math.abs(Ut)<=1e-4?0:1/Ut;let Ht=(St*Et-It*pt)*Ut-b,Oe=(It*vt-St*xt)*Ut-C,xe=Math.sqrt(Ht*Ht+Oe*Oe),We=e.data.length*Z,Ke,He;if(xe<1e-4){this.apply1(s,i,o,false,p,false,w),e.updateWorldTransformWith(H,K,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}St=i-Vt.worldX,It=o-Vt.worldY;let ls=(St*Et-It*pt)*Ut-b,ne=(It*vt-St*xt)*Ut-C,ze=ls*ls+ne*ne;if(g!=0){g*=F*(Z+1)*.5;let ds=Math.sqrt(ze),As=ds-xe-We*F+g;if(As>0){let ps=Math.min(1,As/(g*2))-1;ps=(As-g*(1-ps*ps))/ds,ls-=ps*ls,ne-=ps*ne,ze=ls*ls+ne*ne;}}t:if(Ft){We*=F;let ds=(ze-xe*xe-We*We)/(2*xe*We);ds<-1?(ds=-1,He=Math.PI*a):ds>1?(ds=1,He=0,p&&(vt=(Math.sqrt(ze)/(xe+We)-1)*w+1,N*=vt,m&&(O*=vt))):He=Math.acos(ds)*a,vt=xe+We*ds,pt=We*Math.sin(He),Ke=Math.atan2(ne*vt-ls*pt,ls*vt+ne*pt);}else {vt=F*We,pt=L*We;let ds=vt*vt,As=pt*pt,ps=Math.atan2(ne,ls);xt=As*xe*xe+ds*ze-ds*As;let ei=-2*As*xe,hr=As-ds;if(Et=ei*ei-4*hr*xt,Et>=0){let cr=Math.sqrt(Et);ei<0&&(cr=-cr),cr=-(ei+cr)*.5;let Or=cr/hr,oa=xt/cr,hn=Math.abs(Or)<Math.abs(oa)?Or:oa;if(Or=ze-hn*hn,Or>=0){It=Math.sqrt(Or)*a,Ke=ps-Math.atan2(It,hn),He=Math.atan2(It/L,(hn-xe)/F);break t}}let Dr=I.PI,on=xe-vt,Bn=on*on,ra=0,na=0,ln=xe+vt,Vn=ln*ln,aa=0;xt=-vt*xe/(ds-As),xt>=-1&&xt<=1&&(xt=Math.acos(xt),St=vt*Math.cos(xt)+xe,It=pt*Math.sin(xt),Et=St*St+It*It,Et<Bn&&(Dr=xt,Bn=Et,on=St,ra=It),Et>Vn&&(na=xt,Vn=Et,ln=St,aa=It)),ze<=(Bn+Vn)*.5?(Ke=ps-Math.atan2(ra*a,on),He=Dr*a):(Ke=ps-Math.atan2(aa*a,ln),He=na*a);}let _e=Math.atan2(K,H)*_,vs=s.arotation;Ke=(Ke-_e)*I.radDeg+q-vs,Ke>180?Ke-=360:Ke<-180&&(Ke+=360),s.updateWorldTransformWith(b,C,vs+Ke*w,N,O,0,0),vs=e.arotation,He=((He+_e)*I.radDeg-e.ashearX)*_+j-vs,He>180?He-=360:He<-180&&(He+=360),e.updateWorldTransformWith(H,K,vs+He*w,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);}},Yi=class extends Ls{bones=new Array;_target=null;set target(s){this._target=s;}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}bendDirection=0;compress=false;stretch=false;uniform=false;mix=0;softness=0;constructor(s){super(s,0,false);}},gi=class extends Ls{bones=new Array;_target=null;set target(s){this._target=s;}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}positionMode=0;spacingMode=1;rotateMode=1;offsetRotation=0;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;constructor(s){super(s,0,false);}},Fi=(s=>(s[s.Fixed=0]="Fixed",s[s.Percent=1]="Percent",s))(Fi||{}),Ms=(s=>(s[s.Length=0]="Length",s[s.Fixed=1]="Fixed",s[s.Percent=2]="Percent",s[s.Proportional=3]="Proportional",s))(Ms||{}),Pi=(s=>(s[s.Tangent=0]="Tangent",s[s.Chain=1]="Chain",s[s.ChainScale=2]="ChainScale",s))(Pi||{}),Jr=class Si{static NONE=-1;static BEFORE=-2;static AFTER=-3;static epsilon=1e-5;data;bones;target;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;spaces=new Array;positions=new Array;world=new Array;curves=new Array;lengths=new Array;segments=new Array;active=false;constructor(e,i){if(!e)throw new Error("data cannot be null.");if(!i)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let a=0,p=e.bones.length;a<p;a++){let m=i.findBone(e.bones[a].name);if(!m)throw new Error(`Couldn't find bone ${e.bones[a].name}.`);this.bones.push(m);}let o=i.findSlot(e.target.name);if(!o)throw new Error(`Couldn't find target bone ${e.target.name}`);this.target=o,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY;}isActive(){return this.active}setToSetupPose(){let e=this.data;this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY;}update(e){let i=this.target.getAttachment();if(!(i instanceof ai))return;let o=this.mixRotate,a=this.mixX,p=this.mixY;if(o==0&&a==0&&p==0)return;let m=this.data,g=m.rotateMode==0,w=m.rotateMode==2,b=this.bones,C=b.length,F=g?C:C+1,L=X.setArraySize(this.spaces,F),N=w?this.lengths=X.setArraySize(this.lengths,C):[],O=this.spacing;switch(m.spacingMode){case 2:if(w)for(let lt=0,vt=F-1;lt<vt;lt++){let pt=b[lt],xt=pt.data.length,Et=xt*pt.a,Ft=xt*pt.c;N[lt]=Math.sqrt(Et*Et+Ft*Ft);}X.arrayFill(L,1,F,O);break;case 3:let K=0;for(let lt=0,vt=F-1;lt<vt;){let pt=b[lt],xt=pt.data.length;if(xt<Si.epsilon)w&&(N[lt]=0),L[++lt]=O;else {let Et=xt*pt.a,Ft=xt*pt.c,Vt=Math.sqrt(Et*Et+Ft*Ft);w&&(N[lt]=Vt),L[++lt]=Vt,K+=Vt;}}if(K>0){K=F/K*O;for(let lt=1;lt<F;lt++)L[lt]*=K;}break;default:let rt=m.spacingMode==0;for(let lt=0,vt=F-1;lt<vt;){let pt=b[lt],xt=pt.data.length;if(xt<Si.epsilon)w&&(N[lt]=0),L[++lt]=O;else {let Et=xt*pt.a,Ft=xt*pt.c,Vt=Math.sqrt(Et*Et+Ft*Ft);w&&(N[lt]=Vt),L[++lt]=(rt?xt+O:O)*Vt/xt;}}}let Z=this.computeWorldPositions(i,F,g),q=Z[0],j=Z[1],_=m.offsetRotation,H=false;if(_==0)H=m.rotateMode==1;else {H=false;let K=this.target.bone;_*=K.a*K.d-K.b*K.c>0?I.degRad:-0.01745329277777778;}for(let K=0,rt=3;K<C;K++,rt+=3){let lt=b[K];lt.worldX+=(q-lt.worldX)*a,lt.worldY+=(j-lt.worldY)*p;let vt=Z[rt],pt=Z[rt+1],xt=vt-q,Et=pt-j;if(w){let Ft=N[K];if(Ft!=0){let Vt=(Math.sqrt(xt*xt+Et*Et)/Ft-1)*o+1;lt.a*=Vt,lt.c*=Vt;}}if(q=vt,j=pt,o>0){let Ft=lt.a,Vt=lt.b,Ut=lt.c,St=lt.d,It=0,Ht=0,Oe=0;if(g?It=Z[rt-1]:L[K+1]==0?It=Z[rt+2]:It=Math.atan2(Et,xt),It-=Math.atan2(Ut,Ft),H){Ht=Math.cos(It),Oe=Math.sin(It);let xe=lt.data.length;q+=(xe*(Ht*Ft-Oe*Ut)-xt)*o,j+=(xe*(Oe*Ft+Ht*Ut)-Et)*o;}else It+=_;It>I.PI?It-=I.PI2:It<-3.1415927&&(It+=I.PI2),It*=o,Ht=Math.cos(It),Oe=Math.sin(It),lt.a=Ht*Ft-Oe*Ut,lt.b=Ht*Vt-Oe*St,lt.c=Oe*Ft+Ht*Ut,lt.d=Oe*Vt+Ht*St;}lt.updateAppliedTransform();}}computeWorldPositions(e,i,o){let a=this.target,p=this.position,m=this.spaces,g=X.setArraySize(this.positions,i*3+2),w=this.world,b=e.closed,C=e.worldVerticesLength,F=C/6,L=Si.NONE;if(!e.constantSpeed){let xe=e.lengths;F-=b?1:2;let We=xe[F];this.data.positionMode==1&&(p*=We);let Ke;switch(this.data.spacingMode){case 2:Ke=We;break;case 3:Ke=We/i;break;default:Ke=1;}w=X.setArraySize(this.world,8);for(let He=0,ls=0,ne=0;He<i;He++,ls+=3){let ze=m[He]*Ke;p+=ze;let _e=p;if(b)_e%=We,_e<0&&(_e+=We),ne=0;else if(_e<0){L!=Si.BEFORE&&(L=Si.BEFORE,e.computeWorldVertices(a,2,4,w,0,2)),this.addBeforePosition(_e,w,0,g,ls);continue}else if(_e>We){L!=Si.AFTER&&(L=Si.AFTER,e.computeWorldVertices(a,C-6,4,w,0,2)),this.addAfterPosition(_e-We,w,0,g,ls);continue}for(;;ne++){let vs=xe[ne];if(!(_e>vs)){if(ne==0)_e/=vs;else {let ds=xe[ne-1];_e=(_e-ds)/(vs-ds);}break}}ne!=L&&(L=ne,b&&ne==F?(e.computeWorldVertices(a,C-4,4,w,0,2),e.computeWorldVertices(a,0,4,w,4,2)):e.computeWorldVertices(a,ne*6+2,8,w,0,2)),this.addCurvePosition(_e,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],g,ls,o||He>0&&ze==0);}return g}b?(C+=2,w=X.setArraySize(this.world,C),e.computeWorldVertices(a,2,C-4,w,0,2),e.computeWorldVertices(a,0,2,w,C-4,2),w[C-2]=w[0],w[C-1]=w[1]):(F--,C-=4,w=X.setArraySize(this.world,C),e.computeWorldVertices(a,2,C,w,0,2));let N=X.setArraySize(this.curves,F),O=0,Z=w[0],q=w[1],j=0,_=0,H=0,K=0,rt=0,lt=0,vt=0,pt=0,xt=0,Et=0,Ft=0,Vt=0,Ut=0,St=0;for(let xe=0,We=2;xe<F;xe++,We+=6)j=w[We],_=w[We+1],H=w[We+2],K=w[We+3],rt=w[We+4],lt=w[We+5],vt=(Z-j*2+H)*.1875,pt=(q-_*2+K)*.1875,xt=((j-H)*3-Z+rt)*.09375,Et=((_-K)*3-q+lt)*.09375,Ft=vt*2+xt,Vt=pt*2+Et,Ut=(j-Z)*.75+vt+xt*.16666667,St=(_-q)*.75+pt+Et*.16666667,O+=Math.sqrt(Ut*Ut+St*St),Ut+=Ft,St+=Vt,Ft+=xt,Vt+=Et,O+=Math.sqrt(Ut*Ut+St*St),Ut+=Ft,St+=Vt,O+=Math.sqrt(Ut*Ut+St*St),Ut+=Ft+xt,St+=Vt+Et,O+=Math.sqrt(Ut*Ut+St*St),N[xe]=O,Z=rt,q=lt;this.data.positionMode==1&&(p*=O);let It;switch(this.data.spacingMode){case 2:It=O;break;case 3:It=O/i;break;default:It=1;}let Ht=this.segments,Oe=0;for(let xe=0,We=0,Ke=0,He=0;xe<i;xe++,We+=3){let ls=m[xe]*It;p+=ls;let ne=p;if(b)ne%=O,ne<0&&(ne+=O),Ke=0;else if(ne<0){this.addBeforePosition(ne,w,0,g,We);continue}else if(ne>O){this.addAfterPosition(ne-O,w,C-4,g,We);continue}for(;;Ke++){let ze=N[Ke];if(!(ne>ze)){if(Ke==0)ne/=ze;else {let _e=N[Ke-1];ne=(ne-_e)/(ze-_e);}break}}if(Ke!=L){L=Ke;let ze=Ke*6;for(Z=w[ze],q=w[ze+1],j=w[ze+2],_=w[ze+3],H=w[ze+4],K=w[ze+5],rt=w[ze+6],lt=w[ze+7],vt=(Z-j*2+H)*.03,pt=(q-_*2+K)*.03,xt=((j-H)*3-Z+rt)*.006,Et=((_-K)*3-q+lt)*.006,Ft=vt*2+xt,Vt=pt*2+Et,Ut=(j-Z)*.3+vt+xt*.16666667,St=(_-q)*.3+pt+Et*.16666667,Oe=Math.sqrt(Ut*Ut+St*St),Ht[0]=Oe,ze=1;ze<8;ze++)Ut+=Ft,St+=Vt,Ft+=xt,Vt+=Et,Oe+=Math.sqrt(Ut*Ut+St*St),Ht[ze]=Oe;Ut+=Ft,St+=Vt,Oe+=Math.sqrt(Ut*Ut+St*St),Ht[8]=Oe,Ut+=Ft+xt,St+=Vt+Et,Oe+=Math.sqrt(Ut*Ut+St*St),Ht[9]=Oe,He=0;}for(ne*=Oe;;He++){let ze=Ht[He];if(!(ne>ze)){if(He==0)ne/=ze;else {let _e=Ht[He-1];ne=He+(ne-_e)/(ze-_e);}break}}this.addCurvePosition(ne*.1,Z,q,j,_,H,K,rt,lt,g,We,o||xe>0&&ls==0);}return g}addBeforePosition(e,i,o,a,p){let m=i[o],g=i[o+1],w=i[o+2]-m,b=i[o+3]-g,C=Math.atan2(b,w);a[p]=m+e*Math.cos(C),a[p+1]=g+e*Math.sin(C),a[p+2]=C;}addAfterPosition(e,i,o,a,p){let m=i[o+2],g=i[o+3],w=m-i[o],b=g-i[o+1],C=Math.atan2(b,w);a[p]=m+e*Math.cos(C),a[p+1]=g+e*Math.sin(C),a[p+2]=C;}addCurvePosition(e,i,o,a,p,m,g,w,b,C,F,L){if(e==0||isNaN(e)){C[F]=i,C[F+1]=o,C[F+2]=Math.atan2(p-o,a-i);return}let N=e*e,O=N*e,Z=1-e,q=Z*Z,j=q*Z,_=Z*e,H=_*3,K=Z*H,rt=H*e,lt=i*j+a*K+m*rt+w*O,vt=o*j+p*K+g*rt+b*O;C[F]=lt,C[F+1]=vt,L&&(e<.001?C[F+2]=Math.atan2(p-o,a-i):C[F+2]=Math.atan2(vt-(o*q+p*_*2+g*N),lt-(i*q+a*_*2+m*N)));}},_r=class{data;_bone=null;set bone(s){this._bone=s;}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}inertia=0;strength=0;damping=0;massInverse=0;wind=0;gravity=0;mix=0;_reset=true;ux=0;uy=0;cx=0;cy=0;tx=0;ty=0;xOffset=0;xVelocity=0;yOffset=0;yVelocity=0;rotateOffset=0;rotateVelocity=0;scaleOffset=0;scaleVelocity=0;active=false;skeleton;remaining=0;lastTime=0;constructor(s,e){this.data=s,this.skeleton=e,this.bone=e.bones[s.bone.index],this.inertia=s.inertia,this.strength=s.strength,this.damping=s.damping,this.massInverse=s.massInverse,this.wind=s.wind,this.gravity=s.gravity,this.mix=s.mix;}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=true,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0;}setToSetupPose(){let s=this.data;this.inertia=s.inertia,this.strength=s.strength,this.damping=s.damping,this.massInverse=s.massInverse,this.wind=s.wind,this.gravity=s.gravity,this.mix=s.mix;}isActive(){return this.active}update(s){let e=this.mix;if(e==0)return;let i=this.data.x>0,o=this.data.y>0,a=this.data.rotate>0||this.data.shearX>0,p=this.data.scaleX>0,m=this.bone,g=m.data.length;switch(s){case 0:return;case 1:this.reset();case 2:let w=this.skeleton,b=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=b,this.lastTime=w.time;let C=m.worldX,F=m.worldY;if(this._reset)this._reset=false,this.ux=C,this.uy=F;else {let L=this.remaining,N=this.inertia,O=this.data.step,Z=this.skeleton.data.referenceScale,q=-1,j=this.data.limit*b,_=j*Math.abs(w.scaleY);if(j*=Math.abs(w.scaleX),i||o){if(i){let H=(this.ux-C)*N;this.xOffset+=H>j?j:H<-j?-j:H,this.ux=C;}if(o){let H=(this.uy-F)*N;this.yOffset+=H>_?_:H<-_?-_:H,this.uy=F;}if(L>=O){q=Math.pow(this.damping,60*O);let H=this.massInverse*O,K=this.strength,rt=this.wind*Z*w.scaleX,lt=this.gravity*Z*w.scaleY;do i&&(this.xVelocity+=(rt-this.xOffset*K)*H,this.xOffset+=this.xVelocity*O,this.xVelocity*=q),o&&(this.yVelocity-=(lt+this.yOffset*K)*H,this.yOffset+=this.yVelocity*O,this.yVelocity*=q),L-=O;while(L>=O)}i&&(m.worldX+=this.xOffset*e*this.data.x),o&&(m.worldY+=this.yOffset*e*this.data.y);}if(a||p){let H=Math.atan2(m.c,m.a),K=0,rt=0,lt=0,vt=this.cx-m.worldX,pt=this.cy-m.worldY;if(vt>j?vt=j:vt<-j&&(vt=-j),pt>_?pt=_:pt<-_&&(pt=-_),a){lt=(this.data.rotate+this.data.shearX)*e;let xt=Math.atan2(pt+this.ty,vt+this.tx)-H-this.rotateOffset*lt;this.rotateOffset+=(xt-Math.ceil(xt*I.invPI2-.5)*I.PI2)*N,xt=this.rotateOffset*lt+H,K=Math.cos(xt),rt=Math.sin(xt),p&&(xt=g*m.getWorldScaleX(),xt>0&&(this.scaleOffset+=(vt*K+pt*rt)*N/xt));}else {K=Math.cos(H),rt=Math.sin(H);let xt=g*m.getWorldScaleX();xt>0&&(this.scaleOffset+=(vt*K+pt*rt)*N/xt);}if(L=this.remaining,L>=O){q==-1&&(q=Math.pow(this.damping,60*O));let xt=this.massInverse*O,Et=this.strength,Ft=this.wind,Vt=this.gravity,Ut=g/Z;for(;;)if(L-=O,p&&(this.scaleVelocity+=(Ft*K-Vt*rt-this.scaleOffset*Et)*xt,this.scaleOffset+=this.scaleVelocity*O,this.scaleVelocity*=q),a){if(this.rotateVelocity-=((Ft*rt+Vt*K)*Ut+this.rotateOffset*Et)*xt,this.rotateOffset+=this.rotateVelocity*O,this.rotateVelocity*=q,L<O)break;let St=this.rotateOffset*lt+H;K=Math.cos(St),rt=Math.sin(St);}else if(L<O)break}}this.remaining=L;}this.cx=m.worldX,this.cy=m.worldY;break;case 3:i&&(m.worldX+=this.xOffset*e*this.data.x),o&&(m.worldY+=this.yOffset*e*this.data.y);}if(a){let w=this.rotateOffset*e,b=0,C=0,F=0;if(this.data.shearX>0){let L=0;this.data.rotate>0&&(L=w*this.data.rotate,b=Math.sin(L),C=Math.cos(L),F=m.b,m.b=C*F-b*m.d,m.d=b*F+C*m.d),L+=w*this.data.shearX,b=Math.sin(L),C=Math.cos(L),F=m.a,m.a=C*F-b*m.c,m.c=b*F+C*m.c;}else w*=this.data.rotate,b=Math.sin(w),C=Math.cos(w),F=m.a,m.a=C*F-b*m.c,m.c=b*F+C*m.c,F=m.b,m.b=C*F-b*m.d,m.d=b*F+C*m.d;}if(p){let w=1+this.scaleOffset*e*this.data.scaleX;m.a*=w,m.c*=w;}s!=3&&(this.tx=g*m.a,this.ty=g*m.c),m.updateAppliedTransform();}translate(s,e){this.ux-=s,this.uy-=e,this.cx-=s,this.cy-=e;}rotate(s,e,i){let o=i*I.degRad,a=Math.cos(o),p=Math.sin(o),m=this.cx-s,g=this.cy-e;this.translate(m*a-g*p-m,m*p+g*a-g);}},Qr=class{data;bone;color;darkColor=null;attachment=null;attachmentState=0;sequenceIndex=-1;deform=new Array;constructor(s,e){if(!s)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=s,this.bone=e,this.color=new V,this.darkColor=s.darkColor?new V:null,this.setToSetupPose();}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(s){this.attachment!=s&&((!(s instanceof it)||!(this.attachment instanceof it)||s.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=s,this.sequenceIndex=-1);}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null;}},Kr=class{data;bones;target;mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;temp=new st;active=false;constructor(s,e){if(!s)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=s,this.bones=new Array;for(let o=0;o<s.bones.length;o++){let a=e.findBone(s.bones[o].name);if(!a)throw new Error(`Couldn't find bone ${s.bones[o].name}.`);this.bones.push(a);}let i=e.findBone(s.target.name);if(!i)throw new Error(`Couldn't find target bone ${s.target.name}.`);this.target=i,this.mixRotate=s.mixRotate,this.mixX=s.mixX,this.mixY=s.mixY,this.mixScaleX=s.mixScaleX,this.mixScaleY=s.mixScaleY,this.mixShearY=s.mixShearY;}isActive(){return this.active}setToSetupPose(){let s=this.data;this.mixRotate=s.mixRotate,this.mixX=s.mixX,this.mixY=s.mixY,this.mixScaleX=s.mixScaleX,this.mixScaleY=s.mixScaleY,this.mixShearY=s.mixShearY;}update(s){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld());}applyAbsoluteWorld(){let s=this.mixRotate,e=this.mixX,i=this.mixY,o=this.mixScaleX,a=this.mixScaleY,p=this.mixShearY,m=e!=0||i!=0,g=this.target,w=g.a,b=g.b,C=g.c,F=g.d,L=w*F-b*C>0?I.degRad:-0.01745329277777778,N=this.data.offsetRotation*L,O=this.data.offsetShearY*L,Z=this.bones;for(let q=0,j=Z.length;q<j;q++){let _=Z[q];if(s!=0){let H=_.a,K=_.b,rt=_.c,lt=_.d,vt=Math.atan2(C,w)-Math.atan2(rt,H)+N;vt>I.PI?vt-=I.PI2:vt<-3.1415927&&(vt+=I.PI2),vt*=s;let pt=Math.cos(vt),xt=Math.sin(vt);_.a=pt*H-xt*rt,_.b=pt*K-xt*lt,_.c=xt*H+pt*rt,_.d=xt*K+pt*lt;}if(m){let H=this.temp;g.localToWorld(H.set(this.data.offsetX,this.data.offsetY)),_.worldX+=(H.x-_.worldX)*e,_.worldY+=(H.y-_.worldY)*i;}if(o!=0){let H=Math.sqrt(_.a*_.a+_.c*_.c);H!=0&&(H=(H+(Math.sqrt(w*w+C*C)-H+this.data.offsetScaleX)*o)/H),_.a*=H,_.c*=H;}if(a!=0){let H=Math.sqrt(_.b*_.b+_.d*_.d);H!=0&&(H=(H+(Math.sqrt(b*b+F*F)-H+this.data.offsetScaleY)*a)/H),_.b*=H,_.d*=H;}if(p>0){let H=_.b,K=_.d,rt=Math.atan2(K,H),lt=Math.atan2(F,b)-Math.atan2(C,w)-(rt-Math.atan2(_.c,_.a));lt>I.PI?lt-=I.PI2:lt<-3.1415927&&(lt+=I.PI2),lt=rt+(lt+O)*p;let vt=Math.sqrt(H*H+K*K);_.b=Math.cos(lt)*vt,_.d=Math.sin(lt)*vt;}_.updateAppliedTransform();}}applyRelativeWorld(){let s=this.mixRotate,e=this.mixX,i=this.mixY,o=this.mixScaleX,a=this.mixScaleY,p=this.mixShearY,m=e!=0||i!=0,g=this.target,w=g.a,b=g.b,C=g.c,F=g.d,L=w*F-b*C>0?I.degRad:-0.01745329277777778,N=this.data.offsetRotation*L,O=this.data.offsetShearY*L,Z=this.bones;for(let q=0,j=Z.length;q<j;q++){let _=Z[q];if(s!=0){let H=_.a,K=_.b,rt=_.c,lt=_.d,vt=Math.atan2(C,w)+N;vt>I.PI?vt-=I.PI2:vt<-3.1415927&&(vt+=I.PI2),vt*=s;let pt=Math.cos(vt),xt=Math.sin(vt);_.a=pt*H-xt*rt,_.b=pt*K-xt*lt,_.c=xt*H+pt*rt,_.d=xt*K+pt*lt;}if(m){let H=this.temp;g.localToWorld(H.set(this.data.offsetX,this.data.offsetY)),_.worldX+=H.x*e,_.worldY+=H.y*i;}if(o!=0){let H=(Math.sqrt(w*w+C*C)-1+this.data.offsetScaleX)*o+1;_.a*=H,_.c*=H;}if(a!=0){let H=(Math.sqrt(b*b+F*F)-1+this.data.offsetScaleY)*a+1;_.b*=H,_.d*=H;}if(p>0){let H=Math.atan2(F,b)-Math.atan2(C,w);H>I.PI?H-=I.PI2:H<-3.1415927&&(H+=I.PI2);let K=_.b,rt=_.d;H=Math.atan2(rt,K)+(H-I.PI/2+O)*p;let lt=Math.sqrt(K*K+rt*rt);_.b=Math.cos(H)*lt,_.d=Math.sin(H)*lt;}_.updateAppliedTransform();}}applyAbsoluteLocal(){let s=this.mixRotate,e=this.mixX,i=this.mixY,o=this.mixScaleX,a=this.mixScaleY,p=this.mixShearY,m=this.target,g=this.bones;for(let w=0,b=g.length;w<b;w++){let C=g[w],F=C.arotation;s!=0&&(F+=(m.arotation-F+this.data.offsetRotation)*s);let L=C.ax,N=C.ay;L+=(m.ax-L+this.data.offsetX)*e,N+=(m.ay-N+this.data.offsetY)*i;let O=C.ascaleX,Z=C.ascaleY;o!=0&&O!=0&&(O=(O+(m.ascaleX-O+this.data.offsetScaleX)*o)/O),a!=0&&Z!=0&&(Z=(Z+(m.ascaleY-Z+this.data.offsetScaleY)*a)/Z);let q=C.ashearY;p!=0&&(q+=(m.ashearY-q+this.data.offsetShearY)*p),C.updateWorldTransformWith(L,N,F,O,Z,C.ashearX,q);}}applyRelativeLocal(){let s=this.mixRotate,e=this.mixX,i=this.mixY,o=this.mixScaleX,a=this.mixScaleY,p=this.mixShearY,m=this.target,g=this.bones;for(let w=0,b=g.length;w<b;w++){let C=g[w],F=C.arotation+(m.arotation+this.data.offsetRotation)*s,L=C.ax+(m.ax+this.data.offsetX)*e,N=C.ay+(m.ay+this.data.offsetY)*i,O=C.ascaleX*((m.ascaleX-1+this.data.offsetScaleX)*o+1),Z=C.ascaleY*((m.ascaleY-1+this.data.offsetScaleY)*a+1),q=C.ashearY+(m.ashearY+this.data.offsetShearY)*p;C.updateWorldTransformWith(L,N,F,O,Z,C.ashearX,q);}}},qs=class Kn{static quadTriangles=[0,1,2,2,3,0];static yDown=false;data;bones;slots;drawOrder;ikConstraints;transformConstraints;pathConstraints;physicsConstraints;_updateCache=new Array;skin=null;color;scaleX=1;_scaleY=1;get scaleY(){return Kn.yDown?-this._scaleY:this._scaleY}set scaleY(e){this._scaleY=e;}x=0;y=0;time=0;constructor(e){if(!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(let i=0;i<e.bones.length;i++){let o=e.bones[i],a;if(!o.parent)a=new ms(o,this,null);else {let p=this.bones[o.parent.index];a=new ms(o,this,p),p.children.push(a);}this.bones.push(a);}this.slots=new Array,this.drawOrder=new Array;for(let i=0;i<e.slots.length;i++){let o=e.slots[i],a=this.bones[o.boneData.index],p=new Qr(o,a);this.slots.push(p),this.drawOrder.push(p);}this.ikConstraints=new Array;for(let i=0;i<e.ikConstraints.length;i++){let o=e.ikConstraints[i];this.ikConstraints.push(new $i(o,this));}this.transformConstraints=new Array;for(let i=0;i<e.transformConstraints.length;i++){let o=e.transformConstraints[i];this.transformConstraints.push(new Kr(o,this));}this.pathConstraints=new Array;for(let i=0;i<e.pathConstraints.length;i++){let o=e.pathConstraints[i];this.pathConstraints.push(new Jr(o,this));}this.physicsConstraints=new Array;for(let i=0;i<e.physicsConstraints.length;i++){let o=e.physicsConstraints[i];this.physicsConstraints.push(new _r(o,this));}this.color=new V(1,1,1,1),this.updateCache();}updateCache(){let e=this._updateCache;e.length=0;let i=this.bones;for(let L=0,N=i.length;L<N;L++){let O=i[L];O.sorted=O.data.skinRequired,O.active=!O.sorted;}if(this.skin){let L=this.skin.bones;for(let N=0,O=this.skin.bones.length;N<O;N++){let Z=this.bones[L[N].index];do Z.sorted=false,Z.active=true,Z=Z.parent;while(Z)}}let o=this.ikConstraints,a=this.transformConstraints,p=this.pathConstraints,m=this.physicsConstraints,g=o.length,w=a.length,b=p.length,C=this.physicsConstraints.length,F=g+w+b+C;t:for(let L=0;L<F;L++){for(let N=0;N<g;N++){let O=o[N];if(O.data.order==L){this.sortIkConstraint(O);continue t}}for(let N=0;N<w;N++){let O=a[N];if(O.data.order==L){this.sortTransformConstraint(O);continue t}}for(let N=0;N<b;N++){let O=p[N];if(O.data.order==L){this.sortPathConstraint(O);continue t}}for(let N=0;N<C;N++){let O=m[N];if(O.data.order==L){this.sortPhysicsConstraint(O);continue t}}}for(let L=0,N=i.length;L<N;L++)this.sortBone(i[L]);}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&X.contains(this.skin.constraints,e.data,true)),!e.active)return;let i=e.target;this.sortBone(i);let o=e.bones,a=o[0];if(this.sortBone(a),o.length==1)this._updateCache.push(e),this.sortReset(a.children);else {let p=o[o.length-1];this.sortBone(p),this._updateCache.push(e),this.sortReset(a.children),p.sorted=true;}}sortPathConstraint(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&X.contains(this.skin.constraints,e.data,true)),!e.active)return;let i=e.target,o=i.data.index,a=i.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,o,a),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,o,a);for(let w=0,b=this.data.skins.length;w<b;w++)this.sortPathConstraintAttachment(this.data.skins[w],o,a);let p=i.getAttachment();p instanceof ai&&this.sortPathConstraintAttachmentWith(p,a);let m=e.bones,g=m.length;for(let w=0;w<g;w++)this.sortBone(m[w]);this._updateCache.push(e);for(let w=0;w<g;w++)this.sortReset(m[w].children);for(let w=0;w<g;w++)m[w].sorted=true;}sortTransformConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&X.contains(this.skin.constraints,e.data,true)),!e.active)return;this.sortBone(e.target);let i=e.bones,o=i.length;if(e.data.local)for(let a=0;a<o;a++){let p=i[a];this.sortBone(p.parent),this.sortBone(p);}else for(let a=0;a<o;a++)this.sortBone(i[a]);this._updateCache.push(e);for(let a=0;a<o;a++)this.sortReset(i[a].children);for(let a=0;a<o;a++)i[a].sorted=true;}sortPathConstraintAttachment(e,i,o){let a=e.attachments[i];if(a)for(let p in a)this.sortPathConstraintAttachmentWith(a[p],o);}sortPathConstraintAttachmentWith(e,i){if(!(e instanceof ai))return;let o=e.bones;if(!o)this.sortBone(i);else {let a=this.bones;for(let p=0,m=o.length;p<m;){let g=o[p++];for(g+=p;p<g;)this.sortBone(a[o[p++]]);}}}sortPhysicsConstraint(e){let i=e.bone;e.active=i.active&&(!e.data.skinRequired||this.skin!=null&&X.contains(this.skin.constraints,e.data,true)),e.active&&(this.sortBone(i),this._updateCache.push(e),this.sortReset(i.children),i.sorted=true);}sortBone(e){if(!e||e.sorted)return;let i=e.parent;i&&this.sortBone(i),e.sorted=true,this._updateCache.push(e);}sortReset(e){for(let i=0,o=e.length;i<o;i++){let a=e[i];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=false);}}updateWorldTransform(e){if(e==null)throw new Error("physics is undefined");let i=this.bones;for(let a=0,p=i.length;a<p;a++){let m=i[a];m.ax=m.x,m.ay=m.y,m.arotation=m.rotation,m.ascaleX=m.scaleX,m.ascaleY=m.scaleY,m.ashearX=m.shearX,m.ashearY=m.shearY;}let o=this._updateCache;for(let a=0,p=o.length;a<p;a++)o[a].update(e);}updateWorldTransformWith(e,i){if(!i)throw new Error("parent cannot be null.");let o=this.bones;for(let q=1,j=o.length;q<j;q++){let _=o[q];_.ax=_.x,_.ay=_.y,_.arotation=_.rotation,_.ascaleX=_.scaleX,_.ascaleY=_.scaleY,_.ashearX=_.shearX,_.ashearY=_.shearY;}let a=this.getRootBone();if(!a)throw new Error("Root bone must not be null.");let p=i.a,m=i.b,g=i.c,w=i.d;a.worldX=p*this.x+m*this.y+i.worldX,a.worldY=g*this.x+w*this.y+i.worldY;let b=(a.rotation+a.shearX)*I.degRad,C=(a.rotation+90+a.shearY)*I.degRad,F=Math.cos(b)*a.scaleX,L=Math.cos(C)*a.scaleY,N=Math.sin(b)*a.scaleX,O=Math.sin(C)*a.scaleY;a.a=(p*F+m*N)*this.scaleX,a.b=(p*L+m*O)*this.scaleX,a.c=(g*F+w*N)*this.scaleY,a.d=(g*L+w*O)*this.scaleY;let Z=this._updateCache;for(let q=0,j=Z.length;q<j;q++){let _=Z[q];_!=a&&_.update(e);}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose();}setBonesToSetupPose(){for(let e of this.bones)e.setToSetupPose();for(let e of this.ikConstraints)e.setToSetupPose();for(let e of this.transformConstraints)e.setToSetupPose();for(let e of this.pathConstraints)e.setToSetupPose();for(let e of this.physicsConstraints)e.setToSetupPose();}setSlotsToSetupPose(){let e=this.slots;X.arrayCopy(e,0,this.drawOrder,0,e.length);for(let i=0,o=e.length;i<o;i++)e[i].setToSetupPose();}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(e){if(!e)throw new Error("boneName cannot be null.");let i=this.bones;for(let o=0,a=i.length;o<a;o++){let p=i[o];if(p.data.name==e)return p}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let i=this.slots;for(let o=0,a=i.length;o<a;o++){let p=i[o];if(p.data.name==e)return p}return null}setSkinByName(e){let i=this.data.findSkin(e);if(!i)throw new Error("Skin not found: "+e);this.setSkin(i);}setSkin(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else {let i=this.slots;for(let o=0,a=i.length;o<a;o++){let p=i[o],m=p.data.attachmentName;if(m){let g=e.getAttachment(o,m);g&&p.setAttachment(g);}}}this.skin=e,this.updateCache();}}getAttachmentByName(e,i){let o=this.data.findSlot(e);if(!o)throw new Error(`Can't find slot with name ${e}`);return this.getAttachment(o.index,i)}getAttachment(e,i){if(!i)throw new Error("attachmentName cannot be null.");if(this.skin){let o=this.skin.getAttachment(e,i);if(o)return o}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,i):null}setAttachment(e,i){if(!e)throw new Error("slotName cannot be null.");let o=this.slots;for(let a=0,p=o.length;a<p;a++){let m=o[a];if(m.data.name==e){let g=null;if(i&&(g=this.getAttachment(a,i),!g))throw new Error("Attachment not found: "+i+", for slot: "+e);m.setAttachment(g);return}}throw new Error("Slot not found: "+e)}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(i=>i.data.name==e)??null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(i=>i.data.name==e)??null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(i=>i.data.name==e)??null}findPhysicsConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(i=>i.data.name==e)??null}getBoundsRect(e){let i=new st,o=new st;return this.getBounds(i,o,void 0,e),{x:i.x,y:i.y,width:o.x,height:o.y}}getBounds(e,i,o=new Array(2),a=null){if(!e)throw new Error("offset cannot be null.");if(!i)throw new Error("size cannot be null.");let p=this.drawOrder,m=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,b=Number.NEGATIVE_INFINITY;for(let C=0,F=p.length;C<F;C++){let L=p[C];if(!L.bone.active)continue;let N=0,O=null,Z=null,q=L.getAttachment();if(q instanceof mi)N=8,O=X.setArraySize(o,N,0),q.computeWorldVertices(L,O,0,2),Z=Kn.quadTriangles;else if(q instanceof li){let j=q;N=j.worldVerticesLength,O=X.setArraySize(o,N,0),j.computeWorldVertices(L,0,N,O,0,2),Z=j.triangles;}else if(q instanceof Ps&&a!=null){a.clipStart(L,q);continue}if(O&&Z){a!=null&&a.isClipping()&&(a.clipTriangles(O,Z,Z.length),O=a.clippedVertices,N=a.clippedVertices.length);for(let j=0,_=O.length;j<_;j+=2){let H=O[j],K=O[j+1];m=Math.min(m,H),g=Math.min(g,K),w=Math.max(w,H),b=Math.max(b,K);}}a==null||a.clipEndWithSlot(L);}a==null||a.clipEnd(),e.set(m,g),i.set(w-m,b-g);}update(e){this.time+=e;}physicsTranslate(e,i){let o=this.physicsConstraints;for(let a=0,p=o.length;a<p;a++)o[a].translate(e,i);}physicsRotate(e,i,o){let a=this.physicsConstraints;for(let p=0,m=a.length;p<m;p++)a[p].rotate(e,i,o);}},Zs=(s=>(s[s.none=0]="none",s[s.reset=1]="reset",s[s.update=2]="update",s[s.pose=3]="pose",s))(Zs||{}),tr=class extends Ls{_bone=null;set bone(s){this._bone=s;}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}x=0;y=0;rotate=0;scaleX=0;shearX=0;limit=0;step=0;inertia=0;strength=0;damping=0;massInverse=0;wind=0;gravity=0;mix=0;inertiaGlobal=false;strengthGlobal=false;dampingGlobal=false;massGlobal=false;windGlobal=false;gravityGlobal=false;mixGlobal=false;constructor(s){super(s,0,false);}},Ze=class{name=null;bones=new Array;slots=new Array;skins=new Array;defaultSkin=null;events=new Array;animations=new Array;ikConstraints=new Array;transformConstraints=new Array;pathConstraints=new Array;physicsConstraints=new Array;x=0;y=0;width=0;height=0;referenceScale=100;version=null;hash=null;fps=0;imagesPath=null;audioPath=null;findBone(s){if(!s)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.name==s)return a}return null}findSlot(s){if(!s)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.name==s)return a}return null}findSkin(s){if(!s)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.name==s)return a}return null}findEvent(s){if(!s)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.name==s)return a}return null}findAnimation(s){if(!s)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.name==s)return a}return null}findIkConstraint(s){if(!s)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.name==s)return a}return null}findTransformConstraint(s){if(!s)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.name==s)return a}return null}findPathConstraint(s){if(!s)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.name==s)return a}return null}findPhysicsConstraint(s){if(!s)throw new Error("constraintName cannot be null.");let e=this.physicsConstraints;for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.name==s)return a}return null}},Cr=class{constructor(s=0,e,i){this.slotIndex=s,this.name=e,this.attachment=i;}},er=class{name;attachments=new Array;bones=Array();constraints=new Array;color=new V(.99607843,.61960787,.30980393,1);constructor(s){if(!s)throw new Error("name cannot be null.");this.name=s;}setAttachment(s,e,i){if(!i)throw new Error("attachment cannot be null.");let o=this.attachments;s>=o.length&&(o.length=s+1),o[s]||(o[s]={}),o[s][e]=i;}addSkin(s){for(let o=0;o<s.bones.length;o++){let a=s.bones[o],p=false;for(let m=0;m<this.bones.length;m++)if(this.bones[m]==a){p=true;break}p||this.bones.push(a);}for(let o=0;o<s.constraints.length;o++){let a=s.constraints[o],p=false;for(let m=0;m<this.constraints.length;m++)if(this.constraints[m]==a){p=true;break}p||this.constraints.push(a);}let e=s.getAttachments();for(let o=0;o<e.length;o++){var i=e[o];this.setAttachment(i.slotIndex,i.name,i.attachment);}}copySkin(s){for(let o=0;o<s.bones.length;o++){let a=s.bones[o],p=false;for(let m=0;m<this.bones.length;m++)if(this.bones[m]==a){p=true;break}p||this.bones.push(a);}for(let o=0;o<s.constraints.length;o++){let a=s.constraints[o],p=false;for(let m=0;m<this.constraints.length;m++)if(this.constraints[m]==a){p=true;break}p||this.constraints.push(a);}let e=s.getAttachments();for(let o=0;o<e.length;o++){var i=e[o];i.attachment&&(i.attachment instanceof li?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)));}}getAttachment(s,e){let i=this.attachments[s];return i?i[e]:null}removeAttachment(s,e){let i=this.attachments[s];i&&delete i[e];}getAttachments(){let s=new Array;for(var e=0;e<this.attachments.length;e++){let i=this.attachments[e];if(i)for(let o in i){let a=i[o];a&&s.push(new Cr(e,o,a));}}return s}getAttachmentsForSlot(s,e){let i=this.attachments[s];if(i)for(let o in i){let a=i[o];a&&e.push(new Cr(s,o,a));}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0;}attachAll(s,e){let i=0;for(let o=0;o<s.slots.length;o++){let a=s.slots[o],p=a.getAttachment();if(p&&i<e.attachments.length){let m=e.attachments[i];for(let g in m){let w=m[g];if(p==w){let b=this.getAttachment(i,g);b&&a.setAttachment(b);break}}}i++;}}},Tr=class{index=0;name;boneData;color=new V(1,1,1,1);darkColor=null;attachmentName=null;blendMode=0;visible=true;constructor(s,e,i){if(s<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=s,this.name=e,this.boneData=i;}},Ir=(s=>(s[s.Normal=0]="Normal",s[s.Additive=1]="Additive",s[s.Multiply=2]="Multiply",s[s.Screen=3]="Screen",s))(Ir||{}),Er=class extends Ls{bones=new Array;_target=null;set target(s){this._target=s;}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;offsetRotation=0;offsetX=0;offsetY=0;offsetScaleX=0;offsetScaleY=0;offsetShearY=0;relative=false;local=false;constructor(s){super(s,0,false);}},Mn=class{scale=1;attachmentLoader;linkedMeshes=new Array;constructor(s){this.attachmentLoader=s;}readSkeletonData(s){let e=this.scale,i=new Ze;i.name="";let o=new $r(s),a=o.readInt32(),p=o.readInt32();i.hash=p==0&&a==0?null:p.toString(16)+a.toString(16),i.version=o.readString(),i.x=o.readFloat(),i.y=o.readFloat(),i.width=o.readFloat(),i.height=o.readFloat(),i.referenceScale=o.readFloat()*e;let m=o.readBoolean();m&&(i.fps=o.readFloat(),i.imagesPath=o.readString(),i.audioPath=o.readString());let g=0;g=o.readInt(true);for(let b=0;b<g;b++){let C=o.readString();if(!C)throw new Error("String in string table must not be null.");o.strings.push(C);}g=o.readInt(true);for(let b=0;b<g;b++){let C=o.readString();if(!C)throw new Error("Bone name must not be null.");let F=b==0?null:i.bones[o.readInt(true)],L=new ki(b,C,F);L.rotation=o.readFloat(),L.x=o.readFloat()*e,L.y=o.readFloat()*e,L.scaleX=o.readFloat(),L.scaleY=o.readFloat(),L.shearX=o.readFloat(),L.shearY=o.readFloat(),L.length=o.readFloat()*e,L.inherit=o.readByte(),L.skinRequired=o.readBoolean(),m&&(V.rgba8888ToColor(L.color,o.readInt32()),L.icon=o.readString()??void 0,L.visible=o.readBoolean()),i.bones.push(L);}g=o.readInt(true);for(let b=0;b<g;b++){let C=o.readString();if(!C)throw new Error("Slot name must not be null.");let F=i.bones[o.readInt(true)],L=new Tr(b,C,F);V.rgba8888ToColor(L.color,o.readInt32());let N=o.readInt32();N!=-1&&V.rgb888ToColor(L.darkColor=new V,N),L.attachmentName=o.readStringRef(),L.blendMode=o.readInt(true),m&&(L.visible=o.readBoolean()),i.slots.push(L);}g=o.readInt(true);for(let b=0,C;b<g;b++){let F=o.readString();if(!F)throw new Error("IK constraint data name must not be null.");let L=new Yi(F);L.order=o.readInt(true),C=o.readInt(true);for(let O=0;O<C;O++)L.bones.push(i.bones[o.readInt(true)]);L.target=i.bones[o.readInt(true)];let N=o.readByte();L.skinRequired=(N&1)!=0,L.bendDirection=(N&2)!=0?1:-1,L.compress=(N&4)!=0,L.stretch=(N&8)!=0,L.uniform=(N&16)!=0,(N&32)!=0&&(L.mix=(N&64)!=0?o.readFloat():1),(N&128)!=0&&(L.softness=o.readFloat()*e),i.ikConstraints.push(L);}g=o.readInt(true);for(let b=0,C;b<g;b++){let F=o.readString();if(!F)throw new Error("Transform constraint data name must not be null.");let L=new Er(F);L.order=o.readInt(true),C=o.readInt(true);for(let O=0;O<C;O++)L.bones.push(i.bones[o.readInt(true)]);L.target=i.bones[o.readInt(true)];let N=o.readByte();L.skinRequired=(N&1)!=0,L.local=(N&2)!=0,L.relative=(N&4)!=0,(N&8)!=0&&(L.offsetRotation=o.readFloat()),(N&16)!=0&&(L.offsetX=o.readFloat()*e),(N&32)!=0&&(L.offsetY=o.readFloat()*e),(N&64)!=0&&(L.offsetScaleX=o.readFloat()),(N&128)!=0&&(L.offsetScaleY=o.readFloat()),N=o.readByte(),(N&1)!=0&&(L.offsetShearY=o.readFloat()),(N&2)!=0&&(L.mixRotate=o.readFloat()),(N&4)!=0&&(L.mixX=o.readFloat()),(N&8)!=0&&(L.mixY=o.readFloat()),(N&16)!=0&&(L.mixScaleX=o.readFloat()),(N&32)!=0&&(L.mixScaleY=o.readFloat()),(N&64)!=0&&(L.mixShearY=o.readFloat()),i.transformConstraints.push(L);}g=o.readInt(true);for(let b=0,C;b<g;b++){let F=o.readString();if(!F)throw new Error("Path constraint data name must not be null.");let L=new gi(F);L.order=o.readInt(true),L.skinRequired=o.readBoolean(),C=o.readInt(true);for(let O=0;O<C;O++)L.bones.push(i.bones[o.readInt(true)]);L.target=i.slots[o.readInt(true)];let N=o.readByte();L.positionMode=N&1,L.spacingMode=N>>1&3,L.rotateMode=N>>3&3,(N&128)!=0&&(L.offsetRotation=o.readFloat()),L.position=o.readFloat(),L.positionMode==0&&(L.position*=e),L.spacing=o.readFloat(),(L.spacingMode==0||L.spacingMode==1)&&(L.spacing*=e),L.mixRotate=o.readFloat(),L.mixX=o.readFloat(),L.mixY=o.readFloat(),i.pathConstraints.push(L);}g=o.readInt(true);for(let b=0,C;b<g;b++){let F=o.readString();if(!F)throw new Error("Physics constraint data name must not be null.");let L=new tr(F);L.order=o.readInt(true),L.bone=i.bones[o.readInt(true)];let N=o.readByte();L.skinRequired=(N&1)!=0,(N&2)!=0&&(L.x=o.readFloat()),(N&4)!=0&&(L.y=o.readFloat()),(N&8)!=0&&(L.rotate=o.readFloat()),(N&16)!=0&&(L.scaleX=o.readFloat()),(N&32)!=0&&(L.shearX=o.readFloat()),L.limit=((N&64)!=0?o.readFloat():5e3)*e,L.step=1/o.readUnsignedByte(),L.inertia=o.readFloat(),L.strength=o.readFloat(),L.damping=o.readFloat(),L.massInverse=(N&128)!=0?o.readFloat():1,L.wind=o.readFloat(),L.gravity=o.readFloat(),N=o.readByte(),(N&1)!=0&&(L.inertiaGlobal=true),(N&2)!=0&&(L.strengthGlobal=true),(N&4)!=0&&(L.dampingGlobal=true),(N&8)!=0&&(L.massGlobal=true),(N&16)!=0&&(L.windGlobal=true),(N&32)!=0&&(L.gravityGlobal=true),(N&64)!=0&&(L.mixGlobal=true),L.mix=(N&128)!=0?o.readFloat():1,i.physicsConstraints.push(L);}let w=this.readSkin(o,i,true,m);w&&(i.defaultSkin=w,i.skins.push(w));{let b=i.skins.length;for(X.setArraySize(i.skins,g=b+o.readInt(true));b<g;b++){let C=this.readSkin(o,i,false,m);if(!C)throw new Error("readSkin() should not have returned null.");i.skins[b]=C;}}g=this.linkedMeshes.length;for(let b=0;b<g;b++){let C=this.linkedMeshes[b],F=i.skins[C.skinIndex];if(!C.parent)throw new Error("Linked mesh parent must not be null");let L=F.getAttachment(C.slotIndex,C.parent);if(!L)throw new Error(`Parent mesh not found: ${C.parent}`);C.mesh.timelineAttachment=C.inheritTimeline?L:C.mesh,C.mesh.setParentMesh(L),C.mesh.region!=null&&C.mesh.updateRegion();}this.linkedMeshes.length=0,g=o.readInt(true);for(let b=0;b<g;b++){let C=o.readString();if(!C)throw new Error("Event data name must not be null");let F=new Sr(C);F.intValue=o.readInt(false),F.floatValue=o.readFloat(),F.stringValue=o.readString(),F.audioPath=o.readString(),F.audioPath&&(F.volume=o.readFloat(),F.balance=o.readFloat()),i.events.push(F);}g=o.readInt(true);for(let b=0;b<g;b++){let C=o.readString();if(!C)throw new Error("Animatio name must not be null.");i.animations.push(this.readAnimation(o,C,i));}return i}readSkin(s,e,i,o){let a=null,p=0;if(i){if(p=s.readInt(true),p==0)return null;a=new er("default");}else {let m=s.readString();if(!m)throw new Error("Skin name must not be null.");a=new er(m),o&&V.rgba8888ToColor(a.color,s.readInt32()),a.bones.length=s.readInt(true);for(let g=0,w=a.bones.length;g<w;g++)a.bones[g]=e.bones[s.readInt(true)];for(let g=0,w=s.readInt(true);g<w;g++)a.constraints.push(e.ikConstraints[s.readInt(true)]);for(let g=0,w=s.readInt(true);g<w;g++)a.constraints.push(e.transformConstraints[s.readInt(true)]);for(let g=0,w=s.readInt(true);g<w;g++)a.constraints.push(e.pathConstraints[s.readInt(true)]);for(let g=0,w=s.readInt(true);g<w;g++)a.constraints.push(e.physicsConstraints[s.readInt(true)]);p=s.readInt(true);}for(let m=0;m<p;m++){let g=s.readInt(true);for(let w=0,b=s.readInt(true);w<b;w++){let C=s.readStringRef();if(!C)throw new Error("Attachment name must not be null");let F=this.readAttachment(s,e,a,g,C,o);F&&a.setAttachment(g,C,F);}}return a}readAttachment(s,e,i,o,a,p){let m=this.scale,g=s.readByte(),w=(g&8)!=0?s.readStringRef():a;if(!w)throw new Error("Attachment name must not be null");switch(g&7){case 0:{let b=(g&16)!=0?s.readStringRef():null,C=(g&32)!=0?s.readInt32():4294967295,F=(g&64)!=0?this.readSequence(s):null,L=(g&128)!=0?s.readFloat():0,N=s.readFloat(),O=s.readFloat(),Z=s.readFloat(),q=s.readFloat(),j=s.readFloat(),_=s.readFloat();b||(b=w);let H=this.attachmentLoader.newRegionAttachment(i,w,b,F);return H?(H.path=b,H.x=N*m,H.y=O*m,H.scaleX=Z,H.scaleY=q,H.rotation=L,H.width=j*m,H.height=_*m,V.rgba8888ToColor(H.color,C),H.sequence=F,F==null&&H.updateRegion(),H):null}case 1:{let b=this.readVertices(s,(g&16)!=0),C=p?s.readInt32():0,F=this.attachmentLoader.newBoundingBoxAttachment(i,w);return F?(F.worldVerticesLength=b.length,F.vertices=b.vertices,F.bones=b.bones,p&&V.rgba8888ToColor(F.color,C),F):null}case 2:{let b=(g&16)!=0?s.readStringRef():w,C=(g&32)!=0?s.readInt32():4294967295,F=(g&64)!=0?this.readSequence(s):null,L=s.readInt(true),N=this.readVertices(s,(g&128)!=0),O=this.readFloatArray(s,N.length,1),Z=this.readShortArray(s,(N.length-L-2)*3),q=[],j=0,_=0;p&&(q=this.readShortArray(s,s.readInt(true)),j=s.readFloat(),_=s.readFloat()),b||(b=w);let H=this.attachmentLoader.newMeshAttachment(i,w,b,F);return H?(H.path=b,V.rgba8888ToColor(H.color,C),H.bones=N.bones,H.vertices=N.vertices,H.worldVerticesLength=N.length,H.triangles=Z,H.regionUVs=O,F==null&&H.updateRegion(),H.hullLength=L<<1,H.sequence=F,p&&(H.edges=q,H.width=j*m,H.height=_*m),H):null}case 3:{let b=(g&16)!=0?s.readStringRef():w;if(b==null)throw new Error("Path of linked mesh must not be null");let C=(g&32)!=0?s.readInt32():4294967295,F=(g&64)!=0?this.readSequence(s):null,L=(g&128)!=0,N=s.readInt(true),O=s.readStringRef(),Z=0,q=0;p&&(Z=s.readFloat(),q=s.readFloat());let j=this.attachmentLoader.newMeshAttachment(i,w,b,F);return j?(j.path=b,V.rgba8888ToColor(j.color,C),j.sequence=F,p&&(j.width=Z*m,j.height=q*m),this.linkedMeshes.push(new bn(j,N,o,O,L)),j):null}case 4:{let b=(g&16)!=0,C=(g&32)!=0,F=this.readVertices(s,(g&64)!=0),L=X.newArray(F.length/6,0);for(let Z=0,q=L.length;Z<q;Z++)L[Z]=s.readFloat()*m;let N=p?s.readInt32():0,O=this.attachmentLoader.newPathAttachment(i,w);return O?(O.closed=b,O.constantSpeed=C,O.worldVerticesLength=F.length,O.vertices=F.vertices,O.bones=F.bones,O.lengths=L,p&&V.rgba8888ToColor(O.color,N),O):null}case 5:{let b=s.readFloat(),C=s.readFloat(),F=s.readFloat(),L=p?s.readInt32():0,N=this.attachmentLoader.newPointAttachment(i,w);return N?(N.x=C*m,N.y=F*m,N.rotation=b,p&&V.rgba8888ToColor(N.color,L),N):null}case 6:{let b=s.readInt(true),C=this.readVertices(s,(g&16)!=0),F=p?s.readInt32():0,L=this.attachmentLoader.newClippingAttachment(i,w);return L?(L.endSlot=e.slots[b],L.worldVerticesLength=C.length,L.vertices=C.vertices,L.bones=C.bones,p&&V.rgba8888ToColor(L.color,F),L):null}}return null}readSequence(s){let e=new W(s.readInt(true));return e.start=s.readInt(true),e.digits=s.readInt(true),e.setupIndex=s.readInt(true),e}readVertices(s,e){let i=this.scale,o=s.readInt(true),a=new An;if(a.length=o<<1,!e)return a.vertices=this.readFloatArray(s,a.length,i),a;let p=new Array,m=new Array;for(let g=0;g<o;g++){let w=s.readInt(true);m.push(w);for(let b=0;b<w;b++)m.push(s.readInt(true)),p.push(s.readFloat()*i),p.push(s.readFloat()*i),p.push(s.readFloat());}return a.vertices=X.toFloatArray(p),a.bones=m,a}readFloatArray(s,e,i){let o=new Array(e);if(i==1)for(let a=0;a<e;a++)o[a]=s.readFloat();else for(let a=0;a<e;a++)o[a]=s.readFloat()*i;return o}readShortArray(s,e){let i=new Array(e);for(let o=0;o<e;o++)i[o]=s.readInt(true);return i}readAnimation(s,e,i){s.readInt(true);let o=new Array,a=this.scale;for(let w=0,b=s.readInt(true);w<b;w++){let C=s.readInt(true);for(let F=0,L=s.readInt(true);F<L;F++){let N=s.readByte(),O=s.readInt(true),Z=O-1;switch(N){case sr:{let q=new Qe(O,C);for(let j=0;j<O;j++)q.setFrame(j,s.readFloat(),s.readStringRef());o.push(q);break}case Yn:{let q=s.readInt(true),j=new se(O,q,C),_=s.readFloat(),H=s.readUnsignedByte()/255,K=s.readUnsignedByte()/255,rt=s.readUnsignedByte()/255,lt=s.readUnsignedByte()/255;for(let vt=0,pt=0;j.setFrame(vt,_,H,K,rt,lt),vt!=Z;vt++){let xt=s.readFloat(),Et=s.readUnsignedByte()/255,Ft=s.readUnsignedByte()/255,Vt=s.readUnsignedByte()/255,Ut=s.readUnsignedByte()/255;switch(s.readByte()){case Vs:j.setStepped(vt);break;case gs:je(s,j,pt++,vt,0,_,xt,H,Et,1),je(s,j,pt++,vt,1,_,xt,K,Ft,1),je(s,j,pt++,vt,2,_,xt,rt,Vt,1),je(s,j,pt++,vt,3,_,xt,lt,Ut,1);}_=xt,H=Et,K=Ft,rt=Vt,lt=Ut;}o.push(j);break}case Fn:{let q=s.readInt(true),j=new Kt(O,q,C),_=s.readFloat(),H=s.readUnsignedByte()/255,K=s.readUnsignedByte()/255,rt=s.readUnsignedByte()/255;for(let lt=0,vt=0;j.setFrame(lt,_,H,K,rt),lt!=Z;lt++){let pt=s.readFloat(),xt=s.readUnsignedByte()/255,Et=s.readUnsignedByte()/255,Ft=s.readUnsignedByte()/255;switch(s.readByte()){case Vs:j.setStepped(lt);break;case gs:je(s,j,vt++,lt,0,_,pt,H,xt,1),je(s,j,vt++,lt,1,_,pt,K,Et,1),je(s,j,vt++,lt,2,_,pt,rt,Ft,1);}_=pt,H=xt,K=Et,rt=Ft;}o.push(j);break}case js:{let q=s.readInt(true),j=new $e(O,q,C),_=s.readFloat(),H=s.readUnsignedByte()/255,K=s.readUnsignedByte()/255,rt=s.readUnsignedByte()/255,lt=s.readUnsignedByte()/255,vt=s.readUnsignedByte()/255,pt=s.readUnsignedByte()/255,xt=s.readUnsignedByte()/255;for(let Et=0,Ft=0;j.setFrame(Et,_,H,K,rt,lt,vt,pt,xt),Et!=Z;Et++){let Vt=s.readFloat(),Ut=s.readUnsignedByte()/255,St=s.readUnsignedByte()/255,It=s.readUnsignedByte()/255,Ht=s.readUnsignedByte()/255,Oe=s.readUnsignedByte()/255,xe=s.readUnsignedByte()/255,We=s.readUnsignedByte()/255;switch(s.readByte()){case Vs:j.setStepped(Et);break;case gs:je(s,j,Ft++,Et,0,_,Vt,H,Ut,1),je(s,j,Ft++,Et,1,_,Vt,K,St,1),je(s,j,Ft++,Et,2,_,Vt,rt,It,1),je(s,j,Ft++,Et,3,_,Vt,lt,Ht,1),je(s,j,Ft++,Et,4,_,Vt,vt,Oe,1),je(s,j,Ft++,Et,5,_,Vt,pt,xe,1),je(s,j,Ft++,Et,6,_,Vt,xt,We,1);}_=Vt,H=Ut,K=St,rt=It,lt=Ht,vt=Oe,pt=xe,xt=We;}o.push(j);break}case kr:{let q=s.readInt(true),j=new Te(O,q,C),_=s.readFloat(),H=s.readUnsignedByte()/255,K=s.readUnsignedByte()/255,rt=s.readUnsignedByte()/255,lt=s.readUnsignedByte()/255,vt=s.readUnsignedByte()/255,pt=s.readUnsignedByte()/255;for(let xt=0,Et=0;j.setFrame(xt,_,H,K,rt,lt,vt,pt),xt!=Z;xt++){let Ft=s.readFloat(),Vt=s.readUnsignedByte()/255,Ut=s.readUnsignedByte()/255,St=s.readUnsignedByte()/255,It=s.readUnsignedByte()/255,Ht=s.readUnsignedByte()/255,Oe=s.readUnsignedByte()/255;switch(s.readByte()){case Vs:j.setStepped(xt);break;case gs:je(s,j,Et++,xt,0,_,Ft,H,Vt,1),je(s,j,Et++,xt,1,_,Ft,K,Ut,1),je(s,j,Et++,xt,2,_,Ft,rt,St,1),je(s,j,Et++,xt,3,_,Ft,lt,It,1),je(s,j,Et++,xt,4,_,Ft,vt,Ht,1),je(s,j,Et++,xt,5,_,Ft,pt,Oe,1);}_=Ft,H=Vt,K=Ut,rt=St,lt=It,vt=Ht,pt=Oe;}o.push(j);break}case Je:{let q=new De(O,s.readInt(true),C),j=s.readFloat(),_=s.readUnsignedByte()/255;for(let H=0,K=0;q.setFrame(H,j,_),H!=Z;H++){let rt=s.readFloat(),lt=s.readUnsignedByte()/255;switch(s.readByte()){case Vs:q.setStepped(H);break;case gs:je(s,q,K++,H,0,j,rt,_,lt,1);}j=rt,_=lt;}o.push(q);}}}}for(let w=0,b=s.readInt(true);w<b;w++){let C=s.readInt(true);for(let F=0,L=s.readInt(true);F<L;F++){let N=s.readByte(),O=s.readInt(true);if(N==Rs){let q=new _t(O,C);for(let j=0;j<O;j++)q.setFrame(j,s.readFloat(),s.readByte());o.push(q);continue}let Z=s.readInt(true);switch(N){case Sn:o.push(Ts(s,new wt(O,Z,C),1));break;case Cn:o.push(Rr(s,new yt(O,Z,C),a));break;case Tn:o.push(Ts(s,new Xt(O,Z,C),a));break;case In:o.push(Ts(s,new Dt(O,Z,C),a));break;case En:o.push(Rr(s,new Lt(O,Z,C),1));break;case Rn:o.push(Ts(s,new Bt(O,Z,C),1));break;case kn:o.push(Ts(s,new zt(O,Z,C),1));break;case Xs:o.push(Rr(s,new Yt(O,Z,C),1));break;case Bs:o.push(Ts(s,new Tt(O,Z,C),1));break;case tn:o.push(Ts(s,new bt(O,Z,C),1));}}}for(let w=0,b=s.readInt(true);w<b;w++){let C=s.readInt(true),F=s.readInt(true),L=F-1,N=new as(F,s.readInt(true),C),O=s.readByte(),Z=s.readFloat(),q=(O&1)!=0?(O&2)!=0?s.readFloat():1:0,j=(O&4)!=0?s.readFloat()*a:0;for(let _=0,H=0;N.setFrame(_,Z,q,j,(O&8)!=0?1:-1,(O&16)!=0,(O&32)!=0),_!=L;_++){O=s.readByte();let K=s.readFloat(),rt=(O&1)!=0?(O&2)!=0?s.readFloat():1:0,lt=(O&4)!=0?s.readFloat()*a:0;(O&64)!=0?N.setStepped(_):(O&128)!=0&&(je(s,N,H++,_,0,Z,K,q,rt,1),je(s,N,H++,_,1,Z,K,j,lt,a)),Z=K,q=rt,j=lt;}o.push(N);}for(let w=0,b=s.readInt(true);w<b;w++){let C=s.readInt(true),F=s.readInt(true),L=F-1,N=new xs(F,s.readInt(true),C),O=s.readFloat(),Z=s.readFloat(),q=s.readFloat(),j=s.readFloat(),_=s.readFloat(),H=s.readFloat(),K=s.readFloat();for(let rt=0,lt=0;N.setFrame(rt,O,Z,q,j,_,H,K),rt!=L;rt++){let vt=s.readFloat(),pt=s.readFloat(),xt=s.readFloat(),Et=s.readFloat(),Ft=s.readFloat(),Vt=s.readFloat(),Ut=s.readFloat();switch(s.readByte()){case Vs:N.setStepped(rt);break;case gs:je(s,N,lt++,rt,0,O,vt,Z,pt,1),je(s,N,lt++,rt,1,O,vt,q,xt,1),je(s,N,lt++,rt,2,O,vt,j,Et,1),je(s,N,lt++,rt,3,O,vt,_,Ft,1),je(s,N,lt++,rt,4,O,vt,H,Vt,1),je(s,N,lt++,rt,5,O,vt,K,Ut,1);}O=vt,Z=pt,q=xt,j=Et,_=Ft,H=Vt,K=Ut;}o.push(N);}for(let w=0,b=s.readInt(true);w<b;w++){let C=s.readInt(true),F=i.pathConstraints[C];for(let L=0,N=s.readInt(true);L<N;L++){let O=s.readByte(),Z=s.readInt(true),q=s.readInt(true);switch(O){case en:o.push(Ts(s,new os(Z,q,C),F.positionMode==0?a:1));break;case sn:o.push(Ts(s,new cs(Z,q,C),F.spacingMode==0||F.spacingMode==1?a:1));break;case Is:let j=new ts(Z,q,C),_=s.readFloat(),H=s.readFloat(),K=s.readFloat(),rt=s.readFloat();for(let lt=0,vt=0,pt=j.getFrameCount()-1;j.setFrame(lt,_,H,K,rt),lt!=pt;lt++){let xt=s.readFloat(),Et=s.readFloat(),Ft=s.readFloat(),Vt=s.readFloat();switch(s.readByte()){case Vs:j.setStepped(lt);break;case gs:je(s,j,vt++,lt,0,_,xt,H,Et,1),je(s,j,vt++,lt,1,_,xt,K,Ft,1),je(s,j,vt++,lt,2,_,xt,rt,Vt,1);}_=xt,H=Et,K=Ft,rt=Vt;}o.push(j);}}}for(let w=0,b=s.readInt(true);w<b;w++){let C=s.readInt(true)-1;for(let F=0,L=s.readInt(true);F<L;F++){let N=s.readByte(),O=s.readInt(true);if(N==Li){let q=new Ci(O,C);for(let j=0;j<O;j++)q.setFrame(j,s.readFloat());o.push(q);continue}let Z=s.readInt(true);switch(N){case pi:o.push(Ts(s,new is(O,Z,C),1));break;case Ln:o.push(Ts(s,new Us(O,Z,C),1));break;case rn:o.push(Ts(s,new Ss(O,Z,C),1));break;case ir:o.push(Ts(s,new Es(O,Z,C),1));break;case Xn:o.push(Ts(s,new ys(O,Z,C),1));break;case rr:o.push(Ts(s,new ks(O,Z,C),1));break;case Yr:o.push(Ts(s,new Ws(O,Z,C),1));}}}for(let w=0,b=s.readInt(true);w<b;w++){let C=i.skins[s.readInt(true)];for(let F=0,L=s.readInt(true);F<L;F++){let N=s.readInt(true);for(let O=0,Z=s.readInt(true);O<Z;O++){let q=s.readStringRef();if(!q)throw new Error("attachmentName must not be null.");let j=C.getAttachment(N,q),_=s.readByte(),H=s.readInt(true),K=H-1;switch(_){case Pt:{let rt=j,lt=rt.bones,vt=rt.vertices,pt=lt?vt.length/3*2:vt.length,xt=s.readInt(true),Et=new ss(H,xt,N,rt),Ft=s.readFloat();for(let Vt=0,Ut=0;;Vt++){let St,It=s.readInt(true);if(It==0)St=lt?X.newFloatArray(pt):vt;else {St=X.newFloatArray(pt);let Oe=s.readInt(true);if(It+=Oe,a==1)for(let xe=Oe;xe<It;xe++)St[xe]=s.readFloat();else for(let xe=Oe;xe<It;xe++)St[xe]=s.readFloat()*a;if(!lt)for(let xe=0,We=St.length;xe<We;xe++)St[xe]+=vt[xe];}if(Et.setFrame(Vt,Ft,St),Vt==K)break;let Ht=s.readFloat();switch(s.readByte()){case Vs:Et.setStepped(Vt);break;case gs:je(s,Et,Ut++,Vt,0,Ft,Ht,0,1,1);}Ft=Ht;}o.push(Et);break}case Pn:{let rt=new Zi(H,N,j);for(let lt=0;lt<H;lt++){let vt=s.readFloat(),pt=s.readInt32();rt.setFrame(lt,vt,ft[pt&15],pt>>4,s.readFloat());}o.push(rt);break}}}}}let p=s.readInt(true);if(p>0){let w=new hs(p),b=i.slots.length;for(let C=0;C<p;C++){let F=s.readFloat(),L=s.readInt(true),N=X.newArray(b,0);for(let j=b-1;j>=0;j--)N[j]=-1;let O=X.newArray(b-L,0),Z=0,q=0;for(let j=0;j<L;j++){let _=s.readInt(true);for(;Z!=_;)O[q++]=Z++;N[Z+s.readInt(true)]=Z++;}for(;Z<b;)O[q++]=Z++;for(let j=b-1;j>=0;j--)N[j]==-1&&(N[j]=O[--q]);w.setFrame(C,F,N);}o.push(w);}let m=s.readInt(true);if(m>0){let w=new us(m);for(let b=0;b<m;b++){let C=s.readFloat(),F=i.events[s.readInt(true)],L=new Ki(C,F);L.intValue=s.readInt(false),L.floatValue=s.readFloat(),L.stringValue=s.readString(),L.stringValue==null&&(L.stringValue=F.stringValue),L.data.audioPath&&(L.volume=s.readFloat(),L.balance=s.readFloat()),w.setFrame(b,L);}o.push(w);}let g=0;for(let w=0,b=o.length;w<b;w++)g=Math.max(g,o[w].getDuration());return new at(e,o,g)}},$r=class{constructor(s,e=new Array,i=0,o=new DataView(s instanceof ArrayBuffer?s:s.buffer)){this.strings=e,this.index=i,this.buffer=o;}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let s=this.buffer.getInt16(this.index);return this.index+=2,s}readInt32(){let s=this.buffer.getInt32(this.index);return this.index+=4,s}readInt(s){let e=this.readByte(),i=e&127;return (e&128)!=0&&(e=this.readByte(),i|=(e&127)<<7,(e&128)!=0&&(e=this.readByte(),i|=(e&127)<<14,(e&128)!=0&&(e=this.readByte(),i|=(e&127)<<21,(e&128)!=0&&(e=this.readByte(),i|=(e&127)<<28)))),s?i:i>>>1^-(i&1)}readStringRef(){let s=this.readInt(true);return s==0?null:this.strings[s-1]}readString(){let s=this.readInt(true);switch(s){case 0:return null;case 1:return ""}s--;let e="";for(let o=0;o<s;){let a=this.readUnsignedByte();switch(a>>4){case 12:case 13:e+=String.fromCharCode((a&31)<<6|this.readByte()&63),o+=2;break;case 14:e+=String.fromCharCode((a&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),o+=3;break;default:e+=String.fromCharCode(a),o++;}}return e}readFloat(){let s=this.buffer.getFloat32(this.index);return this.index+=4,s}readBoolean(){return this.readByte()!=0}},bn=class{parent;skinIndex;slotIndex;mesh;inheritTimeline;constructor(s,e,i,o,a){this.mesh=s,this.skinIndex=e,this.slotIndex=i,this.parent=o,this.inheritTimeline=a;}},An=class{constructor(s=null,e=null,i=0){this.bones=s,this.vertices=e,this.length=i;}};function Ts(s,e,i){let o=s.readFloat(),a=s.readFloat()*i;for(let p=0,m=0,g=e.getFrameCount()-1;e.setFrame(p,o,a),p!=g;p++){let w=s.readFloat(),b=s.readFloat()*i;switch(s.readByte()){case Vs:e.setStepped(p);break;case gs:je(s,e,m++,p,0,o,w,a,b,i);}o=w,a=b;}return e}function Rr(s,e,i){let o=s.readFloat(),a=s.readFloat()*i,p=s.readFloat()*i;for(let m=0,g=0,w=e.getFrameCount()-1;e.setFrame(m,o,a,p),m!=w;m++){let b=s.readFloat(),C=s.readFloat()*i,F=s.readFloat()*i;switch(s.readByte()){case Vs:e.setStepped(m);break;case gs:je(s,e,g++,m,0,o,b,a,C,i),je(s,e,g++,m,1,o,b,p,F,i);}o=b,a=C,p=F;}return e}function je(s,e,i,o,a,p,m,g,w,b){e.setBezier(i,o,a,p,g,s.readFloat(),s.readFloat()*b,s.readFloat(),s.readFloat()*b,m,w);}var Sn=0,Cn=1,Tn=2,In=3,En=4,Rn=5,kn=6,Xs=7,Bs=8,tn=9,Rs=10,sr=0,Yn=1,Fn=2,js=3,kr=4,Je=5,Pt=0,Pn=1,en=0,sn=1,Is=2,pi=0,Ln=1,rn=2,ir=4,Xn=5,rr=6,Yr=7,Li=8,Vs=1,gs=2,ae=class{minX=0;minY=0;maxX=0;maxY=0;boundingBoxes=new Array;polygons=new Array;polygonPool=new Q(()=>X.newFloatArray(16));update(s,e){if(!s)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,o=this.polygons,a=this.polygonPool,p=s.slots,m=p.length;i.length=0,a.freeAll(o),o.length=0;for(let g=0;g<m;g++){let w=p[g];if(!w.bone.active)continue;let b=w.getAttachment();if(b instanceof zs){let C=b;i.push(C);let F=a.obtain();F.length!=C.worldVerticesLength&&(F=X.newFloatArray(C.worldVerticesLength)),o.push(F),C.computeWorldVertices(w,0,C.worldVerticesLength,F,0,2);}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY);}aabbCompute(){let s=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=this.polygons;for(let p=0,m=a.length;p<m;p++){let g=a[p],w=g;for(let b=0,C=g.length;b<C;b+=2){let F=w[b],L=w[b+1];s=Math.min(s,F),e=Math.min(e,L),i=Math.max(i,F),o=Math.max(o,L);}}this.minX=s,this.minY=e,this.maxX=i,this.maxY=o;}aabbContainsPoint(s,e){return s>=this.minX&&s<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(s,e,i,o){let a=this.minX,p=this.minY,m=this.maxX,g=this.maxY;if(s<=a&&i<=a||e<=p&&o<=p||s>=m&&i>=m||e>=g&&o>=g)return  false;let w=(o-e)/(i-s),b=w*(a-s)+e;if(b>p&&b<g||(b=w*(m-s)+e,b>p&&b<g))return  true;let C=(p-e)/w+s;return C>a&&C<m||(C=(g-e)/w+s,C>a&&C<m)}aabbIntersectsSkeleton(s){return this.minX<s.maxX&&this.maxX>s.minX&&this.minY<s.maxY&&this.maxY>s.minY}containsPoint(s,e){let i=this.polygons;for(let o=0,a=i.length;o<a;o++)if(this.containsPointPolygon(i[o],s,e))return this.boundingBoxes[o];return null}containsPointPolygon(s,e,i){let o=s,a=s.length,p=a-2,m=false;for(let g=0;g<a;g+=2){let w=o[g+1],b=o[p+1];if(w<i&&b>=i||b<i&&w>=i){let C=o[g];C+(i-w)/(b-w)*(o[p]-C)<e&&(m=!m);}p=g;}return m}intersectsSegment(s,e,i,o){let a=this.polygons;for(let p=0,m=a.length;p<m;p++)if(this.intersectsSegmentPolygon(a[p],s,e,i,o))return this.boundingBoxes[p];return null}intersectsSegmentPolygon(s,e,i,o,a){let p=s,m=s.length,g=e-o,w=i-a,b=e*a-i*o,C=p[m-2],F=p[m-1];for(let L=0;L<m;L+=2){let N=p[L],O=p[L+1],Z=C*O-F*N,q=C-N,j=F-O,_=g*j-w*q,H=(b*q-g*Z)/_;if((H>=C&&H<=N||H>=N&&H<=C)&&(H>=e&&H<=o||H>=o&&H<=e)){let K=(b*j-w*Z)/_;if((K>=F&&K<=O||K>=O&&K<=F)&&(K>=i&&K<=a||K>=a&&K<=i))return  true}C=N,F=O;}return  false}getPolygon(s){if(!s)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(s);return e==-1?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},ue=class Ns{convexPolygons=new Array;convexPolygonsIndices=new Array;indicesArray=new Array;isConcaveArray=new Array;triangles=new Array;polygonPool=new Q(()=>new Array);polygonIndicesPool=new Q(()=>new Array);triangulate(e){let i=e,o=e.length>>1,a=this.indicesArray;a.length=0;for(let g=0;g<o;g++)a[g]=g;let p=this.isConcaveArray;p.length=0;for(let g=0,w=o;g<w;++g)p[g]=Ns.isConcave(g,o,i,a);let m=this.triangles;for(m.length=0;o>3;){let g=o-1,w=0,b=1;for(;;){t:if(!p[w]){let L=a[g]<<1,N=a[w]<<1,O=a[b]<<1,Z=i[L],q=i[L+1],j=i[N],_=i[N+1],H=i[O],K=i[O+1];for(let rt=(b+1)%o;rt!=g;rt=(rt+1)%o){if(!p[rt])continue;let lt=a[rt]<<1,vt=i[lt],pt=i[lt+1];if(Ns.positiveArea(H,K,Z,q,vt,pt)&&Ns.positiveArea(Z,q,j,_,vt,pt)&&Ns.positiveArea(j,_,H,K,vt,pt))break t}break}if(b==0){do{if(!p[w])break;w--;}while(w>0);break}g=w,w=b,b=(b+1)%o;}m.push(a[(o+w-1)%o]),m.push(a[w]),m.push(a[(w+1)%o]),a.splice(w,1),p.splice(w,1),o--;let C=(o+w-1)%o,F=w==o?0:w;p[C]=Ns.isConcave(C,o,i,a),p[F]=Ns.isConcave(F,o,i,a);}return o==3&&(m.push(a[2]),m.push(a[0]),m.push(a[1])),m}decompose(e,i){let o=e,a=this.convexPolygons;this.polygonPool.freeAll(a),a.length=0;let p=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(p),p.length=0;let m=this.polygonIndicesPool.obtain();m.length=0;let g=this.polygonPool.obtain();g.length=0;let w=-1,b=0;for(let C=0,F=i.length;C<F;C+=3){let L=i[C]<<1,N=i[C+1]<<1,O=i[C+2]<<1,Z=o[L],q=o[L+1],j=o[N],_=o[N+1],H=o[O],K=o[O+1],rt=false;if(w==L){let lt=g.length-4,vt=Ns.winding(g[lt],g[lt+1],g[lt+2],g[lt+3],H,K),pt=Ns.winding(H,K,g[0],g[1],g[2],g[3]);vt==b&&pt==b&&(g.push(H),g.push(K),m.push(O),rt=true);}rt||(g.length>0?(a.push(g),p.push(m)):(this.polygonPool.free(g),this.polygonIndicesPool.free(m)),g=this.polygonPool.obtain(),g.length=0,g.push(Z),g.push(q),g.push(j),g.push(_),g.push(H),g.push(K),m=this.polygonIndicesPool.obtain(),m.length=0,m.push(L),m.push(N),m.push(O),b=Ns.winding(Z,q,j,_,H,K),w=L);}g.length>0&&(a.push(g),p.push(m));for(let C=0,F=a.length;C<F;C++){if(m=p[C],m.length==0)continue;let L=m[0],N=m[m.length-1];g=a[C];let O=g.length-4,Z=g[O],q=g[O+1],j=g[O+2],_=g[O+3],H=g[0],K=g[1],rt=g[2],lt=g[3],vt=Ns.winding(Z,q,j,_,H,K);for(let pt=0;pt<F;pt++){if(pt==C)continue;let xt=p[pt];if(xt.length!=3)continue;let Et=xt[0],Ft=xt[1],Vt=xt[2],Ut=a[pt],St=Ut[Ut.length-2],It=Ut[Ut.length-1];if(Et!=L||Ft!=N)continue;let Ht=Ns.winding(Z,q,j,_,St,It),Oe=Ns.winding(St,It,H,K,rt,lt);Ht==vt&&Oe==vt&&(Ut.length=0,xt.length=0,g.push(St),g.push(It),m.push(Vt),Z=j,q=_,j=St,_=It,pt=0);}}for(let C=a.length-1;C>=0;C--)g=a[C],g.length==0&&(a.splice(C,1),this.polygonPool.free(g),m=p[C],p.splice(C,1),this.polygonIndicesPool.free(m));return a}static isConcave(e,i,o,a){let p=a[(i+e-1)%i]<<1,m=a[e]<<1,g=a[(e+1)%i]<<1;return !this.positiveArea(o[p],o[p+1],o[m],o[m+1],o[g],o[g+1])}static positiveArea(e,i,o,a,p,m){return e*(m-a)+o*(i-m)+p*(a-i)>=0}static winding(e,i,o,a,p,m){let g=o-e,w=a-i;return p*w-m*g+g*i-e*w>=0?1:-1}},fe=class $n{triangulator=new ue;clippingPolygon=new Array;clipOutput=new Array;clippedVertices=new Array;clippedUVs=new Array;clippedTriangles=new Array;scratch=new Array;clipAttachment=null;clippingPolygons=null;clipStart(e,i){if(this.clipAttachment)return 0;this.clipAttachment=i;let o=i.worldVerticesLength,a=X.setArraySize(this.clippingPolygon,o);i.computeWorldVertices(e,0,o,a,0,2);let p=this.clippingPolygon;$n.makeClockwise(p);let m=this.clippingPolygons=this.triangulator.decompose(p,this.triangulator.triangulate(p));for(let g=0,w=m.length;g<w;g++){let b=m[g];$n.makeClockwise(b),b.push(b[0]),b.push(b[1]);}return m.length}clipEndWithSlot(e){this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd();}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0);}isClipping(){return this.clipAttachment!=null}clipTriangles(e,i,o,a,p,m,g,w){let b,C,F,L,N,O;typeof i=="number"?(b=o,C=a,F=p,L=m,N=g,O=w):(b=i,C=o,F=a,L=p,N=m,O=g),F&&L&&N&&typeof O=="boolean"?this.clipTrianglesRender(e,b,C,F,L,N,O):this.clipTrianglesNoRender(e,b,C);}clipTrianglesNoRender(e,i,o){let a=this.clipOutput,p=this.clippedVertices,m=this.clippedTriangles,g=this.clippingPolygons,w=g.length,b=0;p.length=0,m.length=0;for(let C=0;C<o;C+=3){let F=i[C]<<1,L=e[F],N=e[F+1];F=i[C+1]<<1;let O=e[F],Z=e[F+1];F=i[C+2]<<1;let q=e[F],j=e[F+1];for(let _=0;_<w;_++){let H=p.length;if(this.clip(L,N,O,Z,q,j,g[_],a)){let K=a.length;if(K==0)continue;let rt=K>>1,lt=this.clipOutput,vt=X.setArraySize(p,H+rt*2);for(let xt=0;xt<K;xt+=2,H+=2){let Et=lt[xt],Ft=lt[xt+1];vt[H]=Et,vt[H+1]=Ft;}H=m.length;let pt=X.setArraySize(m,H+3*(rt-2));rt--;for(let xt=1;xt<rt;xt++,H+=3)pt[H]=b,pt[H+1]=b+xt,pt[H+2]=b+xt+1;b+=rt+1;}else {let K=X.setArraySize(p,H+6);K[H]=L,K[H+1]=N,K[H+2]=O,K[H+3]=Z,K[H+4]=q,K[H+5]=j,H=m.length;let rt=X.setArraySize(m,H+3);rt[H]=b,rt[H+1]=b+1,rt[H+2]=b+2,b+=3;break}}}}clipTrianglesRender(e,i,o,a,p,m,g){let w=this.clipOutput,b=this.clippedVertices,C=this.clippedTriangles,F=this.clippingPolygons,L=F.length,N=g?12:8,O=0;b.length=0,C.length=0;for(let Z=0;Z<o;Z+=3){let q=i[Z]<<1,j=e[q],_=e[q+1],H=a[q],K=a[q+1];q=i[Z+1]<<1;let rt=e[q],lt=e[q+1],vt=a[q],pt=a[q+1];q=i[Z+2]<<1;let xt=e[q],Et=e[q+1],Ft=a[q],Vt=a[q+1];for(let Ut=0;Ut<L;Ut++){let St=b.length;if(this.clip(j,_,rt,lt,xt,Et,F[Ut],w)){let It=w.length;if(It==0)continue;let Ht=lt-Et,Oe=xt-rt,xe=j-xt,We=Et-_,Ke=1/(Ht*xe+Oe*(_-Et)),He=It>>1,ls=this.clipOutput,ne=X.setArraySize(b,St+He*N);for(let _e=0;_e<It;_e+=2,St+=N){let vs=ls[_e],ds=ls[_e+1];ne[St]=vs,ne[St+1]=ds,ne[St+2]=p.r,ne[St+3]=p.g,ne[St+4]=p.b,ne[St+5]=p.a;let As=vs-xt,ps=ds-Et,ei=(Ht*As+Oe*ps)*Ke,hr=(We*As+xe*ps)*Ke,Dr=1-ei-hr;ne[St+6]=H*ei+vt*hr+Ft*Dr,ne[St+7]=K*ei+pt*hr+Vt*Dr,g&&(ne[St+8]=m.r,ne[St+9]=m.g,ne[St+10]=m.b,ne[St+11]=m.a);}St=C.length;let ze=X.setArraySize(C,St+3*(He-2));He--;for(let _e=1;_e<He;_e++,St+=3)ze[St]=O,ze[St+1]=O+_e,ze[St+2]=O+_e+1;O+=He+1;}else {let It=X.setArraySize(b,St+3*N);It[St]=j,It[St+1]=_,It[St+2]=p.r,It[St+3]=p.g,It[St+4]=p.b,It[St+5]=p.a,g?(It[St+6]=H,It[St+7]=K,It[St+8]=m.r,It[St+9]=m.g,It[St+10]=m.b,It[St+11]=m.a,It[St+12]=rt,It[St+13]=lt,It[St+14]=p.r,It[St+15]=p.g,It[St+16]=p.b,It[St+17]=p.a,It[St+18]=vt,It[St+19]=pt,It[St+20]=m.r,It[St+21]=m.g,It[St+22]=m.b,It[St+23]=m.a,It[St+24]=xt,It[St+25]=Et,It[St+26]=p.r,It[St+27]=p.g,It[St+28]=p.b,It[St+29]=p.a,It[St+30]=Ft,It[St+31]=Vt,It[St+32]=m.r,It[St+33]=m.g,It[St+34]=m.b,It[St+35]=m.a):(It[St+6]=H,It[St+7]=K,It[St+8]=rt,It[St+9]=lt,It[St+10]=p.r,It[St+11]=p.g,It[St+12]=p.b,It[St+13]=p.a,It[St+14]=vt,It[St+15]=pt,It[St+16]=xt,It[St+17]=Et,It[St+18]=p.r,It[St+19]=p.g,It[St+20]=p.b,It[St+21]=p.a,It[St+22]=Ft,It[St+23]=Vt),St=C.length;let Ht=X.setArraySize(C,St+3);Ht[St]=O,Ht[St+1]=O+1,Ht[St+2]=O+2,O+=3;break}}}}clipTrianglesUnpacked(e,i,o,a){let p=this.clipOutput,m=this.clippedVertices,g=this.clippedUVs,w=this.clippedTriangles,b=this.clippingPolygons,C=b.length,F=0;m.length=0,g.length=0,w.length=0;for(let L=0;L<o;L+=3){let N=i[L]<<1,O=e[N],Z=e[N+1],q=a[N],j=a[N+1];N=i[L+1]<<1;let _=e[N],H=e[N+1],K=a[N],rt=a[N+1];N=i[L+2]<<1;let lt=e[N],vt=e[N+1],pt=a[N],xt=a[N+1];for(let Et=0;Et<C;Et++){let Ft=m.length;if(this.clip(O,Z,_,H,lt,vt,b[Et],p)){let Vt=p.length;if(Vt==0)continue;let Ut=H-vt,St=lt-_,It=O-lt,Ht=vt-Z,Oe=1/(Ut*It+St*(Z-vt)),xe=Vt>>1,We=this.clipOutput,Ke=X.setArraySize(m,Ft+xe*2),He=X.setArraySize(g,Ft+xe*2);for(let ne=0;ne<Vt;ne+=2,Ft+=2){let ze=We[ne],_e=We[ne+1];Ke[Ft]=ze,Ke[Ft+1]=_e;let vs=ze-lt,ds=_e-vt,As=(Ut*vs+St*ds)*Oe,ps=(Ht*vs+It*ds)*Oe,ei=1-As-ps;He[Ft]=q*As+K*ps+pt*ei,He[Ft+1]=j*As+rt*ps+xt*ei;}Ft=w.length;let ls=X.setArraySize(w,Ft+3*(xe-2));xe--;for(let ne=1;ne<xe;ne++,Ft+=3)ls[Ft]=F,ls[Ft+1]=F+ne,ls[Ft+2]=F+ne+1;F+=xe+1;}else {let Vt=X.setArraySize(m,Ft+6);Vt[Ft]=O,Vt[Ft+1]=Z,Vt[Ft+2]=_,Vt[Ft+3]=H,Vt[Ft+4]=lt,Vt[Ft+5]=vt;let Ut=X.setArraySize(g,Ft+6);Ut[Ft]=q,Ut[Ft+1]=j,Ut[Ft+2]=K,Ut[Ft+3]=rt,Ut[Ft+4]=pt,Ut[Ft+5]=xt,Ft=w.length;let St=X.setArraySize(w,Ft+3);St[Ft]=F,St[Ft+1]=F+1,St[Ft+2]=F+2,F+=3;break}}}}clip(e,i,o,a,p,m,g,w){let b=w,C=false,F;g.length%4>=2?(F=w,w=this.scratch):F=this.scratch,F.length=0,F.push(e),F.push(i),F.push(o),F.push(a),F.push(p),F.push(m),F.push(e),F.push(i),w.length=0;let L=g.length-4,N=g;for(let O=0;;O+=2){let Z=N[O],q=N[O+1],j=Z-N[O+2],_=q-N[O+3],H=w.length,K=F;for(let lt=0,vt=F.length-2;lt<vt;){let pt=K[lt],xt=K[lt+1];lt+=2;let Et=K[lt],Ft=K[lt+1],Vt=_*(Z-Et)>j*(q-Ft),Ut=_*(Z-pt)-j*(q-xt);if(Ut>0){if(Vt){w.push(Et),w.push(Ft);continue}let St=Et-pt,It=Ft-xt,Ht=Ut/(St*_-It*j);if(Ht>=0&&Ht<=1)w.push(pt+St*Ht),w.push(xt+It*Ht);else {w.push(Et),w.push(Ft);continue}}else if(Vt){let St=Et-pt,It=Ft-xt,Ht=Ut/(St*_-It*j);if(Ht>=0&&Ht<=1)w.push(pt+St*Ht),w.push(xt+It*Ht),w.push(Et),w.push(Ft);else {w.push(Et),w.push(Ft);continue}}C=true;}if(H==w.length)return b.length=0,true;if(w.push(w[0]),w.push(w[1]),O==L)break;let rt=w;w=F,w.length=0,F=rt;}if(b!=w){b.length=0;for(let O=0,Z=w.length-2;O<Z;O++)b[O]=w[O];}else b.length=b.length-2;return C}static makeClockwise(e){let i=e,o=e.length,a=i[o-2]*i[1]-i[0]*i[o-1],p=0,m=0,g=0,w=0;for(let b=0,C=o-3;b<C;b+=2)p=i[b],m=i[b+1],g=i[b+2],w=i[b+3],a+=p*w-g*m;if(!(a<0))for(let b=0,C=o-2,F=o>>1;b<F;b+=2){let L=i[b],N=i[b+1],O=C-b;i[b]=i[O],i[b+1]=i[O+1],i[O]=L,i[O+1]=N;}}},me=class{attachmentLoader;scale=1;linkedMeshes=new Array;constructor(s){this.attachmentLoader=s;}readSkeletonData(s){let e=this.scale,i=new Ze,o=typeof s=="string"?JSON.parse(s):s,a=o.skeleton;if(a&&(i.hash=a.hash,i.version=a.spine,i.x=a.x,i.y=a.y,i.width=a.width,i.height=a.height,i.referenceScale=gt(a,"referenceScale",100)*e,i.fps=a.fps,i.imagesPath=a.images??null,i.audioPath=a.audio??null),o.bones)for(let p=0;p<o.bones.length;p++){let m=o.bones[p],g=null,w=gt(m,"parent",null);w&&(g=i.findBone(w));let b=new ki(i.bones.length,m.name,g);b.length=gt(m,"length",0)*e,b.x=gt(m,"x",0)*e,b.y=gt(m,"y",0)*e,b.rotation=gt(m,"rotation",0),b.scaleX=gt(m,"scaleX",1),b.scaleY=gt(m,"scaleY",1),b.shearX=gt(m,"shearX",0),b.shearY=gt(m,"shearY",0),b.inherit=X.enumValue(Ys,gt(m,"inherit","Normal")),b.skinRequired=gt(m,"skin",false);let C=gt(m,"color",null);C&&b.color.setFromString(C),i.bones.push(b);}if(o.slots)for(let p=0;p<o.slots.length;p++){let m=o.slots[p],g=m.name,w=i.findBone(m.bone);if(!w)throw new Error(`Couldn't find bone ${m.bone} for slot ${g}`);let b=new Tr(i.slots.length,g,w),C=gt(m,"color",null);C&&b.color.setFromString(C);let F=gt(m,"dark",null);F&&(b.darkColor=V.fromString(F)),b.attachmentName=gt(m,"attachment",null),b.blendMode=X.enumValue(Ir,gt(m,"blend","normal")),b.visible=gt(m,"visible",true),i.slots.push(b);}if(o.ik)for(let p=0;p<o.ik.length;p++){let m=o.ik[p],g=new Yi(m.name);g.order=gt(m,"order",0),g.skinRequired=gt(m,"skin",false);for(let b=0;b<m.bones.length;b++){let C=i.findBone(m.bones[b]);if(!C)throw new Error(`Couldn't find bone ${m.bones[b]} for IK constraint ${m.name}.`);g.bones.push(C);}let w=i.findBone(m.target);if(!w)throw new Error(`Couldn't find target bone ${m.target} for IK constraint ${m.name}.`);g.target=w,g.mix=gt(m,"mix",1),g.softness=gt(m,"softness",0)*e,g.bendDirection=gt(m,"bendPositive",true)?1:-1,g.compress=gt(m,"compress",false),g.stretch=gt(m,"stretch",false),g.uniform=gt(m,"uniform",false),i.ikConstraints.push(g);}if(o.transform)for(let p=0;p<o.transform.length;p++){let m=o.transform[p],g=new Er(m.name);g.order=gt(m,"order",0),g.skinRequired=gt(m,"skin",false);for(let C=0;C<m.bones.length;C++){let F=m.bones[C],L=i.findBone(F);if(!L)throw new Error(`Couldn't find bone ${F} for transform constraint ${m.name}.`);g.bones.push(L);}let w=m.target,b=i.findBone(w);if(!b)throw new Error(`Couldn't find target bone ${w} for transform constraint ${m.name}.`);g.target=b,g.local=gt(m,"local",false),g.relative=gt(m,"relative",false),g.offsetRotation=gt(m,"rotation",0),g.offsetX=gt(m,"x",0)*e,g.offsetY=gt(m,"y",0)*e,g.offsetScaleX=gt(m,"scaleX",0),g.offsetScaleY=gt(m,"scaleY",0),g.offsetShearY=gt(m,"shearY",0),g.mixRotate=gt(m,"mixRotate",1),g.mixX=gt(m,"mixX",1),g.mixY=gt(m,"mixY",g.mixX),g.mixScaleX=gt(m,"mixScaleX",1),g.mixScaleY=gt(m,"mixScaleY",g.mixScaleX),g.mixShearY=gt(m,"mixShearY",1),i.transformConstraints.push(g);}if(o.path)for(let p=0;p<o.path.length;p++){let m=o.path[p],g=new gi(m.name);g.order=gt(m,"order",0),g.skinRequired=gt(m,"skin",false);for(let C=0;C<m.bones.length;C++){let F=m.bones[C],L=i.findBone(F);if(!L)throw new Error(`Couldn't find bone ${F} for path constraint ${m.name}.`);g.bones.push(L);}let w=m.target,b=i.findSlot(w);if(!b)throw new Error(`Couldn't find target slot ${w} for path constraint ${m.name}.`);g.target=b,g.positionMode=X.enumValue(Fi,gt(m,"positionMode","Percent")),g.spacingMode=X.enumValue(Ms,gt(m,"spacingMode","Length")),g.rotateMode=X.enumValue(Pi,gt(m,"rotateMode","Tangent")),g.offsetRotation=gt(m,"rotation",0),g.position=gt(m,"position",0),g.positionMode==0&&(g.position*=e),g.spacing=gt(m,"spacing",0),(g.spacingMode==0||g.spacingMode==1)&&(g.spacing*=e),g.mixRotate=gt(m,"mixRotate",1),g.mixX=gt(m,"mixX",1),g.mixY=gt(m,"mixY",g.mixX),i.pathConstraints.push(g);}if(o.physics)for(let p=0;p<o.physics.length;p++){let m=o.physics[p],g=new tr(m.name);g.order=gt(m,"order",0),g.skinRequired=gt(m,"skin",false);let w=m.bone,b=i.findBone(w);if(b==null)throw new Error("Physics bone not found: "+w);g.bone=b,g.x=gt(m,"x",0),g.y=gt(m,"y",0),g.rotate=gt(m,"rotate",0),g.scaleX=gt(m,"scaleX",0),g.shearX=gt(m,"shearX",0),g.limit=gt(m,"limit",5e3)*e,g.step=1/gt(m,"fps",60),g.inertia=gt(m,"inertia",1),g.strength=gt(m,"strength",100),g.damping=gt(m,"damping",1),g.massInverse=1/gt(m,"mass",1),g.wind=gt(m,"wind",0),g.gravity=gt(m,"gravity",0),g.mix=gt(m,"mix",1),g.inertiaGlobal=gt(m,"inertiaGlobal",false),g.strengthGlobal=gt(m,"strengthGlobal",false),g.dampingGlobal=gt(m,"dampingGlobal",false),g.massGlobal=gt(m,"massGlobal",false),g.windGlobal=gt(m,"windGlobal",false),g.gravityGlobal=gt(m,"gravityGlobal",false),g.mixGlobal=gt(m,"mixGlobal",false),i.physicsConstraints.push(g);}if(o.skins)for(let p=0;p<o.skins.length;p++){let m=o.skins[p],g=new er(m.name);if(m.bones)for(let w=0;w<m.bones.length;w++){let b=m.bones[w],C=i.findBone(b);if(!C)throw new Error(`Couldn't find bone ${b} for skin ${m.name}.`);g.bones.push(C);}if(m.ik)for(let w=0;w<m.ik.length;w++){let b=m.ik[w],C=i.findIkConstraint(b);if(!C)throw new Error(`Couldn't find IK constraint ${b} for skin ${m.name}.`);g.constraints.push(C);}if(m.transform)for(let w=0;w<m.transform.length;w++){let b=m.transform[w],C=i.findTransformConstraint(b);if(!C)throw new Error(`Couldn't find transform constraint ${b} for skin ${m.name}.`);g.constraints.push(C);}if(m.path)for(let w=0;w<m.path.length;w++){let b=m.path[w],C=i.findPathConstraint(b);if(!C)throw new Error(`Couldn't find path constraint ${b} for skin ${m.name}.`);g.constraints.push(C);}if(m.physics)for(let w=0;w<m.physics.length;w++){let b=m.physics[w],C=i.findPhysicsConstraint(b);if(!C)throw new Error(`Couldn't find physics constraint ${b} for skin ${m.name}.`);g.constraints.push(C);}for(let w in m.attachments){let b=i.findSlot(w);if(!b)throw new Error(`Couldn't find slot ${w} for skin ${m.name}.`);let C=m.attachments[w];for(let F in C){let L=this.readAttachment(C[F],g,b.index,F,i);L&&g.setAttachment(b.index,F,L);}}i.skins.push(g),g.name=="default"&&(i.defaultSkin=g);}for(let p=0,m=this.linkedMeshes.length;p<m;p++){let g=this.linkedMeshes[p],w=g.skin?i.findSkin(g.skin):i.defaultSkin;if(!w)throw new Error(`Skin not found: ${g.skin}`);let b=w.getAttachment(g.slotIndex,g.parent);if(!b)throw new Error(`Parent mesh not found: ${g.parent}`);g.mesh.timelineAttachment=g.inheritTimeline?b:g.mesh,g.mesh.setParentMesh(b),g.mesh.region!=null&&g.mesh.updateRegion();}if(this.linkedMeshes.length=0,o.events)for(let p in o.events){let m=o.events[p],g=new Sr(p);g.intValue=gt(m,"int",0),g.floatValue=gt(m,"float",0),g.stringValue=gt(m,"string",""),g.audioPath=gt(m,"audio",null),g.audioPath&&(g.volume=gt(m,"volume",1),g.balance=gt(m,"balance",0)),i.events.push(g);}if(o.animations)for(let p in o.animations){let m=o.animations[p];this.readAnimation(m,p,i);}return i}readAttachment(s,e,i,o,a){let p=this.scale;switch(o=gt(s,"name",o),gt(s,"type","region")){case "region":{let m=gt(s,"path",o),g=this.readSequence(gt(s,"sequence",null)),w=this.attachmentLoader.newRegionAttachment(e,o,m,g);if(!w)return null;w.path=m,w.x=gt(s,"x",0)*p,w.y=gt(s,"y",0)*p,w.scaleX=gt(s,"scaleX",1),w.scaleY=gt(s,"scaleY",1),w.rotation=gt(s,"rotation",0),w.width=s.width*p,w.height=s.height*p,w.sequence=g;let b=gt(s,"color",null);return b&&w.color.setFromString(b),w.region!=null&&w.updateRegion(),w}case "boundingbox":{let m=this.attachmentLoader.newBoundingBoxAttachment(e,o);if(!m)return null;this.readVertices(s,m,s.vertexCount<<1);let g=gt(s,"color",null);return g&&m.color.setFromString(g),m}case "mesh":case "linkedmesh":{let m=gt(s,"path",o),g=this.readSequence(gt(s,"sequence",null)),w=this.attachmentLoader.newMeshAttachment(e,o,m,g);if(!w)return null;w.path=m;let b=gt(s,"color",null);b&&w.color.setFromString(b),w.width=gt(s,"width",0)*p,w.height=gt(s,"height",0)*p,w.sequence=g;let C=gt(s,"parent",null);if(C)return this.linkedMeshes.push(new ve(w,gt(s,"skin",null),i,C,gt(s,"timelines",true))),w;let F=s.uvs;return this.readVertices(s,w,F.length),w.triangles=s.triangles,w.regionUVs=F,w.region!=null&&w.updateRegion(),w.edges=gt(s,"edges",null),w.hullLength=gt(s,"hull",0)*2,w}case "path":{let m=this.attachmentLoader.newPathAttachment(e,o);if(!m)return null;m.closed=gt(s,"closed",false),m.constantSpeed=gt(s,"constantSpeed",true);let g=s.vertexCount;this.readVertices(s,m,g<<1);let w=X.newArray(g/3,0);for(let C=0;C<s.lengths.length;C++)w[C]=s.lengths[C]*p;m.lengths=w;let b=gt(s,"color",null);return b&&m.color.setFromString(b),m}case "point":{let m=this.attachmentLoader.newPointAttachment(e,o);if(!m)return null;m.x=gt(s,"x",0)*p,m.y=gt(s,"y",0)*p,m.rotation=gt(s,"rotation",0);let g=gt(s,"color",null);return g&&m.color.setFromString(g),m}case "clipping":{let m=this.attachmentLoader.newClippingAttachment(e,o);if(!m)return null;let g=gt(s,"end",null);g&&(m.endSlot=a.findSlot(g));let w=s.vertexCount;this.readVertices(s,m,w<<1);let b=gt(s,"color",null);return b&&m.color.setFromString(b),m}}return null}readSequence(s){if(s==null)return null;let e=new W(gt(s,"count",0));return e.start=gt(s,"start",1),e.digits=gt(s,"digits",0),e.setupIndex=gt(s,"setup",0),e}readVertices(s,e,i){let o=this.scale;e.worldVerticesLength=i;let a=s.vertices;if(i==a.length){let g=X.toFloatArray(a);if(o!=1)for(let w=0,b=a.length;w<b;w++)g[w]*=o;e.vertices=g;return}let p=new Array,m=new Array;for(let g=0,w=a.length;g<w;){let b=a[g++];m.push(b);for(let C=g+b*4;g<C;g+=4)m.push(a[g]),p.push(a[g+1]*o),p.push(a[g+2]*o),p.push(a[g+3]);}e.bones=m,e.vertices=X.toFloatArray(p);}readAnimation(s,e,i){let o=this.scale,a=new Array;if(s.slots)for(let m in s.slots){let g=s.slots[m],w=i.findSlot(m);if(!w)throw new Error("Slot not found: "+m);let b=w.index;for(let C in g){let F=g[C];if(!F)continue;let L=F.length;if(C=="attachment"){let N=new Qe(L,b);for(let O=0;O<L;O++){let Z=F[O];N.setFrame(O,gt(Z,"time",0),gt(Z,"name",null));}a.push(N);}else if(C=="rgba"){let N=new se(L,L<<2,b),O=F[0],Z=gt(O,"time",0),q=V.fromString(O.color);for(let j=0,_=0;;j++){N.setFrame(j,Z,q.r,q.g,q.b,q.a);let H=F[j+1];if(!H){N.shrink(_);break}let K=gt(H,"time",0),rt=V.fromString(H.color),lt=O.curve;lt&&(_=Gt(lt,N,_,j,0,Z,K,q.r,rt.r,1),_=Gt(lt,N,_,j,1,Z,K,q.g,rt.g,1),_=Gt(lt,N,_,j,2,Z,K,q.b,rt.b,1),_=Gt(lt,N,_,j,3,Z,K,q.a,rt.a,1)),Z=K,q=rt,O=H;}a.push(N);}else if(C=="rgb"){let N=new Kt(L,L*3,b),O=F[0],Z=gt(O,"time",0),q=V.fromString(O.color);for(let j=0,_=0;;j++){N.setFrame(j,Z,q.r,q.g,q.b);let H=F[j+1];if(!H){N.shrink(_);break}let K=gt(H,"time",0),rt=V.fromString(H.color),lt=O.curve;lt&&(_=Gt(lt,N,_,j,0,Z,K,q.r,rt.r,1),_=Gt(lt,N,_,j,1,Z,K,q.g,rt.g,1),_=Gt(lt,N,_,j,2,Z,K,q.b,rt.b,1)),Z=K,q=rt,O=H;}a.push(N);}else if(C=="alpha")a.push(Qt(F,new De(L,L,b),0,1));else if(C=="rgba2"){let N=new $e(L,L*7,b),O=F[0],Z=gt(O,"time",0),q=V.fromString(O.light),j=V.fromString(O.dark);for(let _=0,H=0;;_++){N.setFrame(_,Z,q.r,q.g,q.b,q.a,j.r,j.g,j.b);let K=F[_+1];if(!K){N.shrink(H);break}let rt=gt(K,"time",0),lt=V.fromString(K.light),vt=V.fromString(K.dark),pt=O.curve;pt&&(H=Gt(pt,N,H,_,0,Z,rt,q.r,lt.r,1),H=Gt(pt,N,H,_,1,Z,rt,q.g,lt.g,1),H=Gt(pt,N,H,_,2,Z,rt,q.b,lt.b,1),H=Gt(pt,N,H,_,3,Z,rt,q.a,lt.a,1),H=Gt(pt,N,H,_,4,Z,rt,j.r,vt.r,1),H=Gt(pt,N,H,_,5,Z,rt,j.g,vt.g,1),H=Gt(pt,N,H,_,6,Z,rt,j.b,vt.b,1)),Z=rt,q=lt,j=vt,O=K;}a.push(N);}else if(C=="rgb2"){let N=new Te(L,L*6,b),O=F[0],Z=gt(O,"time",0),q=V.fromString(O.light),j=V.fromString(O.dark);for(let _=0,H=0;;_++){N.setFrame(_,Z,q.r,q.g,q.b,j.r,j.g,j.b);let K=F[_+1];if(!K){N.shrink(H);break}let rt=gt(K,"time",0),lt=V.fromString(K.light),vt=V.fromString(K.dark),pt=O.curve;pt&&(H=Gt(pt,N,H,_,0,Z,rt,q.r,lt.r,1),H=Gt(pt,N,H,_,1,Z,rt,q.g,lt.g,1),H=Gt(pt,N,H,_,2,Z,rt,q.b,lt.b,1),H=Gt(pt,N,H,_,3,Z,rt,j.r,vt.r,1),H=Gt(pt,N,H,_,4,Z,rt,j.g,vt.g,1),H=Gt(pt,N,H,_,5,Z,rt,j.b,vt.b,1)),Z=rt,q=lt,j=vt,O=K;}a.push(N);}}}if(s.bones)for(let m in s.bones){let g=s.bones[m],w=i.findBone(m);if(!w)throw new Error("Bone not found: "+m);let b=w.index;for(let C in g){let F=g[C],L=F.length;if(L!=0){if(C==="rotate")a.push(Qt(F,new wt(L,L,b),0,1));else if(C==="translate"){let N=new yt(L,L<<1,b);a.push(oe(F,N,"x","y",0,o));}else if(C==="translatex"){let N=new Xt(L,L,b);a.push(Qt(F,N,0,o));}else if(C==="translatey"){let N=new Dt(L,L,b);a.push(Qt(F,N,0,o));}else if(C==="scale"){let N=new Lt(L,L<<1,b);a.push(oe(F,N,"x","y",1,1));}else if(C==="scalex"){let N=new Bt(L,L,b);a.push(Qt(F,N,1,1));}else if(C==="scaley"){let N=new zt(L,L,b);a.push(Qt(F,N,1,1));}else if(C==="shear"){let N=new Yt(L,L<<1,b);a.push(oe(F,N,"x","y",0,1));}else if(C==="shearx"){let N=new Tt(L,L,b);a.push(Qt(F,N,0,1));}else if(C==="sheary"){let N=new bt(L,L,b);a.push(Qt(F,N,0,1));}else if(C==="inherit"){let N=new _t(L,w.index);for(let O=0;O<F.length;O++){let Z=F[O];N.setFrame(O,gt(Z,"time",0),X.enumValue(Ys,gt(Z,"inherit","Normal")));}a.push(N);}}}}if(s.ik)for(let m in s.ik){let g=s.ik[m],w=g[0];if(!w)continue;let b=i.findIkConstraint(m);if(!b)throw new Error("IK Constraint not found: "+m);let C=i.ikConstraints.indexOf(b),F=new as(g.length,g.length<<1,C),L=gt(w,"time",0),N=gt(w,"mix",1),O=gt(w,"softness",0)*o;for(let Z=0,q=0;;Z++){F.setFrame(Z,L,N,O,gt(w,"bendPositive",true)?1:-1,gt(w,"compress",false),gt(w,"stretch",false));let j=g[Z+1];if(!j){F.shrink(q);break}let _=gt(j,"time",0),H=gt(j,"mix",1),K=gt(j,"softness",0)*o,rt=w.curve;rt&&(q=Gt(rt,F,q,Z,0,L,_,N,H,1),q=Gt(rt,F,q,Z,1,L,_,O,K,o)),L=_,N=H,O=K,w=j;}a.push(F);}if(s.transform)for(let m in s.transform){let g=s.transform[m],w=g[0];if(!w)continue;let b=i.findTransformConstraint(m);if(!b)throw new Error("Transform constraint not found: "+m);let C=i.transformConstraints.indexOf(b),F=new xs(g.length,g.length*6,C),L=gt(w,"time",0),N=gt(w,"mixRotate",1),O=gt(w,"mixX",1),Z=gt(w,"mixY",O),q=gt(w,"mixScaleX",1),j=gt(w,"mixScaleY",q),_=gt(w,"mixShearY",1);for(let H=0,K=0;;H++){F.setFrame(H,L,N,O,Z,q,j,_);let rt=g[H+1];if(!rt){F.shrink(K);break}let lt=gt(rt,"time",0),vt=gt(rt,"mixRotate",1),pt=gt(rt,"mixX",1),xt=gt(rt,"mixY",pt),Et=gt(rt,"mixScaleX",1),Ft=gt(rt,"mixScaleY",Et),Vt=gt(rt,"mixShearY",1),Ut=w.curve;Ut&&(K=Gt(Ut,F,K,H,0,L,lt,N,vt,1),K=Gt(Ut,F,K,H,1,L,lt,O,pt,1),K=Gt(Ut,F,K,H,2,L,lt,Z,xt,1),K=Gt(Ut,F,K,H,3,L,lt,q,Et,1),K=Gt(Ut,F,K,H,4,L,lt,j,Ft,1),K=Gt(Ut,F,K,H,5,L,lt,_,Vt,1)),L=lt,N=vt,O=pt,Z=xt,q=Et,j=Ft,q=Et,w=rt;}a.push(F);}if(s.path)for(let m in s.path){let g=s.path[m],w=i.findPathConstraint(m);if(!w)throw new Error("Path constraint not found: "+m);let b=i.pathConstraints.indexOf(w);for(let C in g){let F=g[C],L=F[0];if(!L)continue;let N=F.length;if(C==="position"){let O=new os(N,N,b);a.push(Qt(F,O,0,w.positionMode==0?o:1));}else if(C==="spacing"){let O=new cs(N,N,b);a.push(Qt(F,O,0,w.spacingMode==0||w.spacingMode==1?o:1));}else if(C==="mix"){let O=new ts(N,N*3,b),Z=gt(L,"time",0),q=gt(L,"mixRotate",1),j=gt(L,"mixX",1),_=gt(L,"mixY",j);for(let H=0,K=0;;H++){O.setFrame(H,Z,q,j,_);let rt=F[H+1];if(!rt){O.shrink(K);break}let lt=gt(rt,"time",0),vt=gt(rt,"mixRotate",1),pt=gt(rt,"mixX",1),xt=gt(rt,"mixY",pt),Et=L.curve;Et&&(K=Gt(Et,O,K,H,0,Z,lt,q,vt,1),K=Gt(Et,O,K,H,1,Z,lt,j,pt,1),K=Gt(Et,O,K,H,2,Z,lt,_,xt,1)),Z=lt,q=vt,j=pt,_=xt,L=rt;}a.push(O);}}}if(s.physics)for(let m in s.physics){let g=s.physics[m],w=-1;if(m.length>0){let b=i.findPhysicsConstraint(m);if(!b)throw new Error("Physics constraint not found: "+m);w=i.physicsConstraints.indexOf(b);}for(let b in g){let C=g[b],F=C[0];if(!F)continue;let L=C.length;if(b=="reset"){let O=new Ci(L,w);for(let Z=0;F!=null;F=C[Z+1],Z++)O.setFrame(Z,gt(F,"time",0));a.push(O);continue}let N;if(b=="inertia")N=new is(L,L,w);else if(b=="strength")N=new Us(L,L,w);else if(b=="damping")N=new Ss(L,L,w);else if(b=="mass")N=new Es(L,L,w);else if(b=="wind")N=new ys(L,L,w);else if(b=="gravity")N=new ks(L,L,w);else if(b=="mix")N=new Ws(L,L,w);else continue;a.push(Qt(C,N,0,1));}}if(s.attachments)for(let m in s.attachments){let g=s.attachments[m],w=i.findSkin(m);if(!w)throw new Error("Skin not found: "+m);for(let b in g){let C=g[b],F=i.findSlot(b);if(!F)throw new Error("Slot not found: "+b);let L=F.index;for(let N in C){let O=C[N],Z=w.getAttachment(L,N);for(let q in O){let j=O[q],_=j[0];if(_){if(q=="deform"){let H=Z.bones,K=Z.vertices,rt=H?K.length/3*2:K.length,lt=new ss(j.length,j.length,L,Z),vt=gt(_,"time",0);for(let pt=0,xt=0;;pt++){let Et,Ft=gt(_,"vertices",null);if(!Ft)Et=H?X.newFloatArray(rt):K;else {Et=X.newFloatArray(rt);let It=gt(_,"offset",0);if(X.arrayCopy(Ft,0,Et,It,Ft.length),o!=1)for(let Ht=It,Oe=Ht+Ft.length;Ht<Oe;Ht++)Et[Ht]*=o;if(!H)for(let Ht=0;Ht<rt;Ht++)Et[Ht]+=K[Ht];}lt.setFrame(pt,vt,Et);let Vt=j[pt+1];if(!Vt){lt.shrink(xt);break}let Ut=gt(Vt,"time",0),St=_.curve;St&&(xt=Gt(St,lt,xt,pt,0,vt,Ut,0,1,1)),vt=Ut,_=Vt;}a.push(lt);}else if(q=="sequence"){let H=new Zi(j.length,L,Z),K=0;for(let rt=0;rt<j.length;rt++){let lt=gt(_,"delay",K),vt=gt(_,"time",0),pt=et[gt(_,"mode","hold")],xt=gt(_,"index",0);H.setFrame(rt,vt,pt,xt,lt),K=lt,_=j[rt+1];}a.push(H);}}}}}}if(s.drawOrder){let m=new hs(s.drawOrder.length),g=i.slots.length,w=0;for(let b=0;b<s.drawOrder.length;b++,w++){let C=s.drawOrder[b],F=null,L=gt(C,"offsets",null);if(L){F=X.newArray(g,-1);let N=X.newArray(g-L.length,0),O=0,Z=0;for(let q=0;q<L.length;q++){let j=L[q],_=i.findSlot(j.slot);if(!_)throw new Error("Slot not found: "+_);let H=_.index;for(;O!=H;)N[Z++]=O++;F[O+j.offset]=O++;}for(;O<g;)N[Z++]=O++;for(let q=g-1;q>=0;q--)F[q]==-1&&(F[q]=N[--Z]);}m.setFrame(w,gt(C,"time",0),F);}a.push(m);}if(s.events){let m=new us(s.events.length),g=0;for(let w=0;w<s.events.length;w++,g++){let b=s.events[w],C=i.findEvent(b.name);if(!C)throw new Error("Event not found: "+b.name);let F=new Ki(X.toSinglePrecision(gt(b,"time",0)),C);F.intValue=gt(b,"int",C.intValue),F.floatValue=gt(b,"float",C.floatValue),F.stringValue=gt(b,"string",C.stringValue),F.data.audioPath&&(F.volume=gt(b,"volume",1),F.balance=gt(b,"balance",0)),m.setFrame(g,F);}a.push(m);}let p=0;for(let m=0,g=a.length;m<g;m++)p=Math.max(p,a[m].getDuration());i.animations.push(new at(e,a,p));}},ve=class{parent;skin;slotIndex;mesh;inheritTimeline;constructor(s,e,i,o,a){this.mesh=s,this.skin=e,this.slotIndex=i,this.parent=o,this.inheritTimeline=a;}};function Qt(s,e,i,o){let a=s[0],p=gt(a,"time",0),m=gt(a,"value",i)*o,g=0;for(let w=0;;w++){e.setFrame(w,p,m);let b=s[w+1];if(!b)return e.shrink(g),e;let C=gt(b,"time",0),F=gt(b,"value",i)*o;a.curve&&(g=Gt(a.curve,e,g,w,0,p,C,m,F,o)),p=C,m=F,a=b;}}function oe(s,e,i,o,a,p){let m=s[0],g=gt(m,"time",0),w=gt(m,i,a)*p,b=gt(m,o,a)*p,C=0;for(let F=0;;F++){e.setFrame(F,g,w,b);let L=s[F+1];if(!L)return e.shrink(C),e;let N=gt(L,"time",0),O=gt(L,i,a)*p,Z=gt(L,o,a)*p,q=m.curve;q&&(C=Gt(q,e,C,F,0,g,N,w,O,p),C=Gt(q,e,C,F,1,g,N,b,Z,p)),g=N,w=O,b=Z,m=L;}}function Gt(s,e,i,o,a,p,m,g,w,b){if(s=="stepped")return e.setStepped(o),i;let C=a<<2,F=s[C],L=s[C+1]*b,N=s[C+2],O=s[C+3]*b;return e.setBezier(i,o,a,p,g,F,L,N,O,m,w),i+1}function gt(s,e,i){return s[e]!==void 0?s[e]:i}typeof Math.fround>"u"&&(Math.fround=(function(s){return function(e){return s[0]=e,s[0]}})(new Float32Array(1)));var Jt=class{canvas;gl;restorables=[];constructor(s,e={alpha:true}){if(s instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&s instanceof WebGL2RenderingContext)this.gl=s,this.canvas=this.gl.canvas;else {let i=s;this.gl=i.getContext("webgl2",e)||i.getContext("webgl",e),this.canvas=i,i.addEventListener("webglcontextlost",this.contextLostHandler),i.addEventListener("webglcontextrestored",this.contextRestoredHandler);}}contextLostHandler=s=>{s&&s.preventDefault();};contextRestoredHandler=()=>{for(let s=0,e=this.restorables.length;s<e;s++)this.restorables[s].restore();};dispose(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler);}addRestorable(s){this.restorables.push(s);}removeRestorable(s){let e=this.restorables.indexOf(s);e>-1&&this.restorables.splice(e,1);}},ee=class yn extends Ii{context;texture=null;boundUnit=0;useMipMaps=false;static DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=false;constructor(e,i,o=false){super(i),this.context=e instanceof Jt?e:new Jt(e),this.useMipMaps=o,this.restore(),this.context.addRestorable(this);}setFilters(e,i){let o=this.context.gl;this.bind(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,e),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,yn.validateMagFilter(i)),this.useMipMaps=yn.usesMipMaps(e),this.useMipMaps&&o.generateMipmap(o.TEXTURE_2D);}static validateMagFilter(e){switch(e){case 9987:case 9985:case 9986:case 9984:return 9729;default:return e}}static usesMipMaps(e){switch(e){case 9987:case 9985:case 9986:case 9984:return  true;default:return  false}}setWraps(e,i){let o=this.context.gl;this.bind(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,e),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,i);}update(e){let i=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,this._image),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,e?i.LINEAR_MIPMAP_LINEAR:i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),e&&i.generateMipmap(i.TEXTURE_2D);}restore(){this.texture=null,this.update(this.useMipMaps);}bind(e=0){let i=this.context.gl;this.boundUnit=e,i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,this.texture);}unbind(){let e=this.context.gl;e.activeTexture(e.TEXTURE0+this.boundUnit),e.bindTexture(e.TEXTURE_2D,null);}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture);}},le=class extends Gs{constructor(s,e="",i=new Qi){super(o=>new ee(s,o),e,i);}},$t=class{x=0;y=0;z=0;constructor(s=0,e=0,i=0){this.x=s,this.y=e,this.z=i;}setFrom(s){return this.x=s.x,this.y=s.y,this.z=s.z,this}set(s,e,i){return this.x=s,this.y=e,this.z=i,this}add(s){return this.x+=s.x,this.y+=s.y,this.z+=s.z,this}sub(s){return this.x-=s.x,this.y-=s.y,this.z-=s.z,this}scale(s){return this.x*=s,this.y*=s,this.z*=s,this}normalize(){let s=this.length();return s==0?this:(s=1/s,this.x*=s,this.y*=s,this.z*=s,this)}cross(s){return this.set(this.y*s.z-this.z*s.y,this.z*s.x-this.x*s.z,this.x*s.y-this.y*s.x)}multiply(s){let e=s.values;return this.set(this.x*e[Ot]+this.y*e[Wt]+this.z*e[Nt]+e[Zt],this.x*e[te]+this.y*e[he]+this.z*e[ce]+e[de],this.x*e[we]+this.y*e[qt]+this.z*e[jt]+e[ie])}project(s){let e=s.values,i=1/(this.x*e[re]+this.y*e[ge]+this.z*e[Ie]+e[pe]);return this.set((this.x*e[Ot]+this.y*e[Wt]+this.z*e[Nt]+e[Zt])*i,(this.x*e[te]+this.y*e[he]+this.z*e[ce]+e[de])*i,(this.x*e[we]+this.y*e[qt]+this.z*e[jt]+e[ie])*i)}dot(s){return this.x*s.x+this.y*s.y+this.z*s.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(s){let e=s.x-this.x,i=s.y-this.y,o=s.z-this.z;return Math.sqrt(e*e+i*i+o*o)}},Ot=0,Wt=4,Nt=8,Zt=12,te=1,he=5,ce=9,de=13,we=2,qt=6,jt=10,ie=14,re=3,ge=7,Ie=11,pe=15,oi=class ri{temp=new Float32Array(16);values=new Float32Array(16);static xAxis=new $t;static yAxis=new $t;static zAxis=new $t;static tmpMatrix=new ri;constructor(){let e=this.values;e[Ot]=1,e[he]=1,e[jt]=1,e[pe]=1;}set(e){return this.values.set(e),this}transpose(){let e=this.temp,i=this.values;return e[Ot]=i[Ot],e[Wt]=i[te],e[Nt]=i[we],e[Zt]=i[re],e[te]=i[Wt],e[he]=i[he],e[ce]=i[qt],e[de]=i[ge],e[we]=i[Nt],e[qt]=i[ce],e[jt]=i[jt],e[ie]=i[Ie],e[re]=i[Zt],e[ge]=i[de],e[Ie]=i[ie],e[pe]=i[pe],this.set(e)}identity(){let e=this.values;return e[Ot]=1,e[Wt]=0,e[Nt]=0,e[Zt]=0,e[te]=0,e[he]=1,e[ce]=0,e[de]=0,e[we]=0,e[qt]=0,e[jt]=1,e[ie]=0,e[re]=0,e[ge]=0,e[Ie]=0,e[pe]=1,this}invert(){let e=this.values,i=this.temp,o=e[re]*e[qt]*e[ce]*e[Zt]-e[we]*e[ge]*e[ce]*e[Zt]-e[re]*e[he]*e[jt]*e[Zt]+e[te]*e[ge]*e[jt]*e[Zt]+e[we]*e[he]*e[Ie]*e[Zt]-e[te]*e[qt]*e[Ie]*e[Zt]-e[re]*e[qt]*e[Nt]*e[de]+e[we]*e[ge]*e[Nt]*e[de]+e[re]*e[Wt]*e[jt]*e[de]-e[Ot]*e[ge]*e[jt]*e[de]-e[we]*e[Wt]*e[Ie]*e[de]+e[Ot]*e[qt]*e[Ie]*e[de]+e[re]*e[he]*e[Nt]*e[ie]-e[te]*e[ge]*e[Nt]*e[ie]-e[re]*e[Wt]*e[ce]*e[ie]+e[Ot]*e[ge]*e[ce]*e[ie]+e[te]*e[Wt]*e[Ie]*e[ie]-e[Ot]*e[he]*e[Ie]*e[ie]-e[we]*e[he]*e[Nt]*e[pe]+e[te]*e[qt]*e[Nt]*e[pe]+e[we]*e[Wt]*e[ce]*e[pe]-e[Ot]*e[qt]*e[ce]*e[pe]-e[te]*e[Wt]*e[jt]*e[pe]+e[Ot]*e[he]*e[jt]*e[pe];if(o==0)throw new Error("non-invertible matrix");let a=1/o;return i[Ot]=e[ce]*e[ie]*e[ge]-e[de]*e[jt]*e[ge]+e[de]*e[qt]*e[Ie]-e[he]*e[ie]*e[Ie]-e[ce]*e[qt]*e[pe]+e[he]*e[jt]*e[pe],i[Wt]=e[Zt]*e[jt]*e[ge]-e[Nt]*e[ie]*e[ge]-e[Zt]*e[qt]*e[Ie]+e[Wt]*e[ie]*e[Ie]+e[Nt]*e[qt]*e[pe]-e[Wt]*e[jt]*e[pe],i[Nt]=e[Nt]*e[de]*e[ge]-e[Zt]*e[ce]*e[ge]+e[Zt]*e[he]*e[Ie]-e[Wt]*e[de]*e[Ie]-e[Nt]*e[he]*e[pe]+e[Wt]*e[ce]*e[pe],i[Zt]=e[Zt]*e[ce]*e[qt]-e[Nt]*e[de]*e[qt]-e[Zt]*e[he]*e[jt]+e[Wt]*e[de]*e[jt]+e[Nt]*e[he]*e[ie]-e[Wt]*e[ce]*e[ie],i[te]=e[de]*e[jt]*e[re]-e[ce]*e[ie]*e[re]-e[de]*e[we]*e[Ie]+e[te]*e[ie]*e[Ie]+e[ce]*e[we]*e[pe]-e[te]*e[jt]*e[pe],i[he]=e[Nt]*e[ie]*e[re]-e[Zt]*e[jt]*e[re]+e[Zt]*e[we]*e[Ie]-e[Ot]*e[ie]*e[Ie]-e[Nt]*e[we]*e[pe]+e[Ot]*e[jt]*e[pe],i[ce]=e[Zt]*e[ce]*e[re]-e[Nt]*e[de]*e[re]-e[Zt]*e[te]*e[Ie]+e[Ot]*e[de]*e[Ie]+e[Nt]*e[te]*e[pe]-e[Ot]*e[ce]*e[pe],i[de]=e[Nt]*e[de]*e[we]-e[Zt]*e[ce]*e[we]+e[Zt]*e[te]*e[jt]-e[Ot]*e[de]*e[jt]-e[Nt]*e[te]*e[ie]+e[Ot]*e[ce]*e[ie],i[we]=e[he]*e[ie]*e[re]-e[de]*e[qt]*e[re]+e[de]*e[we]*e[ge]-e[te]*e[ie]*e[ge]-e[he]*e[we]*e[pe]+e[te]*e[qt]*e[pe],i[qt]=e[Zt]*e[qt]*e[re]-e[Wt]*e[ie]*e[re]-e[Zt]*e[we]*e[ge]+e[Ot]*e[ie]*e[ge]+e[Wt]*e[we]*e[pe]-e[Ot]*e[qt]*e[pe],i[jt]=e[Wt]*e[de]*e[re]-e[Zt]*e[he]*e[re]+e[Zt]*e[te]*e[ge]-e[Ot]*e[de]*e[ge]-e[Wt]*e[te]*e[pe]+e[Ot]*e[he]*e[pe],i[ie]=e[Zt]*e[he]*e[we]-e[Wt]*e[de]*e[we]-e[Zt]*e[te]*e[qt]+e[Ot]*e[de]*e[qt]+e[Wt]*e[te]*e[ie]-e[Ot]*e[he]*e[ie],i[re]=e[ce]*e[qt]*e[re]-e[he]*e[jt]*e[re]-e[ce]*e[we]*e[ge]+e[te]*e[jt]*e[ge]+e[he]*e[we]*e[Ie]-e[te]*e[qt]*e[Ie],i[ge]=e[Wt]*e[jt]*e[re]-e[Nt]*e[qt]*e[re]+e[Nt]*e[we]*e[ge]-e[Ot]*e[jt]*e[ge]-e[Wt]*e[we]*e[Ie]+e[Ot]*e[qt]*e[Ie],i[Ie]=e[Nt]*e[he]*e[re]-e[Wt]*e[ce]*e[re]-e[Nt]*e[te]*e[ge]+e[Ot]*e[ce]*e[ge]+e[Wt]*e[te]*e[Ie]-e[Ot]*e[he]*e[Ie],i[pe]=e[Wt]*e[ce]*e[we]-e[Nt]*e[he]*e[we]+e[Nt]*e[te]*e[qt]-e[Ot]*e[ce]*e[qt]-e[Wt]*e[te]*e[jt]+e[Ot]*e[he]*e[jt],e[Ot]=i[Ot]*a,e[Wt]=i[Wt]*a,e[Nt]=i[Nt]*a,e[Zt]=i[Zt]*a,e[te]=i[te]*a,e[he]=i[he]*a,e[ce]=i[ce]*a,e[de]=i[de]*a,e[we]=i[we]*a,e[qt]=i[qt]*a,e[jt]=i[jt]*a,e[ie]=i[ie]*a,e[re]=i[re]*a,e[ge]=i[ge]*a,e[Ie]=i[Ie]*a,e[pe]=i[pe]*a,this}determinant(){let e=this.values;return e[re]*e[qt]*e[ce]*e[Zt]-e[we]*e[ge]*e[ce]*e[Zt]-e[re]*e[he]*e[jt]*e[Zt]+e[te]*e[ge]*e[jt]*e[Zt]+e[we]*e[he]*e[Ie]*e[Zt]-e[te]*e[qt]*e[Ie]*e[Zt]-e[re]*e[qt]*e[Nt]*e[de]+e[we]*e[ge]*e[Nt]*e[de]+e[re]*e[Wt]*e[jt]*e[de]-e[Ot]*e[ge]*e[jt]*e[de]-e[we]*e[Wt]*e[Ie]*e[de]+e[Ot]*e[qt]*e[Ie]*e[de]+e[re]*e[he]*e[Nt]*e[ie]-e[te]*e[ge]*e[Nt]*e[ie]-e[re]*e[Wt]*e[ce]*e[ie]+e[Ot]*e[ge]*e[ce]*e[ie]+e[te]*e[Wt]*e[Ie]*e[ie]-e[Ot]*e[he]*e[Ie]*e[ie]-e[we]*e[he]*e[Nt]*e[pe]+e[te]*e[qt]*e[Nt]*e[pe]+e[we]*e[Wt]*e[ce]*e[pe]-e[Ot]*e[qt]*e[ce]*e[pe]-e[te]*e[Wt]*e[jt]*e[pe]+e[Ot]*e[he]*e[jt]*e[pe]}translate(e,i,o){let a=this.values;return a[Zt]+=e,a[de]+=i,a[ie]+=o,this}copy(){return new ri().set(this.values)}projection(e,i,o,a){this.identity();let p=1/Math.tan(o*(Math.PI/180)/2),m=(i+e)/(e-i),g=2*i*e/(e-i),w=this.values;return w[Ot]=p/a,w[te]=0,w[we]=0,w[re]=0,w[Wt]=0,w[he]=p,w[qt]=0,w[ge]=0,w[Nt]=0,w[ce]=0,w[jt]=m,w[Ie]=-1,w[Zt]=0,w[de]=0,w[ie]=g,w[pe]=0,this}ortho2d(e,i,o,a){return this.ortho(e,e+o,i,i+a,0,1)}ortho(e,i,o,a,p,m){this.identity();let g=2/(i-e),w=2/(a-o),b=-2/(m-p),C=-(i+e)/(i-e),F=-(a+o)/(a-o),L=-(m+p)/(m-p),N=this.values;return N[Ot]=g,N[te]=0,N[we]=0,N[re]=0,N[Wt]=0,N[he]=w,N[qt]=0,N[ge]=0,N[Nt]=0,N[ce]=0,N[jt]=b,N[Ie]=0,N[Zt]=C,N[de]=F,N[ie]=L,N[pe]=1,this}multiply(e){let i=this.temp,o=this.values,a=e.values;return i[Ot]=o[Ot]*a[Ot]+o[Wt]*a[te]+o[Nt]*a[we]+o[Zt]*a[re],i[Wt]=o[Ot]*a[Wt]+o[Wt]*a[he]+o[Nt]*a[qt]+o[Zt]*a[ge],i[Nt]=o[Ot]*a[Nt]+o[Wt]*a[ce]+o[Nt]*a[jt]+o[Zt]*a[Ie],i[Zt]=o[Ot]*a[Zt]+o[Wt]*a[de]+o[Nt]*a[ie]+o[Zt]*a[pe],i[te]=o[te]*a[Ot]+o[he]*a[te]+o[ce]*a[we]+o[de]*a[re],i[he]=o[te]*a[Wt]+o[he]*a[he]+o[ce]*a[qt]+o[de]*a[ge],i[ce]=o[te]*a[Nt]+o[he]*a[ce]+o[ce]*a[jt]+o[de]*a[Ie],i[de]=o[te]*a[Zt]+o[he]*a[de]+o[ce]*a[ie]+o[de]*a[pe],i[we]=o[we]*a[Ot]+o[qt]*a[te]+o[jt]*a[we]+o[ie]*a[re],i[qt]=o[we]*a[Wt]+o[qt]*a[he]+o[jt]*a[qt]+o[ie]*a[ge],i[jt]=o[we]*a[Nt]+o[qt]*a[ce]+o[jt]*a[jt]+o[ie]*a[Ie],i[ie]=o[we]*a[Zt]+o[qt]*a[de]+o[jt]*a[ie]+o[ie]*a[pe],i[re]=o[re]*a[Ot]+o[ge]*a[te]+o[Ie]*a[we]+o[pe]*a[re],i[ge]=o[re]*a[Wt]+o[ge]*a[he]+o[Ie]*a[qt]+o[pe]*a[ge],i[Ie]=o[re]*a[Nt]+o[ge]*a[ce]+o[Ie]*a[jt]+o[pe]*a[Ie],i[pe]=o[re]*a[Zt]+o[ge]*a[de]+o[Ie]*a[ie]+o[pe]*a[pe],this.set(this.temp)}multiplyLeft(e){let i=this.temp,o=this.values,a=e.values;return i[Ot]=a[Ot]*o[Ot]+a[Wt]*o[te]+a[Nt]*o[we]+a[Zt]*o[re],i[Wt]=a[Ot]*o[Wt]+a[Wt]*o[he]+a[Nt]*o[qt]+a[Zt]*o[ge],i[Nt]=a[Ot]*o[Nt]+a[Wt]*o[ce]+a[Nt]*o[jt]+a[Zt]*o[Ie],i[Zt]=a[Ot]*o[Zt]+a[Wt]*o[de]+a[Nt]*o[ie]+a[Zt]*o[pe],i[te]=a[te]*o[Ot]+a[he]*o[te]+a[ce]*o[we]+a[de]*o[re],i[he]=a[te]*o[Wt]+a[he]*o[he]+a[ce]*o[qt]+a[de]*o[ge],i[ce]=a[te]*o[Nt]+a[he]*o[ce]+a[ce]*o[jt]+a[de]*o[Ie],i[de]=a[te]*o[Zt]+a[he]*o[de]+a[ce]*o[ie]+a[de]*o[pe],i[we]=a[we]*o[Ot]+a[qt]*o[te]+a[jt]*o[we]+a[ie]*o[re],i[qt]=a[we]*o[Wt]+a[qt]*o[he]+a[jt]*o[qt]+a[ie]*o[ge],i[jt]=a[we]*o[Nt]+a[qt]*o[ce]+a[jt]*o[jt]+a[ie]*o[Ie],i[ie]=a[we]*o[Zt]+a[qt]*o[de]+a[jt]*o[ie]+a[ie]*o[pe],i[re]=a[re]*o[Ot]+a[ge]*o[te]+a[Ie]*o[we]+a[pe]*o[re],i[ge]=a[re]*o[Wt]+a[ge]*o[he]+a[Ie]*o[qt]+a[pe]*o[ge],i[Ie]=a[re]*o[Nt]+a[ge]*o[ce]+a[Ie]*o[jt]+a[pe]*o[Ie],i[pe]=a[re]*o[Zt]+a[ge]*o[de]+a[Ie]*o[ie]+a[pe]*o[pe],this.set(this.temp)}lookAt(e,i,o){let a=ri.xAxis,p=ri.yAxis,m=ri.zAxis;m.setFrom(i).normalize(),a.setFrom(i).normalize(),a.cross(o).normalize(),p.setFrom(a).cross(m).normalize(),this.identity();let g=this.values;return g[Ot]=a.x,g[Wt]=a.y,g[Nt]=a.z,g[te]=p.x,g[he]=p.y,g[ce]=p.z,g[we]=-m.x,g[qt]=-m.y,g[jt]=-m.z,ri.tmpMatrix.identity(),ri.tmpMatrix.values[Zt]=-e.x,ri.tmpMatrix.values[de]=-e.y,ri.tmpMatrix.values[ie]=-e.z,this.multiply(ri.tmpMatrix),this}},Fr=class{position=new $t(0,0,0);direction=new $t(0,0,-1);up=new $t(0,1,0);near=0;far=100;zoom=1;viewportWidth=0;viewportHeight=0;projectionView=new oi;inverseProjectionView=new oi;projection=new oi;view=new oi;constructor(s,e){this.viewportWidth=s,this.viewportHeight=e,this.update();}update(){let s=this.projection,e=this.view,i=this.projectionView,o=this.inverseProjectionView,a=this.zoom,p=this.viewportWidth,m=this.viewportHeight;s.ortho(a*(-p/2),a*(p/2),a*(-m/2),a*(m/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),i.set(s.values),i.multiply(e),o.set(i.values).invert();}screenToWorld(s,e,i){let o=s.x,a=i-s.y-1;return s.x=2*o/e-1,s.y=2*a/i-1,s.z=2*s.z-1,s.project(this.inverseProjectionView),s}worldToScreen(s,e,i){return s.project(this.projectionView),s.x=e*(s.x+1)/2,s.y=i*(s.y+1)/2,s.z=(s.z+1)/2,s}setViewport(s,e){this.viewportWidth=s,this.viewportHeight=e;}},Hs=class{element;mouseX=0;mouseY=0;buttonDown=false;touch0=null;touch1=null;initialPinchDistance=0;listeners=new Array;autoPreventDefault;isTouch=false;callbacks;constructor(s,e=true){this.element=s,this.autoPreventDefault=e,this.callbacks=this.setupCallbacks(s);}setupCallbacks(s){let e=w=>{if(w instanceof MouseEvent&&!this.isTouch){let b=s.getBoundingClientRect();this.mouseX=w.clientX-b.left,this.mouseY=w.clientY-b.top,this.buttonDown=true,this.listeners.map(C=>{C.down&&C.down(this.mouseX,this.mouseY,w);});}},i=w=>{if(w instanceof MouseEvent&&!this.isTouch){let b=s.getBoundingClientRect();this.mouseX=w.clientX-b.left,this.mouseY=w.clientY-b.top,this.listeners.map(C=>{this.buttonDown?C.dragged&&C.dragged(this.mouseX,this.mouseY,w):C.moved&&C.moved(this.mouseX,this.mouseY,w);});}},o=w=>{if(w instanceof MouseEvent&&!this.isTouch){let b=s.getBoundingClientRect();this.mouseX=w.clientX-b.left,this.mouseY=w.clientY-b.top,this.buttonDown=false,this.listeners.map(C=>{C.up&&C.up(this.mouseX,this.mouseY,w);});}},a=w=>{this.autoPreventDefault&&w.preventDefault();let b=w.deltaY;w.deltaMode==WheelEvent.DOM_DELTA_LINE&&(b*=8),w.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(b*=24),this.listeners.map(C=>{C.wheel&&C.wheel(w.deltaY,w);});},p=w=>{if(this.isTouch=true,!this.touch0||!this.touch1){var b=w.changedTouches;let C=b.item(0);if(!C)return;let F=s.getBoundingClientRect(),L=C.clientX-F.left,N=C.clientY-F.top,O=new nr(C.identifier,L,N);if(this.mouseX=L,this.mouseY=N,this.buttonDown=true,!this.touch0)this.touch0=O,this.listeners.map(Z=>{Z.down&&Z.down(O.x,O.y,w);});else if(!this.touch1){this.touch1=O;let Z=this.touch1.x-this.touch0.x,q=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(Z*Z+q*q),this.listeners.map(j=>{j.zoom&&j.zoom(this.initialPinchDistance,this.initialPinchDistance,w);});}}this.autoPreventDefault&&w.preventDefault();},m=w=>{if(this.isTouch=true,this.touch0){var b=w.changedTouches;let L=s.getBoundingClientRect();for(var C=0;C<b.length;C++){var F=b[C];let N=F.clientX-L.left,O=F.clientY-L.top;this.touch0.identifier===F.identifier&&(this.touch0.x=this.mouseX=N,this.touch0.y=this.mouseY=O,this.listeners.map(Z=>{Z.dragged&&Z.dragged(N,O,w);})),this.touch1&&this.touch1.identifier===F.identifier&&(this.touch1.x=this.mouseX=N,this.touch1.y=this.mouseY=O);}if(this.touch0&&this.touch1){let N=this.touch1.x-this.touch0.x,O=this.touch1.x-this.touch0.x,Z=Math.sqrt(N*N+O*O);this.listeners.map(q=>{q.zoom&&q.zoom(this.initialPinchDistance,Z,w);});}}this.autoPreventDefault&&w.preventDefault();},g=w=>{if(this.isTouch=true,this.touch0){var b=w.changedTouches;let L=s.getBoundingClientRect();for(var C=0;C<b.length;C++){var F=b[C];let N=F.clientX-L.left,O=F.clientY-L.top;if(this.touch0.identifier===F.identifier)if(this.touch0=null,this.mouseX=N,this.mouseY=O,this.listeners.map(Z=>{Z.up&&Z.up(N,O,w);}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=true,this.listeners.map(Z=>{Z.down&&Z.down(this.touch0.x,this.touch0.y,w);});else {this.buttonDown=false;break}this.touch1&&this.touch1.identifier&&(this.touch1=null);}}this.autoPreventDefault&&w.preventDefault();};return s.addEventListener("mousedown",e,true),s.addEventListener("mousemove",i,true),s.addEventListener("mouseup",o,true),s.addEventListener("wheel",a,true),s.addEventListener("touchstart",p,{passive:false,capture:false}),s.addEventListener("touchmove",m,{passive:false,capture:false}),s.addEventListener("touchend",g,{passive:false,capture:false}),s.addEventListener("touchcancel",g),{mouseDown:e,mouseMove:i,mouseUp:o,mouseWheel:a,touchStart:p,touchMove:m,touchEnd:g}}dispose(){let s=this.element;s.removeEventListener("mousedown",this.callbacks.mouseDown,true),s.removeEventListener("mousemove",this.callbacks.mouseMove,true),s.removeEventListener("mouseup",this.callbacks.mouseUp,true),s.removeEventListener("wheel",this.callbacks.mouseWheel,true),s.removeEventListener("touchstart",this.callbacks.touchStart,{capture:false}),s.removeEventListener("touchmove",this.callbacks.touchMove,{capture:false}),s.removeEventListener("touchend",this.callbacks.touchEnd,{capture:false}),s.removeEventListener("touchcancel",this.callbacks.touchEnd),this.listeners.length=0;}addListener(s){this.listeners.push(s);}removeListener(s){let e=this.listeners.indexOf(s);e>-1&&this.listeners.splice(e,1);}},nr=class{constructor(s,e,i){this.identifier=s,this.x=e,this.y=i;}},Pr=class{constructor(s,e){this.canvas=s,this.camera=e;let i=0,o=0,p=0,m=0,g=0,w=0,b=0;new Hs(s).addListener({down:(C,F)=>{i=e.position.x,o=e.position.y,p=g=C,m=w=F,b=e.zoom;},dragged:(C,F)=>{let L=C-p,N=F-m,O=e.screenToWorld(new $t(0,0),s.clientWidth,s.clientHeight),Z=e.screenToWorld(new $t(L,N),s.clientWidth,s.clientHeight).sub(O);e.position.set(i-Z.x,o-Z.y,0),e.update(),g=C,w=F;},wheel:C=>{let F=C/200*e.zoom,L=e.zoom+F;if(L>0){let N=0,O=0;if(C<0)N=g,O=w;else {let j=new $t(s.clientWidth/2+15,s.clientHeight/2),_=g-j.x,H=s.clientHeight-1-w-j.y;N=j.x-_,O=s.clientHeight-1-j.y+H;}let Z=e.screenToWorld(new $t(N,O),s.clientWidth,s.clientHeight);e.zoom=L,e.update();let q=e.screenToWorld(new $t(N,O),s.clientWidth,s.clientHeight);e.position.add(Z.sub(q)),e.update();}},zoom:(C,F)=>{let L=C/F;e.zoom=b*L;},up:(C,F)=>{g=C,w=F;},moved:(C,F)=>{g=C,w=F;}});}},rs=class ns{constructor(e,i,o){this.vertexShader=i,this.fragmentShader=o,this.vsSource=i,this.fsSource=o,this.context=e instanceof Jt?e:new Jt(e),this.context.addRestorable(this),this.compile();}static MVP_MATRIX="u_projTrans";static POSITION="a_position";static COLOR="a_color";static COLOR2="a_color2";static TEXCOORDS="a_texCoords";static SAMPLER="u_texture";context;vs=null;vsSource;fs=null;fsSource;program=null;tmp2x2=new Float32Array(4);tmp3x3=new Float32Array(9);tmp4x4=new Float32Array(16);getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let e=this.context.gl;try{if(this.vs=this.compileShader(e.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(e.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs);}catch(i){throw this.dispose(),i}}compileShader(e,i){let o=this.context.gl,a=o.createShader(e);if(!a)throw new Error("Couldn't create shader.");if(o.shaderSource(a,i),o.compileShader(a),!o.getShaderParameter(a,o.COMPILE_STATUS)){let p="Couldn't compile shader: "+o.getShaderInfoLog(a);if(o.deleteShader(a),!o.isContextLost())throw new Error(p)}return a}compileProgram(e,i){let o=this.context.gl,a=o.createProgram();if(!a)throw new Error("Couldn't compile program.");if(o.attachShader(a,e),o.attachShader(a,i),o.linkProgram(a),!o.getProgramParameter(a,o.LINK_STATUS)){let p="Couldn't compile shader program: "+o.getProgramInfoLog(a);if(o.deleteProgram(a),!o.isContextLost())throw new Error(p)}return a}restore(){this.compile();}bind(){this.context.gl.useProgram(this.program);}unbind(){this.context.gl.useProgram(null);}setUniformi(e,i){this.context.gl.uniform1i(this.getUniformLocation(e),i);}setUniformf(e,i){this.context.gl.uniform1f(this.getUniformLocation(e),i);}setUniform2f(e,i,o){this.context.gl.uniform2f(this.getUniformLocation(e),i,o);}setUniform3f(e,i,o,a){this.context.gl.uniform3f(this.getUniformLocation(e),i,o,a);}setUniform4f(e,i,o,a,p){this.context.gl.uniform4f(this.getUniformLocation(e),i,o,a,p);}setUniform2x2f(e,i){let o=this.context.gl;this.tmp2x2.set(i),o.uniformMatrix2fv(this.getUniformLocation(e),false,this.tmp2x2);}setUniform3x3f(e,i){let o=this.context.gl;this.tmp3x3.set(i),o.uniformMatrix3fv(this.getUniformLocation(e),false,this.tmp3x3);}setUniform4x4f(e,i){let o=this.context.gl;this.tmp4x4.set(i),o.uniformMatrix4fv(this.getUniformLocation(e),false,this.tmp4x4);}getUniformLocation(e){let i=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let o=i.getUniformLocation(this.program,e);if(!o&&!i.isContextLost())throw new Error(`Couldn't find location for uniform ${e}`);return o}getAttributeLocation(e){let i=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let o=i.getAttribLocation(this.program,e);if(o==-1&&!i.isContextLost())throw new Error(`Couldn't find location for attribute ${e}`);return o}dispose(){this.context.removeRestorable(this);let e=this.context.gl;this.vs&&(e.deleteShader(this.vs),this.vs=null),this.fs&&(e.deleteShader(this.fs),this.fs=null),this.program&&(e.deleteProgram(this.program),this.program=null);}static newColoredTextured(e){let i=`
attribute vec4 ${ns.POSITION};
attribute vec4 ${ns.COLOR};
attribute vec2 ${ns.TEXCOORDS};
uniform mat4 ${ns.MVP_MATRIX};
varying vec4 v_color;
varying vec2 v_texCoords;

void main () {
	v_color = ${ns.COLOR};
	v_texCoords = ${ns.TEXCOORDS};
	gl_Position = ${ns.MVP_MATRIX} * ${ns.POSITION};
}
`,o=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
}
`;return new ns(e,i,o)}static newTwoColoredTextured(e){let i=`
attribute vec4 ${ns.POSITION};
attribute vec4 ${ns.COLOR};
attribute vec4 ${ns.COLOR2};
attribute vec2 ${ns.TEXCOORDS};
uniform mat4 ${ns.MVP_MATRIX};
varying vec4 v_light;
varying vec4 v_dark;
varying vec2 v_texCoords;

void main () {
	v_light = ${ns.COLOR};
	v_dark = ${ns.COLOR2};
	v_texCoords = ${ns.TEXCOORDS};
	gl_Position = ${ns.MVP_MATRIX} * ${ns.POSITION};
}
`,o=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_light;
varying LOWP vec4 v_dark;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	vec4 texColor = texture2D(u_texture, v_texCoords);
	gl_FragColor.a = texColor.a * v_light.a;
	gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
}
`;return new ns(e,i,o)}static newColored(e){let i=`
attribute vec4 ${ns.POSITION};
attribute vec4 ${ns.COLOR};
uniform mat4 ${ns.MVP_MATRIX};
varying vec4 v_color;

void main () {
	v_color = ${ns.COLOR};
	gl_Position = ${ns.MVP_MATRIX} * ${ns.POSITION};
}
`,o=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;

void main () {
	gl_FragColor = v_color;
}
`;return new ns(e,i,o)}},xi=class{constructor(s,e,i,o){this.attributes=e,this.context=s instanceof Jt?s:new Jt(s),this.elementsPerVertex=0;for(let a=0;a<e.length;a++)this.elementsPerVertex+=e[a].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(o),this.context.addRestorable(this);}context;vertices;verticesBuffer=null;verticesLength=0;dirtyVertices=false;indices;indicesBuffer=null;indicesLength=0;dirtyIndices=false;elementsPerVertex=0;getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(s){this.dirtyVertices=true,this.verticesLength=s;}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(s){this.dirtyIndices=true,this.indicesLength=s;}getIndices(){return this.indices}getVertexSizeInFloats(){let s=0;for(var e=0;e<this.attributes.length;e++){let i=this.attributes[e];s+=i.numElements;}return s}setVertices(s){if(this.dirtyVertices=true,s.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(s,0),this.verticesLength=s.length;}setIndices(s){if(this.dirtyIndices=true,s.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(s,0),this.indicesLength=s.length;}draw(s,e){this.drawWithOffset(s,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex);}drawWithOffset(s,e,i,o){let a=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(s),this.indicesLength>0?a.drawElements(e,o,a.UNSIGNED_SHORT,i*2):a.drawArrays(e,i,o),this.unbind(s);}bind(s){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let i=0;for(let o=0;o<this.attributes.length;o++){let a=this.attributes[o],p=s.getAttributeLocation(a.name);e.enableVertexAttribArray(p),e.vertexAttribPointer(p,a.numElements,e.FLOAT,false,this.elementsPerVertex*4,i*4),i+=a.numElements;}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);}unbind(s){let e=this.context.gl;for(let i=0;i<this.attributes.length;i++){let o=this.attributes[i],a=s.getAttributeLocation(o.name);e.disableVertexAttribArray(a);}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);}update(){let s=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=s.createBuffer()),s.bindBuffer(s.ARRAY_BUFFER,this.verticesBuffer),s.bufferData(s.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),s.DYNAMIC_DRAW),this.dirtyVertices=false),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=s.createBuffer()),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),s.DYNAMIC_DRAW),this.dirtyIndices=false);}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update();}dispose(){this.context.removeRestorable(this);let s=this.context.gl;s.deleteBuffer(this.verticesBuffer),s.deleteBuffer(this.indicesBuffer);}},ti=class{constructor(s,e,i){this.name=s,this.type=e,this.numElements=i;}},ar=class extends ti{constructor(){super(rs.POSITION,0,2);}},nn=class extends ti{constructor(){super(rs.POSITION,0,3);}},Xi=class extends ti{constructor(s=0){super(rs.TEXCOORDS+(s==0?"":s),0,2);}},Mt=class extends ti{constructor(){super(rs.COLOR,0,4);}},Bi=class extends ti{constructor(){super(rs.COLOR2,0,4);}},Vi=(s=>(s[s.Float=0]="Float",s))(Vi||{}),Js=1,vi=769,wi=770,ci=771,Lr=774,Xr=class qi{static disableCulling=false;context;drawCalls=0;static globalDrawCalls=0;isDrawing=false;mesh;shader=null;lastTexture=null;verticesLength=0;indicesLength=0;srcColorBlend;srcAlphaBlend;dstBlend;cullWasEnabled=false;constructor(e,i=true,o=10920){if(o>10920)throw new Error("Can't have more than 10920 triangles per batch: "+o);this.context=e instanceof Jt?e:new Jt(e);let a=i?[new ar,new Mt,new Xi,new Bi]:[new ar,new Mt,new Xi];this.mesh=new xi(e,a,o,o*3);let p=this.context.gl;this.srcColorBlend=p.SRC_ALPHA,this.srcAlphaBlend=p.ONE,this.dstBlend=p.ONE_MINUS_SRC_ALPHA;}begin(e){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=e,this.lastTexture=null,this.isDrawing=true;let i=this.context.gl;i.enable(i.BLEND),i.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}static blendModesGL=[{srcRgb:wi,srcRgbPma:Js,dstRgb:ci,srcAlpha:Js},{srcRgb:wi,srcRgbPma:Js,dstRgb:Js,srcAlpha:Js},{srcRgb:Lr,srcRgbPma:Lr,dstRgb:ci,srcAlpha:Js},{srcRgb:Js,srcRgbPma:Js,dstRgb:vi,srcAlpha:Js}];setBlendMode(e,i){let o=qi.blendModesGL[e],a=i?o.srcRgbPma:o.srcRgb,p=o.srcAlpha,m=o.dstRgb;this.srcColorBlend==a&&this.srcAlphaBlend==p&&this.dstBlend==m||(this.srcColorBlend=a,this.srcAlphaBlend=p,this.dstBlend=m,this.isDrawing&&this.flush(),this.context.gl.blendFuncSeparate(a,m,p,m));}draw(e,i,o){e!=this.lastTexture?(this.flush(),this.lastTexture=e):(this.verticesLength+i.length>this.mesh.getVertices().length||this.indicesLength+o.length>this.mesh.getIndices().length)&&this.flush();let a=this.mesh.numVertices();this.mesh.getVertices().set(i,this.verticesLength),this.verticesLength+=i.length,this.mesh.setVerticesLength(this.verticesLength);let p=this.mesh.getIndices();for(let m=this.indicesLength,g=0;g<o.length;m++,g++)p[m]=o[g]+a;this.indicesLength+=o.length,this.mesh.setIndicesLength(this.indicesLength);}flush(){if(this.verticesLength!=0){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,qi.globalDrawCalls++;}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=false;let e=this.context.gl;e.disable(e.BLEND);}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let e=qi.globalDrawCalls;return qi.globalDrawCalls=0,e}dispose(){this.mesh.dispose();}},Di=class{context;isDrawing=false;mesh;shapeType=4;color=new V(1,1,1,1);shader=null;vertexIndex=0;tmp=new st;srcColorBlend;srcAlphaBlend;dstBlend;constructor(s,e=10920){if(e>10920)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=s instanceof Jt?s:new Jt(s),this.mesh=new xi(s,[new ar,new Mt],e,0);let i=this.context.gl;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA;}begin(s){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=s,this.vertexIndex=0,this.isDrawing=true;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}setBlendMode(s,e,i){this.srcColorBlend=s,this.srcAlphaBlend=e,this.dstBlend=i,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(s,i,e,i));}setColor(s){this.color.setFromColor(s);}setColorWith(s,e,i,o){this.color.set(s,e,i,o);}point(s,e,i){this.check(0,1),i||(i=this.color),this.vertex(s,e,i);}line(s,e,i,o,a){this.check(1,2);this.mesh.getVertices();this.vertexIndex;a||(a=this.color),this.vertex(s,e,a),this.vertex(i,o,a);}triangle(s,e,i,o,a,p,m,g,w,b){this.check(s?4:1,3);this.mesh.getVertices();this.vertexIndex;g||(g=this.color),w||(w=this.color),b||(b=this.color),s?(this.vertex(e,i,g),this.vertex(o,a,w),this.vertex(p,m,b)):(this.vertex(e,i,g),this.vertex(o,a,w),this.vertex(o,a,g),this.vertex(p,m,w),this.vertex(p,m,g),this.vertex(e,i,w));}quad(s,e,i,o,a,p,m,g,w,b,C,F,L){this.check(s?4:1,3);this.mesh.getVertices();this.vertexIndex;b||(b=this.color),C||(C=this.color),F||(F=this.color),L||(L=this.color),s?(this.vertex(e,i,b),this.vertex(o,a,C),this.vertex(p,m,F),this.vertex(p,m,F),this.vertex(g,w,L),this.vertex(e,i,b)):(this.vertex(e,i,b),this.vertex(o,a,C),this.vertex(o,a,C),this.vertex(p,m,F),this.vertex(p,m,F),this.vertex(g,w,L),this.vertex(g,w,L),this.vertex(e,i,b));}rect(s,e,i,o,a,p){this.quad(s,e,i,e+o,i,e+o,i+a,e,i+a,p,p,p,p);}rectLine(s,e,i,o,a,p,m){this.check(s?4:1,8),m||(m=this.color);let g=this.tmp.set(a-i,e-o);g.normalize(),p*=.5;let w=g.x*p,b=g.y*p;s?(this.vertex(e+w,i+b,m),this.vertex(e-w,i-b,m),this.vertex(o+w,a+b,m),this.vertex(o-w,a-b,m),this.vertex(o+w,a+b,m),this.vertex(e-w,i-b,m)):(this.vertex(e+w,i+b,m),this.vertex(e-w,i-b,m),this.vertex(o+w,a+b,m),this.vertex(o-w,a-b,m),this.vertex(o+w,a+b,m),this.vertex(e+w,i+b,m),this.vertex(o-w,a-b,m),this.vertex(e-w,i-b,m));}x(s,e,i){this.line(s-i,e-i,s+i,e+i),this.line(s-i,e+i,s+i,e-i);}polygon(s,e,i,o){if(i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(1,i*2),o||(o=this.color);this.mesh.getVertices();this.vertexIndex;e<<=1,i<<=1;let m=s[e],g=s[e+1],w=e+i;for(let b=e,C=e+i-2;b<C;b+=2){let F=s[b],L=s[b+1],N=0,O=0;b+2>=w?(N=m,O=g):(N=s[b+2],O=s[b+3]),this.vertex(F,L,o),this.vertex(N,O,o);}}circle(s,e,i,o,a,p=0){if(p==0&&(p=Math.max(1,6*I.cbrt(o)|0)),p<=0)throw new Error("segments must be > 0.");a||(a=this.color);let m=2*I.PI/p,g=Math.cos(m),w=Math.sin(m),b=o,C=0;if(s){this.check(4,p*3+3),p--;for(let L=0;L<p;L++){this.vertex(e,i,a),this.vertex(e+b,i+C,a);let N=b;b=g*b-w*C,C=w*N+g*C,this.vertex(e+b,i+C,a);}this.vertex(e,i,a),this.vertex(e+b,i+C,a);}else {this.check(1,p*2+2);for(let L=0;L<p;L++){this.vertex(e+b,i+C,a);let N=b;b=g*b-w*C,C=w*N+g*C,this.vertex(e+b,i+C,a);}this.vertex(e+b,i+C,a);}b=o,C=0,this.vertex(e+b,i+C,a);}curve(s,e,i,o,a,p,m,g,w,b){this.check(1,w*2+2),b||(b=this.color);let C=1/w,F=C*C,L=C*C*C,N=3*C,O=3*F,Z=6*F,q=6*L,j=s-i*2+a,_=e-o*2+p,H=(i-a)*3-s+m,K=(o-p)*3-e+g,rt=s,lt=e,vt=(i-s)*N+j*O+H*L,pt=(o-e)*N+_*O+K*L,xt=j*Z+H*q,Et=_*Z+K*q,Ft=H*q,Vt=K*q;for(;w-- >0;)this.vertex(rt,lt,b),rt+=vt,lt+=pt,vt+=xt,pt+=Et,xt+=Ft,Et+=Vt,this.vertex(rt,lt,b);this.vertex(rt,lt,b),this.vertex(m,g,b);}vertex(s,e,i){let o=this.vertexIndex,a=this.mesh.getVertices();a[o++]=s,a[o++]=e,a[o++]=i.r,a[o++]=i.g,a[o++]=i.b,a[o++]=i.a,this.vertexIndex=o;}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let s=this.context.gl;s.disable(s.BLEND),this.isDrawing=false;}flush(){if(this.vertexIndex!=0){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0;}}check(s,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==s)if(this.mesh.maxVertices()-this.mesh.numVertices()<e)this.flush();else return;else this.flush(),this.shapeType=s;}dispose(){this.mesh.dispose();}},Br=(s=>(s[s.Point=0]="Point",s[s.Line=1]="Line",s[s.Filled=4]="Filled",s))(Br||{}),Vr=class ta{boneLineColor=new V(1,0,0,1);boneOriginColor=new V(0,1,0,1);attachmentLineColor=new V(0,0,1,.5);triangleLineColor=new V(1,.64,0,.5);pathColor=new V().setFromString("FF7F00");clipColor=new V(.8,0,0,2);aabbColor=new V(0,1,0,.5);drawBones=true;drawRegionAttachments=true;drawBoundingBoxes=true;drawMeshHull=true;drawMeshTriangles=true;drawPaths=true;drawSkeletonXY=false;drawClipping=true;premultipliedAlpha=false;scale=1;boneWidth=2;context;bounds=new ae;temp=new Array;vertices=X.newFloatArray(2*1024);static LIGHT_GRAY=new V(192/255,192/255,192/255,1);static GREEN=new V(0,1,0,1);constructor(e){this.context=e instanceof Jt?e:new Jt(e);}draw(e,i,o){let a=i.x,p=i.y,m=this.context.gl,g=this.premultipliedAlpha?m.ONE:m.SRC_ALPHA;e.setBlendMode(g,m.ONE,m.ONE_MINUS_SRC_ALPHA);let w=i.bones;if(this.drawBones){e.setColor(this.boneLineColor);for(let b=0,C=w.length;b<C;b++){let F=w[b];if(o&&o.indexOf(F.data.name)>-1||!F.parent)continue;let L=F.data.length*F.a+F.worldX,N=F.data.length*F.c+F.worldY;e.rectLine(true,F.worldX,F.worldY,L,N,this.boneWidth*this.scale);}this.drawSkeletonXY&&e.x(a,p,4*this.scale);}if(this.drawRegionAttachments){e.setColor(this.attachmentLineColor);let b=i.slots;for(let C=0,F=b.length;C<F;C++){let L=b[C],N=L.getAttachment();if(N instanceof mi){let O=N,Z=this.vertices;O.computeWorldVertices(L,Z,0,2),e.line(Z[0],Z[1],Z[2],Z[3]),e.line(Z[2],Z[3],Z[4],Z[5]),e.line(Z[4],Z[5],Z[6],Z[7]),e.line(Z[6],Z[7],Z[0],Z[1]);}}}if(this.drawMeshHull||this.drawMeshTriangles){let b=i.slots;for(let C=0,F=b.length;C<F;C++){let L=b[C];if(!L.bone.active)continue;let N=L.getAttachment();if(!(N instanceof li))continue;let O=N,Z=this.vertices;O.computeWorldVertices(L,0,O.worldVerticesLength,Z,0,2);let q=O.triangles,j=O.hullLength;if(this.drawMeshTriangles){e.setColor(this.triangleLineColor);for(let _=0,H=q.length;_<H;_+=3){let K=q[_]*2,rt=q[_+1]*2,lt=q[_+2]*2;e.triangle(false,Z[K],Z[K+1],Z[rt],Z[rt+1],Z[lt],Z[lt+1]);}}if(this.drawMeshHull&&j>0){e.setColor(this.attachmentLineColor),j=(j>>1)*2;let _=Z[j-2],H=Z[j-1];for(let K=0,rt=j;K<rt;K+=2){let lt=Z[K],vt=Z[K+1];e.line(lt,vt,_,H),_=lt,H=vt;}}}}if(this.drawBoundingBoxes){let b=this.bounds;b.update(i,true),e.setColor(this.aabbColor),e.rect(false,b.minX,b.minY,b.getWidth(),b.getHeight());let C=b.polygons,F=b.boundingBoxes;for(let L=0,N=C.length;L<N;L++){let O=C[L];e.setColor(F[L].color),e.polygon(O,0,O.length);}}if(this.drawPaths){let b=i.slots;for(let C=0,F=b.length;C<F;C++){let L=b[C];if(!L.bone.active)continue;let N=L.getAttachment();if(!(N instanceof ai))continue;let O=N,Z=O.worldVerticesLength,q=this.temp=X.setArraySize(this.temp,Z,0);O.computeWorldVertices(L,0,Z,q,0,2);let j=this.pathColor,_=q[2],H=q[3],K=0,rt=0;if(O.closed){e.setColor(j);let lt=q[0],vt=q[1],pt=q[Z-2],xt=q[Z-1];K=q[Z-4],rt=q[Z-3],e.curve(_,H,lt,vt,pt,xt,K,rt,32),e.setColor(ta.LIGHT_GRAY),e.line(_,H,lt,vt),e.line(K,rt,pt,xt);}Z-=4;for(let lt=4;lt<Z;lt+=6){let vt=q[lt],pt=q[lt+1],xt=q[lt+2],Et=q[lt+3];K=q[lt+4],rt=q[lt+5],e.setColor(j),e.curve(_,H,vt,pt,xt,Et,K,rt,32),e.setColor(ta.LIGHT_GRAY),e.line(_,H,vt,pt),e.line(K,rt,xt,Et),_=K,H=rt;}}}if(this.drawBones){e.setColor(this.boneOriginColor);for(let b=0,C=w.length;b<C;b++){let F=w[b];o&&o.indexOf(F.data.name)>-1||e.circle(true,F.worldX,F.worldY,3*this.scale,this.boneOriginColor,8);}}if(this.drawClipping){let b=i.slots;e.setColor(this.clipColor);for(let C=0,F=b.length;C<F;C++){let L=b[C];if(!L.bone.active)continue;let N=L.getAttachment();if(!(N instanceof Ps))continue;let O=N,Z=O.worldVerticesLength,q=this.temp=X.setArraySize(this.temp,Z,0);O.computeWorldVertices(L,0,Z,q,0,2);for(let j=0,_=q.length;j<_;j+=2){let H=q[j],K=q[j+1],rt=q[(j+2)%q.length],lt=q[(j+3)%q.length];e.line(H,K,rt,lt);}}}}dispose(){}},di=class{constructor(s,e,i){this.vertices=s,this.numVertices=e,this.numFloats=i;}},an=class Ia{static QUAD_TRIANGLES=[0,1,2,2,3,0];premultipliedAlpha=false;tempColor=new V;tempColor2=new V;vertices;vertexSize=8;twoColorTint=false;renderable=new di([],0,0);clipper=new fe;temp=new st;temp2=new st;temp3=new V;temp4=new V;constructor(e,i=true){this.twoColorTint=i,i&&(this.vertexSize+=4),this.vertices=X.newFloatArray(this.vertexSize*1024);}draw(e,i,o=-1,a=-1,p=null){let m=this.clipper,g=this.premultipliedAlpha,w=this.twoColorTint,b=null,C=this.renderable,F,L,N=i.drawOrder,O,Z=i.color,q=w?12:8,j=false;o==-1&&(j=true);for(let _=0,H=N.length;_<H;_++){let K=m.isClipping()?2:q,rt=N[_];if(!rt.bone.active){m.clipEndWithSlot(rt);continue}if(o>=0&&o==rt.data.index&&(j=true),!j){m.clipEndWithSlot(rt);continue}a>=0&&a==rt.data.index&&(j=false);let lt=rt.getAttachment(),vt;if(lt instanceof mi){let pt=lt;C.vertices=this.vertices,C.numVertices=4,C.numFloats=K<<2,pt.computeWorldVertices(rt,C.vertices,0,K),L=Ia.QUAD_TRIANGLES,F=pt.uvs,vt=pt.region.texture,O=pt.color;}else if(lt instanceof li){let pt=lt;C.vertices=this.vertices,C.numVertices=pt.worldVerticesLength>>1,C.numFloats=C.numVertices*K,C.numFloats>C.vertices.length&&(C.vertices=this.vertices=X.newFloatArray(C.numFloats)),pt.computeWorldVertices(rt,0,pt.worldVerticesLength,C.vertices,0,K),L=pt.triangles,vt=pt.region.texture,F=pt.uvs,O=pt.color;}else if(lt instanceof Ps){let pt=lt;m.clipStart(rt,pt);continue}else {m.clipEndWithSlot(rt);continue}if(vt){let pt=rt.color,xt=this.tempColor;xt.r=Z.r*pt.r*O.r,xt.g=Z.g*pt.g*O.g,xt.b=Z.b*pt.b*O.b,xt.a=Z.a*pt.a*O.a,g&&(xt.r*=xt.a,xt.g*=xt.a,xt.b*=xt.a);let Et=this.tempColor2;rt.darkColor?(g?(Et.r=rt.darkColor.r*xt.a,Et.g=rt.darkColor.g*xt.a,Et.b=rt.darkColor.b*xt.a):Et.setFromColor(rt.darkColor),Et.a=g?1:0):Et.set(0,0,0,1);let Ft=rt.data.blendMode;if(Ft!=b&&(b=Ft,e.setBlendMode(b,g)),m.isClipping()){m.clipTriangles(C.vertices,L,L.length,F,xt,Et,w);let Vt=new Float32Array(m.clippedVertices),Ut=m.clippedTriangles;p&&p(Vt,Vt.length,q),e.draw(vt,Vt,Ut);}else {let Vt=C.vertices;if(w)for(let St=2,It=0,Ht=C.numFloats;St<Ht;St+=q,It+=2)Vt[St]=xt.r,Vt[St+1]=xt.g,Vt[St+2]=xt.b,Vt[St+3]=xt.a,Vt[St+4]=F[It],Vt[St+5]=F[It+1],Vt[St+6]=Et.r,Vt[St+7]=Et.g,Vt[St+8]=Et.b,Vt[St+9]=Et.a;else for(let St=2,It=0,Ht=C.numFloats;St<Ht;St+=q,It+=2)Vt[St]=xt.r,Vt[St+1]=xt.g,Vt[St+2]=xt.b,Vt[St+3]=xt.a,Vt[St+4]=F[It],Vt[St+5]=F[It+1];let Ut=C.vertices.subarray(0,C.numFloats);p&&p(C.vertices,C.numFloats,q),e.draw(vt,Ut,L);}}m.clipEndWithSlot(rt);}m.clipEnd();}getSkeletonClipping(){return this.clipper}},At=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],or=[0,1,2,2,3,0],lr=new V(1,1,1,1),t=class{context;canvas;camera;batcher;twoColorTint=false;batcherShader;shapes;shapesShader;activeRenderer=null;skeletonRenderer;skeletonDebugRenderer;constructor(s,e,i=true){this.canvas=s,this.context=e instanceof Jt?e:new Jt(e),this.twoColorTint=i,this.camera=new Fr(s.width,s.height),this.batcherShader=i?rs.newTwoColoredTextured(this.context):rs.newColoredTextured(this.context),this.batcher=new Xr(this.context,i),this.shapesShader=rs.newColored(this.context),this.shapes=new Di(this.context),this.skeletonRenderer=new an(this.context,i),this.skeletonDebugRenderer=new Vr(this.context);}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose();}begin(){this.camera.update(),this.enableRenderer(this.batcher);}drawSkeleton(s,e=false,i=-1,o=-1,a=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,s,i,o,a);}drawSkeletonDebug(s,e=false,i){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,s,i);}drawTexture(s,e,i,o,a,p){this.enableRenderer(this.batcher),p||(p=lr);var m=0;At[m++]=e,At[m++]=i,At[m++]=p.r,At[m++]=p.g,At[m++]=p.b,At[m++]=p.a,At[m++]=0,At[m++]=1,this.twoColorTint&&(At[m++]=0,At[m++]=0,At[m++]=0,At[m++]=0),At[m++]=e+o,At[m++]=i,At[m++]=p.r,At[m++]=p.g,At[m++]=p.b,At[m++]=p.a,At[m++]=1,At[m++]=1,this.twoColorTint&&(At[m++]=0,At[m++]=0,At[m++]=0,At[m++]=0),At[m++]=e+o,At[m++]=i+a,At[m++]=p.r,At[m++]=p.g,At[m++]=p.b,At[m++]=p.a,At[m++]=1,At[m++]=0,this.twoColorTint&&(At[m++]=0,At[m++]=0,At[m++]=0,At[m++]=0),At[m++]=e,At[m++]=i+a,At[m++]=p.r,At[m++]=p.g,At[m++]=p.b,At[m++]=p.a,At[m++]=0,At[m++]=0,this.twoColorTint&&(At[m++]=0,At[m++]=0,At[m++]=0,At[m]=0),this.batcher.draw(s,At,or);}drawTextureUV(s,e,i,o,a,p,m,g,w,b){this.enableRenderer(this.batcher),b||(b=lr);var C=0;At[C++]=e,At[C++]=i,At[C++]=b.r,At[C++]=b.g,At[C++]=b.b,At[C++]=b.a,At[C++]=p,At[C++]=m,this.twoColorTint&&(At[C++]=0,At[C++]=0,At[C++]=0,At[C++]=0),At[C++]=e+o,At[C++]=i,At[C++]=b.r,At[C++]=b.g,At[C++]=b.b,At[C++]=b.a,At[C++]=g,At[C++]=m,this.twoColorTint&&(At[C++]=0,At[C++]=0,At[C++]=0,At[C++]=0),At[C++]=e+o,At[C++]=i+a,At[C++]=b.r,At[C++]=b.g,At[C++]=b.b,At[C++]=b.a,At[C++]=g,At[C++]=w,this.twoColorTint&&(At[C++]=0,At[C++]=0,At[C++]=0,At[C++]=0),At[C++]=e,At[C++]=i+a,At[C++]=b.r,At[C++]=b.g,At[C++]=b.b,At[C++]=b.a,At[C++]=p,At[C++]=w,this.twoColorTint&&(At[C++]=0,At[C++]=0,At[C++]=0,At[C]=0),this.batcher.draw(s,At,or);}drawTextureRotated(s,e,i,o,a,p,m,g,w){this.enableRenderer(this.batcher),w||(w=lr);let b=e+p,C=i+m,F=-p,L=-m,N=o-p,O=a-m,Z=F,q=L,j=F,_=O,H=N,K=O,rt=N,lt=L,vt=0,pt=0,xt=0,Et=0,Ft=0,Vt=0,Ut=0,St=0;if(g!=0){let Ht=I.cosDeg(g),Oe=I.sinDeg(g);vt=Ht*Z-Oe*q,pt=Oe*Z+Ht*q,Ut=Ht*j-Oe*_,St=Oe*j+Ht*_,Ft=Ht*H-Oe*K,Vt=Oe*H+Ht*K,xt=Ft+(vt-Ut),Et=Vt+(pt-St);}else vt=Z,pt=q,Ut=j,St=_,Ft=H,Vt=K,xt=rt,Et=lt;vt+=b,pt+=C,xt+=b,Et+=C,Ft+=b,Vt+=C,Ut+=b,St+=C;var It=0;At[It++]=vt,At[It++]=pt,At[It++]=w.r,At[It++]=w.g,At[It++]=w.b,At[It++]=w.a,At[It++]=0,At[It++]=1,this.twoColorTint&&(At[It++]=0,At[It++]=0,At[It++]=0,At[It++]=0),At[It++]=xt,At[It++]=Et,At[It++]=w.r,At[It++]=w.g,At[It++]=w.b,At[It++]=w.a,At[It++]=1,At[It++]=1,this.twoColorTint&&(At[It++]=0,At[It++]=0,At[It++]=0,At[It++]=0),At[It++]=Ft,At[It++]=Vt,At[It++]=w.r,At[It++]=w.g,At[It++]=w.b,At[It++]=w.a,At[It++]=1,At[It++]=0,this.twoColorTint&&(At[It++]=0,At[It++]=0,At[It++]=0,At[It++]=0),At[It++]=Ut,At[It++]=St,At[It++]=w.r,At[It++]=w.g,At[It++]=w.b,At[It++]=w.a,At[It++]=0,At[It++]=0,this.twoColorTint&&(At[It++]=0,At[It++]=0,At[It++]=0,At[It]=0),this.batcher.draw(s,At,or);}drawRegion(s,e,i,o,a,p){this.enableRenderer(this.batcher),p||(p=lr);var m=0;At[m++]=e,At[m++]=i,At[m++]=p.r,At[m++]=p.g,At[m++]=p.b,At[m++]=p.a,At[m++]=s.u,At[m++]=s.v2,this.twoColorTint&&(At[m++]=0,At[m++]=0,At[m++]=0,At[m++]=0),At[m++]=e+o,At[m++]=i,At[m++]=p.r,At[m++]=p.g,At[m++]=p.b,At[m++]=p.a,At[m++]=s.u2,At[m++]=s.v2,this.twoColorTint&&(At[m++]=0,At[m++]=0,At[m++]=0,At[m++]=0),At[m++]=e+o,At[m++]=i+a,At[m++]=p.r,At[m++]=p.g,At[m++]=p.b,At[m++]=p.a,At[m++]=s.u2,At[m++]=s.v,this.twoColorTint&&(At[m++]=0,At[m++]=0,At[m++]=0,At[m++]=0),At[m++]=e,At[m++]=i+a,At[m++]=p.r,At[m++]=p.g,At[m++]=p.b,At[m++]=p.a,At[m++]=s.u,At[m++]=s.v,this.twoColorTint&&(At[m++]=0,At[m++]=0,At[m++]=0,At[m]=0),this.batcher.draw(s.page.texture,At,or);}line(s,e,i,o,a,p){this.enableRenderer(this.shapes),this.shapes.line(s,e,i,o,a);}triangle(s,e,i,o,a,p,m,g,w,b){this.enableRenderer(this.shapes),this.shapes.triangle(s,e,i,o,a,p,m,g,w,b);}quad(s,e,i,o,a,p,m,g,w,b,C,F,L){this.enableRenderer(this.shapes),this.shapes.quad(s,e,i,o,a,p,m,g,w,b,C,F,L);}rect(s,e,i,o,a,p){this.enableRenderer(this.shapes),this.shapes.rect(s,e,i,o,a,p);}rectLine(s,e,i,o,a,p,m){this.enableRenderer(this.shapes),this.shapes.rectLine(s,e,i,o,a,p,m);}polygon(s,e,i,o){this.enableRenderer(this.shapes),this.shapes.polygon(s,e,i,o);}circle(s,e,i,o,a,p=0){this.enableRenderer(this.shapes),this.shapes.circle(s,e,i,o,a,p);}curve(s,e,i,o,a,p,m,g,w,b){this.enableRenderer(this.shapes),this.shapes.curve(s,e,i,o,a,p,m,g,w,b);}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null;}resize(s){let e=this.canvas;var i=window.devicePixelRatio||1,o=Math.round(e.clientWidth*i),a=Math.round(e.clientHeight*i);if((e.width!=o||e.height!=a)&&(e.width=o,e.height=a),this.context.gl.viewport(0,0,e.width,e.height),s===1)this.camera.setViewport(o,a);else if(s===2){let p=e.width,m=e.height,g=this.camera.viewportWidth,w=this.camera.viewportHeight,b=w/g,C=m/p,F=b<C?g/p:w/m;this.camera.setViewport(p*F,m*F);}this.camera.update();}enableRenderer(s){this.activeRenderer!==s&&(this.end(),s instanceof Xr?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(rs.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):s instanceof Di?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(rs.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer);}},l=(s=>(s[s.Stretch=0]="Stretch",s[s.Expand=1]="Expand",s[s.Fit=2]="Fit",s))(l||{}),h,x,A=0,U=1,R=1,y=165,P=108,Y=163,B=class{renderer;logo=null;spinner=null;angle=0;fadeOut=0;fadeIn=0;timeKeeper=new ut;backgroundColor=new V(.135,.135,.135,1);tempColor=new V;constructor(s){if(this.renderer=s,this.timeKeeper.maxDelta=9,!x){let e=navigator.userAgent.indexOf("Safari")>-1,i=()=>A++;x=new Image,x.src=J,e||(x.crossOrigin="anonymous"),x.onload=i,h=new Image,h.src=G,e||(h.crossOrigin="anonymous"),h.onload=i;}}dispose(){var s,e;(s=this.logo)==null||s.dispose(),(e=this.spinner)==null||e.dispose();}draw(s=false){if(A<2||s&&this.fadeOut>R)return;this.timeKeeper.update();let e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=this.timeKeeper.delta*200*(1+1.5*Math.pow(e,5));let i=this.tempColor,o=this.renderer,a=o.canvas,p=o.context.gl;if(o.resize(1),o.camera.position.set(a.width/2,a.height/2,0),o.batcher.setBlendMode(0,true),s){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>R)return;i.setFromColor(this.backgroundColor),e=1-this.fadeOut/R,e=1-(e-1)*(e-1),i.a*=e,i.a>0&&(o.camera.zoom=1,o.begin(),o.quad(true,0,0,a.width,0,a.width,a.height,0,a.height,i,i,i,i),o.end());}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(p.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),p.clear(p.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/U,1),i.set(e,e,e,e),this.logo||(this.logo=new ee(o.context,x),this.spinner=new ee(o.context,h)),o.camera.zoom=Math.max(1,Y/a.height),o.begin(),o.drawTexture(this.logo,(a.width-y)/2,(a.height-P)/2,y,P,i),this.spinner&&o.drawTextureRotated(this.spinner,(a.width-Y)/2,(a.height-Y)/2,Y,Y,Y/2,Y/2,this.angle,i),o.end();}drawInCoordinates(s,e){if(A<2)return;this.timeKeeper.update();let i=this.renderer;i.batcher.setBlendMode(0,true),this.logo||(this.logo=new ee(i.context,x),this.spinner=new ee(i.context,h));let o=s-y/2,a=e-P/2;i.drawTexture(this.logo,o,a,y,P),this.angle-=this.timeKeeper.delta*500,this.spinner&&i.drawTextureRotated(this.spinner,o,a-25,Y,Y,Y/2,Y/2,this.angle);}},G="data:image/png;base64,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",J="data:image/png;base64,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",tt=class{constructor(s,e){this.config=e,e.pathPrefix||(e.pathPrefix=""),e.app||(e.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{},dispose:()=>{}}),e.webglConfig||(e.webglConfig={alpha:true}),this.htmlCanvas=s,this.context=new Jt(s,e.webglConfig),this.renderer=new t(s,this.context),this.gl=this.context.gl,this.assetManager=new le(this.context,e.pathPrefix),this.input=new Hs(s),e.app.loadAssets&&e.app.loadAssets(this);let i=()=>{this.disposed||(requestAnimationFrame(i),this.time.update(),e.app.update&&e.app.update(this,this.time.delta),e.app.render&&e.app.render(this));},o=()=>{if(!this.disposed){if(this.assetManager.isLoadingComplete()){this.assetManager.hasErrors()?e.app.error&&e.app.error(this,this.assetManager.getErrors()):(e.app.initialize&&e.app.initialize(this),i());return}requestAnimationFrame(o);}};requestAnimationFrame(o);}context;time=new ut;htmlCanvas;gl;renderer;assetManager;input;disposed=false;clear(s,e,i,o){this.gl.clearColor(s,e,i,o),this.gl.clear(this.gl.COLOR_BUFFER_BIT);}dispose(){this.config.app.dispose&&this.config.app.dispose(this),this.disposed=true;}};return u(d)})(),Ea=Bo;var Vo={"4.2webgl":Ea},Ra=Vo;var ka="https://l2d-cn.kivotos.qzz.io/",sa="Airi_home",Ya=prompt("root:",localStorage.getItem("root")||ka)||ka;localStorage.setItem("root",Ya);var ni=Ra["4.2webgl"];console.log(ni);window.spine=ni;alert("spine loaded");function Fa(T,f,r,v,c){T.updateWorldTransform(ni.Physics.update),f.update(),r.update(f.delta),r.apply(T),v.begin(),v.drawSkeleton(T);let{x:n,y:u,width:d,height:M}=T.getBoundsRect();v.rect(false,n,u,d,M,new Ge(0,1,0,1)),v.line(n,T.y,n+d,T.y,new Ge(0,0,1,1)),v.line(T.x,u,T.x,u+M,new Ge(0,0,1,1)),v.end(),T.x=c.x,T.y=c.y,requestAnimationFrame(()=>Fa(T,f,r,v,c));}var ia=document.createElement("div");document.body.appendChild(ia);var Ks=document.createElement("canvas");Ks.width=1e3;Ks.height=1e3;Ks.style.height="90vh";ia.appendChild(Ks);var Pa=document.createElement("span"),ea={x:0,y:0};ia.appendChild(Pa);var La=Ks.getContext("webgl2"),Xa=new ni.SceneRenderer(Ks,La);window.r=Xa;var Zr=new ni.AssetManager(La,Ya+sa.toLowerCase()+"/"),Ba=sa+".atlas",Va=sa+".skel";Zr.loadTextureAtlas(Ba);Zr.loadBinary(Va);Zr.loadAll().then(()=>{let T=new ni.AtlasAttachmentLoader(Zr.get(Ba)),r=new ni.SkeletonBinary(T).readSkeletonData(Zr.get(Va)),v=new ni.Skeleton(r);v.scaleX=.3,v.scaleY=.3,window.s=v;let c=new ni.AnimationStateData(r),n=new ni.AnimationState(c);window.as=n,Fa(v,new ni.TimeKeeper,n,Xa,ea);});function Do({x:T,y:f}){Pa.innerText=`X:${T},Y:${f}`;}Ks.addEventListener("mousemove",T=>{let f=Ks.getBoundingClientRect();Object.assign(ea,{x:(T.clientX-f.left)/f.width*Ks.width-Ks.width/2,y:Ks.height/2-(T.clientY-f.top)/f.height*Ks.height}),Do(ea);});
})();