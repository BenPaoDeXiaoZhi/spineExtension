(function(){'use strict';/* deploy by dev
 - Deploy time: 2025/12/14 13:12:48
*/
var Be=(function(){var L=function(Yt,l){return (L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,y){R.__proto__=y;}||function(R,y){for(var a in y)Object.prototype.hasOwnProperty.call(y,a)&&(R[a]=y[a]);})(Yt,l)};return function(Yt,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function R(){this.constructor=Yt;}L(Yt,l),Yt.prototype=l===null?Object.create(l):(R.prototype=l.prototype,new R);}})(),Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et;((function(L){var Yt=(function(){function st(G,et,ct){if(G==null)throw new Error("name cannot be null.");if(et==null)throw new Error("timelines cannot be null.");this.name=G,this.timelines=et,this.timelineIds=[];for(var rt=0;rt<et.length;rt++)this.timelineIds[et[rt].getPropertyId()]=true;this.duration=ct;}return st.prototype.hasTimeline=function(G){return this.timelineIds[G]==1},st.prototype.apply=function(G,et,ct,rt,Tt,ht,ut,Rt){if(G==null)throw new Error("skeleton cannot be null.");rt&&this.duration!=0&&(ct%=this.duration,et>0&&(et%=this.duration));for(var at=this.timelines,_=0,ot=at.length;_<ot;_++)at[_].apply(G,et,ct,Tt,ht,ut,Rt);},st.binarySearch=function(G,et,ct){ct===void 0&&(ct=1);var rt=0,Tt=G.length/ct-2;if(Tt==0)return ct;for(var ht=Tt>>>1;;){if(G[(ht+1)*ct]<=et?rt=ht+1:Tt=ht,rt==Tt)return (rt+1)*ct;ht=rt+Tt>>>1;}},st.linearSearch=function(G,et,ct){for(var rt=0,Tt=G.length-ct;rt<=Tt;rt+=ct)if(G[rt]>et)return rt;return  -1},st})(),l,R,y;L.Animation=Yt,(function(st){st[st.setup=0]="setup",st[st.first=1]="first",st[st.replace=2]="replace",st[st.add=3]="add";})(l=L.MixBlend||(L.MixBlend={})),(function(st){st[st.mixIn=0]="mixIn",st[st.mixOut=1]="mixOut";})(R=L.MixDirection||(L.MixDirection={})),(function(st){st[st.rotate=0]="rotate",st[st.translate=1]="translate",st[st.scale=2]="scale",st[st.shear=3]="shear",st[st.attachment=4]="attachment",st[st.color=5]="color",st[st.deform=6]="deform",st[st.event=7]="event",st[st.drawOrder=8]="drawOrder",st[st.ikConstraint=9]="ikConstraint",st[st.transformConstraint=10]="transformConstraint",st[st.pathConstraintPosition=11]="pathConstraintPosition",st[st.pathConstraintSpacing=12]="pathConstraintSpacing",st[st.pathConstraintMix=13]="pathConstraintMix",st[st.twoColor=14]="twoColor";})(y=L.TimelineType||(L.TimelineType={}));var a=(function(){function st(G){if(G<=0)throw new Error("frameCount must be > 0: "+G);this.curves=L.Utils.newFloatArray((G-1)*st.BEZIER_SIZE);}return st.prototype.getFrameCount=function(){return this.curves.length/st.BEZIER_SIZE+1},st.prototype.setLinear=function(G){this.curves[G*st.BEZIER_SIZE]=st.LINEAR;},st.prototype.setStepped=function(G){this.curves[G*st.BEZIER_SIZE]=st.STEPPED;},st.prototype.getCurveType=function(G){var et=G*st.BEZIER_SIZE;if(et==this.curves.length)return st.LINEAR;var ct=this.curves[et];return ct==st.LINEAR?st.LINEAR:ct==st.STEPPED?st.STEPPED:st.BEZIER},st.prototype.setCurve=function(G,et,ct,rt,Tt){var ht=.03*(2*-et+rt),ut=.03*(2*-ct+Tt),Rt=.006*(3*(et-rt)+1),at=.006*(3*(ct-Tt)+1),_=2*ht+Rt,ot=2*ut+at,xt=.3*et+ht+.16666667*Rt,Mt=.3*ct+ut+.16666667*at,Xt=G*st.BEZIER_SIZE,Dt=this.curves;Dt[Xt++]=st.BEZIER;for(var Lt=xt,Bt=Mt,Gt=Xt+st.BEZIER_SIZE-1;Xt<Gt;Xt+=2)Dt[Xt]=Lt,Dt[Xt+1]=Bt,xt+=_,Mt+=ot,_+=Rt,ot+=at,Lt+=xt,Bt+=Mt;},st.prototype.getCurvePercent=function(G,et){et=L.MathUtils.clamp(et,0,1);var ct=this.curves,rt=G*st.BEZIER_SIZE,Tt=ct[rt];if(Tt==st.LINEAR)return et;if(Tt==st.STEPPED)return 0;for(var ht=0,ut=++rt,Rt=rt+st.BEZIER_SIZE-1;rt<Rt;rt+=2)if((ht=ct[rt])>=et){var at=void 0,_=void 0;return rt==ut?(at=0,_=0):(at=ct[rt-2],_=ct[rt-1]),_+(ct[rt+1]-_)*(et-at)/(ht-at)}var ot=ct[rt-1];return ot+(1-ot)*(et-ht)/(1-ht)},st.LINEAR=0,st.STEPPED=1,st.BEZIER=2,st.BEZIER_SIZE=19,st})();L.CurveTimeline=a;var m=(function(st){function G(et){var ct=st.call(this,et)||this;return ct.frames=L.Utils.newFloatArray(et<<1),ct}return Be(G,st),G.prototype.getPropertyId=function(){return (y.rotate<<24)+this.boneIndex},G.prototype.setFrame=function(et,ct,rt){et<<=1,this.frames[et]=ct,this.frames[et+G.ROTATION]=rt;},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=this.frames,_=Skeleton.bones[this.boneIndex];if(_.active)if(rt<at[0])switch(ut){case l.setup:return void(_.rotation=_.data.rotation);case l.first:var ot=_.data.rotation-_.rotation;_.rotation+=(ot-360*(16384-(16384.499999999996-ot/360|0)))*ht;}else if(rt>=at[at.length-G.ENTRIES]){var xt=at[at.length+G.PREV_ROTATION];switch(ut){case l.setup:_.rotation=_.data.rotation+xt*ht;break;case l.first:case l.replace:xt+=_.data.rotation-_.rotation,xt-=360*(16384-(16384.499999999996-xt/360|0));case l.add:_.rotation+=xt*ht;}}else {var Mt=Yt.binarySearch(at,rt,G.ENTRIES),Xt=at[Mt+G.PREV_ROTATION],Dt=at[Mt],Lt=this.getCurvePercent((Mt>>1)-1,1-(rt-Dt)/(at[Mt+G.PREV_TIME]-Dt)),Bt=at[Mt+G.ROTATION]-Xt;switch(Bt=Xt+(Bt-360*(16384-(16384.499999999996-Bt/360|0)))*Lt,ut){case l.setup:_.rotation=_.data.rotation+(Bt-360*(16384-(16384.499999999996-Bt/360|0)))*ht;break;case l.first:case l.replace:Bt+=_.data.rotation-_.rotation;case l.add:_.rotation+=(Bt-360*(16384-(16384.499999999996-Bt/360|0)))*ht;}}},G.ENTRIES=2,G.PREV_TIME=-2,G.PREV_ROTATION=-1,G.ROTATION=1,G})(a);L.RotateTimeline=m;var u=(function(st){function G(et){var ct=st.call(this,et)||this;return ct.frames=L.Utils.newFloatArray(et*G.ENTRIES),ct}return Be(G,st),G.prototype.getPropertyId=function(){return (y.translate<<24)+this.boneIndex},G.prototype.setFrame=function(et,ct,rt,Tt){et*=G.ENTRIES,this.frames[et]=ct,this.frames[et+G.X]=rt,this.frames[et+G.Y]=Tt;},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=this.frames,_=Skeleton.bones[this.boneIndex];if(_.active)if(rt<at[0])switch(ut){case l.setup:return _.x=_.data.x,void(_.y=_.data.y);case l.first:_.x+=(_.data.x-_.x)*ht,_.y+=(_.data.y-_.y)*ht;}else {var ot=0,xt=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_X],xt=at[at.length+G.PREV_Y];else {var Mt=Yt.binarySearch(at,rt,G.ENTRIES);ot=at[Mt+G.PREV_X],xt=at[Mt+G.PREV_Y];var Xt=at[Mt],Dt=this.getCurvePercent(Mt/G.ENTRIES-1,1-(rt-Xt)/(at[Mt+G.PREV_TIME]-Xt));ot+=(at[Mt+G.X]-ot)*Dt,xt+=(at[Mt+G.Y]-xt)*Dt;}switch(ut){case l.setup:_.x=_.data.x+ot*ht,_.y=_.data.y+xt*ht;break;case l.first:case l.replace:_.x+=(_.data.x+ot-_.x)*ht,_.y+=(_.data.y+xt-_.y)*ht;break;case l.add:_.x+=ot*ht,_.y+=xt*ht;}}},G.ENTRIES=3,G.PREV_TIME=-3,G.PREV_X=-2,G.PREV_Y=-1,G.X=1,G.Y=2,G})(a);L.TranslateTimeline=u;var A=(function(st){function G(et){return st.call(this,et)||this}return Be(G,st),G.prototype.getPropertyId=function(){return (y.scale<<24)+this.boneIndex},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=this.frames,_=Skeleton.bones[this.boneIndex];if(_.active)if(rt<at[0])switch(ut){case l.setup:return _.scaleX=_.data.scaleX,void(_.scaleY=_.data.scaleY);case l.first:_.scaleX+=(_.data.scaleX-_.scaleX)*ht,_.scaleY+=(_.data.scaleY-_.scaleY)*ht;}else {var ot=0,xt=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_X]*_.data.scaleX,xt=at[at.length+G.PREV_Y]*_.data.scaleY;else {var Mt=Yt.binarySearch(at,rt,G.ENTRIES);ot=at[Mt+G.PREV_X],xt=at[Mt+G.PREV_Y];var Xt=at[Mt],Dt=this.getCurvePercent(Mt/G.ENTRIES-1,1-(rt-Xt)/(at[Mt+G.PREV_TIME]-Xt));ot=(ot+(at[Mt+G.X]-ot)*Dt)*_.data.scaleX,xt=(xt+(at[Mt+G.Y]-xt)*Dt)*_.data.scaleY;}if(ht==1)ut==l.add?(_.scaleX+=ot-_.data.scaleX,_.scaleY+=xt-_.data.scaleY):(_.scaleX=ot,_.scaleY=xt);else {var Lt=0,Bt=0;if(Rt==R.mixOut)switch(ut){case l.setup:Lt=_.data.scaleX,Bt=_.data.scaleY,_.scaleX=Lt+(Math.abs(ot)*L.MathUtils.signum(Lt)-Lt)*ht,_.scaleY=Bt+(Math.abs(xt)*L.MathUtils.signum(Bt)-Bt)*ht;break;case l.first:case l.replace:Lt=_.scaleX,Bt=_.scaleY,_.scaleX=Lt+(Math.abs(ot)*L.MathUtils.signum(Lt)-Lt)*ht,_.scaleY=Bt+(Math.abs(xt)*L.MathUtils.signum(Bt)-Bt)*ht;break;case l.add:Lt=_.scaleX,Bt=_.scaleY,_.scaleX=Lt+(Math.abs(ot)*L.MathUtils.signum(Lt)-_.data.scaleX)*ht,_.scaleY=Bt+(Math.abs(xt)*L.MathUtils.signum(Bt)-_.data.scaleY)*ht;}else switch(ut){case l.setup:Lt=Math.abs(_.data.scaleX)*L.MathUtils.signum(ot),Bt=Math.abs(_.data.scaleY)*L.MathUtils.signum(xt),_.scaleX=Lt+(ot-Lt)*ht,_.scaleY=Bt+(xt-Bt)*ht;break;case l.first:case l.replace:Lt=Math.abs(_.scaleX)*L.MathUtils.signum(ot),Bt=Math.abs(_.scaleY)*L.MathUtils.signum(xt),_.scaleX=Lt+(ot-Lt)*ht,_.scaleY=Bt+(xt-Bt)*ht;break;case l.add:Lt=L.MathUtils.signum(ot),Bt=L.MathUtils.signum(xt),_.scaleX=Math.abs(_.scaleX)*Lt+(ot-Math.abs(_.data.scaleX)*Lt)*ht,_.scaleY=Math.abs(_.scaleY)*Bt+(xt-Math.abs(_.data.scaleY)*Bt)*ht;}}}},G})(u);L.ScaleTimeline=A;var S=(function(st){function G(et){return st.call(this,et)||this}return Be(G,st),G.prototype.getPropertyId=function(){return (y.shear<<24)+this.boneIndex},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=this.frames,_=Skeleton.bones[this.boneIndex];if(_.active)if(rt<at[0])switch(ut){case l.setup:return _.shearX=_.data.shearX,void(_.shearY=_.data.shearY);case l.first:_.shearX+=(_.data.shearX-_.shearX)*ht,_.shearY+=(_.data.shearY-_.shearY)*ht;}else {var ot=0,xt=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_X],xt=at[at.length+G.PREV_Y];else {var Mt=Yt.binarySearch(at,rt,G.ENTRIES);ot=at[Mt+G.PREV_X],xt=at[Mt+G.PREV_Y];var Xt=at[Mt],Dt=this.getCurvePercent(Mt/G.ENTRIES-1,1-(rt-Xt)/(at[Mt+G.PREV_TIME]-Xt));ot+=(at[Mt+G.X]-ot)*Dt,xt+=(at[Mt+G.Y]-xt)*Dt;}switch(ut){case l.setup:_.shearX=_.data.shearX+ot*ht,_.shearY=_.data.shearY+xt*ht;break;case l.first:case l.replace:_.shearX+=(_.data.shearX+ot-_.shearX)*ht,_.shearY+=(_.data.shearY+xt-_.shearY)*ht;break;case l.add:_.shearX+=ot*ht,_.shearY+=xt*ht;}}},G})(u);L.ShearTimeline=S;var O=(function(st){function G(et){var ct=st.call(this,et)||this;return ct.frames=L.Utils.newFloatArray(et*G.ENTRIES),ct}return Be(G,st),G.prototype.getPropertyId=function(){return (y.color<<24)+this.slotIndex},G.prototype.setFrame=function(et,ct,rt,Tt,ht,ut){et*=G.ENTRIES,this.frames[et]=ct,this.frames[et+G.R]=rt,this.frames[et+G.G]=Tt,this.frames[et+G.B]=ht,this.frames[et+G.A]=ut;},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=Skeleton.slots[this.slotIndex];if(at.bone.active){var _=this.frames;if(rt<_[0])switch(ut){case l.setup:return void at.color.setFromColor(at.data.color);case l.first:var ot=at.color,xt=at.data.color;ot.add((xt.r-ot.r)*ht,(xt.g-ot.g)*ht,(xt.b-ot.b)*ht,(xt.a-ot.a)*ht);}else {var Mt=0,Xt=0,Dt=0,Lt=0;if(rt>=_[_.length-G.ENTRIES]){var Bt=_.length;Mt=_[Bt+G.PREV_R],Xt=_[Bt+G.PREV_G],Dt=_[Bt+G.PREV_B],Lt=_[Bt+G.PREV_A];}else {var Gt=Yt.binarySearch(_,rt,G.ENTRIES);Mt=_[Gt+G.PREV_R],Xt=_[Gt+G.PREV_G],Dt=_[Gt+G.PREV_B],Lt=_[Gt+G.PREV_A];var kt=_[Gt],bt=this.getCurvePercent(Gt/G.ENTRIES-1,1-(rt-kt)/(_[Gt+G.PREV_TIME]-kt));Mt+=(_[Gt+G.R]-Mt)*bt,Xt+=(_[Gt+G.G]-Xt)*bt,Dt+=(_[Gt+G.B]-Dt)*bt,Lt+=(_[Gt+G.A]-Lt)*bt;}if(ht==1)at.color.set(Mt,Xt,Dt,Lt);else {var ot=at.color;ut==l.setup&&ot.setFromColor(at.data.color),ot.add((Mt-ot.r)*ht,(Xt-ot.g)*ht,(Dt-ot.b)*ht,(Lt-ot.a)*ht);}}}},G.ENTRIES=5,G.PREV_TIME=-5,G.PREV_R=-4,G.PREV_G=-3,G.PREV_B=-2,G.PREV_A=-1,G.R=1,G.G=2,G.B=3,G.A=4,G})(a);L.ColorTimeline=O;var T=(function(st){function G(et){var ct=st.call(this,et)||this;return ct.frames=L.Utils.newFloatArray(et*G.ENTRIES),ct}return Be(G,st),G.prototype.getPropertyId=function(){return (y.twoColor<<24)+this.slotIndex},G.prototype.setFrame=function(et,ct,rt,Tt,ht,ut,Rt,at,_){et*=G.ENTRIES,this.frames[et]=ct,this.frames[et+G.R]=rt,this.frames[et+G.G]=Tt,this.frames[et+G.B]=ht,this.frames[et+G.A]=ut,this.frames[et+G.R2]=Rt,this.frames[et+G.G2]=at,this.frames[et+G.B2]=_;},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=Skeleton.slots[this.slotIndex];if(at.bone.active){var _=this.frames;if(rt<_[0])switch(ut){case l.setup:return at.color.setFromColor(at.data.color),void at.darkColor.setFromColor(at.data.darkColor);case l.first:var ot=at.color,xt=at.darkColor,Mt=at.data.color,Xt=at.data.darkColor;ot.add((Mt.r-ot.r)*ht,(Mt.g-ot.g)*ht,(Mt.b-ot.b)*ht,(Mt.a-ot.a)*ht),xt.add((Xt.r-xt.r)*ht,(Xt.g-xt.g)*ht,(Xt.b-xt.b)*ht,0);}else {var Dt=0,Lt=0,Bt=0,Gt=0,kt=0,bt=0,wt=0;if(rt>=_[_.length-G.ENTRIES]){var Qt=_.length;Dt=_[Qt+G.PREV_R],Lt=_[Qt+G.PREV_G],Bt=_[Qt+G.PREV_B],Gt=_[Qt+G.PREV_A],kt=_[Qt+G.PREV_R2],bt=_[Qt+G.PREV_G2],wt=_[Qt+G.PREV_B2];}else {var ie=Yt.binarySearch(_,rt,G.ENTRIES);Dt=_[ie+G.PREV_R],Lt=_[ie+G.PREV_G],Bt=_[ie+G.PREV_B],Gt=_[ie+G.PREV_A],kt=_[ie+G.PREV_R2],bt=_[ie+G.PREV_G2],wt=_[ie+G.PREV_B2];var Kt=_[ie],Ae=this.getCurvePercent(ie/G.ENTRIES-1,1-(rt-Kt)/(_[ie+G.PREV_TIME]-Kt));Dt+=(_[ie+G.R]-Dt)*Ae,Lt+=(_[ie+G.G]-Lt)*Ae,Bt+=(_[ie+G.B]-Bt)*Ae,Gt+=(_[ie+G.A]-Gt)*Ae,kt+=(_[ie+G.R2]-kt)*Ae,bt+=(_[ie+G.G2]-bt)*Ae,wt+=(_[ie+G.B2]-wt)*Ae;}if(ht==1)at.color.set(Dt,Lt,Bt,Gt),at.darkColor.set(kt,bt,wt,1);else {var ot=at.color,xt=at.darkColor;ut==l.setup&&(ot.setFromColor(at.data.color),xt.setFromColor(at.data.darkColor)),ot.add((Dt-ot.r)*ht,(Lt-ot.g)*ht,(Bt-ot.b)*ht,(Gt-ot.a)*ht),xt.add((kt-xt.r)*ht,(bt-xt.g)*ht,(wt-xt.b)*ht,0);}}}},G.ENTRIES=8,G.PREV_TIME=-8,G.PREV_R=-7,G.PREV_G=-6,G.PREV_B=-5,G.PREV_A=-4,G.PREV_R2=-3,G.PREV_G2=-2,G.PREV_B2=-1,G.R=1,G.G=2,G.B=3,G.A=4,G.R2=5,G.G2=6,G.B2=7,G})(a);L.TwoColorTimeline=T;var N=(function(){function st(G){this.frames=L.Utils.newFloatArray(G),this.attachmentNames=new Array(G);}return st.prototype.getPropertyId=function(){return (y.attachment<<24)+this.slotIndex},st.prototype.getFrameCount=function(){return this.frames.length},st.prototype.setFrame=function(G,et,ct){this.frames[G]=et,this.attachmentNames[G]=ct;},st.prototype.apply=function(G,et,ct,rt,Tt,ht,ut){var Rt=Skeleton.slots[this.slotIndex];if(Rt.bone.active)if(ut!=R.mixOut){var at=this.frames;if(ct<at[0])ht!=l.setup&&ht!=l.first||this.setAttachment(G,Rt,Rt.data.attachmentName);else {var _=0;_=ct>=at[at.length-1]?at.length-1:Yt.binarySearch(at,ct,1)-1;var ot=this.attachmentNames[_];G.slots[this.slotIndex].setAttachment(ot==null?null:Skeleton.getAttachment(this.slotIndex,ot));}}else ht==l.setup&&this.setAttachment(G,Rt,Rt.data.attachmentName);},st.prototype.setAttachment=function(G,et,ct){et.setAttachment(ct==null?null:Skeleton.getAttachment(this.slotIndex,ct));},st})();L.AttachmentTimeline=N;var P=null,E=(function(st){function G(et){var ct=st.call(this,et)||this;return ct.frames=L.Utils.newFloatArray(et),ct.frameVertices=new Array(et),P==null&&(P=L.Utils.newFloatArray(64)),ct}return Be(G,st),G.prototype.getPropertyId=function(){return (y.deform<<27)+ +this.attachment.id+this.slotIndex},G.prototype.setFrame=function(et,ct,rt){this.frames[et]=ct,this.frameVertices[et]=rt;},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=Skeleton.slots[this.slotIndex];if(at.bone.active){var _=at.getAttachment();if(_ instanceof L.VertexAttachment&&_.deformAttachment==this.attachment){var ot=at.deform;ot.length==0&&(ut=l.setup);var xt=this.frameVertices,Mt=xt[0].length,Xt=this.frames;if(rt<Xt[0]){var Dt=_;switch(ut){case l.setup:return void(ot.length=0);case l.first:if(ht==1){ot.length=0;break}var Lt=L.Utils.setArraySize(ot,Mt);if(Dt.bones==null)for(var Bt=Dt.vertices,Gt=0;Gt<Mt;Gt++)Lt[Gt]+=(Bt[Gt]-Lt[Gt])*ht;else {ht=1-ht;for(var Gt=0;Gt<Mt;Gt++)Lt[Gt]*=ht;}}}else {var kt=L.Utils.setArraySize(ot,Mt);if(rt>=Xt[Xt.length-1]){var bt=xt[Xt.length-1],Dt;if(ht==1)if(ut==l.add)if((Dt=_).bones==null)for(var Bt=Dt.vertices,wt=0;wt<Mt;wt++)kt[wt]+=bt[wt]-Bt[wt];else for(var Qt=0;Qt<Mt;Qt++)kt[Qt]+=bt[Qt];else L.Utils.arrayCopy(bt,0,kt,0,Mt);else switch(ut){case l.setup:var ie=_;if(ie.bones==null)for(var Bt=ie.vertices,Kt=0;Kt<Mt;Kt++){var Ae=Bt[Kt];kt[Kt]=Ae+(bt[Kt]-Ae)*ht;}else for(var Le=0;Le<Mt;Le++)kt[Le]=bt[Le]*ht;break;case l.first:case l.replace:for(var ye=0;ye<Mt;ye++)kt[ye]+=(bt[ye]-kt[ye])*ht;break;case l.add:var Dt;if((Dt=_).bones==null)for(var Bt=Dt.vertices,Ye=0;Ye<Mt;Ye++)kt[Ye]+=(bt[Ye]-Bt[Ye])*ht;else for(var Ve=0;Ve<Mt;Ve++)kt[Ve]+=bt[Ve]*ht;}}else {var qe=Yt.binarySearch(Xt,rt),ze=xt[qe-1],Ue=xt[qe],_e=Xt[qe],We=this.getCurvePercent(qe-1,1-(rt-_e)/(Xt[qe-1]-_e)),Dt;if(ht==1)if(ut==l.add)if((Dt=_).bones==null)for(var Bt=Dt.vertices,Ze=0;Ze<Mt;Ze++){var Xe=ze[Ze];kt[Ze]+=Xe+(Ue[Ze]-Xe)*We-Bt[Ze];}else for(var $e=0;$e<Mt;$e++){var Xe=ze[$e];kt[$e]+=Xe+(Ue[$e]-Xe)*We;}else for(var De=0;De<Mt;De++){var Xe=ze[De];kt[De]=Xe+(Ue[De]-Xe)*We;}else switch(ut){case l.setup:var xi=_;if(xi.bones==null)for(var Bt=xi.vertices,ri=0;ri<Mt;ri++){var Xe=ze[ri],Ae=Bt[ri];kt[ri]=Ae+(Xe+(Ue[ri]-Xe)*We-Ae)*ht;}else for(var hi=0;hi<Mt;hi++){var Xe=ze[hi];kt[hi]=(Xe+(Ue[hi]-Xe)*We)*ht;}break;case l.first:case l.replace:for(var ti=0;ti<Mt;ti++){var Xe=ze[ti];kt[ti]+=(Xe+(Ue[ti]-Xe)*We-kt[ti])*ht;}break;case l.add:var Dt;if((Dt=_).bones==null)for(var Bt=Dt.vertices,ci=0;ci<Mt;ci++){var Xe=ze[ci];kt[ci]+=(Xe+(Ue[ci]-Xe)*We-Bt[ci])*ht;}else for(var Mi=0;Mi<Mt;Mi++){var Xe=ze[Mi];kt[Mi]+=(Xe+(Ue[Mi]-Xe)*We)*ht;}}}}}}},G})(a);L.DeformTimeline=E;var D=(function(){function st(G){this.frames=L.Utils.newFloatArray(G),this.events=new Array(G);}return st.prototype.getPropertyId=function(){return y.event<<24},st.prototype.getFrameCount=function(){return this.frames.length},st.prototype.setFrame=function(G,et){this.frames[G]=et.time,this.events[G]=et;},st.prototype.apply=function(G,et,ct,rt,Tt,ht,ut){if(rt!=null){var Rt=this.frames,at=this.frames.length;if(et>ct)this.apply(G,et,Number.MAX_VALUE,rt,Tt,ht,ut),et=-1;else if(et>=Rt[at-1])return;if(!(ct<Rt[0])){var _=0;if(et<Rt[0])_=0;else for(var ot=Rt[_=Yt.binarySearch(Rt,et)];_>0&&Rt[_-1]==ot;)_--;for(;_<at&&ct>=Rt[_];_++)rt.push(this.events[_]);}}},st})();L.EventTimeline=D;var q=(function(){function st(G){this.frames=L.Utils.newFloatArray(G),this.drawOrders=new Array(G);}return st.prototype.getPropertyId=function(){return y.drawOrder<<24},st.prototype.getFrameCount=function(){return this.frames.length},st.prototype.setFrame=function(G,et,ct){this.frames[G]=et,this.drawOrders[G]=ct;},st.prototype.apply=function(G,et,ct,rt,Tt,ht,ut){var Rt=Skeleton.drawOrder,at=Skeleton.slots;if(ut!=R.mixOut){var _=this.frames;if(ct<_[0])ht!=l.setup&&ht!=l.first||L.Utils.arrayCopy(G.slots,0,Skeleton.drawOrder,0,Skeleton.slots.length);else {var ot=0;ot=ct>=_[_.length-1]?_.length-1:Yt.binarySearch(_,ct)-1;var xt=this.drawOrders[ot];if(xt==null)L.Utils.arrayCopy(at,0,Rt,0,at.length);else for(var Mt=0,Xt=xt.length;Mt<Xt;Mt++)Rt[Mt]=at[xt[Mt]];}}else ht==l.setup&&L.Utils.arrayCopy(G.slots,0,Skeleton.drawOrder,0,Skeleton.slots.length);},st})();L.DrawOrderTimeline=q;var $=(function(st){function G(et){var ct=st.call(this,et)||this;return ct.frames=L.Utils.newFloatArray(et*G.ENTRIES),ct}return Be(G,st),G.prototype.getPropertyId=function(){return (y.ikConstraint<<24)+this.ikConstraintIndex},G.prototype.setFrame=function(et,ct,rt,Tt,ht,ut,Rt){et*=G.ENTRIES,this.frames[et]=ct,this.frames[et+G.MIX]=rt,this.frames[et+G.SOFTNESS]=Tt,this.frames[et+G.BEND_DIRECTION]=ht,this.frames[et+G.COMPRESS]=ut?1:0,this.frames[et+G.STRETCH]=Rt?1:0;},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=this.frames,_=Skeleton.ikConstraints[this.ikConstraintIndex];if(_.active)if(rt<at[0])switch(ut){case l.setup:return _.mix=_.data.mix,_.softness=_.data.softness,_.bendDirection=_.data.bendDirection,_.compress=_.data.compress,void(_.stretch=_.data.stretch);case l.first:_.mix+=(_.data.mix-_.mix)*ht,_.softness+=(_.data.softness-_.softness)*ht,_.bendDirection=_.data.bendDirection,_.compress=_.data.compress,_.stretch=_.data.stretch;}else if(rt>=at[at.length-G.ENTRIES])ut==l.setup?(_.mix=_.data.mix+(at[at.length+G.PREV_MIX]-_.data.mix)*ht,_.softness=_.data.softness+(at[at.length+G.PREV_SOFTNESS]-_.data.softness)*ht,Rt==R.mixOut?(_.bendDirection=_.data.bendDirection,_.compress=_.data.compress,_.stretch=_.data.stretch):(_.bendDirection=at[at.length+G.PREV_BEND_DIRECTION],_.compress=at[at.length+G.PREV_COMPRESS]!=0,_.stretch=at[at.length+G.PREV_STRETCH]!=0)):(_.mix+=(at[at.length+G.PREV_MIX]-_.mix)*ht,_.softness+=(at[at.length+G.PREV_SOFTNESS]-_.softness)*ht,Rt==R.mixIn&&(_.bendDirection=at[at.length+G.PREV_BEND_DIRECTION],_.compress=at[at.length+G.PREV_COMPRESS]!=0,_.stretch=at[at.length+G.PREV_STRETCH]!=0));else {var ot=Yt.binarySearch(at,rt,G.ENTRIES),xt=at[ot+G.PREV_MIX],Mt=at[ot+G.PREV_SOFTNESS],Xt=at[ot],Dt=this.getCurvePercent(ot/G.ENTRIES-1,1-(rt-Xt)/(at[ot+G.PREV_TIME]-Xt));ut==l.setup?(_.mix=_.data.mix+(xt+(at[ot+G.MIX]-xt)*Dt-_.data.mix)*ht,_.softness=_.data.softness+(Mt+(at[ot+G.SOFTNESS]-Mt)*Dt-_.data.softness)*ht,Rt==R.mixOut?(_.bendDirection=_.data.bendDirection,_.compress=_.data.compress,_.stretch=_.data.stretch):(_.bendDirection=at[ot+G.PREV_BEND_DIRECTION],_.compress=at[ot+G.PREV_COMPRESS]!=0,_.stretch=at[ot+G.PREV_STRETCH]!=0)):(_.mix+=(xt+(at[ot+G.MIX]-xt)*Dt-_.mix)*ht,_.softness+=(Mt+(at[ot+G.SOFTNESS]-Mt)*Dt-_.softness)*ht,Rt==R.mixIn&&(_.bendDirection=at[ot+G.PREV_BEND_DIRECTION],_.compress=at[ot+G.PREV_COMPRESS]!=0,_.stretch=at[ot+G.PREV_STRETCH]!=0));}},G.ENTRIES=6,G.PREV_TIME=-6,G.PREV_MIX=-5,G.PREV_SOFTNESS=-4,G.PREV_BEND_DIRECTION=-3,G.PREV_COMPRESS=-2,G.PREV_STRETCH=-1,G.MIX=1,G.SOFTNESS=2,G.BEND_DIRECTION=3,G.COMPRESS=4,G.STRETCH=5,G})(a);L.IkConstraintTimeline=$;var it=(function(st){function G(et){var ct=st.call(this,et)||this;return ct.frames=L.Utils.newFloatArray(et*G.ENTRIES),ct}return Be(G,st),G.prototype.getPropertyId=function(){return (y.transformConstraint<<24)+this.transformConstraintIndex},G.prototype.setFrame=function(et,ct,rt,Tt,ht,ut){et*=G.ENTRIES,this.frames[et]=ct,this.frames[et+G.ROTATE]=rt,this.frames[et+G.TRANSLATE]=Tt,this.frames[et+G.SCALE]=ht,this.frames[et+G.SHEAR]=ut;},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=this.frames,_=Skeleton.transformConstraints[this.transformConstraintIndex];if(_.active)if(rt<at[0]){var ot=_.data;switch(ut){case l.setup:return _.rotateMix=ot.rotateMix,_.translateMix=ot.translateMix,_.scaleMix=ot.scaleMix,void(_.shearMix=ot.shearMix);case l.first:_.rotateMix+=(ot.rotateMix-_.rotateMix)*ht,_.translateMix+=(ot.translateMix-_.translateMix)*ht,_.scaleMix+=(ot.scaleMix-_.scaleMix)*ht,_.shearMix+=(ot.shearMix-_.shearMix)*ht;}}else {var xt=0,Mt=0,Xt=0,Dt=0;if(rt>=at[at.length-G.ENTRIES]){var Lt=at.length;xt=at[Lt+G.PREV_ROTATE],Mt=at[Lt+G.PREV_TRANSLATE],Xt=at[Lt+G.PREV_SCALE],Dt=at[Lt+G.PREV_SHEAR];}else {var Bt=Yt.binarySearch(at,rt,G.ENTRIES);xt=at[Bt+G.PREV_ROTATE],Mt=at[Bt+G.PREV_TRANSLATE],Xt=at[Bt+G.PREV_SCALE],Dt=at[Bt+G.PREV_SHEAR];var Gt=at[Bt],kt=this.getCurvePercent(Bt/G.ENTRIES-1,1-(rt-Gt)/(at[Bt+G.PREV_TIME]-Gt));xt+=(at[Bt+G.ROTATE]-xt)*kt,Mt+=(at[Bt+G.TRANSLATE]-Mt)*kt,Xt+=(at[Bt+G.SCALE]-Xt)*kt,Dt+=(at[Bt+G.SHEAR]-Dt)*kt;}if(ut==l.setup){var ot=_.data;_.rotateMix=ot.rotateMix+(xt-ot.rotateMix)*ht,_.translateMix=ot.translateMix+(Mt-ot.translateMix)*ht,_.scaleMix=ot.scaleMix+(Xt-ot.scaleMix)*ht,_.shearMix=ot.shearMix+(Dt-ot.shearMix)*ht;}else _.rotateMix+=(xt-_.rotateMix)*ht,_.translateMix+=(Mt-_.translateMix)*ht,_.scaleMix+=(Xt-_.scaleMix)*ht,_.shearMix+=(Dt-_.shearMix)*ht;}},G.ENTRIES=5,G.PREV_TIME=-5,G.PREV_ROTATE=-4,G.PREV_TRANSLATE=-3,G.PREV_SCALE=-2,G.PREV_SHEAR=-1,G.ROTATE=1,G.TRANSLATE=2,G.SCALE=3,G.SHEAR=4,G})(a);L.TransformConstraintTimeline=it;var vt=(function(st){function G(et){var ct=st.call(this,et)||this;return ct.frames=L.Utils.newFloatArray(et*G.ENTRIES),ct}return Be(G,st),G.prototype.getPropertyId=function(){return (y.pathConstraintPosition<<24)+this.pathConstraintIndex},G.prototype.setFrame=function(et,ct,rt){et*=G.ENTRIES,this.frames[et]=ct,this.frames[et+G.VALUE]=rt;},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=this.frames,_=Skeleton.pathConstraints[this.pathConstraintIndex];if(_.active)if(rt<at[0])switch(ut){case l.setup:return void(_.position=_.data.position);case l.first:_.position+=(_.data.position-_.position)*ht;}else {var ot=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_VALUE];else {var xt=Yt.binarySearch(at,rt,G.ENTRIES);ot=at[xt+G.PREV_VALUE];var Mt=at[xt],Xt=this.getCurvePercent(xt/G.ENTRIES-1,1-(rt-Mt)/(at[xt+G.PREV_TIME]-Mt));ot+=(at[xt+G.VALUE]-ot)*Xt;}ut==l.setup?_.position=_.data.position+(ot-_.data.position)*ht:_.position+=(ot-_.position)*ht;}},G.ENTRIES=2,G.PREV_TIME=-2,G.PREV_VALUE=-1,G.VALUE=1,G})(a);L.PathConstraintPositionTimeline=vt;var lt=(function(st){function G(et){return st.call(this,et)||this}return Be(G,st),G.prototype.getPropertyId=function(){return (y.pathConstraintSpacing<<24)+this.pathConstraintIndex},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=this.frames,_=Skeleton.pathConstraints[this.pathConstraintIndex];if(_.active)if(rt<at[0])switch(ut){case l.setup:return void(_.spacing=_.data.spacing);case l.first:_.spacing+=(_.data.spacing-_.spacing)*ht;}else {var ot=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_VALUE];else {var xt=Yt.binarySearch(at,rt,G.ENTRIES);ot=at[xt+G.PREV_VALUE];var Mt=at[xt],Xt=this.getCurvePercent(xt/G.ENTRIES-1,1-(rt-Mt)/(at[xt+G.PREV_TIME]-Mt));ot+=(at[xt+G.VALUE]-ot)*Xt;}ut==l.setup?_.spacing=_.data.spacing+(ot-_.data.spacing)*ht:_.spacing+=(ot-_.spacing)*ht;}},G})(vt);L.PathConstraintSpacingTimeline=lt;var dt=(function(st){function G(et){var ct=st.call(this,et)||this;return ct.frames=L.Utils.newFloatArray(et*G.ENTRIES),ct}return Be(G,st),G.prototype.getPropertyId=function(){return (y.pathConstraintMix<<24)+this.pathConstraintIndex},G.prototype.setFrame=function(et,ct,rt,Tt){et*=G.ENTRIES,this.frames[et]=ct,this.frames[et+G.ROTATE]=rt,this.frames[et+G.TRANSLATE]=Tt;},G.prototype.apply=function(et,ct,rt,Tt,ht,ut,Rt){var at=this.frames,_=Skeleton.pathConstraints[this.pathConstraintIndex];if(_.active)if(rt<at[0])switch(ut){case l.setup:return _.rotateMix=_.data.rotateMix,void(_.translateMix=_.data.translateMix);case l.first:_.rotateMix+=(_.data.rotateMix-_.rotateMix)*ht,_.translateMix+=(_.data.translateMix-_.translateMix)*ht;}else {var ot=0,xt=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_ROTATE],xt=at[at.length+G.PREV_TRANSLATE];else {var Mt=Yt.binarySearch(at,rt,G.ENTRIES);ot=at[Mt+G.PREV_ROTATE],xt=at[Mt+G.PREV_TRANSLATE];var Xt=at[Mt],Dt=this.getCurvePercent(Mt/G.ENTRIES-1,1-(rt-Xt)/(at[Mt+G.PREV_TIME]-Xt));ot+=(at[Mt+G.ROTATE]-ot)*Dt,xt+=(at[Mt+G.TRANSLATE]-xt)*Dt;}ut==l.setup?(_.rotateMix=_.data.rotateMix+(ot-_.data.rotateMix)*ht,_.translateMix=_.data.translateMix+(xt-_.data.translateMix)*ht):(_.rotateMix+=(ot-_.rotateMix)*ht,_.translateMix+=(xt-_.translateMix)*ht);}},G.ENTRIES=3,G.PREV_TIME=-3,G.PREV_ROTATE=-2,G.PREV_TRANSLATE=-1,G.ROTATE=1,G.TRANSLATE=2,G})(a);L.PathConstraintMixTimeline=dt;}))(Et||(Et={})),(function(L){var Yt=(function(){function m(u){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new R(this),this.propertyIDs=new L.IntSet,this.animationsChanged=false,this.trackEntryPool=new L.Pool((function(){return new l})),this.data=u;}return m.prototype.update=function(u){u*=this.timeScale;for(var A=this.tracks,S=0,O=A.length;S<O;S++){var T=A[S];if(T!=null){T.animationLast=T.nextAnimationLast,T.trackLast=T.nextTrackLast;var N=u*T.timeScale;if(T.delay>0){if(T.delay-=N,T.delay>0)continue;N=-T.delay,T.delay=0;}var P=T.next;if(P!=null){var E=T.trackLast-P.delay;if(E>=0){for(P.delay=0,P.trackTime+=T.timeScale==0?0:(E/T.timeScale+u)*P.timeScale,T.trackTime+=N,this.setCurrent(S,P,true);P.mixingFrom!=null;)P.mixTime+=u,P=P.mixingFrom;continue}}else if(T.trackLast>=T.trackEnd&&T.mixingFrom==null){A[S]=null,this.queue.end(T),this.disposeNext(T);continue}if(T.mixingFrom!=null&&this.updateMixingFrom(T,u)){var D=T.mixingFrom;for(T.mixingFrom=null,D!=null&&(D.mixingTo=null);D!=null;)this.queue.end(D),D=D.mixingFrom;}T.trackTime+=N;}}this.queue.drain();},m.prototype.updateMixingFrom=function(u,A){var S=u.mixingFrom;if(S==null)return  true;var O=this.updateMixingFrom(S,A);return S.animationLast=S.nextAnimationLast,S.trackLast=S.nextTrackLast,u.mixTime>0&&u.mixTime>=u.mixDuration?(S.totalAlpha!=0&&u.mixDuration!=0||(u.mixingFrom=S.mixingFrom,S.mixingFrom!=null&&(S.mixingFrom.mixingTo=u),u.interruptAlpha=S.interruptAlpha,this.queue.end(S)),O):(S.trackTime+=A*S.timeScale,u.mixTime+=A,false)},m.prototype.apply=function(u){if(u==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var A=this.events,S=this.tracks,O=false,T=0,N=S.length;T<N;T++){var P=S[T];if(!(P==null||P.delay>0)){O=true;var E=T==0?L.MixBlend.first:P.mixBlend,D=P.alpha;P.mixingFrom!=null?D*=this.applyMixingFrom(P,Skeleton,E):P.trackTime>=P.trackEnd&&P.next==null&&(D=0);var q=P.animationLast,$=P.getAnimationTime(),it=P.animation.timelines.length,vt=P.animation.timelines;if(T==0&&D==1||E==L.MixBlend.add)for(var lt=0;lt<it;lt++){L.Utils.webkit602BugfixHelper(D,E);var dt=vt[lt];dt instanceof L.AttachmentTimeline?this.applyAttachmentTimeline(dt,Skeleton,$,E,true):dt.apply(u,q,$,A,D,E,L.MixDirection.mixIn);}else {var st=P.timelineMode,G=P.timelinesRotation.length==0;G&&L.Utils.setArraySize(P.timelinesRotation,it<<1,null);for(var et=P.timelinesRotation,lt=0;lt<it;lt++){var ct=vt[lt],rt=st[lt]==m.SUBSEQUENT?E:L.MixBlend.setup;ct instanceof L.RotateTimeline?this.applyRotateTimeline(ct,Skeleton,$,D,rt,et,lt<<1,G):ct instanceof L.AttachmentTimeline?this.applyAttachmentTimeline(ct,Skeleton,$,E,true):(L.Utils.webkit602BugfixHelper(D,E),ct.apply(u,q,$,A,D,rt,L.MixDirection.mixIn));}}this.queueEvents(P,$),A.length=0,P.nextAnimationLast=$,P.nextTrackLast=P.trackTime;}}for(var Tt=this.unkeyedState+m.SETUP,ht=Skeleton.slots,ut=0,Rt=Skeleton.slots.length;ut<Rt;ut++){var at=ht[ut];if(at.attachmentState==Tt){var _=at.data.attachmentName;at.setAttachment(_==null?null:Skeleton.getAttachment(at.data.index,_));}}return this.unkeyedState+=2,this.queue.drain(),O},m.prototype.applyMixingFrom=function(u,A,S){var O=u.mixingFrom;O.mixingFrom!=null&&this.applyMixingFrom(O,A,S);var T=0;u.mixDuration==0?(T=1,S==L.MixBlend.first&&(S=L.MixBlend.setup)):((T=u.mixTime/u.mixDuration)>1&&(T=1),S!=L.MixBlend.first&&(S=O.mixBlend));var N=T<O.eventThreshold?this.events:null,P=T<O.attachmentThreshold,E=T<O.drawOrderThreshold,D=O.animationLast,q=O.getAnimationTime(),$=O.animation.timelines.length,it=O.animation.timelines,vt=O.alpha*u.interruptAlpha,lt=vt*(1-T);if(S==L.MixBlend.add)for(var dt=0;dt<$;dt++)it[dt].apply(skeleton,D,q,N,lt,S,L.MixDirection.mixOut);else {var st=O.timelineMode,G=O.timelineHoldMix,et=O.timelinesRotation.length==0;et&&L.Utils.setArraySize(O.timelinesRotation,$<<1,null);var ct=O.timelinesRotation;O.totalAlpha=0;for(var dt=0;dt<$;dt++){var rt=it[dt],Tt=L.MixDirection.mixOut,ht=void 0,ut=0;switch(st[dt]){case m.SUBSEQUENT:if(!E&&rt instanceof L.DrawOrderTimeline)continue;ht=S,ut=lt;break;case m.FIRST:ht=L.MixBlend.setup,ut=lt;break;case m.HOLD_SUBSEQUENT:ht=S,ut=vt;break;case m.HOLD_FIRST:ht=L.MixBlend.setup,ut=vt;break;default:ht=L.MixBlend.setup;var Rt=G[dt];ut=vt*Math.max(0,1-Rt.mixTime/Rt.mixDuration);}O.totalAlpha+=ut,rt instanceof L.RotateTimeline?this.applyRotateTimeline(rt,A,q,ut,ht,ct,dt<<1,et):rt instanceof L.AttachmentTimeline?this.applyAttachmentTimeline(rt,A,q,ht,P):(L.Utils.webkit602BugfixHelper(ut,S),E&&rt instanceof L.DrawOrderTimeline&&ht==L.MixBlend.setup&&(Tt=L.MixDirection.mixIn),rt.apply(skeleton,D,q,N,ut,ht,Tt));}}return u.mixDuration>0&&this.queueEvents(O,q),this.events.length=0,O.nextAnimationLast=q,O.nextTrackLast=O.trackTime,T},m.prototype.applyAttachmentTimeline=function(u,A,S,O,T){var N=A.slots[u.slotIndex];if(N.bone.active){var P=u.frames,E;S<P[0]?O!=L.MixBlend.setup&&O!=L.MixBlend.first||this.setAttachment(skeleton,N,N.data.attachmentName,T):(E=S>=P[P.length-1]?P.length-1:L.Animation.binarySearch(P,S)-1,this.setAttachment(skeleton,N,u.attachmentNames[E],T)),N.attachmentState<=this.unkeyedState&&(N.attachmentState=this.unkeyedState+m.SETUP);}},m.prototype.setAttachment=function(u,A,S,O){A.setAttachment(S==null?null:Skeleton.getAttachment(A.data.index,S)),O&&(A.attachmentState=this.unkeyedState+m.CURRENT);},m.prototype.applyRotateTimeline=function(u,A,S,O,T,N,P,E){if(E&&(N[P]=0),O!=1){var D=u,q=D.frames,$=A.bones[D.boneIndex];if($.active){var it=0,vt=0;if(S<q[0])switch(T){case L.MixBlend.setup:$.rotation=$.data.rotation;default:return;case L.MixBlend.first:it=$.rotation,vt=$.data.rotation;}else if(it=T==L.MixBlend.setup?$.data.rotation:$.rotation,S>=q[q.length-L.RotateTimeline.ENTRIES])vt=$.data.rotation+q[q.length+L.RotateTimeline.PREV_ROTATION];else {var lt=L.Animation.binarySearch(q,S,L.RotateTimeline.ENTRIES),dt=q[lt+L.RotateTimeline.PREV_ROTATION],st=q[lt],G=D.getCurvePercent((lt>>1)-1,1-(S-st)/(q[lt+L.RotateTimeline.PREV_TIME]-st));vt=q[lt+L.RotateTimeline.ROTATION]-dt,vt=dt+(vt-=360*(16384-(16384.499999999996-vt/360|0)))*G+$.data.rotation,vt-=360*(16384-(16384.499999999996-vt/360|0));}var et=0,ct=vt-it;if((ct-=360*(16384-(16384.499999999996-ct/360|0)))==0)et=N[P];else {var rt=0,Tt=0;E?(rt=0,Tt=ct):(rt=N[P],Tt=N[P+1]);var ht=ct>0,ut=rt>=0;L.MathUtils.signum(Tt)!=L.MathUtils.signum(ct)&&Math.abs(Tt)<=90&&(Math.abs(rt)>180&&(rt+=360*L.MathUtils.signum(rt)),ut=ht),et=ct+rt-rt%360,ut!=ht&&(et+=360*L.MathUtils.signum(rt)),N[P]=et;}N[P+1]=ct,it+=et*O,$.rotation=it-360*(16384-(16384.499999999996-it/360|0));}}else u.apply(skeleton,0,S,null,1,T,L.MixDirection.mixIn);},m.prototype.queueEvents=function(u,A){for(var S=u.animationStart,O=u.animationEnd,T=O-S,N=u.trackLast%T,P=this.events,E=0,D=P.length;E<D;E++){var q=P[E];if(q.time<N)break;q.time>O||this.queue.event(u,q);}for((u.loop?T==0||N>u.trackTime%T:A>=O&&u.animationLast<O)&&this.queue.complete(u);E<D;E++){P[E].time<S||this.queue.event(u,P[E]);}},m.prototype.clearTracks=function(){var u=this.queue.drainDisabled;this.queue.drainDisabled=true;for(var A=0,S=this.tracks.length;A<S;A++)this.clearTrack(A);this.tracks.length=0,this.queue.drainDisabled=u,this.queue.drain();},m.prototype.clearTrack=function(u){if(!(u>=this.tracks.length)){var A=this.tracks[u];if(A!=null){this.queue.end(A),this.disposeNext(A);for(var S=A;;){var O=S.mixingFrom;if(O==null)break;this.queue.end(O),S.mixingFrom=null,S.mixingTo=null,S=O;}this.tracks[A.trackIndex]=null,this.queue.drain();}}},m.prototype.setCurrent=function(u,A,S){var O=this.expandToIndex(u);this.tracks[u]=A,O!=null&&(S&&this.queue.interrupt(O),A.mixingFrom=O,O.mixingTo=A,A.mixTime=0,O.mixingFrom!=null&&O.mixDuration>0&&(A.interruptAlpha*=Math.min(1,O.mixTime/O.mixDuration)),O.timelinesRotation.length=0),this.queue.start(A);},m.prototype.setAnimation=function(u,A,S){var O=this.data.skeletonData.findAnimation(A);if(O==null)throw new Error("Animation not found: "+A);return this.setAnimationWith(u,O,S)},m.prototype.setAnimationWith=function(u,A,S){if(A==null)throw new Error("animation cannot be null.");var O=true,T=this.expandToIndex(u);T!=null&&(T.nextTrackLast==-1?(this.tracks[u]=T.mixingFrom,this.queue.interrupt(T),this.queue.end(T),this.disposeNext(T),T=T.mixingFrom,O=false):this.disposeNext(T));var N=this.trackEntry(u,A,S,T);return this.setCurrent(u,N,O),this.queue.drain(),N},m.prototype.addAnimation=function(u,A,S,O){var T=this.data.skeletonData.findAnimation(A);if(T==null)throw new Error("Animation not found: "+A);return this.addAnimationWith(u,T,S,O)},m.prototype.addAnimationWith=function(u,A,S,O){if(A==null)throw new Error("animation cannot be null.");var T=this.expandToIndex(u);if(T!=null)for(;T.next!=null;)T=T.next;var N=this.trackEntry(u,A,S,T);if(T==null)this.setCurrent(u,N,true),this.queue.drain();else if(T.next=N,O<=0){var P=T.animationEnd-T.animationStart;P!=0?(T.loop?O+=P*(1+(T.trackTime/P|0)):O+=Math.max(P,T.trackTime),O-=this.data.getMix(T.animation,A)):O=T.trackTime;}return N.delay=O,N},m.prototype.setEmptyAnimation=function(u,A){var S=this.setAnimationWith(u,m.emptyAnimation,false);return S.mixDuration=A,S.trackEnd=A,S},m.prototype.addEmptyAnimation=function(u,A,S){S<=0&&(S-=A);var O=this.addAnimationWith(u,m.emptyAnimation,false,S);return O.mixDuration=A,O.trackEnd=A,O},m.prototype.setEmptyAnimations=function(u){var A=this.queue.drainDisabled;this.queue.drainDisabled=true;for(var S=0,O=this.tracks.length;S<O;S++){var T=this.tracks[S];T!=null&&this.setEmptyAnimation(T.trackIndex,u);}this.queue.drainDisabled=A,this.queue.drain();},m.prototype.expandToIndex=function(u){return u<this.tracks.length?this.tracks[u]:(L.Utils.ensureArrayCapacity(this.tracks,u+1,null),this.tracks.length=u+1,null)},m.prototype.trackEntry=function(u,A,S,O){var T=this.trackEntryPool.obtain();return T.trackIndex=u,T.animation=A,T.loop=S,T.holdPrevious=false,T.eventThreshold=0,T.attachmentThreshold=0,T.drawOrderThreshold=0,T.animationStart=0,T.animationEnd=A.duration,T.animationLast=-1,T.nextAnimationLast=-1,T.delay=0,T.trackTime=0,T.trackLast=-1,T.nextTrackLast=-1,T.trackEnd=Number.MAX_VALUE,T.timeScale=1,T.alpha=1,T.interruptAlpha=1,T.mixTime=0,T.mixDuration=O==null?0:this.data.getMix(O.animation,A),T.mixBlend=L.MixBlend.replace,T},m.prototype.disposeNext=function(u){for(var A=u.next;A!=null;)this.queue.dispose(A),A=A.next;u.next=null;},m.prototype._animationsChanged=function(){this.animationsChanged=false,this.propertyIDs.clear();for(var u=0,A=this.tracks.length;u<A;u++){var S=this.tracks[u];if(S!=null){for(;S.mixingFrom!=null;)S=S.mixingFrom;do S.mixingFrom!=null&&S.mixBlend==L.MixBlend.add||this.computeHold(S),S=S.mixingTo;while(S!=null)}}},m.prototype.computeHold=function(u){var A=u.mixingTo,S=u.animation.timelines,O=u.animation.timelines.length,T=L.Utils.setArraySize(u.timelineMode,O);u.timelineHoldMix.length=0;var N=L.Utils.setArraySize(u.timelineHoldMix,O),P=this.propertyIDs;if(A!=null&&A.holdPrevious)for(var E=0;E<O;E++)T[E]=P.add(S[E].getPropertyId())?m.HOLD_FIRST:m.HOLD_SUBSEQUENT;else t:for(var E=0;E<O;E++){var D=S[E],q=D.getPropertyId();if(P.add(q))if(A==null||D instanceof L.AttachmentTimeline||D instanceof L.DrawOrderTimeline||D instanceof L.EventTimeline||!A.animation.hasTimeline(q))T[E]=m.FIRST;else {for(var $=A.mixingTo;$!=null;$=$.mixingTo)if(!$.animation.hasTimeline(q)){if(u.mixDuration>0){T[E]=m.HOLD_MIX,N[E]=$;continue t}break}T[E]=m.HOLD_FIRST;}else T[E]=m.SUBSEQUENT;}},m.prototype.getCurrent=function(u){return u>=this.tracks.length?null:this.tracks[u]},m.prototype.addListener=function(u){if(u==null)throw new Error("listener cannot be null.");this.listeners.push(u);},m.prototype.removeListener=function(u){var A=this.listeners.indexOf(u);A>=0&&this.listeners.splice(A,1);},m.prototype.clearListeners=function(){this.listeners.length=0;},m.prototype.clearListenerNotifications=function(){this.queue.clear();},m.emptyAnimation=new L.Animation("<empty>",[],0),m.SUBSEQUENT=0,m.FIRST=1,m.HOLD_SUBSEQUENT=2,m.HOLD_FIRST=3,m.HOLD_MIX=4,m.SETUP=1,m.CURRENT=2,m})();L.AnimationState=Yt;var l=(function(){function m(){this.mixBlend=L.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array;}return m.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;},m.prototype.getAnimationTime=function(){if(this.loop){var u=this.animationEnd-this.animationStart;return u==0?this.animationStart:this.trackTime%u+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},m.prototype.setAnimationLast=function(u){this.animationLast=u,this.nextAnimationLast=u;},m.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},m.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0;},m})();L.TrackEntry=l;var R=(function(){function m(u){this.objects=[],this.drainDisabled=false,this.animState=u;}return m.prototype.start=function(u){this.objects.push(y.start),this.objects.push(u),this.animState.animationsChanged=true;},m.prototype.interrupt=function(u){this.objects.push(y.interrupt),this.objects.push(u);},m.prototype.end=function(u){this.objects.push(y.end),this.objects.push(u),this.animState.animationsChanged=true;},m.prototype.dispose=function(u){this.objects.push(y.dispose),this.objects.push(u);},m.prototype.complete=function(u){this.objects.push(y.complete),this.objects.push(u);},m.prototype.event=function(u,A){this.objects.push(y.event),this.objects.push(u),this.objects.push(A);},m.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=true;for(var u=this.objects,A=this.animState.listeners,S=0;S<u.length;S+=2){var O=u[S],T=u[S+1];switch(O){case y.start:T.listener!=null&&T.listener.start&&T.listener.start(T);for(var N=0;N<A.length;N++)A[N].start&&A[N].start(T);break;case y.interrupt:T.listener!=null&&T.listener.interrupt&&T.listener.interrupt(T);for(var N=0;N<A.length;N++)A[N].interrupt&&A[N].interrupt(T);break;case y.end:T.listener!=null&&T.listener.end&&T.listener.end(T);for(var N=0;N<A.length;N++)A[N].end&&A[N].end(T);case y.dispose:T.listener!=null&&T.listener.dispose&&T.listener.dispose(T);for(var N=0;N<A.length;N++)A[N].dispose&&A[N].dispose(T);this.animState.trackEntryPool.free(T);break;case y.complete:T.listener!=null&&T.listener.complete&&T.listener.complete(T);for(var N=0;N<A.length;N++)A[N].complete&&A[N].complete(T);break;case y.event:var P=u[2+S++];T.listener!=null&&T.listener.event&&T.listener.event(T,P);for(var N=0;N<A.length;N++)A[N].event&&A[N].event(T,P);}}this.clear(),this.drainDisabled=false;}},m.prototype.clear=function(){this.objects.length=0;},m})(),y;L.EventQueue=R,(function(m){m[m.start=0]="start",m[m.interrupt=1]="interrupt",m[m.end=2]="end",m[m.dispose=3]="dispose",m[m.complete=4]="complete",m[m.event=5]="event";})(y=L.EventType||(L.EventType={}));var a=(function(){function m(){}return m.prototype.start=function(u){},m.prototype.interrupt=function(u){},m.prototype.end=function(u){},m.prototype.dispose=function(u){},m.prototype.complete=function(u){},m.prototype.event=function(u,A){},m})();L.AnimationStateAdapter=a;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R){if(this.animationToMixTime={},this.defaultMix=0,R==null)throw new Error("skeletonData cannot be null.");this.skeletonData=SkeletonData;}return l.prototype.setMix=function(R,y,a){var m=this.skeletonData.findAnimation(R);if(m==null)throw new Error("Animation not found: "+R);var u=this.skeletonData.findAnimation(y);if(u==null)throw new Error("Animation not found: "+y);this.setMixWith(m,u,a);},l.prototype.setMixWith=function(R,y,a){if(R==null)throw new Error("from cannot be null.");if(y==null)throw new Error("to cannot be null.");var m=R.name+"."+y.name;this.animationToMixTime[m]=a;},l.prototype.getMix=function(R,y){var a=R.name+"."+y.name,m=this.animationToMixTime[a];return m===void 0?this.defaultMix:m},l})();L.AnimationStateData=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y){y===void 0&&(y=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=R,this.pathPrefix=y;}return l.prototype.downloadText=function(R,y,a){var m=new XMLHttpRequest;m.overrideMimeType("text/html"),this.rawDataUris[R]&&(R=this.rawDataUris[R]),m.open("GET",R,true),m.onload=function(){m.status==200?y(m.responseText):a(m.status,m.responseText);},m.onerror=function(){a(m.status,m.responseText);},m.send();},l.prototype.downloadBinary=function(R,y,a){var m=new XMLHttpRequest;this.rawDataUris[R]&&(R=this.rawDataUris[R]),m.open("GET",R,true),m.responseType="arraybuffer",m.onload=function(){m.status==200?y(new Uint8Array(m.response)):a(m.status,m.responseText);},m.onerror=function(){a(m.status,m.responseText);},m.send();},l.prototype.setRawDataURI=function(R,y){this.rawDataUris[this.pathPrefix+R]=y;},l.prototype.loadBinary=function(R,y,a){var m=this;y===void 0&&(y=null),a===void 0&&(a=null),R=this.pathPrefix+R,this.toLoad++,this.downloadBinary(R,(function(u){m.assets[R]=u,y&&y(R,u),m.toLoad--,m.loaded++;}),(function(u,A){m.errors[R]="Couldn't load binary "+R+": status "+status+", "+A,a&&a(R,"Couldn't load binary "+R+": status "+status+", "+A),m.toLoad--,m.loaded++;}));},l.prototype.loadText=function(R,y,a){var m=this;y===void 0&&(y=null),a===void 0&&(a=null),R=this.pathPrefix+R,this.toLoad++,this.downloadText(R,(function(u){m.assets[R]=u,y&&y(R,u),m.toLoad--,m.loaded++;}),(function(u,A){m.errors[R]="Couldn't load text "+R+": status "+status+", "+A,a&&a(R,"Couldn't load text "+R+": status "+status+", "+A),m.toLoad--,m.loaded++;}));},l.prototype.loadTexture=function(R,y,a){var m=this;y===void 0&&(y=null),a===void 0&&(a=null);var u=R=this.pathPrefix+R;this.toLoad++;var A=new Image;A.crossOrigin="anonymous",A.onload=function(S){var O=m.textureLoader(A);m.assets[u]=O,m.toLoad--,m.loaded++,y&&y(R,A);},A.onerror=function(S){m.errors[R]="Couldn't load image "+R,m.toLoad--,m.loaded++,a&&a(R,"Couldn't load image "+R);},this.rawDataUris[R]&&(R=this.rawDataUris[R]),A.src=R;},l.prototype.loadTextureAtlas=function(R,y,a){var m=this;y===void 0&&(y=null),a===void 0&&(a=null);var u=R.lastIndexOf("/")>=0?R.substring(0,R.lastIndexOf("/")):"";R=this.pathPrefix+R,this.toLoad++,this.downloadText(R,(function(A){var S={count:0},O=new Array;try{var T=new L.TextureAtlas(A,(function($){O.push(u==""?$:u+"/"+$);var it=document.createElement("img");return it.width=16,it.height=16,new L.FakeTexture(it)}));}catch($){var N=$;return m.errors[R]="Couldn't load texture atlas "+R+": "+N.message,a&&a(R,"Couldn't load texture atlas "+R+": "+N.message),m.toLoad--,void m.loaded++}for(var P=function($){var it=false;m.loadTexture($,(function(vt,lt){if(S.count++,S.count==O.length)if(it)m.errors[R]="Couldn't load texture atlas page "+vt+"} of atlas "+R,a&&a(R,"Couldn't load texture atlas page "+vt+" of atlas "+R),m.toLoad--,m.loaded++;else try{var dt=new L.TextureAtlas(A,(function(G){return m.get(u==""?G:u+"/"+G)}));m.assets[R]=dt,y&&y(R,dt),m.toLoad--,m.loaded++;}catch(G){var st=G;m.errors[R]="Couldn't load texture atlas "+R+": "+st.message,a&&a(R,"Couldn't load texture atlas "+R+": "+st.message),m.toLoad--,m.loaded++;}}),(function(vt,lt){it=true,S.count++,S.count==O.length&&(m.errors[R]="Couldn't load texture atlas page "+vt+"} of atlas "+R,a&&a(R,"Couldn't load texture atlas page "+vt+" of atlas "+R),m.toLoad--,m.loaded++);}));},E=0,D=O;E<D.length;E++){P(D[E]);}}),(function(A,S){m.errors[R]="Couldn't load texture atlas "+R+": status "+status+", "+S,a&&a(R,"Couldn't load texture atlas "+R+": status "+status+", "+S),m.toLoad--,m.loaded++;}));},l.prototype.get=function(R){return R=this.pathPrefix+R,this.assets[R]},l.prototype.remove=function(R){R=this.pathPrefix+R;var y=this.assets[R];y.dispose&&y.dispose(),this.assets[R]=null;},l.prototype.removeAll=function(){for(var R in this.assets){var y=this.assets[R];y.dispose&&y.dispose();}this.assets={};},l.prototype.isLoadingComplete=function(){return this.toLoad==0},l.prototype.getToLoad=function(){return this.toLoad},l.prototype.getLoaded=function(){return this.loaded},l.prototype.dispose=function(){this.removeAll();},l.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},l.prototype.getErrors=function(){return this.errors},l})();L.AssetManager=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R){this.atlas=R;}return l.prototype.newRegionAttachment=function(R,y,a){var m=this.atlas.findRegion(a);if(m==null)throw new Error("Region not found in atlas: "+a+" (region attachment: "+y+")");m.renderObject=m;var u=new L.RegionAttachment(y);return u.setRegion(m),u},l.prototype.newMeshAttachment=function(R,y,a){var m=this.atlas.findRegion(a);if(m==null)throw new Error("Region not found in atlas: "+a+" (mesh attachment: "+y+")");m.renderObject=m;var u=new L.MeshAttachment(y);return u.region=m,u},l.prototype.newBoundingBoxAttachment=function(R,y){return new L.BoundingBoxAttachment(y)},l.prototype.newPathAttachment=function(R,y){return new L.PathAttachment(y)},l.prototype.newPointAttachment=function(R,y){return new L.PointAttachment(y)},l.prototype.newClippingAttachment=function(R,y){return new L.ClippingAttachment(y)},l})();L.AtlasAttachmentLoader=Yt;})(Et||(Et={})),(function(L){(function(l){l[l.Normal=0]="Normal",l[l.Additive=1]="Additive",l[l.Multiply=2]="Multiply",l[l.Screen=3]="Screen";})(L.BlendMode||(L.BlendMode={}));})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y,a){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=false,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=false,this.active=false,R==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=R,this.skeleton=y,this.parent=a,this.setToSetupPose();}return l.prototype.isActive=function(){return this.active},l.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);},l.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);},l.prototype.updateWorldTransformWith=function(R,y,a,m,u,A,S){this.ax=R,this.ay=y,this.arotation=a,this.ascaleX=m,this.ascaleY=u,this.ashearX=A,this.ashearY=S,this.appliedValid=true;var O=this.parent;if(O==null){var T=this.skeleton,N=a+90+S,P=T.scaleX,E=T.scaleY;return this.a=L.MathUtils.cosDeg(a+A)*m*P,this.b=L.MathUtils.cosDeg(N)*u*P,this.c=L.MathUtils.sinDeg(a+A)*m*E,this.d=L.MathUtils.sinDeg(N)*u*E,this.worldX=R*P+T.x,void(this.worldY=y*E+T.y)}var D=O.a,q=O.b,$=O.c,it=O.d;switch(this.worldX=D*R+q*y+O.worldX,this.worldY=$*R+it*y+O.worldY,this.data.transformMode){case L.TransformMode.Normal:var N=a+90+S,Rt=L.MathUtils.cosDeg(a+A)*m,at=L.MathUtils.cosDeg(N)*u,_=L.MathUtils.sinDeg(a+A)*m,ot=L.MathUtils.sinDeg(N)*u;return this.a=D*Rt+q*_,this.b=D*at+q*ot,this.c=$*Rt+it*_,void(this.d=$*at+it*ot);case L.TransformMode.OnlyTranslation:var N=a+90+S;this.a=L.MathUtils.cosDeg(a+A)*m,this.b=L.MathUtils.cosDeg(N)*u,this.c=L.MathUtils.sinDeg(a+A)*m,this.d=L.MathUtils.sinDeg(N)*u;break;case L.TransformMode.NoRotationOrReflection:var rt,vt=0;(rt=D*D+$*$)>1e-4?(rt=Math.abs(D*it-q*$)/rt,D/=this.skeleton.scaleX,q=($/=this.skeleton.scaleY)*rt,it=D*rt,vt=Math.atan2($,D)*L.MathUtils.radDeg):(D=0,$=0,vt=90-Math.atan2(it,q)*L.MathUtils.radDeg);var lt=a+A-vt,dt=a+S-vt+90,Rt=L.MathUtils.cosDeg(lt)*m,at=L.MathUtils.cosDeg(dt)*u,_=L.MathUtils.sinDeg(lt)*m,ot=L.MathUtils.sinDeg(dt)*u;this.a=D*Rt-q*_,this.b=D*at-q*ot,this.c=$*Rt+it*_,this.d=$*at+it*ot;break;case L.TransformMode.NoScale:case L.TransformMode.NoScaleOrReflection:var st=L.MathUtils.cosDeg(a),G=L.MathUtils.sinDeg(a),et=(D*st+q*G)/this.skeleton.scaleX,ct=($*st+it*G)/this.skeleton.scaleY,rt;(rt=Math.sqrt(et*et+ct*ct))>1e-5&&(rt=1/rt),et*=rt,ct*=rt,rt=Math.sqrt(et*et+ct*ct),this.data.transformMode==L.TransformMode.NoScale&&D*it-q*$<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(rt=-rt);var Tt=Math.PI/2+Math.atan2(ct,et),ht=Math.cos(Tt)*rt,ut=Math.sin(Tt)*rt,Rt=L.MathUtils.cosDeg(A)*m,at=L.MathUtils.cosDeg(90+S)*u,_=L.MathUtils.sinDeg(A)*m,ot=L.MathUtils.sinDeg(90+S)*u;this.a=et*Rt+ht*_,this.b=et*at+ht*ot,this.c=ct*Rt+ut*_,this.d=ct*at+ut*ot;}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY;},l.prototype.setToSetupPose=function(){var R=this.data;this.x=R.x,this.y=R.y,this.rotation=R.rotation,this.scaleX=R.scaleX,this.scaleY=R.scaleY,this.shearX=R.shearX,this.shearY=R.shearY;},l.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*L.MathUtils.radDeg},l.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*L.MathUtils.radDeg},l.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},l.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},l.prototype.updateAppliedTransform=function(){this.appliedValid=true;var R=this.parent;if(R==null)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*L.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*L.MathUtils.radDeg);var y=R.a,a=R.b,m=R.c,u=R.d,A=1/(y*u-a*m),S=this.worldX-R.worldX,O=this.worldY-R.worldY;this.ax=S*u*A-O*a*A,this.ay=O*y*A-S*m*A;var T=A*u,N=A*y,P=A*a,E=A*m,D=T*this.a-P*this.c,q=T*this.b-P*this.d,$=N*this.c-E*this.a,it=N*this.d-E*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(D*D+$*$),this.ascaleX>1e-4){var vt=D*it-q*$;this.ascaleY=vt/this.ascaleX,this.ashearY=Math.atan2(D*q+$*it,vt)*L.MathUtils.radDeg,this.arotation=Math.atan2($,D)*L.MathUtils.radDeg;}else this.ascaleX=0,this.ascaleY=Math.sqrt(q*q+it*it),this.ashearY=0,this.arotation=90-Math.atan2(it,q)*L.MathUtils.radDeg;},l.prototype.worldToLocal=function(R){var y=this.a,a=this.b,m=this.c,u=this.d,A=1/(y*u-a*m),S=R.x-this.worldX,O=R.y-this.worldY;return R.x=S*u*A-O*a*A,R.y=O*y*A-S*m*A,R},l.prototype.localToWorld=function(R){var y=R.x,a=R.y;return R.x=y*this.a+a*this.b+this.worldX,R.y=y*this.c+a*this.d+this.worldY,R},l.prototype.worldToLocalRotation=function(R){var y=L.MathUtils.sinDeg(R),a=L.MathUtils.cosDeg(R);return Math.atan2(this.a*y-this.c*a,this.d*a-this.b*y)*L.MathUtils.radDeg+this.rotation-this.shearX},l.prototype.localToWorldRotation=function(R){R-=this.rotation-this.shearX;var y=L.MathUtils.sinDeg(R),a=L.MathUtils.cosDeg(R);return Math.atan2(a*this.c+y*this.d,a*this.a+y*this.b)*L.MathUtils.radDeg},l.prototype.rotateWorld=function(R){var y=this.a,a=this.b,m=this.c,u=this.d,A=L.MathUtils.cosDeg(R),S=L.MathUtils.sinDeg(R);this.a=A*y-S*m,this.b=A*a-S*u,this.c=S*y+A*m,this.d=S*a+A*u,this.appliedValid=false;},l})();L.Bone=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function R(y,a,m){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=l.Normal,this.skinRequired=false,this.color=new L.Color,y<0)throw new Error("index must be >= 0.");if(a==null)throw new Error("name cannot be null.");this.index=y,this.name=a,this.parent=m;}return R})(),l;L.BoneData=Yt,(function(R){R[R.Normal=0]="Normal",R[R.OnlyTranslation=1]="OnlyTranslation",R[R.NoRotationOrReflection=2]="NoRotationOrReflection",R[R.NoScale=3]="NoScale",R[R.NoScaleOrReflection=4]="NoScaleOrReflection";})(l=L.TransformMode||(L.TransformMode={}));})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y,a){this.name=R,this.order=y,this.skinRequired=a;}return l})();L.ConstraintData=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y){if(y==null)throw new Error("data cannot be null.");this.time=R,this.data=y;}return l})();L.Event=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R){this.name=R;}return l})();L.EventData=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y){if(this.bendDirection=0,this.compress=false,this.stretch=false,this.mix=1,this.softness=0,this.active=false,R==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=R,this.mix=R.mix,this.softness=R.softness,this.bendDirection=R.bendDirection,this.compress=R.compress,this.stretch=R.stretch,this.bones=new Array;for(var a=0;a<R.bones.length;a++)this.bones.push(skeleton.findBone(R.bones[a].name));this.target=y.findBone(R.target.name);}return l.prototype.isActive=function(){return this.active},l.prototype.apply=function(){this.update();},l.prototype.update=function(){var R=this.target,y=this.bones;switch(y.length){case 1:this.apply1(y[0],R.worldX,R.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(y[0],y[1],R.worldX,R.worldY,this.bendDirection,this.stretch,this.softness,this.mix);}},l.prototype.apply1=function(R,y,a,m,u,A,S){R.appliedValid||R.updateAppliedTransform();var O=R.parent,T=O.a,N=O.b,P=O.c,E=O.d,D=-R.ashearX-R.arotation,q=0,$=0;switch(R.data.transformMode){case L.TransformMode.OnlyTranslation:q=y-R.worldX,$=a-R.worldY;break;case L.TransformMode.NoRotationOrReflection:var it=Math.abs(T*E-N*P)/(T*T+P*P),vt=T/R.skeleton.scaleX,lt=P/R.skeleton.scaleY;N=-lt*it*R.skeleton.scaleX,E=vt*it*R.skeleton.scaleY,D+=Math.atan2(lt,vt)*L.MathUtils.radDeg;default:var dt=y-O.worldX,st=a-O.worldY,G=T*E-N*P;q=(dt*E-st*N)/G-R.ax,$=(st*T-dt*P)/G-R.ay;}D+=Math.atan2($,q)*L.MathUtils.radDeg,R.ascaleX<0&&(D+=180),D>180?D-=360:D<-180&&(D+=360);var et=R.ascaleX,ct=R.ascaleY;if(m||u){switch(R.data.transformMode){case L.TransformMode.NoScale:case L.TransformMode.NoScaleOrReflection:q=y-R.worldX,$=a-R.worldY;}var rt=R.data.length*et,Tt=Math.sqrt(q*q+$*$),it;(m&&Tt<rt||u&&Tt>rt&&rt>1e-4)&&(et*=it=(Tt/rt-1)*S+1,A&&(ct*=it));}R.updateWorldTransformWith(R.ax,R.ay,R.arotation+D*S,et,ct,R.ashearX,R.ashearY);},l.prototype.apply2=function(R,y,a,m,u,A,S,O){if(O!=0){R.appliedValid||R.updateAppliedTransform(),y.appliedValid||y.updateAppliedTransform();var T=R.ax,N=R.ay,P=R.ascaleX,E=P,D=R.ascaleY,q=y.ascaleX,$=0,it=0,vt=0;P<0?(P=-P,$=180,vt=-1):($=0,vt=1),D<0&&(D=-D,vt=-vt),q<0?(q=-q,it=180):it=0;var lt=y.ax,dt=0,st=0,G=0,et=R.a,ct=R.b,rt=R.c,Tt=R.d,ht=Math.abs(P-D)<=1e-4;ht?(st=et*lt+ct*(dt=y.ay)+R.worldX,G=rt*lt+Tt*dt+R.worldY):(dt=0,st=et*lt+R.worldX,G=rt*lt+R.worldY);var ut=R.parent;et=ut.a,ct=ut.b,rt=ut.c;var Rt=1/(et*(Tt=ut.d)-ct*rt),at=st-ut.worldX,_=G-ut.worldY,ot=(at*Tt-_*ct)*Rt-T,xt=(_*et-at*rt)*Rt-N,Mt=Math.sqrt(ot*ot+xt*xt),Xt=y.data.length*q,Dt,Lt;if(Mt<1e-4)return this.apply1(R,a,m,false,A,false,O),void y.updateWorldTransformWith(lt,dt,0,y.ascaleX,y.ascaleY,y.ashearX,y.ashearY);var Bt=((at=a-ut.worldX)*Tt-(_=m-ut.worldY)*ct)*Rt-T,Gt=(_*et-at*rt)*Rt-N,kt=Bt*Bt+Gt*Gt;if(S!=0){S*=P*(q+1)/2;var bt=Math.sqrt(kt),wt=bt-Mt-Xt*P+S;if(wt>0){var Qt=Math.min(1,wt/(2*S))-1;kt=(Bt-=(Qt=(wt-S*(1-Qt*Qt))/bt)*Bt)*Bt+(Gt-=Qt*Gt)*Gt;}}t:if(ht){var ie=(kt-Mt*Mt-(Xt*=P)*Xt)/(2*Mt*Xt);ie<-1?ie=-1:ie>1&&(ie=1,A&&(E*=(Math.sqrt(kt)/(Mt+Xt)-1)*O+1)),Lt=Math.acos(ie)*u,et=Mt+Xt*ie,ct=Xt*Math.sin(Lt),Dt=Math.atan2(Gt*et-Bt*ct,Bt*et+Gt*ct);}else {var Kt=(et=P*Xt)*et,Ae=(ct=D*Xt)*ct,Le=Math.atan2(Gt,Bt),ye=-2*Ae*Mt,Ye=Ae-Kt;if((Tt=ye*ye-4*Ye*(rt=Ae*Mt*Mt+Kt*kt-Kt*Ae))>=0){var Ve=Math.sqrt(Tt);ye<0&&(Ve=-Ve);var qe=(Ve=-(ye+Ve)/2)/Ye,ze=rt/Ve,Ue=Math.abs(qe)<Math.abs(ze)?qe:ze;if(Ue*Ue<=kt){_=Math.sqrt(kt-Ue*Ue)*u,Dt=Le-Math.atan2(_,Ue),Lt=Math.atan2(_/D,(Ue-Mt)/P);break t}}var _e=L.MathUtils.PI,We=Mt-et,Ze=We*We,Xe=0,$e=0,De=Mt+et,xi=De*De,ri=0;(rt=-et*Mt/(Kt-Ae))>=-1&&rt<=1&&(rt=Math.acos(rt),(Tt=(at=et*Math.cos(rt)+Mt)*at+(_=ct*Math.sin(rt))*_)<Ze&&(_e=rt,Ze=Tt,We=at,Xe=_),Tt>xi&&($e=rt,xi=Tt,De=at,ri=_)),kt<=(Ze+xi)/2?(Dt=Le-Math.atan2(Xe*u,We),Lt=_e*u):(Dt=Le-Math.atan2(ri*u,De),Lt=$e*u);}var hi=Math.atan2(dt,lt)*vt,ti=R.arotation;(Dt=(Dt-hi)*L.MathUtils.radDeg+$-ti)>180?Dt-=360:Dt<-180&&(Dt+=360),R.updateWorldTransformWith(T,N,ti+Dt*O,E,R.ascaleY,0,0),ti=y.arotation,(Lt=((Lt+hi)*L.MathUtils.radDeg-y.ashearX)*vt+it-ti)>180?Lt-=360:Lt<-180&&(Lt+=360),y.updateWorldTransformWith(lt,dt,ti+Lt*O,y.ascaleX,y.ascaleY,y.ashearX,y.ashearY);}else y.updateWorldTransform();},l})();L.IkConstraint=Yt;})(Et||(Et={})),(function(L){var Yt=(function(l){function R(y){var a=l.call(this,y,0,false)||this;return a.bones=new Array,a.bendDirection=1,a.compress=false,a.stretch=false,a.uniform=false,a.mix=1,a.softness=0,a}return Be(R,l),R})(L.ConstraintData);L.IkConstraintData=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=false,R==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=R,this.bones=new Array;for(var a=0,m=R.bones.length;a<m;a++)this.bones.push(skeleton.findBone(R.bones[a].name));this.target=y.findSlot(R.target.name),this.position=R.position,this.spacing=R.spacing,this.rotateMix=R.rotateMix,this.translateMix=R.translateMix;}return l.prototype.isActive=function(){return this.active},l.prototype.apply=function(){this.update();},l.prototype.update=function(){var R=this.target.getAttachment();if(R instanceof L.PathAttachment){var y=this.rotateMix,a=this.translateMix,u=y>0;if(a>0||u){var A=this.data,S=A.spacingMode==L.SpacingMode.Percent,O=A.rotateMode,T=O==L.RotateMode.Tangent,N=O==L.RotateMode.ChainScale,P=this.bones.length,E=T?P:P+1,D=this.bones,q=L.Utils.setArraySize(this.spaces,E),$=null,it=this.spacing;if(N||!S){N&&($=L.Utils.setArraySize(this.lengths,P));for(var vt=A.spacingMode==L.SpacingMode.Length,lt=0,dt=E-1;lt<dt;){var st,G=(st=D[lt]).data.length;if(G<l.epsilon)N&&($[lt]=0),q[++lt]=0;else if(S){if(N){var et=G*st.a,ct=G*st.c,rt=Math.sqrt(et*et+ct*ct);$[lt]=rt;}q[++lt]=it;}else {var et=G*st.a,ct=G*st.c,Tt=Math.sqrt(et*et+ct*ct);N&&($[lt]=Tt),q[++lt]=(vt?G+it:it)*Tt/G;}}}else for(var lt=1;lt<E;lt++)q[lt]=it;var ht=this.computeWorldPositions(R,E,T,A.positionMode==L.PositionMode.Percent,S),ut=ht[0],Rt=ht[1],at=A.offsetRotation,_=false,ot;at==0?_=O==L.RotateMode.Chain:(_=false,at*=(ot=this.target.bone).a*ot.d-ot.b*ot.c>0?L.MathUtils.degRad:-L.MathUtils.degRad);for(var lt=0,ot=3;lt<P;lt++,ot+=3){var st;(st=D[lt]).worldX+=(ut-st.worldX)*a,st.worldY+=(Rt-st.worldY)*a;var et,ct,xt=(et=ht[ot])-ut,Mt=(ct=ht[ot+1])-Rt;if(N){var Xt=$[lt];if(Xt!=0){var Dt=(Math.sqrt(xt*xt+Mt*Mt)/Xt-1)*y+1;st.a*=Dt,st.c*=Dt;}}if(ut=et,Rt=ct,u){var Lt=st.a,Bt=st.b,Gt=st.c,kt=st.d,bt=0,wt=0,Qt=0;if(bt=T?ht[ot-1]:q[lt+1]==0?ht[ot+2]:Math.atan2(Mt,xt),bt-=Math.atan2(Gt,Lt),_){wt=Math.cos(bt),Qt=Math.sin(bt);var ie=st.data.length;ut+=(ie*(wt*Lt-Qt*Gt)-xt)*y,Rt+=(ie*(Qt*Lt+wt*Gt)-Mt)*y;}else bt+=at;bt>L.MathUtils.PI?bt-=L.MathUtils.PI2:bt<-L.MathUtils.PI&&(bt+=L.MathUtils.PI2),bt*=y,wt=Math.cos(bt),Qt=Math.sin(bt),st.a=wt*Lt-Qt*Gt,st.b=wt*Bt-Qt*kt,st.c=Qt*Lt+wt*Gt,st.d=Qt*Bt+wt*kt;}st.appliedValid=false;}}}},l.prototype.computeWorldPositions=function(R,y,a,m,u){var A=this.target,S=this.position,O=this.spaces,T=L.Utils.setArraySize(this.positions,3*y+2),N=null,P=R.closed,E=R.worldVerticesLength,D=E/6,q=l.NONE;if(!R.constantSpeed){var $=R.lengths,it=$[D-=P?1:2];if(m&&(S*=it),u)for(var vt=1;vt<y;vt++)O[vt]*=it;N=L.Utils.setArraySize(this.world,8);for(var vt=0,lt=0,dt=0;vt<y;vt++,lt+=3){var st,G=S+=st=O[vt];if(P)(G%=it)<0&&(G+=it),dt=0;else {if(G<0){q!=l.BEFORE&&(q=l.BEFORE,R.computeWorldVertices(A,2,4,N,0,2)),this.addBeforePosition(G,N,0,T,lt);continue}if(G>it){q!=l.AFTER&&(q=l.AFTER,R.computeWorldVertices(A,E-6,4,N,0,2)),this.addAfterPosition(G-it,N,0,T,lt);continue}}for(;;dt++){var et=$[dt];if(!(G>et)){var ct;dt==0?G/=et:G=(G-(ct=$[dt-1]))/(et-ct);break}}dt!=q&&(q=dt,P&&dt==D?(R.computeWorldVertices(A,E-4,4,N,0,2),R.computeWorldVertices(A,0,4,N,4,2)):R.computeWorldVertices(A,6*dt+2,8,N,0,2)),this.addCurvePosition(G,N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],T,lt,a||vt>0&&st==0);}return T}P?(E+=2,N=L.Utils.setArraySize(this.world,E),R.computeWorldVertices(A,2,E-4,N,0,2),R.computeWorldVertices(A,0,2,N,E-4,2),N[E-2]=N[0],N[E-1]=N[1]):(D--,E-=4,N=L.Utils.setArraySize(this.world,E),R.computeWorldVertices(A,2,E,N,0,2));for(var rt=L.Utils.setArraySize(this.curves,D),Tt=0,ht=N[0],ut=N[1],Rt=0,at=0,_=0,ot=0,xt=0,Mt=0,Xt=0,Dt=0,Lt=0,Bt=0,Gt=0,kt=0,bt=0,wt=0,vt=0,Qt=2;vt<D;vt++,Qt+=6)Rt=N[Qt],at=N[Qt+1],_=N[Qt+2],ot=N[Qt+3],Gt=2*(Xt=.1875*(ht-2*Rt+_))+(Lt=.09375*(3*(Rt-_)-ht+(xt=N[Qt+4]))),kt=2*(Dt=.1875*(ut-2*at+ot))+(Bt=.09375*(3*(at-ot)-ut+(Mt=N[Qt+5]))),bt=.75*(Rt-ht)+Xt+.16666667*Lt,wt=.75*(at-ut)+Dt+.16666667*Bt,Tt+=Math.sqrt(bt*bt+wt*wt),bt+=Gt,wt+=kt,Gt+=Lt,kt+=Bt,Tt+=Math.sqrt(bt*bt+wt*wt),bt+=Gt,wt+=kt,Tt+=Math.sqrt(bt*bt+wt*wt),bt+=Gt+Lt,wt+=kt+Bt,Tt+=Math.sqrt(bt*bt+wt*wt),rt[vt]=Tt,ht=xt,ut=Mt;if(S*=m?Tt:Tt/R.lengths[D-1],u)for(var vt=1;vt<y;vt++)O[vt]*=Tt;for(var ie=this.segments,Kt=0,vt=0,lt=0,dt=0,Ae=0;vt<y;vt++,lt+=3){var st,G=S+=st=O[vt];if(P)(G%=Tt)<0&&(G+=Tt),dt=0;else {if(G<0){this.addBeforePosition(G,N,0,T,lt);continue}if(G>Tt){this.addAfterPosition(G-Tt,N,E-4,T,lt);continue}}for(;;dt++){var Le=rt[dt];if(!(G>Le)){var ct;dt==0?G/=Le:G=(G-(ct=rt[dt-1]))/(Le-ct);break}}if(dt!=q){q=dt;var ye=6*dt;for(ht=N[ye],ut=N[ye+1],Rt=N[ye+2],at=N[ye+3],_=N[ye+4],ot=N[ye+5],Gt=2*(Xt=.03*(ht-2*Rt+_))+(Lt=.006*(3*(Rt-_)-ht+(xt=N[ye+6]))),kt=2*(Dt=.03*(ut-2*at+ot))+(Bt=.006*(3*(at-ot)-ut+(Mt=N[ye+7]))),bt=.3*(Rt-ht)+Xt+.16666667*Lt,wt=.3*(at-ut)+Dt+.16666667*Bt,Kt=Math.sqrt(bt*bt+wt*wt),ie[0]=Kt,ye=1;ye<8;ye++)bt+=Gt,wt+=kt,Gt+=Lt,kt+=Bt,Kt+=Math.sqrt(bt*bt+wt*wt),ie[ye]=Kt;bt+=Gt,wt+=kt,Kt+=Math.sqrt(bt*bt+wt*wt),ie[8]=Kt,bt+=Gt+Lt,wt+=kt+Bt,Kt+=Math.sqrt(bt*bt+wt*wt),ie[9]=Kt,Ae=0;}for(G*=Kt;;Ae++){var Ye=ie[Ae];if(!(G>Ye)){var ct;Ae==0?G/=Ye:G=Ae+(G-(ct=ie[Ae-1]))/(Ye-ct);break}}this.addCurvePosition(.1*G,ht,ut,Rt,at,_,ot,xt,Mt,T,lt,a||vt>0&&st==0);}return T},l.prototype.addBeforePosition=function(R,y,a,m,u){var A=y[a],S=y[a+1],O=y[a+2]-A,T=y[a+3]-S,N=Math.atan2(T,O);m[u]=A+R*Math.cos(N),m[u+1]=S+R*Math.sin(N),m[u+2]=N;},l.prototype.addAfterPosition=function(R,y,a,m,u){var A=y[a+2],S=y[a+3],O=A-y[a],T=S-y[a+1],N=Math.atan2(T,O);m[u]=A+R*Math.cos(N),m[u+1]=S+R*Math.sin(N),m[u+2]=N;},l.prototype.addCurvePosition=function(R,y,a,m,u,A,S,O,T,N,P,E){if(R==0||isNaN(R))return N[P]=y,N[P+1]=a,void(N[P+2]=Math.atan2(u-a,m-y));var D=R*R,q=D*R,$=1-R,it=$*$,vt=it*$,lt=$*R,dt=3*lt,st=$*dt,G=dt*R,et=y*vt+m*st+A*G+O*q,ct=a*vt+u*st+S*G+T*q;N[P]=et,N[P+1]=ct,E&&(N[P+2]=R<.001?Math.atan2(u-a,m-y):Math.atan2(ct-(a*it+u*lt*2+S*D),et-(y*it+m*lt*2+A*D)));},l.NONE=-1,l.BEFORE=-2,l.AFTER=-3,l.epsilon=1e-5,l})();L.PathConstraint=Yt;})(Et||(Et={})),(function(L){var Yt=(function(a){function m(u){var A=a.call(this,u,0,false)||this;return A.bones=new Array,A}return Be(m,a),m})(L.ConstraintData);L.PathConstraintData=Yt,(function(a){a[a.Fixed=0]="Fixed",a[a.Percent=1]="Percent";})(L.PositionMode||(L.PositionMode={})),(function(a){a[a.Length=0]="Length",a[a.Fixed=1]="Fixed",a[a.Percent=2]="Percent";})(L.SpacingMode||(L.SpacingMode={})),(function(a){a[a.Tangent=0]="Tangent",a[a.Chain=1]="Chain",a[a.ChainScale=2]="ChainScale";})(L.RotateMode||(L.RotateMode={}));})(Et||(Et={})),(function(L){var Yt=(function(){function R(y){this.toLoad=new Array,this.assets={},this.clientId=y;}return R.prototype.loaded=function(){var y=0;for(var a in this.assets)y++;return y},R})(),l=(function(){function R(y){y===void 0&&(y=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=y;}return R.prototype.queueAsset=function(y,a,m){var u=this.clientAssets[y];return u==null&&(u=new Yt(y),this.clientAssets[y]=u),a!==null&&(u.textureLoader=a),u.toLoad.push(m),this.queuedAssets[m]!==m&&(this.queuedAssets[m]=m,true)},R.prototype.loadText=function(y,a){var m=this;if(a=this.pathPrefix+a,this.queueAsset(y,null,a)){var u=new XMLHttpRequest;u.overrideMimeType("text/html"),u.onreadystatechange=function(){u.readyState==XMLHttpRequest.DONE&&(u.status>=200&&u.status<300?m.rawAssets[a]=u.responseText:m.errors[a]="Couldn't load text "+a+": status "+u.status+", "+u.responseText);},u.open("GET",a,true),u.send();}},R.prototype.loadJson=function(y,a){var m=this;if(a=this.pathPrefix+a,this.queueAsset(y,null,a)){var u=new XMLHttpRequest;u.overrideMimeType("text/html"),u.onreadystatechange=function(){u.readyState==XMLHttpRequest.DONE&&(u.status>=200&&u.status<300?m.rawAssets[a]=JSON.parse(u.responseText):m.errors[a]="Couldn't load text "+a+": status "+u.status+", "+u.responseText);},u.open("GET",a,true),u.send();}},R.prototype.loadTexture=function(y,a,m){var u=this;if(m=this.pathPrefix+m,this.queueAsset(y,a,m))if((typeof window>"u"||typeof navigator>"u"||!window.document)&&typeof importScripts<"u"){fetch(m,{mode:"cors"}).then((function(N){return N.ok||(u.errors[m]="Couldn't load image "+m),N.blob()})).then((function(N){return createImageBitmap(N,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(N){u.rawAssets[m]=N;}));}else {var T=new Image;T.crossOrigin="anonymous",T.onload=function(N){u.rawAssets[m]=T;},T.onerror=function(N){u.errors[m]="Couldn't load image "+m;},T.src=m;}},R.prototype.get=function(y,a){a=this.pathPrefix+a;var m=this.clientAssets[y];return m==null||m.assets[a]},R.prototype.updateClientAssets=function(y){for(var a,m=(typeof window>"u"||typeof navigator>"u"||!window.document)&&typeof importScripts<"u",u=0;u<y.toLoad.length;u++){var A=y.toLoad[u],S=y.assets[A];if(S==null){var O=this.rawAssets[A];if(O==null)continue;m?O instanceof ImageBitmap?y.assets[A]=y.textureLoader(O):y.assets[A]=O:O instanceof HTMLImageElement?y.assets[A]=y.textureLoader(O):y.assets[A]=O;}}},R.prototype.isLoadingComplete=function(y){var a=this.clientAssets[y];return a==null||(this.updateClientAssets(a),a.toLoad.length==a.loaded())},R.prototype.dispose=function(){},R.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},R.prototype.getErrors=function(){return this.errors},R})();L.SharedAssetManager=l;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,R==null)throw new Error("data cannot be null.");this.data=R,this.bones=new Array;for(var y=0;y<R.bones.length;y++){var a=R.bones[y],m=void 0;if(a.parent==null)m=new L.Bone(a,this,null);else {var u=this.bones[a.parent.index];m=new L.Bone(a,this,u),u.children.push(m);}this.bones.push(m);}this.slots=new Array,this.drawOrder=new Array;for(var y=0;y<R.slots.length;y++){var A=R.slots[y],m=this.bones[A.boneData.index],S=new L.Slot(A,m);this.slots.push(S),this.drawOrder.push(S);}this.ikConstraints=new Array;for(var y=0;y<R.ikConstraints.length;y++){var O=R.ikConstraints[y];this.ikConstraints.push(new L.IkConstraint(O,this));}this.transformConstraints=new Array;for(var y=0;y<R.transformConstraints.length;y++){var T=R.transformConstraints[y];this.transformConstraints.push(new L.TransformConstraint(T,this));}this.pathConstraints=new Array;for(var y=0;y<R.pathConstraints.length;y++){var N=R.pathConstraints[y];this.pathConstraints.push(new L.PathConstraint(N,this));}this.color=new L.Color(1,1,1,1),this.updateCache();}return l.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var y=this.bones,a=0,m=y.length;a<m;a++){var u;(u=y[a]).sorted=u.data.skinRequired,u.active=!u.sorted;}if(this.skin!=null)for(var A=this.skin.bones,a=0,m=this.skin.bones.length;a<m;a++){var u=this.bones[A[a].index];do u.sorted=false,u.active=true,u=u.parent;while(u!=null)}var S=this.ikConstraints,O=this.transformConstraints,T=this.pathConstraints,N=S.length,P=O.length,E=T.length,D=N+P+E;t:for(var a=0;a<D;a++){for(var q=0;q<N;q++){var $;if(($=S[q]).data.order==a){this.sortIkConstraint($);continue t}}for(var q=0;q<P;q++){var $;if(($=O[q]).data.order==a){this.sortTransformConstraint($);continue t}}for(var q=0;q<E;q++){var $;if(($=T[q]).data.order==a){this.sortPathConstraint($);continue t}}}for(var a=0,m=y.length;a<m;a++)this.sortBone(y[a]);},l.prototype.sortIkConstraint=function(R){if(R.active=R.target.isActive()&&(!R.data.skinRequired||this.skin!=null&&L.Utils.contains(this.skin.constraints,R.data,true)),R.active){var y=R.target;this.sortBone(y);var a=R.bones,m=a[0];if(this.sortBone(m),a.length>1){var u=a[a.length-1];this._updateCache.indexOf(u)>-1||this.updateCacheReset.push(u);}this._updateCache.push(R),this.sortReset(m.children),a[a.length-1].sorted=true;}},l.prototype.sortPathConstraint=function(R){if(R.active=R.target.bone.isActive()&&(!R.data.skinRequired||this.skin!=null&&L.Utils.contains(this.skin.constraints,R.data,true)),R.active){var y=R.target,a=y.data.index,m=y.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,a,m),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,a,m);for(var u=0,A=this.data.skins.length;u<A;u++)this.sortPathConstraintAttachment(this.data.skins[u],a,m);var S=y.getAttachment();S instanceof L.PathAttachment&&this.sortPathConstraintAttachmentWith(S,m);for(var O=R.bones,T=O.length,u=0;u<T;u++)this.sortBone(O[u]);this._updateCache.push(R);for(var u=0;u<T;u++)this.sortReset(O[u].children);for(var u=0;u<T;u++)O[u].sorted=true;}},l.prototype.sortTransformConstraint=function(R){if(R.active=R.target.isActive()&&(!R.data.skinRequired||this.skin!=null&&L.Utils.contains(this.skin.constraints,R.data,true)),R.active){this.sortBone(R.target);var y=R.bones,a=y.length;if(R.data.local)for(var m=0;m<a;m++){var u=y[m];this.sortBone(u.parent),this._updateCache.indexOf(u)>-1||this.updateCacheReset.push(u);}else for(var m=0;m<a;m++)this.sortBone(y[m]);this._updateCache.push(R);for(var A=0;A<a;A++)this.sortReset(y[A].children);for(var A=0;A<a;A++)y[A].sorted=true;}},l.prototype.sortPathConstraintAttachment=function(R,y,a){var m=R.attachments[y];if(m)for(var u in m)this.sortPathConstraintAttachmentWith(m[u],a);},l.prototype.sortPathConstraintAttachmentWith=function(R,y){if(R instanceof L.PathAttachment){var a=R.bones;if(a==null)this.sortBone(y);else for(var m=this.bones,u=0;u<a.length;)for(var A=a[u++],S=u+A;u<S;u++){var O=a[u];this.sortBone(m[O]);}}},l.prototype.sortBone=function(R){if(!R.sorted){var y=R.parent;y!=null&&this.sortBone(y),R.sorted=true,this._updateCache.push(R);}},l.prototype.sortReset=function(R){for(var y=0,a=R.length;y<a;y++){var m=R[y];m.active&&(m.sorted&&this.sortReset(m.children),m.sorted=false);}},l.prototype.updateWorldTransform=function(){for(var R=this.updateCacheReset,y=0,a=R.length;y<a;y++){var m=R[y];m.ax=m.x,m.ay=m.y,m.arotation=m.rotation,m.ascaleX=m.scaleX,m.ascaleY=m.scaleY,m.ashearX=m.shearX,m.ashearY=m.shearY,m.appliedValid=true;}for(var u=this._updateCache,y=0,a=u.length;y<a;y++)u[y].update();},l.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose();},l.prototype.setBonesToSetupPose=function(){for(var R=this.bones,y=0,a=R.length;y<a;y++)R[y].setToSetupPose();for(var m=this.ikConstraints,y=0,a=m.length;y<a;y++){var u;(u=m[y]).mix=u.data.mix,u.softness=u.data.softness,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch;}for(var A=this.transformConstraints,y=0,a=A.length;y<a;y++){var u,S=(u=A[y]).data;u.rotateMix=S.rotateMix,u.translateMix=S.translateMix,u.scaleMix=S.scaleMix,u.shearMix=S.shearMix;}for(var O=this.pathConstraints,y=0,a=O.length;y<a;y++){var u,S=(u=O[y]).data;u.position=S.position,u.spacing=S.spacing,u.rotateMix=S.rotateMix,u.translateMix=S.translateMix;}},l.prototype.setSlotsToSetupPose=function(){var R=this.slots;L.Utils.arrayCopy(R,0,this.drawOrder,0,R.length);for(var y=0,a=R.length;y<a;y++)R[y].setToSetupPose();},l.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},l.prototype.findBone=function(R){if(R==null)throw new Error("boneName cannot be null.");for(var y=this.bones,a=0,m=y.length;a<m;a++){var u=y[a];if(u.data.name==R)return u}return null},l.prototype.findBoneIndex=function(R){if(R==null)throw new Error("boneName cannot be null.");for(var y=this.bones,a=0,m=y.length;a<m;a++)if(y[a].data.name==R)return a;return  -1},l.prototype.findSlot=function(R){if(R==null)throw new Error("slotName cannot be null.");for(var y=this.slots,a=0,m=y.length;a<m;a++){var u=y[a];if(u.data.name==R)return u}return null},l.prototype.findSlotIndex=function(R){if(R==null)throw new Error("slotName cannot be null.");for(var y=this.slots,a=0,m=y.length;a<m;a++)if(y[a].data.name==R)return a;return  -1},l.prototype.setSkinByName=function(R){var y=this.data.findSkin(R);if(y==null)throw new Error("Skin not found: "+R);this.setSkin(y);},l.prototype.setSkin=function(R){if(R!=this.skin){if(R!=null)if(this.skin!=null)R.attachAll(this,this.skin);else for(var y=this.slots,a=0,m=y.length;a<m;a++){var u=y[a],A=u.data.attachmentName;if(A!=null){var S=R.getAttachment(a,A);S!=null&&u.setAttachment(S);}}this.skin=R,this.updateCache();}},l.prototype.getAttachmentByName=function(R,y){return this.getAttachment(this.data.findSlotIndex(R),y)},l.prototype.getAttachment=function(R,y){if(y==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var a=this.skin.getAttachment(R,y);if(a!=null)return a}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(R,y):null},l.prototype.setAttachment=function(R,y){if(R==null)throw new Error("slotName cannot be null.");for(var a=this.slots,m=0,u=a.length;m<u;m++){var A=a[m];if(A.data.name==R){var S=null;if(y!=null&&(S=this.getAttachment(m,y))==null)throw new Error("Attachment not found: "+y+", for slot: "+R);return void A.setAttachment(S)}}throw new Error("Slot not found: "+R)},l.prototype.findIkConstraint=function(R){if(R==null)throw new Error("constraintName cannot be null.");for(var y=this.ikConstraints,a=0,m=y.length;a<m;a++){var u=y[a];if(u.data.name==R)return u}return null},l.prototype.findTransformConstraint=function(R){if(R==null)throw new Error("constraintName cannot be null.");for(var y=this.transformConstraints,a=0,m=y.length;a<m;a++){var u=y[a];if(u.data.name==R)return u}return null},l.prototype.findPathConstraint=function(R){if(R==null)throw new Error("constraintName cannot be null.");for(var y=this.pathConstraints,a=0,m=y.length;a<m;a++){var u=y[a];if(u.data.name==R)return u}return null},l.prototype.getBounds=function(R,y,a){if(a===void 0&&(a=new Array(2)),R==null)throw new Error("offset cannot be null.");if(y==null)throw new Error("size cannot be null.");for(var m=this.drawOrder,u=Number.POSITIVE_INFINITY,A=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY,T=0,N=m.length;T<N;T++){var P=m[T];if(P.bone.active){var E=0,D=null,q=P.getAttachment();if(q instanceof L.RegionAttachment)E=8,D=L.Utils.setArraySize(a,E,0),q.computeWorldVertices(P.bone,D,0,2);else if(q instanceof L.MeshAttachment){var $=q;E=$.worldVerticesLength,D=L.Utils.setArraySize(a,E,0),$.computeWorldVertices(P,0,E,D,0,2);}if(D!=null)for(var it=0,vt=D.length;it<vt;it+=2){var lt=D[it],dt=D[it+1];u=Math.min(u,lt),A=Math.min(A,dt),S=Math.max(S,lt),O=Math.max(O,dt);}}}R.set(u,A),y.set(S-u,O-A);},l.prototype.update=function(R){this.time+=R;},l})();L.Skeleton=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function a(m){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=m;}return a.prototype.readSkeletonData=function(m){var u=this.scale,A=new A;skeletonData.name="";var S=new l(m);skeletonData.hash=S.readString(),skeletonData.version=S.readString(),skeletonData.x=S.readFloat(),skeletonData.y=S.readFloat(),skeletonData.width=S.readFloat(),skeletonData.height=S.readFloat();var O=S.readBoolean();O&&(skeletonData.fps=S.readFloat(),skeletonData.imagesPath=S.readString(),skeletonData.audioPath=S.readString());var T=0;T=S.readInt(true);for(var dt=0;dt<T;dt++)S.strings.push(S.readString());T=S.readInt(true);for(var dt=0;dt<T;dt++){var N=S.readString(),P=dt==0?null:A.bones[S.readInt(true)],E;(E=new L.BoneData(dt,N,P)).rotation=S.readFloat(),E.x=S.readFloat()*u,E.y=S.readFloat()*u,E.scaleX=S.readFloat(),E.scaleY=S.readFloat(),E.shearX=S.readFloat(),E.shearY=S.readFloat(),E.length=S.readFloat()*u,E.transformMode=a.TransformModeValues[S.readInt(true)],E.skinRequired=S.readBoolean(),O&&L.Color.rgba8888ToColor(E.color,S.readInt32()),skeletonData.bones.push(E);}T=S.readInt(true);for(var dt=0;dt<T;dt++){var D=S.readString(),q=A.bones[S.readInt(true)],E=new L.SlotData(dt,D,q);L.Color.rgba8888ToColor(E.color,S.readInt32());var $=S.readInt32();$!=-1&&L.Color.rgb888ToColor(E.darkColor=new L.Color,$),E.attachmentName=S.readStringRef(),E.blendMode=a.BlendModeValues[S.readInt(true)],skeletonData.slots.push(E);}T=S.readInt(true);for(var dt=0,it=void 0;dt<T;dt++){var E;(E=new L.IkConstraintData(S.readString())).order=S.readInt(true),E.skinRequired=S.readBoolean(),it=S.readInt(true);for(var vt=0;vt<it;vt++)E.bones.push(skeletonData.bones[S.readInt(true)]);E.target=A.bones[S.readInt(true)],E.mix=S.readFloat(),E.softness=S.readFloat()*u,E.bendDirection=S.readByte(),E.compress=S.readBoolean(),E.stretch=S.readBoolean(),E.uniform=S.readBoolean(),skeletonData.ikConstraints.push(E);}T=S.readInt(true);for(var dt=0,it=void 0;dt<T;dt++){var E;(E=new L.TransformConstraintData(S.readString())).order=S.readInt(true),E.skinRequired=S.readBoolean(),it=S.readInt(true);for(var vt=0;vt<it;vt++)E.bones.push(skeletonData.bones[S.readInt(true)]);E.target=A.bones[S.readInt(true)],E.local=S.readBoolean(),E.relative=S.readBoolean(),E.offsetRotation=S.readFloat(),E.offsetX=S.readFloat()*u,E.offsetY=S.readFloat()*u,E.offsetScaleX=S.readFloat(),E.offsetScaleY=S.readFloat(),E.offsetShearY=S.readFloat(),E.rotateMix=S.readFloat(),E.translateMix=S.readFloat(),E.scaleMix=S.readFloat(),E.shearMix=S.readFloat(),skeletonData.transformConstraints.push(E);}T=S.readInt(true);for(var dt=0,it=void 0;dt<T;dt++){var E;(E=new L.PathConstraintData(S.readString())).order=S.readInt(true),E.skinRequired=S.readBoolean(),it=S.readInt(true);for(var vt=0;vt<it;vt++)E.bones.push(skeletonData.bones[S.readInt(true)]);E.target=A.slots[S.readInt(true)],E.positionMode=a.PositionModeValues[S.readInt(true)],E.spacingMode=a.SpacingModeValues[S.readInt(true)],E.rotateMode=a.RotateModeValues[S.readInt(true)],E.offsetRotation=S.readFloat(),E.position=S.readFloat(),E.positionMode==L.PositionMode.Fixed&&(E.position*=u),E.spacing=S.readFloat(),E.spacingMode!=L.SpacingMode.Length&&E.spacingMode!=L.SpacingMode.Fixed||(E.spacing*=u),E.rotateMix=S.readFloat(),E.translateMix=S.readFloat(),skeletonData.pathConstraints.push(E);}var lt=this.readSkin(S,A,true,O);lt!=null&&(skeletonData.defaultSkin=lt,skeletonData.skins.push(lt));var dt=A.skins.length;for(L.Utils.setArraySize(skeletonData.skins,T=dt+S.readInt(true));dt<T;dt++)skeletonData.skins[dt]=this.readSkin(S,A,false,O);T=this.linkedMeshes.length;for(var dt=0;dt<T;dt++){var st=this.linkedMeshes[dt],G=st.skin==null?A.defaultSkin:A.findSkin(st.skin);if(G==null)throw new Error("Skin not found: "+st.skin);var et=G.getAttachment(st.slotIndex,st.parent);if(et==null)throw new Error("Parent mesh not found: "+st.parent);st.mesh.deformAttachment=st.inheritDeform?et:st.mesh,st.mesh.setParentMesh(et),st.mesh.updateUVs();}this.linkedMeshes.length=0,T=S.readInt(true);for(var dt=0;dt<T;dt++){var E;(E=new L.EventData(S.readStringRef())).intValue=S.readInt(false),E.floatValue=S.readFloat(),E.stringValue=S.readString(),E.audioPath=S.readString(),E.audioPath!=null&&(E.volume=S.readFloat(),E.balance=S.readFloat()),skeletonData.events.push(E);}T=S.readInt(true);for(var dt=0;dt<T;dt++)skeletonData.animations.push(this.readAnimation(S,S.readString(),A));return A},a.prototype.readSkin=function(m,u,A,S){var O=null,T=0;if(A){if((T=m.readInt(true))==0)return null;O=new L.Skin("default");}else {(O=new L.Skin(m.readStringRef())).bones.length=m.readInt(true);for(var N=0,P=O.bones.length;N<P;N++)O.bones[N]=u.bones[m.readInt(true)];for(var N=0,P=m.readInt(true);N<P;N++)O.constraints.push(skeletonData.ikConstraints[m.readInt(true)]);for(var N=0,P=m.readInt(true);N<P;N++)O.constraints.push(skeletonData.transformConstraints[m.readInt(true)]);for(var N=0,P=m.readInt(true);N<P;N++)O.constraints.push(skeletonData.pathConstraints[m.readInt(true)]);T=m.readInt(true);}for(var N=0;N<T;N++)for(var E=m.readInt(true),D=0,q=m.readInt(true);D<q;D++){var $=m.readStringRef(),it=this.readAttachment(m,u,O,E,$,S);it!=null&&O.setAttachment(E,$,it);}return O},a.prototype.readAttachment=function(m,u,A,S,O,T){var N=this.scale,P=m.readStringRef();P==null&&(P=O);var E=m.readByte();switch(a.AttachmentTypeValues[E]){case L.AttachmentType.Region:var Mt=m.readStringRef(),Xt=m.readFloat(),Dt=m.readFloat(),Lt=m.readFloat(),q=m.readFloat(),$=m.readFloat(),Tt=m.readFloat(),ht=m.readFloat(),wt=m.readInt32();Mt==null&&(Mt=P);var it=this.attachmentLoader.newRegionAttachment(A,P,Mt);return it==null?null:(it.path=Mt,it.x=Dt*N,it.y=Lt*N,it.scaleX=q,it.scaleY=$,it.rotation=Xt,it.width=Tt*N,it.height=ht*N,L.Color.rgba8888ToColor(it.color,wt),it.updateOffset(),it);case L.AttachmentType.BoundingBox:var kt=m.readInt(true),bt=this.readVertices(m,kt),wt=T?m.readInt32():0,vt=this.attachmentLoader.newBoundingBoxAttachment(A,P);return vt==null?null:(vt.worldVerticesLength=kt<<1,vt.vertices=bt.vertices,vt.bones=bt.bones,T&&L.Color.rgba8888ToColor(vt.color,wt),vt);case L.AttachmentType.Mesh:var Mt=m.readStringRef(),wt=m.readInt32(),kt=m.readInt(true),lt=this.readFloatArray(m,kt<<1,1),dt=this.readShortArray(m),bt=this.readVertices(m,kt),st=m.readInt(true),G=null,Tt=0,ht=0,ut;return T&&(G=this.readShortArray(m),Tt=m.readFloat(),ht=m.readFloat()),Mt==null&&(Mt=P),(ut=this.attachmentLoader.newMeshAttachment(A,P,Mt))==null?null:(ut.path=Mt,L.Color.rgba8888ToColor(ut.color,wt),ut.bones=bt.bones,ut.vertices=bt.vertices,ut.worldVerticesLength=kt<<1,ut.triangles=dt,ut.regionUVs=lt,ut.updateUVs(),ut.hullLength=st<<1,T&&(ut.edges=G,ut.width=Tt*N,ut.height=ht*N),ut);case L.AttachmentType.LinkedMesh:var Mt=m.readStringRef(),wt=m.readInt32(),et=m.readStringRef(),ct=m.readStringRef(),rt=m.readBoolean(),Tt=0,ht=0,ut;return T&&(Tt=m.readFloat(),ht=m.readFloat()),Mt==null&&(Mt=P),(ut=this.attachmentLoader.newMeshAttachment(A,P,Mt))==null?null:(ut.path=Mt,L.Color.rgba8888ToColor(ut.color,wt),T&&(ut.width=Tt*N,ut.height=ht*N),this.linkedMeshes.push(new R(ut,et,S,ct,rt)),ut);case L.AttachmentType.Path:for(var Rt=m.readBoolean(),at=m.readBoolean(),kt=m.readInt(true),bt=this.readVertices(m,kt),_=L.Utils.newArray(kt/3,0),ot=0,xt=_.length;ot<xt;ot++)_[ot]=m.readFloat()*N;var wt=T?m.readInt32():0,Mt;return (Mt=this.attachmentLoader.newPathAttachment(A,P))==null?null:(Mt.closed=Rt,Mt.constantSpeed=at,Mt.worldVerticesLength=kt<<1,Mt.vertices=bt.vertices,Mt.bones=bt.bones,Mt.lengths=_,T&&L.Color.rgba8888ToColor(Mt.color,wt),Mt);case L.AttachmentType.Point:var Xt=m.readFloat(),Dt=m.readFloat(),Lt=m.readFloat(),wt=T?m.readInt32():0,Bt=this.attachmentLoader.newPointAttachment(A,P);return Bt==null?null:(Bt.x=Dt*N,Bt.y=Lt*N,Bt.rotation=Xt,T&&L.Color.rgba8888ToColor(Bt.color,wt),Bt);case L.AttachmentType.Clipping:var Gt=m.readInt(true),kt=m.readInt(true),bt=this.readVertices(m,kt),wt=T?m.readInt32():0,Qt=this.attachmentLoader.newClippingAttachment(A,P);return Qt==null?null:(Qt.endSlot=u.slots[Gt],Qt.worldVerticesLength=kt<<1,Qt.vertices=bt.vertices,Qt.bones=bt.bones,T&&L.Color.rgba8888ToColor(Qt.color,wt),Qt)}return null},a.prototype.readVertices=function(m,u){var A=u<<1,S=new y,O=this.scale;if(!m.readBoolean())return S.vertices=this.readFloatArray(m,A,O),S;for(var T=new Array,N=new Array,P=0;P<u;P++){var E=m.readInt(true);N.push(E);for(var D=0;D<E;D++)N.push(m.readInt(true)),T.push(m.readFloat()*O),T.push(m.readFloat()*O),T.push(m.readFloat());}return S.vertices=L.Utils.toFloatArray(T),S.bones=N,S},a.prototype.readFloatArray=function(m,u,A){var S=new Array(u);if(A==1)for(var O=0;O<u;O++)S[O]=m.readFloat();else for(var O=0;O<u;O++)S[O]=m.readFloat()*A;return S},a.prototype.readShortArray=function(m){for(var u=m.readInt(true),A=new Array(u),S=0;S<u;S++)A[S]=m.readShort();return A},a.prototype.readAnimation=function(m,u,A){for(var S=new Array,O=this.scale,T=0,N=new L.Color,P=new L.Color,E=0,D=m.readInt(true);E<D;E++)for(var q=m.readInt(true),$=0,it=m.readInt(true);$<it;$++){var vt=m.readByte(),lt=m.readInt(true);switch(vt){case a.SLOT_ATTACHMENT:var G;(G=new L.AttachmentTimeline(lt)).slotIndex=q;for(var dt=0;dt<lt;dt++)G.setFrame(dt,m.readFloat(),m.readStringRef());S.push(G),T=Math.max(T,G.frames[lt-1]);break;case a.SLOT_COLOR:var G;(G=new L.ColorTimeline(lt)).slotIndex=q;for(var dt=0;dt<lt;dt++){var st=m.readFloat();L.Color.rgba8888ToColor(N,m.readInt32()),G.setFrame(dt,st,N.r,N.g,N.b,N.a),dt<lt-1&&this.readCurve(m,dt,G);}S.push(G),T=Math.max(T,G.frames[(lt-1)*L.ColorTimeline.ENTRIES]);break;case a.SLOT_TWO_COLOR:var G;(G=new L.TwoColorTimeline(lt)).slotIndex=q;for(var dt=0;dt<lt;dt++){var st=m.readFloat();L.Color.rgba8888ToColor(N,m.readInt32()),L.Color.rgb888ToColor(P,m.readInt32()),G.setFrame(dt,st,N.r,N.g,N.b,N.a,P.r,P.g,P.b),dt<lt-1&&this.readCurve(m,dt,G);}S.push(G),T=Math.max(T,G.frames[(lt-1)*L.TwoColorTimeline.ENTRIES]);}}for(var E=0,D=m.readInt(true);E<D;E++)for(var et=m.readInt(true),$=0,it=m.readInt(true);$<it;$++){var vt=m.readByte(),lt=m.readInt(true);switch(vt){case a.BONE_ROTATE:var G;(G=new L.RotateTimeline(lt)).boneIndex=et;for(var dt=0;dt<lt;dt++)G.setFrame(dt,m.readFloat(),m.readFloat()),dt<lt-1&&this.readCurve(m,dt,G);S.push(G),T=Math.max(T,G.frames[(lt-1)*L.RotateTimeline.ENTRIES]);break;case a.BONE_TRANSLATE:case a.BONE_SCALE:case a.BONE_SHEAR:var G=void 0,ct=1;vt==a.BONE_SCALE?G=new L.ScaleTimeline(lt):vt==a.BONE_SHEAR?G=new L.ShearTimeline(lt):(G=new L.TranslateTimeline(lt),ct=O),G.boneIndex=et;for(var dt=0;dt<lt;dt++)G.setFrame(dt,m.readFloat(),m.readFloat()*ct,m.readFloat()*ct),dt<lt-1&&this.readCurve(m,dt,G);S.push(G),T=Math.max(T,G.frames[(lt-1)*L.TranslateTimeline.ENTRIES]);}}for(var E=0,D=m.readInt(true);E<D;E++){var rt=m.readInt(true),lt=m.readInt(true),G;(G=new L.IkConstraintTimeline(lt)).ikConstraintIndex=rt;for(var dt=0;dt<lt;dt++)G.setFrame(dt,m.readFloat(),m.readFloat(),m.readFloat()*O,m.readByte(),m.readBoolean(),m.readBoolean()),dt<lt-1&&this.readCurve(m,dt,G);S.push(G),T=Math.max(T,G.frames[(lt-1)*L.IkConstraintTimeline.ENTRIES]);}for(var E=0,D=m.readInt(true);E<D;E++){var rt=m.readInt(true),lt=m.readInt(true),G;(G=new L.TransformConstraintTimeline(lt)).transformConstraintIndex=rt;for(var dt=0;dt<lt;dt++)G.setFrame(dt,m.readFloat(),m.readFloat(),m.readFloat(),m.readFloat(),m.readFloat()),dt<lt-1&&this.readCurve(m,dt,G);S.push(G),T=Math.max(T,G.frames[(lt-1)*L.TransformConstraintTimeline.ENTRIES]);}for(var E=0,D=m.readInt(true);E<D;E++)for(var rt=m.readInt(true),Tt=A.pathConstraints[rt],$=0,it=m.readInt(true);$<it;$++){var vt=m.readByte(),lt=m.readInt(true);switch(vt){case a.PATH_POSITION:case a.PATH_SPACING:var G=void 0,ct=1;vt==a.PATH_SPACING?(G=new L.PathConstraintSpacingTimeline(lt),Tt.spacingMode!=L.SpacingMode.Length&&Tt.spacingMode!=L.SpacingMode.Fixed||(ct=O)):(G=new L.PathConstraintPositionTimeline(lt),Tt.positionMode==L.PositionMode.Fixed&&(ct=O)),G.pathConstraintIndex=rt;for(var dt=0;dt<lt;dt++)G.setFrame(dt,m.readFloat(),m.readFloat()*ct),dt<lt-1&&this.readCurve(m,dt,G);S.push(G),T=Math.max(T,G.frames[(lt-1)*L.PathConstraintPositionTimeline.ENTRIES]);break;case a.PATH_MIX:var G;(G=new L.PathConstraintMixTimeline(lt)).pathConstraintIndex=rt;for(var dt=0;dt<lt;dt++)G.setFrame(dt,m.readFloat(),m.readFloat(),m.readFloat()),dt<lt-1&&this.readCurve(m,dt,G);S.push(G),T=Math.max(T,G.frames[(lt-1)*L.PathConstraintMixTimeline.ENTRIES]);}}for(var E=0,D=m.readInt(true);E<D;E++)for(var ht=A.skins[m.readInt(true)],$=0,it=m.readInt(true);$<it;$++)for(var q=m.readInt(true),ut=0,Rt=m.readInt(true);ut<Rt;ut++){var at=ht.getAttachment(q,m.readStringRef()),_=at.bones!=null,ot=at.vertices,xt=_?ot.length/3*2:ot.length,lt=m.readInt(true),G;(G=new L.DeformTimeline(lt)).slotIndex=q,G.attachment=at;for(var dt=0;dt<lt;dt++){var st=m.readFloat(),Mt=void 0,Xt=m.readInt(true);if(Xt==0)Mt=_?L.Utils.newFloatArray(xt):ot;else {Mt=L.Utils.newFloatArray(xt);var Dt=m.readInt(true);if(Xt+=Dt,O==1)for(var Lt=Dt;Lt<Xt;Lt++)Mt[Lt]=m.readFloat();else for(var Lt=Dt;Lt<Xt;Lt++)Mt[Lt]=m.readFloat()*O;if(!_)for(var Lt=0,Bt=Mt.length;Lt<Bt;Lt++)Mt[Lt]+=ot[Lt];}G.setFrame(dt,st,Mt),dt<lt-1&&this.readCurve(m,dt,G);}S.push(G),T=Math.max(T,G.frames[lt-1]);}var Gt=m.readInt(true);if(Gt>0){for(var G=new L.DrawOrderTimeline(Gt),kt=A.slots.length,E=0;E<Gt;E++){for(var st=m.readFloat(),bt=m.readInt(true),wt=L.Utils.newArray(kt,0),$=kt-1;$>=0;$--)wt[$]=-1;for(var Qt=L.Utils.newArray(kt-bt,0),ie=0,Kt=0,$=0;$<bt;$++){for(var q=m.readInt(true);ie!=q;)Qt[Kt++]=ie++;wt[ie+m.readInt(true)]=ie++;}for(;ie<kt;)Qt[Kt++]=ie++;for(var $=kt-1;$>=0;$--)wt[$]==-1&&(wt[$]=Qt[--Kt]);G.setFrame(E,st,wt);}S.push(G),T=Math.max(T,G.frames[Gt-1]);}var Ae=m.readInt(true);if(Ae>0){for(var G=new L.EventTimeline(Ae),E=0;E<Ae;E++){var st=m.readFloat(),Le=A.events[m.readInt(true)],ye=new L.Event(st,Le);ye.intValue=m.readInt(false),ye.floatValue=m.readFloat(),ye.stringValue=m.readBoolean()?m.readString():Le.stringValue,ye.data.audioPath!=null&&(ye.volume=m.readFloat(),ye.balance=m.readFloat()),G.setFrame(E,ye);}S.push(G),T=Math.max(T,G.frames[Ae-1]);}return new L.Animation(u,S,T)},a.prototype.readCurve=function(m,u,A){switch(m.readByte()){case a.CURVE_STEPPED:A.setStepped(u);break;case a.CURVE_BEZIER:this.setCurve(A,u,m.readFloat(),m.readFloat(),m.readFloat(),m.readFloat());}},a.prototype.setCurve=function(m,u,A,S,O,T){m.setCurve(u,A,S,O,T);},a.AttachmentTypeValues=[0,1,2,3,4,5,6],a.TransformModeValues=[L.TransformMode.Normal,L.TransformMode.OnlyTranslation,L.TransformMode.NoRotationOrReflection,L.TransformMode.NoScale,L.TransformMode.NoScaleOrReflection],a.PositionModeValues=[L.PositionMode.Fixed,L.PositionMode.Percent],a.SpacingModeValues=[L.SpacingMode.Length,L.SpacingMode.Fixed,L.SpacingMode.Percent],a.RotateModeValues=[L.RotateMode.Tangent,L.RotateMode.Chain,L.RotateMode.ChainScale],a.BlendModeValues=[L.BlendMode.Normal,L.BlendMode.Additive,L.BlendMode.Multiply,L.BlendMode.Screen],a.BONE_ROTATE=0,a.BONE_TRANSLATE=1,a.BONE_SCALE=2,a.BONE_SHEAR=3,a.SLOT_ATTACHMENT=0,a.SLOT_COLOR=1,a.SLOT_TWO_COLOR=2,a.PATH_POSITION=0,a.PATH_SPACING=1,a.PATH_MIX=2,a.CURVE_LINEAR=0,a.CURVE_STEPPED=1,a.CURVE_BEZIER=2,a})();L.SkeletonBinary=Yt;var l=(function(){function a(m,u,A,S){u===void 0&&(u=new Array),A===void 0&&(A=0),S===void 0&&(S=new DataView(m.buffer)),this.strings=u,this.index=A,this.buffer=S;}return a.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},a.prototype.readShort=function(){var m=this.buffer.getInt16(this.index);return this.index+=2,m},a.prototype.readInt32=function(){var m=this.buffer.getInt32(this.index);return this.index+=4,m},a.prototype.readInt=function(m){var u=this.readByte(),A=127&u;return (128&u)!=0&&(A|=(127&(u=this.readByte()))<<7,(128&u)!=0&&(A|=(127&(u=this.readByte()))<<14,(128&u)!=0&&(A|=(127&(u=this.readByte()))<<21,(128&u)!=0&&(A|=(127&(u=this.readByte()))<<28)))),m?A:A>>>1^-(1&A)},a.prototype.readStringRef=function(){var m=this.readInt(true);return m==0?null:this.strings[m-1]},a.prototype.readString=function(){var m=this.readInt(true);switch(m){case 0:return null;case 1:return ""}m--;for(var u="",A=0,S=0;S<m;){var O=this.readByte();switch(O>>4){case 12:case 13:u+=String.fromCharCode((31&O)<<6|63&this.readByte()),S+=2;break;case 14:u+=String.fromCharCode((15&O)<<12|(63&this.readByte())<<6|63&this.readByte()),S+=3;break;default:u+=String.fromCharCode(O),S++;}}return u},a.prototype.readFloat=function(){var m=this.buffer.getFloat32(this.index);return this.index+=4,m},a.prototype.readBoolean=function(){return this.readByte()!=0},a})(),R=(function(){function a(m,u,A,S,O){this.mesh=m,this.skin=u,this.slotIndex=A,this.parent=S,this.inheritDeform=O;}return a})(),y=(function(){function a(m,u){m===void 0&&(m=null),u===void 0&&(u=null),this.bones=m,this.vertices=u;}return a})();})(Et||(Et={})),(function(L){var Yt=(function(){function l(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new L.Pool((function(){return L.Utils.newFloatArray(16)}));}return l.prototype.update=function(R,y){if(R==null)throw new Error("skeleton cannot be null.");var a=this.boundingBoxes,m=this.polygons,u=this.polygonPool,A=Skeleton.slots,S=A.length;a.length=0,u.freeAll(m),m.length=0;for(var O=0;O<S;O++){var T=A[O];if(T.bone.active){var N=T.getAttachment();if(N instanceof L.BoundingBoxAttachment){var P=N;a.push(P);var E=u.obtain();E.length!=P.worldVerticesLength&&(E=L.Utils.newFloatArray(P.worldVerticesLength)),m.push(E),P.computeWorldVertices(T,0,P.worldVerticesLength,E,0,2);}}}y?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY);},l.prototype.aabbCompute=function(){for(var R=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,m=Number.NEGATIVE_INFINITY,u=this.polygons,A=0,S=u.length;A<S;A++)for(var O=u[A],T=O,N=0,P=O.length;N<P;N+=2){var E=T[N],D=T[N+1];R=Math.min(R,E),y=Math.min(y,D),a=Math.max(a,E),m=Math.max(m,D);}this.minX=R,this.minY=y,this.maxX=a,this.maxY=m;},l.prototype.aabbContainsPoint=function(R,y){return R>=this.minX&&R<=this.maxX&&y>=this.minY&&y<=this.maxY},l.prototype.aabbIntersectsSegment=function(R,y,a,m){var u=this.minX,A=this.minY,S=this.maxX,O=this.maxY;if(R<=u&&a<=u||y<=A&&m<=A||R>=S&&a>=S||y>=O&&m>=O)return  false;var T=(m-y)/(a-R),N=T*(u-R)+y;if(N>A&&N<O||(N=T*(S-R)+y)>A&&N<O)return  true;var P=(A-y)/T+R;return P>u&&P<S||(P=(O-y)/T+R)>u&&P<S},l.prototype.aabbIntersectsSkeleton=function(R){return this.minX<R.maxX&&this.maxX>R.minX&&this.minY<R.maxY&&this.maxY>R.minY},l.prototype.containsPoint=function(R,y){for(var a=this.polygons,m=0,u=a.length;m<u;m++)if(this.containsPointPolygon(a[m],R,y))return this.boundingBoxes[m];return null},l.prototype.containsPointPolygon=function(R,y,a){for(var m=R,u=R.length,A=u-2,S=false,O=0;O<u;O+=2){var T=m[O+1],N=m[A+1];if(T<a&&N>=a||N<a&&T>=a){var P=m[O];P+(a-T)/(N-T)*(m[A]-P)<y&&(S=!S);}A=O;}return S},l.prototype.intersectsSegment=function(R,y,a,m){for(var u=this.polygons,A=0,S=u.length;A<S;A++)if(this.intersectsSegmentPolygon(u[A],R,y,a,m))return this.boundingBoxes[A];return null},l.prototype.intersectsSegmentPolygon=function(R,y,a,m,u){for(var A=R,S=R.length,O=y-m,T=a-u,N=y*u-a*m,P=A[S-2],E=A[S-1],D=0;D<S;D+=2){var q=A[D],$=A[D+1],it=P*$-E*q,vt=P-q,lt=E-$,dt=O*lt-T*vt,st=(N*vt-O*it)/dt;if((st>=P&&st<=q||st>=q&&st<=P)&&(st>=y&&st<=m||st>=m&&st<=y)){var G=(N*lt-T*it)/dt;if((G>=E&&G<=$||G>=$&&G<=E)&&(G>=a&&G<=u||G>=u&&G<=a))return  true}P=q,E=$;}return  false},l.prototype.getPolygon=function(R){if(R==null)throw new Error("boundingBox cannot be null.");var y=this.boundingBoxes.indexOf(R);return y==-1?null:this.polygons[y]},l.prototype.getWidth=function(){return this.maxX-this.minX},l.prototype.getHeight=function(){return this.maxY-this.minY},l})();L.SkeletonBounds=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(){this.triangulator=new L.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array;}return l.prototype.clipStart=function(R,y){if(this.clipAttachment!=null)return 0;this.clipAttachment=y;var a=y.worldVerticesLength,m=L.Utils.setArraySize(this.clippingPolygon,a);y.computeWorldVertices(R,0,a,m,0,2);var u=this.clippingPolygon;l.makeClockwise(u);for(var A=this.clippingPolygons=this.triangulator.decompose(u,this.triangulator.triangulate(u)),S=0,O=A.length;S<O;S++){var T=A[S];l.makeClockwise(T),T.push(T[0]),T.push(T[1]);}return A.length},l.prototype.clipEndWithSlot=function(R){this.clipAttachment!=null&&this.clipAttachment.endSlot==R.data&&this.clipEnd();},l.prototype.clipEnd=function(){this.clipAttachment!=null&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0);},l.prototype.isClipping=function(){return this.clipAttachment!=null},l.prototype.clipTriangles=function(R,y,a,m,u,A,S,O){var T=this.clipOutput,N=this.clippedVertices,P=this.clippedTriangles,E=this.clippingPolygons,D=this.clippingPolygons.length,q=O?12:8,$=0;N.length=0,P.length=0;t:for(var it=0;it<m;it+=3)for(var vt=a[it]<<1,lt=R[vt],dt=R[vt+1],st=u[vt],G=u[vt+1],et=R[vt=a[it+1]<<1],ct=R[vt+1],rt=u[vt],Tt=u[vt+1],ht=R[vt=a[it+2]<<1],ut=R[vt+1],Rt=u[vt],at=u[vt+1],_=0;_<D;_++){var ot=N.length;if(!this.clip(lt,dt,et,ct,ht,ut,E[_],T)){var xt,Mt;(xt=L.Utils.setArraySize(N,ot+3*q))[ot]=lt,xt[ot+1]=dt,xt[ot+2]=A.r,xt[ot+3]=A.g,xt[ot+4]=A.b,xt[ot+5]=A.a,O?(xt[ot+6]=st,xt[ot+7]=G,xt[ot+8]=S.r,xt[ot+9]=S.g,xt[ot+10]=S.b,xt[ot+11]=S.a,xt[ot+12]=et,xt[ot+13]=ct,xt[ot+14]=A.r,xt[ot+15]=A.g,xt[ot+16]=A.b,xt[ot+17]=A.a,xt[ot+18]=rt,xt[ot+19]=Tt,xt[ot+20]=S.r,xt[ot+21]=S.g,xt[ot+22]=S.b,xt[ot+23]=S.a,xt[ot+24]=ht,xt[ot+25]=ut,xt[ot+26]=A.r,xt[ot+27]=A.g,xt[ot+28]=A.b,xt[ot+29]=A.a,xt[ot+30]=Rt,xt[ot+31]=at,xt[ot+32]=S.r,xt[ot+33]=S.g,xt[ot+34]=S.b,xt[ot+35]=S.a):(xt[ot+6]=st,xt[ot+7]=G,xt[ot+8]=et,xt[ot+9]=ct,xt[ot+10]=A.r,xt[ot+11]=A.g,xt[ot+12]=A.b,xt[ot+13]=A.a,xt[ot+14]=rt,xt[ot+15]=Tt,xt[ot+16]=ht,xt[ot+17]=ut,xt[ot+18]=A.r,xt[ot+19]=A.g,xt[ot+20]=A.b,xt[ot+21]=A.a,xt[ot+22]=Rt,xt[ot+23]=at),ot=P.length,(Mt=L.Utils.setArraySize(P,ot+3))[ot]=$,Mt[ot+1]=$+1,Mt[ot+2]=$+2,$+=3;continue t}var Xt=T.length;if(Xt!=0){for(var Dt=ct-ut,Lt=ht-et,Bt=lt-ht,Gt=ut-dt,kt=1/(Dt*Bt+Lt*(dt-ut)),bt=Xt>>1,wt=this.clipOutput,xt=L.Utils.setArraySize(N,ot+bt*q),Qt=0;Qt<Xt;Qt+=2){var ie=wt[Qt],Kt=wt[Qt+1];xt[ot]=ie,xt[ot+1]=Kt,xt[ot+2]=A.r,xt[ot+3]=A.g,xt[ot+4]=A.b,xt[ot+5]=A.a;var Ae=ie-ht,Le=Kt-ut,ye=(Dt*Ae+Lt*Le)*kt,Ye=(Gt*Ae+Bt*Le)*kt,Ve=1-ye-Ye;xt[ot+6]=st*ye+rt*Ye+Rt*Ve,xt[ot+7]=G*ye+Tt*Ye+at*Ve,O&&(xt[ot+8]=S.r,xt[ot+9]=S.g,xt[ot+10]=S.b,xt[ot+11]=S.a),ot+=q;}ot=P.length;var Mt=L.Utils.setArraySize(P,ot+3*(bt-2));bt--;for(var Qt=1;Qt<bt;Qt++)Mt[ot]=$,Mt[ot+1]=$+Qt,Mt[ot+2]=$+Qt+1,ot+=3;$+=bt+1;}}},l.prototype.clip=function(R,y,a,m,u,A,S,O){var T=O,N=false,P=null;S.length%4>=2?(P=O,O=this.scratch):P=this.scratch,P.length=0,P.push(R),P.push(y),P.push(a),P.push(m),P.push(u),P.push(A),P.push(R),P.push(y),O.length=0;for(var E=S,D=S.length-4,q=0;;q+=2){for(var $=E[q],it=E[q+1],vt=E[q+2],lt=E[q+3],dt=$-vt,st=it-lt,G=P,et=P.length-2,ct=O.length,rt=0;rt<et;rt+=2){var Tt=G[rt],ht=G[rt+1],ut=G[rt+2],Rt=G[rt+3],at=dt*(Rt-lt)-st*(ut-vt)>0;if(dt*(ht-lt)-st*(Tt-vt)>0){if(at){O.push(ut),O.push(Rt);continue}var _,ot,xt=(_=Rt-ht)*(vt-$)-(ot=ut-Tt)*(lt-it);if(Math.abs(xt)>1e-6){var Mt=(ot*(it-ht)-_*($-Tt))/xt;O.push($+(vt-$)*Mt),O.push(it+(lt-it)*Mt);}else O.push($),O.push(it);}else if(at){var _,ot,xt=(_=Rt-ht)*(vt-$)-(ot=ut-Tt)*(lt-it);if(Math.abs(xt)>1e-6){var Mt=(ot*(it-ht)-_*($-Tt))/xt;O.push($+(vt-$)*Mt),O.push(it+(lt-it)*Mt);}else O.push($),O.push(it);O.push(ut),O.push(Rt);}N=true;}if(ct==O.length)return T.length=0,true;if(O.push(O[0]),O.push(O[1]),q==D)break;var Xt=O;(O=P).length=0,P=Xt;}if(T!=O){T.length=0;for(var q=0,Dt=O.length-2;q<Dt;q++)T[q]=O[q];}else T.length=T.length-2;return N},l.makeClockwise=function(R){for(var y=R,a=R.length,m=y[a-2]*y[1]-y[0]*y[a-1],u=0,A=0,S=0,O=0,T=0,N=a-3;T<N;T+=2)u=y[T],A=y[T+1],S=y[T+2],m+=u*(O=y[T+3])-S*A;if(!(m<0))for(var T=0,P=a-2,N=a>>1;T<N;T+=2){var E=y[T],D=y[T+1],q=P-T;y[T]=y[q],y[T+1]=y[q+1],y[q]=E,y[q+1]=D;}},l})();L.SkeletonClipping=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0;}return l.prototype.findBone=function(R){if(R==null)throw new Error("boneName cannot be null.");for(var y=this.bones,a=0,m=y.length;a<m;a++){var u=y[a];if(u.name==R)return u}return null},l.prototype.findBoneIndex=function(R){if(R==null)throw new Error("boneName cannot be null.");for(var y=this.bones,a=0,m=y.length;a<m;a++)if(y[a].name==R)return a;return  -1},l.prototype.findSlot=function(R){if(R==null)throw new Error("slotName cannot be null.");for(var y=this.slots,a=0,m=y.length;a<m;a++){var u=y[a];if(u.name==R)return u}return null},l.prototype.findSlotIndex=function(R){if(R==null)throw new Error("slotName cannot be null.");for(var y=this.slots,a=0,m=y.length;a<m;a++)if(y[a].name==R)return a;return  -1},l.prototype.findSkin=function(R){if(R==null)throw new Error("skinName cannot be null.");for(var y=this.skins,a=0,m=y.length;a<m;a++){var u=y[a];if(u.name==R)return u}return null},l.prototype.findEvent=function(R){if(R==null)throw new Error("eventDataName cannot be null.");for(var y=this.events,a=0,m=y.length;a<m;a++){var u=y[a];if(u.name==R)return u}return null},l.prototype.findAnimation=function(R){if(R==null)throw new Error("animationName cannot be null.");for(var y=this.animations,a=0,m=y.length;a<m;a++){var u=y[a];if(u.name==R)return u}return null},l.prototype.findIkConstraint=function(R){if(R==null)throw new Error("constraintName cannot be null.");for(var y=this.ikConstraints,a=0,m=y.length;a<m;a++){var u=y[a];if(u.name==R)return u}return null},l.prototype.findTransformConstraint=function(R){if(R==null)throw new Error("constraintName cannot be null.");for(var y=this.transformConstraints,a=0,m=y.length;a<m;a++){var u=y[a];if(u.name==R)return u}return null},l.prototype.findPathConstraint=function(R){if(R==null)throw new Error("constraintName cannot be null.");for(var y=this.pathConstraints,a=0,m=y.length;a<m;a++){var u=y[a];if(u.name==R)return u}return null},l.prototype.findPathConstraintIndex=function(R){if(R==null)throw new Error("pathConstraintName cannot be null.");for(var y=this.pathConstraints,a=0,m=y.length;a<m;a++)if(y[a].name==R)return a;return  -1},l})();L.SkeletonData=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function R(y){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=y;}return R.prototype.readSkeletonData=function(y){var a=this.scale,m=new L.SkeletonData,u=typeof y=="string"?JSON.parse(y):y,A=u.skeleton;if(A!=null&&(m.hash=A.hash,m.version=A.spine,m.x=A.x,m.y=A.y,m.width=A.width,m.height=A.height,m.fps=A.fps,m.imagesPath=A.images),u.bones)for(var S=0;S<u.bones.length;S++){var O=u.bones[S],T=null,N=this.getValue(O,"parent",null),P;if(N!=null&&(T=m.findBone(N))==null)throw new Error("Parent bone not found: "+N);(P=new L.BoneData(m.bones.length,O.name,T)).length=this.getValue(O,"length",0)*a,P.x=this.getValue(O,"x",0)*a,P.y=this.getValue(O,"y",0)*a,P.rotation=this.getValue(O,"rotation",0),P.scaleX=this.getValue(O,"scaleX",1),P.scaleY=this.getValue(O,"scaleY",1),P.shearX=this.getValue(O,"shearX",0),P.shearY=this.getValue(O,"shearY",0),P.transformMode=R.transformModeFromString(this.getValue(O,"transform","normal")),P.skinRequired=this.getValue(O,"skin",false),m.bones.push(P);}if(u.slots)for(var S=0;S<u.slots.length;S++){var E,D=(E=u.slots[S]).name,q=E.bone,$=m.findBone(q);if($==null)throw new Error("Slot bone not found: "+q);var P=new L.SlotData(m.slots.length,D,$),it=this.getValue(E,"color",null);it!=null&&P.color.setFromString(it);var vt=this.getValue(E,"dark",null);vt!=null&&(P.darkColor=new L.Color(1,1,1,1),P.darkColor.setFromString(vt)),P.attachmentName=this.getValue(E,"attachment",null),P.blendMode=R.blendModeFromString(this.getValue(E,"blend","normal")),m.slots.push(P);}if(u.ik)for(var S=0;S<u.ik.length;S++){var lt=u.ik[S],P;(P=new L.IkConstraintData(lt.name)).order=this.getValue(lt,"order",0),P.skinRequired=this.getValue(lt,"skin",false);for(var dt=0;dt<lt.bones.length;dt++){var q=lt.bones[dt],st;if((st=SkeletonData.findBone(q))==null)throw new Error("IK bone not found: "+q);P.bones.push(st);}var G=lt.target;if(P.target=SkeletonData.findBone(G),P.target==null)throw new Error("IK target bone not found: "+G);P.mix=this.getValue(lt,"mix",1),P.softness=this.getValue(lt,"softness",0)*a,P.bendDirection=this.getValue(lt,"bendPositive",true)?1:-1,P.compress=this.getValue(lt,"compress",false),P.stretch=this.getValue(lt,"stretch",false),P.uniform=this.getValue(lt,"uniform",false),m.ikConstraints.push(P);}if(u.transform)for(var S=0;S<u.transform.length;S++){var lt=u.transform[S],P;(P=new L.TransformConstraintData(lt.name)).order=this.getValue(lt,"order",0),P.skinRequired=this.getValue(lt,"skin",false);for(var dt=0;dt<lt.bones.length;dt++){var q=lt.bones[dt],st;if((st=SkeletonData.findBone(q))==null)throw new Error("Transform constraint bone not found: "+q);P.bones.push(st);}var G=lt.target;if(P.target=SkeletonData.findBone(G),P.target==null)throw new Error("Transform constraint target bone not found: "+G);P.local=this.getValue(lt,"local",false),P.relative=this.getValue(lt,"relative",false),P.offsetRotation=this.getValue(lt,"rotation",0),P.offsetX=this.getValue(lt,"x",0)*a,P.offsetY=this.getValue(lt,"y",0)*a,P.offsetScaleX=this.getValue(lt,"scaleX",0),P.offsetScaleY=this.getValue(lt,"scaleY",0),P.offsetShearY=this.getValue(lt,"shearY",0),P.rotateMix=this.getValue(lt,"rotateMix",1),P.translateMix=this.getValue(lt,"translateMix",1),P.scaleMix=this.getValue(lt,"scaleMix",1),P.shearMix=this.getValue(lt,"shearMix",1),m.transformConstraints.push(P);}if(u.path)for(var S=0;S<u.path.length;S++){var lt=u.path[S],P;(P=new L.PathConstraintData(lt.name)).order=this.getValue(lt,"order",0),P.skinRequired=this.getValue(lt,"skin",false);for(var dt=0;dt<lt.bones.length;dt++){var q=lt.bones[dt],st;if((st=SkeletonData.findBone(q))==null)throw new Error("Transform constraint bone not found: "+q);P.bones.push(st);}var G=lt.target;if(P.target=SkeletonData.findSlot(G),P.target==null)throw new Error("Path target slot not found: "+G);P.positionMode=R.positionModeFromString(this.getValue(lt,"positionMode","percent")),P.spacingMode=R.spacingModeFromString(this.getValue(lt,"spacingMode","length")),P.rotateMode=R.rotateModeFromString(this.getValue(lt,"rotateMode","tangent")),P.offsetRotation=this.getValue(lt,"rotation",0),P.position=this.getValue(lt,"position",0),P.positionMode==L.PositionMode.Fixed&&(P.position*=a),P.spacing=this.getValue(lt,"spacing",0),P.spacingMode!=L.SpacingMode.Length&&P.spacingMode!=L.SpacingMode.Fixed||(P.spacing*=a),P.rotateMix=this.getValue(lt,"rotateMix",1),P.translateMix=this.getValue(lt,"translateMix",1),m.pathConstraints.push(P);}if(u.skins)for(var S=0;S<u.skins.length;S++){var et=u.skins[S],ct=new L.Skin(et.name);if(et.bones)for(var rt=0;rt<et.bones.length;rt++){var st;if((st=SkeletonData.findBone(et.bones[rt]))==null)throw new Error("Skin bone not found: "+et.bones[S]);ct.bones.push(st);}if(et.ik)for(var rt=0;rt<et.ik.length;rt++){var Tt;if((Tt=SkeletonData.findIkConstraint(et.ik[rt]))==null)throw new Error("Skin IK constraint not found: "+et.ik[S]);ct.constraints.push(Tt);}if(et.transform)for(var rt=0;rt<et.transform.length;rt++){var Tt;if((Tt=SkeletonData.findTransformConstraint(et.transform[rt]))==null)throw new Error("Skin transform constraint not found: "+et.transform[S]);ct.constraints.push(Tt);}if(et.path)for(var rt=0;rt<et.path.length;rt++){var Tt;if((Tt=SkeletonData.findPathConstraint(et.path[rt]))==null)throw new Error("Skin path constraint not found: "+et.path[S]);ct.constraints.push(Tt);}for(var D in et.attachments){var ht=SkeletonData.findSlot(D);if(ht==null)throw new Error("Slot not found: "+D);var E=et.attachments[D];for(var ut in E){var Rt=this.readAttachment(E[ut],ct,ht.index,ut,SkeletonData);Rt!=null&&ct.setAttachment(ht.index,ut,Rt);}}m.skins.push(ct),ct.name=="default"&&(m.defaultSkin=ct);}for(var S=0,at=this.linkedMeshes.length;S<at;S++){var _=this.linkedMeshes[S],ct;if((ct=_.skin==null?SkeletonData.defaultSkin:SkeletonData.findSkin(_.skin))==null)throw new Error("Skin not found: "+_.skin);var ot=ct.getAttachment(_.slotIndex,_.parent);if(ot==null)throw new Error("Parent mesh not found: "+_.parent);_.mesh.deformAttachment=_.inheritDeform?ot:_.mesh,_.mesh.setParentMesh(ot),_.mesh.updateUVs();}if(this.linkedMeshes.length=0,u.events)for(var xt in u.events){var Mt=u.events[xt],P;(P=new L.EventData(xt)).intValue=this.getValue(Mt,"int",0),P.floatValue=this.getValue(Mt,"float",0),P.stringValue=this.getValue(Mt,"string",""),P.audioPath=this.getValue(Mt,"audio",null),P.audioPath!=null&&(P.volume=this.getValue(Mt,"volume",1),P.balance=this.getValue(Mt,"balance",0)),m.events.push(P);}if(u.animations)for(var Xt in u.animations){var Dt=u.animations[Xt];this.readAnimation(Dt,Xt,SkeletonData);}return SkeletonData},R.prototype.readAttachment=function(y,a,m,u,A){var S=this.scale;switch(u=this.getValue(y,"name",u),this.getValue(y,"type","region")){case "region":var q=this.getValue(y,"path",u),T=this.attachmentLoader.newRegionAttachment(a,u,q),et;return T==null?null:(T.path=q,T.x=this.getValue(y,"x",0)*S,T.y=this.getValue(y,"y",0)*S,T.scaleX=this.getValue(y,"scaleX",1),T.scaleY=this.getValue(y,"scaleY",1),T.rotation=this.getValue(y,"rotation",0),T.width=y.width*S,T.height=y.height*S,(et=this.getValue(y,"color",null))!=null&&T.color.setFromString(et),T.updateOffset(),T);case "boundingbox":var N=this.attachmentLoader.newBoundingBoxAttachment(a,u),et;return N==null?null:(this.readVertices(y,N,y.vertexCount<<1),(et=this.getValue(y,"color",null))!=null&&N.color.setFromString(et),N);case "mesh":case "linkedmesh":var q=this.getValue(y,"path",u),P=this.attachmentLoader.newMeshAttachment(a,u,q),et;if(P==null)return null;P.path=q,(et=this.getValue(y,"color",null))!=null&&P.color.setFromString(et),P.width=this.getValue(y,"width",0)*S,P.height=this.getValue(y,"height",0)*S;var E=this.getValue(y,"parent",null);if(E!=null)return this.linkedMeshes.push(new l(P,this.getValue(y,"skin",null),m,E,this.getValue(y,"deform",true))),P;var D=y.uvs;return this.readVertices(y,P,D.length),P.triangles=y.triangles,P.regionUVs=D,P.updateUVs(),P.edges=this.getValue(y,"edges",null),P.hullLength=2*this.getValue(y,"hull",0),P;case "path":var q;if((q=this.attachmentLoader.newPathAttachment(a,u))==null)return null;q.closed=this.getValue(y,"closed",false),q.constantSpeed=this.getValue(y,"constantSpeed",true);var G=y.vertexCount,et;this.readVertices(y,q,G<<1);for(var $=L.Utils.newArray(G/3,0),it=0;it<y.lengths.length;it++)$[it]=y.lengths[it]*S;return q.lengths=$,(et=this.getValue(y,"color",null))!=null&&q.color.setFromString(et),q;case "point":var vt=this.attachmentLoader.newPointAttachment(a,u),et;return vt==null?null:(vt.x=this.getValue(y,"x",0)*S,vt.y=this.getValue(y,"y",0)*S,vt.rotation=this.getValue(y,"rotation",0),(et=this.getValue(y,"color",null))!=null&&vt.color.setFromString(et),vt);case "clipping":var lt=this.attachmentLoader.newClippingAttachment(a,u);if(lt==null)return null;var dt=this.getValue(y,"end",null);if(dt!=null){var st=A.findSlot(dt);if(st==null)throw new Error("Clipping end slot not found: "+dt);lt.endSlot=st;}var G=y.vertexCount,et;return this.readVertices(y,lt,G<<1),(et=this.getValue(y,"color",null))!=null&&lt.color.setFromString(et),lt}return null},R.prototype.readVertices=function(y,a,m){var u=this.scale;a.worldVerticesLength=m;var A=y.vertices;if(m!=A.length){for(var S=new Array,O=new Array,T=0,N=A.length;T<N;){var P=A[T++];O.push(P);for(var E=T+4*P;T<E;T+=4)O.push(A[T]),S.push(A[T+1]*u),S.push(A[T+2]*u),S.push(A[T+3]);}a.bones=O,a.vertices=L.Utils.toFloatArray(S);}else {var D=L.Utils.toFloatArray(A);if(u!=1)for(var T=0,N=A.length;T<N;T++)D[T]*=u;a.vertices=D;}},R.prototype.readAnimation=function(y,a,m){var u=this.scale,A=new Array,S=0;if(y.slots)for(var O in y.slots){var T=y.slots[O],N;if((N=m.findSlotIndex(O))==-1)throw new Error("Slot not found: "+O);for(var P in T){var E=T[P];if(P=="attachment"){var D;(D=new L.AttachmentTimeline(E.length)).slotIndex=N;for(var q=0,$=0;$<E.length;$++){var it=E[$];D.setFrame(q++,this.getValue(it,"time",0),it.name);}A.push(D),S=Math.max(S,D.frames[D.getFrameCount()-1]);}else if(P=="color"){var D;(D=new L.ColorTimeline(E.length)).slotIndex=N;for(var q=0,$=0;$<E.length;$++){var it=E[$],vt=new L.Color;vt.setFromString(it.color),D.setFrame(q,this.getValue(it,"time",0),vt.r,vt.g,vt.b,vt.a),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*L.ColorTimeline.ENTRIES]);}else {if(P!="twoColor")throw new Error("Invalid timeline type for a slot: "+P+" ("+O+")");var D;(D=new L.TwoColorTimeline(E.length)).slotIndex=N;for(var q=0,$=0;$<E.length;$++){var it=E[$],lt=new L.Color,dt=new L.Color;lt.setFromString(it.light),dt.setFromString(it.dark),D.setFrame(q,this.getValue(it,"time",0),lt.r,lt.g,lt.b,lt.a,dt.r,dt.g,dt.b),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*L.TwoColorTimeline.ENTRIES]);}}}if(y.bones)for(var st in y.bones){var G=y.bones[st],et=m.findBoneIndex(st);if(et==-1)throw new Error("Bone not found: "+st);for(var P in G){var E=G[P];if(P==="rotate"){var D;(D=new L.RotateTimeline(E.length)).boneIndex=et;for(var q=0,$=0;$<E.length;$++){var it=E[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,"angle",0)),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*L.RotateTimeline.ENTRIES]);}else {if(P!=="translate"&&P!=="scale"&&P!=="shear")throw new Error("Invalid timeline type for a bone: "+P+" ("+st+")");var D=null,ct=1,rt=0;P==="scale"?(D=new L.ScaleTimeline(E.length),rt=1):P==="shear"?D=new L.ShearTimeline(E.length):(D=new L.TranslateTimeline(E.length),ct=u),D.boneIndex=et;for(var q=0,$=0;$<E.length;$++){var it=E[$],Tt=this.getValue(it,"x",rt),ht=this.getValue(it,"y",rt);D.setFrame(q,this.getValue(it,"time",0),Tt*ct,ht*ct),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*L.TranslateTimeline.ENTRIES]);}}}if(y.ik)for(var ut in y.ik){var Rt=y.ik[ut],at=m.findIkConstraint(ut),D;(D=new L.IkConstraintTimeline(Rt.length)).ikConstraintIndex=m.ikConstraints.indexOf(at);for(var q=0,$=0;$<Rt.length;$++){var it=Rt[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,"mix",1),this.getValue(it,"softness",0)*u,this.getValue(it,"bendPositive",true)?1:-1,this.getValue(it,"compress",false),this.getValue(it,"stretch",false)),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*L.IkConstraintTimeline.ENTRIES]);}if(y.transform)for(var ut in y.transform){var Rt=y.transform[ut],at=m.findTransformConstraint(ut),D;(D=new L.TransformConstraintTimeline(Rt.length)).transformConstraintIndex=m.transformConstraints.indexOf(at);for(var q=0,$=0;$<Rt.length;$++){var it=Rt[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,"rotateMix",1),this.getValue(it,"translateMix",1),this.getValue(it,"scaleMix",1),this.getValue(it,"shearMix",1)),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*L.TransformConstraintTimeline.ENTRIES]);}if(y.path)for(var ut in y.path){var Rt=y.path[ut],_=m.findPathConstraintIndex(ut);if(_==-1)throw new Error("Path constraint not found: "+ut);var ot=m.pathConstraints[_];for(var P in Rt){var E=Rt[P];if(P==="position"||P==="spacing"){var D=null,ct=1;P==="spacing"?(D=new L.PathConstraintSpacingTimeline(E.length),ot.spacingMode!=L.SpacingMode.Length&&ot.spacingMode!=L.SpacingMode.Fixed||(ct=u)):(D=new L.PathConstraintPositionTimeline(E.length),ot.positionMode==L.PositionMode.Fixed&&(ct=u)),D.pathConstraintIndex=_;for(var q=0,$=0;$<E.length;$++){var it=E[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,P,0)*ct),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*L.PathConstraintPositionTimeline.ENTRIES]);}else if(P==="mix"){var D;(D=new L.PathConstraintMixTimeline(E.length)).pathConstraintIndex=_;for(var q=0,$=0;$<E.length;$++){var it=E[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,"rotateMix",1),this.getValue(it,"translateMix",1)),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*L.PathConstraintMixTimeline.ENTRIES]);}}}if(y.deform)for(var xt in y.deform){var Mt=y.deform[xt],Xt=m.findSkin(xt);if(Xt==null)throw new Error("Skin not found: "+xt);for(var O in Mt){var T=Mt[O],N;if((N=m.findSlotIndex(O))==-1)throw new Error("Slot not found: "+T.name);for(var P in T){var E=T[P],Dt=Xt.getAttachment(N,P);if(Dt==null)throw new Error("Deform attachment not found: "+E.name);var Lt=Dt.bones!=null,Bt=Dt.vertices,Gt=Lt?Bt.length/3*2:Bt.length,D;(D=new L.DeformTimeline(E.length)).slotIndex=N,D.attachment=Dt;for(var q=0,kt=0;kt<E.length;kt++){var it=E[kt],bt=void 0,wt=this.getValue(it,"vertices",null);if(wt==null)bt=Lt?L.Utils.newFloatArray(Gt):Bt;else {bt=L.Utils.newFloatArray(Gt);var Qt=this.getValue(it,"offset",0);if(L.Utils.arrayCopy(wt,0,bt,Qt,wt.length),u!=1)for(var $,ie=($=Qt)+wt.length;$<ie;$++)bt[$]*=u;if(!Lt)for(var $=0;$<Gt;$++)bt[$]+=Bt[$];}D.setFrame(q,this.getValue(it,"time",0),bt),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[D.getFrameCount()-1]);}}}var Kt=y.drawOrder;if(Kt==null&&(Kt=y.draworder),Kt!=null){for(var D=new L.DrawOrderTimeline(Kt.length),Ae=m.slots.length,q=0,kt=0;kt<Kt.length;kt++){var Le=Kt[kt],ye=null,Ye=this.getValue(Le,"offsets",null);if(Ye!=null){ye=L.Utils.newArray(Ae,-1);for(var Ve=L.Utils.newArray(Ae-Ye.length,0),qe=0,ze=0,$=0;$<Ye.length;$++){var Ue=Ye[$],N;if((N=m.findSlotIndex(Ue.slot))==-1)throw new Error("Slot not found: "+Ue.slot);for(;qe!=N;)Ve[ze++]=qe++;ye[qe+Ue.offset]=qe++;}for(;qe<Ae;)Ve[ze++]=qe++;for(var $=Ae-1;$>=0;$--)ye[$]==-1&&(ye[$]=Ve[--ze]);}D.setFrame(q++,this.getValue(Le,"time",0),ye);}A.push(D),S=Math.max(S,D.frames[D.getFrameCount()-1]);}if(y.events){for(var D=new L.EventTimeline(y.events.length),q=0,$=0;$<y.events.length;$++){var _e=y.events[$],We=m.findEvent(_e.name);if(We==null)throw new Error("Event not found: "+_e.name);var Ze=new L.Event(L.Utils.toSinglePrecision(this.getValue(_e,"time",0)),We);Ze.intValue=this.getValue(_e,"int",We.intValue),Ze.floatValue=this.getValue(_e,"float",We.floatValue),Ze.stringValue=this.getValue(_e,"string",We.stringValue),Ze.data.audioPath!=null&&(Ze.volume=this.getValue(_e,"volume",1),Ze.balance=this.getValue(_e,"balance",0)),D.setFrame(q++,Ze);}A.push(D),S=Math.max(S,D.frames[D.getFrameCount()-1]);}if(isNaN(S))throw new Error("Error while parsing animation, duration is NaN");skeletonData.animations.push(new L.Animation(a,A,S));},R.prototype.readCurve=function(y,a,m){if(y.hasOwnProperty("curve"))if(y.curve=="stepped")a.setStepped(m);else {var u=y.curve;a.setCurve(m,u,this.getValue(y,"c2",0),this.getValue(y,"c3",1),this.getValue(y,"c4",1));}},R.prototype.getValue=function(y,a,m){return y[a]!==void 0?y[a]:m},R.blendModeFromString=function(y){if((y=y.toLowerCase())=="normal")return L.BlendMode.Normal;if(y=="additive")return L.BlendMode.Additive;if(y=="multiply")return L.BlendMode.Multiply;if(y=="screen")return L.BlendMode.Screen;throw new Error("Unknown blend mode: "+y)},R.positionModeFromString=function(y){if((y=y.toLowerCase())=="fixed")return L.PositionMode.Fixed;if(y=="percent")return L.PositionMode.Percent;throw new Error("Unknown position mode: "+y)},R.spacingModeFromString=function(y){if((y=y.toLowerCase())=="length")return L.SpacingMode.Length;if(y=="fixed")return L.SpacingMode.Fixed;if(y=="percent")return L.SpacingMode.Percent;throw new Error("Unknown position mode: "+y)},R.rotateModeFromString=function(y){if((y=y.toLowerCase())=="tangent")return L.RotateMode.Tangent;if(y=="chain")return L.RotateMode.Chain;if(y=="chainscale")return L.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+y)},R.transformModeFromString=function(y){if((y=y.toLowerCase())=="normal")return L.TransformMode.Normal;if(y=="onlytranslation")return L.TransformMode.OnlyTranslation;if(y=="norotationorreflection")return L.TransformMode.NoRotationOrReflection;if(y=="noscale")return L.TransformMode.NoScale;if(y=="noscaleorreflection")return L.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+y)},R})();L.SkeletonJson=Yt;var l=(function(){function R(y,a,m,u,A){this.mesh=y,this.skin=a,this.slotIndex=m,this.parent=u,this.inheritDeform=A;}return R})();})(Et||(Et={})),(function(L){var Yt=(function(){function R(y,a,m){this.slotIndex=y,this.name=a,this.attachment=m;}return R})();L.SkinEntry=Yt;var l=(function(){function R(y){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,y==null)throw new Error("name cannot be null.");this.name=y;}return R.prototype.setAttachment=function(y,a,m){if(m==null)throw new Error("attachment cannot be null.");var u=this.attachments;y>=u.length&&(u.length=y+1),u[y]||(u[y]={}),u[y][a]=m;},R.prototype.addSkin=function(y){for(var a=0;a<y.bones.length;a++){for(var m=y.bones[a],u=false,A=0;A<this.bones.length;A++)if(this.bones[A]==m){u=true;break}u||this.bones.push(m);}for(var a=0;a<y.constraints.length;a++){for(var S=y.constraints[a],u=false,A=0;A<this.constraints.length;A++)if(this.constraints[A]==S){u=true;break}u||this.constraints.push(S);}for(var O=y.getAttachments(),a=0;a<O.length;a++){var T=O[a];this.setAttachment(T.slotIndex,T.name,T.attachment);}},R.prototype.copySkin=function(y){for(var a=0;a<y.bones.length;a++){for(var m=y.bones[a],u=false,A=0;A<this.bones.length;A++)if(this.bones[A]==m){u=true;break}u||this.bones.push(m);}for(var a=0;a<y.constraints.length;a++){for(var S=y.constraints[a],u=false,A=0;A<this.constraints.length;A++)if(this.constraints[A]==S){u=true;break}u||this.constraints.push(S);}for(var O=y.getAttachments(),a=0;a<O.length;a++){var T=O[a];T.attachment!=null&&(T.attachment instanceof L.MeshAttachment?(T.attachment=T.attachment.newLinkedMesh(),this.setAttachment(T.slotIndex,T.name,T.attachment)):(T.attachment=T.attachment.copy(),this.setAttachment(T.slotIndex,T.name,T.attachment)));}},R.prototype.getAttachment=function(y,a){var m=this.attachments[y];return m?m[a]:null},R.prototype.removeAttachment=function(y,a){var m=this.attachments[y];m&&(m[a]=null);},R.prototype.getAttachments=function(){for(var y=new Array,a=0;a<this.attachments.length;a++){var m=this.attachments[a];if(m)for(var u in m){var A=m[u];A&&y.push(new Yt(a,u,A));}}return y},R.prototype.getAttachmentsForSlot=function(y,a){var m=this.attachments[y];if(m)for(var u in m){var A=m[u];A&&a.push(new Yt(y,u,A));}},R.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0;},R.prototype.attachAll=function(y,a){for(var m=0,u=0;u<Skeleton.slots.length;u++){var A=Skeleton.slots[u],S=A.getAttachment();if(S&&m<a.attachments.length){var O=a.attachments[m];for(var T in O){if(S==O[T]){var P=this.getAttachment(m,T);P!=null&&A.setAttachment(P);break}}}m++;}},R})();L.Skin=l;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y){if(this.deform=new Array,R==null)throw new Error("data cannot be null.");if(y==null)throw new Error("bone cannot be null.");this.data=R,this.bone=y,this.color=new L.Color,this.darkColor=R.darkColor==null?null:new L.Color,this.setToSetupPose();}return l.prototype.getSkeleton=function(){return this.bone.skeleton},l.prototype.getAttachment=function(){return this.attachment},l.prototype.setAttachment=function(R){this.attachment!=R&&(this.attachment=R,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0);},l.prototype.setAttachmentTime=function(R){this.attachmentTime=this.bone.skeleton.time-R;},l.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},l.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)));},l})();L.Slot=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y,a){if(this.color=new L.Color(1,1,1,1),R<0)throw new Error("index must be >= 0.");if(y==null)throw new Error("name cannot be null.");if(a==null)throw new Error("boneData cannot be null.");this.index=R,this.name=y,this.boneData=a;}return l})();L.SlotData=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function m(u){this._image=u;}return m.prototype.getImage=function(){return this._image},m.filterFromString=function(u){switch(u.toLowerCase()){case "nearest":return l.Nearest;case "linear":return l.Linear;case "mipmap":return l.MipMap;case "mipmapnearestnearest":return l.MipMapNearestNearest;case "mipmaplinearnearest":return l.MipMapLinearNearest;case "mipmapnearestlinear":return l.MipMapNearestLinear;case "mipmaplinearlinear":return l.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+u)}},m.wrapFromString=function(u){switch(u.toLowerCase()){case "mirroredtepeat":return R.MirroredRepeat;case "clamptoedge":return R.ClampToEdge;case "repeat":return R.Repeat;default:throw new Error("Unknown texture wrap "+u)}},m})(),l,R;L.Texture=Yt,(function(m){m[m.Nearest=9728]="Nearest",m[m.Linear=9729]="Linear",m[m.MipMap=9987]="MipMap",m[m.MipMapNearestNearest=9984]="MipMapNearestNearest",m[m.MipMapLinearNearest=9985]="MipMapLinearNearest",m[m.MipMapNearestLinear=9986]="MipMapNearestLinear",m[m.MipMapLinearLinear=9987]="MipMapLinearLinear";})(l=L.TextureFilter||(L.TextureFilter={})),(function(m){m[m.MirroredRepeat=33648]="MirroredRepeat",m[m.ClampToEdge=33071]="ClampToEdge",m[m.Repeat=10497]="Repeat";})(R=L.TextureWrap||(L.TextureWrap={}));var y=(function(){function m(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=false,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0;}return m})();L.TextureRegion=y;var a=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return Be(u,m),u.prototype.setFilters=function(A,S){},u.prototype.setWraps=function(A,S){},u.prototype.dispose=function(){},u})(Yt);L.FakeTexture=a;})(Et||(Et={})),(function(L){var Yt=(function(){function a(m,u){this.pages=new Array,this.regions=new Array,this.load(m,u);}return a.prototype.load=function(m,u){if(u==null)throw new Error("textureLoader cannot be null.");for(var A=new l(m),S=new Array(4),O=null;;){var T=A.readLine();if(T==null)break;if((T=T.trim()).length==0)O=null;else if(O){var N=new y;N.name=T,N.page=O;var P=A.readValue();P.toLocaleLowerCase()=="true"?N.degrees=90:P.toLocaleLowerCase()=="false"?N.degrees=0:N.degrees=parseFloat(P),N.rotate=N.degrees==90,A.readTuple(S);var E=parseInt(S[0]),D=parseInt(S[1]);A.readTuple(S);var q=parseInt(S[0]),$=parseInt(S[1]);N.u=E/O.width,N.v=D/O.height,N.rotate?(N.u2=(E+$)/O.width,N.v2=(D+q)/O.height):(N.u2=(E+q)/O.width,N.v2=(D+$)/O.height),N.x=E,N.y=D,N.width=Math.abs(q),N.height=Math.abs($),A.readTuple(S)==4&&A.readTuple(S)==4&&A.readTuple(S),N.originalWidth=parseInt(S[0]),N.originalHeight=parseInt(S[1]),A.readTuple(S),N.offsetX=parseInt(S[0]),N.offsetY=parseInt(S[1]),N.index=parseInt(A.readValue()),N.texture=O.texture,this.regions.push(N);}else {(O=new R).name=T,A.readTuple(S)==2&&(O.width=parseInt(S[0]),O.height=parseInt(S[1]),A.readTuple(S)),A.readTuple(S),O.minFilter=L.Texture.filterFromString(S[0]),O.magFilter=L.Texture.filterFromString(S[1]);var it=A.readValue();O.uWrap=L.TextureWrap.ClampToEdge,O.vWrap=L.TextureWrap.ClampToEdge,it=="x"?O.uWrap=L.TextureWrap.Repeat:it=="y"?O.vWrap=L.TextureWrap.Repeat:it=="xy"&&(O.uWrap=O.vWrap=L.TextureWrap.Repeat),O.texture=u(T),O.texture.setFilters(O.minFilter,O.magFilter),O.texture.setWraps(O.uWrap,O.vWrap),O.width=O.texture.getImage().width,O.height=O.texture.getImage().height,this.pages.push(O);}}},a.prototype.findRegion=function(m){for(var u=0;u<this.regions.length;u++)if(this.regions[u].name==m)return this.regions[u];return null},a.prototype.dispose=function(){for(var m=0;m<this.pages.length;m++)this.pages[m].texture.dispose();},a})();L.TextureAtlas=Yt;var l=(function(){function a(m){this.index=0,this.lines=m.split(/\r\n|\r|\n/);}return a.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},a.prototype.readValue=function(){var m=this.readLine(),u=m.indexOf(":");if(u==-1)throw new Error("Invalid line: "+m);return m.substring(u+1).trim()},a.prototype.readTuple=function(m){var u=this.readLine(),A=u.indexOf(":");if(A==-1)throw new Error("Invalid line: "+u);for(var S=0,O=A+1;S<3;S++){var T=u.indexOf(",",O);if(T==-1)break;m[S]=u.substr(O,T-O).trim(),O=T+1;}return m[S]=u.substring(O).trim(),S+1},a})(),R=(function(){function a(){}return a})();L.TextureAtlasPage=R;var y=(function(a){function m(){return a!==null&&a.apply(this,arguments)||this}return Be(m,a),m})(L.TextureRegion);L.TextureAtlasRegion=y;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new L.Vector2,this.active=false,R==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=R,this.rotateMix=R.rotateMix,this.translateMix=R.translateMix,this.scaleMix=R.scaleMix,this.shearMix=R.shearMix,this.bones=new Array;for(var a=0;a<R.bones.length;a++)this.bones.push(skeleton.findBone(R.bones[a].name));this.target=y.findBone(R.target.name);}return l.prototype.isActive=function(){return this.active},l.prototype.apply=function(){this.update();},l.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld();},l.prototype.applyAbsoluteWorld=function(){for(var R=this.rotateMix,y=this.translateMix,a=this.scaleMix,m=this.shearMix,u=this.target,A=u.a,S=u.b,O=u.c,T=u.d,N=A*T-S*O>0?L.MathUtils.degRad:-L.MathUtils.degRad,P=this.data.offsetRotation*N,E=this.data.offsetShearY*N,D=this.bones,q=0,$=D.length;q<$;q++){var it=D[q],vt=false;if(R!=0){var lt=it.a,dt=it.b,st=it.c,G=it.d,et;(et=Math.atan2(O,A)-Math.atan2(st,lt)+P)>L.MathUtils.PI?et-=L.MathUtils.PI2:et<-L.MathUtils.PI&&(et+=L.MathUtils.PI2),et*=R;var ct=Math.cos(et),rt=Math.sin(et);it.a=ct*lt-rt*st,it.b=ct*dt-rt*G,it.c=rt*lt+ct*st,it.d=rt*dt+ct*G,vt=true;}if(y!=0){var Tt=this.temp;u.localToWorld(Tt.set(this.data.offsetX,this.data.offsetY)),it.worldX+=(Tt.x-it.worldX)*y,it.worldY+=(Tt.y-it.worldY)*y,vt=true;}if(a>0){var ht=Math.sqrt(it.a*it.a+it.c*it.c),ut=Math.sqrt(A*A+O*O);ht>1e-5&&(ht=(ht+(ut-ht+this.data.offsetScaleX)*a)/ht),it.a*=ht,it.c*=ht,ht=Math.sqrt(it.b*it.b+it.d*it.d),ut=Math.sqrt(S*S+T*T),ht>1e-5&&(ht=(ht+(ut-ht+this.data.offsetScaleY)*a)/ht),it.b*=ht,it.d*=ht,vt=true;}if(m>0){var dt=it.b,G=it.d,Rt=Math.atan2(G,dt),et;(et=Math.atan2(T,S)-Math.atan2(O,A)-(Rt-Math.atan2(it.c,it.a)))>L.MathUtils.PI?et-=L.MathUtils.PI2:et<-L.MathUtils.PI&&(et+=L.MathUtils.PI2),et=Rt+(et+E)*m;var ht=Math.sqrt(dt*dt+G*G);it.b=Math.cos(et)*ht,it.d=Math.sin(et)*ht,vt=true;}vt&&(it.appliedValid=false);}},l.prototype.applyRelativeWorld=function(){for(var R=this.rotateMix,y=this.translateMix,a=this.scaleMix,m=this.shearMix,u=this.target,A=u.a,S=u.b,O=u.c,T=u.d,N=A*T-S*O>0?L.MathUtils.degRad:-L.MathUtils.degRad,P=this.data.offsetRotation*N,E=this.data.offsetShearY*N,D=this.bones,q=0,$=D.length;q<$;q++){var it=D[q],vt=false;if(R!=0){var lt=it.a,dt=it.b,st=it.c,G=it.d,et;(et=Math.atan2(O,A)+P)>L.MathUtils.PI?et-=L.MathUtils.PI2:et<-L.MathUtils.PI&&(et+=L.MathUtils.PI2),et*=R;var ct=Math.cos(et),rt=Math.sin(et);it.a=ct*lt-rt*st,it.b=ct*dt-rt*G,it.c=rt*lt+ct*st,it.d=rt*dt+ct*G,vt=true;}if(y!=0){var Tt=this.temp;u.localToWorld(Tt.set(this.data.offsetX,this.data.offsetY)),it.worldX+=Tt.x*y,it.worldY+=Tt.y*y,vt=true;}if(a>0){var ht=(Math.sqrt(A*A+O*O)-1+this.data.offsetScaleX)*a+1;it.a*=ht,it.c*=ht,ht=(Math.sqrt(S*S+T*T)-1+this.data.offsetScaleY)*a+1,it.b*=ht,it.d*=ht,vt=true;}if(m>0){var et;(et=Math.atan2(T,S)-Math.atan2(O,A))>L.MathUtils.PI?et-=L.MathUtils.PI2:et<-L.MathUtils.PI&&(et+=L.MathUtils.PI2);var dt=it.b,G=it.d;et=Math.atan2(G,dt)+(et-L.MathUtils.PI/2+E)*m;var ht=Math.sqrt(dt*dt+G*G);it.b=Math.cos(et)*ht,it.d=Math.sin(et)*ht,vt=true;}vt&&(it.appliedValid=false);}},l.prototype.applyAbsoluteLocal=function(){var R=this.rotateMix,y=this.translateMix,a=this.scaleMix,m=this.shearMix,u=this.target;u.appliedValid||u.updateAppliedTransform();for(var A=this.bones,S=0,O=A.length;S<O;S++){var T=A[S];T.appliedValid||T.updateAppliedTransform();var N=T.arotation;if(R!=0){var P=u.arotation-N+this.data.offsetRotation;N+=(P-=360*(16384-(16384.499999999996-P/360|0)))*R;}var E=T.ax,D=T.ay;y!=0&&(E+=(u.ax-E+this.data.offsetX)*y,D+=(u.ay-D+this.data.offsetY)*y);var q=T.ascaleX,$=T.ascaleY;a!=0&&(q>1e-5&&(q=(q+(u.ascaleX-q+this.data.offsetScaleX)*a)/q),$>1e-5&&($=($+(u.ascaleY-$+this.data.offsetScaleY)*a)/$));var it=T.ashearY;if(m!=0){var P=u.ashearY-it+this.data.offsetShearY;P-=360*(16384-(16384.499999999996-P/360|0)),T.shearY+=P*m;}T.updateWorldTransformWith(E,D,N,q,$,T.ashearX,it);}},l.prototype.applyRelativeLocal=function(){var R=this.rotateMix,y=this.translateMix,a=this.scaleMix,m=this.shearMix,u=this.target;u.appliedValid||u.updateAppliedTransform();for(var A=this.bones,S=0,O=A.length;S<O;S++){var T=A[S];T.appliedValid||T.updateAppliedTransform();var N=T.arotation;R!=0&&(N+=(u.arotation+this.data.offsetRotation)*R);var P=T.ax,E=T.ay;y!=0&&(P+=(u.ax+this.data.offsetX)*y,E+=(u.ay+this.data.offsetY)*y);var D=T.ascaleX,q=T.ascaleY;a!=0&&(D>1e-5&&(D*=(u.ascaleX-1+this.data.offsetScaleX)*a+1),q>1e-5&&(q*=(u.ascaleY-1+this.data.offsetScaleY)*a+1));var $=T.ashearY;m!=0&&($+=(u.ashearY+this.data.offsetShearY)*m),T.updateWorldTransformWith(P,E,N,D,q,T.ashearX,$);}},l})();L.TransformConstraint=Yt;})(Et||(Et={})),(function(L){var Yt=(function(l){function R(y){var a=l.call(this,y,0,false)||this;return a.bones=new Array,a.rotateMix=0,a.translateMix=0,a.scaleMix=0,a.shearMix=0,a.offsetRotation=0,a.offsetX=0,a.offsetY=0,a.offsetScaleX=0,a.offsetScaleY=0,a.offsetShearY=0,a.relative=false,a.local=false,a}return Be(R,l),R})(L.ConstraintData);L.TransformConstraintData=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new L.Pool((function(){return new Array})),this.polygonIndicesPool=new L.Pool((function(){return new Array}));}return l.prototype.triangulate=function(R){var y=R,a=R.length>>1,m=this.indicesArray;m.length=0;for(var u=0;u<a;u++)m[u]=u;var A=this.isConcaveArray;A.length=0;for(var u=0,S=a;u<S;++u)A[u]=l.isConcave(u,a,y,m);var O=this.triangles;for(O.length=0;a>3;){for(var T=a-1,u=0,N=1;;){t:if(!A[u]){for(var P=m[T]<<1,E=m[u]<<1,D=m[N]<<1,q=y[P],$=y[P+1],it=y[E],vt=y[E+1],lt=y[D],dt=y[D+1],st=(N+1)%a;st!=T;st=(st+1)%a)if(A[st]){var G=m[st]<<1,et=y[G],ct=y[G+1];if(l.positiveArea(lt,dt,q,$,et,ct)&&l.positiveArea(q,$,it,vt,et,ct)&&l.positiveArea(it,vt,lt,dt,et,ct))break t}break}if(N==0){do{if(!A[u])break;u--;}while(u>0);break}T=u,u=N,N=(N+1)%a;}O.push(m[(a+u-1)%a]),O.push(m[u]),O.push(m[(u+1)%a]),m.splice(u,1),A.splice(u,1);var rt=(--a+u-1)%a,Tt=u==a?0:u;A[rt]=l.isConcave(rt,a,y,m),A[Tt]=l.isConcave(Tt,a,y,m);}return a==3&&(O.push(m[2]),O.push(m[0]),O.push(m[1])),O},l.prototype.decompose=function(R,y){var a=R,m=this.convexPolygons;this.polygonPool.freeAll(m),m.length=0;var u=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(u),u.length=0;var A=this.polygonIndicesPool.obtain();A.length=0;var S=this.polygonPool.obtain();S.length=0;for(var O=-1,T=0,N=0,P=y.length;N<P;N+=3){var E=y[N]<<1,D=y[N+1]<<1,q=y[N+2]<<1,$=a[E],it=a[E+1],vt=a[D],lt=a[D+1],dt=a[q],st=a[q+1],G=false;if(O==E){var et=S.length-4,ct=l.winding(S[et],S[et+1],S[et+2],S[et+3],dt,st),rt=l.winding(dt,st,S[0],S[1],S[2],S[3]);ct==T&&rt==T&&(S.push(dt),S.push(st),A.push(q),G=true);}G||(S.length>0?(m.push(S),u.push(A)):(this.polygonPool.free(S),this.polygonIndicesPool.free(A)),(S=this.polygonPool.obtain()).length=0,S.push($),S.push(it),S.push(vt),S.push(lt),S.push(dt),S.push(st),(A=this.polygonIndicesPool.obtain()).length=0,A.push(E),A.push(D),A.push(q),T=l.winding($,it,vt,lt,dt,st),O=E);}S.length>0&&(m.push(S),u.push(A));for(var N=0,P=m.length;N<P;N++)if((A=u[N]).length!=0){for(var Tt=A[0],ht=A[A.length-1],et,ut=(S=m[N])[et=S.length-4],Rt=S[et+1],at=S[et+2],_=S[et+3],ot=S[0],xt=S[1],Mt=S[2],Xt=S[3],Dt=l.winding(ut,Rt,at,_,ot,xt),Lt=0;Lt<P;Lt++)if(Lt!=N){var Bt=u[Lt];if(Bt.length==3){var Gt=Bt[0],kt=Bt[1],bt=Bt[2],wt=m[Lt],dt=wt[wt.length-2],st=wt[wt.length-1];if(Gt==Tt&&kt==ht){var ct=l.winding(ut,Rt,at,_,dt,st),rt=l.winding(dt,st,ot,xt,Mt,Xt);ct==Dt&&rt==Dt&&(wt.length=0,Bt.length=0,S.push(dt),S.push(st),A.push(bt),ut=at,Rt=_,at=dt,_=st,Lt=0);}}}}for(var N=m.length-1;N>=0;N--)(S=m[N]).length==0&&(m.splice(N,1),this.polygonPool.free(S),A=u[N],u.splice(N,1),this.polygonIndicesPool.free(A));return m},l.isConcave=function(R,y,a,m){var u=m[(y+R-1)%y]<<1,A=m[R]<<1,S=m[(R+1)%y]<<1;return !this.positiveArea(a[u],a[u+1],a[A],a[A+1],a[S],a[S+1])},l.positiveArea=function(R,y,a,m,u,A){return R*(A-m)+a*(y-A)+u*(m-y)>=0},l.winding=function(R,y,a,m,u,A){var S=a-R,O=m-y;return u*O-A*S+S*y-R*O>=0?1:-1},l})();L.Triangulator=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function P(){this.array=new Array;}return P.prototype.add=function(E){var D=this.contains(E);return this.array[0|E]=0|E,!D},P.prototype.contains=function(E){return this.array[0|E]!=null},P.prototype.remove=function(E){this.array[0|E]=void 0;},P.prototype.clear=function(){this.array.length=0;},P})();L.IntSet=Yt;var l=(function(){function P(E,D,q,$){E===void 0&&(E=0),D===void 0&&(D=0),q===void 0&&(q=0),$===void 0&&($=0),this.r=E,this.g=D,this.b=q,this.a=$;}return P.prototype.set=function(E,D,q,$){return this.r=E,this.g=D,this.b=q,this.a=$,this.clamp(),this},P.prototype.setFromColor=function(E){return this.r=E.r,this.g=E.g,this.b=E.b,this.a=E.a,this},P.prototype.setFromString=function(E){return E=E.charAt(0)=="#"?E.substr(1):E,this.r=parseInt(E.substr(0,2),16)/255,this.g=parseInt(E.substr(2,2),16)/255,this.b=parseInt(E.substr(4,2),16)/255,this.a=(E.length!=8?255:parseInt(E.substr(6,2),16))/255,this},P.prototype.add=function(E,D,q,$){return this.r+=E,this.g+=D,this.b+=q,this.a+=$,this.clamp(),this},P.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},P.rgba8888ToColor=function(E,D){E.r=((4278190080&D)>>>24)/255,E.g=((16711680&D)>>>16)/255,E.b=((65280&D)>>>8)/255,E.a=(255&D)/255;},P.rgb888ToColor=function(E,D){E.r=((16711680&D)>>>16)/255,E.g=((65280&D)>>>8)/255,E.b=(255&D)/255;},P.WHITE=new P(1,1,1,1),P.RED=new P(1,0,0,1),P.GREEN=new P(0,1,0,1),P.BLUE=new P(0,0,1,1),P.MAGENTA=new P(1,0,1,1),P})();L.Color=l;var R=(function(){function P(){}return P.clamp=function(E,D,q){return E<D?D:E>q?q:E},P.cosDeg=function(E){return Math.cos(E*P.degRad)},P.sinDeg=function(E){return Math.sin(E*P.degRad)},P.signum=function(E){return E>0?1:E<0?-1:0},P.toInt=function(E){return E>0?Math.floor(E):Math.ceil(E)},P.cbrt=function(E){var D=Math.pow(Math.abs(E),.3333333333333333);return E<0?-D:D},P.randomTriangular=function(E,D){return P.randomTriangularWith(E,D,.5*(E+D))},P.randomTriangularWith=function(E,D,q){var $=Math.random(),it=D-E;return $<=(q-E)/it?E+Math.sqrt($*it*(q-E)):D-Math.sqrt((1-$)*it*(D-q))},P.PI=3.1415927,P.PI2=2*P.PI,P.radiansToDegrees=180/P.PI,P.radDeg=P.radiansToDegrees,P.degreesToRadians=P.PI/180,P.degRad=P.degreesToRadians,P})();L.MathUtils=R;var y=(function(){function P(){}return P.prototype.apply=function(E,D,q){return E+(D-E)*this.applyInternal(q)},P})();L.Interpolation=y;var a=(function(P){function E(D){var q=P.call(this)||this;return q.power=2,q.power=D,q}return Be(E,P),E.prototype.applyInternal=function(D){return D<=.5?Math.pow(2*D,this.power)/2:Math.pow(2*(D-1),this.power)/(this.power%2==0?-2:2)+1},E})(y);L.Pow=a;var m=(function(P){function E(D){return P.call(this,D)||this}return Be(E,P),E.prototype.applyInternal=function(D){return Math.pow(D-1,this.power)*(this.power%2==0?-1:1)+1},E})(a);L.PowOut=m;var u=(function(){function P(){}return P.arrayCopy=function(E,D,q,$,it){for(var vt=D,lt=$;vt<D+it;vt++,lt++)q[lt]=E[vt];},P.setArraySize=function(E,D,q){q===void 0&&(q=0);var $=E.length;if($==D)return E;if(E.length=D,$<D)for(var it=$;it<D;it++)E[it]=q;return E},P.ensureArrayCapacity=function(E,D,q){return q===void 0&&(q=0),E.length>=D?E:P.setArraySize(E,D,q)},P.newArray=function(E,D){for(var q=new Array(E),$=0;$<E;$++)q[$]=D;return q},P.newFloatArray=function(E){if(P.SUPPORTS_TYPED_ARRAYS)return new Float32Array(E);for(var D=new Array(E),q=0;q<D.length;q++)D[q]=0;return D},P.newShortArray=function(E){if(P.SUPPORTS_TYPED_ARRAYS)return new Int16Array(E);for(var D=new Array(E),q=0;q<D.length;q++)D[q]=0;return D},P.toFloatArray=function(E){return P.SUPPORTS_TYPED_ARRAYS?new Float32Array(E):E},P.toSinglePrecision=function(E){return P.SUPPORTS_TYPED_ARRAYS?Math.fround(E):E},P.webkit602BugfixHelper=function(E,D){},P.contains=function(E,D,q){for(var $=0;$<E.length;$++)if(E[$]==D)return  true;return  false},P.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",P})();L.Utils=u;var A=(function(){function P(){}return P.logBones=function(E){for(var D=0;D<Skeleton.bones.length;D++){var q=Skeleton.bones[D];console.log(q.data.name+", "+q.a+", "+q.b+", "+q.c+", "+q.d+", "+q.worldX+", "+q.worldY);}},P})();L.DebugUtils=A;var S=(function(){function P(E){this.items=new Array,this.instantiator=E;}return P.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},P.prototype.free=function(E){E.reset&&E.reset(),this.items.push(E);},P.prototype.freeAll=function(E){for(var D=0;D<E.length;D++)this.free(E[D]);},P.prototype.clear=function(){this.items.length=0;},P})();L.Pool=S;var O=(function(){function P(E,D){E===void 0&&(E=0),D===void 0&&(D=0),this.x=E,this.y=D;}return P.prototype.set=function(E,D){return this.x=E,this.y=D,this},P.prototype.length=function(){var E=this.x,D=this.y;return Math.sqrt(E*E+D*D)},P.prototype.normalize=function(){var E=this.length();return E!=0&&(this.x/=E,this.y/=E),this},P})();L.Vector2=O;var T=(function(){function P(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0;}return P.prototype.update=function(){var E=Date.now()/1e3;this.delta=E-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=E,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0);},P})();L.TimeKeeper=T;var N=(function(){function P(E){E===void 0&&(E=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=true,this.values=new Array(E);}return P.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},P.prototype.addValue=function(E){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=E,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=true;},P.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var E=0,D=0;D<this.values.length;D++)E+=this.values[D];this.mean=E/this.values.length,this.dirty=false;}return this.mean}return 0},P})();L.WindowedMean=N;})(Et||(Et={})),(function(){var L;Math.fround||(Math.fround=(L=new Float32Array(1),function(Yt){return L[0]=Yt,L[0]}));})(),(function(L){var Yt=(function(){function R(y){if(y==null)throw new Error("name cannot be null.");this.name=y;}return R})();L.Attachment=Yt;var l=(function(R){function y(a){var m=R.call(this,a)||this;return m.id=(65535&y.nextID++)<<11,m.worldVerticesLength=0,m.deformAttachment=m,m}return Be(y,R),y.prototype.computeWorldVertices=function(a,m,u,A,S,O){u=S+(u>>1)*O;var T=a.bone.skeleton,N=a.deform,P=this.vertices,E=this.bones;if(E!=null){for(var D=0,q=0,$=0;$<m;$+=2){var it;D+=(it=E[D])+1,q+=it;}var vt=T.bones;if(N.length==0)for(var lt=S,dt=3*q;lt<u;lt+=O){var st=0,G=0,it=E[D++];for(it+=D;D<it;D++,dt+=3){var et=vt[E[D]],ct=P[dt],rt=P[dt+1],Tt=P[dt+2];st+=(ct*et.a+rt*et.b+et.worldX)*Tt,G+=(ct*et.c+rt*et.d+et.worldY)*Tt;}A[lt]=st,A[lt+1]=G;}else for(var ht=N,lt=S,dt=3*q,ut=q<<1;lt<u;lt+=O){var st=0,G=0,it=E[D++];for(it+=D;D<it;D++,dt+=3,ut+=2){var et=vt[E[D]],ct=P[dt]+ht[ut],rt=P[dt+1]+ht[ut+1],Tt=P[dt+2];st+=(ct*et.a+rt*et.b+et.worldX)*Tt,G+=(ct*et.c+rt*et.d+et.worldY)*Tt;}A[lt]=st,A[lt+1]=G;}}else {N.length>0&&(P=N);for(var et,Rt=(et=a.bone).worldX,at=et.worldY,_=et.a,dt=et.b,ot=et.c,xt=et.d,Mt=m,lt=S;lt<u;Mt+=2,lt+=O){var ct=P[Mt],rt=P[Mt+1];A[lt]=ct*_+rt*dt+Rt,A[lt+1]=ct*ot+rt*xt+at;}}},y.prototype.copyTo=function(a){this.bones!=null?(a.bones=new Array(this.bones.length),L.Utils.arrayCopy(this.bones,0,a.bones,0,this.bones.length)):a.bones=null,this.vertices!=null?(a.vertices=L.Utils.newFloatArray(this.vertices.length),L.Utils.arrayCopy(this.vertices,0,a.vertices,0,this.vertices.length)):a.vertices=null,a.worldVerticesLength=this.worldVerticesLength,a.deformAttachment=this.deformAttachment;},y.nextID=0,y})(Yt);L.VertexAttachment=l;})(Et||(Et={})),(function(L){(function(l){l[l.Region=0]="Region",l[l.BoundingBox=1]="BoundingBox",l[l.Mesh=2]="Mesh",l[l.LinkedMesh=3]="LinkedMesh",l[l.Path=4]="Path",l[l.Point=5]="Point",l[l.Clipping=6]="Clipping";})(L.AttachmentType||(L.AttachmentType={}));})(Et||(Et={})),(function(L){var Yt=(function(l){function R(y){var a=l.call(this,y)||this;return a.color=new L.Color(1,1,1,1),a}return Be(R,l),R.prototype.copy=function(){var y=new R(this.name);return this.copyTo(y),y.color.setFromColor(this.color),y},R})(L.VertexAttachment);L.BoundingBoxAttachment=Yt;})(Et||(Et={})),(function(L){var Yt=(function(l){function R(y){var a=l.call(this,y)||this;return a.color=new L.Color(.2275,.2275,.8078,1),a}return Be(R,l),R.prototype.copy=function(){var y=new R(this.name);return this.copyTo(y),y.endSlot=this.endSlot,y.color.setFromColor(this.color),y},R})(L.VertexAttachment);L.ClippingAttachment=Yt;})(Et||(Et={})),(function(L){var Yt=(function(l){function R(y){var a=l.call(this,y)||this;return a.color=new L.Color(1,1,1,1),a.tempColor=new L.Color(0,0,0,0),a}return Be(R,l),R.prototype.updateUVs=function(){var y=this.regionUVs;this.uvs!=null&&this.uvs.length==y.length||(this.uvs=L.Utils.newFloatArray(y.length));var a=this.uvs,m=this.uvs.length,u=this.region.u,A=this.region.v,S=0,O=0;if(this.region instanceof L.TextureAtlasRegion){var T=this.region,N=T.texture.getImage().width,P=T.texture.getImage().height;switch(T.degrees){case 90:u-=(T.originalHeight-T.offsetY-T.height)/N,A-=(T.originalWidth-T.offsetX-T.width)/P,S=T.originalHeight/N,O=T.originalWidth/P;for(var E=0;E<m;E+=2)a[E]=u+y[E+1]*S,a[E+1]=A+(1-y[E])*O;return;case 180:u-=(T.originalWidth-T.offsetX-T.width)/N,A-=T.offsetY/P,S=T.originalWidth/N,O=T.originalHeight/P;for(var E=0;E<m;E+=2)a[E]=u+(1-y[E])*S,a[E+1]=A+(1-y[E+1])*O;return;case 270:u-=T.offsetY/N,A-=T.offsetX/P,S=T.originalHeight/N,O=T.originalWidth/P;for(var E=0;E<m;E+=2)a[E]=u+(1-y[E+1])*S,a[E+1]=A+y[E]*O;return}u-=T.offsetX/N,A-=(T.originalHeight-T.offsetY-T.height)/P,S=T.originalWidth/N,O=T.originalHeight/P;}else this.region==null?(u=A=0,S=O=1):(S=this.region.u2-u,O=this.region.v2-A);for(var E=0;E<m;E+=2)a[E]=u+y[E]*S,a[E+1]=A+y[E+1]*O;},R.prototype.getParentMesh=function(){return this.parentMesh},R.prototype.setParentMesh=function(y){this.parentMesh=y,y!=null&&(this.bones=y.bones,this.vertices=y.vertices,this.worldVerticesLength=y.worldVerticesLength,this.regionUVs=y.regionUVs,this.triangles=y.triangles,this.hullLength=y.hullLength,this.worldVerticesLength=y.worldVerticesLength);},R.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var y=new R(this.name);return y.region=this.region,y.path=this.path,y.color.setFromColor(this.color),this.copyTo(y),y.regionUVs=new Array(this.regionUVs.length),L.Utils.arrayCopy(this.regionUVs,0,y.regionUVs,0,this.regionUVs.length),y.uvs=new Array(this.uvs.length),L.Utils.arrayCopy(this.uvs,0,y.uvs,0,this.uvs.length),y.triangles=new Array(this.triangles.length),L.Utils.arrayCopy(this.triangles,0,y.triangles,0,this.triangles.length),y.hullLength=this.hullLength,this.edges!=null&&(y.edges=new Array(this.edges.length),L.Utils.arrayCopy(this.edges,0,y.edges,0,this.edges.length)),y.width=this.width,y.height=this.height,y},R.prototype.newLinkedMesh=function(){var y=new R(this.name);return y.region=this.region,y.path=this.path,y.color.setFromColor(this.color),y.deformAttachment=this.deformAttachment,y.setParentMesh(this.parentMesh!=null?this.parentMesh:this),y.updateUVs(),y},R})(L.VertexAttachment);L.MeshAttachment=Yt;})(Et||(Et={})),(function(L){var Yt=(function(l){function R(y){var a=l.call(this,y)||this;return a.closed=false,a.constantSpeed=false,a.color=new L.Color(1,1,1,1),a}return Be(R,l),R.prototype.copy=function(){var y=new R(this.name);return this.copyTo(y),y.lengths=new Array(this.lengths.length),L.Utils.arrayCopy(this.lengths,0,y.lengths,0,this.lengths.length),y.closed=closed,y.constantSpeed=this.constantSpeed,y.color.setFromColor(this.color),y},R})(L.VertexAttachment);L.PathAttachment=Yt;})(Et||(Et={})),(function(L){var Yt=(function(l){function R(y){var a=l.call(this,y)||this;return a.color=new L.Color(.38,.94,0,1),a}return Be(R,l),R.prototype.computeWorldPosition=function(y,a){return a.x=this.x*y.a+this.y*y.b+y.worldX,a.y=this.x*y.c+this.y*y.d+y.worldY,a},R.prototype.computeWorldRotation=function(y){var a=L.MathUtils.cosDeg(this.rotation),m=L.MathUtils.sinDeg(this.rotation),u=a*y.a+m*y.b,A=a*y.c+m*y.d;return Math.atan2(A,u)*L.MathUtils.radDeg},R.prototype.copy=function(){var y=new R(this.name);return y.x=this.x,y.y=this.y,y.rotation=this.rotation,y.color.setFromColor(this.color),y},R})(L.VertexAttachment);L.PointAttachment=Yt;})(Et||(Et={})),(function(L){var Yt=(function(l){function R(y){var a=l.call(this,y)||this;return a.x=0,a.y=0,a.scaleX=1,a.scaleY=1,a.rotation=0,a.width=0,a.height=0,a.color=new L.Color(1,1,1,1),a.offset=L.Utils.newFloatArray(8),a.uvs=L.Utils.newFloatArray(8),a.tempColor=new L.Color(1,1,1,1),a}return Be(R,l),R.prototype.updateOffset=function(){var y=this.width/this.region.originalWidth*this.scaleX,a=this.height/this.region.originalHeight*this.scaleY,m=-this.width/2*this.scaleX+this.region.offsetX*y,u=-this.height/2*this.scaleY+this.region.offsetY*a,A=m+this.region.width*y,S=u+this.region.height*a,O=this.rotation*Math.PI/180,T=Math.cos(O),N=Math.sin(O),P=m*T+this.x,E=m*N,D=u*T+this.y,q=u*N,$=A*T+this.x,it=A*N,vt=S*T+this.y,lt=S*N,dt=this.offset;dt[R.OX1]=P-q,dt[R.OY1]=D+E,dt[R.OX2]=P-lt,dt[R.OY2]=vt+E,dt[R.OX3]=$-lt,dt[R.OY3]=vt+it,dt[R.OX4]=$-q,dt[R.OY4]=D+it;},R.prototype.setRegion=function(y){this.region=y;var a=this.uvs;y.rotate?(a[2]=y.u,a[3]=y.v2,a[4]=y.u,a[5]=y.v,a[6]=y.u2,a[7]=y.v,a[0]=y.u2,a[1]=y.v2):(a[0]=y.u,a[1]=y.v2,a[2]=y.u,a[3]=y.v,a[4]=y.u2,a[5]=y.v,a[6]=y.u2,a[7]=y.v2);},R.prototype.computeWorldVertices=function(y,a,m,u){var A=this.offset,S=y.worldX,O=y.worldY,T=y.a,N=y.b,P=y.c,E=y.d,D=0,q=0;D=A[R.OX1],q=A[R.OY1],a[m]=D*T+q*N+S,a[m+1]=D*P+q*E+O,m+=u,D=A[R.OX2],q=A[R.OY2],a[m]=D*T+q*N+S,a[m+1]=D*P+q*E+O,m+=u,D=A[R.OX3],q=A[R.OY3],a[m]=D*T+q*N+S,a[m+1]=D*P+q*E+O,m+=u,D=A[R.OX4],q=A[R.OY4],a[m]=D*T+q*N+S,a[m+1]=D*P+q*E+O;},R.prototype.copy=function(){var y=new R(this.name);return y.region=this.region,y.rendererObject=this.rendererObject,y.path=this.path,y.x=this.x,y.y=this.y,y.scaleX=this.scaleX,y.scaleY=this.scaleY,y.rotation=this.rotation,y.width=this.width,y.height=this.height,L.Utils.arrayCopy(this.uvs,0,y.uvs,0,8),L.Utils.arrayCopy(this.offset,0,y.offset,0,8),y.color.setFromColor(this.color),y},R.OX1=0,R.OY1=1,R.OX2=2,R.OY2=3,R.OX3=4,R.OY3=5,R.OX4=6,R.OY4=7,R.X1=0,R.Y1=1,R.C1R=2,R.C1G=3,R.C1B=4,R.C1A=5,R.U1=6,R.V1=7,R.X2=8,R.Y2=9,R.C2R=10,R.C2G=11,R.C2B=12,R.C2A=13,R.U2=14,R.V2=15,R.X3=16,R.Y3=17,R.C3R=18,R.C3G=19,R.C3B=20,R.C3A=21,R.U3=22,R.V3=23,R.X4=24,R.Y4=25,R.C4R=26,R.C4G=27,R.C4B=28,R.C4A=29,R.U4=30,R.V4=31,R})(L.Attachment);L.RegionAttachment=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R,y){this.jitterX=0,this.jitterY=0,this.jitterX=R,this.jitterY=y;}return l.prototype.begin=function(R){},l.prototype.transform=function(R,y,a,m){R.x+=L.MathUtils.randomTriangular(-this.jitterX,this.jitterY),R.y+=L.MathUtils.randomTriangular(-this.jitterX,this.jitterY);},l.prototype.end=function(){},l})();L.JitterEffect=Yt;})(Et||(Et={})),(function(L){var Yt=(function(){function l(R){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=R;}return l.prototype.begin=function(R){this.worldX=Skeleton.x+this.centerX,this.worldY=Skeleton.y+this.centerY;},l.prototype.transform=function(R,y,a,m){var u=this.angle*L.MathUtils.degreesToRadians,A=R.x-this.worldX,S=R.y-this.worldY,O=Math.sqrt(A*A+S*S);if(O<this.radius){var T=l.interpolation.apply(0,u,(this.radius-O)/this.radius),N=Math.cos(T),P=Math.sin(T);R.x=N*A-P*S+this.worldX,R.y=P*A+N*S+this.worldY;}},l.prototype.end=function(){},l.interpolation=new L.PowOut(2),l})();L.SwirlEffect=Yt;})(Et||(Et={})),(function(L){(function(l){var R=(function(y){function a(m,u){return u===void 0&&(u=""),y.call(this,(function(A){return new L.webgl.GLTexture(m,A)}),u)||this}return Be(a,y),a})(L.AssetManager);l.AssetManager=R;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function y(a,m){this.position=new l.Vector3(0,0,0),this.direction=new l.Vector3(0,0,-1),this.up=new l.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new l.Matrix4,this.inverseProjectionView=new l.Matrix4,this.projection=new l.Matrix4,this.view=new l.Matrix4,this.tmp=new l.Vector3,this.viewportWidth=a,this.viewportHeight=m,this.update();}return y.prototype.update=function(){var a=this.projection,m=this.view,u=this.projectionView,A=this.inverseProjectionView,S=this.zoom,O=this.viewportWidth,T=this.viewportHeight;a.ortho(S*(-O/2),S*(O/2),S*(-T/2),S*(T/2),this.near,this.far),m.lookAt(this.position,this.direction,this.up),u.set(a.values),u.multiply(m),A.set(u.values).invert();},y.prototype.screenToWorld=function(a,m,u){var A=a.x,S=u-a.y-1,O=this.tmp;return O.x=2*A/m-1,O.y=2*S/u-1,O.z=2*a.z-1,O.project(this.inverseProjectionView),a.set(O.x,O.y,O.z),a},y.prototype.setViewport=function(a,m){this.viewportWidth=a,this.viewportHeight=m;},y})();l.OrthoCamera=R;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(y){function a(m,u,A){A===void 0&&(A=false);var S=y.call(this,u)||this;return S.texture=null,S.boundUnit=0,S.useMipMaps=false,S.context=m instanceof l.ManagedWebGLRenderingContext?m:new l.ManagedWebGLRenderingContext(m),S.useMipMaps=A,S.restore(),S.context.addRestorable(S),S}return Be(a,y),a.prototype.setFilters=function(m,u){var A=this.context.gl;this.bind(),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,m),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,a.validateMagFilter(u));},a.validateMagFilter=function(m){switch(m){case L.TextureFilter.MipMap:case L.TextureFilter.MipMapLinearLinear:case L.TextureFilter.MipMapLinearNearest:case L.TextureFilter.MipMapNearestLinear:case L.TextureFilter.MipMapNearestNearest:return L.TextureFilter.Linear;default:return m}},a.prototype.setWraps=function(m,u){var A=this.context.gl;this.bind(),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,m),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,u);},a.prototype.update=function(m){var u=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),a.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,false),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,this._image),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,m?u.LINEAR_MIPMAP_LINEAR:u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),m&&u.generateMipmap(u.TEXTURE_2D);},a.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps);},a.prototype.bind=function(m){m===void 0&&(m=0);var u=this.context.gl;this.boundUnit=m,u.activeTexture(u.TEXTURE0+m),u.bindTexture(u.TEXTURE_2D,this.texture);},a.prototype.unbind=function(){var m=this.context.gl;m.activeTexture(m.TEXTURE0+this.boundUnit),m.bindTexture(m.TEXTURE_2D,null);},a.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture);},a.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=false,a})(L.Texture);l.GLTexture=R;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function a(m){this.lastX=0,this.lastY=0,this.buttonDown=false,this.currTouch=null,this.touchesPool=new L.Pool((function(){return new L.webgl.Touch(0,0,0)})),this.listeners=new Array,this.element=m,this.setupCallbacks(m);}return a.prototype.setupCallbacks=function(m){var u=this,A=function(T){if(T instanceof MouseEvent){for(var N=m.getBoundingClientRect(),P=T.clientX-N.left,E=T.clientY-N.top,D=u.listeners,q=0;q<D.length;q++)D[q].down&&D[q].down(P,E);u.lastX=P,u.lastY=E,u.buttonDown=true,document.addEventListener("mousemove",S),document.addEventListener("mouseup",O);}},S=function(T){if(T instanceof MouseEvent){for(var N=m.getBoundingClientRect(),P=T.clientX-N.left,E=T.clientY-N.top,D=u.listeners,q=0;q<D.length;q++)u.buttonDown?D[q].dragged&&D[q].dragged(P,E):D[q].moved&&D[q].moved(P,E);u.lastX=P,u.lastY=E;}},O=function(T){if(T instanceof MouseEvent){for(var N=m.getBoundingClientRect(),P=T.clientX-N.left,E=T.clientY-N.top,D=u.listeners,q=0;q<D.length;q++)D[q].up&&D[q].up(P,E);u.lastX=P,u.lastY=E,u.buttonDown=false,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",O);}};m.addEventListener("mousedown",A,true),m.addEventListener("mousemove",S,true),m.addEventListener("mouseup",O,true),m.addEventListener("touchstart",(function(T){if(u.currTouch==null){for(var N=T.changedTouches,P=0;P<N.length;P++){var E=N[P],D=m.getBoundingClientRect(),q=E.clientX-D.left,$=E.clientY-D.top;u.currTouch=u.touchesPool.obtain(),u.currTouch.identifier=E.identifier,u.currTouch.x=q,u.currTouch.y=$;break}for(var it=u.listeners,vt=0;vt<it.length;vt++)it[vt].down&&it[vt].down(u.currTouch.x,u.currTouch.y);u.lastX=u.currTouch.x,u.lastY=u.currTouch.y,u.buttonDown=true,T.preventDefault();}}),false),m.addEventListener("touchend",(function(T){for(var N=T.changedTouches,P=0;P<N.length;P++){var E=N[P];if(u.currTouch.identifier===E.identifier){var D=m.getBoundingClientRect(),q=u.currTouch.x=E.clientX-D.left,$=u.currTouch.y=E.clientY-D.top;u.touchesPool.free(u.currTouch);for(var it=u.listeners,vt=0;vt<it.length;vt++)it[vt].up&&it[vt].up(q,$);u.lastX=q,u.lastY=$,u.buttonDown=false,u.currTouch=null;break}}T.preventDefault();}),false),m.addEventListener("touchcancel",(function(T){for(var N=T.changedTouches,P=0;P<N.length;P++){var E=N[P];if(u.currTouch.identifier===E.identifier){var D=m.getBoundingClientRect(),q=u.currTouch.x=E.clientX-D.left,$=u.currTouch.y=E.clientY-D.top;u.touchesPool.free(u.currTouch);for(var it=u.listeners,vt=0;vt<it.length;vt++)it[vt].up&&it[vt].up(q,$);u.lastX=q,u.lastY=$,u.buttonDown=false,u.currTouch=null;break}}T.preventDefault();}),false),m.addEventListener("touchmove",(function(T){if(u.currTouch!=null){for(var N=T.changedTouches,P=0;P<N.length;P++){var E=N[P];if(u.currTouch.identifier===E.identifier){for(var D=m.getBoundingClientRect(),q=E.clientX-D.left,$=E.clientY-D.top,it=u.listeners,vt=0;vt<it.length;vt++)it[vt].dragged&&it[vt].dragged(q,$);u.lastX=u.currTouch.x=q,u.lastY=u.currTouch.y=$;break}}T.preventDefault();}}),false);},a.prototype.addListener=function(m){this.listeners.push(m);},a.prototype.removeListener=function(m){var u=this.listeners.indexOf(m);u>-1&&this.listeners.splice(u,1);},a})();l.Input=R;var y=(function(){function a(m,u,A){this.identifier=m,this.x=u,this.y=A;}return a})();l.Touch=y;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function y(a){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.timeKeeper=new L.TimeKeeper,this.backgroundColor=new L.Color(.135,.135,.135,1),this.tempColor=new L.Color,this.firstDraw=0,this.renderer=a,this.timeKeeper.maxDelta=9,y.logoImg===null){var m=navigator.userAgent.indexOf("Safari")>-1;y.logoImg=new Image,y.logoImg.src=y.SPINE_LOGO_DATA,m||(y.logoImg.crossOrigin="anonymous"),y.logoImg.onload=function(u){y.loaded++;},y.spinnerImg=new Image,y.spinnerImg.src=y.SPINNER_DATA,m||(y.spinnerImg.crossOrigin="anonymous"),y.spinnerImg.onload=function(u){y.loaded++;};}}return y.prototype.draw=function(a){if(a===void 0&&(a=false),!(a&&this.fadeOut>y.FADE_SECONDS)){this.timeKeeper.update();var m=Math.abs(Math.sin(this.timeKeeper.totalTime+.75));this.angle-=this.timeKeeper.delta/1.4*360*(1+1.5*Math.pow(m,5));var u=this.renderer,A=u.canvas,S=u.context.gl;u.resize(l.ResizeMode.Stretch);var O=u.camera.position.x,T=u.camera.position.y;if(u.camera.position.set(A.width/2,A.height/2,0),u.camera.viewportWidth=A.width,u.camera.viewportHeight=A.height,a){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>y.FADE_SECONDS)return void u.camera.position.set(O,T,0);m=1-this.fadeOut/y.FADE_SECONDS,this.tempColor.setFromColor(this.backgroundColor),this.tempColor.a=1-(m-1)*(m-1),u.begin(),u.quad(true,0,0,A.width,0,A.width,A.height,0,A.height,this.tempColor,this.tempColor,this.tempColor,this.tempColor),u.end();}else S.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),S.clear(S.COLOR_BUFFER_BIT),this.tempColor.a=1;if(this.tempColor.set(1,1,1,this.tempColor.a),y.loaded==2){this.logo===null&&(this.logo=new l.GLTexture(u.context,y.logoImg),this.spinner=new l.GLTexture(u.context,y.spinnerImg)),this.logo.update(false),this.spinner.update(false);var N=this.logo.getImage().width,P=this.logo.getImage().height,E=this.spinner.getImage().width,D=this.spinner.getImage().height;u.batcher.setBlendMode(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA),u.begin(),u.drawTexture(this.logo,(A.width-N)/2,(A.height-P)/2,N,P,this.tempColor),u.drawTextureRotated(this.spinner,(A.width-E)/2,(A.height-D)/2,E,D,E/2,D/2,this.angle,this.tempColor),u.end(),u.camera.position.set(O,T,0);}}},y.FADE_SECONDS=1,y.loaded=0,y.spinnerImg=null,y.logoImg=null,y.SPINNER_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAAACXBIWXMAAAsTAAALEwEAmpwYAAALB2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTEtMTVUMTY6NDA6NTkrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpmZDhlNTljMC02NGJjLTIxNGQtODAyZi1jZDlhODJjM2ZjMGMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmYmNmZWJlYS03MjY2LWE0NGQtOTI4NS0wOTJmNGNhYzk4ZWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjk3IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMjQyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHN0RXZ0OndoZW49IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiNThlMTlkNi0xYTRjLTQyNDEtODU0ZC01MDVlZjYxMjRhODQiIHN0RXZ0OndoZW49IjIwMTgtMTEtMTVUMTY6NDA6MjMrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ3YzYzYzIwLWJkYjgtYzM0YS1hYzMyLWQ5MDdjOWEyOTA0MCIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNVQxNjo0MDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZmQ4ZTU5YzAtNjRiYy0yMTRkLTgwMmYtY2Q5YTgyYzNmYzBjIiBzdEV2dDp3aGVuPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0N2M2M2MyMC1iZGI4LWMzNGEtYWMzMi1kOTA3YzlhMjkwNDAiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2OWRmZjljYy01YzFiLWE5NDctOTc3OS03ODgxZjM0ODk3MDMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFu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",y.SPINE_LOGO_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAACXBIWXMAAAsTAAALEwEAmpwYAAALB2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTEtMTVUMTY6NDA6NTkrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMTdhZGQ3Ni04OTZlLThlNGUtYmM5MS00ZjEyNjI1YjA3MjgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDplMTViNGE2ZS1hMDg3LWEzNDktODdhOS1mNDYzYjE2MzQ0Y2MiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjk3IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMjQyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHN0RXZ0OndoZW49IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiNThlMTlkNi0xYTRjLTQyNDEtODU0ZC01MDVlZjYxMjRhODQiIHN0RXZ0OndoZW49IjIwMTgtMTEtMTVUMTY6NDA6MjMrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJlNjJiMWM2LWIxYzQtNDk0MC04MDMxLWU4ZDkyNTBmODJjNSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNVQxNjo0MDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDE3YWRkNzYtODk2ZS04ZTRlLWJjOTEtNGYxMjYyNWIwNzI4IiBzdEV2dDp3aGVuPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyZTYyYjFjNi1iMWM0LTQ5NDAtODAzMS1lOGQ5MjUwZjgyYzUiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2OWRmZjljYy01YzFiLWE5NDctOTc3OS03ODgxZjM0ODk3MDMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFu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",y})();l.LoadingScreen=R;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){l.M00=0,l.M01=4,l.M02=8,l.M03=12,l.M10=1,l.M11=5,l.M12=9,l.M13=13,l.M20=2,l.M21=6,l.M22=10,l.M23=14,l.M30=3,l.M31=7,l.M32=11,l.M33=15;var R=(function(){function y(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var a=this.values;a[l.M00]=1,a[l.M11]=1,a[l.M22]=1,a[l.M33]=1;}return y.prototype.set=function(a){return this.values.set(a),this},y.prototype.transpose=function(){var a=this.temp,m=this.values;return a[l.M00]=m[l.M00],a[l.M01]=m[l.M10],a[l.M02]=m[l.M20],a[l.M03]=m[l.M30],a[l.M10]=m[l.M01],a[l.M11]=m[l.M11],a[l.M12]=m[l.M21],a[l.M13]=m[l.M31],a[l.M20]=m[l.M02],a[l.M21]=m[l.M12],a[l.M22]=m[l.M22],a[l.M23]=m[l.M32],a[l.M30]=m[l.M03],a[l.M31]=m[l.M13],a[l.M32]=m[l.M23],a[l.M33]=m[l.M33],this.set(a)},y.prototype.identity=function(){var a=this.values;return a[l.M00]=1,a[l.M01]=0,a[l.M02]=0,a[l.M03]=0,a[l.M10]=0,a[l.M11]=1,a[l.M12]=0,a[l.M13]=0,a[l.M20]=0,a[l.M21]=0,a[l.M22]=1,a[l.M23]=0,a[l.M30]=0,a[l.M31]=0,a[l.M32]=0,a[l.M33]=1,this},y.prototype.invert=function(){var a=this.values,m=this.temp,u=a[l.M30]*a[l.M21]*a[l.M12]*a[l.M03]-a[l.M20]*a[l.M31]*a[l.M12]*a[l.M03]-a[l.M30]*a[l.M11]*a[l.M22]*a[l.M03]+a[l.M10]*a[l.M31]*a[l.M22]*a[l.M03]+a[l.M20]*a[l.M11]*a[l.M32]*a[l.M03]-a[l.M10]*a[l.M21]*a[l.M32]*a[l.M03]-a[l.M30]*a[l.M21]*a[l.M02]*a[l.M13]+a[l.M20]*a[l.M31]*a[l.M02]*a[l.M13]+a[l.M30]*a[l.M01]*a[l.M22]*a[l.M13]-a[l.M00]*a[l.M31]*a[l.M22]*a[l.M13]-a[l.M20]*a[l.M01]*a[l.M32]*a[l.M13]+a[l.M00]*a[l.M21]*a[l.M32]*a[l.M13]+a[l.M30]*a[l.M11]*a[l.M02]*a[l.M23]-a[l.M10]*a[l.M31]*a[l.M02]*a[l.M23]-a[l.M30]*a[l.M01]*a[l.M12]*a[l.M23]+a[l.M00]*a[l.M31]*a[l.M12]*a[l.M23]+a[l.M10]*a[l.M01]*a[l.M32]*a[l.M23]-a[l.M00]*a[l.M11]*a[l.M32]*a[l.M23]-a[l.M20]*a[l.M11]*a[l.M02]*a[l.M33]+a[l.M10]*a[l.M21]*a[l.M02]*a[l.M33]+a[l.M20]*a[l.M01]*a[l.M12]*a[l.M33]-a[l.M00]*a[l.M21]*a[l.M12]*a[l.M33]-a[l.M10]*a[l.M01]*a[l.M22]*a[l.M33]+a[l.M00]*a[l.M11]*a[l.M22]*a[l.M33];if(u==0)throw new Error("non-invertible matrix");var A=1/u;return m[l.M00]=a[l.M12]*a[l.M23]*a[l.M31]-a[l.M13]*a[l.M22]*a[l.M31]+a[l.M13]*a[l.M21]*a[l.M32]-a[l.M11]*a[l.M23]*a[l.M32]-a[l.M12]*a[l.M21]*a[l.M33]+a[l.M11]*a[l.M22]*a[l.M33],m[l.M01]=a[l.M03]*a[l.M22]*a[l.M31]-a[l.M02]*a[l.M23]*a[l.M31]-a[l.M03]*a[l.M21]*a[l.M32]+a[l.M01]*a[l.M23]*a[l.M32]+a[l.M02]*a[l.M21]*a[l.M33]-a[l.M01]*a[l.M22]*a[l.M33],m[l.M02]=a[l.M02]*a[l.M13]*a[l.M31]-a[l.M03]*a[l.M12]*a[l.M31]+a[l.M03]*a[l.M11]*a[l.M32]-a[l.M01]*a[l.M13]*a[l.M32]-a[l.M02]*a[l.M11]*a[l.M33]+a[l.M01]*a[l.M12]*a[l.M33],m[l.M03]=a[l.M03]*a[l.M12]*a[l.M21]-a[l.M02]*a[l.M13]*a[l.M21]-a[l.M03]*a[l.M11]*a[l.M22]+a[l.M01]*a[l.M13]*a[l.M22]+a[l.M02]*a[l.M11]*a[l.M23]-a[l.M01]*a[l.M12]*a[l.M23],m[l.M10]=a[l.M13]*a[l.M22]*a[l.M30]-a[l.M12]*a[l.M23]*a[l.M30]-a[l.M13]*a[l.M20]*a[l.M32]+a[l.M10]*a[l.M23]*a[l.M32]+a[l.M12]*a[l.M20]*a[l.M33]-a[l.M10]*a[l.M22]*a[l.M33],m[l.M11]=a[l.M02]*a[l.M23]*a[l.M30]-a[l.M03]*a[l.M22]*a[l.M30]+a[l.M03]*a[l.M20]*a[l.M32]-a[l.M00]*a[l.M23]*a[l.M32]-a[l.M02]*a[l.M20]*a[l.M33]+a[l.M00]*a[l.M22]*a[l.M33],m[l.M12]=a[l.M03]*a[l.M12]*a[l.M30]-a[l.M02]*a[l.M13]*a[l.M30]-a[l.M03]*a[l.M10]*a[l.M32]+a[l.M00]*a[l.M13]*a[l.M32]+a[l.M02]*a[l.M10]*a[l.M33]-a[l.M00]*a[l.M12]*a[l.M33],m[l.M13]=a[l.M02]*a[l.M13]*a[l.M20]-a[l.M03]*a[l.M12]*a[l.M20]+a[l.M03]*a[l.M10]*a[l.M22]-a[l.M00]*a[l.M13]*a[l.M22]-a[l.M02]*a[l.M10]*a[l.M23]+a[l.M00]*a[l.M12]*a[l.M23],m[l.M20]=a[l.M11]*a[l.M23]*a[l.M30]-a[l.M13]*a[l.M21]*a[l.M30]+a[l.M13]*a[l.M20]*a[l.M31]-a[l.M10]*a[l.M23]*a[l.M31]-a[l.M11]*a[l.M20]*a[l.M33]+a[l.M10]*a[l.M21]*a[l.M33],m[l.M21]=a[l.M03]*a[l.M21]*a[l.M30]-a[l.M01]*a[l.M23]*a[l.M30]-a[l.M03]*a[l.M20]*a[l.M31]+a[l.M00]*a[l.M23]*a[l.M31]+a[l.M01]*a[l.M20]*a[l.M33]-a[l.M00]*a[l.M21]*a[l.M33],m[l.M22]=a[l.M01]*a[l.M13]*a[l.M30]-a[l.M03]*a[l.M11]*a[l.M30]+a[l.M03]*a[l.M10]*a[l.M31]-a[l.M00]*a[l.M13]*a[l.M31]-a[l.M01]*a[l.M10]*a[l.M33]+a[l.M00]*a[l.M11]*a[l.M33],m[l.M23]=a[l.M03]*a[l.M11]*a[l.M20]-a[l.M01]*a[l.M13]*a[l.M20]-a[l.M03]*a[l.M10]*a[l.M21]+a[l.M00]*a[l.M13]*a[l.M21]+a[l.M01]*a[l.M10]*a[l.M23]-a[l.M00]*a[l.M11]*a[l.M23],m[l.M30]=a[l.M12]*a[l.M21]*a[l.M30]-a[l.M11]*a[l.M22]*a[l.M30]-a[l.M12]*a[l.M20]*a[l.M31]+a[l.M10]*a[l.M22]*a[l.M31]+a[l.M11]*a[l.M20]*a[l.M32]-a[l.M10]*a[l.M21]*a[l.M32],m[l.M31]=a[l.M01]*a[l.M22]*a[l.M30]-a[l.M02]*a[l.M21]*a[l.M30]+a[l.M02]*a[l.M20]*a[l.M31]-a[l.M00]*a[l.M22]*a[l.M31]-a[l.M01]*a[l.M20]*a[l.M32]+a[l.M00]*a[l.M21]*a[l.M32],m[l.M32]=a[l.M02]*a[l.M11]*a[l.M30]-a[l.M01]*a[l.M12]*a[l.M30]-a[l.M02]*a[l.M10]*a[l.M31]+a[l.M00]*a[l.M12]*a[l.M31]+a[l.M01]*a[l.M10]*a[l.M32]-a[l.M00]*a[l.M11]*a[l.M32],m[l.M33]=a[l.M01]*a[l.M12]*a[l.M20]-a[l.M02]*a[l.M11]*a[l.M20]+a[l.M02]*a[l.M10]*a[l.M21]-a[l.M00]*a[l.M12]*a[l.M21]-a[l.M01]*a[l.M10]*a[l.M22]+a[l.M00]*a[l.M11]*a[l.M22],a[l.M00]=m[l.M00]*A,a[l.M01]=m[l.M01]*A,a[l.M02]=m[l.M02]*A,a[l.M03]=m[l.M03]*A,a[l.M10]=m[l.M10]*A,a[l.M11]=m[l.M11]*A,a[l.M12]=m[l.M12]*A,a[l.M13]=m[l.M13]*A,a[l.M20]=m[l.M20]*A,a[l.M21]=m[l.M21]*A,a[l.M22]=m[l.M22]*A,a[l.M23]=m[l.M23]*A,a[l.M30]=m[l.M30]*A,a[l.M31]=m[l.M31]*A,a[l.M32]=m[l.M32]*A,a[l.M33]=m[l.M33]*A,this},y.prototype.determinant=function(){var a=this.values;return a[l.M30]*a[l.M21]*a[l.M12]*a[l.M03]-a[l.M20]*a[l.M31]*a[l.M12]*a[l.M03]-a[l.M30]*a[l.M11]*a[l.M22]*a[l.M03]+a[l.M10]*a[l.M31]*a[l.M22]*a[l.M03]+a[l.M20]*a[l.M11]*a[l.M32]*a[l.M03]-a[l.M10]*a[l.M21]*a[l.M32]*a[l.M03]-a[l.M30]*a[l.M21]*a[l.M02]*a[l.M13]+a[l.M20]*a[l.M31]*a[l.M02]*a[l.M13]+a[l.M30]*a[l.M01]*a[l.M22]*a[l.M13]-a[l.M00]*a[l.M31]*a[l.M22]*a[l.M13]-a[l.M20]*a[l.M01]*a[l.M32]*a[l.M13]+a[l.M00]*a[l.M21]*a[l.M32]*a[l.M13]+a[l.M30]*a[l.M11]*a[l.M02]*a[l.M23]-a[l.M10]*a[l.M31]*a[l.M02]*a[l.M23]-a[l.M30]*a[l.M01]*a[l.M12]*a[l.M23]+a[l.M00]*a[l.M31]*a[l.M12]*a[l.M23]+a[l.M10]*a[l.M01]*a[l.M32]*a[l.M23]-a[l.M00]*a[l.M11]*a[l.M32]*a[l.M23]-a[l.M20]*a[l.M11]*a[l.M02]*a[l.M33]+a[l.M10]*a[l.M21]*a[l.M02]*a[l.M33]+a[l.M20]*a[l.M01]*a[l.M12]*a[l.M33]-a[l.M00]*a[l.M21]*a[l.M12]*a[l.M33]-a[l.M10]*a[l.M01]*a[l.M22]*a[l.M33]+a[l.M00]*a[l.M11]*a[l.M22]*a[l.M33]},y.prototype.translate=function(a,m,u){var A=this.values;return A[l.M03]+=a,A[l.M13]+=m,A[l.M23]+=u,this},y.prototype.copy=function(){return new y().set(this.values)},y.prototype.projection=function(a,m,u,A){this.identity();var S=1/Math.tan(u*(Math.PI/180)/2),O=(m+a)/(a-m),T=2*m*a/(a-m),N=this.values;return N[l.M00]=S/A,N[l.M10]=0,N[l.M20]=0,N[l.M30]=0,N[l.M01]=0,N[l.M11]=S,N[l.M21]=0,N[l.M31]=0,N[l.M02]=0,N[l.M12]=0,N[l.M22]=O,N[l.M32]=-1,N[l.M03]=0,N[l.M13]=0,N[l.M23]=T,N[l.M33]=0,this},y.prototype.ortho2d=function(a,m,u,A){return this.ortho(a,a+u,m,m+A,0,1)},y.prototype.ortho=function(a,m,u,A,S,O){this.identity();var T=2/(m-a),N=2/(A-u),P=-2/(O-S),E=-(m+a)/(m-a),D=-(A+u)/(A-u),q=-(O+S)/(O-S),$=this.values;return $[l.M00]=T,$[l.M10]=0,$[l.M20]=0,$[l.M30]=0,$[l.M01]=0,$[l.M11]=N,$[l.M21]=0,$[l.M31]=0,$[l.M02]=0,$[l.M12]=0,$[l.M22]=P,$[l.M32]=0,$[l.M03]=E,$[l.M13]=D,$[l.M23]=q,$[l.M33]=1,this},y.prototype.multiply=function(a){var m=this.temp,u=this.values,A=a.values;return m[l.M00]=u[l.M00]*A[l.M00]+u[l.M01]*A[l.M10]+u[l.M02]*A[l.M20]+u[l.M03]*A[l.M30],m[l.M01]=u[l.M00]*A[l.M01]+u[l.M01]*A[l.M11]+u[l.M02]*A[l.M21]+u[l.M03]*A[l.M31],m[l.M02]=u[l.M00]*A[l.M02]+u[l.M01]*A[l.M12]+u[l.M02]*A[l.M22]+u[l.M03]*A[l.M32],m[l.M03]=u[l.M00]*A[l.M03]+u[l.M01]*A[l.M13]+u[l.M02]*A[l.M23]+u[l.M03]*A[l.M33],m[l.M10]=u[l.M10]*A[l.M00]+u[l.M11]*A[l.M10]+u[l.M12]*A[l.M20]+u[l.M13]*A[l.M30],m[l.M11]=u[l.M10]*A[l.M01]+u[l.M11]*A[l.M11]+u[l.M12]*A[l.M21]+u[l.M13]*A[l.M31],m[l.M12]=u[l.M10]*A[l.M02]+u[l.M11]*A[l.M12]+u[l.M12]*A[l.M22]+u[l.M13]*A[l.M32],m[l.M13]=u[l.M10]*A[l.M03]+u[l.M11]*A[l.M13]+u[l.M12]*A[l.M23]+u[l.M13]*A[l.M33],m[l.M20]=u[l.M20]*A[l.M00]+u[l.M21]*A[l.M10]+u[l.M22]*A[l.M20]+u[l.M23]*A[l.M30],m[l.M21]=u[l.M20]*A[l.M01]+u[l.M21]*A[l.M11]+u[l.M22]*A[l.M21]+u[l.M23]*A[l.M31],m[l.M22]=u[l.M20]*A[l.M02]+u[l.M21]*A[l.M12]+u[l.M22]*A[l.M22]+u[l.M23]*A[l.M32],m[l.M23]=u[l.M20]*A[l.M03]+u[l.M21]*A[l.M13]+u[l.M22]*A[l.M23]+u[l.M23]*A[l.M33],m[l.M30]=u[l.M30]*A[l.M00]+u[l.M31]*A[l.M10]+u[l.M32]*A[l.M20]+u[l.M33]*A[l.M30],m[l.M31]=u[l.M30]*A[l.M01]+u[l.M31]*A[l.M11]+u[l.M32]*A[l.M21]+u[l.M33]*A[l.M31],m[l.M32]=u[l.M30]*A[l.M02]+u[l.M31]*A[l.M12]+u[l.M32]*A[l.M22]+u[l.M33]*A[l.M32],m[l.M33]=u[l.M30]*A[l.M03]+u[l.M31]*A[l.M13]+u[l.M32]*A[l.M23]+u[l.M33]*A[l.M33],this.set(this.temp)},y.prototype.multiplyLeft=function(a){var m=this.temp,u=this.values,A=a.values;return m[l.M00]=A[l.M00]*u[l.M00]+A[l.M01]*u[l.M10]+A[l.M02]*u[l.M20]+A[l.M03]*u[l.M30],m[l.M01]=A[l.M00]*u[l.M01]+A[l.M01]*u[l.M11]+A[l.M02]*u[l.M21]+A[l.M03]*u[l.M31],m[l.M02]=A[l.M00]*u[l.M02]+A[l.M01]*u[l.M12]+A[l.M02]*u[l.M22]+A[l.M03]*u[l.M32],m[l.M03]=A[l.M00]*u[l.M03]+A[l.M01]*u[l.M13]+A[l.M02]*u[l.M23]+A[l.M03]*u[l.M33],m[l.M10]=A[l.M10]*u[l.M00]+A[l.M11]*u[l.M10]+A[l.M12]*u[l.M20]+A[l.M13]*u[l.M30],m[l.M11]=A[l.M10]*u[l.M01]+A[l.M11]*u[l.M11]+A[l.M12]*u[l.M21]+A[l.M13]*u[l.M31],m[l.M12]=A[l.M10]*u[l.M02]+A[l.M11]*u[l.M12]+A[l.M12]*u[l.M22]+A[l.M13]*u[l.M32],m[l.M13]=A[l.M10]*u[l.M03]+A[l.M11]*u[l.M13]+A[l.M12]*u[l.M23]+A[l.M13]*u[l.M33],m[l.M20]=A[l.M20]*u[l.M00]+A[l.M21]*u[l.M10]+A[l.M22]*u[l.M20]+A[l.M23]*u[l.M30],m[l.M21]=A[l.M20]*u[l.M01]+A[l.M21]*u[l.M11]+A[l.M22]*u[l.M21]+A[l.M23]*u[l.M31],m[l.M22]=A[l.M20]*u[l.M02]+A[l.M21]*u[l.M12]+A[l.M22]*u[l.M22]+A[l.M23]*u[l.M32],m[l.M23]=A[l.M20]*u[l.M03]+A[l.M21]*u[l.M13]+A[l.M22]*u[l.M23]+A[l.M23]*u[l.M33],m[l.M30]=A[l.M30]*u[l.M00]+A[l.M31]*u[l.M10]+A[l.M32]*u[l.M20]+A[l.M33]*u[l.M30],m[l.M31]=A[l.M30]*u[l.M01]+A[l.M31]*u[l.M11]+A[l.M32]*u[l.M21]+A[l.M33]*u[l.M31],m[l.M32]=A[l.M30]*u[l.M02]+A[l.M31]*u[l.M12]+A[l.M32]*u[l.M22]+A[l.M33]*u[l.M32],m[l.M33]=A[l.M30]*u[l.M03]+A[l.M31]*u[l.M13]+A[l.M32]*u[l.M23]+A[l.M33]*u[l.M33],this.set(this.temp)},y.prototype.lookAt=function(a,m,u){y.initTemps();var A=y.xAxis,S=y.yAxis,O=y.zAxis;O.setFrom(m).normalize(),A.setFrom(m).normalize(),A.cross(u).normalize(),S.setFrom(A).cross(O).normalize(),this.identity();var T=this.values;return T[l.M00]=A.x,T[l.M01]=A.y,T[l.M02]=A.z,T[l.M10]=S.x,T[l.M11]=S.y,T[l.M12]=S.z,T[l.M20]=-O.x,T[l.M21]=-O.y,T[l.M22]=-O.z,y.tmpMatrix.identity(),y.tmpMatrix.values[l.M03]=-a.x,y.tmpMatrix.values[l.M13]=-a.y,y.tmpMatrix.values[l.M23]=-a.z,this.multiply(y.tmpMatrix),this},y.initTemps=function(){y.xAxis===null&&(y.xAxis=new l.Vector3),y.yAxis===null&&(y.yAxis=new l.Vector3),y.zAxis===null&&(y.zAxis=new l.Vector3);},y.xAxis=null,y.yAxis=null,y.zAxis=null,y.tmpMatrix=new y,y})();l.Matrix4=R;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function T(N,P,E,D){this.attributes=P,this.verticesLength=0,this.dirtyVertices=false,this.indicesLength=0,this.dirtyIndices=false,this.elementsPerVertex=0,this.context=N instanceof l.ManagedWebGLRenderingContext?N:new l.ManagedWebGLRenderingContext(N),this.elementsPerVertex=0;for(var q=0;q<P.length;q++)this.elementsPerVertex+=P[q].numElements;this.vertices=new Float32Array(E*this.elementsPerVertex),this.indices=new Uint16Array(D),this.context.addRestorable(this);}return T.prototype.getAttributes=function(){return this.attributes},T.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},T.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},T.prototype.setVerticesLength=function(N){this.dirtyVertices=true,this.verticesLength=N;},T.prototype.getVertices=function(){return this.vertices},T.prototype.maxIndices=function(){return this.indices.length},T.prototype.numIndices=function(){return this.indicesLength},T.prototype.setIndicesLength=function(N){this.dirtyIndices=true,this.indicesLength=N;},T.prototype.getIndices=function(){return this.indices},T.prototype.getVertexSizeInFloats=function(){for(var N=0,P=0;P<this.attributes.length;P++){N+=this.attributes[P].numElements;}return N},T.prototype.setVertices=function(N){if(this.dirtyVertices=true,N.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(N,0),this.verticesLength=N.length;},T.prototype.setIndices=function(N){if(this.dirtyIndices=true,N.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(N,0),this.indicesLength=N.length;},T.prototype.draw=function(N,P){this.drawWithOffset(N,P,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex);},T.prototype.drawWithOffset=function(N,P,E,D){var q=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(N),this.indicesLength>0?q.drawElements(P,D,q.UNSIGNED_SHORT,2*E):q.drawArrays(P,E,D),this.unbind(N);},T.prototype.bind=function(N){var P=this.context.gl;P.bindBuffer(P.ARRAY_BUFFER,this.verticesBuffer);for(var E=0,D=0;D<this.attributes.length;D++){var q=this.attributes[D],$=N.getAttributeLocation(q.name);P.enableVertexAttribArray($),P.vertexAttribPointer($,q.numElements,P.FLOAT,false,4*this.elementsPerVertex,4*E),E+=q.numElements;}this.indicesLength>0&&P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);},T.prototype.unbind=function(N){for(var P=this.context.gl,E=0;E<this.attributes.length;E++){var D=this.attributes[E],q=N.getAttributeLocation(D.name);P.disableVertexAttribArray(q);}P.bindBuffer(P.ARRAY_BUFFER,null),this.indicesLength>0&&P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null);},T.prototype.update=function(){var N=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=N.createBuffer()),N.bindBuffer(N.ARRAY_BUFFER,this.verticesBuffer),N.bufferData(N.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),N.DYNAMIC_DRAW),this.dirtyVertices=false),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=N.createBuffer()),N.bindBuffer(N.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),N.bufferData(N.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),N.DYNAMIC_DRAW),this.dirtyIndices=false);},T.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update();},T.prototype.dispose=function(){this.context.removeRestorable(this);var N=this.context.gl;N.deleteBuffer(this.verticesBuffer),N.deleteBuffer(this.indicesBuffer);},T})();l.Mesh=R;var y=(function(){function T(N,P,E){this.name=N,this.type=P,this.numElements=E;}return T})();l.VertexAttribute=y;var a=(function(T){function N(){return T.call(this,l.Shader.POSITION,O.Float,2)||this}return Be(N,T),N})(y);l.Position2Attribute=a;var m=(function(T){function N(){return T.call(this,l.Shader.POSITION,O.Float,3)||this}return Be(N,T),N})(y);l.Position3Attribute=m;var u=(function(T){function N(P){return P===void 0&&(P=0),T.call(this,l.Shader.TEXCOORDS+(P==0?"":P),O.Float,2)||this}return Be(N,T),N})(y);l.TexCoordAttribute=u;var A=(function(T){function N(){return T.call(this,l.Shader.COLOR,O.Float,4)||this}return Be(N,T),N})(y);l.ColorAttribute=A;var S=(function(T){function N(){return T.call(this,l.Shader.COLOR2,O.Float,4)||this}return Be(N,T),N})(y),O;l.Color2Attribute=S,(function(T){T[T.Float=0]="Float";})(O=l.VertexAttributeType||(l.VertexAttributeType={}));})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function y(a,m,u){if(m===void 0&&(m=true),u===void 0&&(u=10920),this.isDrawing=false,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,u>10920)throw new Error("Can't have more than 10920 triangles per batch: "+u);this.context=a instanceof l.ManagedWebGLRenderingContext?a:new l.ManagedWebGLRenderingContext(a);var A=m?[new l.Position2Attribute,new l.ColorAttribute,new l.TexCoordAttribute,new l.Color2Attribute]:[new l.Position2Attribute,new l.ColorAttribute,new l.TexCoordAttribute];this.mesh=new l.Mesh(a,A,u,3*u),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA;}return y.prototype.begin=function(a){var m=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=a,this.lastTexture=null,this.isDrawing=true,m.enable(m.BLEND),m.blendFunc(this.srcBlend,this.dstBlend);},y.prototype.setBlendMode=function(a,m){var u=this.context.gl;this.srcBlend=a,this.dstBlend=m,this.isDrawing&&(this.flush(),u.blendFunc(this.srcBlend,this.dstBlend));},y.prototype.draw=function(a,m,u){a!=this.lastTexture?(this.flush(),this.lastTexture=a):(this.verticesLength+m.length>this.mesh.getVertices().length||this.indicesLength+u.length>this.mesh.getIndices().length)&&this.flush();var A=this.mesh.numVertices();this.mesh.getVertices().set(m,this.verticesLength),this.verticesLength+=m.length,this.mesh.setVerticesLength(this.verticesLength);for(var S=this.mesh.getIndices(),O=this.indicesLength,T=0;T<u.length;O++,T++)S[O]=u[T]+A;this.indicesLength+=u.length,this.mesh.setIndicesLength(this.indicesLength);},y.prototype.flush=function(){var a=this.context.gl;this.verticesLength!=0&&(this.lastTexture.bind(),this.mesh.draw(this.shader,a.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++);},y.prototype.end=function(){var a=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=false,a.disable(a.BLEND);},y.prototype.getDrawCalls=function(){return this.drawCalls},y.prototype.dispose=function(){this.mesh.dispose();},y})();l.PolygonBatcher=R;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function a(m,u,A){A===void 0&&(A=true),this.twoColorTint=false,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new L.Color(1,1,1,1),this.canvas=m,this.context=u instanceof l.ManagedWebGLRenderingContext?u:new l.ManagedWebGLRenderingContext(u),this.twoColorTint=A,this.camera=new l.OrthoCamera(m.width,m.height),this.batcherShader=A?l.Shader.newTwoColoredTextured(this.context):l.Shader.newColoredTextured(this.context),this.batcher=new l.PolygonBatcher(this.context,A),this.shapesShader=l.Shader.newColored(this.context),this.shapes=new l.ShapeRenderer(this.context),this.skeletonRenderer=new l.SkeletonRenderer(this.context,A),this.skeletonDebugRenderer=new l.SkeletonDebugRenderer(this.context);}return a.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher);},a.prototype.drawSkeleton=function(m,u,A,S){u===void 0&&(u=false),A===void 0&&(A=-1),S===void 0&&(S=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=u,this.skeletonRenderer.draw(this.batcher,Skeleton,A,S);},a.prototype.drawSkeletonDebug=function(m,u,A){u===void 0&&(u=false),A===void 0&&(A=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=u,this.skeletonDebugRenderer.draw(this.shapes,Skeleton,A);},a.prototype.drawTexture=function(m,u,A,S,O,T){T===void 0&&(T=null),this.enableRenderer(this.batcher),T===null&&(T=this.WHITE);var N=this.QUAD,P=0;N[P++]=u,N[P++]=A,N[P++]=T.r,N[P++]=T.g,N[P++]=T.b,N[P++]=T.a,N[P++]=0,N[P++]=1,this.twoColorTint&&(N[P++]=0,N[P++]=0,N[P++]=0,N[P++]=0),N[P++]=u+S,N[P++]=A,N[P++]=T.r,N[P++]=T.g,N[P++]=T.b,N[P++]=T.a,N[P++]=1,N[P++]=1,this.twoColorTint&&(N[P++]=0,N[P++]=0,N[P++]=0,N[P++]=0),N[P++]=u+S,N[P++]=A+O,N[P++]=T.r,N[P++]=T.g,N[P++]=T.b,N[P++]=T.a,N[P++]=1,N[P++]=0,this.twoColorTint&&(N[P++]=0,N[P++]=0,N[P++]=0,N[P++]=0),N[P++]=u,N[P++]=A+O,N[P++]=T.r,N[P++]=T.g,N[P++]=T.b,N[P++]=T.a,N[P++]=0,N[P++]=0,this.twoColorTint&&(N[P++]=0,N[P++]=0,N[P++]=0,N[P++]=0),this.batcher.draw(m,N,this.QUAD_TRIANGLES);},a.prototype.drawTextureUV=function(m,u,A,S,O,T,N,P,E,D){D===void 0&&(D=null),this.enableRenderer(this.batcher),D===null&&(D=this.WHITE);var q=this.QUAD,$=0;q[$++]=u,q[$++]=A,q[$++]=D.r,q[$++]=D.g,q[$++]=D.b,q[$++]=D.a,q[$++]=T,q[$++]=N,this.twoColorTint&&(q[$++]=0,q[$++]=0,q[$++]=0,q[$++]=0),q[$++]=u+S,q[$++]=A,q[$++]=D.r,q[$++]=D.g,q[$++]=D.b,q[$++]=D.a,q[$++]=P,q[$++]=N,this.twoColorTint&&(q[$++]=0,q[$++]=0,q[$++]=0,q[$++]=0),q[$++]=u+S,q[$++]=A+O,q[$++]=D.r,q[$++]=D.g,q[$++]=D.b,q[$++]=D.a,q[$++]=P,q[$++]=E,this.twoColorTint&&(q[$++]=0,q[$++]=0,q[$++]=0,q[$++]=0),q[$++]=u,q[$++]=A+O,q[$++]=D.r,q[$++]=D.g,q[$++]=D.b,q[$++]=D.a,q[$++]=T,q[$++]=E,this.twoColorTint&&(q[$++]=0,q[$++]=0,q[$++]=0,q[$++]=0),this.batcher.draw(m,q,this.QUAD_TRIANGLES);},a.prototype.drawTextureRotated=function(m,u,A,S,O,T,N,P,E,D){E===void 0&&(E=null),this.enableRenderer(this.batcher),E===null&&(E=this.WHITE);var q=this.QUAD,$=u+T,it=A+N,vt=-T,lt=-N,dt=S-T,st=O-N,G=vt,et=lt,ct=vt,rt=st,Tt=dt,ht=st,ut=dt,Rt=lt,at=0,_=0,ot=0,xt=0,Mt=0,Xt=0,Dt=0,Lt=0;if(P!=0){var Bt=L.MathUtils.cosDeg(P),Gt=L.MathUtils.sinDeg(P);ot=(Mt=Bt*Tt-Gt*ht)+((at=Bt*G-Gt*et)-(Dt=Bt*ct-Gt*rt)),xt=(Xt=Gt*Tt+Bt*ht)+((_=Gt*G+Bt*et)-(Lt=Gt*ct+Bt*rt));}else at=G,_=et,Dt=ct,Lt=rt,Mt=Tt,Xt=ht,ot=ut,xt=Rt;at+=$,_+=it,ot+=$,xt+=it,Mt+=$,Xt+=it,Dt+=$,Lt+=it;var kt=0;q[kt++]=at,q[kt++]=_,q[kt++]=E.r,q[kt++]=E.g,q[kt++]=E.b,q[kt++]=E.a,q[kt++]=0,q[kt++]=1,this.twoColorTint&&(q[kt++]=0,q[kt++]=0,q[kt++]=0,q[kt++]=0),q[kt++]=ot,q[kt++]=xt,q[kt++]=E.r,q[kt++]=E.g,q[kt++]=E.b,q[kt++]=E.a,q[kt++]=1,q[kt++]=1,this.twoColorTint&&(q[kt++]=0,q[kt++]=0,q[kt++]=0,q[kt++]=0),q[kt++]=Mt,q[kt++]=Xt,q[kt++]=E.r,q[kt++]=E.g,q[kt++]=E.b,q[kt++]=E.a,q[kt++]=1,q[kt++]=0,this.twoColorTint&&(q[kt++]=0,q[kt++]=0,q[kt++]=0,q[kt++]=0),q[kt++]=Dt,q[kt++]=Lt,q[kt++]=E.r,q[kt++]=E.g,q[kt++]=E.b,q[kt++]=E.a,q[kt++]=0,q[kt++]=0,this.twoColorTint&&(q[kt++]=0,q[kt++]=0,q[kt++]=0,q[kt++]=0),this.batcher.draw(m,q,this.QUAD_TRIANGLES);},a.prototype.drawRegion=function(m,u,A,S,O,T,N){T===void 0&&(T=null),this.enableRenderer(this.batcher),T===null&&(T=this.WHITE);var P=this.QUAD,E=0;P[E++]=u,P[E++]=A,P[E++]=T.r,P[E++]=T.g,P[E++]=T.b,P[E++]=T.a,P[E++]=m.u,P[E++]=m.v2,this.twoColorTint&&(P[E++]=0,P[E++]=0,P[E++]=0,P[E++]=0),P[E++]=u+S,P[E++]=A,P[E++]=T.r,P[E++]=T.g,P[E++]=T.b,P[E++]=T.a,P[E++]=m.u2,P[E++]=m.v2,this.twoColorTint&&(P[E++]=0,P[E++]=0,P[E++]=0,P[E++]=0),P[E++]=u+S,P[E++]=A+O,P[E++]=T.r,P[E++]=T.g,P[E++]=T.b,P[E++]=T.a,P[E++]=m.u2,P[E++]=m.v,this.twoColorTint&&(P[E++]=0,P[E++]=0,P[E++]=0,P[E++]=0),P[E++]=u,P[E++]=A+O,P[E++]=T.r,P[E++]=T.g,P[E++]=T.b,P[E++]=T.a,P[E++]=m.u,P[E++]=m.v,this.twoColorTint&&(P[E++]=0,P[E++]=0,P[E++]=0,P[E++]=0),this.batcher.draw(m.texture,P,this.QUAD_TRIANGLES);},a.prototype.line=function(m,u,A,S,O,T){O===void 0&&(O=null),this.enableRenderer(this.shapes),this.shapes.line(m,u,A,S,O);},a.prototype.triangle=function(m,u,A,S,O,T,N,P,E,D){P===void 0&&(P=null),E===void 0&&(E=null),D===void 0&&(D=null),this.enableRenderer(this.shapes),this.shapes.triangle(m,u,A,S,O,T,N,P,E,D);},a.prototype.quad=function(m,u,A,S,O,T,N,P,E,D,q,$,it){D===void 0&&(D=null),q===void 0&&(q=null),$===void 0&&($=null),it===void 0&&(it=null),this.enableRenderer(this.shapes),this.shapes.quad(m,u,A,S,O,T,N,P,E,D,q,$,it);},a.prototype.rect=function(m,u,A,S,O,T){T===void 0&&(T=null),this.enableRenderer(this.shapes),this.shapes.rect(m,u,A,S,O,T);},a.prototype.rectLine=function(m,u,A,S,O,T,N){N===void 0&&(N=null),this.enableRenderer(this.shapes),this.shapes.rectLine(m,u,A,S,O,T,N);},a.prototype.polygon=function(m,u,A,S){S===void 0&&(S=null),this.enableRenderer(this.shapes),this.shapes.polygon(m,u,A,S);},a.prototype.circle=function(m,u,A,S,O,T){O===void 0&&(O=null),T===void 0&&(T=0),this.enableRenderer(this.shapes),this.shapes.circle(m,u,A,S,O,T);},a.prototype.curve=function(m,u,A,S,O,T,N,P,E,D){D===void 0&&(D=null),this.enableRenderer(this.shapes),this.shapes.curve(m,u,A,S,O,T,N,P,E,D);},a.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null;},a.prototype.resize=function(m){var u=this.canvas,A=u.clientWidth,S=u.clientHeight;if(u.width==A&&u.height==S||(u.width=A,u.height=S),this.context.gl.viewport(0,0,u.width,u.height),m!==y.Stretch){if(m===y.Expand)this.camera.setViewport(A,S);else if(m===y.Fit){var O=u.width,T=u.height,N=this.camera.viewportWidth,P=this.camera.viewportHeight,q=P/N<T/O?N/O:P/T;this.camera.viewportWidth=O*q,this.camera.viewportHeight=T*q;}}this.camera.update();},a.prototype.enableRenderer=function(m){this.activeRenderer!==m&&(this.end(),m instanceof l.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(l.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):m instanceof l.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(l.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer);},a.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose();},a})(),y;l.SceneRenderer=R,(function(a){a[a.Stretch=0]="Stretch",a[a.Expand=1]="Expand",a[a.Fit=2]="Fit";})(y=l.ResizeMode||(l.ResizeMode={}));})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function y(a,m,u){this.vertexShader=m,this.fragmentShader=u,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=m,this.fsSource=u,this.context=a instanceof l.ManagedWebGLRenderingContext?a:new l.ManagedWebGLRenderingContext(a),this.context.addRestorable(this),this.compile();}return y.prototype.getProgram=function(){return this.program},y.prototype.getVertexShader=function(){return this.vertexShader},y.prototype.getFragmentShader=function(){return this.fragmentShader},y.prototype.getVertexShaderSource=function(){return this.vsSource},y.prototype.getFragmentSource=function(){return this.fsSource},y.prototype.compile=function(){var a=this.context.gl;try{this.vs=this.compileShader(a.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(a.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs);}catch(m){throw this.dispose(),m}},y.prototype.compileShader=function(a,m){var u=this.context.gl,A=u.createShader(a);if(u.shaderSource(A,m),u.compileShader(A),!u.getShaderParameter(A,u.COMPILE_STATUS)){var S="Couldn't compile shader: "+u.getShaderInfoLog(A);if(u.deleteShader(A),!u.isContextLost())throw new Error(S)}return A},y.prototype.compileProgram=function(a,m){var u=this.context.gl,A=u.createProgram();if(u.attachShader(A,a),u.attachShader(A,m),u.linkProgram(A),!u.getProgramParameter(A,u.LINK_STATUS)){var S="Couldn't compile shader program: "+u.getProgramInfoLog(A);if(u.deleteProgram(A),!u.isContextLost())throw new Error(S)}return A},y.prototype.restore=function(){this.compile();},y.prototype.bind=function(){this.context.gl.useProgram(this.program);},y.prototype.unbind=function(){this.context.gl.useProgram(null);},y.prototype.setUniformi=function(a,m){this.context.gl.uniform1i(this.getUniformLocation(a),m);},y.prototype.setUniformf=function(a,m){this.context.gl.uniform1f(this.getUniformLocation(a),m);},y.prototype.setUniform2f=function(a,m,u){this.context.gl.uniform2f(this.getUniformLocation(a),m,u);},y.prototype.setUniform3f=function(a,m,u,A){this.context.gl.uniform3f(this.getUniformLocation(a),m,u,A);},y.prototype.setUniform4f=function(a,m,u,A,S){this.context.gl.uniform4f(this.getUniformLocation(a),m,u,A,S);},y.prototype.setUniform2x2f=function(a,m){var u=this.context.gl;this.tmp2x2.set(m),u.uniformMatrix2fv(this.getUniformLocation(a),false,this.tmp2x2);},y.prototype.setUniform3x3f=function(a,m){var u=this.context.gl;this.tmp3x3.set(m),u.uniformMatrix3fv(this.getUniformLocation(a),false,this.tmp3x3);},y.prototype.setUniform4x4f=function(a,m){var u=this.context.gl;this.tmp4x4.set(m),u.uniformMatrix4fv(this.getUniformLocation(a),false,this.tmp4x4);},y.prototype.getUniformLocation=function(a){var m=this.context.gl,u=m.getUniformLocation(this.program,a);if(!u&&!m.isContextLost())throw new Error("Couldn't find location for uniform "+a);return u},y.prototype.getAttributeLocation=function(a){var m=this.context.gl,u=m.getAttribLocation(this.program,a);if(u==-1&&!m.isContextLost())throw new Error("Couldn't find location for attribute "+a);return u},y.prototype.dispose=function(){this.context.removeRestorable(this);var a=this.context.gl;this.vs&&(a.deleteShader(this.vs),this.vs=null),this.fs&&(a.deleteShader(this.fs),this.fs=null),this.program&&(a.deleteProgram(this.program),this.program=null);},y.newColoredTextured=function(a){return new y(a,`
				attribute vec4 `+y.POSITION+`;
				attribute vec4 `+y.COLOR+`;
				attribute vec2 `+y.TEXCOORDS+`;
				uniform mat4 `+y.MVP_MATRIX+`;
				varying vec4 v_color;
				varying vec2 v_texCoords;

				void main () {
					v_color = `+y.COLOR+`;
					v_texCoords = `+y.TEXCOORDS+`;
					gl_Position = `+y.MVP_MATRIX+" * "+y.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
				}
			`)},y.newTwoColoredTextured=function(a){return new y(a,`
				attribute vec4 `+y.POSITION+`;
				attribute vec4 `+y.COLOR+`;
				attribute vec4 `+y.COLOR2+`;
				attribute vec2 `+y.TEXCOORDS+`;
				uniform mat4 `+y.MVP_MATRIX+`;
				varying vec4 v_light;
				varying vec4 v_dark;
				varying vec2 v_texCoords;

				void main () {
					v_light = `+y.COLOR+`;
					v_dark = `+y.COLOR2+`;
					v_texCoords = `+y.TEXCOORDS+`;
					gl_Position = `+y.MVP_MATRIX+" * "+y.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_light;
				varying LOWP vec4 v_dark;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					vec4 texColor = texture2D(u_texture, v_texCoords);
					gl_FragColor.a = texColor.a * v_light.a;
					gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
				}
			`)},y.newColored=function(a){return new y(a,`
				attribute vec4 `+y.POSITION+`;
				attribute vec4 `+y.COLOR+`;
				uniform mat4 `+y.MVP_MATRIX+`;
				varying vec4 v_color;

				void main () {
					v_color = `+y.COLOR+`;
					gl_Position = `+y.MVP_MATRIX+" * "+y.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;

				void main () {
					gl_FragColor = v_color;
				}
			`)},y.MVP_MATRIX="u_projTrans",y.POSITION="a_position",y.COLOR="a_color",y.COLOR2="a_color2",y.TEXCOORDS="a_texCoords",y.SAMPLER="u_texture",y})();l.Shader=R;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function a(m,u){if(u===void 0&&(u=10920),this.isDrawing=false,this.shapeType=y.Filled,this.color=new L.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new L.Vector2,u>10920)throw new Error("Can't have more than 10920 triangles per batch: "+u);this.context=m instanceof l.ManagedWebGLRenderingContext?m:new l.ManagedWebGLRenderingContext(m),this.mesh=new l.Mesh(m,[new l.Position2Attribute,new l.ColorAttribute],u,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA;}return a.prototype.begin=function(m){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=m,this.vertexIndex=0,this.isDrawing=true;var u=this.context.gl;u.enable(u.BLEND),u.blendFunc(this.srcBlend,this.dstBlend);},a.prototype.setBlendMode=function(m,u){var A=this.context.gl;this.srcBlend=m,this.dstBlend=u,this.isDrawing&&(this.flush(),A.blendFunc(this.srcBlend,this.dstBlend));},a.prototype.setColor=function(m){this.color.setFromColor(m);},a.prototype.setColorWith=function(m,u,A,S){this.color.set(m,u,A,S);},a.prototype.point=function(m,u,A){A===void 0&&(A=null),this.check(y.Point,1),A===null&&(A=this.color),this.vertex(m,u,A);},a.prototype.line=function(m,u,A,S,O){O===void 0&&(O=null),this.check(y.Line,2);this.mesh.getVertices();this.vertexIndex;O===null&&(O=this.color),this.vertex(m,u,O),this.vertex(A,S,O);},a.prototype.triangle=function(m,u,A,S,O,T,N,P,E,D){P===void 0&&(P=null),E===void 0&&(E=null),D===void 0&&(D=null),this.check(m?y.Filled:y.Line,3);this.mesh.getVertices();this.vertexIndex;P===null&&(P=this.color),E===null&&(E=this.color),D===null&&(D=this.color),m?(this.vertex(u,A,P),this.vertex(S,O,E),this.vertex(T,N,D)):(this.vertex(u,A,P),this.vertex(S,O,E),this.vertex(S,O,P),this.vertex(T,N,E),this.vertex(T,N,P),this.vertex(u,A,E));},a.prototype.quad=function(m,u,A,S,O,T,N,P,E,D,q,$,it){D===void 0&&(D=null),q===void 0&&(q=null),$===void 0&&($=null),it===void 0&&(it=null),this.check(m?y.Filled:y.Line,3);this.mesh.getVertices();this.vertexIndex;D===null&&(D=this.color),q===null&&(q=this.color),$===null&&($=this.color),it===null&&(it=this.color),m?(this.vertex(u,A,D),this.vertex(S,O,q),this.vertex(T,N,$),this.vertex(T,N,$),this.vertex(P,E,it),this.vertex(u,A,D)):(this.vertex(u,A,D),this.vertex(S,O,q),this.vertex(S,O,q),this.vertex(T,N,$),this.vertex(T,N,$),this.vertex(P,E,it),this.vertex(P,E,it),this.vertex(u,A,D));},a.prototype.rect=function(m,u,A,S,O,T){T===void 0&&(T=null),this.quad(m,u,A,u+S,A,u+S,A+O,u,A+O,T,T,T,T);},a.prototype.rectLine=function(m,u,A,S,O,T,N){N===void 0&&(N=null),this.check(m?y.Filled:y.Line,8),N===null&&(N=this.color);var P=this.tmp.set(O-A,u-S);P.normalize(),T*=.5;var E=P.x*T,D=P.y*T;m?(this.vertex(u+E,A+D,N),this.vertex(u-E,A-D,N),this.vertex(S+E,O+D,N),this.vertex(S-E,O-D,N),this.vertex(S+E,O+D,N),this.vertex(u-E,A-D,N)):(this.vertex(u+E,A+D,N),this.vertex(u-E,A-D,N),this.vertex(S+E,O+D,N),this.vertex(S-E,O-D,N),this.vertex(S+E,O+D,N),this.vertex(u+E,A+D,N),this.vertex(S-E,O-D,N),this.vertex(u-E,A-D,N));},a.prototype.x=function(m,u,A){this.line(m-A,u-A,m+A,u+A),this.line(m-A,u+A,m+A,u-A);},a.prototype.polygon=function(m,u,A,S){if(S===void 0&&(S=null),A<3)throw new Error("Polygon must contain at least 3 vertices");this.check(y.Line,2*A),S===null&&(S=this.color);this.mesh.getVertices();this.vertexIndex;A<<=1;for(var N=m[u<<=1],P=m[u+1],E=u+A,D=u,q=u+A-2;D<q;D+=2){var $=m[D],it=m[D+1],vt=0,lt=0;D+2>=E?(vt=N,lt=P):(vt=m[D+2],lt=m[D+3]),this.vertex($,it,S),this.vertex(vt,lt,S);}},a.prototype.circle=function(m,u,A,S,O,T){if(O===void 0&&(O=null),T===void 0&&(T=0),T===0&&(T=Math.max(1,6*L.MathUtils.cbrt(S)|0)),T<=0)throw new Error("segments must be > 0.");O===null&&(O=this.color);var N=2*L.MathUtils.PI/T,P=Math.cos(N),E=Math.sin(N),D=S,q=0;if(m){this.check(y.Filled,3*T+3),T--;for(var $=0;$<T;$++){this.vertex(u,A,O),this.vertex(u+D,A+q,O);var it=D;D=P*D-E*q,q=E*it+P*q,this.vertex(u+D,A+q,O);}this.vertex(u,A,O),this.vertex(u+D,A+q,O);}else {this.check(y.Line,2*T+2);for(var $=0;$<T;$++){this.vertex(u+D,A+q,O);var vt=D;D=P*D-E*q,q=E*vt+P*q,this.vertex(u+D,A+q,O);}this.vertex(u+D,A+q,O);}D=S,q=0,this.vertex(u+D,A+q,O);},a.prototype.curve=function(m,u,A,S,O,T,N,P,E,D){D===void 0&&(D=null),this.check(y.Line,2*E+2),D===null&&(D=this.color);for(var q=1/E,$=q*q,it=q*q*q,vt=3*q,lt=3*$,dt=6*$,st=6*it,G=m-2*A+O,et=u-2*S+T,ct=3*(A-O)-m+N,rt=3*(S-T)-u+P,Tt=m,ht=u,ut=(A-m)*vt+G*lt+ct*it,Rt=(S-u)*vt+et*lt+rt*it,at=G*dt+ct*st,_=et*dt+rt*st,ot=ct*st,xt=rt*st;E-- >0;)this.vertex(Tt,ht,D),Tt+=ut,ht+=Rt,ut+=at,Rt+=_,at+=ot,_+=xt,this.vertex(Tt,ht,D);this.vertex(Tt,ht,D),this.vertex(N,P,D);},a.prototype.vertex=function(m,u,A){var S=this.vertexIndex,O=this.mesh.getVertices();O[S++]=m,O[S++]=u,O[S++]=A.r,O[S++]=A.g,O[S++]=A.b,O[S++]=A.a,this.vertexIndex=S;},a.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=false;},a.prototype.flush=function(){this.vertexIndex!=0&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0);},a.prototype.check=function(m,u){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==m){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<u))return;this.flush();}else this.flush(),this.shapeType=m;},a.prototype.dispose=function(){this.mesh.dispose();},a})(),y;l.ShapeRenderer=R,(function(a){a[a.Point=0]="Point",a[a.Line=1]="Line",a[a.Filled=4]="Filled";})(y=l.ShapeType||(l.ShapeType={}));})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function y(a){this.boneLineColor=new L.Color(1,0,0,1),this.boneOriginColor=new L.Color(0,1,0,1),this.attachmentLineColor=new L.Color(0,0,1,.5),this.triangleLineColor=new L.Color(1,.64,0,.5),this.pathColor=new L.Color().setFromString("FF7F00"),this.clipColor=new L.Color(.8,0,0,2),this.aabbColor=new L.Color(0,1,0,.5),this.drawBones=true,this.drawRegionAttachments=true,this.drawBoundingBoxes=true,this.drawMeshHull=true,this.drawMeshTriangles=true,this.drawPaths=true,this.drawSkeletonXY=false,this.drawClipping=true,this.premultipliedAlpha=false,this.scale=1,this.boneWidth=2,this.bounds=new L.SkeletonBounds,this.temp=new Array,this.vertices=L.Utils.newFloatArray(2048),this.context=a instanceof l.ManagedWebGLRenderingContext?a:new l.ManagedWebGLRenderingContext(a);}return y.prototype.draw=function(a,m,u){u===void 0&&(u=null);var A=m.x,S=m.y,O=this.context.gl,T=this.premultipliedAlpha?O.ONE:O.SRC_ALPHA;a.setBlendMode(T,O.ONE_MINUS_SRC_ALPHA);var N=m.bones;if(this.drawBones){a.setColor(this.boneLineColor);for(var P=0,E=N.length;P<E;P++){var D=N[P];if(!(u&&u.indexOf(D.data.name)>-1)&&D.parent!=null){var q=A+D.data.length*D.a+D.worldX,$=S+D.data.length*D.c+D.worldY;a.rectLine(true,A+D.worldX,S+D.worldY,q,$,this.boneWidth*this.scale);}}this.drawSkeletonXY&&a.x(skeletonX,S,4*this.scale);}if(this.drawRegionAttachments){a.setColor(this.attachmentLineColor);for(var it,P=0,E=(it=m.slots).length;P<E;P++){var vt,lt;if((lt=(vt=it[P]).getAttachment())instanceof L.RegionAttachment){var dt=lt,st=this.vertices;dt.computeWorldVertices(vt.bone,st,0,2),a.line(st[0],st[1],st[2],st[3]),a.line(st[2],st[3],st[4],st[5]),a.line(st[4],st[5],st[6],st[7]),a.line(st[6],st[7],st[0],st[1]);}}}if(this.drawMeshHull||this.drawMeshTriangles)for(var it,P=0,E=(it=m.slots).length;P<E;P++){var vt,lt;if((vt=it[P]).bone.active&&(lt=vt.getAttachment())instanceof L.MeshAttachment){var G=lt,st=this.vertices;G.computeWorldVertices(vt,0,G.worldVerticesLength,st,0,2);var et=G.triangles,ct=G.hullLength;if(this.drawMeshTriangles){a.setColor(this.triangleLineColor);for(var rt=0,Tt=et.length;rt<Tt;rt+=3){var ht=2*et[rt],ut=2*et[rt+1],Rt=2*et[rt+2];a.triangle(false,st[ht],st[ht+1],st[ut],st[ut+1],st[Rt],st[Rt+1]);}}if(this.drawMeshHull&&ct>0){a.setColor(this.attachmentLineColor);for(var at=st[(ct=2*(ct>>1))-2],_=st[ct-1],rt=0,Tt=ct;rt<Tt;rt+=2){var q=st[rt],$=st[rt+1];a.line(q,$,at,_),at=q,_=$;}}}}if(this.drawBoundingBoxes){var ot=this.bounds;ot.update(skeleton,true),a.setColor(this.aabbColor),a.rect(false,ot.minX,ot.minY,ot.getWidth(),ot.getHeight());for(var xt=ot.polygons,Mt=ot.boundingBoxes,P=0,E=xt.length;P<E;P++){var Xt=xt[P];a.setColor(Mt[P].color),a.polygon(Xt,0,Xt.length);}}if(this.drawPaths)for(var it,P=0,E=(it=m.slots).length;P<E;P++){var vt,lt;if((vt=it[P]).bone.active&&(lt=vt.getAttachment())instanceof L.PathAttachment){var Dt=lt,Tt=Dt.worldVerticesLength,Lt=this.temp=L.Utils.setArraySize(this.temp,Tt,0);Dt.computeWorldVertices(vt,0,Tt,Lt,0,2);var Bt=this.pathColor,Gt=Lt[2],kt=Lt[3],bt=0,wt=0;if(Dt.closed){a.setColor(Bt);var Qt=Lt[0],ie=Lt[1],Kt=Lt[Tt-2],Ae=Lt[Tt-1];bt=Lt[Tt-4],wt=Lt[Tt-3],a.curve(Gt,kt,Qt,ie,Kt,Ae,bt,wt,32),a.setColor(y.LIGHT_GRAY),a.line(Gt,kt,Qt,ie),a.line(bt,wt,Kt,Ae);}Tt-=4;for(var rt=4;rt<Tt;rt+=6){var Qt=Lt[rt],ie=Lt[rt+1],Kt=Lt[rt+2],Ae=Lt[rt+3];bt=Lt[rt+4],wt=Lt[rt+5],a.setColor(Bt),a.curve(Gt,kt,Qt,ie,Kt,Ae,bt,wt,32),a.setColor(y.LIGHT_GRAY),a.line(Gt,kt,Qt,ie),a.line(bt,wt,Kt,Ae),Gt=bt,kt=wt;}}}if(this.drawBones){a.setColor(this.boneOriginColor);for(var P=0,E=N.length;P<E;P++){var D=N[P];u&&u.indexOf(D.data.name)>-1||a.circle(true,A+D.worldX,S+D.worldY,3*this.scale,y.GREEN,8);}}if(this.drawClipping){var it=m.slots;a.setColor(this.clipColor);for(var P=0,E=it.length;P<E;P++){var vt,lt;if((vt=it[P]).bone.active&&(lt=vt.getAttachment())instanceof L.ClippingAttachment){var Le=lt,Tt=Le.worldVerticesLength,Lt=this.temp=L.Utils.setArraySize(this.temp,Tt,0);Le.computeWorldVertices(vt,0,Tt,Lt,0,2);for(var ye=0,Ye=Lt.length;ye<Ye;ye+=2){var q=Lt[ye],$=Lt[ye+1],bt=Lt[(ye+2)%Lt.length],wt=Lt[(ye+3)%Lt.length];a.line(q,$,bt,wt);}}}}},y.prototype.dispose=function(){},y.LIGHT_GRAY=new L.Color(.7529411764705882,.7529411764705882,.7529411764705882,1),y.GREEN=new L.Color(0,1,0,1),y})();l.SkeletonDebugRenderer=R;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function a(m,u,A){this.vertices=m,this.numVertices=u,this.numFloats=A;}return a})(),y=(function(){function a(m,u){u===void 0&&(u=true),this.premultipliedAlpha=false,this.vertexEffect=null,this.tempColor=new L.Color,this.tempColor2=new L.Color,this.vertexSize=8,this.twoColorTint=false,this.renderable=new R(null,0,0),this.clipper=new L.SkeletonClipping,this.temp=new L.Vector2,this.temp2=new L.Vector2,this.temp3=new L.Color,this.temp4=new L.Color,this.twoColorTint=u,u&&(this.vertexSize+=4),this.vertices=L.Utils.newFloatArray(1024*this.vertexSize);}return a.prototype.draw=function(m,u,A,S){A===void 0&&(A=-1),S===void 0&&(S=-1);var O=this.clipper,T=this.premultipliedAlpha,N=this.twoColorTint,P=null,E=this.temp,D=this.temp2,q=this.temp3,$=this.temp4,it=this.renderable,vt=null,lt=null,dt=u.drawOrder,st=null,G=u.color,et=N?12:8,ct=false;A==-1&&(ct=true);for(var rt=0,Tt=dt.length;rt<Tt;rt++){var ht=O.isClipping()?2:et,ut=dt[rt];if(ut.bone.active)if(A>=0&&A==ut.data.index&&(ct=true),ct){S>=0&&S==ut.data.index&&(ct=false);var Rt=ut.getAttachment(),at=null;if(Rt instanceof L.RegionAttachment){var _=Rt;it.vertices=this.vertices,it.numVertices=4,it.numFloats=ht<<2,_.computeWorldVertices(ut.bone,it.vertices,0,ht),lt=a.QUAD_TRIANGLES,vt=_.uvs,at=_.region.renderObject.texture,st=_.color;}else {if(!(Rt instanceof L.MeshAttachment)){if(Rt instanceof L.ClippingAttachment){var ot=Rt;O.clipStart(ut,ot);continue}O.clipEndWithSlot(ut);continue}var xt=Rt;it.vertices=this.vertices,it.numVertices=xt.worldVerticesLength>>1,it.numFloats=it.numVertices*ht,it.numFloats>it.vertices.length&&(it.vertices=this.vertices=L.Utils.newFloatArray(it.numFloats)),xt.computeWorldVertices(ut,0,xt.worldVerticesLength,it.vertices,0,ht),lt=xt.triangles,at=xt.region.renderObject.texture,vt=xt.uvs,st=xt.color;}if(at!=null){var Mt=ut.color,Xt=this.tempColor;Xt.r=G.r*Mt.r*st.r,Xt.g=G.g*Mt.g*st.g,Xt.b=G.b*Mt.b*st.b,Xt.a=G.a*Mt.a*st.a,T&&(Xt.r*=Xt.a,Xt.g*=Xt.a,Xt.b*=Xt.a);var Dt=this.tempColor2;ut.darkColor==null?Dt.set(0,0,0,1):(T?(Dt.r=ut.darkColor.r*Xt.a,Dt.g=ut.darkColor.g*Xt.a,Dt.b=ut.darkColor.b*Xt.a):Dt.setFromColor(ut.darkColor),Dt.a=T?1:0);var Lt=ut.data.blendMode;if(Lt!=P&&(P=Lt,m.setBlendMode(l.WebGLBlendModeConverter.getSourceGLBlendMode(P,T),l.WebGLBlendModeConverter.getDestGLBlendMode(P))),O.isClipping()){O.clipTriangles(it.vertices,it.numFloats,lt,lt.length,vt,Xt,Dt,N);var Bt=new Float32Array(O.clippedVertices),Gt=O.clippedTriangles;if(this.vertexEffect!=null){var kt=this.vertexEffect,bt=Bt;if(N)for(var wt=0,Qt=Bt.length;wt<Qt;wt+=et)E.x=bt[wt],E.y=bt[wt+1],q.set(bt[wt+2],bt[wt+3],bt[wt+4],bt[wt+5]),D.x=bt[wt+6],D.y=bt[wt+7],$.set(bt[wt+8],bt[wt+9],bt[wt+10],bt[wt+11]),kt.transform(E,D,q,$),bt[wt]=E.x,bt[wt+1]=E.y,bt[wt+2]=q.r,bt[wt+3]=q.g,bt[wt+4]=q.b,bt[wt+5]=q.a,bt[wt+6]=D.x,bt[wt+7]=D.y,bt[wt+8]=$.r,bt[wt+9]=$.g,bt[wt+10]=$.b,bt[wt+11]=$.a;else for(var wt=0,ie=Bt.length;wt<ie;wt+=et)E.x=bt[wt],E.y=bt[wt+1],q.set(bt[wt+2],bt[wt+3],bt[wt+4],bt[wt+5]),D.x=bt[wt+6],D.y=bt[wt+7],$.set(0,0,0,0),kt.transform(E,D,q,$),bt[wt]=E.x,bt[wt+1]=E.y,bt[wt+2]=q.r,bt[wt+3]=q.g,bt[wt+4]=q.b,bt[wt+5]=q.a,bt[wt+6]=D.x,bt[wt+7]=D.y;}m.draw(at,Bt,Gt);}else {var bt=it.vertices;if(this.vertexEffect!=null){var kt=this.vertexEffect;if(N)for(var wt=0,Kt=0,Ae=it.numFloats;wt<Ae;wt+=et,Kt+=2)E.x=bt[wt],E.y=bt[wt+1],D.x=vt[Kt],D.y=vt[Kt+1],q.setFromColor(Xt),$.setFromColor(Dt),kt.transform(E,D,q,$),bt[wt]=E.x,bt[wt+1]=E.y,bt[wt+2]=q.r,bt[wt+3]=q.g,bt[wt+4]=q.b,bt[wt+5]=q.a,bt[wt+6]=D.x,bt[wt+7]=D.y,bt[wt+8]=$.r,bt[wt+9]=$.g,bt[wt+10]=$.b,bt[wt+11]=$.a;else for(var wt=0,Kt=0,Le=it.numFloats;wt<Le;wt+=et,Kt+=2)E.x=bt[wt],E.y=bt[wt+1],D.x=vt[Kt],D.y=vt[Kt+1],q.setFromColor(Xt),$.set(0,0,0,0),kt.transform(E,D,q,$),bt[wt]=E.x,bt[wt+1]=E.y,bt[wt+2]=q.r,bt[wt+3]=q.g,bt[wt+4]=q.b,bt[wt+5]=q.a,bt[wt+6]=D.x,bt[wt+7]=D.y;}else if(N)for(var wt=2,Kt=0,ye=it.numFloats;wt<ye;wt+=et,Kt+=2)bt[wt]=Xt.r,bt[wt+1]=Xt.g,bt[wt+2]=Xt.b,bt[wt+3]=Xt.a,bt[wt+4]=vt[Kt],bt[wt+5]=vt[Kt+1],bt[wt+6]=Dt.r,bt[wt+7]=Dt.g,bt[wt+8]=Dt.b,bt[wt+9]=Dt.a;else for(var wt=2,Kt=0,Ye=it.numFloats;wt<Ye;wt+=et,Kt+=2)bt[wt]=Xt.r,bt[wt+1]=Xt.g,bt[wt+2]=Xt.b,bt[wt+3]=Xt.a,bt[wt+4]=vt[Kt],bt[wt+5]=vt[Kt+1];var Ve=it.vertices.subarray(0,it.numFloats);m.draw(at,Ve,lt);}}O.clipEndWithSlot(ut);}else O.clipEndWithSlot(ut);else O.clipEndWithSlot(ut);}O.clipEnd();},a.QUAD_TRIANGLES=[0,1,2,2,3,0],a})();l.SkeletonRenderer=y;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function y(a,m,u){a===void 0&&(a=0),m===void 0&&(m=0),u===void 0&&(u=0),this.x=0,this.y=0,this.z=0,this.x=a,this.y=m,this.z=u;}return y.prototype.setFrom=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},y.prototype.set=function(a,m,u){return this.x=a,this.y=m,this.z=u,this},y.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},y.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},y.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this},y.prototype.normalize=function(){var a=this.length();return a==0?this:(a=1/a,this.x*=a,this.y*=a,this.z*=a,this)},y.prototype.cross=function(a){return this.set(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},y.prototype.multiply=function(a){var m=a.values;return this.set(this.x*m[l.M00]+this.y*m[l.M01]+this.z*m[l.M02]+m[l.M03],this.x*m[l.M10]+this.y*m[l.M11]+this.z*m[l.M12]+m[l.M13],this.x*m[l.M20]+this.y*m[l.M21]+this.z*m[l.M22]+m[l.M23])},y.prototype.project=function(a){var m=a.values,u=1/(this.x*m[l.M30]+this.y*m[l.M31]+this.z*m[l.M32]+m[l.M33]);return this.set((this.x*m[l.M00]+this.y*m[l.M01]+this.z*m[l.M02]+m[l.M03])*u,(this.x*m[l.M10]+this.y*m[l.M11]+this.z*m[l.M12]+m[l.M13])*u,(this.x*m[l.M20]+this.y*m[l.M21]+this.z*m[l.M22]+m[l.M23])*u)},y.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},y.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},y.prototype.distance=function(a){var m=a.x-this.x,u=a.y-this.y,A=a.z-this.z;return Math.sqrt(m*m+u*u+A*A)},y})();l.Vector3=R;})(L.webgl||(L.webgl={}));})(Et||(Et={})),(function(L){(function(l){var R=(function(){function a(m,u){u===void 0&&(u={alpha:"true"}),this.restorables=new Array,m instanceof WebGLRenderingContext||m instanceof WebGL2RenderingContext?(this.gl=m,this.canvas=this.gl.canvas):this.setupCanvas(m,u);}return a.prototype.setupCanvas=function(m,u){var A=this;this.gl=m.getContext("webgl2",u)||m.getContext("webgl",u),this.canvas=m,m.addEventListener("webglcontextlost",(function(S){S&&S.preventDefault();})),m.addEventListener("webglcontextrestored",(function(S){for(var O=0,T=A.restorables.length;O<T;O++)A.restorables[O].restore();}));},a.prototype.addRestorable=function(m){this.restorables.push(m);},a.prototype.removeRestorable=function(m){var u=this.restorables.indexOf(m);u>-1&&this.restorables.splice(u,1);},a})();l.ManagedWebGLRenderingContext=R;var y=(function(){function a(){}return a.getDestGLBlendMode=function(m){switch(m){case L.BlendMode.Normal:return a.ONE_MINUS_SRC_ALPHA;case L.BlendMode.Additive:return a.ONE;case L.BlendMode.Multiply:case L.BlendMode.Screen:return a.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+m)}},a.getSourceGLBlendMode=function(m,u){switch(u===void 0&&(u=false),m){case L.BlendMode.Normal:case L.BlendMode.Additive:return u?a.ONE:a.SRC_ALPHA;case L.BlendMode.Multiply:return a.DST_COLOR;case L.BlendMode.Screen:return a.ONE;default:throw new Error("Unknown blend mode: "+m)}},a.ZERO=0,a.ONE=1,a.SRC_COLOR=768,a.ONE_MINUS_SRC_COLOR=769,a.SRC_ALPHA=770,a.ONE_MINUS_SRC_ALPHA=771,a.DST_ALPHA=772,a.ONE_MINUS_DST_ALPHA=773,a.DST_COLOR=774,a})();l.WebGLBlendModeConverter=y;})(L.webgl||(L.webgl={}));})(Et||(Et={}));Object.assign(Et,Et.webgl);(()=>{var L=Object.defineProperty,Yt=t=>L(t,"__esModule",{value:true}),l=(t,o)=>{Yt(t);for(var h in o)L(t,h,{get:o[h],enumerable:true});},R={};l(R,{AlphaTimeline:()=>wt,Animation:()=>G,AnimationState:()=>Ze,AnimationStateAdapter:()=>xi,AnimationStateData:()=>er,AssetManager:()=>pi,AssetManagerBase:()=>fs,AtlasAttachmentLoader:()=>ir,Attachment:()=>lt,AttachmentTimeline:()=>Kt,BinaryInput:()=>rr,BlendMode:()=>ei,Bone:()=>Vs,BoneData:()=>Bs,BoundingBoxAttachment:()=>Ji,CURRENT:()=>cs,CameraController:()=>Me,ClippingAttachment:()=>Oi,Color:()=>u,Color2Attribute:()=>qs,ColorAttribute:()=>Li,ConstraintData:()=>Ki,CurveTimeline:()=>ht,CurveTimeline1:()=>ut,CurveTimeline2:()=>Rt,DebugUtils:()=>D,DeformTimeline:()=>Ae,Downloader:()=>Xi,DrawOrderTimeline:()=>Ve,Event:()=>Pi,EventData:()=>ms,EventQueue:()=>$e,EventTimeline:()=>ye,EventType:()=>De,FIRST:()=>hi,FakeTexture:()=>us,GLTexture:()=>ss,HOLD_FIRST:()=>ci,HOLD_MIX:()=>Mi,HOLD_SUBSEQUENT:()=>ti,IkConstraint:()=>Ni,IkConstraintData:()=>Ds,IkConstraintTimeline:()=>qe,Input:()=>ce,IntSet:()=>y,Interpolation:()=>O,JitterEffect:()=>Pr,LoadingScreen:()=>fr,M00:()=>ae,M01:()=>ue,M02:()=>fe,M03:()=>me,M10:()=>xe,M11:()=>_t,M12:()=>oe,M13:()=>zt,M20:()=>ft,M21:()=>Jt,M22:()=>ee,M23:()=>he,M30:()=>$t,M31:()=>Ot,M32:()=>Wt,M33:()=>Nt,ManagedWebGLRenderingContext:()=>oi,MathUtils:()=>S,Matrix4:()=>te,Mesh:()=>se,MeshAttachment:()=>yi,MixBlend:()=>et,MixDirection:()=>ct,OrthoCamera:()=>le,PathAttachment:()=>ui,PathConstraint:()=>Bi,PathConstraintData:()=>$i,PathConstraintMixTimeline:()=>We,PathConstraintPositionTimeline:()=>Ue,PathConstraintSpacingTimeline:()=>_e,PointAttachment:()=>Qi,PolygonBatcher:()=>Ss,Pool:()=>q,Position2Attribute:()=>ge,Position3Attribute:()=>we,PositionMode:()=>di,Pow:()=>T,PowOut:()=>N,RGB2Timeline:()=>ie,RGBA2Timeline:()=>Qt,RGBATimeline:()=>kt,RGBTimeline:()=>bt,RegionAttachment:()=>Ie,ResizeMode:()=>zi,RotateMode:()=>fi,RotateTimeline:()=>at,SETUP:()=>Hi,SUBSEQUENT:()=>ri,ScaleTimeline:()=>Mt,ScaleXTimeline:()=>Xt,ScaleYTimeline:()=>Dt,SceneRenderer:()=>Ii,Shader:()=>qt,ShapeRenderer:()=>Hs,ShapeType:()=>Oe,ShearTimeline:()=>Lt,ShearXTimeline:()=>Bt,ShearYTimeline:()=>Gt,Skeleton:()=>Os,SkeletonBinary:()=>sr,SkeletonBounds:()=>hr,SkeletonClipping:()=>ys,SkeletonData:()=>vs,SkeletonDebugRenderer:()=>Ei,SkeletonJson:()=>Fr,SkeletonRenderer:()=>rs,Skin:()=>Ui,SkinEntry:()=>ts,Slot:()=>gs,SlotData:()=>es,SpacingMode:()=>He,SpineCanvas:()=>Is,StringSet:()=>a,SwirlEffect:()=>cr,TexCoordAttribute:()=>pe,Texture:()=>Fs,TextureAtlas:()=>Ys,TextureAtlasPage:()=>Ls,TextureAtlasRegion:()=>Xs,TextureFilter:()=>ni,TextureRegion:()=>ds,TextureWrap:()=>Ci,TimeKeeper:()=>it,Timeline:()=>Tt,Touch:()=>de,TrackEntry:()=>Xe,TransformConstraint:()=>ps,TransformConstraintData:()=>is,TransformConstraintTimeline:()=>ze,TransformMode:()=>ii,TranslateTimeline:()=>_,TranslateXTimeline:()=>ot,TranslateYTimeline:()=>xt,Triangulator:()=>li,Utils:()=>E,Vector2:()=>$,Vector3:()=>Je,VertexAttachment:()=>st,VertexAttribute:()=>re,VertexAttributeType:()=>Ti,WebGLBlendModeConverter:()=>As,WindowedMean:()=>vt});var y=class{constructor(){this.array=new Array;}add(t){let o=this.contains(t);return this.array[t|0]=t|0,!o}contains(t){return this.array[t|0]!=null}remove(t){this.array[t|0]=void 0;}clear(){this.array.length=0;}},a=class{constructor(){this.entries={},this.size=0;}add(t){let o=this.entries[t];return this.entries[t]=true,o?false:(this.size++,true)}addAll(t){let o=this.size;for(var h=0,g=t.length;h<g;h++)this.add(t[h]);return o!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0;}},m=class{constructor(t=0,o=0,h=0,g=0){this.r=t,this.g=o,this.b=h,this.a=g;}set(t,o,h,g){return this.r=t,this.g=o,this.b=h,this.a=g,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this}add(t,o,h,g){return this.r+=t,this.g+=o,this.b+=h,this.a+=g,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,o){t.r=((o&4278190080)>>>24)/255,t.g=((o&16711680)>>>16)/255,t.b=((o&65280)>>>8)/255,t.a=(o&255)/255;}static rgb888ToColor(t,o){t.r=((o&16711680)>>>16)/255,t.g=((o&65280)>>>8)/255,t.b=(o&255)/255;}static fromString(t){return new m().setFromString(t)}},u=m;u.WHITE=new m(1,1,1,1),u.RED=new m(1,0,0,1),u.GREEN=new m(0,1,0,1),u.BLUE=new m(0,0,1,1),u.MAGENTA=new m(1,0,1,1);var A=class{static clamp(t,o,h){return t<o?o:t>h?h:t}static cosDeg(t){return Math.cos(t*A.degRad)}static sinDeg(t){return Math.sin(t*A.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let o=Math.pow(Math.abs(t),.3333333333333333);return t<0?-o:o}static randomTriangular(t,o){return A.randomTriangularWith(t,o,(t+o)*.5)}static randomTriangularWith(t,o,h){let g=Math.random(),M=o-t;return g<=(h-t)/M?t+Math.sqrt(g*M*(h-t)):o-Math.sqrt((1-g)*M*(o-h))}static isPowerOfTwo(t){return t&&(t&t-1)==0}},S=A;S.PI=3.1415927,S.PI2=A.PI*2,S.radiansToDegrees=180/A.PI,S.radDeg=A.radiansToDegrees,S.degreesToRadians=A.PI/180,S.degRad=A.degreesToRadians;var O=class{apply(t,o,h){return t+(o-t)*this.applyInternal(h)}},T=class extends O{constructor(t){super(),this.power=2,this.power=t;}applyInternal(t){return t<=.5?Math.pow(t*2,this.power)/2:Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1}},N=class extends T{constructor(t){super(t);}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},P=class{static arrayCopy(t,o,h,g,M){for(let V=o,b=g;V<o+M;V++,b++)h[b]=t[V];}static arrayFill(t,o,h,g){for(let M=o;M<h;M++)t[M]=g;}static setArraySize(t,o,h=0){let g=t.length;if(g==o)return t;if(t.length=o,g<o)for(let M=g;M<o;M++)t[M]=h;return t}static ensureArrayCapacity(t,o,h=0){return t.length>=o?t:P.setArraySize(t,o,h)}static newArray(t,o){let h=new Array(t);for(let g=0;g<t;g++)h[g]=o;return h}static newFloatArray(t){if(P.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let o=new Array(t);for(let h=0;h<o.length;h++)o[h]=0;return o}}static newShortArray(t){if(P.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let o=new Array(t);for(let h=0;h<o.length;h++)o[h]=0;return o}}static toFloatArray(t){return P.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return P.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,o){}static contains(t,o,h=true){for(var g=0;g<t.length;g++)if(t[g]==o)return  true;return  false}static enumValue(t,o){return t[o[0].toUpperCase()+o.slice(1)]}},E=P;E.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";var D=class{static logBones(t){for(let o=0;o<t.bones.length;o++){let h=t.bones[o];console.log(h.data.name+", "+h.a+", "+h.b+", "+h.c+", "+h.d+", "+h.worldX+", "+h.worldY);}}},q=class{constructor(t){this.items=new Array,this.instantiator=t;}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t);}freeAll(t){for(let o=0;o<t.length;o++)this.free(t[o]);}clear(){this.items.length=0;}},$=class{constructor(t=0,o=0){this.x=t,this.y=o;}set(t,o){return this.x=t,this.y=o,this}length(){let t=this.x,o=this.y;return Math.sqrt(t*t+o*o)}normalize(){let t=this.length();return t!=0&&(this.x/=t,this.y/=t),this}},it=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0;}update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0);}},vt=class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=true,this.values=new Array(t);}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=true;}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let o=0;o<this.values.length;o++)t+=this.values[o];this.mean=t/this.values.length,this.dirty=false;}return this.mean}return 0}},lt=class{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t;}},dt=class extends lt{constructor(t){super(t),this.id=dt.nextID++,this.bones=null,this.vertices=null,this.worldVerticesLength=0,this.deformAttachment=this;}computeWorldVertices(t,o,h,g,M,V){h=M+(h>>1)*V;let b=t.bone.skeleton,v=t.deform,k=this.vertices,I=this.bones;if(!I){v.length>0&&(k=v);let K=t.bone,i=K.worldX,e=K.worldY,s=K.a,n=K.b,r=K.c,f=K.d;for(let c=o,d=M;d<h;c+=2,d+=V){let p=k[c],x=k[c+1];g[d]=p*s+x*n+i,g[d+1]=p*r+x*f+e;}return}let Y=0,U=0;for(let K=0;K<o;K+=2){let i=I[Y];Y+=i+1,U+=i;}let H=b.bones;if(v.length==0)for(let K=M,i=U*3;K<h;K+=V){let e=0,s=0,n=I[Y++];for(n+=Y;Y<n;Y++,i+=3){let r=H[I[Y]],f=k[i],c=k[i+1],d=k[i+2];e+=(f*r.a+c*r.b+r.worldX)*d,s+=(f*r.c+c*r.d+r.worldY)*d;}g[K]=e,g[K+1]=s;}else {let K=v;for(let i=M,e=U*3,s=U<<1;i<h;i+=V){let n=0,r=0,f=I[Y++];for(f+=Y;Y<f;Y++,e+=3,s+=2){let c=H[I[Y]],d=k[e]+K[s],p=k[e+1]+K[s+1],x=k[e+2];n+=(d*c.a+p*c.b+c.worldX)*x,r+=(d*c.c+p*c.d+c.worldY)*x;}g[i]=n,g[i+1]=r;}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),E.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=E.newFloatArray(this.vertices.length),E.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment;}},st=dt;st.nextID=0;var G=class{constructor(t,o,h){if(this.timelines=null,this.timelineIds=null,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(o),this.duration=h;}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new a;for(var o=0;o<t.length;o++)this.timelineIds.addAll(t[o].getPropertyIds());}hasTimeline(t){for(let o=0;o<t.length;o++)if(this.timelineIds.contains(t[o]))return  true;return  false}apply(t,o,h,g,M,V,b,v){if(!t)throw new Error("skeleton cannot be null.");g&&this.duration!=0&&(h%=this.duration,o>0&&(o%=this.duration));let k=this.timelines;for(let I=0,Y=k.length;I<Y;I++)k[I].apply(t,o,h,M,V,b,v);}},et;(function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add";})(et||(et={}));var ct;(function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut";})(ct||(ct={}));var rt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18},Tt=class{constructor(t,o){this.propertyIds=null,this.frames=null,this.propertyIds=o,this.frames=E.newFloatArray(t*this.getFrameEntries());}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,o){let h=t.length;for(let g=1;g<h;g++)if(t[g]>o)return g-1;return h-1}static search(t,o,h){let g=t.length;for(let M=h;M<g;M+=h)if(t[M]>o)return M-h;return g-h}},ht=class extends Tt{constructor(t,o,h){super(t,h),this.curves=null,this.curves=E.newFloatArray(t+o*18),this.curves[t-1]=1;}setLinear(t){this.curves[t]=0;}setStepped(t){this.curves[t]=1;}shrink(t){let o=this.getFrameCount()+t*18;if(this.curves.length>o){let h=E.newFloatArray(o);E.arrayCopy(this.curves,0,h,0,o),this.curves=h;}}setBezier(t,o,h,g,M,V,b,v,k,I,Y){let U=this.curves,H=this.getFrameCount()+t*18;h==0&&(U[o]=2+H);let K=(g-V*2+v)*.03,i=(M-b*2+k)*.03,e=((V-v)*3-g+I)*.006,s=((b-k)*3-M+Y)*.006,n=K*2+e,r=i*2+s,f=(V-g)*.3+K+e*.16666667,c=(b-M)*.3+i+s*.16666667,d=g+f,p=M+c;for(let x=H+18;H<x;H+=2)U[H]=d,U[H+1]=p,f+=n,c+=r,n+=e,r+=s,d+=f,p+=c;}getBezierValue(t,o,h,g){let M=this.curves;if(M[g]>t){let k=this.frames[o],I=this.frames[o+h];return I+(t-k)/(M[g]-k)*(M[g+1]-I)}let V=g+18;for(g+=2;g<V;g+=2)if(M[g]>=t){let k=M[g-2],I=M[g-1];return I+(t-k)/(M[g]-k)*(M[g+1]-I)}o+=this.getFrameEntries();let b=M[V-2],v=M[V-1];return v+(t-b)/(this.frames[o]-b)*(this.frames[o+h]-v)}},ut=class extends ht{constructor(t,o,h){super(t,o,[h]);}getFrameEntries(){return 2}setFrame(t,o,h){t<<=1,this.frames[t]=o,this.frames[t+1]=h;}getCurveValue(t){let o=this.frames,h=o.length-2;for(let M=2;M<=h;M+=2)if(o[M]>t){h=M-2;break}let g=this.curves[h>>1];switch(g){case 0:let M=o[h],V=o[h+1];return V+(t-M)/(o[h+2]-M)*(o[h+2+1]-V);case 1:return o[h+1]}return this.getBezierValue(t,h,1,g-2)}},Rt=class extends ht{constructor(t,o,h,g){super(t,o,[h,g]);}getFrameEntries(){return 3}setFrame(t,o,h,g){t*=3,this.frames[t]=o,this.frames[t+1]=h,this.frames[t+2]=g;}},at=class extends ut{constructor(t,o,h){super(t,o,rt.rotate+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.rotation=v.data.rotation;return;case 1:v.rotation+=(v.data.rotation-v.rotation)*M;}return}let I=this.getCurveValue(h);switch(V){case 0:v.rotation=v.data.rotation+I*M;break;case 1:case 2:I+=v.data.rotation-v.rotation;case 3:v.rotation+=I*M;}}},_=class extends Rt{constructor(t,o,h){super(t,o,rt.x+"|"+h,rt.y+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.x=v.data.x,v.y=v.data.y;return;case 1:v.x+=(v.data.x-v.x)*M,v.y+=(v.data.y-v.y)*M;}return}let I=0,Y=0,U=Tt.search(k,h,3),H=this.curves[U/3];switch(H){case 0:let K=k[U];I=k[U+1],Y=k[U+2];let i=(h-K)/(k[U+3]-K);I+=(k[U+3+1]-I)*i,Y+=(k[U+3+2]-Y)*i;break;case 1:I=k[U+1],Y=k[U+2];break;default:I=this.getBezierValue(h,U,1,H-2),Y=this.getBezierValue(h,U,2,H+18-2);}switch(V){case 0:v.x=v.data.x+I*M,v.y=v.data.y+Y*M;break;case 1:case 2:v.x+=(v.data.x+I-v.x)*M,v.y+=(v.data.y+Y-v.y)*M;break;case 3:v.x+=I*M,v.y+=Y*M;}}},ot=class extends ut{constructor(t,o,h){super(t,o,rt.x+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.x=v.data.x;return;case 1:v.x+=(v.data.x-v.x)*M;}return}let I=this.getCurveValue(h);switch(V){case 0:v.x=v.data.x+I*M;break;case 1:case 2:v.x+=(v.data.x+I-v.x)*M;break;case 3:v.x+=I*M;}}},xt=class extends ut{constructor(t,o,h){super(t,o,rt.y+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.y=v.data.y;return;case 1:v.y+=(v.data.y-v.y)*M;}return}let I=this.getCurveValue(h);switch(V){case 0:v.y=v.data.y+I*M;break;case 1:case 2:v.y+=(v.data.y+I-v.y)*M;break;case 3:v.y+=I*M;}}},Mt=class extends Rt{constructor(t,o,h){super(t,o,rt.scaleX+"|"+h,rt.scaleY+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.scaleX=v.data.scaleX,v.scaleY=v.data.scaleY;return;case 1:v.scaleX+=(v.data.scaleX-v.scaleX)*M,v.scaleY+=(v.data.scaleY-v.scaleY)*M;}return}let I,Y,U=Tt.search(k,h,3),H=this.curves[U/3];switch(H){case 0:let K=k[U];I=k[U+1],Y=k[U+2];let i=(h-K)/(k[U+3]-K);I+=(k[U+3+1]-I)*i,Y+=(k[U+3+2]-Y)*i;break;case 1:I=k[U+1],Y=k[U+2];break;default:I=this.getBezierValue(h,U,1,H-2),Y=this.getBezierValue(h,U,2,H+18-2);}if(I*=v.data.scaleX,Y*=v.data.scaleY,M==1)V==3?(v.scaleX+=I-v.data.scaleX,v.scaleY+=Y-v.data.scaleY):(v.scaleX=I,v.scaleY=Y);else {let K=0,i=0;if(b==1)switch(V){case 0:K=v.data.scaleX,i=v.data.scaleY,v.scaleX=K+(Math.abs(I)*S.signum(K)-K)*M,v.scaleY=i+(Math.abs(Y)*S.signum(i)-i)*M;break;case 1:case 2:K=v.scaleX,i=v.scaleY,v.scaleX=K+(Math.abs(I)*S.signum(K)-K)*M,v.scaleY=i+(Math.abs(Y)*S.signum(i)-i)*M;break;case 3:v.scaleX+=(I-v.data.scaleX)*M,v.scaleY+=(Y-v.data.scaleY)*M;}else switch(V){case 0:K=Math.abs(v.data.scaleX)*S.signum(I),i=Math.abs(v.data.scaleY)*S.signum(Y),v.scaleX=K+(I-K)*M,v.scaleY=i+(Y-i)*M;break;case 1:case 2:K=Math.abs(v.scaleX)*S.signum(I),i=Math.abs(v.scaleY)*S.signum(Y),v.scaleX=K+(I-K)*M,v.scaleY=i+(Y-i)*M;break;case 3:v.scaleX+=(I-v.data.scaleX)*M,v.scaleY+=(Y-v.data.scaleY)*M;}}}},Xt=class extends ut{constructor(t,o,h){super(t,o,rt.scaleX+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.scaleX=v.data.scaleX;return;case 1:v.scaleX+=(v.data.scaleX-v.scaleX)*M;}return}let I=this.getCurveValue(h)*v.data.scaleX;if(M==1)V==3?v.scaleX+=I-v.data.scaleX:v.scaleX=I;else {let Y=0;if(b==1)switch(V){case 0:Y=v.data.scaleX,v.scaleX=Y+(Math.abs(I)*S.signum(Y)-Y)*M;break;case 1:case 2:Y=v.scaleX,v.scaleX=Y+(Math.abs(I)*S.signum(Y)-Y)*M;break;case 3:v.scaleX+=(I-v.data.scaleX)*M;}else switch(V){case 0:Y=Math.abs(v.data.scaleX)*S.signum(I),v.scaleX=Y+(I-Y)*M;break;case 1:case 2:Y=Math.abs(v.scaleX)*S.signum(I),v.scaleX=Y+(I-Y)*M;break;case 3:v.scaleX+=(I-v.data.scaleX)*M;}}}},Dt=class extends ut{constructor(t,o,h){super(t,o,rt.scaleY+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.scaleY=v.data.scaleY;return;case 1:v.scaleY+=(v.data.scaleY-v.scaleY)*M;}return}let I=this.getCurveValue(h)*v.data.scaleY;if(M==1)V==3?v.scaleY+=I-v.data.scaleY:v.scaleY=I;else {let Y=0;if(b==1)switch(V){case 0:Y=v.data.scaleY,v.scaleY=Y+(Math.abs(I)*S.signum(Y)-Y)*M;break;case 1:case 2:Y=v.scaleY,v.scaleY=Y+(Math.abs(I)*S.signum(Y)-Y)*M;break;case 3:v.scaleY+=(I-v.data.scaleY)*M;}else switch(V){case 0:Y=Math.abs(v.data.scaleY)*S.signum(I),v.scaleY=Y+(I-Y)*M;break;case 1:case 2:Y=Math.abs(v.scaleY)*S.signum(I),v.scaleY=Y+(I-Y)*M;break;case 3:v.scaleY+=(I-v.data.scaleY)*M;}}}},Lt=class extends Rt{constructor(t,o,h){super(t,o,rt.shearX+"|"+h,rt.shearY+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.shearX=v.data.shearX,v.shearY=v.data.shearY;return;case 1:v.shearX+=(v.data.shearX-v.shearX)*M,v.shearY+=(v.data.shearY-v.shearY)*M;}return}let I=0,Y=0,U=Tt.search(k,h,3),H=this.curves[U/3];switch(H){case 0:let K=k[U];I=k[U+1],Y=k[U+2];let i=(h-K)/(k[U+3]-K);I+=(k[U+3+1]-I)*i,Y+=(k[U+3+2]-Y)*i;break;case 1:I=k[U+1],Y=k[U+2];break;default:I=this.getBezierValue(h,U,1,H-2),Y=this.getBezierValue(h,U,2,H+18-2);}switch(V){case 0:v.shearX=v.data.shearX+I*M,v.shearY=v.data.shearY+Y*M;break;case 1:case 2:v.shearX+=(v.data.shearX+I-v.shearX)*M,v.shearY+=(v.data.shearY+Y-v.shearY)*M;break;case 3:v.shearX+=I*M,v.shearY+=Y*M;}}},Bt=class extends ut{constructor(t,o,h){super(t,o,rt.shearX+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.shearX=v.data.shearX;return;case 1:v.shearX+=(v.data.shearX-v.shearX)*M;}return}let I=this.getCurveValue(h);switch(V){case 0:v.shearX=v.data.shearX+I*M;break;case 1:case 2:v.shearX+=(v.data.shearX+I-v.shearX)*M;break;case 3:v.shearX+=I*M;}}},Gt=class extends ut{constructor(t,o,h){super(t,o,rt.shearY+"|"+h),this.boneIndex=0,this.boneIndex=h;}apply(t,o,h,g,M,V,b){let v=t.bones[this.boneIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.shearY=v.data.shearY;return;case 1:v.shearY+=(v.data.shearY-v.shearY)*M;}return}let I=this.getCurveValue(h);switch(V){case 0:v.shearY=v.data.shearY+I*M;break;case 1:case 2:v.shearY+=(v.data.shearY+I-v.shearY)*M;break;case 3:v.shearY+=I*M;}}},kt=class extends ht{constructor(t,o,h){super(t,o,[rt.rgb+"|"+h,rt.alpha+"|"+h]),this.slotIndex=0,this.slotIndex=h;}getFrameEntries(){return 5}setFrame(t,o,h,g,M,V){t*=5,this.frames[t]=o,this.frames[t+1]=h,this.frames[t+2]=g,this.frames[t+3]=M,this.frames[t+4]=V;}apply(t,o,h,g,M,V,b){let v=t.slots[this.slotIndex];if(!v.bone.active)return;let k=this.frames,I=v.color;if(h<k[0]){let s=v.data.color;switch(V){case 0:I.setFromColor(s);return;case 1:I.add((s.r-I.r)*M,(s.g-I.g)*M,(s.b-I.b)*M,(s.a-I.a)*M);}return}let Y=0,U=0,H=0,K=0,i=Tt.search(k,h,5),e=this.curves[i/5];switch(e){case 0:let s=k[i];Y=k[i+1],U=k[i+2],H=k[i+3],K=k[i+4];let n=(h-s)/(k[i+5]-s);Y+=(k[i+5+1]-Y)*n,U+=(k[i+5+2]-U)*n,H+=(k[i+5+3]-H)*n,K+=(k[i+5+4]-K)*n;break;case 1:Y=k[i+1],U=k[i+2],H=k[i+3],K=k[i+4];break;default:Y=this.getBezierValue(h,i,1,e-2),U=this.getBezierValue(h,i,2,e+18-2),H=this.getBezierValue(h,i,3,e+36-2),K=this.getBezierValue(h,i,4,e+54-2);}M==1?I.set(Y,U,H,K):(V==0&&I.setFromColor(v.data.color),I.add((Y-I.r)*M,(U-I.g)*M,(H-I.b)*M,(K-I.a)*M));}},bt=class extends ht{constructor(t,o,h){super(t,o,[rt.rgb+"|"+h]),this.slotIndex=0,this.slotIndex=h;}getFrameEntries(){return 4}setFrame(t,o,h,g,M){t<<=2,this.frames[t]=o,this.frames[t+1]=h,this.frames[t+2]=g,this.frames[t+3]=M;}apply(t,o,h,g,M,V,b){let v=t.slots[this.slotIndex];if(!v.bone.active)return;let k=this.frames,I=v.color;if(h<k[0]){let e=v.data.color;switch(V){case 0:I.r=e.r,I.g=e.g,I.b=e.b;return;case 1:I.r+=(e.r-I.r)*M,I.g+=(e.g-I.g)*M,I.b+=(e.b-I.b)*M;}return}let Y=0,U=0,H=0,K=Tt.search(k,h,4),i=this.curves[K>>2];switch(i){case 0:let e=k[K];Y=k[K+1],U=k[K+2],H=k[K+3];let s=(h-e)/(k[K+4]-e);Y+=(k[K+4+1]-Y)*s,U+=(k[K+4+2]-U)*s,H+=(k[K+4+3]-H)*s;break;case 1:Y=k[K+1],U=k[K+2],H=k[K+3];break;default:Y=this.getBezierValue(h,K,1,i-2),U=this.getBezierValue(h,K,2,i+18-2),H=this.getBezierValue(h,K,3,i+36-2);}if(M==1)I.r=Y,I.g=U,I.b=H;else {if(V==0){let e=v.data.color;I.r=e.r,I.g=e.g,I.b=e.b;}I.r+=(Y-I.r)*M,I.g+=(U-I.g)*M,I.b+=(H-I.b)*M;}}},wt=class extends ut{constructor(t,o,h){super(t,o,rt.alpha+"|"+h),this.slotIndex=0,this.slotIndex=h;}apply(t,o,h,g,M,V,b){let v=t.slots[this.slotIndex];if(!v.bone.active)return;let k=v.color;if(h<this.frames[0]){let Y=v.data.color;switch(V){case 0:k.a=Y.a;return;case 1:k.a+=(Y.a-k.a)*M;}return}let I=this.getCurveValue(h);M==1?k.a=I:(V==0&&(k.a=v.data.color.a),k.a+=(I-k.a)*M);}},Qt=class extends ht{constructor(t,o,h){super(t,o,[rt.rgb+"|"+h,rt.alpha+"|"+h,rt.rgb2+"|"+h]),this.slotIndex=0,this.slotIndex=h;}getFrameEntries(){return 8}setFrame(t,o,h,g,M,V,b,v,k){t<<=3,this.frames[t]=o,this.frames[t+1]=h,this.frames[t+2]=g,this.frames[t+3]=M,this.frames[t+4]=V,this.frames[t+5]=b,this.frames[t+6]=v,this.frames[t+7]=k;}apply(t,o,h,g,M,V,b){let v=t.slots[this.slotIndex];if(!v.bone.active)return;let k=this.frames,I=v.color,Y=v.darkColor;if(h<k[0]){let c=v.data.color,d=v.data.darkColor;switch(V){case 0:I.setFromColor(c),Y.r=d.r,Y.g=d.g,Y.b=d.b;return;case 1:I.add((c.r-I.r)*M,(c.g-I.g)*M,(c.b-I.b)*M,(c.a-I.a)*M),Y.r+=(d.r-Y.r)*M,Y.g+=(d.g-Y.g)*M,Y.b+=(d.b-Y.b)*M;}return}let U=0,H=0,K=0,i=0,e=0,s=0,n=0,r=Tt.search(k,h,8),f=this.curves[r>>3];switch(f){case 0:let c=k[r];U=k[r+1],H=k[r+2],K=k[r+3],i=k[r+4],e=k[r+5],s=k[r+6],n=k[r+7];let d=(h-c)/(k[r+8]-c);U+=(k[r+8+1]-U)*d,H+=(k[r+8+2]-H)*d,K+=(k[r+8+3]-K)*d,i+=(k[r+8+4]-i)*d,e+=(k[r+8+5]-e)*d,s+=(k[r+8+6]-s)*d,n+=(k[r+8+7]-n)*d;break;case 1:U=k[r+1],H=k[r+2],K=k[r+3],i=k[r+4],e=k[r+5],s=k[r+6],n=k[r+7];break;default:U=this.getBezierValue(h,r,1,f-2),H=this.getBezierValue(h,r,2,f+18-2),K=this.getBezierValue(h,r,3,f+36-2),i=this.getBezierValue(h,r,4,f+54-2),e=this.getBezierValue(h,r,5,f+72-2),s=this.getBezierValue(h,r,6,f+90-2),n=this.getBezierValue(h,r,7,f+108-2);}if(M==1)I.set(U,H,K,i),Y.r=e,Y.g=s,Y.b=n;else {if(V==0){I.setFromColor(v.data.color);let c=v.data.darkColor;Y.r=c.r,Y.g=c.g,Y.b=c.b;}I.add((U-I.r)*M,(H-I.g)*M,(K-I.b)*M,(i-I.a)*M),Y.r+=(e-Y.r)*M,Y.g+=(s-Y.g)*M,Y.b+=(n-Y.b)*M;}}},ie=class extends ht{constructor(t,o,h){super(t,o,[rt.rgb+"|"+h,rt.rgb2+"|"+h]),this.slotIndex=0,this.slotIndex=h;}getFrameEntries(){return 7}setFrame(t,o,h,g,M,V,b,v){t*=7,this.frames[t]=o,this.frames[t+1]=h,this.frames[t+2]=g,this.frames[t+3]=M,this.frames[t+4]=V,this.frames[t+5]=b,this.frames[t+6]=v;}apply(t,o,h,g,M,V,b){let v=t.slots[this.slotIndex];if(!v.bone.active)return;let k=this.frames,I=v.color,Y=v.darkColor;if(h<k[0]){let c=v.data.color,d=v.data.darkColor;switch(V){case 0:I.r=c.r,I.g=c.g,I.b=c.b,Y.r=d.r,Y.g=d.g,Y.b=d.b;return;case 1:I.r+=(c.r-I.r)*M,I.g+=(c.g-I.g)*M,I.b+=(c.b-I.b)*M,Y.r+=(d.r-Y.r)*M,Y.g+=(d.g-Y.g)*M,Y.b+=(d.b-Y.b)*M;}return}let U=0,H=0,K=0,e=0,s=0,n=0,r=Tt.search(k,h,7),f=this.curves[r/7];switch(f){case 0:let c=k[r];U=k[r+1],H=k[r+2],K=k[r+3],e=k[r+4],s=k[r+5],n=k[r+6];let d=(h-c)/(k[r+7]-c);U+=(k[r+7+1]-U)*d,H+=(k[r+7+2]-H)*d,K+=(k[r+7+3]-K)*d,e+=(k[r+7+4]-e)*d,s+=(k[r+7+5]-s)*d,n+=(k[r+7+6]-n)*d;break;case 1:U=k[r+1],H=k[r+2],K=k[r+3],e=k[r+4],s=k[r+5],n=k[r+6];break;default:U=this.getBezierValue(h,r,1,f-2),H=this.getBezierValue(h,r,2,f+18-2),K=this.getBezierValue(h,r,3,f+36-2),e=this.getBezierValue(h,r,4,f+54-2),s=this.getBezierValue(h,r,5,f+72-2),n=this.getBezierValue(h,r,6,f+90-2);}if(M==1)I.r=U,I.g=H,I.b=K,Y.r=e,Y.g=s,Y.b=n;else {if(V==0){let c=v.data.color,d=v.data.darkColor;I.r=c.r,I.g=c.g,I.b=c.b,Y.r=d.r,Y.g=d.g,Y.b=d.b;}I.r+=(U-I.r)*M,I.g+=(H-I.g)*M,I.b+=(K-I.b)*M,Y.r+=(e-Y.r)*M,Y.g+=(s-Y.g)*M,Y.b+=(n-Y.b)*M;}}},Kt=class extends Tt{constructor(t,o){super(t,[rt.attachment+"|"+o]),this.slotIndex=0,this.slotIndex=o,this.attachmentNames=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,o,h){this.frames[t]=o,this.attachmentNames[t]=h;}apply(t,o,h,g,M,V,b){let v=t.slots[this.slotIndex];if(v.bone.active){if(b==1){V==0&&this.setAttachment(t,v,v.data.attachmentName);return}if(h<this.frames[0]){(V==0||V==1)&&this.setAttachment(t,v,v.data.attachmentName);return}this.setAttachment(t,v,this.attachmentNames[Tt.search1(this.frames,h)]);}}setAttachment(t,o,h){o.setAttachment(h?t.getAttachment(this.slotIndex,h):null);}},Ae=class extends ht{constructor(t,o,h,g){super(t,o,[rt.deform+"|"+h+"|"+g.id]),this.slotIndex=0,this.attachment=null,this.vertices=null,this.slotIndex=h,this.attachment=g,this.vertices=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,o,h){this.frames[t]=o,this.vertices[t]=h;}setBezier(t,o,h,g,M,V,b,v,k,I,Y){let U=this.curves,H=this.getFrameCount()+t*18;h==0&&(U[o]=2+H);let K=(g-V*2+v)*.03,i=k*.03-b*.06,e=((V-v)*3-g+I)*.006,s=(b-k+.33333333)*.018,n=K*2+e,r=i*2+s,f=(V-g)*.3+K+e*.16666667,c=b*.3+i+s*.16666667,d=g+f,p=c;for(let x=H+18;H<x;H+=2)U[H]=d,U[H+1]=p,f+=n,c+=r,n+=e,r+=s,d+=f,p+=c;}getCurvePercent(t,o){let h=this.curves,g=h[o];switch(g){case 0:let v=this.frames[o];return (t-v)/(this.frames[o+this.getFrameEntries()]-v);case 1:return 0}if(g-=2,h[g]>t){let v=this.frames[o];return h[g+1]*(t-v)/(h[g]-v)}let M=g+18;for(g+=2;g<M;g+=2)if(h[g]>=t){let v=h[g-2],k=h[g-1];return k+(t-v)/(h[g]-v)*(h[g+1]-k)}let V=h[M-2],b=h[M-1];return b+(1-b)*(t-V)/(this.frames[o+this.getFrameEntries()]-V)}apply(t,o,h,g,M,V,b){let v=t.slots[this.slotIndex];if(!v.bone.active)return;let k=v.getAttachment();if(!(k instanceof st)||k.deformAttachment!=this.attachment)return;let I=v.deform;I.length==0&&(V=0);let Y=this.vertices,U=Y[0].length,H=this.frames;if(h<H[0]){let r=k;switch(V){case 0:I.length=0;return;case 1:if(M==1){I.length=0;return}if(I.length=U,r.bones){M=1-M;for(var K=0;K<U;K++)I[K]*=M;}else {let f=r.vertices;for(var K=0;K<U;K++)I[K]+=(f[K]-I[K])*M;}}return}if(I.length=U,h>=H[H.length-1]){let r=Y[H.length-1];if(M==1)if(V==3){let f=k;if(f.bones)for(let c=0;c<U;c++)I[c]+=r[c];else {let c=f.vertices;for(let d=0;d<U;d++)I[d]+=r[d]-c[d];}}else E.arrayCopy(r,0,I,0,U);else switch(V){case 0:{let c=k;if(c.bones)for(let d=0;d<U;d++)I[d]=r[d]*M;else {let d=c.vertices;for(let p=0;p<U;p++){let x=d[p];I[p]=x+(r[p]-x)*M;}}break}case 1:case 2:for(let c=0;c<U;c++)I[c]+=(r[c]-I[c])*M;break;case 3:let f=k;if(f.bones)for(let c=0;c<U;c++)I[c]+=r[c]*M;else {let c=f.vertices;for(let d=0;d<U;d++)I[d]+=(r[d]-c[d])*M;}}return}let i=Tt.search1(H,h),e=this.getCurvePercent(h,i),s=Y[i],n=Y[i+1];if(M==1)if(V==3){let r=k;if(r.bones)for(let f=0;f<U;f++){let c=s[f];I[f]+=c+(n[f]-c)*e;}else {let f=r.vertices;for(let c=0;c<U;c++){let d=s[c];I[c]+=d+(n[c]-d)*e-f[c];}}}else for(let r=0;r<U;r++){let f=s[r];I[r]=f+(n[r]-f)*e;}else switch(V){case 0:{let f=k;if(f.bones)for(let c=0;c<U;c++){let d=s[c];I[c]=(d+(n[c]-d)*e)*M;}else {let c=f.vertices;for(let d=0;d<U;d++){let p=s[d],x=c[d];I[d]=x+(p+(n[d]-p)*e-x)*M;}}break}case 1:case 2:for(let f=0;f<U;f++){let c=s[f];I[f]+=(c+(n[f]-c)*e-I[f])*M;}break;case 3:let r=k;if(r.bones)for(let f=0;f<U;f++){let c=s[f];I[f]+=(c+(n[f]-c)*e)*M;}else {let f=r.vertices;for(let c=0;c<U;c++){let d=s[c];I[c]+=(d+(n[c]-d)*e-f[c])*M;}}}}},Le=class extends Tt{constructor(t){super(t,Le.propertyIds),this.events=null,this.events=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,o){this.frames[t]=o.time,this.events[t]=o;}apply(t,o,h,g,M,V,b){if(!g)return;let v=this.frames,k=this.frames.length;if(o>h)this.apply(t,o,Number.MAX_VALUE,g,M,V,b),o=-1;else if(o>=v[k-1])return;if(h<v[0])return;let I=0;if(o<v[0])I=0;else {I=Tt.search1(v,o)+1;let Y=v[I];for(;I>0&&v[I-1]==Y;)I--;}for(;I<k&&h>=v[I];I++)g.push(this.events[I]);}},ye=Le;ye.propertyIds=[""+rt.event];var Ye=class extends Tt{constructor(t){super(t,Ye.propertyIds),this.drawOrders=null,this.drawOrders=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,o,h){this.frames[t]=o,this.drawOrders[t]=h;}apply(t,o,h,g,M,V,b){if(b==1){V==0&&E.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(h<this.frames[0]){(V==0||V==1)&&E.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let v=this.drawOrders[Tt.search1(this.frames,h)];if(!v)E.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else {let k=t.drawOrder,I=t.slots;for(let Y=0,U=v.length;Y<U;Y++)k[Y]=I[v[Y]];}}},Ve=Ye;Ve.propertyIds=[""+rt.drawOrder];var qe=class extends ht{constructor(t,o,h){super(t,o,[rt.ikConstraint+"|"+h]),this.ikConstraintIndex=0,this.ikConstraintIndex=h;}getFrameEntries(){return 6}setFrame(t,o,h,g,M,V,b){t*=6,this.frames[t]=o,this.frames[t+1]=h,this.frames[t+2]=g,this.frames[t+3]=M,this.frames[t+4]=V?1:0,this.frames[t+5]=b?1:0;}apply(t,o,h,g,M,V,b){let v=t.ikConstraints[this.ikConstraintIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.mix=v.data.mix,v.softness=v.data.softness,v.bendDirection=v.data.bendDirection,v.compress=v.data.compress,v.stretch=v.data.stretch;return;case 1:v.mix+=(v.data.mix-v.mix)*M,v.softness+=(v.data.softness-v.softness)*M,v.bendDirection=v.data.bendDirection,v.compress=v.data.compress,v.stretch=v.data.stretch;}return}let I=0,Y=0,U=Tt.search(k,h,6),H=this.curves[U/6];switch(H){case 0:let K=k[U];I=k[U+1],Y=k[U+2];let i=(h-K)/(k[U+6]-K);I+=(k[U+6+1]-I)*i,Y+=(k[U+6+2]-Y)*i;break;case 1:I=k[U+1],Y=k[U+2];break;default:I=this.getBezierValue(h,U,1,H-2),Y=this.getBezierValue(h,U,2,H+18-2);}V==0?(v.mix=v.data.mix+(I-v.data.mix)*M,v.softness=v.data.softness+(Y-v.data.softness)*M,b==1?(v.bendDirection=v.data.bendDirection,v.compress=v.data.compress,v.stretch=v.data.stretch):(v.bendDirection=k[U+3],v.compress=k[U+4]!=0,v.stretch=k[U+5]!=0)):(v.mix+=(I-v.mix)*M,v.softness+=(Y-v.softness)*M,b==0&&(v.bendDirection=k[U+3],v.compress=k[U+4]!=0,v.stretch=k[U+5]!=0));}},ze=class extends ht{constructor(t,o,h){super(t,o,[rt.transformConstraint+"|"+h]),this.transformConstraintIndex=0,this.transformConstraintIndex=h;}getFrameEntries(){return 7}setFrame(t,o,h,g,M,V,b,v){let k=this.frames;t*=7,k[t]=o,k[t+1]=h,k[t+2]=g,k[t+3]=M,k[t+4]=V,k[t+5]=b,k[t+6]=v;}apply(t,o,h,g,M,V,b){let v=t.transformConstraints[this.transformConstraintIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){let n=v.data;switch(V){case 0:v.mixRotate=n.mixRotate,v.mixX=n.mixX,v.mixY=n.mixY,v.mixScaleX=n.mixScaleX,v.mixScaleY=n.mixScaleY,v.mixShearY=n.mixShearY;return;case 1:v.mixRotate+=(n.mixRotate-v.mixRotate)*M,v.mixX+=(n.mixX-v.mixX)*M,v.mixY+=(n.mixY-v.mixY)*M,v.mixScaleX+=(n.mixScaleX-v.mixScaleX)*M,v.mixScaleY+=(n.mixScaleY-v.mixScaleY)*M,v.mixShearY+=(n.mixShearY-v.mixShearY)*M;}return}let I,Y,U,H,K,i,e=Tt.search(k,h,7),s=this.curves[e/7];switch(s){case 0:let n=k[e];I=k[e+1],Y=k[e+2],U=k[e+3],H=k[e+4],K=k[e+5],i=k[e+6];let r=(h-n)/(k[e+7]-n);I+=(k[e+7+1]-I)*r,Y+=(k[e+7+2]-Y)*r,U+=(k[e+7+3]-U)*r,H+=(k[e+7+4]-H)*r,K+=(k[e+7+5]-K)*r,i+=(k[e+7+6]-i)*r;break;case 1:I=k[e+1],Y=k[e+2],U=k[e+3],H=k[e+4],K=k[e+5],i=k[e+6];break;default:I=this.getBezierValue(h,e,1,s-2),Y=this.getBezierValue(h,e,2,s+18-2),U=this.getBezierValue(h,e,3,s+36-2),H=this.getBezierValue(h,e,4,s+54-2),K=this.getBezierValue(h,e,5,s+72-2),i=this.getBezierValue(h,e,6,s+90-2);}if(V==0){let n=v.data;v.mixRotate=n.mixRotate+(I-n.mixRotate)*M,v.mixX=n.mixX+(Y-n.mixX)*M,v.mixY=n.mixY+(U-n.mixY)*M,v.mixScaleX=n.mixScaleX+(H-n.mixScaleX)*M,v.mixScaleY=n.mixScaleY+(K-n.mixScaleY)*M,v.mixShearY=n.mixShearY+(i-n.mixShearY)*M;}else v.mixRotate+=(I-v.mixRotate)*M,v.mixX+=(Y-v.mixX)*M,v.mixY+=(U-v.mixY)*M,v.mixScaleX+=(H-v.mixScaleX)*M,v.mixScaleY+=(K-v.mixScaleY)*M,v.mixShearY+=(i-v.mixShearY)*M;}},Ue=class extends ut{constructor(t,o,h){super(t,o,rt.pathConstraintPosition+"|"+h),this.pathConstraintIndex=0,this.pathConstraintIndex=h;}apply(t,o,h,g,M,V,b){let v=t.pathConstraints[this.pathConstraintIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.position=v.data.position;return;case 1:v.position+=(v.data.position-v.position)*M;}return}let I=this.getCurveValue(h);V==0?v.position=v.data.position+(I-v.data.position)*M:v.position+=(I-v.position)*M;}},_e=class extends ut{constructor(t,o,h){super(t,o,rt.pathConstraintSpacing+"|"+h),this.pathConstraintIndex=0,this.pathConstraintIndex=h;}apply(t,o,h,g,M,V,b){let v=t.pathConstraints[this.pathConstraintIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.spacing=v.data.spacing;return;case 1:v.spacing+=(v.data.spacing-v.spacing)*M;}return}let I=this.getCurveValue(h);V==0?v.spacing=v.data.spacing+(I-v.data.spacing)*M:v.spacing+=(I-v.spacing)*M;}},We=class extends ht{constructor(t,o,h){super(t,o,[rt.pathConstraintMix+"|"+h]),this.pathConstraintIndex=0,this.pathConstraintIndex=h;}getFrameEntries(){return 4}setFrame(t,o,h,g,M){let V=this.frames;t<<=2,V[t]=o,V[t+1]=h,V[t+2]=g,V[t+3]=M;}apply(t,o,h,g,M,V,b){let v=t.pathConstraints[this.pathConstraintIndex];if(!v.active)return;let k=this.frames;if(h<k[0]){switch(V){case 0:v.mixRotate=v.data.mixRotate,v.mixX=v.data.mixX,v.mixY=v.data.mixY;return;case 1:v.mixRotate+=(v.data.mixRotate-v.mixRotate)*M,v.mixX+=(v.data.mixX-v.mixX)*M,v.mixY+=(v.data.mixY-v.mixY)*M;}return}let I,Y,U,H=Tt.search(k,h,4),K=this.curves[H>>2];switch(K){case 0:let i=k[H];I=k[H+1],Y=k[H+2],U=k[H+3];let e=(h-i)/(k[H+4]-i);I+=(k[H+4+1]-I)*e,Y+=(k[H+4+2]-Y)*e,U+=(k[H+4+3]-U)*e;break;case 1:I=k[H+1],Y=k[H+2],U=k[H+3];break;default:I=this.getBezierValue(h,H,1,K-2),Y=this.getBezierValue(h,H,2,K+18-2),U=this.getBezierValue(h,H,3,K+36-2);}if(V==0){let i=v.data;v.mixRotate=i.mixRotate+(I-i.mixRotate)*M,v.mixX=i.mixX+(Y-i.mixX)*M,v.mixY=i.mixY+(U-i.mixY)*M;}else v.mixRotate+=(I-v.mixRotate)*M,v.mixX+=(Y-v.mixX)*M,v.mixY+=(U-v.mixY)*M;}},Ze=class{constructor(t){this.data=null,this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new $e(this),this.propertyIDs=new a,this.animationsChanged=false,this.trackEntryPool=new q(()=>new Xe),this.data=t;}static emptyAnimation(){return ks||(ks=new G("<empty>",[],0)),ks}update(t){t*=this.timeScale;let o=this.tracks;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(!M)continue;M.animationLast=M.nextAnimationLast,M.trackLast=M.nextTrackLast;let V=t*M.timeScale;if(M.delay>0){if(M.delay-=V,M.delay>0)continue;V=-M.delay,M.delay=0;}let b=M.next;if(b){let v=M.trackLast-b.delay;if(v>=0){for(b.delay=0,b.trackTime+=M.timeScale==0?0:(v/M.timeScale+t)*b.timeScale,M.trackTime+=V,this.setCurrent(h,b,true);b.mixingFrom;)b.mixTime+=t,b=b.mixingFrom;continue}}else if(M.trackLast>=M.trackEnd&&!M.mixingFrom){o[h]=null,this.queue.end(M),this.clearNext(M);continue}if(M.mixingFrom&&this.updateMixingFrom(M,t)){let v=M.mixingFrom;for(M.mixingFrom=null,v&&(v.mixingTo=null);v;)this.queue.end(v),v=v.mixingFrom;}M.trackTime+=V;}this.queue.drain();}updateMixingFrom(t,o){let h=t.mixingFrom;if(!h)return  true;let g=this.updateMixingFrom(h,o);return h.animationLast=h.nextAnimationLast,h.trackLast=h.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((h.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=h.mixingFrom,h.mixingFrom&&(h.mixingFrom.mixingTo=t),t.interruptAlpha=h.interruptAlpha,this.queue.end(h)),g):(h.trackTime+=o*h.timeScale,t.mixTime+=o,false)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let o=this.events,h=this.tracks,g=false;for(let U=0,H=h.length;U<H;U++){let K=h[U];if(!K||K.delay>0)continue;g=true;let i=U==0?et.first:K.mixBlend,e=K.alpha;K.mixingFrom?e*=this.applyMixingFrom(K,t,i):K.trackTime>=K.trackEnd&&!K.next&&(e=0);let s=K.animationLast,n=K.getAnimationTime(),r=n,f=o;K.reverse&&(r=K.animation.duration-r,f=null);let c=K.animation.timelines,d=c.length;if(U==0&&e==1||i==et.add)for(let p=0;p<d;p++){var M=c[p];M instanceof Kt?this.applyAttachmentTimeline(M,t,r,i,true):M.apply(t,s,r,f,e,i,ct.mixIn);}else {let p=K.timelineMode,x=K.timelinesRotation.length!=d<<1;x&&(K.timelinesRotation.length=d<<1);for(let w=0;w<d;w++){let C=c[w],F=p[w]==ri?i:et.setup;C instanceof at?this.applyRotateTimeline(C,t,r,e,F,K.timelinesRotation,w<<1,x):C instanceof Kt?this.applyAttachmentTimeline(C,t,r,i,true):(C.apply(t,s,r,f,e,F,ct.mixIn));}}this.queueEvents(K,n),o.length=0,K.nextAnimationLast=n,K.nextTrackLast=K.trackTime;}for(var V=this.unkeyedState+Hi,b=t.slots,v=0,k=t.slots.length;v<k;v++){var I=b[v];if(I.attachmentState==V){var Y=I.data.attachmentName;I.setAttachment(Y?t.getAttachment(I.data.index,Y):null);}}return this.unkeyedState+=2,this.queue.drain(),g}applyMixingFrom(t,o,h){let g=t.mixingFrom;g.mixingFrom&&this.applyMixingFrom(g,o,h);let M=0;t.mixDuration==0?(M=1,h==et.first&&(h=et.setup)):(M=t.mixTime/t.mixDuration,M>1&&(M=1),h!=et.first&&(h=g.mixBlend));let V=M<g.attachmentThreshold,b=M<g.drawOrderThreshold,v=g.animation.timelines,k=v.length,I=g.alpha*t.interruptAlpha,Y=I*(1-M),U=g.animationLast,H=g.getAnimationTime(),K=H,i=null;if(g.reverse?K=g.animation.duration-K:M<g.eventThreshold&&(i=this.events),h==et.add)for(let e=0;e<k;e++)v[e].apply(o,U,K,i,Y,h,ct.mixOut);else {let e=g.timelineMode,s=g.timelineHoldMix,n=g.timelinesRotation.length!=k<<1;n&&(g.timelinesRotation.length=k<<1),g.totalAlpha=0;for(let r=0;r<k;r++){let f=v[r],c=ct.mixOut,d,p=0;switch(e[r]){case ri:if(!b&&f instanceof Ve)continue;d=h,p=Y;break;case hi:d=et.setup,p=Y;break;case ti:d=h,p=I;break;case ci:d=et.setup,p=I;break;default:d=et.setup;let x=s[r];p=I*Math.max(0,1-x.mixTime/x.mixDuration);break}g.totalAlpha+=p,f instanceof at?this.applyRotateTimeline(f,o,K,p,d,g.timelinesRotation,r<<1,n):f instanceof Kt?this.applyAttachmentTimeline(f,o,K,d,V):(b&&f instanceof Ve&&d==et.setup&&(c=ct.mixIn),f.apply(o,U,K,i,p,d,c));}}return t.mixDuration>0&&this.queueEvents(g,H),this.events.length=0,g.nextAnimationLast=H,g.nextTrackLast=g.trackTime,M}applyAttachmentTimeline(t,o,h,g,M){var V=o.slots[t.slotIndex];!V.bone.active||(h<t.frames[0]?(g==et.setup||g==et.first)&&this.setAttachment(o,V,V.data.attachmentName,M):this.setAttachment(o,V,t.attachmentNames[Tt.search1(t.frames,h)],M),V.attachmentState<=this.unkeyedState&&(V.attachmentState=this.unkeyedState+Hi));}setAttachment(t,o,h,g){o.setAttachment(h?t.getAttachment(o.data.index,h):null),g&&(o.attachmentState=this.unkeyedState+cs);}applyRotateTimeline(t,o,h,g,M,V,b,v){if(v&&(V[b]=0),g==1){t.apply(o,0,h,null,1,M,ct.mixIn);return}let k=o.bones[t.boneIndex];if(!k.active)return;let I=t.frames,Y=0,U=0;if(h<I[0])switch(M){case et.setup:k.rotation=k.data.rotation;default:return;case et.first:Y=k.rotation,U=k.data.rotation;}else Y=M==et.setup?k.data.rotation:k.rotation,U=k.data.rotation+t.getCurveValue(h);let H=0,K=U-Y;if(K-=(16384-(16384.499999999996-K/360|0))*360,K==0)H=V[b];else {let i=0,e=0;v?(i=0,e=K):(i=V[b],e=V[b+1]);let s=K>0,n=i>=0;S.signum(e)!=S.signum(K)&&Math.abs(e)<=90&&(Math.abs(i)>180&&(i+=360*S.signum(i)),n=s),H=K+i-i%360,n!=s&&(H+=360*S.signum(i)),V[b]=H;}V[b+1]=K,k.rotation=Y+H*g;}queueEvents(t,o){let h=t.animationStart,g=t.animationEnd,M=g-h,V=t.trackLast%M,b=this.events,v=0,k=b.length;for(;v<k;v++){let Y=b[v];if(Y.time<V)break;Y.time>g||this.queue.event(t,Y);}let I=false;for(t.loop?I=M==0||V>t.trackTime%M:I=o>=g&&t.animationLast<g,I&&this.queue.complete(t);v<k;v++){let Y=b[v];Y.time<h||this.queue.event(t,Y);}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let o=0,h=this.tracks.length;o<h;o++)this.clearTrack(o);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain();}clearTrack(t){if(t>=this.tracks.length)return;let o=this.tracks[t];if(!o)return;this.queue.end(o),this.clearNext(o);let h=o;for(;;){let g=h.mixingFrom;if(!g)break;this.queue.end(g),h.mixingFrom=null,h.mixingTo=null,h=g;}this.tracks[o.trackIndex]=null,this.queue.drain();}setCurrent(t,o,h){let g=this.expandToIndex(t);this.tracks[t]=o,o.previous=null,g&&(h&&this.queue.interrupt(g),o.mixingFrom=g,g.mixingTo=o,o.mixTime=0,g.mixingFrom&&g.mixDuration>0&&(o.interruptAlpha*=Math.min(1,g.mixTime/g.mixDuration)),g.timelinesRotation.length=0),this.queue.start(o);}setAnimation(t,o,h=false){let g=this.data.skeletonData.findAnimation(o);if(!g)throw new Error("Animation not found: "+o);return this.setAnimationWith(t,g,h)}setAnimationWith(t,o,h=false){if(!o)throw new Error("animation cannot be null.");let g=true,M=this.expandToIndex(t);M&&(M.nextTrackLast==-1?(this.tracks[t]=M.mixingFrom,this.queue.interrupt(M),this.queue.end(M),this.clearNext(M),M=M.mixingFrom,g=false):this.clearNext(M));let V=this.trackEntry(t,o,h,M);return this.setCurrent(t,V,g),this.queue.drain(),V}addAnimation(t,o,h=false,g=0){let M=this.data.skeletonData.findAnimation(o);if(!M)throw new Error("Animation not found: "+o);return this.addAnimationWith(t,M,h,g)}addAnimationWith(t,o,h=false,g=0){if(!o)throw new Error("animation cannot be null.");let M=this.expandToIndex(t);if(M)for(;M.next;)M=M.next;let V=this.trackEntry(t,o,h,M);return M?(M.next=V,V.previous=M,g<=0&&(g+=M.getTrackComplete()-V.mixDuration)):(this.setCurrent(t,V,true),this.queue.drain()),V.delay=g,V}setEmptyAnimation(t,o=0){let h=this.setAnimationWith(t,Ze.emptyAnimation(),false);return h.mixDuration=o,h.trackEnd=o,h}addEmptyAnimation(t,o=0,h=0){let g=this.addAnimationWith(t,Ze.emptyAnimation(),false,h);return h<=0&&(g.delay+=g.mixDuration-o),g.mixDuration=o,g.trackEnd=o,g}setEmptyAnimations(t=0){let o=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let h=0,g=this.tracks.length;h<g;h++){let M=this.tracks[h];M&&this.setEmptyAnimation(M.trackIndex,t);}this.queue.drainDisabled=o,this.queue.drain();}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(E.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,o,h,g){let M=this.trackEntryPool.obtain();return M.reset(),M.trackIndex=t,M.animation=o,M.loop=h,M.holdPrevious=false,M.eventThreshold=0,M.attachmentThreshold=0,M.drawOrderThreshold=0,M.animationStart=0,M.animationEnd=o.duration,M.animationLast=-1,M.nextAnimationLast=-1,M.delay=0,M.trackTime=0,M.trackLast=-1,M.nextTrackLast=-1,M.trackEnd=Number.MAX_VALUE,M.timeScale=1,M.alpha=1,M.interruptAlpha=1,M.mixTime=0,M.mixDuration=g?this.data.getMix(g.animation,o):0,M.mixBlend=et.replace,M}clearNext(t){let o=t.next;for(;o;)this.queue.dispose(o),o=o.next;t.next=null;}_animationsChanged(){this.animationsChanged=false,this.propertyIDs.clear();let t=this.tracks;for(let o=0,h=t.length;o<h;o++){let g=t[o];if(g){for(;g.mixingFrom;)g=g.mixingFrom;do(!g.mixingTo||g.mixBlend!=et.add)&&this.computeHold(g),g=g.mixingTo;while(g)}}}computeHold(t){let o=t.mixingTo,h=t.animation.timelines,g=t.animation.timelines.length,M=t.timelineMode;M.length=g;let V=t.timelineHoldMix;V.length=0;let b=this.propertyIDs;if(o&&o.holdPrevious){for(let v=0;v<g;v++)M[v]=b.addAll(h[v].getPropertyIds())?ci:ti;return}t:for(let v=0;v<g;v++){let k=h[v],I=k.getPropertyIds();if(!b.addAll(I))M[v]=ri;else if(!o||k instanceof Kt||k instanceof Ve||k instanceof ye||!o.animation.hasTimeline(I))M[v]=hi;else {for(let Y=o.mixingTo;Y;Y=Y.mixingTo)if(!Y.animation.hasTimeline(I)){if(t.mixDuration>0){M[v]=Mi,V[v]=Y;continue t}break}M[v]=ci;}}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t);}removeListener(t){let o=this.listeners.indexOf(t);o>=0&&this.listeners.splice(o,1);}clearListeners(){this.listeners.length=0;}clearListenerNotifications(){this.queue.clear();}},Xe=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=false,this.holdPrevious=false,this.reverse=false,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=et.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array;}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t;}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0;}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(t!=0){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},$e=class{constructor(t){this.objects=[],this.drainDisabled=false,this.animState=null,this.animState=t;}start(t){this.objects.push(De.start),this.objects.push(t),this.animState.animationsChanged=true;}interrupt(t){this.objects.push(De.interrupt),this.objects.push(t);}end(t){this.objects.push(De.end),this.objects.push(t),this.animState.animationsChanged=true;}dispose(t){this.objects.push(De.dispose),this.objects.push(t);}complete(t){this.objects.push(De.complete),this.objects.push(t);}event(t,o){this.objects.push(De.event),this.objects.push(t),this.objects.push(o);}drain(){if(this.drainDisabled)return;this.drainDisabled=true;let t=this.objects,o=this.animState.listeners;for(let h=0;h<t.length;h+=2){let g=t[h],M=t[h+1];switch(g){case De.start:M.listener&&M.listener.start&&M.listener.start(M);for(let b=0;b<o.length;b++)o[b].start&&o[b].start(M);break;case De.interrupt:M.listener&&M.listener.interrupt&&M.listener.interrupt(M);for(let b=0;b<o.length;b++)o[b].interrupt&&o[b].interrupt(M);break;case De.end:M.listener&&M.listener.end&&M.listener.end(M);for(let b=0;b<o.length;b++)o[b].end&&o[b].end(M);case De.dispose:M.listener&&M.listener.dispose&&M.listener.dispose(M);for(let b=0;b<o.length;b++)o[b].dispose&&o[b].dispose(M);this.animState.trackEntryPool.free(M);break;case De.complete:M.listener&&M.listener.complete&&M.listener.complete(M);for(let b=0;b<o.length;b++)o[b].complete&&o[b].complete(M);break;case De.event:let V=t[h+++2];M.listener&&M.listener.event&&M.listener.event(M,V);for(let b=0;b<o.length;b++)o[b].event&&o[b].event(M,V);break}}this.clear(),this.drainDisabled=false;}clear(){this.objects.length=0;}},De;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event";})(De||(De={}));var xi=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,o){}},ri=0,hi=1,ti=2,ci=3,Mi=4,Hi=1,cs=2,ks=null,er=class{constructor(t){if(this.skeletonData=null,this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t;}setMix(t,o,h){let g=this.skeletonData.findAnimation(t);if(!g)throw new Error("Animation not found: "+t);let M=this.skeletonData.findAnimation(o);if(!M)throw new Error("Animation not found: "+o);this.setMixWith(g,M,h);}setMixWith(t,o,h){if(!t)throw new Error("from cannot be null.");if(!o)throw new Error("to cannot be null.");let g=t.name+"."+o.name;this.animationToMixTime[g]=h;}getMix(t,o){let h=t.name+"."+o.name,g=this.animationToMixTime[h];return g===void 0?this.defaultMix:g}},Ji=class extends st{constructor(t){super(t),this.color=new u(1,1,1,1);}copy(){let t=new Ji(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},Oi=class extends st{constructor(t){super(t),this.endSlot=null,this.color=new u(.2275,.2275,.8078,1);}copy(){let t=new Oi(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},Fs=class{constructor(t){this._image=t;}getImage(){return this._image}},ni;(function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear";})(ni||(ni={}));var Ci;(function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat";})(Ci||(Ci={}));var ds=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0;}},us=class extends Fs{setFilters(t,o){}setWraps(t,o){}dispose(){}},Ys=class{constructor(t){this.pages=new Array,this.regions=new Array;let o=new Ps(t),h=new Array(4),g=null,M=null,V={};V.size=()=>{g.width=parseInt(h[1]),g.height=parseInt(h[2]);},V.format=()=>{},V.filter=()=>{g.minFilter=E.enumValue(ni,h[1]),g.magFilter=E.enumValue(ni,h[2]);},V.repeat=()=>{h[1].indexOf("x")!=-1&&(g.uWrap=Ci.Repeat),h[1].indexOf("y")!=-1&&(g.vWrap=Ci.Repeat);},V.pma=()=>{g.pma=h[1]=="true";};var b={};b.xy=()=>{M.x=parseInt(h[1]),M.y=parseInt(h[2]);},b.size=()=>{M.width=parseInt(h[1]),M.height=parseInt(h[2]);},b.bounds=()=>{M.x=parseInt(h[1]),M.y=parseInt(h[2]),M.width=parseInt(h[3]),M.height=parseInt(h[4]);},b.offset=()=>{M.offsetX=parseInt(h[1]),M.offsetY=parseInt(h[2]);},b.orig=()=>{M.originalWidth=parseInt(h[1]),M.originalHeight=parseInt(h[2]);},b.offsets=()=>{M.offsetX=parseInt(h[1]),M.offsetY=parseInt(h[2]),M.originalWidth=parseInt(h[3]),M.originalHeight=parseInt(h[4]);},b.rotate=()=>{let Y=h[1];Y=="true"?M.degrees=90:Y!="false"&&(M.degrees=parseInt(Y));},b.index=()=>{M.index=parseInt(h[1]);};let v=o.readLine();for(;v&&v.trim().length==0;)v=o.readLine();for(;!(!v||v.trim().length==0||o.readEntry(h,v)==0);)v=o.readLine();let k=null,I=null;for(;v!==null;)if(v.trim().length==0)g=null,v=o.readLine();else if(g){for(M=new Xs,M.page=g,M.name=v;;){let Y=o.readEntry(h,v=o.readLine());if(Y==0)break;let U=b[h[0]];if(U)U();else {k||(k=[],I=[]),k.push(h[0]);let H=[];for(let K=0;K<Y;K++)H.push(parseInt(h[K+1]));I.push(H);}}M.originalWidth==0&&M.originalHeight==0&&(M.originalWidth=M.width,M.originalHeight=M.height),k&&k.length>0&&(M.names=k,M.values=I,k=null,I=null),M.u=M.x/g.width,M.v=M.y/g.height,M.degrees==90?(M.u2=(M.x+M.height)/g.width,M.v2=(M.y+M.width)/g.height):(M.u2=(M.x+M.width)/g.width,M.v2=(M.y+M.height)/g.height),this.regions.push(M);}else {for(g=new Ls,g.name=v.trim();o.readEntry(h,v=o.readLine())!=0;){let Y=V[h[0]];Y&&Y();}this.pages.push(g);}}findRegion(t){for(let o=0;o<this.regions.length;o++)if(this.regions[o].name==t)return this.regions[o];return null}setTextures(t,o=""){for(let h of this.pages)h.setTexture(t.get(o+h.name));}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].texture.dispose();}},Ps=class{constructor(t){this.lines=null,this.index=0,this.lines=t.split(/\r\n|\r|\n/);}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,o){if(!o||(o=o.trim(),o.length==0))return 0;let h=o.indexOf(":");if(h==-1)return 0;t[0]=o.substr(0,h).trim();for(let g=1,M=h+1;;g++){let V=o.indexOf(",",M);if(V==-1)return t[g]=o.substr(M).trim(),g;if(t[g]=o.substr(M,V-M).trim(),M=V+1,g==4)return 4}}},Ls=class{constructor(){this.name=null,this.minFilter=ni.Nearest,this.magFilter=ni.Nearest,this.uWrap=Ci.ClampToEdge,this.vWrap=Ci.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=false;}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);}},Xs=class extends ds{constructor(){super(...arguments),this.page=null,this.name=null,this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null;}},yi=class extends st{constructor(t){super(t),this.region=null,this.path=null,this.regionUVs=null,this.uvs=null,this.triangles=null,this.color=new u(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=null,this.parentMesh=null,this.tempColor=new u(0,0,0,0);}updateUVs(){let t=this.regionUVs;(!this.uvs||this.uvs.length!=t.length)&&(this.uvs=E.newFloatArray(t.length));let o=this.uvs,h=this.uvs.length,g=this.region.u,M=this.region.v,V=0,b=0;if(this.region instanceof Xs){let v=this.region,k=v.page.texture.getImage(),I=k.width,Y=k.height;switch(v.degrees){case 90:g-=(v.originalHeight-v.offsetY-v.height)/I,M-=(v.originalWidth-v.offsetX-v.width)/Y,V=v.originalHeight/I,b=v.originalWidth/Y;for(let U=0;U<h;U+=2)o[U]=g+t[U+1]*V,o[U+1]=M+(1-t[U])*b;return;case 180:g-=(v.originalWidth-v.offsetX-v.width)/I,M-=v.offsetY/Y,V=v.originalWidth/I,b=v.originalHeight/Y;for(let U=0;U<h;U+=2)o[U]=g+(1-t[U])*V,o[U+1]=M+(1-t[U+1])*b;return;case 270:g-=v.offsetY/I,M-=v.offsetX/Y,V=v.originalHeight/I,b=v.originalWidth/Y;for(let U=0;U<h;U+=2)o[U]=g+(1-t[U+1])*V,o[U+1]=M+t[U]*b;return}g-=v.offsetX/I,M-=(v.originalHeight-v.offsetY-v.height)/Y,V=v.originalWidth/I,b=v.originalHeight/Y;}else this.region?(V=this.region.u2-g,b=this.region.v2-M):(g=M=0,V=b=1);for(let v=0;v<h;v+=2)o[v]=g+t[v]*V,o[v+1]=M+t[v+1]*b;}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength);}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new yi(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),E.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),E.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),E.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=new Array(this.edges.length),E.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){let t=new yi(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.updateUVs(),t}},ui=class extends st{constructor(t){super(t),this.lengths=null,this.closed=false,this.constantSpeed=false,this.color=new u(1,1,1,1);}copy(){let t=new ui(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),E.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},Qi=class extends st{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new u(.38,.94,0,1);}computeWorldPosition(t,o){return o.x=this.x*t.a+this.y*t.b+t.worldX,o.y=this.x*t.c+this.y*t.d+t.worldY,o}computeWorldRotation(t){let o=S.cosDeg(this.rotation),h=S.sinDeg(this.rotation),g=o*t.a+h*t.b,M=o*t.c+h*t.d;return Math.atan2(M,g)*S.radDeg}copy(){let t=new Qi(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},_i=class extends lt{constructor(t){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new u(1,1,1,1),this.path=null,this.rendererObject=null,this.region=null,this.offset=E.newFloatArray(8),this.uvs=E.newFloatArray(8),this.tempColor=new u(1,1,1,1);}updateOffset(){this.region;let o=this.width/this.region.originalWidth*this.scaleX,h=this.height/this.region.originalHeight*this.scaleY,g=-this.width/2*this.scaleX+this.region.offsetX*o,M=-this.height/2*this.scaleY+this.region.offsetY*h,V=g+this.region.width*o,b=M+this.region.height*h,v=this.rotation*Math.PI/180,k=Math.cos(v),I=Math.sin(v),Y=this.x,U=this.y,H=g*k+Y,K=g*I,i=M*k+U,e=M*I,s=V*k+Y,n=V*I,r=b*k+U,f=b*I,c=this.offset;c[0]=H-e,c[1]=i+K,c[2]=H-f,c[3]=r+K,c[4]=s-f,c[5]=r+n,c[6]=s-e,c[7]=i+n;}setRegion(t){this.region=t;let o=this.uvs;t.degrees==90?(o[2]=t.u,o[3]=t.v2,o[4]=t.u,o[5]=t.v,o[6]=t.u2,o[7]=t.v,o[0]=t.u2,o[1]=t.v2):(o[0]=t.u,o[1]=t.v2,o[2]=t.u,o[3]=t.v,o[4]=t.u2,o[5]=t.v,o[6]=t.u2,o[7]=t.v2);}computeWorldVertices(t,o,h,g){let M=this.offset,V=t.worldX,b=t.worldY,v=t.a,k=t.b,I=t.c,Y=t.d,U=0,H=0;U=M[0],H=M[1],o[h]=U*v+H*k+V,o[h+1]=U*I+H*Y+b,h+=g,U=M[2],H=M[3],o[h]=U*v+H*k+V,o[h+1]=U*I+H*Y+b,h+=g,U=M[4],H=M[5],o[h]=U*v+H*k+V,o[h+1]=U*I+H*Y+b,h+=g,U=M[6],H=M[7],o[h]=U*v+H*k+V,o[h+1]=U*I+H*Y+b;}copy(){let t=new _i(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,E.arrayCopy(this.uvs,0,t.uvs,0,8),E.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}},Ie=_i;Ie.X1=0,Ie.Y1=1,Ie.C1R=2,Ie.C1G=3,Ie.C1B=4,Ie.C1A=5,Ie.U1=6,Ie.V1=7,Ie.X2=8,Ie.Y2=9,Ie.C2R=10,Ie.C2G=11,Ie.C2B=12,Ie.C2A=13,Ie.U2=14,Ie.V2=15,Ie.X3=16,Ie.Y3=17,Ie.C3R=18,Ie.C3G=19,Ie.C3B=20,Ie.C3A=21,Ie.U3=22,Ie.V3=23,Ie.X4=24,Ie.Y4=25,Ie.C4R=26,Ie.C4G=27,Ie.C4B=28,Ie.C4A=29,Ie.U4=30,Ie.V4=31;var ir=class{constructor(t){this.atlas=null,this.atlas=t;}newRegionAttachment(t,o,h){let g=this.atlas.findRegion(h);if(!g)throw new Error("Region not found in atlas: "+h+" (region attachment: "+o+")");g.renderObject=g;let M=new Ie(o);return M.setRegion(g),M}newMeshAttachment(t,o,h){let g=this.atlas.findRegion(h);if(!g)throw new Error("Region not found in atlas: "+h+" (mesh attachment: "+o+")");g.renderObject=g;let M=new yi(o);return M.region=g,M}newBoundingBoxAttachment(t,o){return new Ji(o)}newPathAttachment(t,o){return new ui(o)}newPointAttachment(t,o){return new Qi(o)}newClippingAttachment(t,o){return new Oi(o)}},Bs=class{constructor(t,o,h){if(this.index=0,this.name=null,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=ii.Normal,this.skinRequired=false,this.color=new u,t<0)throw new Error("index must be >= 0.");if(!o)throw new Error("name cannot be null.");this.index=t,this.name=o,this.parent=h;}},ii;(function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection";})(ii||(ii={}));var Vs=class{constructor(t,o,h){if(this.data=null,this.skeleton=null,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=false,this.active=false,!t)throw new Error("data cannot be null.");if(!o)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=o,this.parent=h,this.setToSetupPose();}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY);}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);}updateWorldTransformWith(t,o,h,g,M,V,b){this.ax=t,this.ay=o,this.arotation=h,this.ascaleX=g,this.ascaleY=M,this.ashearX=V,this.ashearY=b;let v=this.parent;if(!v){let H=this.skeleton,K=h+90+b,i=H.scaleX,e=H.scaleY;this.a=S.cosDeg(h+V)*g*i,this.b=S.cosDeg(K)*M*i,this.c=S.sinDeg(h+V)*g*e,this.d=S.sinDeg(K)*M*e,this.worldX=t*i+H.x,this.worldY=o*e+H.y;return}let k=v.a,I=v.b,Y=v.c,U=v.d;switch(this.worldX=k*t+I*o+v.worldX,this.worldY=Y*t+U*o+v.worldY,this.data.transformMode){case ii.Normal:{let H=h+90+b,K=S.cosDeg(h+V)*g,i=S.cosDeg(H)*M,e=S.sinDeg(h+V)*g,s=S.sinDeg(H)*M;this.a=k*K+I*e,this.b=k*i+I*s,this.c=Y*K+U*e,this.d=Y*i+U*s;return}case ii.OnlyTranslation:{let H=h+90+b;this.a=S.cosDeg(h+V)*g,this.b=S.cosDeg(H)*M,this.c=S.sinDeg(h+V)*g,this.d=S.sinDeg(H)*M;break}case ii.NoRotationOrReflection:{let H=k*k+Y*Y,K=0;H>1e-4?(H=Math.abs(k*U-I*Y)/H,k/=this.skeleton.scaleX,Y/=this.skeleton.scaleY,I=Y*H,U=k*H,K=Math.atan2(Y,k)*S.radDeg):(k=0,Y=0,K=90-Math.atan2(U,I)*S.radDeg);let i=h+V-K,e=h+b-K+90,s=S.cosDeg(i)*g,n=S.cosDeg(e)*M,r=S.sinDeg(i)*g,f=S.sinDeg(e)*M;this.a=k*s-I*r,this.b=k*n-I*f,this.c=Y*s+U*r,this.d=Y*n+U*f;break}case ii.NoScale:case ii.NoScaleOrReflection:{let H=S.cosDeg(h),K=S.sinDeg(h),i=(k*H+I*K)/this.skeleton.scaleX,e=(Y*H+U*K)/this.skeleton.scaleY,s=Math.sqrt(i*i+e*e);s>1e-5&&(s=1/s),i*=s,e*=s,s=Math.sqrt(i*i+e*e),this.data.transformMode==ii.NoScale&&k*U-I*Y<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(s=-s);let n=Math.PI/2+Math.atan2(e,i),r=Math.cos(n)*s,f=Math.sin(n)*s,c=S.cosDeg(V)*g,d=S.cosDeg(90+b)*M,p=S.sinDeg(V)*g,x=S.sinDeg(90+b)*M;this.a=i*c+r*p,this.b=i*d+r*x,this.c=e*c+f*p,this.d=e*d+f*x;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY;}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY;}getWorldRotationX(){return Math.atan2(this.c,this.a)*S.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*S.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*S.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*S.radDeg;return}let o=t.a,h=t.b,g=t.c,M=t.d,V=1/(o*M-h*g),b=this.worldX-t.worldX,v=this.worldY-t.worldY;this.ax=b*M*V-v*h*V,this.ay=v*o*V-b*g*V;let k=V*M,I=V*o,Y=V*h,U=V*g,H=k*this.a-Y*this.c,K=k*this.b-Y*this.d,i=I*this.c-U*this.a,e=I*this.d-U*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(H*H+i*i),this.ascaleX>1e-4){let s=H*e-K*i;this.ascaleY=s/this.ascaleX,this.ashearY=Math.atan2(H*K+i*e,s)*S.radDeg,this.arotation=Math.atan2(i,H)*S.radDeg;}else this.ascaleX=0,this.ascaleY=Math.sqrt(K*K+e*e),this.ashearY=0,this.arotation=90-Math.atan2(e,K)*S.radDeg;}worldToLocal(t){let o=1/(this.a*this.d-this.b*this.c),h=t.x-this.worldX,g=t.y-this.worldY;return t.x=h*this.d*o-g*this.b*o,t.y=g*this.a*o-h*this.c*o,t}localToWorld(t){let o=t.x,h=t.y;return t.x=o*this.a+h*this.b+this.worldX,t.y=o*this.c+h*this.d+this.worldY,t}worldToLocalRotation(t){let o=S.sinDeg(t),h=S.cosDeg(t);return Math.atan2(this.a*o-this.c*h,this.d*h-this.b*o)*S.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let o=S.sinDeg(t),h=S.cosDeg(t);return Math.atan2(h*this.c+o*this.d,h*this.a+o*this.b)*S.radDeg}rotateWorld(t){let o=this.a,h=this.b,g=this.c,M=this.d,V=S.cosDeg(t),b=S.sinDeg(t);this.a=V*o-b*g,this.b=V*h-b*M,this.c=b*o+V*g,this.d=b*h+V*M;}},Ki=class{constructor(t,o,h){this.name=t,this.order=o,this.skinRequired=h;}},fs=class{constructor(t,o="",h=null){this.pathPrefix=null,this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=o,this.downloader=h||new Xi;}start(t){return this.toLoad++,this.pathPrefix+t}success(t,o,h){this.toLoad--,this.loaded++,this.assets[o]=h,t&&t(o,h);}error(t,o,h){this.toLoad--,this.loaded++,this.errors[o]=h,t&&t(o,h);}loadAll(){return new Promise((t,o)=>{let h=()=>{if(this.isLoadingComplete()){this.hasErrors()?o(this.errors):t(this);return}requestAnimationFrame(h);};requestAnimationFrame(h);})}setRawDataURI(t,o){this.downloader.rawDataUris[this.pathPrefix+t]=o;}loadBinary(t,o=null,h=null){t=this.start(t),this.downloader.downloadBinary(t,g=>{this.success(o,t,g);},(g,M)=>{this.error(h,t,`Couldn't load binary ${t}: status ${g}, ${M}`);});}loadText(t,o=null,h=null){t=this.start(t),this.downloader.downloadText(t,g=>{this.success(o,t,g);},(g,M)=>{this.error(h,t,`Couldn't load text ${t}: status ${g}, ${M}`);});}loadJson(t,o=null,h=null){t=this.start(t),this.downloader.downloadJson(t,g=>{this.success(o,t,g);},(g,M)=>{this.error(h,t,`Couldn't load JSON ${t}: status ${g}, ${M}`);});}loadTexture(t,o=null,h=null){if(t=this.start(t),!(typeof window<"u"&&typeof navigator<"u"&&window.document))fetch(t,{mode:"cors"}).then(g=>g.ok?g.blob():(this.error(h,t,`Couldn't load image: ${t}`),null)).then(g=>g?createImageBitmap(g,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(g=>{g&&this.success(o,t,this.textureLoader(g));});else {let g=new Image;g.crossOrigin="anonymous",g.onload=()=>{this.success(o,t,this.textureLoader(g));},g.onerror=()=>{this.error(h,t,`Couldn't load image: ${t}`);},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),g.src=t;}}loadTextureAtlas(t,o=null,h=null,g=null){let M=t.lastIndexOf("/"),V=M>=0?t.substring(0,M+1):"";t=this.start(t),this.downloader.downloadText(t,b=>{try{let v=new Ys(b),k=v.pages.length,I=!1;for(let Y of v.pages)this.loadTexture(g==null?V+Y.name:g[Y.name],(U,H)=>{I||(Y.setTexture(H),--k==0&&this.success(o,t,v));},(U,H)=>{I||this.error(h,t,`Couldn't load texture atlas ${t} page image: ${U}`),I=!0;});}catch(v){this.error(h,t,`Couldn't parse texture atlas ${t}: ${v.message}`);}},(b,v)=>{this.error(h,t,`Couldn't load texture atlas ${t}: status ${b}, ${v}`);});}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let o=this.assets[t];if(o)return o;let h=this.errors[t];throw Error("Asset not found: "+t+(h?`
`+h:""))}remove(t){t=this.pathPrefix+t;let o=this.assets[t];return o.dispose&&o.dispose(),delete this.assets[t],o}removeAll(){for(let t in this.assets){let o=this.assets[t];o.dispose&&o.dispose();}this.assets={};}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll();}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},Xi=class{constructor(){this.callbacks={},this.rawDataUris={};}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let o=t.indexOf("base64,");return o!=-1?(o+=7,atob(t.substr(o))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var o=window.atob(t),h=o.length,g=new Uint8Array(h),M=0;M<h;M++)g[M]=o.charCodeAt(M);return g}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let o=t.indexOf("base64,");if(o==-1)throw new Error("Not a binary data URI.");return o+=7,this.base64ToUint8Array(t.substr(o))}downloadText(t,o,h){if(this.start(t,o,h))return;if(this.rawDataUris[t]){try{let V=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(V));}catch(V){this.finish(t,400,JSON.stringify(V));}return}let g=new XMLHttpRequest;g.overrideMimeType("text/html"),g.open("GET",t,true);let M=()=>{this.finish(t,g.status,g.responseText);};g.onload=M,g.onerror=M,g.send();}downloadJson(t,o,h){this.downloadText(t,g=>{o(JSON.parse(g));},h);}downloadBinary(t,o,h){if(this.start(t,o,h))return;if(this.rawDataUris[t]){try{let V=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(V));}catch(V){this.finish(t,400,JSON.stringify(V));}return}let g=new XMLHttpRequest;g.open("GET",t,true),g.responseType="arraybuffer";let M=()=>{this.finish(t,g.status,g.response);};g.onload=()=>{g.status==200||g.status==0?this.finish(t,200,new Uint8Array(g.response)):M();},g.onerror=M,g.send();}start(t,o,h){let g=this.callbacks[t];try{if(g)return !0;this.callbacks[t]=g=[];}finally{g.push(o,h);}}finish(t,o,h){let g=this.callbacks[t];delete this.callbacks[t];let M=o==200||o==0?[h]:[o,h];for(let V=M.length-1,b=g.length;V<b;V+=2)g[V].apply(null,M);}},Pi=class{constructor(t,o){if(this.data=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!o)throw new Error("data cannot be null.");this.time=t,this.data=o;}},ms=class{constructor(t){this.name=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t;}},Ni=class{constructor(t,o){if(this.data=null,this.bones=null,this.target=null,this.bendDirection=0,this.compress=false,this.stretch=false,this.mix=1,this.softness=0,this.active=false,!t)throw new Error("data cannot be null.");if(!o)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let h=0;h<t.bones.length;h++)this.bones.push(o.findBone(t.bones[h].name));this.target=o.findBone(t.target.name);}isActive(){return this.active}update(){if(this.mix==0)return;let t=this.target,o=this.bones;switch(o.length){case 1:this.apply1(o[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(o[0],o[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(t,o,h,g,M,V,b){let v=t.parent,k=v.a,I=v.b,Y=v.c,U=v.d,H=-t.ashearX-t.arotation,K=0,i=0;switch(t.data.transformMode){case ii.OnlyTranslation:K=o-t.worldX,i=h-t.worldY;break;case ii.NoRotationOrReflection:let n=Math.abs(k*U-I*Y)/(k*k+Y*Y),r=k/t.skeleton.scaleX,f=Y/t.skeleton.scaleY;I=-f*n*t.skeleton.scaleX,U=r*n*t.skeleton.scaleY,H+=Math.atan2(f,r)*S.radDeg;default:let c=o-v.worldX,d=h-v.worldY,p=k*U-I*Y;K=(c*U-d*I)/p-t.ax,i=(d*k-c*Y)/p-t.ay;}H+=Math.atan2(i,K)*S.radDeg,t.ascaleX<0&&(H+=180),H>180?H-=360:H<-180&&(H+=360);let e=t.ascaleX,s=t.ascaleY;if(g||M){switch(t.data.transformMode){case ii.NoScale:case ii.NoScaleOrReflection:K=o-t.worldX,i=h-t.worldY;}let n=t.data.length*e,r=Math.sqrt(K*K+i*i);if(g&&r<n||M&&r>n&&n>1e-4){let f=(r/n-1)*b+1;e*=f,V&&(s*=f);}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+H*b,e,s,t.ashearX,t.ashearY);}apply2(t,o,h,g,M,V,b,v,k){let I=t.ax,Y=t.ay,U=t.ascaleX,H=t.ascaleY,K=U,i=H,e=o.ascaleX,s=0,n=0,r=0;U<0?(U=-U,s=180,r=-1):(s=0,r=1),H<0&&(H=-H,r=-r),e<0?(e=-e,n=180):n=0;let f=o.ax,c=0,d=0,p=0,x=t.a,w=t.b,C=t.c,F=t.d,B=Math.abs(U-H)<=1e-4;!B||V?(c=0,d=x*f+t.worldX,p=C*f+t.worldY):(c=o.ay,d=x*f+w*c+t.worldX,p=C*f+F*c+t.worldY);let X=t.parent;x=X.a,w=X.b,C=X.c,F=X.d;let z=1/(x*F-w*C),W=d-X.worldX,Z=p-X.worldY,J=(W*F-Z*w)*z-I,j=(Z*x-W*C)*z-Y,Q=Math.sqrt(J*J+j*j),tt=o.data.length*e,nt,pt;if(Q<1e-4){this.apply1(t,h,g,false,V,false,k),o.updateWorldTransformWith(f,c,0,o.ascaleX,o.ascaleY,o.ashearX,o.ashearY);return}W=h-X.worldX,Z=g-X.worldY;let mt=(W*F-Z*w)*z-I,gt=(Z*x-W*C)*z-Y,Ct=mt*mt+gt*gt;if(v!=0){v*=U*(e+1)*.5;let Ut=Math.sqrt(Ct),St=Ut-Q-tt*U+v;if(St>0){let It=Math.min(1,St/(v*2))-1;It=(St-v*(1-It*It))/Ut,mt-=It*mt,gt-=It*gt,Ct=mt*mt+gt*gt;}}t:if(B){tt*=U;let Ut=(Ct-Q*Q-tt*tt)/(2*Q*tt);Ut<-1?(Ut=-1,pt=Math.PI*M):Ut>1?(Ut=1,pt=0,V&&(x=(Math.sqrt(Ct)/(Q+tt)-1)*k+1,K*=x,b&&(i*=x))):pt=Math.acos(Ut)*M,x=Q+tt*Ut,w=tt*Math.sin(pt),nt=Math.atan2(gt*x-mt*w,mt*x+gt*w);}else {x=U*tt,w=H*tt;let Ut=x*x,St=w*w,It=Math.atan2(gt,mt);C=St*Q*Q+Ut*Ct-Ut*St;let Ht=-2*St*Q,Se=St-Ut;if(F=Ht*Ht-4*Se*C,F>=0){let Ke=Math.sqrt(F);Ht<0&&(Ke=-Ke),Ke=-(Ht+Ke)*.5;let je=Ke/Se,si=C/Ke,Qe=Math.abs(je)<Math.abs(si)?je:si;if(Qe*Qe<=Ct){Z=Math.sqrt(Ct-Qe*Qe)*M,nt=It-Math.atan2(Z,Qe),pt=Math.atan2(Z/H,(Qe-Q)/U);break t}}let ve=S.PI,be=Q-x,Pe=be*be,Re=0,Ge=0,ne=Q+x,Te=ne*ne,Fe=0;C=-x*Q/(Ut-St),C>=-1&&C<=1&&(C=Math.acos(C),W=x*Math.cos(C)+Q,Z=w*Math.sin(C),F=W*W+Z*Z,F<Pe&&(ve=C,Pe=F,be=W,Re=Z),F>Te&&(Ge=C,Te=F,ne=W,Fe=Z)),Ct<=(Pe+Te)*.5?(nt=It-Math.atan2(Re*M,be),pt=ve*M):(nt=It-Math.atan2(Fe*M,ne),pt=Ge*M);}let Ft=Math.atan2(c,f)*r,Vt=t.arotation;nt=(nt-Ft)*S.radDeg+s-Vt,nt>180?nt-=360:nt<-180&&(nt+=360),t.updateWorldTransformWith(I,Y,Vt+nt*k,K,i,0,0),Vt=o.arotation,pt=((pt+Ft)*S.radDeg-o.ashearX)*r+n-Vt,pt>180?pt-=360:pt<-180&&(pt+=360),o.updateWorldTransformWith(f,c,Vt+pt*k,o.ascaleX,o.ascaleY,o.ashearX,o.ashearY);}},Ds=class extends Ki{constructor(t){super(t,0,false),this.bones=new Array,this.target=null,this.bendDirection=1,this.compress=false,this.stretch=false,this.uniform=false,this.mix=1,this.softness=0;}},$i=class extends Ki{constructor(t){super(t,0,false),this.bones=new Array,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0;}},di;(function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent";})(di||(di={}));var He;(function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional";})(He||(He={}));var fi;(function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale";})(fi||(fi={}));var wi=class{constructor(t,o){if(this.data=null,this.bones=null,this.target=null,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=false,!t)throw new Error("data cannot be null.");if(!o)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let h=0,g=t.bones.length;h<g;h++)this.bones.push(o.findBone(t.bones[h].name));this.target=o.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY;}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof ui))return;let o=this.mixRotate,h=this.mixX,g=this.mixY;if(o==0&&h==0&&g==0)return;let M=this.data,V=M.rotateMode==fi.Tangent,b=M.rotateMode==fi.ChainScale,v=this.bones,k=v.length,I=V?k:k+1,Y=E.setArraySize(this.spaces,I),U=b?this.lengths=E.setArraySize(this.lengths,k):null,H=this.spacing;switch(M.spacingMode){case He.Percent:if(b)for(let c=0,d=I-1;c<d;c++){let p=v[c],x=p.data.length;if(x<wi.epsilon)U[c]=0;else {let w=x*p.a,C=x*p.c;U[c]=Math.sqrt(w*w+C*C);}}E.arrayFill(Y,1,I,H);break;case He.Proportional:let r=0;for(let c=0,d=I-1;c<d;){let p=v[c],x=p.data.length;if(x<wi.epsilon)b&&(U[c]=0),Y[++c]=H;else {let w=x*p.a,C=x*p.c,F=Math.sqrt(w*w+C*C);b&&(U[c]=F),Y[++c]=F,r+=F;}}if(r>0){r=I/r*H;for(let c=1;c<I;c++)Y[c]*=r;}break;default:let f=M.spacingMode==He.Length;for(let c=0,d=I-1;c<d;){let p=v[c],x=p.data.length;if(x<wi.epsilon)b&&(U[c]=0),Y[++c]=H;else {let w=x*p.a,C=x*p.c,F=Math.sqrt(w*w+C*C);b&&(U[c]=F),Y[++c]=(f?x+H:H)*F/x;}}}let K=this.computeWorldPositions(t,I,V),i=K[0],e=K[1],s=M.offsetRotation,n=false;if(s==0)n=M.rotateMode==fi.Chain;else {n=false;let r=this.target.bone;s*=r.a*r.d-r.b*r.c>0?S.degRad:-S.degRad;}for(let r=0,f=3;r<k;r++,f+=3){let c=v[r];c.worldX+=(i-c.worldX)*h,c.worldY+=(e-c.worldY)*g;let d=K[f],p=K[f+1],x=d-i,w=p-e;if(b){let C=U[r];if(C!=0){let F=(Math.sqrt(x*x+w*w)/C-1)*o+1;c.a*=F,c.c*=F;}}if(i=d,e=p,o>0){let C=c.a,F=c.b,B=c.c,X=c.d,z=0,W=0,Z=0;if(V?z=K[f-1]:Y[r+1]==0?z=K[f+2]:z=Math.atan2(w,x),z-=Math.atan2(B,C),n){W=Math.cos(z),Z=Math.sin(z);let J=c.data.length;i+=(J*(W*C-Z*B)-x)*o,e+=(J*(Z*C+W*B)-w)*o;}else z+=s;z>S.PI?z-=S.PI2:z<-S.PI&&(z+=S.PI2),z*=o,W=Math.cos(z),Z=Math.sin(z),c.a=W*C-Z*B,c.b=W*F-Z*X,c.c=Z*C+W*B,c.d=Z*F+W*X;}c.updateAppliedTransform();}}computeWorldPositions(t,o,h){let g=this.target,M=this.position,V=this.spaces,b=E.setArraySize(this.positions,o*3+2),v=null,k=t.closed,I=t.worldVerticesLength,Y=I/6,U=wi.NONE;if(!t.constantSpeed){let j=t.lengths;Y-=k?1:2;let Q=j[Y];this.data.positionMode==di.Percent&&(M*=Q);let tt;switch(this.data.spacingMode){case He.Percent:tt=Q;break;case He.Proportional:tt=Q/o;break;default:tt=1;}v=E.setArraySize(this.world,8);for(let nt=0,pt=0,mt=0;nt<o;nt++,pt+=3){let gt=V[nt]*tt;M+=gt;let Ct=M;if(k)Ct%=Q,Ct<0&&(Ct+=Q),mt=0;else if(Ct<0){U!=wi.BEFORE&&(U=wi.BEFORE,t.computeWorldVertices(g,2,4,v,0,2)),this.addBeforePosition(Ct,v,0,b,pt);continue}else if(Ct>Q){U!=wi.AFTER&&(U=wi.AFTER,t.computeWorldVertices(g,I-6,4,v,0,2)),this.addAfterPosition(Ct-Q,v,0,b,pt);continue}for(;;mt++){let Ft=j[mt];if(!(Ct>Ft)){if(mt==0)Ct/=Ft;else {let Vt=j[mt-1];Ct=(Ct-Vt)/(Ft-Vt);}break}}mt!=U&&(U=mt,k&&mt==Y?(t.computeWorldVertices(g,I-4,4,v,0,2),t.computeWorldVertices(g,0,4,v,4,2)):t.computeWorldVertices(g,mt*6+2,8,v,0,2)),this.addCurvePosition(Ct,v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],b,pt,h||nt>0&&gt==0);}return b}k?(I+=2,v=E.setArraySize(this.world,I),t.computeWorldVertices(g,2,I-4,v,0,2),t.computeWorldVertices(g,0,2,v,I-4,2),v[I-2]=v[0],v[I-1]=v[1]):(Y--,I-=4,v=E.setArraySize(this.world,I),t.computeWorldVertices(g,2,I,v,0,2));let H=E.setArraySize(this.curves,Y),K=0,i=v[0],e=v[1],s=0,n=0,r=0,f=0,c=0,d=0,p=0,x=0,w=0,C=0,F=0,B=0,X=0,z=0;for(let j=0,Q=2;j<Y;j++,Q+=6)s=v[Q],n=v[Q+1],r=v[Q+2],f=v[Q+3],c=v[Q+4],d=v[Q+5],p=(i-s*2+r)*.1875,x=(e-n*2+f)*.1875,w=((s-r)*3-i+c)*.09375,C=((n-f)*3-e+d)*.09375,F=p*2+w,B=x*2+C,X=(s-i)*.75+p+w*.16666667,z=(n-e)*.75+x+C*.16666667,K+=Math.sqrt(X*X+z*z),X+=F,z+=B,F+=w,B+=C,K+=Math.sqrt(X*X+z*z),X+=F,z+=B,K+=Math.sqrt(X*X+z*z),X+=F+w,z+=B+C,K+=Math.sqrt(X*X+z*z),H[j]=K,i=c,e=d;this.data.positionMode==di.Percent&&(M*=K);let W;switch(this.data.spacingMode){case He.Percent:W=K;break;case He.Proportional:W=K/o;break;default:W=1;}let Z=this.segments,J=0;for(let j=0,Q=0,tt=0,nt=0;j<o;j++,Q+=3){let pt=V[j]*W;M+=pt;let mt=M;if(k)mt%=K,mt<0&&(mt+=K),tt=0;else if(mt<0){this.addBeforePosition(mt,v,0,b,Q);continue}else if(mt>K){this.addAfterPosition(mt-K,v,I-4,b,Q);continue}for(;;tt++){let gt=H[tt];if(!(mt>gt)){if(tt==0)mt/=gt;else {let Ct=H[tt-1];mt=(mt-Ct)/(gt-Ct);}break}}if(tt!=U){U=tt;let gt=tt*6;for(i=v[gt],e=v[gt+1],s=v[gt+2],n=v[gt+3],r=v[gt+4],f=v[gt+5],c=v[gt+6],d=v[gt+7],p=(i-s*2+r)*.03,x=(e-n*2+f)*.03,w=((s-r)*3-i+c)*.006,C=((n-f)*3-e+d)*.006,F=p*2+w,B=x*2+C,X=(s-i)*.3+p+w*.16666667,z=(n-e)*.3+x+C*.16666667,J=Math.sqrt(X*X+z*z),Z[0]=J,gt=1;gt<8;gt++)X+=F,z+=B,F+=w,B+=C,J+=Math.sqrt(X*X+z*z),Z[gt]=J;X+=F,z+=B,J+=Math.sqrt(X*X+z*z),Z[8]=J,X+=F+w,z+=B+C,J+=Math.sqrt(X*X+z*z),Z[9]=J,nt=0;}for(mt*=J;;nt++){let gt=Z[nt];if(!(mt>gt)){if(nt==0)mt/=gt;else {let Ct=Z[nt-1];mt=nt+(mt-Ct)/(gt-Ct);}break}}this.addCurvePosition(mt*.1,i,e,s,n,r,f,c,d,b,Q,h||j>0&&pt==0);}return b}addBeforePosition(t,o,h,g,M){let V=o[h],b=o[h+1],v=o[h+2]-V,k=o[h+3]-b,I=Math.atan2(k,v);g[M]=V+t*Math.cos(I),g[M+1]=b+t*Math.sin(I),g[M+2]=I;}addAfterPosition(t,o,h,g,M){let V=o[h+2],b=o[h+3],v=V-o[h],k=b-o[h+1],I=Math.atan2(k,v);g[M]=V+t*Math.cos(I),g[M+1]=b+t*Math.sin(I),g[M+2]=I;}addCurvePosition(t,o,h,g,M,V,b,v,k,I,Y,U){if(t==0||isNaN(t)){I[Y]=o,I[Y+1]=h,I[Y+2]=Math.atan2(M-h,g-o);return}let H=t*t,K=H*t,i=1-t,e=i*i,s=e*i,n=i*t,r=n*3,f=i*r,c=r*t,d=o*s+g*f+V*c+v*K,p=h*s+M*f+b*c+k*K;I[Y]=d,I[Y+1]=p,U&&(t<.001?I[Y+2]=Math.atan2(M-h,g-o):I[Y+2]=Math.atan2(p-(h*e+M*n*2+b*H),d-(o*e+g*n*2+V*H)));}},Bi=wi;Bi.NONE=-1,Bi.BEFORE=-2,Bi.AFTER=-3,Bi.epsilon=1e-5;var gs=class{constructor(t,o){if(this.data=null,this.bone=null,this.color=null,this.darkColor=null,this.attachment=null,this.attachmentTime=0,this.attachmentState=0,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!o)throw new Error("bone cannot be null.");this.data=t,this.bone=o,this.color=new u,this.darkColor=t.darkColor?new u:null,this.setToSetupPose();}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&((!(t instanceof st)||!(this.attachment instanceof st)||t.deformAttachment!=this.attachment.deformAttachment)&&(this.deform.length=0),this.attachment=t,this.attachmentTime=this.bone.skeleton.time);}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t;}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null;}},ps=class{constructor(t,o){if(this.data=null,this.bones=null,this.target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new $,this.active=false,!t)throw new Error("data cannot be null.");if(!o)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let h=0;h<t.bones.length;h++)this.bones.push(o.findBone(t.bones[h].name));this.target=o.findBone(t.target.name);}isActive(){return this.active}update(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld());}applyAbsoluteWorld(){let t=this.mixRotate,o=this.mixX,h=this.mixY,g=this.mixScaleX,M=this.mixScaleY,V=this.mixShearY,b=o!=0||h!=0,v=this.target,k=v.a,I=v.b,Y=v.c,U=v.d,H=k*U-I*Y>0?S.degRad:-S.degRad,K=this.data.offsetRotation*H,i=this.data.offsetShearY*H,e=this.bones;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(t!=0){let f=r.a,c=r.b,d=r.c,p=r.d,x=Math.atan2(Y,k)-Math.atan2(d,f)+K;x>S.PI?x-=S.PI2:x<-S.PI&&(x+=S.PI2),x*=t;let w=Math.cos(x),C=Math.sin(x);r.a=w*f-C*d,r.b=w*c-C*p,r.c=C*f+w*d,r.d=C*c+w*p;}if(b){let f=this.temp;v.localToWorld(f.set(this.data.offsetX,this.data.offsetY)),r.worldX+=(f.x-r.worldX)*o,r.worldY+=(f.y-r.worldY)*h;}if(g!=0){let f=Math.sqrt(r.a*r.a+r.c*r.c);f!=0&&(f=(f+(Math.sqrt(k*k+Y*Y)-f+this.data.offsetScaleX)*g)/f),r.a*=f,r.c*=f;}if(M!=0){let f=Math.sqrt(r.b*r.b+r.d*r.d);f!=0&&(f=(f+(Math.sqrt(I*I+U*U)-f+this.data.offsetScaleY)*M)/f),r.b*=f,r.d*=f;}if(V>0){let f=r.b,c=r.d,d=Math.atan2(c,f),p=Math.atan2(U,I)-Math.atan2(Y,k)-(d-Math.atan2(r.c,r.a));p>S.PI?p-=S.PI2:p<-S.PI&&(p+=S.PI2),p=d+(p+i)*V;let x=Math.sqrt(f*f+c*c);r.b=Math.cos(p)*x,r.d=Math.sin(p)*x;}r.updateAppliedTransform();}}applyRelativeWorld(){let t=this.mixRotate,o=this.mixX,h=this.mixY,g=this.mixScaleX,M=this.mixScaleY,V=this.mixShearY,b=o!=0||h!=0,v=this.target,k=v.a,I=v.b,Y=v.c,U=v.d,H=k*U-I*Y>0?S.degRad:-S.degRad,K=this.data.offsetRotation*H,i=this.data.offsetShearY*H,e=this.bones;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(t!=0){let f=r.a,c=r.b,d=r.c,p=r.d,x=Math.atan2(Y,k)+K;x>S.PI?x-=S.PI2:x<-S.PI&&(x+=S.PI2),x*=t;let w=Math.cos(x),C=Math.sin(x);r.a=w*f-C*d,r.b=w*c-C*p,r.c=C*f+w*d,r.d=C*c+w*p;}if(b){let f=this.temp;v.localToWorld(f.set(this.data.offsetX,this.data.offsetY)),r.worldX+=f.x*o,r.worldY+=f.y*h;}if(g!=0){let f=(Math.sqrt(k*k+Y*Y)-1+this.data.offsetScaleX)*g+1;r.a*=f,r.c*=f;}if(M!=0){let f=(Math.sqrt(I*I+U*U)-1+this.data.offsetScaleY)*M+1;r.b*=f,r.d*=f;}if(V>0){let f=Math.atan2(U,I)-Math.atan2(Y,k);f>S.PI?f-=S.PI2:f<-S.PI&&(f+=S.PI2);let c=r.b,d=r.d;f=Math.atan2(d,c)+(f-S.PI/2+i)*V;let p=Math.sqrt(c*c+d*d);r.b=Math.cos(f)*p,r.d=Math.sin(f)*p;}r.updateAppliedTransform();}}applyAbsoluteLocal(){let t=this.mixRotate,o=this.mixX,h=this.mixY,g=this.mixScaleX,M=this.mixScaleY,V=this.mixShearY,b=this.target,v=this.bones;for(let k=0,I=v.length;k<I;k++){let Y=v[k],U=Y.arotation;if(t!=0){let n=b.arotation-U+this.data.offsetRotation;n-=(16384-(16384.499999999996-n/360|0))*360,U+=n*t;}let H=Y.ax,K=Y.ay;H+=(b.ax-H+this.data.offsetX)*o,K+=(b.ay-K+this.data.offsetY)*h;let i=Y.ascaleX,e=Y.ascaleY;g!=0&&i!=0&&(i=(i+(b.ascaleX-i+this.data.offsetScaleX)*g)/i),M!=0&&e!=0&&(e=(e+(b.ascaleY-e+this.data.offsetScaleY)*M)/e);let s=Y.ashearY;if(V!=0){let n=b.ashearY-s+this.data.offsetShearY;n-=(16384-(16384.499999999996-n/360|0))*360,s+=n*V;}Y.updateWorldTransformWith(H,K,U,i,e,Y.ashearX,s);}}applyRelativeLocal(){let t=this.mixRotate,o=this.mixX,h=this.mixY,g=this.mixScaleX,M=this.mixScaleY,V=this.mixShearY,b=this.target,v=this.bones;for(let k=0,I=v.length;k<I;k++){let Y=v[k],U=Y.arotation+(b.arotation+this.data.offsetRotation)*t,H=Y.ax+(b.ax+this.data.offsetX)*o,K=Y.ay+(b.ay+this.data.offsetY)*h,i=Y.ascaleX*((b.ascaleX-1+this.data.offsetScaleX)*g+1),e=Y.ascaleY*((b.ascaleY-1+this.data.offsetScaleY)*M+1),s=Y.ashearY+(b.ashearY+this.data.offsetShearY)*V;Y.updateWorldTransformWith(H,K,U,i,e,Y.ashearX,s);}}},Os=class{constructor(t){if(this.data=null,this.bones=null,this.slots=null,this.drawOrder=null,this.ikConstraints=null,this.transformConstraints=null,this.pathConstraints=null,this._updateCache=new Array,this.skin=null,this.color=null,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let o=0;o<t.bones.length;o++){let h=t.bones[o],g;if(!h.parent)g=new Vs(h,this,null);else {let M=this.bones[h.parent.index];g=new Vs(h,this,M),M.children.push(g);}this.bones.push(g);}this.slots=new Array,this.drawOrder=new Array;for(let o=0;o<t.slots.length;o++){let h=t.slots[o],g=this.bones[h.boneData.index],M=new gs(h,g);this.slots.push(M),this.drawOrder.push(M);}this.ikConstraints=new Array;for(let o=0;o<t.ikConstraints.length;o++){let h=t.ikConstraints[o];this.ikConstraints.push(new Ni(h,this));}this.transformConstraints=new Array;for(let o=0;o<t.transformConstraints.length;o++){let h=t.transformConstraints[o];this.transformConstraints.push(new ps(h,this));}this.pathConstraints=new Array;for(let o=0;o<t.pathConstraints.length;o++){let h=t.pathConstraints[o];this.pathConstraints.push(new Bi(h,this));}this.color=new u(1,1,1,1),this.updateCache();}updateCache(){let t=this._updateCache;t.length=0;let o=this.bones;for(let I=0,Y=o.length;I<Y;I++){let U=o[I];U.sorted=U.data.skinRequired,U.active=!U.sorted;}if(this.skin){let I=this.skin.bones;for(let Y=0,U=this.skin.bones.length;Y<U;Y++){let H=this.bones[I[Y].index];do H.sorted=false,H.active=true,H=H.parent;while(H)}}let h=this.ikConstraints,g=this.transformConstraints,M=this.pathConstraints,V=h.length,b=g.length,v=M.length,k=V+b+v;t:for(let I=0;I<k;I++){for(let Y=0;Y<V;Y++){let U=h[Y];if(U.data.order==I){this.sortIkConstraint(U);continue t}}for(let Y=0;Y<b;Y++){let U=g[Y];if(U.data.order==I){this.sortTransformConstraint(U);continue t}}for(let Y=0;Y<v;Y++){let U=M[Y];if(U.data.order==I){this.sortPathConstraint(U);continue t}}}for(let I=0,Y=o.length;I<Y;I++)this.sortBone(o[I]);}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&E.contains(this.skin.constraints,t.data,true)),!t.active)return;let o=t.target;this.sortBone(o);let h=t.bones,g=h[0];if(this.sortBone(g),h.length==1)this._updateCache.push(t),this.sortReset(g.children);else {let M=h[h.length-1];this.sortBone(M),this._updateCache.push(t),this.sortReset(g.children),M.sorted=true;}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&E.contains(this.skin.constraints,t.data,true)),!t.active)return;let o=t.target,h=o.data.index,g=o.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,h,g),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,h,g);for(let v=0,k=this.data.skins.length;v<k;v++)this.sortPathConstraintAttachment(this.data.skins[v],h,g);let M=o.getAttachment();M instanceof ui&&this.sortPathConstraintAttachmentWith(M,g);let V=t.bones,b=V.length;for(let v=0;v<b;v++)this.sortBone(V[v]);this._updateCache.push(t);for(let v=0;v<b;v++)this.sortReset(V[v].children);for(let v=0;v<b;v++)V[v].sorted=true;}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&E.contains(this.skin.constraints,t.data,true)),!t.active)return;this.sortBone(t.target);let o=t.bones,h=o.length;if(t.data.local)for(let g=0;g<h;g++){let M=o[g];this.sortBone(M.parent),this.sortBone(M);}else for(let g=0;g<h;g++)this.sortBone(o[g]);this._updateCache.push(t);for(let g=0;g<h;g++)this.sortReset(o[g].children);for(let g=0;g<h;g++)o[g].sorted=true;}sortPathConstraintAttachment(t,o,h){let g=t.attachments[o];if(g)for(let M in g)this.sortPathConstraintAttachmentWith(g[M],h);}sortPathConstraintAttachmentWith(t,o){if(!(t instanceof ui))return;let h=t.bones;if(!h)this.sortBone(o);else {let g=this.bones;for(let M=0,V=h.length;M<V;){let b=h[M++];for(b+=M;M<b;)this.sortBone(g[h[M++]]);}}}sortBone(t){if(t.sorted)return;let o=t.parent;o&&this.sortBone(o),t.sorted=true,this._updateCache.push(t);}sortReset(t){for(let o=0,h=t.length;o<h;o++){let g=t[o];!g.active||(g.sorted&&this.sortReset(g.children),g.sorted=false);}}updateWorldTransform(){let t=this.bones;for(let h=0,g=t.length;h<g;h++){let M=t[h];M.ax=M.x,M.ay=M.y,M.arotation=M.rotation,M.ascaleX=M.scaleX,M.ascaleY=M.scaleY,M.ashearX=M.shearX,M.ashearY=M.shearY;}let o=this._updateCache;for(let h=0,g=o.length;h<g;h++)o[h].update();}updateWorldTransformWith(t){let o=this.getRootBone(),h=t.a,g=t.b,M=t.c,V=t.d;o.worldX=h*this.x+g*this.y+t.worldX,o.worldY=M*this.x+V*this.y+t.worldY;let b=o.rotation+90+o.shearY,v=S.cosDeg(o.rotation+o.shearX)*o.scaleX,k=S.cosDeg(b)*o.scaleY,I=S.sinDeg(o.rotation+o.shearX)*o.scaleX,Y=S.sinDeg(b)*o.scaleY;o.a=(h*v+g*I)*this.scaleX,o.b=(h*k+g*Y)*this.scaleX,o.c=(M*v+V*I)*this.scaleY,o.d=(M*k+V*Y)*this.scaleY;let U=this._updateCache;for(let H=0,K=U.length;H<K;H++){let i=U[H];i!=o&&i.update();}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose();}setBonesToSetupPose(){let t=this.bones;for(let M=0,V=t.length;M<V;M++)t[M].setToSetupPose();let o=this.ikConstraints;for(let M=0,V=o.length;M<V;M++){let b=o[M];b.mix=b.data.mix,b.softness=b.data.softness,b.bendDirection=b.data.bendDirection,b.compress=b.data.compress,b.stretch=b.data.stretch;}let h=this.transformConstraints;for(let M=0,V=h.length;M<V;M++){let b=h[M],v=b.data;b.mixRotate=v.mixRotate,b.mixX=v.mixX,b.mixY=v.mixY,b.mixScaleX=v.mixScaleX,b.mixScaleY=v.mixScaleY,b.mixShearY=v.mixShearY;}let g=this.pathConstraints;for(let M=0,V=g.length;M<V;M++){let b=g[M],v=b.data;b.position=v.position,b.spacing=v.spacing,b.mixRotate=v.mixRotate,b.mixX=v.mixX,b.mixY=v.mixY;}}setSlotsToSetupPose(){let t=this.slots;E.arrayCopy(t,0,this.drawOrder,0,t.length);for(let o=0,h=t.length;o<h;o++)t[o].setToSetupPose();}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let o=this.bones;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.data.name==t)return M}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let o=this.slots;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.data.name==t)return M}return null}setSkinByName(t){let o=this.data.findSkin(t);if(!o)throw new Error("Skin not found: "+t);this.setSkin(o);}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else {let o=this.slots;for(let h=0,g=o.length;h<g;h++){let M=o[h],V=M.data.attachmentName;if(V){let b=t.getAttachment(h,V);b&&M.setAttachment(b);}}}this.skin=t,this.updateCache();}}getAttachmentByName(t,o){return this.getAttachment(this.data.findSlot(t).index,o)}getAttachment(t,o){if(!o)throw new Error("attachmentName cannot be null.");if(this.skin){let h=this.skin.getAttachment(t,o);if(h)return h}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,o):null}setAttachment(t,o){if(!t)throw new Error("slotName cannot be null.");let h=this.slots;for(let g=0,M=h.length;g<M;g++){let V=h[g];if(V.data.name==t){let b=null;if(o&&(b=this.getAttachment(g,o),!b))throw new Error("Attachment not found: "+o+", for slot: "+t);V.setAttachment(b);return}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let o=this.ikConstraints;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.data.name==t)return M}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let o=this.transformConstraints;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.data.name==t)return M}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let o=this.pathConstraints;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.data.name==t)return M}return null}getBoundsRect(){let t=new $,o=new $;return this.getBounds(t,o),{x:t.x,y:t.y,width:o.x,height:o.y}}getBounds(t,o,h=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!o)throw new Error("size cannot be null.");let g=this.drawOrder,M=Number.POSITIVE_INFINITY,V=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,v=Number.NEGATIVE_INFINITY;for(let k=0,I=g.length;k<I;k++){let Y=g[k];if(!Y.bone.active)continue;let U=0,H=null,K=Y.getAttachment();if(K instanceof Ie)U=8,H=E.setArraySize(h,U,0),K.computeWorldVertices(Y.bone,H,0,2);else if(K instanceof yi){let i=K;U=i.worldVerticesLength,H=E.setArraySize(h,U,0),i.computeWorldVertices(Y,0,U,H,0,2);}if(H)for(let i=0,e=H.length;i<e;i+=2){let s=H[i],n=H[i+1];M=Math.min(M,s),V=Math.min(V,n),b=Math.max(b,s),v=Math.max(v,n);}}t.set(M,V),o.set(b-M,v-V);}update(t){this.time+=t;}},vs=class{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null;}findBone(t){if(!t)throw new Error("boneName cannot be null.");let o=this.bones;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.name==t)return M}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let o=this.slots;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.name==t)return M}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let o=this.skins;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.name==t)return M}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let o=this.events;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.name==t)return M}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let o=this.animations;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.name==t)return M}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let o=this.ikConstraints;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.name==t)return M}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let o=this.transformConstraints;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.name==t)return M}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let o=this.pathConstraints;for(let h=0,g=o.length;h<g;h++){let M=o[h];if(M.name==t)return M}return null}},ts=class{constructor(t=0,o=null,h=null){this.slotIndex=t,this.name=o,this.attachment=h;}},Ui=class{constructor(t){if(this.name=null,this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t;}setAttachment(t,o,h){if(!h)throw new Error("attachment cannot be null.");let g=this.attachments;t>=g.length&&(g.length=t+1),g[t]||(g[t]={}),g[t][o]=h;}addSkin(t){for(let g=0;g<t.bones.length;g++){let M=t.bones[g],V=false;for(let b=0;b<this.bones.length;b++)if(this.bones[b]==M){V=true;break}V||this.bones.push(M);}for(let g=0;g<t.constraints.length;g++){let M=t.constraints[g],V=false;for(let b=0;b<this.constraints.length;b++)if(this.constraints[b]==M){V=true;break}V||this.constraints.push(M);}let o=t.getAttachments();for(let g=0;g<o.length;g++){var h=o[g];this.setAttachment(h.slotIndex,h.name,h.attachment);}}copySkin(t){for(let g=0;g<t.bones.length;g++){let M=t.bones[g],V=false;for(let b=0;b<this.bones.length;b++)if(this.bones[b]==M){V=true;break}V||this.bones.push(M);}for(let g=0;g<t.constraints.length;g++){let M=t.constraints[g],V=false;for(let b=0;b<this.constraints.length;b++)if(this.constraints[b]==M){V=true;break}V||this.constraints.push(M);}let o=t.getAttachments();for(let g=0;g<o.length;g++){var h=o[g];!h.attachment||(h.attachment instanceof yi?(h.attachment=h.attachment.newLinkedMesh(),this.setAttachment(h.slotIndex,h.name,h.attachment)):(h.attachment=h.attachment.copy(),this.setAttachment(h.slotIndex,h.name,h.attachment)));}}getAttachment(t,o){let h=this.attachments[t];return h?h[o]:null}removeAttachment(t,o){let h=this.attachments[t];h&&(h[o]=null);}getAttachments(){let t=new Array;for(var o=0;o<this.attachments.length;o++){let h=this.attachments[o];if(h)for(let g in h){let M=h[g];M&&t.push(new ts(o,g,M));}}return t}getAttachmentsForSlot(t,o){let h=this.attachments[t];if(h)for(let g in h){let M=h[g];M&&o.push(new ts(t,g,M));}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0;}attachAll(t,o){let h=0;for(let g=0;g<t.slots.length;g++){let M=t.slots[g],V=M.getAttachment();if(V&&h<o.attachments.length){let b=o.attachments[h];for(let v in b){let k=b[v];if(V==k){let I=this.getAttachment(h,v);I&&M.setAttachment(I);break}}}h++;}}},es=class{constructor(t,o,h){if(this.index=0,this.name=null,this.boneData=null,this.color=new u(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=null,t<0)throw new Error("index must be >= 0.");if(!o)throw new Error("name cannot be null.");if(!h)throw new Error("boneData cannot be null.");this.index=t,this.name=o,this.boneData=h;}},ei;(function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen";})(ei||(ei={}));var is=class extends Ki{constructor(t){super(t,0,false),this.bones=new Array,this.target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=false,this.local=false;}},sr=class{constructor(t){this.scale=1,this.attachmentLoader=null,this.linkedMeshes=new Array,this.attachmentLoader=t;}readSkeletonData(t){let o=this.scale,h=new vs;h.name="";let g=new rr(t),M=g.readInt32(),V=g.readInt32();h.hash=V==0&&M==0?null:V.toString(16)+M.toString(16),h.version=g.readString(),h.x=g.readFloat(),h.y=g.readFloat(),h.width=g.readFloat(),h.height=g.readFloat();let b=g.readBoolean();b&&(h.fps=g.readFloat(),h.imagesPath=g.readString(),h.audioPath=g.readString());let v=0;v=g.readInt(true);for(let I=0;I<v;I++)g.strings.push(g.readString());v=g.readInt(true);for(let I=0;I<v;I++){let Y=g.readString(),U=I==0?null:h.bones[g.readInt(true)],H=new Bs(I,Y,U);H.rotation=g.readFloat(),H.x=g.readFloat()*o,H.y=g.readFloat()*o,H.scaleX=g.readFloat(),H.scaleY=g.readFloat(),H.shearX=g.readFloat(),H.shearY=g.readFloat(),H.length=g.readFloat()*o,H.transformMode=g.readInt(true),H.skinRequired=g.readBoolean(),b&&u.rgba8888ToColor(H.color,g.readInt32()),h.bones.push(H);}v=g.readInt(true);for(let I=0;I<v;I++){let Y=g.readString(),U=h.bones[g.readInt(true)],H=new es(I,Y,U);u.rgba8888ToColor(H.color,g.readInt32());let K=g.readInt32();K!=-1&&u.rgb888ToColor(H.darkColor=new u,K),H.attachmentName=g.readStringRef(),H.blendMode=g.readInt(true),h.slots.push(H);}v=g.readInt(true);for(let I=0,Y;I<v;I++){let U=new Ds(g.readString());U.order=g.readInt(true),U.skinRequired=g.readBoolean(),Y=g.readInt(true);for(let H=0;H<Y;H++)U.bones.push(h.bones[g.readInt(true)]);U.target=h.bones[g.readInt(true)],U.mix=g.readFloat(),U.softness=g.readFloat()*o,U.bendDirection=g.readByte(),U.compress=g.readBoolean(),U.stretch=g.readBoolean(),U.uniform=g.readBoolean(),h.ikConstraints.push(U);}v=g.readInt(true);for(let I=0,Y;I<v;I++){let U=new is(g.readString());U.order=g.readInt(true),U.skinRequired=g.readBoolean(),Y=g.readInt(true);for(let H=0;H<Y;H++)U.bones.push(h.bones[g.readInt(true)]);U.target=h.bones[g.readInt(true)],U.local=g.readBoolean(),U.relative=g.readBoolean(),U.offsetRotation=g.readFloat(),U.offsetX=g.readFloat()*o,U.offsetY=g.readFloat()*o,U.offsetScaleX=g.readFloat(),U.offsetScaleY=g.readFloat(),U.offsetShearY=g.readFloat(),U.mixRotate=g.readFloat(),U.mixX=g.readFloat(),U.mixY=g.readFloat(),U.mixScaleX=g.readFloat(),U.mixScaleY=g.readFloat(),U.mixShearY=g.readFloat(),h.transformConstraints.push(U);}v=g.readInt(true);for(let I=0,Y;I<v;I++){let U=new $i(g.readString());U.order=g.readInt(true),U.skinRequired=g.readBoolean(),Y=g.readInt(true);for(let H=0;H<Y;H++)U.bones.push(h.bones[g.readInt(true)]);U.target=h.slots[g.readInt(true)],U.positionMode=g.readInt(true),U.spacingMode=g.readInt(true),U.rotateMode=g.readInt(true),U.offsetRotation=g.readFloat(),U.position=g.readFloat(),U.positionMode==di.Fixed&&(U.position*=o),U.spacing=g.readFloat(),(U.spacingMode==He.Length||U.spacingMode==He.Fixed)&&(U.spacing*=o),U.mixRotate=g.readFloat(),U.mixX=g.readFloat(),U.mixY=g.readFloat(),h.pathConstraints.push(U);}let k=this.readSkin(g,h,true,b);k&&(h.defaultSkin=k,h.skins.push(k));{let I=h.skins.length;for(E.setArraySize(h.skins,v=I+g.readInt(true));I<v;I++)h.skins[I]=this.readSkin(g,h,false,b);}v=this.linkedMeshes.length;for(let I=0;I<v;I++){let Y=this.linkedMeshes[I],U=(Y.skin?h.findSkin(Y.skin):h.defaultSkin).getAttachment(Y.slotIndex,Y.parent);Y.mesh.deformAttachment=Y.inheritDeform?U:Y.mesh,Y.mesh.setParentMesh(U),Y.mesh.updateUVs();}this.linkedMeshes.length=0,v=g.readInt(true);for(let I=0;I<v;I++){let Y=new ms(g.readStringRef());Y.intValue=g.readInt(false),Y.floatValue=g.readFloat(),Y.stringValue=g.readString(),Y.audioPath=g.readString(),Y.audioPath&&(Y.volume=g.readFloat(),Y.balance=g.readFloat()),h.events.push(Y);}v=g.readInt(true);for(let I=0;I<v;I++)h.animations.push(this.readAnimation(g,g.readString(),h));return h}readSkin(t,o,h,g){let M=null,V=0;if(h){if(V=t.readInt(true),V==0)return null;M=new Ui("default");}else {M=new Ui(t.readStringRef()),M.bones.length=t.readInt(true);for(let b=0,v=M.bones.length;b<v;b++)M.bones[b]=o.bones[t.readInt(true)];for(let b=0,v=t.readInt(true);b<v;b++)M.constraints.push(o.ikConstraints[t.readInt(true)]);for(let b=0,v=t.readInt(true);b<v;b++)M.constraints.push(o.transformConstraints[t.readInt(true)]);for(let b=0,v=t.readInt(true);b<v;b++)M.constraints.push(o.pathConstraints[t.readInt(true)]);V=t.readInt(true);}for(let b=0;b<V;b++){let v=t.readInt(true);for(let k=0,I=t.readInt(true);k<I;k++){let Y=t.readStringRef(),U=this.readAttachment(t,o,M,v,Y,g);U&&M.setAttachment(v,Y,U);}}return M}readAttachment(t,o,h,g,M,V){let b=this.scale,v=t.readStringRef();switch(v||(v=M),t.readByte()){case Ai.Region:{let k=t.readStringRef(),I=t.readFloat(),Y=t.readFloat(),U=t.readFloat(),H=t.readFloat(),K=t.readFloat(),i=t.readFloat(),e=t.readFloat(),s=t.readInt32();k||(k=v);let n=this.attachmentLoader.newRegionAttachment(h,v,k);return n?(n.path=k,n.x=Y*b,n.y=U*b,n.scaleX=H,n.scaleY=K,n.rotation=I,n.width=i*b,n.height=e*b,u.rgba8888ToColor(n.color,s),n.updateOffset(),n):null}case Ai.BoundingBox:{let k=t.readInt(true),I=this.readVertices(t,k),Y=V?t.readInt32():0,U=this.attachmentLoader.newBoundingBoxAttachment(h,v);return U?(U.worldVerticesLength=k<<1,U.vertices=I.vertices,U.bones=I.bones,V&&u.rgba8888ToColor(U.color,Y),U):null}case Ai.Mesh:{let k=t.readStringRef(),I=t.readInt32(),Y=t.readInt(true),U=this.readFloatArray(t,Y<<1,1),H=this.readShortArray(t),K=this.readVertices(t,Y),i=t.readInt(true),e=null,s=0,n=0;V&&(e=this.readShortArray(t),s=t.readFloat(),n=t.readFloat()),k||(k=v);let r=this.attachmentLoader.newMeshAttachment(h,v,k);return r?(r.path=k,u.rgba8888ToColor(r.color,I),r.bones=K.bones,r.vertices=K.vertices,r.worldVerticesLength=Y<<1,r.triangles=H,r.regionUVs=U,r.updateUVs(),r.hullLength=i<<1,V&&(r.edges=e,r.width=s*b,r.height=n*b),r):null}case Ai.LinkedMesh:{let k=t.readStringRef(),I=t.readInt32(),Y=t.readStringRef(),U=t.readStringRef(),H=t.readBoolean(),K=0,i=0;V&&(K=t.readFloat(),i=t.readFloat()),k||(k=v);let e=this.attachmentLoader.newMeshAttachment(h,v,k);return e?(e.path=k,u.rgba8888ToColor(e.color,I),V&&(e.width=K*b,e.height=i*b),this.linkedMeshes.push(new nr(e,Y,g,U,H)),e):null}case Ai.Path:{let k=t.readBoolean(),I=t.readBoolean(),Y=t.readInt(true),U=this.readVertices(t,Y),H=E.newArray(Y/3,0);for(let e=0,s=H.length;e<s;e++)H[e]=t.readFloat()*b;let K=V?t.readInt32():0,i=this.attachmentLoader.newPathAttachment(h,v);return i?(i.closed=k,i.constantSpeed=I,i.worldVerticesLength=Y<<1,i.vertices=U.vertices,i.bones=U.bones,i.lengths=H,V&&u.rgba8888ToColor(i.color,K),i):null}case Ai.Point:{let k=t.readFloat(),I=t.readFloat(),Y=t.readFloat(),U=V?t.readInt32():0,H=this.attachmentLoader.newPointAttachment(h,v);return H?(H.x=I*b,H.y=Y*b,H.rotation=k,V&&u.rgba8888ToColor(H.color,U),H):null}case Ai.Clipping:{let k=t.readInt(true),I=t.readInt(true),Y=this.readVertices(t,I),U=V?t.readInt32():0,H=this.attachmentLoader.newClippingAttachment(h,v);return H?(H.endSlot=o.slots[k],H.worldVerticesLength=I<<1,H.vertices=Y.vertices,H.bones=Y.bones,V&&u.rgba8888ToColor(H.color,U),H):null}}return null}readVertices(t,o){let h=this.scale,g=o<<1,M=new ar;if(!t.readBoolean())return M.vertices=this.readFloatArray(t,g,h),M;let V=new Array,b=new Array;for(let v=0;v<o;v++){let k=t.readInt(true);b.push(k);for(let I=0;I<k;I++)b.push(t.readInt(true)),V.push(t.readFloat()*h),V.push(t.readFloat()*h),V.push(t.readFloat());}return M.vertices=E.toFloatArray(V),M.bones=b,M}readFloatArray(t,o,h){let g=new Array(o);if(h==1)for(let M=0;M<o;M++)g[M]=t.readFloat();else for(let M=0;M<o;M++)g[M]=t.readFloat()*h;return g}readShortArray(t){let o=t.readInt(true),h=new Array(o);for(let g=0;g<o;g++)h[g]=t.readShort();return h}readAnimation(t,o,h){t.readInt(true);let g=new Array,M=this.scale;for(let Y=0,U=t.readInt(true);Y<U;Y++){let H=t.readInt(true);for(let K=0,i=t.readInt(true);K<i;K++){let e=t.readByte(),s=t.readInt(true),n=s-1;switch(e){case zs:{let r=new Kt(s,H);for(let f=0;f<s;f++)r.setFrame(f,t.readFloat(),t.readStringRef());g.push(r);break}case Ee:{let r=t.readInt(true),f=new kt(s,r,H),c=t.readFloat(),d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255;for(let C=0,F=0;f.setFrame(C,c,d,p,x,w),C!=n;C++){let B=t.readFloat(),X=t.readUnsignedByte()/255,z=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255;switch(t.readByte()){case mi:f.setStepped(C);break;case gi:Ce(t,f,F++,C,0,c,B,d,X,1),Ce(t,f,F++,C,1,c,B,p,z,1),Ce(t,f,F++,C,2,c,B,x,W,1),Ce(t,f,F++,C,3,c,B,w,Z,1);}c=B,d=X,p=z,x=W,w=Z;}g.push(f);break}case br:{let r=t.readInt(true),f=new bt(s,r,H),c=t.readFloat(),d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;for(let w=0,C=0;f.setFrame(w,c,d,p,x),w!=n;w++){let F=t.readFloat(),B=t.readUnsignedByte()/255,X=t.readUnsignedByte()/255,z=t.readUnsignedByte()/255;switch(t.readByte()){case mi:f.setStepped(w);break;case gi:Ce(t,f,C++,w,0,c,F,d,B,1),Ce(t,f,C++,w,1,c,F,p,X,1),Ce(t,f,C++,w,2,c,F,x,z,1);}c=F,d=B,p=X,x=z;}g.push(f);break}case Tr:{let r=t.readInt(true),f=new Qt(s,r,H),c=t.readFloat(),d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255;for(let X=0,z=0;f.setFrame(X,c,d,p,x,w,C,F,B),X!=n;X++){let W=t.readFloat(),Z=t.readUnsignedByte()/255,J=t.readUnsignedByte()/255,j=t.readUnsignedByte()/255,Q=t.readUnsignedByte()/255,tt=t.readUnsignedByte()/255,nt=t.readUnsignedByte()/255,pt=t.readUnsignedByte()/255;switch(t.readByte()){case mi:f.setStepped(X);break;case gi:Ce(t,f,z++,X,0,c,W,d,Z,1),Ce(t,f,z++,X,1,c,W,p,J,1),Ce(t,f,z++,X,2,c,W,x,j,1),Ce(t,f,z++,X,3,c,W,w,Q,1),Ce(t,f,z++,X,4,c,W,C,tt,1),Ce(t,f,z++,X,5,c,W,F,nt,1),Ce(t,f,z++,X,6,c,W,B,pt,1);}c=W,d=Z,p=J,x=j,w=Q,C=tt,F=nt,B=pt;}g.push(f);break}case Ir:{let r=t.readInt(true),f=new ie(s,r,H),c=t.readFloat(),d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255;for(let B=0,X=0;f.setFrame(B,c,d,p,x,w,C,F),B!=n;B++){let z=t.readFloat(),W=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255,J=t.readUnsignedByte()/255,j=t.readUnsignedByte()/255,Q=t.readUnsignedByte()/255,tt=t.readUnsignedByte()/255;switch(t.readByte()){case mi:f.setStepped(B);break;case gi:Ce(t,f,X++,B,0,c,z,d,W,1),Ce(t,f,X++,B,1,c,z,p,Z,1),Ce(t,f,X++,B,2,c,z,x,J,1),Ce(t,f,X++,B,3,c,z,w,j,1),Ce(t,f,X++,B,4,c,z,C,Q,1),Ce(t,f,X++,B,5,c,z,F,tt,1);}c=z,d=W,p=Z,x=J,w=j,C=Q,F=tt;}g.push(f);break}case Cr:{let r=new wt(s,t.readInt(true),H),f=t.readFloat(),c=t.readUnsignedByte()/255;for(let d=0,p=0;r.setFrame(d,f,c),d!=n;d++){let x=t.readFloat(),w=t.readUnsignedByte()/255;switch(t.readByte()){case mi:r.setStepped(d);break;case gi:Ce(t,r,p++,d,0,f,x,c,w,1);}f=x,c=w;}g.push(r);break}}}}for(let Y=0,U=t.readInt(true);Y<U;Y++){let H=t.readInt(true);for(let K=0,i=t.readInt(true);K<i;K++){let e=t.readByte(),s=t.readInt(true),n=t.readInt(true);switch(e){case Ns:g.push(Si(t,new at(s,n,H),1));break;case Ms:g.push(xs(t,new _(s,n,H),M));break;case Us:g.push(Si(t,new ot(s,n,H),M));break;case Ws:g.push(Si(t,new xt(s,n,H),M));break;case Gs:g.push(xs(t,new Mt(s,n,H),1));break;case wr:g.push(Si(t,new Xt(s,n,H),1));break;case or:g.push(Si(t,new Dt(s,n,H),1));break;case Ar:g.push(xs(t,new Lt(s,n,H),1));break;case Sr:g.push(Si(t,new Bt(s,n,H),1));break;case ai:g.push(Si(t,new Gt(s,n,H),1));}}}for(let Y=0,U=t.readInt(true);Y<U;Y++){let H=t.readInt(true),K=t.readInt(true),i=K-1,e=new qe(K,t.readInt(true),H),s=t.readFloat(),n=t.readFloat(),r=t.readFloat()*M;for(let f=0,c=0;e.setFrame(f,s,n,r,t.readByte(),t.readBoolean(),t.readBoolean()),f!=i;f++){let d=t.readFloat(),p=t.readFloat(),x=t.readFloat()*M;switch(t.readByte()){case mi:e.setStepped(f);break;case gi:Ce(t,e,c++,f,0,s,d,n,p,1),Ce(t,e,c++,f,1,s,d,r,x,M);}s=d,n=p,r=x;}g.push(e);}for(let Y=0,U=t.readInt(true);Y<U;Y++){let H=t.readInt(true),K=t.readInt(true),i=K-1,e=new ze(K,t.readInt(true),H),s=t.readFloat(),n=t.readFloat(),r=t.readFloat(),f=t.readFloat(),c=t.readFloat(),d=t.readFloat(),p=t.readFloat();for(let x=0,w=0;e.setFrame(x,s,n,r,f,c,d,p),x!=i;x++){let C=t.readFloat(),F=t.readFloat(),B=t.readFloat(),X=t.readFloat(),z=t.readFloat(),W=t.readFloat(),Z=t.readFloat();switch(t.readByte()){case mi:e.setStepped(x);break;case gi:Ce(t,e,w++,x,0,s,C,n,F,1),Ce(t,e,w++,x,1,s,C,r,B,1),Ce(t,e,w++,x,2,s,C,f,X,1),Ce(t,e,w++,x,3,s,C,c,z,1),Ce(t,e,w++,x,4,s,C,d,W,1),Ce(t,e,w++,x,5,s,C,p,Z,1);}s=C,n=F,r=B,f=X,c=z,d=W,p=Z;}g.push(e);}for(let Y=0,U=t.readInt(true);Y<U;Y++){let H=t.readInt(true),K=h.pathConstraints[H];for(let i=0,e=t.readInt(true);i<e;i++)switch(t.readByte()){case Er:g.push(Si(t,new Ue(t.readInt(true),t.readInt(true),H),K.positionMode==di.Fixed?M:1));break;case Rr:g.push(Si(t,new _e(t.readInt(true),t.readInt(true),H),K.spacingMode==He.Length||K.spacingMode==He.Fixed?M:1));break;case kr:let s=new We(t.readInt(true),t.readInt(true),H),n=t.readFloat(),r=t.readFloat(),f=t.readFloat(),c=t.readFloat();for(let d=0,p=0,x=s.getFrameCount()-1;s.setFrame(d,n,r,f,c),d!=x;d++){let w=t.readFloat(),C=t.readFloat(),F=t.readFloat(),B=t.readFloat();switch(t.readByte()){case mi:s.setStepped(d);break;case gi:Ce(t,s,p++,d,0,n,w,r,C,1),Ce(t,s,p++,d,1,n,w,f,F,1),Ce(t,s,p++,d,2,n,w,c,B,1);}n=w,r=C,f=F,c=B;}g.push(s);}}for(let Y=0,U=t.readInt(true);Y<U;Y++){let H=h.skins[t.readInt(true)];for(let K=0,i=t.readInt(true);K<i;K++){let e=t.readInt(true);for(let s=0,n=t.readInt(true);s<n;s++){let r=t.readStringRef(),f=H.getAttachment(e,r),c=f.bones,d=f.vertices,p=c?d.length/3*2:d.length,x=t.readInt(true),w=x-1,C=t.readInt(true),F=new Ae(x,C,e,f),B=t.readFloat();for(let X=0,z=0;;X++){let W,Z=t.readInt(true);if(Z==0)W=c?E.newFloatArray(p):d;else {W=E.newFloatArray(p);let j=t.readInt(true);if(Z+=j,M==1)for(let Q=j;Q<Z;Q++)W[Q]=t.readFloat();else for(let Q=j;Q<Z;Q++)W[Q]=t.readFloat()*M;if(!c)for(let Q=0,tt=W.length;Q<tt;Q++)W[Q]+=d[Q];}if(F.setFrame(X,B,W),X==w)break;let J=t.readFloat();switch(t.readByte()){case mi:F.setStepped(X);break;case gi:Ce(t,F,z++,X,0,B,J,0,1,1);}B=J;}g.push(F);}}}let v=t.readInt(true);if(v>0){let Y=new Ve(v),U=h.slots.length;for(let H=0;H<v;H++){let K=t.readFloat(),i=t.readInt(true),e=E.newArray(U,0);for(let f=U-1;f>=0;f--)e[f]=-1;let s=E.newArray(U-i,0),n=0,r=0;for(let f=0;f<i;f++){let c=t.readInt(true);for(;n!=c;)s[r++]=n++;e[n+t.readInt(true)]=n++;}for(;n<U;)s[r++]=n++;for(let f=U-1;f>=0;f--)e[f]==-1&&(e[f]=s[--r]);Y.setFrame(H,K,e);}g.push(Y);}let k=t.readInt(true);if(k>0){let Y=new ye(k);for(let U=0;U<k;U++){let H=t.readFloat(),K=h.events[t.readInt(true)],i=new Pi(H,K);i.intValue=t.readInt(false),i.floatValue=t.readFloat(),i.stringValue=t.readBoolean()?t.readString():K.stringValue,i.data.audioPath&&(i.volume=t.readFloat(),i.balance=t.readFloat()),Y.setFrame(U,i);}g.push(Y);}let I=0;for(let Y=0,U=g.length;Y<U;Y++)I=Math.max(I,g[Y].getDuration());return new G(o,g,I)}},rr=class{constructor(t,o=new Array,h=0,g=new DataView(t.buffer)){this.strings=o,this.index=h,this.buffer=g;}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let o=this.readByte(),h=o&127;return (o&128)!=0&&(o=this.readByte(),h|=(o&127)<<7,(o&128)!=0&&(o=this.readByte(),h|=(o&127)<<14,(o&128)!=0&&(o=this.readByte(),h|=(o&127)<<21,(o&128)!=0&&(o=this.readByte(),h|=(o&127)<<28)))),t?h:h>>>1^-(h&1)}readStringRef(){let t=this.readInt(true);return t==0?null:this.strings[t-1]}readString(){let t=this.readInt(true);switch(t){case 0:return null;case 1:return ""}t--;let o="";for(let g=0;g<t;){let M=this.readUnsignedByte();switch(M>>4){case 12:case 13:o+=String.fromCharCode((M&31)<<6|this.readByte()&63),g+=2;break;case 14:o+=String.fromCharCode((M&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),g+=3;break;default:o+=String.fromCharCode(M),g++;}}return o}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return this.readByte()!=0}},nr=class{constructor(t,o,h,g,M){this.mesh=t,this.skin=o,this.slotIndex=h,this.parent=g,this.inheritDeform=M;}},ar=class{constructor(t=null,o=null){this.bones=t,this.vertices=o;}},Ai;(function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping";})(Ai||(Ai={}));function Si(t,o,h){let g=t.readFloat(),M=t.readFloat()*h;for(let V=0,b=0,v=o.getFrameCount()-1;o.setFrame(V,g,M),V!=v;V++){let k=t.readFloat(),I=t.readFloat()*h;switch(t.readByte()){case mi:o.setStepped(V);break;case gi:Ce(t,o,b++,V,0,g,k,M,I,h);}g=k,M=I;}return o}function xs(t,o,h){let g=t.readFloat(),M=t.readFloat()*h,V=t.readFloat()*h;for(let b=0,v=0,k=o.getFrameCount()-1;o.setFrame(b,g,M,V),b!=k;b++){let I=t.readFloat(),Y=t.readFloat()*h,U=t.readFloat()*h;switch(t.readByte()){case mi:o.setStepped(b);break;case gi:Ce(t,o,v++,b,0,g,I,M,Y,h),Ce(t,o,v++,b,1,g,I,V,U,h);}g=I,M=Y,V=U;}return o}function Ce(t,o,h,g,M,V,b,v,k,I){o.setBezier(h,g,M,V,v,t.readFloat(),t.readFloat()*I,t.readFloat(),t.readFloat()*I,b,k);}var Ns=0,Ms=1,Us=2,Ws=3,Gs=4,wr=5,or=6,Ar=7,Sr=8,ai=9,zs=0,Ee=1,br=2,Tr=3,Ir=4,Cr=5,Er=0,Rr=1,kr=2,mi=1,gi=2,hr=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new q(()=>E.newFloatArray(16));}update(t,o){if(!t)throw new Error("skeleton cannot be null.");let h=this.boundingBoxes,g=this.polygons,M=this.polygonPool,V=t.slots,b=V.length;h.length=0,M.freeAll(g),g.length=0;for(let v=0;v<b;v++){let k=V[v];if(!k.bone.active)continue;let I=k.getAttachment();if(I instanceof Ji){let Y=I;h.push(Y);let U=M.obtain();U.length!=Y.worldVerticesLength&&(U=E.newFloatArray(Y.worldVerticesLength)),g.push(U),Y.computeWorldVertices(k,0,Y.worldVerticesLength,U,0,2);}}o?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY);}aabbCompute(){let t=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY,M=this.polygons;for(let V=0,b=M.length;V<b;V++){let v=M[V],k=v;for(let I=0,Y=v.length;I<Y;I+=2){let U=k[I],H=k[I+1];t=Math.min(t,U),o=Math.min(o,H),h=Math.max(h,U),g=Math.max(g,H);}}this.minX=t,this.minY=o,this.maxX=h,this.maxY=g;}aabbContainsPoint(t,o){return t>=this.minX&&t<=this.maxX&&o>=this.minY&&o<=this.maxY}aabbIntersectsSegment(t,o,h,g){let M=this.minX,V=this.minY,b=this.maxX,v=this.maxY;if(t<=M&&h<=M||o<=V&&g<=V||t>=b&&h>=b||o>=v&&g>=v)return  false;let k=(g-o)/(h-t),I=k*(M-t)+o;if(I>V&&I<v||(I=k*(b-t)+o,I>V&&I<v))return  true;let Y=(V-o)/k+t;return Y>M&&Y<b||(Y=(v-o)/k+t,Y>M&&Y<b)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,o){let h=this.polygons;for(let g=0,M=h.length;g<M;g++)if(this.containsPointPolygon(h[g],t,o))return this.boundingBoxes[g];return null}containsPointPolygon(t,o,h){let g=t,M=t.length,V=M-2,b=false;for(let v=0;v<M;v+=2){let k=g[v+1],I=g[V+1];if(k<h&&I>=h||I<h&&k>=h){let Y=g[v];Y+(h-k)/(I-k)*(g[V]-Y)<o&&(b=!b);}V=v;}return b}intersectsSegment(t,o,h,g){let M=this.polygons;for(let V=0,b=M.length;V<b;V++)if(this.intersectsSegmentPolygon(M[V],t,o,h,g))return this.boundingBoxes[V];return null}intersectsSegmentPolygon(t,o,h,g,M){let V=t,b=t.length,v=o-g,k=h-M,I=o*M-h*g,Y=V[b-2],U=V[b-1];for(let H=0;H<b;H+=2){let K=V[H],i=V[H+1],e=Y*i-U*K,s=Y-K,n=U-i,r=v*n-k*s,f=(I*s-v*e)/r;if((f>=Y&&f<=K||f>=K&&f<=Y)&&(f>=o&&f<=g||f>=g&&f<=o)){let c=(I*n-k*e)/r;if((c>=U&&c<=i||c>=i&&c<=U)&&(c>=h&&c<=M||c>=M&&c<=h))return  true}Y=K,U=i;}return  false}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let o=this.boundingBoxes.indexOf(t);return o==-1?null:this.polygons[o]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},li=class{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new q(()=>new Array),this.polygonIndicesPool=new q(()=>new Array);}triangulate(t){let o=t,h=t.length>>1,g=this.indicesArray;g.length=0;for(let b=0;b<h;b++)g[b]=b;let M=this.isConcaveArray;M.length=0;for(let b=0,v=h;b<v;++b)M[b]=li.isConcave(b,h,o,g);let V=this.triangles;for(V.length=0;h>3;){let b=h-1,v=0,k=1;for(;;){t:if(!M[v]){let U=g[b]<<1,H=g[v]<<1,K=g[k]<<1,i=o[U],e=o[U+1],s=o[H],n=o[H+1],r=o[K],f=o[K+1];for(let c=(k+1)%h;c!=b;c=(c+1)%h){if(!M[c])continue;let d=g[c]<<1,p=o[d],x=o[d+1];if(li.positiveArea(r,f,i,e,p,x)&&li.positiveArea(i,e,s,n,p,x)&&li.positiveArea(s,n,r,f,p,x))break t}break}if(k==0){do{if(!M[v])break;v--;}while(v>0);break}b=v,v=k,k=(k+1)%h;}V.push(g[(h+v-1)%h]),V.push(g[v]),V.push(g[(v+1)%h]),g.splice(v,1),M.splice(v,1),h--;let I=(h+v-1)%h,Y=v==h?0:v;M[I]=li.isConcave(I,h,o,g),M[Y]=li.isConcave(Y,h,o,g);}return h==3&&(V.push(g[2]),V.push(g[0]),V.push(g[1])),V}decompose(t,o){let h=t,g=this.convexPolygons;this.polygonPool.freeAll(g),g.length=0;let M=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(M),M.length=0;let V=this.polygonIndicesPool.obtain();V.length=0;let b=this.polygonPool.obtain();b.length=0;let v=-1,k=0;for(let I=0,Y=o.length;I<Y;I+=3){let U=o[I]<<1,H=o[I+1]<<1,K=o[I+2]<<1,i=h[U],e=h[U+1],s=h[H],n=h[H+1],r=h[K],f=h[K+1],c=false;if(v==U){let d=b.length-4,p=li.winding(b[d],b[d+1],b[d+2],b[d+3],r,f),x=li.winding(r,f,b[0],b[1],b[2],b[3]);p==k&&x==k&&(b.push(r),b.push(f),V.push(K),c=true);}c||(b.length>0?(g.push(b),M.push(V)):(this.polygonPool.free(b),this.polygonIndicesPool.free(V)),b=this.polygonPool.obtain(),b.length=0,b.push(i),b.push(e),b.push(s),b.push(n),b.push(r),b.push(f),V=this.polygonIndicesPool.obtain(),V.length=0,V.push(U),V.push(H),V.push(K),k=li.winding(i,e,s,n,r,f),v=U);}b.length>0&&(g.push(b),M.push(V));for(let I=0,Y=g.length;I<Y;I++){if(V=M[I],V.length==0)continue;let U=V[0],H=V[V.length-1];b=g[I];let K=b.length-4,i=b[K],e=b[K+1],s=b[K+2],n=b[K+3],r=b[0],f=b[1],c=b[2],d=b[3],p=li.winding(i,e,s,n,r,f);for(let x=0;x<Y;x++){if(x==I)continue;let w=M[x];if(w.length!=3)continue;let C=w[0],F=w[1],B=w[2],X=g[x],z=X[X.length-2],W=X[X.length-1];if(C!=U||F!=H)continue;let Z=li.winding(i,e,s,n,z,W),J=li.winding(z,W,r,f,c,d);Z==p&&J==p&&(X.length=0,w.length=0,b.push(z),b.push(W),V.push(B),i=s,e=n,s=z,n=W,x=0);}}for(let I=g.length-1;I>=0;I--)b=g[I],b.length==0&&(g.splice(I,1),this.polygonPool.free(b),V=M[I],M.splice(I,1),this.polygonIndicesPool.free(V));return g}static isConcave(t,o,h,g){let M=g[(o+t-1)%o]<<1,V=g[t]<<1,b=g[(t+1)%o]<<1;return !this.positiveArea(h[M],h[M+1],h[V],h[V+1],h[b],h[b+1])}static positiveArea(t,o,h,g,M,V){return t*(V-g)+h*(o-V)+M*(g-o)>=0}static winding(t,o,h,g,M,V){let b=h-t,v=g-o;return M*v-V*b+b*o-t*v>=0?1:-1}},ys=class{constructor(){this.triangulator=new li,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array;}clipStart(t,o){if(this.clipAttachment)return 0;this.clipAttachment=o;let h=o.worldVerticesLength,g=E.setArraySize(this.clippingPolygon,h);o.computeWorldVertices(t,0,h,g,0,2);let M=this.clippingPolygon;ys.makeClockwise(M);let V=this.clippingPolygons=this.triangulator.decompose(M,this.triangulator.triangulate(M));for(let b=0,v=V.length;b<v;b++){let k=V[b];ys.makeClockwise(k),k.push(k[0]),k.push(k[1]);}return V.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd();}clipEnd(){!this.clipAttachment||(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0);}isClipping(){return this.clipAttachment!=null}clipTriangles(t,o,h,g,M,V,b,v){let k=this.clipOutput,I=this.clippedVertices,Y=this.clippedTriangles,U=this.clippingPolygons,H=this.clippingPolygons.length,K=v?12:8,i=0;I.length=0,Y.length=0;t:for(let e=0;e<g;e+=3){let s=h[e]<<1,n=t[s],r=t[s+1],f=M[s],c=M[s+1];s=h[e+1]<<1;let d=t[s],p=t[s+1],x=M[s],w=M[s+1];s=h[e+2]<<1;let C=t[s],F=t[s+1],B=M[s],X=M[s+1];for(let z=0;z<H;z++){let W=I.length;if(this.clip(n,r,d,p,C,F,U[z],k)){let Z=k.length;if(Z==0)continue;let J=p-F,j=C-d,Q=n-C,tt=F-r,nt=1/(J*Q+j*(r-F)),pt=Z>>1,mt=this.clipOutput,gt=E.setArraySize(I,W+pt*K);for(let Ft=0;Ft<Z;Ft+=2){let Vt=mt[Ft],Ut=mt[Ft+1];gt[W]=Vt,gt[W+1]=Ut,gt[W+2]=V.r,gt[W+3]=V.g,gt[W+4]=V.b,gt[W+5]=V.a;let St=Vt-C,It=Ut-F,Ht=(J*St+j*It)*nt,Se=(tt*St+Q*It)*nt,ve=1-Ht-Se;gt[W+6]=f*Ht+x*Se+B*ve,gt[W+7]=c*Ht+w*Se+X*ve,v&&(gt[W+8]=b.r,gt[W+9]=b.g,gt[W+10]=b.b,gt[W+11]=b.a),W+=K;}W=Y.length;let Ct=E.setArraySize(Y,W+3*(pt-2));pt--;for(let Ft=1;Ft<pt;Ft++)Ct[W]=i,Ct[W+1]=i+Ft,Ct[W+2]=i+Ft+1,W+=3;i+=pt+1;}else {let Z=E.setArraySize(I,W+3*K);Z[W]=n,Z[W+1]=r,Z[W+2]=V.r,Z[W+3]=V.g,Z[W+4]=V.b,Z[W+5]=V.a,v?(Z[W+6]=f,Z[W+7]=c,Z[W+8]=b.r,Z[W+9]=b.g,Z[W+10]=b.b,Z[W+11]=b.a,Z[W+12]=d,Z[W+13]=p,Z[W+14]=V.r,Z[W+15]=V.g,Z[W+16]=V.b,Z[W+17]=V.a,Z[W+18]=x,Z[W+19]=w,Z[W+20]=b.r,Z[W+21]=b.g,Z[W+22]=b.b,Z[W+23]=b.a,Z[W+24]=C,Z[W+25]=F,Z[W+26]=V.r,Z[W+27]=V.g,Z[W+28]=V.b,Z[W+29]=V.a,Z[W+30]=B,Z[W+31]=X,Z[W+32]=b.r,Z[W+33]=b.g,Z[W+34]=b.b,Z[W+35]=b.a):(Z[W+6]=f,Z[W+7]=c,Z[W+8]=d,Z[W+9]=p,Z[W+10]=V.r,Z[W+11]=V.g,Z[W+12]=V.b,Z[W+13]=V.a,Z[W+14]=x,Z[W+15]=w,Z[W+16]=C,Z[W+17]=F,Z[W+18]=V.r,Z[W+19]=V.g,Z[W+20]=V.b,Z[W+21]=V.a,Z[W+22]=B,Z[W+23]=X),W=Y.length;let J=E.setArraySize(Y,W+3);J[W]=i,J[W+1]=i+1,J[W+2]=i+2,i+=3;continue t}}}}clip(t,o,h,g,M,V,b,v){let k=v,I=false,Y=null;b.length%4>=2?(Y=v,v=this.scratch):Y=this.scratch,Y.length=0,Y.push(t),Y.push(o),Y.push(h),Y.push(g),Y.push(M),Y.push(V),Y.push(t),Y.push(o),v.length=0;let U=b,H=b.length-4;for(let K=0;;K+=2){let i=U[K],e=U[K+1],s=U[K+2],n=U[K+3],r=i-s,f=e-n,c=Y,d=Y.length-2,p=v.length;for(let w=0;w<d;w+=2){let C=c[w],F=c[w+1],B=c[w+2],X=c[w+3],z=r*(X-n)-f*(B-s)>0;if(r*(F-n)-f*(C-s)>0){if(z){v.push(B),v.push(X);continue}let W=X-F,Z=B-C,J=W*(s-i)-Z*(n-e);if(Math.abs(J)>1e-6){let j=(Z*(e-F)-W*(i-C))/J;v.push(i+(s-i)*j),v.push(e+(n-e)*j);}else v.push(i),v.push(e);}else if(z){let W=X-F,Z=B-C,J=W*(s-i)-Z*(n-e);if(Math.abs(J)>1e-6){let j=(Z*(e-F)-W*(i-C))/J;v.push(i+(s-i)*j),v.push(e+(n-e)*j);}else v.push(i),v.push(e);v.push(B),v.push(X);}I=true;}if(p==v.length)return k.length=0,true;if(v.push(v[0]),v.push(v[1]),K==H)break;let x=v;v=Y,v.length=0,Y=x;}if(k!=v){k.length=0;for(let K=0,i=v.length-2;K<i;K++)k[K]=v[K];}else k.length=k.length-2;return I}static makeClockwise(t){let o=t,h=t.length,g=o[h-2]*o[1]-o[0]*o[h-1],M=0,V=0,b=0,v=0;for(let k=0,I=h-3;k<I;k+=2)M=o[k],V=o[k+1],b=o[k+2],v=o[k+3],g+=M*v-b*V;if(!(g<0))for(let k=0,I=h-2,Y=h>>1;k<Y;k+=2){let U=o[k],H=o[k+1],K=I-k;o[k]=o[K],o[k+1]=o[K+1],o[K]=U,o[K+1]=H;}}},Fr=class{constructor(t){this.attachmentLoader=null,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t;}readSkeletonData(t){let o=this.scale,h=new vs,g=typeof t=="string"?JSON.parse(t):t,M=g.skeleton;if(M&&(h.hash=M.hash,h.version=M.spine,h.x=M.x,h.y=M.y,h.width=M.width,h.height=M.height,h.fps=M.fps,h.imagesPath=M.images),g.bones)for(let V=0;V<g.bones.length;V++){let b=g.bones[V],v=null,k=Pt(b,"parent",null);k&&(v=h.findBone(k));let I=new Bs(h.bones.length,b.name,v);I.length=Pt(b,"length",0)*o,I.x=Pt(b,"x",0)*o,I.y=Pt(b,"y",0)*o,I.rotation=Pt(b,"rotation",0),I.scaleX=Pt(b,"scaleX",1),I.scaleY=Pt(b,"scaleY",1),I.shearX=Pt(b,"shearX",0),I.shearY=Pt(b,"shearY",0),I.transformMode=E.enumValue(ii,Pt(b,"transform","Normal")),I.skinRequired=Pt(b,"skin",false);let Y=Pt(b,"color",null);Y&&I.color.setFromString(Y),h.bones.push(I);}if(g.slots)for(let V=0;V<g.slots.length;V++){let b=g.slots[V],v=h.findBone(b.bone),k=new es(h.slots.length,b.name,v),I=Pt(b,"color",null);I&&k.color.setFromString(I);let Y=Pt(b,"dark",null);Y&&(k.darkColor=u.fromString(Y)),k.attachmentName=Pt(b,"attachment",null),k.blendMode=E.enumValue(ei,Pt(b,"blend","normal")),h.slots.push(k);}if(g.ik)for(let V=0;V<g.ik.length;V++){let b=g.ik[V],v=new Ds(b.name);v.order=Pt(b,"order",0),v.skinRequired=Pt(b,"skin",false);for(let k=0;k<b.bones.length;k++)v.bones.push(h.findBone(b.bones[k]));v.target=h.findBone(b.target),v.mix=Pt(b,"mix",1),v.softness=Pt(b,"softness",0)*o,v.bendDirection=Pt(b,"bendPositive",true)?1:-1,v.compress=Pt(b,"compress",false),v.stretch=Pt(b,"stretch",false),v.uniform=Pt(b,"uniform",false),h.ikConstraints.push(v);}if(g.transform)for(let V=0;V<g.transform.length;V++){let b=g.transform[V],v=new is(b.name);v.order=Pt(b,"order",0),v.skinRequired=Pt(b,"skin",false);for(let I=0;I<b.bones.length;I++)v.bones.push(h.findBone(b.bones[I]));let k=b.target;v.target=h.findBone(k),v.local=Pt(b,"local",false),v.relative=Pt(b,"relative",false),v.offsetRotation=Pt(b,"rotation",0),v.offsetX=Pt(b,"x",0)*o,v.offsetY=Pt(b,"y",0)*o,v.offsetScaleX=Pt(b,"scaleX",0),v.offsetScaleY=Pt(b,"scaleY",0),v.offsetShearY=Pt(b,"shearY",0),v.mixRotate=Pt(b,"mixRotate",1),v.mixX=Pt(b,"mixX",1),v.mixY=Pt(b,"mixY",v.mixX),v.mixScaleX=Pt(b,"mixScaleX",1),v.mixScaleY=Pt(b,"mixScaleY",v.mixScaleX),v.mixShearY=Pt(b,"mixShearY",1),h.transformConstraints.push(v);}if(g.path)for(let V=0;V<g.path.length;V++){let b=g.path[V],v=new $i(b.name);v.order=Pt(b,"order",0),v.skinRequired=Pt(b,"skin",false);for(let I=0;I<b.bones.length;I++)v.bones.push(h.findBone(b.bones[I]));let k=b.target;v.target=h.findSlot(k),v.positionMode=E.enumValue(di,Pt(b,"positionMode","Percent")),v.spacingMode=E.enumValue(He,Pt(b,"spacingMode","Length")),v.rotateMode=E.enumValue(fi,Pt(b,"rotateMode","Tangent")),v.offsetRotation=Pt(b,"rotation",0),v.position=Pt(b,"position",0),v.positionMode==di.Fixed&&(v.position*=o),v.spacing=Pt(b,"spacing",0),(v.spacingMode==He.Length||v.spacingMode==He.Fixed)&&(v.spacing*=o),v.mixRotate=Pt(b,"mixRotate",1),v.mixX=Pt(b,"mixX",1),v.mixY=Pt(b,"mixY",v.mixX),h.pathConstraints.push(v);}if(g.skins)for(let V=0;V<g.skins.length;V++){let b=g.skins[V],v=new Ui(b.name);if(b.bones)for(let k=0;k<b.bones.length;k++)v.bones.push(h.findBone(b.bones[k]));if(b.ik)for(let k=0;k<b.ik.length;k++)v.constraints.push(h.findIkConstraint(b.ik[k]));if(b.transform)for(let k=0;k<b.transform.length;k++)v.constraints.push(h.findTransformConstraint(b.transform[k]));if(b.path)for(let k=0;k<b.path.length;k++)v.constraints.push(h.findPathConstraint(b.path[k]));for(let k in b.attachments){let I=h.findSlot(k),Y=b.attachments[k];for(let U in Y){let H=this.readAttachment(Y[U],v,I.index,U,h);H&&v.setAttachment(I.index,U,H);}}h.skins.push(v),v.name=="default"&&(h.defaultSkin=v);}for(let V=0,b=this.linkedMeshes.length;V<b;V++){let v=this.linkedMeshes[V],k=(v.skin?h.findSkin(v.skin):h.defaultSkin).getAttachment(v.slotIndex,v.parent);v.mesh.deformAttachment=v.inheritDeform?k:v.mesh,v.mesh.setParentMesh(k),v.mesh.updateUVs();}if(this.linkedMeshes.length=0,g.events)for(let V in g.events){let b=g.events[V],v=new ms(V);v.intValue=Pt(b,"int",0),v.floatValue=Pt(b,"float",0),v.stringValue=Pt(b,"string",""),v.audioPath=Pt(b,"audio",null),v.audioPath&&(v.volume=Pt(b,"volume",1),v.balance=Pt(b,"balance",0)),h.events.push(v);}if(g.animations)for(let V in g.animations){let b=g.animations[V];this.readAnimation(b,V,h);}return h}readAttachment(t,o,h,g,M){let V=this.scale;switch(g=Pt(t,"name",g),Pt(t,"type","region")){case "region":{let b=Pt(t,"path",g),v=this.attachmentLoader.newRegionAttachment(o,g,b);if(!v)return null;v.path=b,v.x=Pt(t,"x",0)*V,v.y=Pt(t,"y",0)*V,v.scaleX=Pt(t,"scaleX",1),v.scaleY=Pt(t,"scaleY",1),v.rotation=Pt(t,"rotation",0),v.width=t.width*V,v.height=t.height*V;let k=Pt(t,"color",null);return k&&v.color.setFromString(k),v.updateOffset(),v}case "boundingbox":{let b=this.attachmentLoader.newBoundingBoxAttachment(o,g);if(!b)return null;this.readVertices(t,b,t.vertexCount<<1);let v=Pt(t,"color",null);return v&&b.color.setFromString(v),b}case "mesh":case "linkedmesh":{let b=Pt(t,"path",g),v=this.attachmentLoader.newMeshAttachment(o,g,b);if(!v)return null;v.path=b;let k=Pt(t,"color",null);k&&v.color.setFromString(k),v.width=Pt(t,"width",0)*V,v.height=Pt(t,"height",0)*V;let I=Pt(t,"parent",null);if(I)return this.linkedMeshes.push(new Yr(v,Pt(t,"skin",null),h,I,Pt(t,"deform",true))),v;let Y=t.uvs;return this.readVertices(t,v,Y.length),v.triangles=t.triangles,v.regionUVs=Y,v.updateUVs(),v.edges=Pt(t,"edges",null),v.hullLength=Pt(t,"hull",0)*2,v}case "path":{let b=this.attachmentLoader.newPathAttachment(o,g);if(!b)return null;b.closed=Pt(t,"closed",false),b.constantSpeed=Pt(t,"constantSpeed",true);let v=t.vertexCount;this.readVertices(t,b,v<<1);let k=E.newArray(v/3,0);for(let Y=0;Y<t.lengths.length;Y++)k[Y]=t.lengths[Y]*V;b.lengths=k;let I=Pt(t,"color",null);return I&&b.color.setFromString(I),b}case "point":{let b=this.attachmentLoader.newPointAttachment(o,g);if(!b)return null;b.x=Pt(t,"x",0)*V,b.y=Pt(t,"y",0)*V,b.rotation=Pt(t,"rotation",0);let v=Pt(t,"color",null);return v&&b.color.setFromString(v),b}case "clipping":{let b=this.attachmentLoader.newClippingAttachment(o,g);if(!b)return null;let v=Pt(t,"end",null);v&&(b.endSlot=M.findSlot(v));let k=t.vertexCount;this.readVertices(t,b,k<<1);let I=Pt(t,"color",null);return I&&b.color.setFromString(I),b}}return null}readVertices(t,o,h){let g=this.scale;o.worldVerticesLength=h;let M=t.vertices;if(h==M.length){let v=E.toFloatArray(M);if(g!=1)for(let k=0,I=M.length;k<I;k++)v[k]*=g;o.vertices=v;return}let V=new Array,b=new Array;for(let v=0,k=M.length;v<k;){let I=M[v++];b.push(I);for(let Y=v+I*4;v<Y;v+=4)b.push(M[v]),V.push(M[v+1]*g),V.push(M[v+2]*g),V.push(M[v+3]);}o.bones=b,o.vertices=E.toFloatArray(V);}readAnimation(t,o,h){let g=this.scale,M=new Array;if(t.slots)for(let b in t.slots){let v=t.slots[b],k=h.findSlot(b).index;for(let I in v){let Y=v[I];if(!Y)continue;let U=Y.length;if(I=="attachment"){let H=new Kt(U,k);for(let K=0;K<U;K++){let i=Y[K];H.setFrame(K,Pt(i,"time",0),i.name);}M.push(H);}else if(I=="rgba"){let H=new kt(U,U<<2,k),K=Y[0],i=Pt(K,"time",0),e=u.fromString(K.color);for(let s=0,n=0;;s++){H.setFrame(s,i,e.r,e.g,e.b,e.a);let r=Y[s+1];if(!r){H.shrink(n);break}let f=Pt(r,"time",0),c=u.fromString(r.color),d=K.curve;d&&(n=ke(d,H,n,s,0,i,f,e.r,c.r,1),n=ke(d,H,n,s,1,i,f,e.g,c.g,1),n=ke(d,H,n,s,2,i,f,e.b,c.b,1),n=ke(d,H,n,s,3,i,f,e.a,c.a,1)),i=f,e=c,K=r;}M.push(H);}else if(I=="rgb"){let H=new bt(U,U*3,k),K=Y[0],i=Pt(K,"time",0),e=u.fromString(K.color);for(let s=0,n=0;;s++){H.setFrame(s,i,e.r,e.g,e.b);let r=Y[s+1];if(!r){H.shrink(n);break}let f=Pt(r,"time",0),c=u.fromString(r.color),d=K.curve;d&&(n=ke(d,H,n,s,0,i,f,e.r,c.r,1),n=ke(d,H,n,s,1,i,f,e.g,c.g,1),n=ke(d,H,n,s,2,i,f,e.b,c.b,1)),i=f,e=c,K=r;}M.push(H);}else if(I=="alpha")M.push(bi(Y,new wt(U,U,k),0,1));else if(I=="rgba2"){let H=new Qt(U,U*7,k),K=Y[0],i=Pt(K,"time",0),e=u.fromString(K.light),s=u.fromString(K.dark);for(let n=0,r=0;;n++){H.setFrame(n,i,e.r,e.g,e.b,e.a,s.r,s.g,s.b);let f=Y[n+1];if(!f){H.shrink(r);break}let c=Pt(f,"time",0),d=u.fromString(f.light),p=u.fromString(f.dark),x=K.curve;x&&(r=ke(x,H,r,n,0,i,c,e.r,d.r,1),r=ke(x,H,r,n,1,i,c,e.g,d.g,1),r=ke(x,H,r,n,2,i,c,e.b,d.b,1),r=ke(x,H,r,n,3,i,c,e.a,d.a,1),r=ke(x,H,r,n,4,i,c,s.r,p.r,1),r=ke(x,H,r,n,5,i,c,s.g,p.g,1),r=ke(x,H,r,n,6,i,c,s.b,p.b,1)),i=c,e=d,s=p,K=f;}M.push(H);}else if(I=="rgb2"){let H=new ie(U,U*6,k),K=Y[0],i=Pt(K,"time",0),e=u.fromString(K.light),s=u.fromString(K.dark);for(let n=0,r=0;;n++){H.setFrame(n,i,e.r,e.g,e.b,s.r,s.g,s.b);let f=Y[n+1];if(!f){H.shrink(r);break}let c=Pt(f,"time",0),d=u.fromString(f.light),p=u.fromString(f.dark),x=K.curve;x&&(r=ke(x,H,r,n,0,i,c,e.r,d.r,1),r=ke(x,H,r,n,1,i,c,e.g,d.g,1),r=ke(x,H,r,n,2,i,c,e.b,d.b,1),r=ke(x,H,r,n,3,i,c,s.r,p.r,1),r=ke(x,H,r,n,4,i,c,s.g,p.g,1),r=ke(x,H,r,n,5,i,c,s.b,p.b,1)),i=c,e=d,s=p,K=f;}M.push(H);}}}if(t.bones)for(let b in t.bones){let v=t.bones[b],k=h.findBone(b).index;for(let I in v){let Y=v[I],U=Y.length;if(U!=0){if(I==="rotate")M.push(bi(Y,new at(U,U,k),0,1));else if(I==="translate"){let H=new _(U,U<<1,k);M.push(Zs(Y,H,"x","y",0,g));}else if(I==="translatex"){let H=new ot(U,U,k);M.push(bi(Y,H,0,g));}else if(I==="translatey"){let H=new xt(U,U,k);M.push(bi(Y,H,0,g));}else if(I==="scale"){let H=new Mt(U,U<<1,k);M.push(Zs(Y,H,"x","y",1,1));}else if(I==="scalex"){let H=new Xt(U,U,k);M.push(bi(Y,H,1,1));}else if(I==="scaley"){let H=new Dt(U,U,k);M.push(bi(Y,H,1,1));}else if(I==="shear"){let H=new Lt(U,U<<1,k);M.push(Zs(Y,H,"x","y",0,1));}else if(I==="shearx"){let H=new Bt(U,U,k);M.push(bi(Y,H,0,1));}else if(I==="sheary"){let H=new Gt(U,U,k);M.push(bi(Y,H,0,1));}}}}if(t.ik)for(let b in t.ik){let v=t.ik[b],k=v[0];if(!k)continue;let I=h.findIkConstraint(b),Y=h.ikConstraints.indexOf(I),U=new qe(v.length,v.length<<1,Y),H=Pt(k,"time",0),K=Pt(k,"mix",1),i=Pt(k,"softness",0)*g;for(let e=0,s=0;;e++){U.setFrame(e,H,K,i,Pt(k,"bendPositive",true)?1:-1,Pt(k,"compress",false),Pt(k,"stretch",false));let n=v[e+1];if(!n){U.shrink(s);break}let r=Pt(n,"time",0),f=Pt(n,"mix",1),c=Pt(n,"softness",0)*g,d=k.curve;d&&(s=ke(d,U,s,e,0,H,r,K,f,1),s=ke(d,U,s,e,1,H,r,i,c,g)),H=r,K=f,i=c,k=n;}M.push(U);}if(t.transform)for(let b in t.transform){let v=t.transform[b],k=v[0];if(!k)continue;let I=h.findTransformConstraint(b),Y=h.transformConstraints.indexOf(I),U=new ze(v.length,v.length*6,Y),H=Pt(k,"time",0),K=Pt(k,"mixRotate",1),i=Pt(k,"mixX",1),e=Pt(k,"mixY",i),s=Pt(k,"mixScaleX",1),n=Pt(k,"mixScaleY",s),r=Pt(k,"mixShearY",1);for(let f=0,c=0;;f++){U.setFrame(f,H,K,i,e,s,n,r);let d=v[f+1];if(!d){U.shrink(c);break}let p=Pt(d,"time",0),x=Pt(d,"mixRotate",1),w=Pt(d,"mixX",1),C=Pt(d,"mixY",w),F=Pt(d,"mixScaleX",1),B=Pt(d,"mixScaleY",F),X=Pt(d,"mixShearY",1),z=k.curve;z&&(c=ke(z,U,c,f,0,H,p,K,x,1),c=ke(z,U,c,f,1,H,p,i,w,1),c=ke(z,U,c,f,2,H,p,e,C,1),c=ke(z,U,c,f,3,H,p,s,F,1),c=ke(z,U,c,f,4,H,p,n,B,1),c=ke(z,U,c,f,5,H,p,r,X,1)),H=p,K=x,i=w,e=C,s=F,n=B,s=F,k=d;}M.push(U);}if(t.path)for(let b in t.path){let v=t.path[b],k=h.findPathConstraint(b),I=h.pathConstraints.indexOf(k);for(let Y in v){let U=v[Y],H=U[0];if(!H)continue;let K=U.length;if(Y==="position"){let i=new Ue(K,K,I);M.push(bi(U,i,0,k.positionMode==di.Fixed?g:1));}else if(Y==="spacing"){let i=new _e(K,K,I);M.push(bi(U,i,0,k.spacingMode==He.Length||k.spacingMode==He.Fixed?g:1));}else if(Y==="mix"){let i=new We(K,K*3,I),e=Pt(H,"time",0),s=Pt(H,"mixRotate",1),n=Pt(H,"mixX",1),r=Pt(H,"mixY",n);for(let f=0,c=0;;f++){i.setFrame(f,e,s,n,r);let d=U[f+1];if(!d){i.shrink(c);break}let p=Pt(d,"time",0),x=Pt(d,"mixRotate",1),w=Pt(d,"mixX",1),C=Pt(d,"mixY",w),F=H.curve;F&&(c=ke(F,i,c,f,0,e,p,s,x,1),c=ke(F,i,c,f,1,e,p,n,w,1),c=ke(F,i,c,f,2,e,p,r,C,1)),e=p,s=x,n=w,r=C,H=d;}M.push(i);}}}if(t.deform)for(let b in t.deform){let v=t.deform[b],k=h.findSkin(b);for(let I in v){let Y=v[I],U=h.findSlot(I).index;for(let H in Y){let K=Y[H],i=K[0];if(!i)continue;let e=k.getAttachment(U,H),s=e.bones,n=e.vertices,r=s?n.length/3*2:n.length,f=new Ae(K.length,K.length,U,e),c=Pt(i,"time",0);for(let d=0,p=0;;d++){let x,w=Pt(i,"vertices",null);if(!w)x=s?E.newFloatArray(r):n;else {x=E.newFloatArray(r);let X=Pt(i,"offset",0);if(E.arrayCopy(w,0,x,X,w.length),g!=1)for(let z=X,W=z+w.length;z<W;z++)x[z]*=g;if(!s)for(let z=0;z<r;z++)x[z]+=n[z];}f.setFrame(d,c,x);let C=K[d+1];if(!C){f.shrink(p);break}let F=Pt(C,"time",0),B=i.curve;B&&(p=ke(B,f,p,d,0,c,F,0,1,1)),c=F,i=C;}M.push(f);}}}if(t.drawOrder){let b=new Ve(t.drawOrder.length),v=h.slots.length,k=0;for(let I=0;I<t.drawOrder.length;I++,k++){let Y=t.drawOrder[I],U=null,H=Pt(Y,"offsets",null);if(H){U=E.newArray(v,-1);let K=E.newArray(v-H.length,0),i=0,e=0;for(let s=0;s<H.length;s++){let n=H[s],r=h.findSlot(n.slot).index;for(;i!=r;)K[e++]=i++;U[i+n.offset]=i++;}for(;i<v;)K[e++]=i++;for(let s=v-1;s>=0;s--)U[s]==-1&&(U[s]=K[--e]);}b.setFrame(k,Pt(Y,"time",0),U);}M.push(b);}if(t.events){let b=new ye(t.events.length),v=0;for(let k=0;k<t.events.length;k++,v++){let I=t.events[k],Y=h.findEvent(I.name),U=new Pi(E.toSinglePrecision(Pt(I,"time",0)),Y);U.intValue=Pt(I,"int",Y.intValue),U.floatValue=Pt(I,"float",Y.floatValue),U.stringValue=Pt(I,"string",Y.stringValue),U.data.audioPath&&(U.volume=Pt(I,"volume",1),U.balance=Pt(I,"balance",0)),b.setFrame(v,U);}M.push(b);}let V=0;for(let b=0,v=M.length;b<v;b++)V=Math.max(V,M[b].getDuration());h.animations.push(new G(o,M,V));}},Yr=class{constructor(t,o,h,g,M){this.mesh=t,this.skin=o,this.slotIndex=h,this.parent=g,this.inheritDeform=M;}};function bi(t,o,h,g){let M=t[0],V=Pt(M,"time",0),b=Pt(M,"value",h)*g,v=0;for(let k=0;;k++){o.setFrame(k,V,b);let I=t[k+1];if(!I)return o.shrink(v),o;let Y=Pt(I,"time",0),U=Pt(I,"value",h)*g;M.curve&&(v=ke(M.curve,o,v,k,0,V,Y,b,U,g)),V=Y,b=U,M=I;}}function Zs(t,o,h,g,M,V){let b=t[0],v=Pt(b,"time",0),k=Pt(b,h,M)*V,I=Pt(b,g,M)*V,Y=0;for(let U=0;;U++){o.setFrame(U,v,k,I);let H=t[U+1];if(!H)return o.shrink(Y),o;let K=Pt(H,"time",0),i=Pt(H,h,M)*V,e=Pt(H,g,M)*V,s=b.curve;s&&(Y=ke(s,o,Y,U,0,v,K,k,i,V),Y=ke(s,o,Y,U,1,v,K,I,e,V)),v=K,k=i,I=e,b=H;}}function ke(t,o,h,g,M,V,b,v,k,I){if(t=="stepped")return o.setStepped(g),h;let Y=M<<2,U=t[Y],H=t[Y+1]*I,K=t[Y+2],i=t[Y+3]*I;return o.setBezier(h,g,M,V,v,U,H,K,i,b,k),h+1}function Pt(t,o,h){return t[o]!==void 0?t[o]:h}typeof Math.fround>"u"&&(Math.fround=(function(t){return function(o){return t[0]=o,t[0]}})(new Float32Array(1)));var Pr=class{constructor(t,o){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=o;}begin(t){}transform(t,o,h,g){t.x+=S.randomTriangular(-this.jitterX,this.jitterY),t.y+=S.randomTriangular(-this.jitterX,this.jitterY);}end(){}},lr=class{constructor(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t;}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY;}transform(t,o,h,g){let M=this.angle*S.degreesToRadians,V=t.x-this.worldX,b=t.y-this.worldY,v=Math.sqrt(V*V+b*b);if(v<this.radius){let k=lr.interpolation.apply(0,M,(this.radius-v)/this.radius),I=Math.cos(k),Y=Math.sin(k);t.x=I*V-Y*b+this.worldX,t.y=Y*V+I*b+this.worldY;}}end(){}},cr=lr;cr.interpolation=new N(2);var oi=class{constructor(t,o={alpha:"true"}){this.restorables=new Array,t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?(this.gl=t,this.canvas=this.gl.canvas):this.setupCanvas(t,o);}setupCanvas(t,o){this.gl=t.getContext("webgl2",o)||t.getContext("webgl",o),this.canvas=t,t.addEventListener("webglcontextlost",h=>{h&&h.preventDefault();}),t.addEventListener("webglcontextrestored",h=>{for(let g=0,M=this.restorables.length;g<M;g++)this.restorables[g].restore();});}addRestorable(t){this.restorables.push(t);}removeRestorable(t){let o=this.restorables.indexOf(t);o>-1&&this.restorables.splice(o,1);}},Wi=1,Lr=769,dr=770,ws=771,Xr=774,As=class{static getDestGLBlendMode(t){switch(t){case ei.Normal:return ws;case ei.Additive:return Wi;case ei.Multiply:return ws;case ei.Screen:return ws;default:throw new Error("Unknown blend mode: "+t)}}static getSourceColorGLBlendMode(t,o=false){switch(t){case ei.Normal:return o?Wi:dr;case ei.Additive:return o?Wi:dr;case ei.Multiply:return Xr;case ei.Screen:return Wi;default:throw new Error("Unknown blend mode: "+t)}}static getSourceAlphaGLBlendMode(t){switch(t){case ei.Normal:return Wi;case ei.Additive:return Wi;case ei.Multiply:return ws;case ei.Screen:return Lr;default:throw new Error("Unknown blend mode: "+t)}}},js=class extends Fs{constructor(t,o,h=false){super(o),this.texture=null,this.boundUnit=0,this.useMipMaps=false,this.context=t instanceof oi?t:new oi(t),this.useMipMaps=h,this.restore(),this.context.addRestorable(this);}setFilters(t,o){let h=this.context.gl;this.bind(),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,t),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,js.validateMagFilter(o));}static validateMagFilter(t){switch(t){case ni.MipMap:case ni.MipMapLinearLinear:case ni.MipMapLinearNearest:case ni.MipMapNearestLinear:case ni.MipMapNearestNearest:return ni.Linear;default:return t}}setWraps(t,o){let h=this.context.gl;this.bind(),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,t),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,o);}update(t){let o=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),js.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,false),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,this._image),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t?o.LINEAR_MIPMAP_LINEAR:o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),t&&o.generateMipmap(o.TEXTURE_2D);}restore(){this.texture=null,this.update(this.useMipMaps);}bind(t=0){let o=this.context.gl;this.boundUnit=t,o.activeTexture(o.TEXTURE0+t),o.bindTexture(o.TEXTURE_2D,this.texture);}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null);}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture);}},ss=js;ss.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=false;var pi=class extends fs{constructor(t,o="",h=null){super(g=>new ss(t,g),o,h);}},Je=class{constructor(t=0,o=0,h=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=o,this.z=h;}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,o,h){return this.x=t,this.y=o,this.z=h,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return t==0?this:(t=1/t,this.x*=t,this.y*=t,this.z*=t,this)}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let o=t.values;return this.set(this.x*o[ae]+this.y*o[ue]+this.z*o[fe]+o[me],this.x*o[xe]+this.y*o[_t]+this.z*o[oe]+o[zt],this.x*o[ft]+this.y*o[Jt]+this.z*o[ee]+o[he])}project(t){let o=t.values,h=1/(this.x*o[$t]+this.y*o[Ot]+this.z*o[Wt]+o[Nt]);return this.set((this.x*o[ae]+this.y*o[ue]+this.z*o[fe]+o[me])*h,(this.x*o[xe]+this.y*o[_t]+this.z*o[oe]+o[zt])*h,(this.x*o[ft]+this.y*o[Jt]+this.z*o[ee]+o[he])*h)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let o=t.x-this.x,h=t.y-this.y,g=t.z-this.z;return Math.sqrt(o*o+h*h+g*g)}},ae=0,ue=4,fe=8,me=12,xe=1,_t=5,oe=9,zt=13,ft=2,Jt=6,ee=10,he=14,$t=3,Ot=7,Wt=11,Nt=15,jt=class{constructor(){this.temp=new Float32Array(16),this.values=new Float32Array(16);let t=this.values;t[ae]=1,t[_t]=1,t[ee]=1,t[Nt]=1;}set(t){return this.values.set(t),this}transpose(){let t=this.temp,o=this.values;return t[ae]=o[ae],t[ue]=o[xe],t[fe]=o[ft],t[me]=o[$t],t[xe]=o[ue],t[_t]=o[_t],t[oe]=o[Jt],t[zt]=o[Ot],t[ft]=o[fe],t[Jt]=o[oe],t[ee]=o[ee],t[he]=o[Wt],t[$t]=o[me],t[Ot]=o[zt],t[Wt]=o[he],t[Nt]=o[Nt],this.set(t)}identity(){let t=this.values;return t[ae]=1,t[ue]=0,t[fe]=0,t[me]=0,t[xe]=0,t[_t]=1,t[oe]=0,t[zt]=0,t[ft]=0,t[Jt]=0,t[ee]=1,t[he]=0,t[$t]=0,t[Ot]=0,t[Wt]=0,t[Nt]=1,this}invert(){let t=this.values,o=this.temp,h=t[$t]*t[Jt]*t[oe]*t[me]-t[ft]*t[Ot]*t[oe]*t[me]-t[$t]*t[_t]*t[ee]*t[me]+t[xe]*t[Ot]*t[ee]*t[me]+t[ft]*t[_t]*t[Wt]*t[me]-t[xe]*t[Jt]*t[Wt]*t[me]-t[$t]*t[Jt]*t[fe]*t[zt]+t[ft]*t[Ot]*t[fe]*t[zt]+t[$t]*t[ue]*t[ee]*t[zt]-t[ae]*t[Ot]*t[ee]*t[zt]-t[ft]*t[ue]*t[Wt]*t[zt]+t[ae]*t[Jt]*t[Wt]*t[zt]+t[$t]*t[_t]*t[fe]*t[he]-t[xe]*t[Ot]*t[fe]*t[he]-t[$t]*t[ue]*t[oe]*t[he]+t[ae]*t[Ot]*t[oe]*t[he]+t[xe]*t[ue]*t[Wt]*t[he]-t[ae]*t[_t]*t[Wt]*t[he]-t[ft]*t[_t]*t[fe]*t[Nt]+t[xe]*t[Jt]*t[fe]*t[Nt]+t[ft]*t[ue]*t[oe]*t[Nt]-t[ae]*t[Jt]*t[oe]*t[Nt]-t[xe]*t[ue]*t[ee]*t[Nt]+t[ae]*t[_t]*t[ee]*t[Nt];if(h==0)throw new Error("non-invertible matrix");let g=1/h;return o[ae]=t[oe]*t[he]*t[Ot]-t[zt]*t[ee]*t[Ot]+t[zt]*t[Jt]*t[Wt]-t[_t]*t[he]*t[Wt]-t[oe]*t[Jt]*t[Nt]+t[_t]*t[ee]*t[Nt],o[ue]=t[me]*t[ee]*t[Ot]-t[fe]*t[he]*t[Ot]-t[me]*t[Jt]*t[Wt]+t[ue]*t[he]*t[Wt]+t[fe]*t[Jt]*t[Nt]-t[ue]*t[ee]*t[Nt],o[fe]=t[fe]*t[zt]*t[Ot]-t[me]*t[oe]*t[Ot]+t[me]*t[_t]*t[Wt]-t[ue]*t[zt]*t[Wt]-t[fe]*t[_t]*t[Nt]+t[ue]*t[oe]*t[Nt],o[me]=t[me]*t[oe]*t[Jt]-t[fe]*t[zt]*t[Jt]-t[me]*t[_t]*t[ee]+t[ue]*t[zt]*t[ee]+t[fe]*t[_t]*t[he]-t[ue]*t[oe]*t[he],o[xe]=t[zt]*t[ee]*t[$t]-t[oe]*t[he]*t[$t]-t[zt]*t[ft]*t[Wt]+t[xe]*t[he]*t[Wt]+t[oe]*t[ft]*t[Nt]-t[xe]*t[ee]*t[Nt],o[_t]=t[fe]*t[he]*t[$t]-t[me]*t[ee]*t[$t]+t[me]*t[ft]*t[Wt]-t[ae]*t[he]*t[Wt]-t[fe]*t[ft]*t[Nt]+t[ae]*t[ee]*t[Nt],o[oe]=t[me]*t[oe]*t[$t]-t[fe]*t[zt]*t[$t]-t[me]*t[xe]*t[Wt]+t[ae]*t[zt]*t[Wt]+t[fe]*t[xe]*t[Nt]-t[ae]*t[oe]*t[Nt],o[zt]=t[fe]*t[zt]*t[ft]-t[me]*t[oe]*t[ft]+t[me]*t[xe]*t[ee]-t[ae]*t[zt]*t[ee]-t[fe]*t[xe]*t[he]+t[ae]*t[oe]*t[he],o[ft]=t[_t]*t[he]*t[$t]-t[zt]*t[Jt]*t[$t]+t[zt]*t[ft]*t[Ot]-t[xe]*t[he]*t[Ot]-t[_t]*t[ft]*t[Nt]+t[xe]*t[Jt]*t[Nt],o[Jt]=t[me]*t[Jt]*t[$t]-t[ue]*t[he]*t[$t]-t[me]*t[ft]*t[Ot]+t[ae]*t[he]*t[Ot]+t[ue]*t[ft]*t[Nt]-t[ae]*t[Jt]*t[Nt],o[ee]=t[ue]*t[zt]*t[$t]-t[me]*t[_t]*t[$t]+t[me]*t[xe]*t[Ot]-t[ae]*t[zt]*t[Ot]-t[ue]*t[xe]*t[Nt]+t[ae]*t[_t]*t[Nt],o[he]=t[me]*t[_t]*t[ft]-t[ue]*t[zt]*t[ft]-t[me]*t[xe]*t[Jt]+t[ae]*t[zt]*t[Jt]+t[ue]*t[xe]*t[he]-t[ae]*t[_t]*t[he],o[$t]=t[oe]*t[Jt]*t[$t]-t[_t]*t[ee]*t[$t]-t[oe]*t[ft]*t[Ot]+t[xe]*t[ee]*t[Ot]+t[_t]*t[ft]*t[Wt]-t[xe]*t[Jt]*t[Wt],o[Ot]=t[ue]*t[ee]*t[$t]-t[fe]*t[Jt]*t[$t]+t[fe]*t[ft]*t[Ot]-t[ae]*t[ee]*t[Ot]-t[ue]*t[ft]*t[Wt]+t[ae]*t[Jt]*t[Wt],o[Wt]=t[fe]*t[_t]*t[$t]-t[ue]*t[oe]*t[$t]-t[fe]*t[xe]*t[Ot]+t[ae]*t[oe]*t[Ot]+t[ue]*t[xe]*t[Wt]-t[ae]*t[_t]*t[Wt],o[Nt]=t[ue]*t[oe]*t[ft]-t[fe]*t[_t]*t[ft]+t[fe]*t[xe]*t[Jt]-t[ae]*t[oe]*t[Jt]-t[ue]*t[xe]*t[ee]+t[ae]*t[_t]*t[ee],t[ae]=o[ae]*g,t[ue]=o[ue]*g,t[fe]=o[fe]*g,t[me]=o[me]*g,t[xe]=o[xe]*g,t[_t]=o[_t]*g,t[oe]=o[oe]*g,t[zt]=o[zt]*g,t[ft]=o[ft]*g,t[Jt]=o[Jt]*g,t[ee]=o[ee]*g,t[he]=o[he]*g,t[$t]=o[$t]*g,t[Ot]=o[Ot]*g,t[Wt]=o[Wt]*g,t[Nt]=o[Nt]*g,this}determinant(){let t=this.values;return t[$t]*t[Jt]*t[oe]*t[me]-t[ft]*t[Ot]*t[oe]*t[me]-t[$t]*t[_t]*t[ee]*t[me]+t[xe]*t[Ot]*t[ee]*t[me]+t[ft]*t[_t]*t[Wt]*t[me]-t[xe]*t[Jt]*t[Wt]*t[me]-t[$t]*t[Jt]*t[fe]*t[zt]+t[ft]*t[Ot]*t[fe]*t[zt]+t[$t]*t[ue]*t[ee]*t[zt]-t[ae]*t[Ot]*t[ee]*t[zt]-t[ft]*t[ue]*t[Wt]*t[zt]+t[ae]*t[Jt]*t[Wt]*t[zt]+t[$t]*t[_t]*t[fe]*t[he]-t[xe]*t[Ot]*t[fe]*t[he]-t[$t]*t[ue]*t[oe]*t[he]+t[ae]*t[Ot]*t[oe]*t[he]+t[xe]*t[ue]*t[Wt]*t[he]-t[ae]*t[_t]*t[Wt]*t[he]-t[ft]*t[_t]*t[fe]*t[Nt]+t[xe]*t[Jt]*t[fe]*t[Nt]+t[ft]*t[ue]*t[oe]*t[Nt]-t[ae]*t[Jt]*t[oe]*t[Nt]-t[xe]*t[ue]*t[ee]*t[Nt]+t[ae]*t[_t]*t[ee]*t[Nt]}translate(t,o,h){let g=this.values;return g[me]+=t,g[zt]+=o,g[he]+=h,this}copy(){return new jt().set(this.values)}projection(t,o,h,g){this.identity();let M=1/Math.tan(h*(Math.PI/180)/2),V=(o+t)/(t-o),b=2*o*t/(t-o),v=this.values;return v[ae]=M/g,v[xe]=0,v[ft]=0,v[$t]=0,v[ue]=0,v[_t]=M,v[Jt]=0,v[Ot]=0,v[fe]=0,v[oe]=0,v[ee]=V,v[Wt]=-1,v[me]=0,v[zt]=0,v[he]=b,v[Nt]=0,this}ortho2d(t,o,h,g){return this.ortho(t,t+h,o,o+g,0,1)}ortho(t,o,h,g,M,V){this.identity();let b=2/(o-t),v=2/(g-h),k=-2/(V-M),I=-(o+t)/(o-t),Y=-(g+h)/(g-h),U=-(V+M)/(V-M),H=this.values;return H[ae]=b,H[xe]=0,H[ft]=0,H[$t]=0,H[ue]=0,H[_t]=v,H[Jt]=0,H[Ot]=0,H[fe]=0,H[oe]=0,H[ee]=k,H[Wt]=0,H[me]=I,H[zt]=Y,H[he]=U,H[Nt]=1,this}multiply(t){let o=this.temp,h=this.values,g=t.values;return o[ae]=h[ae]*g[ae]+h[ue]*g[xe]+h[fe]*g[ft]+h[me]*g[$t],o[ue]=h[ae]*g[ue]+h[ue]*g[_t]+h[fe]*g[Jt]+h[me]*g[Ot],o[fe]=h[ae]*g[fe]+h[ue]*g[oe]+h[fe]*g[ee]+h[me]*g[Wt],o[me]=h[ae]*g[me]+h[ue]*g[zt]+h[fe]*g[he]+h[me]*g[Nt],o[xe]=h[xe]*g[ae]+h[_t]*g[xe]+h[oe]*g[ft]+h[zt]*g[$t],o[_t]=h[xe]*g[ue]+h[_t]*g[_t]+h[oe]*g[Jt]+h[zt]*g[Ot],o[oe]=h[xe]*g[fe]+h[_t]*g[oe]+h[oe]*g[ee]+h[zt]*g[Wt],o[zt]=h[xe]*g[me]+h[_t]*g[zt]+h[oe]*g[he]+h[zt]*g[Nt],o[ft]=h[ft]*g[ae]+h[Jt]*g[xe]+h[ee]*g[ft]+h[he]*g[$t],o[Jt]=h[ft]*g[ue]+h[Jt]*g[_t]+h[ee]*g[Jt]+h[he]*g[Ot],o[ee]=h[ft]*g[fe]+h[Jt]*g[oe]+h[ee]*g[ee]+h[he]*g[Wt],o[he]=h[ft]*g[me]+h[Jt]*g[zt]+h[ee]*g[he]+h[he]*g[Nt],o[$t]=h[$t]*g[ae]+h[Ot]*g[xe]+h[Wt]*g[ft]+h[Nt]*g[$t],o[Ot]=h[$t]*g[ue]+h[Ot]*g[_t]+h[Wt]*g[Jt]+h[Nt]*g[Ot],o[Wt]=h[$t]*g[fe]+h[Ot]*g[oe]+h[Wt]*g[ee]+h[Nt]*g[Wt],o[Nt]=h[$t]*g[me]+h[Ot]*g[zt]+h[Wt]*g[he]+h[Nt]*g[Nt],this.set(this.temp)}multiplyLeft(t){let o=this.temp,h=this.values,g=t.values;return o[ae]=g[ae]*h[ae]+g[ue]*h[xe]+g[fe]*h[ft]+g[me]*h[$t],o[ue]=g[ae]*h[ue]+g[ue]*h[_t]+g[fe]*h[Jt]+g[me]*h[Ot],o[fe]=g[ae]*h[fe]+g[ue]*h[oe]+g[fe]*h[ee]+g[me]*h[Wt],o[me]=g[ae]*h[me]+g[ue]*h[zt]+g[fe]*h[he]+g[me]*h[Nt],o[xe]=g[xe]*h[ae]+g[_t]*h[xe]+g[oe]*h[ft]+g[zt]*h[$t],o[_t]=g[xe]*h[ue]+g[_t]*h[_t]+g[oe]*h[Jt]+g[zt]*h[Ot],o[oe]=g[xe]*h[fe]+g[_t]*h[oe]+g[oe]*h[ee]+g[zt]*h[Wt],o[zt]=g[xe]*h[me]+g[_t]*h[zt]+g[oe]*h[he]+g[zt]*h[Nt],o[ft]=g[ft]*h[ae]+g[Jt]*h[xe]+g[ee]*h[ft]+g[he]*h[$t],o[Jt]=g[ft]*h[ue]+g[Jt]*h[_t]+g[ee]*h[Jt]+g[he]*h[Ot],o[ee]=g[ft]*h[fe]+g[Jt]*h[oe]+g[ee]*h[ee]+g[he]*h[Wt],o[he]=g[ft]*h[me]+g[Jt]*h[zt]+g[ee]*h[he]+g[he]*h[Nt],o[$t]=g[$t]*h[ae]+g[Ot]*h[xe]+g[Wt]*h[ft]+g[Nt]*h[$t],o[Ot]=g[$t]*h[ue]+g[Ot]*h[_t]+g[Wt]*h[Jt]+g[Nt]*h[Ot],o[Wt]=g[$t]*h[fe]+g[Ot]*h[oe]+g[Wt]*h[ee]+g[Nt]*h[Wt],o[Nt]=g[$t]*h[me]+g[Ot]*h[zt]+g[Wt]*h[he]+g[Nt]*h[Nt],this.set(this.temp)}lookAt(t,o,h){jt.initTemps();let g=jt.xAxis,M=jt.yAxis,V=jt.zAxis;V.setFrom(o).normalize(),g.setFrom(o).normalize(),g.cross(h).normalize(),M.setFrom(g).cross(V).normalize(),this.identity();let b=this.values;return b[ae]=g.x,b[ue]=g.y,b[fe]=g.z,b[xe]=M.x,b[_t]=M.y,b[oe]=M.z,b[ft]=-V.x,b[Jt]=-V.y,b[ee]=-V.z,jt.tmpMatrix.identity(),jt.tmpMatrix.values[me]=-t.x,jt.tmpMatrix.values[zt]=-t.y,jt.tmpMatrix.values[he]=-t.z,this.multiply(jt.tmpMatrix),this}static initTemps(){jt.xAxis===null&&(jt.xAxis=new Je),jt.yAxis===null&&(jt.yAxis=new Je),jt.zAxis===null&&(jt.zAxis=new Je);}},te=jt;te.xAxis=null,te.yAxis=null,te.zAxis=null,te.tmpMatrix=new jt;var le=class{constructor(t,o){this.position=new Je(0,0,0),this.direction=new Je(0,0,-1),this.up=new Je(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new te,this.inverseProjectionView=new te,this.projection=new te,this.view=new te,this.viewportWidth=t,this.viewportHeight=o,this.update();}update(){let t=this.projection,o=this.view,h=this.projectionView,g=this.inverseProjectionView,M=this.zoom,V=this.viewportWidth,b=this.viewportHeight;t.ortho(M*(-V/2),M*(V/2),M*(-b/2),M*(b/2),this.near,this.far),o.lookAt(this.position,this.direction,this.up),h.set(t.values),h.multiply(o),g.set(h.values).invert();}screenToWorld(t,o,h){let g=t.x,M=h-t.y-1;return t.x=2*g/o-1,t.y=2*M/h-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,o,h){return t.project(this.projectionView),t.x=o*(t.x+1)/2,t.y=h*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,o){this.viewportWidth=t,this.viewportHeight=o;}},ce=class{constructor(t){this.mouseX=0,this.mouseY=0,this.buttonDown=false,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=new Array,this.eventListeners=[],this.element=t,this.setupCallbacks(t);}setupCallbacks(t){let o=b=>{if(b instanceof MouseEvent){let v=t.getBoundingClientRect();this.mouseX=b.clientX-v.left,this.mouseY=b.clientY-v.top,this.buttonDown=true,this.listeners.map(k=>{k.down&&k.down(this.mouseX,this.mouseY);}),document.addEventListener("mousemove",h),document.addEventListener("mouseup",g);}},h=b=>{if(b instanceof MouseEvent){let v=t.getBoundingClientRect();this.mouseX=b.clientX-v.left,this.mouseY=b.clientY-v.top,this.listeners.map(k=>{this.buttonDown?k.dragged&&k.dragged(this.mouseX,this.mouseY):k.moved&&k.moved(this.mouseX,this.mouseY);});}},g=b=>{if(b instanceof MouseEvent){let v=t.getBoundingClientRect();this.mouseX=b.clientX-v.left,this.mouseY=b.clientY-v.top,this.buttonDown=false,this.listeners.map(k=>{k.up&&k.up(this.mouseX,this.mouseY);}),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",g);}},M=b=>{b.preventDefault();let v=b.deltaY;b.deltaMode==WheelEvent.DOM_DELTA_LINE&&(v*=8),b.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(v*=24),this.listeners.map(k=>{k.wheel&&k.wheel(b.deltaY);});};t.addEventListener("mousedown",o,true),t.addEventListener("mousemove",h,true),t.addEventListener("mouseup",g,true),t.addEventListener("wheel",M,true),t.addEventListener("touchstart",b=>{if(!this.touch0||!this.touch1){var v=b.changedTouches;let k=v.item(0),I=t.getBoundingClientRect(),Y=k.clientX-I.left,U=k.clientY-I.top,H=new de(k.identifier,Y,U);if(this.mouseX=Y,this.mouseY=U,this.buttonDown=true,!this.touch0)this.touch0=H,this.listeners.map(K=>{K.down&&K.down(H.x,H.y);});else if(!this.touch1){this.touch1=H;let K=this.touch1.x-this.touch0.x,i=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(K*K+i*i),this.listeners.map(e=>{e.zoom&&e.zoom(this.initialPinchDistance,this.initialPinchDistance);});}}b.preventDefault();},false),t.addEventListener("touchmove",b=>{if(this.touch0){var v=b.changedTouches;let Y=t.getBoundingClientRect();for(var k=0;k<v.length;k++){var I=v[k];let U=I.clientX-Y.left,H=I.clientY-Y.top;this.touch0.identifier===I.identifier&&(this.touch0.x=this.mouseX=U,this.touch0.y=this.mouseY=H,this.listeners.map(K=>{K.dragged&&K.dragged(U,H);})),this.touch1&&this.touch1.identifier===I.identifier&&(this.touch1.x=this.mouseX=U,this.touch1.y=this.mouseY=H);}if(this.touch0&&this.touch1){let U=this.touch1.x-this.touch0.x,H=this.touch1.x-this.touch0.x,K=Math.sqrt(U*U+H*H);this.listeners.map(i=>{i.zoom&&i.zoom(this.initialPinchDistance,K);});}}b.preventDefault();},false);let V=b=>{if(this.touch0){var v=b.changedTouches;let Y=t.getBoundingClientRect();for(var k=0;k<v.length;k++){var I=v[k];let U=I.clientX-Y.left,H=I.clientY-Y.top;if(this.touch0.identifier===I.identifier)if(this.touch0=null,this.mouseX=U,this.mouseY=H,this.listeners.map(K=>{K.up&&K.up(U,H);}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=true,this.listeners.map(K=>{K.down&&K.down(this.touch0.x,this.touch0.y);});else {this.buttonDown=false;break}this.touch1&&this.touch1.identifier&&(this.touch1=null);}}b.preventDefault();};t.addEventListener("touchend",V,false),t.addEventListener("touchcancel",V);}addListener(t){this.listeners.push(t);}removeListener(t){let o=this.listeners.indexOf(t);o>-1&&this.listeners.splice(o,1);}},de=class{constructor(t,o,h){this.identifier=t,this.x=o,this.y=h;}},Me=class{constructor(t,o){this.canvas=t,this.camera=o;let h=0,g=0,V=0,b=0,v=0,k=0,I=0;new ce(t).addListener({down:(Y,U)=>{h=o.position.x,g=o.position.y,V=v=Y,b=k=U,I=o.zoom;},dragged:(Y,U)=>{let H=Y-V,K=U-b,i=o.screenToWorld(new Je(0,0),t.clientWidth,t.clientHeight),e=o.screenToWorld(new Je(H,K),t.clientWidth,t.clientHeight).sub(i);o.position.set(h-e.x,g-e.y,0),o.update(),v=Y,k=U;},wheel:Y=>{let U=Y/200*o.zoom,H=o.zoom+U;if(H>0){let K=0,i=0;if(Y<0)K=v,i=k;else {let n=new Je(t.clientWidth/2+15,t.clientHeight/2),r=v-n.x,f=t.clientHeight-1-k-n.y;K=n.x-r,i=t.clientHeight-1-n.y+f;}let e=o.screenToWorld(new Je(K,i),t.clientWidth,t.clientHeight);o.zoom=H,o.update();let s=o.screenToWorld(new Je(K,i),t.clientWidth,t.clientHeight);o.position.add(e.sub(s)),o.update();}},zoom:(Y,U)=>{let H=Y/U;o.zoom=I*H;},up:(Y,U)=>{v=Y,k=U;},moved:(Y,U)=>{v=Y,k=U;}});}},Zt=class{constructor(t,o,h){this.vertexShader=o,this.fragmentShader=h,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=o,this.fsSource=h,this.context=t instanceof oi?t:new oi(t),this.context.addRestorable(this),this.compile();}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs);}catch(o){throw this.dispose(),o}}compileShader(t,o){let h=this.context.gl,g=h.createShader(t);if(h.shaderSource(g,o),h.compileShader(g),!h.getShaderParameter(g,h.COMPILE_STATUS)){let M="Couldn't compile shader: "+h.getShaderInfoLog(g);if(h.deleteShader(g),!h.isContextLost())throw new Error(M)}return g}compileProgram(t,o){let h=this.context.gl,g=h.createProgram();if(h.attachShader(g,t),h.attachShader(g,o),h.linkProgram(g),!h.getProgramParameter(g,h.LINK_STATUS)){let M="Couldn't compile shader program: "+h.getProgramInfoLog(g);if(h.deleteProgram(g),!h.isContextLost())throw new Error(M)}return g}restore(){this.compile();}bind(){this.context.gl.useProgram(this.program);}unbind(){this.context.gl.useProgram(null);}setUniformi(t,o){this.context.gl.uniform1i(this.getUniformLocation(t),o);}setUniformf(t,o){this.context.gl.uniform1f(this.getUniformLocation(t),o);}setUniform2f(t,o,h){this.context.gl.uniform2f(this.getUniformLocation(t),o,h);}setUniform3f(t,o,h,g){this.context.gl.uniform3f(this.getUniformLocation(t),o,h,g);}setUniform4f(t,o,h,g,M){this.context.gl.uniform4f(this.getUniformLocation(t),o,h,g,M);}setUniform2x2f(t,o){let h=this.context.gl;this.tmp2x2.set(o),h.uniformMatrix2fv(this.getUniformLocation(t),false,this.tmp2x2);}setUniform3x3f(t,o){let h=this.context.gl;this.tmp3x3.set(o),h.uniformMatrix3fv(this.getUniformLocation(t),false,this.tmp3x3);}setUniform4x4f(t,o){let h=this.context.gl;this.tmp4x4.set(o),h.uniformMatrix4fv(this.getUniformLocation(t),false,this.tmp4x4);}getUniformLocation(t){let o=this.context.gl,h=o.getUniformLocation(this.program,t);if(!h&&!o.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return h}getAttributeLocation(t){let o=this.context.gl,h=o.getAttribLocation(this.program,t);if(h==-1&&!o.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return h}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null);}static newColoredTextured(t){let o=`
				attribute vec4 ${Zt.POSITION};
				attribute vec4 ${Zt.COLOR};
				attribute vec2 ${Zt.TEXCOORDS};
				uniform mat4 ${Zt.MVP_MATRIX};
				varying vec4 v_color;
				varying vec2 v_texCoords;

				void main () {
					v_color = ${Zt.COLOR};
					v_texCoords = ${Zt.TEXCOORDS};
					gl_Position = ${Zt.MVP_MATRIX} * ${Zt.POSITION};
				}
			`,h=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
				}
			`;return new Zt(t,o,h)}static newTwoColoredTextured(t){let o=`
				attribute vec4 ${Zt.POSITION};
				attribute vec4 ${Zt.COLOR};
				attribute vec4 ${Zt.COLOR2};
				attribute vec2 ${Zt.TEXCOORDS};
				uniform mat4 ${Zt.MVP_MATRIX};
				varying vec4 v_light;
				varying vec4 v_dark;
				varying vec2 v_texCoords;

				void main () {
					v_light = ${Zt.COLOR};
					v_dark = ${Zt.COLOR2};
					v_texCoords = ${Zt.TEXCOORDS};
					gl_Position = ${Zt.MVP_MATRIX} * ${Zt.POSITION};
				}
			`,h=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_light;
				varying LOWP vec4 v_dark;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					vec4 texColor = texture2D(u_texture, v_texCoords);
					gl_FragColor.a = texColor.a * v_light.a;
					gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
				}
			`;return new Zt(t,o,h)}static newColored(t){let o=`
				attribute vec4 ${Zt.POSITION};
				attribute vec4 ${Zt.COLOR};
				uniform mat4 ${Zt.MVP_MATRIX};
				varying vec4 v_color;

				void main () {
					v_color = ${Zt.COLOR};
					gl_Position = ${Zt.MVP_MATRIX} * ${Zt.POSITION};
				}
			`,h=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;

				void main () {
					gl_FragColor = v_color;
				}
			`;return new Zt(t,o,h)}},qt=Zt;qt.MVP_MATRIX="u_projTrans",qt.POSITION="a_position",qt.COLOR="a_color",qt.COLOR2="a_color2",qt.TEXCOORDS="a_texCoords",qt.SAMPLER="u_texture";var se=class{constructor(t,o,h,g){this.attributes=o,this.verticesLength=0,this.dirtyVertices=false,this.indicesLength=0,this.dirtyIndices=false,this.elementsPerVertex=0,this.context=t instanceof oi?t:new oi(t),this.elementsPerVertex=0;for(let M=0;M<o.length;M++)this.elementsPerVertex+=o[M].numElements;this.vertices=new Float32Array(h*this.elementsPerVertex),this.indices=new Uint16Array(g),this.context.addRestorable(this);}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=true,this.verticesLength=t;}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=true,this.indicesLength=t;}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var o=0;o<this.attributes.length;o++)t+=this.attributes[o].numElements;return t}setVertices(t){if(this.dirtyVertices=true,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length;}setIndices(t){if(this.dirtyIndices=true,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length;}draw(t,o){this.drawWithOffset(t,o,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex);}drawWithOffset(t,o,h,g){let M=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?M.drawElements(o,g,M.UNSIGNED_SHORT,h*2):M.drawArrays(o,h,g),this.unbind(t);}bind(t){let o=this.context.gl;o.bindBuffer(o.ARRAY_BUFFER,this.verticesBuffer);let h=0;for(let g=0;g<this.attributes.length;g++){let M=this.attributes[g],V=t.getAttributeLocation(M.name);o.enableVertexAttribArray(V),o.vertexAttribPointer(V,M.numElements,o.FLOAT,false,this.elementsPerVertex*4,h*4),h+=M.numElements;}this.indicesLength>0&&o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);}unbind(t){let o=this.context.gl;for(let h=0;h<this.attributes.length;h++){let g=this.attributes[h],M=t.getAttributeLocation(g.name);o.disableVertexAttribArray(M);}o.bindBuffer(o.ARRAY_BUFFER,null),this.indicesLength>0&&o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=false),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=false);}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update();}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer);}},re=class{constructor(t,o,h){this.name=t,this.type=o,this.numElements=h;}},ge=class extends re{constructor(){super(qt.POSITION,Ti.Float,2);}},we=class extends re{constructor(){super(qt.POSITION,Ti.Float,3);}},pe=class extends re{constructor(t=0){super(qt.TEXCOORDS+(t==0?"":t),Ti.Float,2);}},Li=class extends re{constructor(){super(qt.COLOR,Ti.Float,4);}},qs=class extends re{constructor(){super(qt.COLOR2,Ti.Float,4);}},Ti;(function(t){t[t.Float=0]="Float";})(Ti||(Ti={}));var Ss=class{constructor(t,o=true,h=10920){if(this.isDrawing=false,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,h>10920)throw new Error("Can't have more than 10920 triangles per batch: "+h);this.context=t instanceof oi?t:new oi(t);let g=o?[new ge,new Li,new pe,new qs]:[new ge,new Li,new pe];this.mesh=new se(t,g,h,h*3);let M=this.context.gl;this.srcColorBlend=M.SRC_ALPHA,this.srcAlphaBlend=M.ONE,this.dstBlend=M.ONE_MINUS_SRC_ALPHA;}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=true;let o=this.context.gl;o.enable(o.BLEND),o.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}setBlendMode(t,o,h){this.srcColorBlend==t&&this.srcAlphaBlend==o&&this.dstBlend==h||(this.srcColorBlend=t,this.srcAlphaBlend=o,this.dstBlend=h,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,h,o,h)));}draw(t,o,h){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+o.length>this.mesh.getVertices().length||this.indicesLength+h.length>this.mesh.getIndices().length)&&this.flush();let g=this.mesh.numVertices();this.mesh.getVertices().set(o,this.verticesLength),this.verticesLength+=o.length,this.mesh.setVerticesLength(this.verticesLength);let M=this.mesh.getIndices();for(let V=this.indicesLength,b=0;b<h.length;V++,b++)M[V]=h[b]+g;this.indicesLength+=h.length,this.mesh.setIndicesLength(this.indicesLength);}flush(){this.verticesLength!=0&&(this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++);}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=false;let t=this.context.gl;t.disable(t.BLEND);}getDrawCalls(){return this.drawCalls}dispose(){this.mesh.dispose();}},Hs=class{constructor(t,o=10920){if(this.isDrawing=false,this.shapeType=Oe.Filled,this.color=new u(1,1,1,1),this.vertexIndex=0,this.tmp=new $,o>10920)throw new Error("Can't have more than 10920 triangles per batch: "+o);this.context=t instanceof oi?t:new oi(t),this.mesh=new se(t,[new ge,new Li],o,0);let h=this.context.gl;this.srcColorBlend=h.SRC_ALPHA,this.srcAlphaBlend=h.ONE,this.dstBlend=h.ONE_MINUS_SRC_ALPHA;}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=true;let o=this.context.gl;o.enable(o.BLEND),o.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}setBlendMode(t,o,h){this.srcColorBlend=t,this.srcAlphaBlend=o,this.dstBlend=h,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,h,o,h));}setColor(t){this.color.setFromColor(t);}setColorWith(t,o,h,g){this.color.set(t,o,h,g);}point(t,o,h=null){this.check(Oe.Point,1),h===null&&(h=this.color),this.vertex(t,o,h);}line(t,o,h,g,M=null){this.check(Oe.Line,2);this.mesh.getVertices();this.vertexIndex;M===null&&(M=this.color),this.vertex(t,o,M),this.vertex(h,g,M);}triangle(t,o,h,g,M,V,b,v=null,k=null,I=null){this.check(t?Oe.Filled:Oe.Line,3);this.mesh.getVertices();this.vertexIndex;v===null&&(v=this.color),k===null&&(k=this.color),I===null&&(I=this.color),t?(this.vertex(o,h,v),this.vertex(g,M,k),this.vertex(V,b,I)):(this.vertex(o,h,v),this.vertex(g,M,k),this.vertex(g,M,v),this.vertex(V,b,k),this.vertex(V,b,v),this.vertex(o,h,k));}quad(t,o,h,g,M,V,b,v,k,I=null,Y=null,U=null,H=null){this.check(t?Oe.Filled:Oe.Line,3);this.mesh.getVertices();this.vertexIndex;I===null&&(I=this.color),Y===null&&(Y=this.color),U===null&&(U=this.color),H===null&&(H=this.color),t?(this.vertex(o,h,I),this.vertex(g,M,Y),this.vertex(V,b,U),this.vertex(V,b,U),this.vertex(v,k,H),this.vertex(o,h,I)):(this.vertex(o,h,I),this.vertex(g,M,Y),this.vertex(g,M,Y),this.vertex(V,b,U),this.vertex(V,b,U),this.vertex(v,k,H),this.vertex(v,k,H),this.vertex(o,h,I));}rect(t,o,h,g,M,V=null){this.quad(t,o,h,o+g,h,o+g,h+M,o,h+M,V,V,V,V);}rectLine(t,o,h,g,M,V,b=null){this.check(t?Oe.Filled:Oe.Line,8),b===null&&(b=this.color);let v=this.tmp.set(M-h,o-g);v.normalize(),V*=.5;let k=v.x*V,I=v.y*V;t?(this.vertex(o+k,h+I,b),this.vertex(o-k,h-I,b),this.vertex(g+k,M+I,b),this.vertex(g-k,M-I,b),this.vertex(g+k,M+I,b),this.vertex(o-k,h-I,b)):(this.vertex(o+k,h+I,b),this.vertex(o-k,h-I,b),this.vertex(g+k,M+I,b),this.vertex(g-k,M-I,b),this.vertex(g+k,M+I,b),this.vertex(o+k,h+I,b),this.vertex(g-k,M-I,b),this.vertex(o-k,h-I,b));}x(t,o,h){this.line(t-h,o-h,t+h,o+h),this.line(t-h,o+h,t+h,o-h);}polygon(t,o,h,g=null){if(h<3)throw new Error("Polygon must contain at least 3 vertices");this.check(Oe.Line,h*2),g===null&&(g=this.color);this.mesh.getVertices();this.vertexIndex;o<<=1,h<<=1;let b=t[o],v=t[o+1],k=o+h;for(let I=o,Y=o+h-2;I<Y;I+=2){let U=t[I],H=t[I+1],K=0,i=0;I+2>=k?(K=b,i=v):(K=t[I+2],i=t[I+3]),this.vertex(U,H,g),this.vertex(K,i,g);}}circle(t,o,h,g,M=null,V=0){if(V===0&&(V=Math.max(1,6*S.cbrt(g)|0)),V<=0)throw new Error("segments must be > 0.");M===null&&(M=this.color);let b=2*S.PI/V,v=Math.cos(b),k=Math.sin(b),I=g,Y=0;if(t){this.check(Oe.Filled,V*3+3),V--;for(let H=0;H<V;H++){this.vertex(o,h,M),this.vertex(o+I,h+Y,M);let K=I;I=v*I-k*Y,Y=k*K+v*Y,this.vertex(o+I,h+Y,M);}this.vertex(o,h,M),this.vertex(o+I,h+Y,M);}else {this.check(Oe.Line,V*2+2);for(let H=0;H<V;H++){this.vertex(o+I,h+Y,M);let K=I;I=v*I-k*Y,Y=k*K+v*Y,this.vertex(o+I,h+Y,M);}this.vertex(o+I,h+Y,M);}I=g,Y=0,this.vertex(o+I,h+Y,M);}curve(t,o,h,g,M,V,b,v,k,I=null){this.check(Oe.Line,k*2+2),I===null&&(I=this.color);let Y=1/k,U=Y*Y,H=Y*Y*Y,K=3*Y,i=3*U,e=6*U,s=6*H,n=t-h*2+M,r=o-g*2+V,f=(h-M)*3-t+b,c=(g-V)*3-o+v,d=t,p=o,x=(h-t)*K+n*i+f*H,w=(g-o)*K+r*i+c*H,C=n*e+f*s,F=r*e+c*s,B=f*s,X=c*s;for(;k-- >0;)this.vertex(d,p,I),d+=x,p+=w,x+=C,w+=F,C+=B,F+=X,this.vertex(d,p,I);this.vertex(d,p,I),this.vertex(b,v,I);}vertex(t,o,h){let g=this.vertexIndex,M=this.mesh.getVertices();M[g++]=t,M[g++]=o,M[g++]=h.r,M[g++]=h.g,M[g++]=h.b,M[g++]=h.a,this.vertexIndex=g;}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=false;}flush(){this.vertexIndex!=0&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0);}check(t,o){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t)if(this.mesh.maxVertices()-this.mesh.numVertices()<o)this.flush();else return;else this.flush(),this.shapeType=t;}dispose(){this.mesh.dispose();}},Oe;(function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled";})(Oe||(Oe={}));var Gi=class{constructor(t){this.boneLineColor=new u(1,0,0,1),this.boneOriginColor=new u(0,1,0,1),this.attachmentLineColor=new u(0,0,1,.5),this.triangleLineColor=new u(1,.64,0,.5),this.pathColor=new u().setFromString("FF7F00"),this.clipColor=new u(.8,0,0,2),this.aabbColor=new u(0,1,0,.5),this.drawBones=true,this.drawRegionAttachments=true,this.drawBoundingBoxes=true,this.drawMeshHull=true,this.drawMeshTriangles=true,this.drawPaths=true,this.drawSkeletonXY=false,this.drawClipping=true,this.premultipliedAlpha=false,this.scale=1,this.boneWidth=2,this.bounds=new hr,this.temp=new Array,this.vertices=E.newFloatArray(2*1024),this.context=t instanceof oi?t:new oi(t);}draw(t,o,h=null){let g=o.x,M=o.y,V=this.context.gl,b=this.premultipliedAlpha?V.ONE:V.SRC_ALPHA;t.setBlendMode(b,V.ONE,V.ONE_MINUS_SRC_ALPHA);let v=o.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let k=0,I=v.length;k<I;k++){let Y=v[k];if(h&&h.indexOf(Y.data.name)>-1||!Y.parent)continue;let U=g+Y.data.length*Y.a+Y.worldX,H=M+Y.data.length*Y.c+Y.worldY;t.rectLine(true,g+Y.worldX,M+Y.worldY,U,H,this.boneWidth*this.scale);}this.drawSkeletonXY&&t.x(g,M,4*this.scale);}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let k=o.slots;for(let I=0,Y=k.length;I<Y;I++){let U=k[I],H=U.getAttachment();if(H instanceof Ie){let K=H,i=this.vertices;K.computeWorldVertices(U.bone,i,0,2),t.line(i[0],i[1],i[2],i[3]),t.line(i[2],i[3],i[4],i[5]),t.line(i[4],i[5],i[6],i[7]),t.line(i[6],i[7],i[0],i[1]);}}}if(this.drawMeshHull||this.drawMeshTriangles){let k=o.slots;for(let I=0,Y=k.length;I<Y;I++){let U=k[I];if(!U.bone.active)continue;let H=U.getAttachment();if(!(H instanceof yi))continue;let K=H,i=this.vertices;K.computeWorldVertices(U,0,K.worldVerticesLength,i,0,2);let e=K.triangles,s=K.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let n=0,r=e.length;n<r;n+=3){let f=e[n]*2,c=e[n+1]*2,d=e[n+2]*2;t.triangle(false,i[f],i[f+1],i[c],i[c+1],i[d],i[d+1]);}}if(this.drawMeshHull&&s>0){t.setColor(this.attachmentLineColor),s=(s>>1)*2;let n=i[s-2],r=i[s-1];for(let f=0,c=s;f<c;f+=2){let d=i[f],p=i[f+1];t.line(d,p,n,r),n=d,r=p;}}}}if(this.drawBoundingBoxes){let k=this.bounds;k.update(o,true),t.setColor(this.aabbColor),t.rect(false,k.minX,k.minY,k.getWidth(),k.getHeight());let I=k.polygons,Y=k.boundingBoxes;for(let U=0,H=I.length;U<H;U++){let K=I[U];t.setColor(Y[U].color),t.polygon(K,0,K.length);}}if(this.drawPaths){let k=o.slots;for(let I=0,Y=k.length;I<Y;I++){let U=k[I];if(!U.bone.active)continue;let H=U.getAttachment();if(!(H instanceof ui))continue;let K=H,i=K.worldVerticesLength,e=this.temp=E.setArraySize(this.temp,i,0);K.computeWorldVertices(U,0,i,e,0,2);let s=this.pathColor,n=e[2],r=e[3],f=0,c=0;if(K.closed){t.setColor(s);let d=e[0],p=e[1],x=e[i-2],w=e[i-1];f=e[i-4],c=e[i-3],t.curve(n,r,d,p,x,w,f,c,32),t.setColor(Gi.LIGHT_GRAY),t.line(n,r,d,p),t.line(f,c,x,w);}i-=4;for(let d=4;d<i;d+=6){let p=e[d],x=e[d+1],w=e[d+2],C=e[d+3];f=e[d+4],c=e[d+5],t.setColor(s),t.curve(n,r,p,x,w,C,f,c,32),t.setColor(Gi.LIGHT_GRAY),t.line(n,r,p,x),t.line(f,c,w,C),n=f,r=c;}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let k=0,I=v.length;k<I;k++){let Y=v[k];h&&h.indexOf(Y.data.name)>-1||t.circle(true,g+Y.worldX,M+Y.worldY,3*this.scale,Gi.GREEN,8);}}if(this.drawClipping){let k=o.slots;t.setColor(this.clipColor);for(let I=0,Y=k.length;I<Y;I++){let U=k[I];if(!U.bone.active)continue;let H=U.getAttachment();if(!(H instanceof Oi))continue;let K=H,i=K.worldVerticesLength,e=this.temp=E.setArraySize(this.temp,i,0);K.computeWorldVertices(U,0,i,e,0,2);for(let s=0,n=e.length;s<n;s+=2){let r=e[s],f=e[s+1],c=e[(s+2)%e.length],d=e[(s+3)%e.length];t.line(r,f,c,d);}}}}dispose(){}},Ei=Gi;Ei.LIGHT_GRAY=new u(.7529411764705882,.7529411764705882,.7529411764705882,1),Ei.GREEN=new u(0,1,0,1);var bs=class{constructor(t,o,h){this.vertices=t,this.numVertices=o,this.numFloats=h;}},ur=class{constructor(t,o=true){this.premultipliedAlpha=false,this.vertexEffect=null,this.tempColor=new u,this.tempColor2=new u,this.vertexSize=8,this.twoColorTint=false,this.renderable=new bs(null,0,0),this.clipper=new ys,this.temp=new $,this.temp2=new $,this.temp3=new u,this.temp4=new u,this.twoColorTint=o,o&&(this.vertexSize+=4),this.vertices=E.newFloatArray(this.vertexSize*1024);}draw(t,o,h=-1,g=-1){let M=this.clipper,V=this.premultipliedAlpha,b=this.twoColorTint,v=null,k=this.temp,I=this.temp2,Y=this.temp3,U=this.temp4,H=this.renderable,K=null,i=null,e=o.drawOrder,s=null,n=o.color,r=b?12:8,f=false;h==-1&&(f=true);for(let c=0,d=e.length;c<d;c++){let p=M.isClipping()?2:r,x=e[c];if(!x.bone.active){M.clipEndWithSlot(x);continue}if(h>=0&&h==x.data.index&&(f=true),!f){M.clipEndWithSlot(x);continue}g>=0&&g==x.data.index&&(f=false);let w=x.getAttachment(),C=null;if(w instanceof Ie){let F=w;H.vertices=this.vertices,H.numVertices=4,H.numFloats=p<<2,F.computeWorldVertices(x.bone,H.vertices,0,p),i=ur.QUAD_TRIANGLES,K=F.uvs,C=F.region.renderObject.page.texture,s=F.color;}else if(w instanceof yi){let F=w;H.vertices=this.vertices,H.numVertices=F.worldVerticesLength>>1,H.numFloats=H.numVertices*p,H.numFloats>H.vertices.length&&(H.vertices=this.vertices=E.newFloatArray(H.numFloats)),F.computeWorldVertices(x,0,F.worldVerticesLength,H.vertices,0,p),i=F.triangles,C=F.region.renderObject.page.texture,K=F.uvs,s=F.color;}else if(w instanceof Oi){let F=w;M.clipStart(x,F);continue}else {M.clipEndWithSlot(x);continue}if(C){let F=x.color,B=this.tempColor;B.r=n.r*F.r*s.r,B.g=n.g*F.g*s.g,B.b=n.b*F.b*s.b,B.a=n.a*F.a*s.a,V&&(B.r*=B.a,B.g*=B.a,B.b*=B.a);let X=this.tempColor2;x.darkColor?(V?(X.r=x.darkColor.r*B.a,X.g=x.darkColor.g*B.a,X.b=x.darkColor.b*B.a):X.setFromColor(x.darkColor),X.a=V?1:0):X.set(0,0,0,1);let z=x.data.blendMode;if(z!=v&&(v=z,t.setBlendMode(As.getSourceColorGLBlendMode(v,V),As.getSourceAlphaGLBlendMode(v),As.getDestGLBlendMode(v))),M.isClipping()){M.clipTriangles(H.vertices,H.numFloats,i,i.length,K,B,X,b);let W=new Float32Array(M.clippedVertices),Z=M.clippedTriangles;if(this.vertexEffect){let J=this.vertexEffect,j=W;if(b)for(let Q=0,tt=W.length;Q<tt;Q+=r)k.x=j[Q],k.y=j[Q+1],Y.set(j[Q+2],j[Q+3],j[Q+4],j[Q+5]),I.x=j[Q+6],I.y=j[Q+7],U.set(j[Q+8],j[Q+9],j[Q+10],j[Q+11]),J.transform(k,I,Y,U),j[Q]=k.x,j[Q+1]=k.y,j[Q+2]=Y.r,j[Q+3]=Y.g,j[Q+4]=Y.b,j[Q+5]=Y.a,j[Q+6]=I.x,j[Q+7]=I.y,j[Q+8]=U.r,j[Q+9]=U.g,j[Q+10]=U.b,j[Q+11]=U.a;else for(let Q=0,tt=W.length;Q<tt;Q+=r)k.x=j[Q],k.y=j[Q+1],Y.set(j[Q+2],j[Q+3],j[Q+4],j[Q+5]),I.x=j[Q+6],I.y=j[Q+7],U.set(0,0,0,0),J.transform(k,I,Y,U),j[Q]=k.x,j[Q+1]=k.y,j[Q+2]=Y.r,j[Q+3]=Y.g,j[Q+4]=Y.b,j[Q+5]=Y.a,j[Q+6]=I.x,j[Q+7]=I.y;}t.draw(C,W,Z);}else {let W=H.vertices;if(this.vertexEffect){let J=this.vertexEffect;if(b)for(let j=0,Q=0,tt=H.numFloats;j<tt;j+=r,Q+=2)k.x=W[j],k.y=W[j+1],I.x=K[Q],I.y=K[Q+1],Y.setFromColor(B),U.setFromColor(X),J.transform(k,I,Y,U),W[j]=k.x,W[j+1]=k.y,W[j+2]=Y.r,W[j+3]=Y.g,W[j+4]=Y.b,W[j+5]=Y.a,W[j+6]=I.x,W[j+7]=I.y,W[j+8]=U.r,W[j+9]=U.g,W[j+10]=U.b,W[j+11]=U.a;else for(let j=0,Q=0,tt=H.numFloats;j<tt;j+=r,Q+=2)k.x=W[j],k.y=W[j+1],I.x=K[Q],I.y=K[Q+1],Y.setFromColor(B),U.set(0,0,0,0),J.transform(k,I,Y,U),W[j]=k.x,W[j+1]=k.y,W[j+2]=Y.r,W[j+3]=Y.g,W[j+4]=Y.b,W[j+5]=Y.a,W[j+6]=I.x,W[j+7]=I.y;}else if(b)for(let J=2,j=0,Q=H.numFloats;J<Q;J+=r,j+=2)W[J]=B.r,W[J+1]=B.g,W[J+2]=B.b,W[J+3]=B.a,W[J+4]=K[j],W[J+5]=K[j+1],W[J+6]=X.r,W[J+7]=X.g,W[J+8]=X.b,W[J+9]=X.a;else for(let J=2,j=0,Q=H.numFloats;J<Q;J+=r,j+=2)W[J]=B.r,W[J+1]=B.g,W[J+2]=B.b,W[J+3]=B.a,W[J+4]=K[j],W[J+5]=K[j+1];let Z=H.vertices.subarray(0,H.numFloats);t.draw(C,Z,i);}}M.clipEndWithSlot(x);}M.clipEnd();}},rs=ur;rs.QUAD_TRIANGLES=[0,1,2,2,3,0];var yt=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],ns=[0,1,2,2,3,0],as=new u(1,1,1,1),Ii=class{constructor(t,o,h=true){this.twoColorTint=false,this.canvas=t,this.context=o instanceof oi?o:new oi(o),this.twoColorTint=h,this.camera=new le(t.width,t.height),this.batcherShader=h?qt.newTwoColoredTextured(this.context):qt.newColoredTextured(this.context),this.batcher=new Ss(this.context,h),this.shapesShader=qt.newColored(this.context),this.shapes=new Hs(this.context),this.skeletonRenderer=new rs(this.context,h),this.skeletonDebugRenderer=new Ei(this.context);}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose();}begin(){this.camera.update(),this.enableRenderer(this.batcher);}drawSkeleton(t,o=false,h=-1,g=-1){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=o,this.skeletonRenderer.draw(this.batcher,t,h,g);}drawSkeletonDebug(t,o=false,h=null){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=o,this.skeletonDebugRenderer.draw(this.shapes,t,h);}drawTexture(t,o,h,g,M,V=null){this.enableRenderer(this.batcher),V===null&&(V=as);var b=0;yt[b++]=o,yt[b++]=h,yt[b++]=V.r,yt[b++]=V.g,yt[b++]=V.b,yt[b++]=V.a,yt[b++]=0,yt[b++]=1,this.twoColorTint&&(yt[b++]=0,yt[b++]=0,yt[b++]=0,yt[b++]=0),yt[b++]=o+g,yt[b++]=h,yt[b++]=V.r,yt[b++]=V.g,yt[b++]=V.b,yt[b++]=V.a,yt[b++]=1,yt[b++]=1,this.twoColorTint&&(yt[b++]=0,yt[b++]=0,yt[b++]=0,yt[b++]=0),yt[b++]=o+g,yt[b++]=h+M,yt[b++]=V.r,yt[b++]=V.g,yt[b++]=V.b,yt[b++]=V.a,yt[b++]=1,yt[b++]=0,this.twoColorTint&&(yt[b++]=0,yt[b++]=0,yt[b++]=0,yt[b++]=0),yt[b++]=o,yt[b++]=h+M,yt[b++]=V.r,yt[b++]=V.g,yt[b++]=V.b,yt[b++]=V.a,yt[b++]=0,yt[b++]=0,this.twoColorTint&&(yt[b++]=0,yt[b++]=0,yt[b++]=0,yt[b]=0),this.batcher.draw(t,yt,ns);}drawTextureUV(t,o,h,g,M,V,b,v,k,I=null){this.enableRenderer(this.batcher),I===null&&(I=as);var Y=0;yt[Y++]=o,yt[Y++]=h,yt[Y++]=I.r,yt[Y++]=I.g,yt[Y++]=I.b,yt[Y++]=I.a,yt[Y++]=V,yt[Y++]=b,this.twoColorTint&&(yt[Y++]=0,yt[Y++]=0,yt[Y++]=0,yt[Y++]=0),yt[Y++]=o+g,yt[Y++]=h,yt[Y++]=I.r,yt[Y++]=I.g,yt[Y++]=I.b,yt[Y++]=I.a,yt[Y++]=v,yt[Y++]=b,this.twoColorTint&&(yt[Y++]=0,yt[Y++]=0,yt[Y++]=0,yt[Y++]=0),yt[Y++]=o+g,yt[Y++]=h+M,yt[Y++]=I.r,yt[Y++]=I.g,yt[Y++]=I.b,yt[Y++]=I.a,yt[Y++]=v,yt[Y++]=k,this.twoColorTint&&(yt[Y++]=0,yt[Y++]=0,yt[Y++]=0,yt[Y++]=0),yt[Y++]=o,yt[Y++]=h+M,yt[Y++]=I.r,yt[Y++]=I.g,yt[Y++]=I.b,yt[Y++]=I.a,yt[Y++]=V,yt[Y++]=k,this.twoColorTint&&(yt[Y++]=0,yt[Y++]=0,yt[Y++]=0,yt[Y]=0),this.batcher.draw(t,yt,ns);}drawTextureRotated(t,o,h,g,M,V,b,v,k=null){this.enableRenderer(this.batcher),k===null&&(k=as);let I=o+V,Y=h+b,U=-V,H=-b,K=g-V,i=M-b,e=U,s=H,n=U,r=i,f=K,c=i,d=K,p=H,x=0,w=0,C=0,F=0,B=0,X=0,z=0,W=0;if(v!=0){let J=S.cosDeg(v),j=S.sinDeg(v);x=J*e-j*s,w=j*e+J*s,z=J*n-j*r,W=j*n+J*r,B=J*f-j*c,X=j*f+J*c,C=B+(x-z),F=X+(w-W);}else x=e,w=s,z=n,W=r,B=f,X=c,C=d,F=p;x+=I,w+=Y,C+=I,F+=Y,B+=I,X+=Y,z+=I,W+=Y;var Z=0;yt[Z++]=x,yt[Z++]=w,yt[Z++]=k.r,yt[Z++]=k.g,yt[Z++]=k.b,yt[Z++]=k.a,yt[Z++]=0,yt[Z++]=1,this.twoColorTint&&(yt[Z++]=0,yt[Z++]=0,yt[Z++]=0,yt[Z++]=0),yt[Z++]=C,yt[Z++]=F,yt[Z++]=k.r,yt[Z++]=k.g,yt[Z++]=k.b,yt[Z++]=k.a,yt[Z++]=1,yt[Z++]=1,this.twoColorTint&&(yt[Z++]=0,yt[Z++]=0,yt[Z++]=0,yt[Z++]=0),yt[Z++]=B,yt[Z++]=X,yt[Z++]=k.r,yt[Z++]=k.g,yt[Z++]=k.b,yt[Z++]=k.a,yt[Z++]=1,yt[Z++]=0,this.twoColorTint&&(yt[Z++]=0,yt[Z++]=0,yt[Z++]=0,yt[Z++]=0),yt[Z++]=z,yt[Z++]=W,yt[Z++]=k.r,yt[Z++]=k.g,yt[Z++]=k.b,yt[Z++]=k.a,yt[Z++]=0,yt[Z++]=0,this.twoColorTint&&(yt[Z++]=0,yt[Z++]=0,yt[Z++]=0,yt[Z]=0),this.batcher.draw(t,yt,ns);}drawRegion(t,o,h,g,M,V=null){this.enableRenderer(this.batcher),V===null&&(V=as);var b=0;yt[b++]=o,yt[b++]=h,yt[b++]=V.r,yt[b++]=V.g,yt[b++]=V.b,yt[b++]=V.a,yt[b++]=t.u,yt[b++]=t.v2,this.twoColorTint&&(yt[b++]=0,yt[b++]=0,yt[b++]=0,yt[b++]=0),yt[b++]=o+g,yt[b++]=h,yt[b++]=V.r,yt[b++]=V.g,yt[b++]=V.b,yt[b++]=V.a,yt[b++]=t.u2,yt[b++]=t.v2,this.twoColorTint&&(yt[b++]=0,yt[b++]=0,yt[b++]=0,yt[b++]=0),yt[b++]=o+g,yt[b++]=h+M,yt[b++]=V.r,yt[b++]=V.g,yt[b++]=V.b,yt[b++]=V.a,yt[b++]=t.u2,yt[b++]=t.v,this.twoColorTint&&(yt[b++]=0,yt[b++]=0,yt[b++]=0,yt[b++]=0),yt[b++]=o,yt[b++]=h+M,yt[b++]=V.r,yt[b++]=V.g,yt[b++]=V.b,yt[b++]=V.a,yt[b++]=t.u,yt[b++]=t.v,this.twoColorTint&&(yt[b++]=0,yt[b++]=0,yt[b++]=0,yt[b]=0),this.batcher.draw(t.page.texture,yt,ns);}line(t,o,h,g,M=null,V=null){this.enableRenderer(this.shapes),this.shapes.line(t,o,h,g,M);}triangle(t,o,h,g,M,V,b,v=null,k=null,I=null){this.enableRenderer(this.shapes),this.shapes.triangle(t,o,h,g,M,V,b,v,k,I);}quad(t,o,h,g,M,V,b,v,k,I=null,Y=null,U=null,H=null){this.enableRenderer(this.shapes),this.shapes.quad(t,o,h,g,M,V,b,v,k,I,Y,U,H);}rect(t,o,h,g,M,V=null){this.enableRenderer(this.shapes),this.shapes.rect(t,o,h,g,M,V);}rectLine(t,o,h,g,M,V,b=null){this.enableRenderer(this.shapes),this.shapes.rectLine(t,o,h,g,M,V,b);}polygon(t,o,h,g=null){this.enableRenderer(this.shapes),this.shapes.polygon(t,o,h,g);}circle(t,o,h,g,M=null,V=0){this.enableRenderer(this.shapes),this.shapes.circle(t,o,h,g,M,V);}curve(t,o,h,g,M,V,b,v,k,I=null){this.enableRenderer(this.shapes),this.shapes.curve(t,o,h,g,M,V,b,v,k,I);}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null;}resize(t){let o=this.canvas;var h=window.devicePixelRatio||1,g=Math.round(o.clientWidth*h),M=Math.round(o.clientHeight*h);if((o.width!=g||o.height!=M)&&(o.width=g,o.height=M),this.context.gl.viewport(0,0,o.width,o.height),t===zi.Expand)this.camera.setViewport(g,M);else if(t===zi.Fit){let V=o.width,b=o.height,v=this.camera.viewportWidth,k=this.camera.viewportHeight,I=k/v,Y=b/V,U=I<Y?v/V:k/b;this.camera.setViewport(V*U,b*U);}this.camera.update();}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof Ss?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(qt.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof Hs?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(qt.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer);}},zi;(function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit";})(zi||(zi={}));var Zi,Vi,Js=0,Qs=1,os=1,_s=165,Ks=108,Di=163,fr=class{constructor(t){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new it,this.backgroundColor=new u(.135,.135,.135,1),this.tempColor=new u,this.renderer=t,this.timeKeeper.maxDelta=9,!Vi){let o=navigator.userAgent.indexOf("Safari")>-1,h=()=>Js++;Vi=new Image,Vi.src=Ts,o||(Vi.crossOrigin="anonymous"),Vi.onload=h,Zi=new Image,Zi.src=At,o||(Zi.crossOrigin="anonymous"),Zi.onload=h;}}dispose(){var t,o;(t=this.logo)==null||t.dispose(),(o=this.spinner)==null||o.dispose();}draw(t=false){if(Js<2||t&&this.fadeOut>os)return;this.timeKeeper.update();let o=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=this.timeKeeper.delta*200*(1+1.5*Math.pow(o,5));let h=this.tempColor,g=this.renderer,M=g.canvas,V=g.context.gl;if(g.resize(zi.Expand),g.camera.position.set(M.width/2,M.height/2,0),g.batcher.setBlendMode(V.ONE,V.ONE,V.ONE_MINUS_SRC_ALPHA),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>os)return;h.setFromColor(this.backgroundColor),o=1-this.fadeOut/os,o=1-(o-1)*(o-1),h.a*=o,h.a>0&&(g.camera.zoom=1,g.begin(),g.quad(true,0,0,M.width,0,M.width,M.height,0,M.height,h,h,h,h),g.end());}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(V.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),V.clear(V.COLOR_BUFFER_BIT)),o=1;o*=Math.min(this.fadeIn/Qs,1),h.set(o,o,o,o),this.logo||(this.logo=new ss(g.context,Vi),this.spinner=new ss(g.context,Zi)),g.camera.zoom=Math.max(1,Di/M.height),g.begin(),g.drawTexture(this.logo,(M.width-_s)/2,(M.height-Ks)/2,_s,Ks,h),g.drawTextureRotated(this.spinner,(M.width-Di)/2,(M.height-Di)/2,Di,Di,Di/2,Di/2,this.angle,h),g.end();}},At="data:image/png;base64,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",Ts="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAQ7klEQVR42u3da4xdVRUA4D0zd2Y6nZY59DVtZ1puS9+lzC0YAi2UQ8AAQczFpPgA9VIeIQbirRqJ0cBUBVGjDr/QCKSNRSMmpuODxAdxqhgwxkhFjf6Sxh/+UUNVNGJCzR7uTvas7LXX2q9zzp3em6y0gTN3Zu75utZe5+yztxC9V+/Ve5X9En1Vjd7J6SFbLNF7naPw+l2jh7YHMBWssqMHtlsRdim4qsLtIawaPiHEQOLoNrA9iIkQDnRrVA1qD2LZ8ISoxYqKo13sQAtBWBayQWZUAXGRQM9JjCngDVY0UqJNDbQrMcaGmArdUKpIjbYiQLsCZCyIMQBy8QwnilR4Q5AuCpxFYvRFmBLbEiwKwpsSaWycVQGZBKMrwBjA9BhxDe57u2L2hOoKNCbOrgAZitEVYUxoKSMErQvSxYIzCkguRg5EF4AUhqUlhy/YUKSxcRaKsioYOQhD4I0yYxkR3PcJBcuFysmgsXAWBTMJyBCMIQh9kGGxXIXvexCQXbHGAMrBWTbM2CCpMSMLIxehC77lSJwXGth7M0FzoVJIXXDWQnGmhOkL0ic7YhhtWdGGkAuPAjUWGoF4faCmwBkbZmyUqUCyMqMLRA4+E6IsdTjidUHKBYrh9CnpRcH0ypKxsyOGEYNIIeTCOz91OIJ1QYoB5eAMyZo+MFNnyVTZ0YiRC9EGEMOyAgshxErHsL2XK1gOUgwohtM1a5YNM7Rsu4K0ZkcbRm4mpPBRwFZ5hg9eCqkrUB+csWGGogzNkqEgrdnRhpGLkINudaLgwvVB6oqzCjCTZElb2Y4B0gUjBtEG0ARnDRLjjoG9DwcshtQGlIPTljVjwUySLWNkyRCQVHa0ZUUTRAwgF91a33BEy0VKAcVwwqwZC2bqbOlUurllOxQkJzNyINoAYqjWhYYjWg5SCiiG05Q1U8FMjTIoS8YE6YORi1BHtJ4KIcQEEtTXUWAxpK44YVlPBdO1jCdFWTZIE8bVGEYMIRPcZGBw4HKQcoBiOE1ZMzbMgVQwU6JMAdKEEcuIJogUvg1YCCE2gsCO42DlIIVAKZwpYJaSLVNnSU6XjYHUmxhTmXaFaMO3EYkLqMC+FsLlIoVAKZzMrEnBhJeLfLNlKMrYWRIDCbOkFSSVHbHM6AKRC6/ODUewNqQ+OLlZkxpjUmV8MBbMUJSxyzY3Q1IgTRgxiBRCHdem0KDAUkBh9sRwwjEnAXMMgTnKhFlUtiwkS5rGka4g9SaGgxFmRC7AzTCEEBcyA36dDSsXqAtOLkysjGMwY5XxVChjZ0kuSCo7YlkRQsQQYtDEFsegsLoCxUp7Kpgps2UslFGzJGccSYHUmxhOZqwzEZqAbfUMCisHKIZzgsCpl3MTzMwTpi1bYp2477gyFKUxS7qWbdjY2EBS2dGE0QQRA7gNCyHEdhjE8RhUDlBT9tzgmjWZMFNlSy+Urk1OzCyJlW0XkK4YOQh1cDtcgwBrQmoDWkdgboBZE8mYsJSHlnFbJ+5bwmOPJ7lZkirbC8aRsMvmgtTHjBhGE0QbwJ2egUE1ITVlUC5OmDVdYNrKuN70xM6WoShjlW4464dbtiFIWK6x7GjESEHUUe0iYncnbMdQSE0Z1ITTNOb0hRmjjLtmS9dmJ2rp1jtuKktyyrb6YLEMCUHq2dGG0QQRQ7f72kzc+cJecerne8Wvv7JNPHPvenEkz8Sh3UtFc92QyGt9Yko/HgOLAIUZlItTz5ouMF3KuE+2jFLCQ1D6lm6fLMkBacuOJowYRBUXyfjuHjF3NhdnsfjvAfH6E9vFt9XxKgikEKgJZyyYalzOLeMu2bLbULI6bh+QGwmQ+rgRlumdGEQAao+K56bEL2woVUwOiev0r8OAUjiJrMmFCbvykGxZRAmPitK1dHM7bohyMsuyi/I8f0+e57fJYIKEZXpXo9E4mOf5XTKyLLvCBLETF8uY2SKepkC+dpX4T02Ivepr4HvZcOZ5fmee54fyPL+DmTUhzAs6n4n8bN5dr9f3YdkSg8nsxG0lPBVKVpNjG0/aGhzfLDmRZdnumZmZp8+c+cdZPV555fSr7Xb7s0jJ3i5Pcue4MxKkPPkvvXTqz/B92u32l0wYOzG1fkhcd/py8Rcbyq/vFM/KY1WA95h/3zzP71bfU6JsNpsfgj+P/FlbrdaDGExYyuXvLz8H+DudODH700ajcSM3W6Yu4alQ1spCOTd38jcKocTZbh9+9NixY99XJ8AEUkcpo9W64yH197m5k7+bnZ19QT+J09NHntQhwji/Jg58qi6++ofLxJ8gSFneVw2Ka4QQDfh1Ok4dZavVmtZ/nrm5k7/Vf55O1tRhboUw5+ZOvqyOl5+R/FyOHj32PYVU/tloNG5IXcKrhJIzngwp3fNjomazea/64BuNxts646f50lWv169utw9/DmtqdJQyZFaSJVuV6nq9fqMEof5/vV6/CYBqgJDlee+yAbF/+4i4ZWqZeNfaIfHWzn+Hx0KcEuU9+s8jv3ej0bhVlXOZydX/k0iRMeb8P0D5e6tj8zy/Xb9UJIc56h/yqVOnXul8lmuZ2bJslKmbHG7XrbpCmCXFRLvdfqQD6jTS3Jiy5I4OykM6ADV+1Eu1DmV6evopBORexzDi1L+X/HnGxsb2w3Hm9PSRJ9QxWPOTZdmlKht2hi+w6dkox5bqffI8fye3hDteGqKaHVsHXihKl0tB+h0cY+lute54AGRKDCW89LNTRynHb7ChUWVVjetOnJh9EYBUyPZeNCoOtsbFQwdXi4/esELcd+tq8cCHJ8UXp+viy9efLz7AgamjlKXc1AA1m83DoIRDlFubzeb96hhZLVTlgJ24gttutx+ONa50bHZKRenaeTs1OfpAfnr6yOOdE7EZdNwmlKocntXLNkA5JTGq47Ds+Lf94lWsyfnXleLfnIwJUN4DOnNYwuUxh2A3Ln9XULrfK8t3J27Tu3BVwiOjXJqoAy8UZej1yclGo3GTLN+gu3w+z/P3YaWbQqk3Ne12e4ZC+c8rxWsYytcPiP9RpZxCqWDKnxOiBNlyAUpOnGsoh4tA2Rm8X9xqtT6md5wyZmYe+0YRKL+1S/wYQ3n8zctBl5SBUv5djivfjMOPduIzcizeiYfr9foVvUwZG+XCuzibZKnSceZ5/v4QlKp8y7ElhnJlTeTP7BI/kllRYfzrfvHqFy4UX1vaL/aVlSmROzwbwdS29T2UcEwZF+V8ozM2lu1VY812u/15akypGh3TmFJesJbHHD167IdUxz3YJy5bNySuX1mbvy55CbMLtzU6tjGlsdFptVqfUMc0Go23F4wy1l2dSnbfvpMwVPe9WWVLDsrOJaF9MFu2Wq1PqmNkGce67xiXhTjdNwdlvV6/BgxfbPfBfVCetxi6b9/rlCup65QzM48dl2OjLMv26CibzeZ96sTIzEFdpwQXz9U1yrtVlpR/Zll2Fec65Y6l4pbbx8XHH9kknvzJlPjlHy8Tp29eKT5ou0aJoIT3w3dBlLDzVpfAJEZ1XOdaJZxnOSlvPMjPzxFljIvng914RwebsjYO7uhMyHu46sOfnf3Oz2TXDW6vvYxdFoIXz3Wc8J5zs9n8iOn2IrxTc2BM3Glqdp7dI553uaOjxrhwcob+MyuUpjs6WZZdon8OcigjPx8V+u+GTWFTSWEx3WYcdJ225jNDSE4q0GHCzlueHOyujn6bUWYgeb9ZZUaQPe+GzQ+Gc8+oOGhC+c1d4gfI16n3XDAhQ7+9qE9l01E2Go132GYKyXE1NiFDTcpoNpv3LOYJGWXNErJNW9sEp63p2RKiVPMn1bS1DgxsyhoGdGpmizj+xtXiDYnx7/vFmce3iWdW1cTVGEY4hQ2ZW0nNq8Qm/M6XbXm3S100lwGedFybuvNOibLI+ZS2ceU4eAxiEuvCkfmU8ycToDxETe6FgCBQHeqyAbFvfEhcO7BwDuXFCEbTZF840XeHK0jYcbs2OIGle0mVJ/mmnClEPQqxyTY5I8/zFhif7fSZee4bnrPOU4AssnRXHaVTCTd14dRDY3UbTIiSeFhsN/aMjgnqthFx880rxX3yATL5p3y4LPXzOaBkUyBjZMlYpbtQlIOBD475ZEusjMNSvkXe6VEoJVDkeZ2dzIfIFsRzU+JF2OyM9M9fTC/6SUYOyFQPjQ2nWiUjxnPfw5EeHqMWIqAeIFsAU847lJM2JM6xsewt1OIDLs99P7ZFHNdB/upS8XtPiD7PfLuCXJNolYyyFiNI/Zit65ItrOVafFbHcFohY7hPTN21Tjz4uc3iqfsnxKdX1MTl1OoYRFaMsToGB6Trw2JFP/OdZC2hJZ7ZkrMoAbbSGmelDJ91hFKuJeS7jlBMkJnrAqqJlgMUZS/dArPlGHNdSg5M3xXXtvquuEatvIYtDRhpxbUJuIgqsU5lGWtUploK0KuEU9mSW8YpmFQ556xNuYW7NiW13B+FkMiKHIy+C6eGgBxJvMR0oSv5hi6+z4HJyZoU0M2RVvDlrOQbcxVfX5AhZbuqy0v7ZstYMLHlAVlLTF9ALLbvu9Y5Zylpn/XOsd0ibIvxr2KCLHpp6SCUIdnSZSF+WzfOhem6GD+1KwR3Z4jNjrtDpNoZwmWd8yrupZN6Hx3fbMmFSe0Swdq2ZIPjxk1112Duo8OBGLrBkw/IoncdK2XHsdC9dHz204m50xh3tzFq1zFqtzHXrfCw7OgDsqyNnZLszVijsmXgrmNcmGtS78lIoMX2aJz03fKO2sDJddPQSCDPiQ1DfWBycY6XtXstc2PQKuxgG2McmXTPb9/9vmuJYXKyJrWjbeg+3xPM4O73nWqvbyw7xgZZSJbEUBa157cNJjdr2vb+5iA1YV3HxYscj30PDCEHIgcjtfm8K8hSsmRotkwFk5s1TTghUAopB6xrjHMBBkI0YYTZ0dZlxwLpkiWDULpmy5gwqayZgZNkA7oKQQCxctByYg0XIIEQQuRitGVHblMTA2ShKGPDpC6wu+DEgJqg2rDGDBtAF4Q6RAojp1xXGmSMbImVcR+YWNY04eQCtUG1ofUJ2/uvcETIgUhhdAE5GAlkKShjwHTNmhhODKgJqQ2sC14uOgyfD0IbRF+MlQaZAiZWyn2yJsTJATqGnHQO2Jhh+xlsACFCG0QbRtdyzQFZCZSxYPpmTS7Q5cjJHYNBYIkZpu99HoUQ/o4QIYSIZUZfjJ4ZMjZI32wZBDMU5yhy8pZTULl4XYP5fagMyEVoy4oupTpGduwnkloSlKEwY+AcQU4MhRTD6ovXBRwFzwWgCSEF0QVjJUGmgEllTS5OLlCIlIN1mS9mx/cZ5eLDALpCTI2RAhkTZQqYoTgpoCPECbaBHQ2ETL3PUl98ECAXYijG0OyYAmQoTG7W5ODkAF1CnVgm2JQx4okPA+gCMTbGskBGgRmaOblAh5GTORIrfKFx4VH4EIAxIXIxlg2SBbMvECY3e7oApbDaIgQu5/2HmeEKEINYiwSRi7EQkLFgumZOCuggctKGI4ULZN/vMeSLj0AYMytWEqMLzFg4fYDaoKaC6wvOFR4FkIPQFaILxrJAOsHsc/zlfYDWXE8qF22s8Pz5KHxcgEVALBtjJXBSSEOwFhk1Zgy4hitCT4hVw+gFs8/zwxqIBbUgyK7fcyA0PD9XX4iVxhiC0xdof6STWCsoBmKF7+cVCWFXQYyBMxRpf+STX1b0x45AhN0OMSrOGEirhrY/dfQAdjvS7oy+WCF6r1RIFxXWvlTRg1YVqFWBmxZbD99ig9pt0YPQw9rD1nstVri9V+/Ve3XrS/wfim4P5fIFxLoAAAAASUVORK5CYII=",Is=class{constructor(t,o){this.time=new it,o.pathPrefix===void 0&&(o.pathPrefix=""),o.app===void 0&&(o.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),o.webglConfig===void 0&&(o.webglConfig={alpha:true}),this.htmlCanvas=t,this.context=new oi(t,o.webglConfig),this.renderer=new Ii(t,this.context),this.gl=this.context.gl,this.assetManager=new pi(this.context,o.pathPrefix),this.input=new ce(t),o.app.loadAssets(this);let h=()=>{requestAnimationFrame(h),this.time.update(),o.app.update(this,this.time.delta),o.app.render(this);},g=()=>{if(this.assetManager.isLoadingComplete()){this.assetManager.hasErrors()?o.app.error(this,this.assetManager.getErrors()):(o.app.initialize(this),h());return}requestAnimationFrame(g);};requestAnimationFrame(g);}clear(t,o,h,g){this.gl.clearColor(t,o,h,g),this.gl.clear(this.gl.COLOR_BUFFER_BIT);}};return R})();var cn=(()=>{var L=Object.defineProperty,Yt=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,y=(i,e)=>{for(var s in e)L(i,s,{get:e[s],enumerable:true});},a=(i,e,s,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of l(e))!R.call(i,r)&&r!==s&&L(i,r,{get:()=>e[r],enumerable:!(n=Yt(e,r))||n.enumerable});return i},m=i=>a(L({},"__esModule",{value:true}),i),u={};y(u,{AlphaTimeline:()=>Ae,Animation:()=>rt,AnimationState:()=>ks,AnimationStateAdapter:()=>Fs,AnimationStateData:()=>Xs,AssetCache:()=>Bi,AssetManager:()=>he,AssetManagerBase:()=>wi,AtlasAttachmentLoader:()=>Ds,Attachment:()=>dt,AttachmentTimeline:()=>Ye,BinaryInput:()=>or,BlendMode:()=>Ws,Bone:()=>He,BoneData:()=>$i,BoundingBoxAttachment:()=>yi,CURRENT:()=>Ls,CameraController:()=>Hs,ClippingAttachment:()=>ui,Color:()=>O,Color2Attribute:()=>ns,ColorAttribute:()=>yt,ConstraintData:()=>fi,CurveTimeline:()=>at,CurveTimeline1:()=>_,CurveTimeline2:()=>ot,DebugUtils:()=>q,DeformTimeline:()=>Ve,Downloader:()=>gs,DrawOrderTimeline:()=>ze,Event:()=>ps,EventData:()=>Os,EventQueue:()=>Ji,EventTimeline:()=>qe,EventType:()=>Oi,FIRST:()=>Ci,FakeTexture:()=>Bs,GLTexture:()=>ee,HOLD_FIRST:()=>us,HOLD_MIX:()=>Ys,HOLD_SUBSEQUENT:()=>ds,IkConstraint:()=>vs,IkConstraintData:()=>ts,IkConstraintTimeline:()=>Ue,Inherit:()=>di,InheritTimeline:()=>Qt,Input:()=>Ti,IntSet:()=>A,Interpolation:()=>N,LoadingScreen:()=>Y,M00:()=>Ot,M01:()=>Wt,M02:()=>Nt,M03:()=>jt,M10:()=>te,M11:()=>le,M12:()=>ce,M13:()=>de,M20:()=>Me,M21:()=>Zt,M22:()=>qt,M23:()=>se,M30:()=>re,M31:()=>ge,M32:()=>we,M33:()=>pe,ManagedWebGLRenderingContext:()=>Jt,MathUtils:()=>T,Matrix4:()=>Li,Mesh:()=>Gi,MeshAttachment:()=>Xi,MixBlend:()=>Tt,MixDirection:()=>ht,OrthoCamera:()=>qs,PathAttachment:()=>Pi,PathConstraint:()=>sr,PathConstraintData:()=>Ui,PathConstraintMixTimeline:()=>Xe,PathConstraintPositionTimeline:()=>We,PathConstraintSpacingTimeline:()=>Ze,Physics:()=>Si,PhysicsConstraintDampingTimeline:()=>ri,PhysicsConstraintGravityTimeline:()=>ci,PhysicsConstraintInertiaTimeline:()=>De,PhysicsConstraintMassTimeline:()=>hi,PhysicsConstraintMixTimeline:()=>Mi,PhysicsConstraintResetTimeline:()=>Hi,PhysicsConstraintStrengthTimeline:()=>xi,PhysicsConstraintTimeline:()=>$e,PhysicsConstraintWindTimeline:()=>ti,PointAttachment:()=>ms,PolygonBatcher:()=>Qs,Pool:()=>$,Position2Attribute:()=>bs,Position3Attribute:()=>ur,PositionMode:()=>es,Pow:()=>P,PowOut:()=>E,RGB2Timeline:()=>ye,RGBA2Timeline:()=>Le,RGBATimeline:()=>ie,RGBTimeline:()=>Kt,RegionAttachment:()=>Ni,ResizeMode:()=>o,RotateMode:()=>is,RotateTimeline:()=>xt,SETUP:()=>Ps,SUBSEQUENT:()=>ni,ScaleTimeline:()=>Lt,ScaleXTimeline:()=>Bt,ScaleYTimeline:()=>Gt,SceneRenderer:()=>t,SequenceTimeline:()=>cs,Shader:()=>Oe,ShapeRenderer:()=>os,ShapeType:()=>_s,ShearTimeline:()=>kt,ShearXTimeline:()=>bt,ShearYTimeline:()=>wt,Skeleton:()=>Ai,SkeletonBinary:()=>wr,SkeletonBounds:()=>ae,SkeletonClipping:()=>fe,SkeletonData:()=>Ce,SkeletonDebugRenderer:()=>Ks,SkeletonJson:()=>me,SkeletonRenderer:()=>fr,Skin:()=>Ms,SkinEntry:()=>Ns,Slot:()=>nr,SlotData:()=>Us,SpacingMode:()=>ei,SpineCanvas:()=>K,StringSet:()=>S,TexCoordAttribute:()=>rs,Texture:()=>Qi,TextureAtlas:()=>ii,TextureAtlasPage:()=>Ki,TextureAtlasRegion:()=>fs,TextureFilter:()=>_i,TextureRegion:()=>ir,TextureWrap:()=>Ie,TimeKeeper:()=>vt,Timeline:()=>Rt,Touch:()=>Ss,TrackEntry:()=>er,TransformConstraint:()=>ar,TransformConstraintData:()=>Gs,TransformConstraintTimeline:()=>_e,TranslateTimeline:()=>Mt,TranslateXTimeline:()=>Xt,TranslateYTimeline:()=>Dt,Triangulator:()=>ue,Utils:()=>D,Vector2:()=>it,Vector3:()=>$t,VertexAttachment:()=>st,VertexAttribute:()=>Ei,VertexAttributeType:()=>as,WindowedMean:()=>lt});var A=class{array=new Array;add(i){let e=this.contains(i);return this.array[i|0]=i|0,!e}contains(i){return this.array[i|0]!=null}remove(i){this.array[i|0]=void 0;}clear(){this.array.length=0;}},S=class{entries={};size=0;add(i){let e=this.entries[i];return this.entries[i]=true,e?false:(this.size++,true)}addAll(i){let e=this.size;for(var s=0,n=i.length;s<n;s++)this.add(i[s]);return e!=this.size}contains(i){return this.entries[i]}clear(){this.entries={},this.size=0;}},O=class hs{constructor(e=0,s=0,n=0,r=0){this.r=e,this.g=s,this.b=n,this.a=r;}static WHITE=new hs(1,1,1,1);static RED=new hs(1,0,0,1);static GREEN=new hs(0,1,0,1);static BLUE=new hs(0,0,1,1);static MAGENTA=new hs(1,0,1,1);set(e,s,n,r){return this.r=e,this.g=s,this.b=n,this.a=r,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this}add(e,s,n,r){return this.r+=e,this.g+=s,this.b+=n,this.a+=r,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,s){e.r=((s&4278190080)>>>24)/255,e.g=((s&16711680)>>>16)/255,e.b=((s&65280)>>>8)/255,e.a=(s&255)/255;}static rgb888ToColor(e,s){e.r=((s&16711680)>>>16)/255,e.g=((s&65280)>>>8)/255,e.b=(s&255)/255;}toRgb888(){let e=s=>("0"+(s*255).toString(16)).slice(-2);return +("0x"+e(this.r)+e(this.g)+e(this.b))}static fromString(e,s=new hs){return s.setFromString(e)}},T=class ki{static PI=3.1415927;static PI2=ki.PI*2;static invPI2=1/ki.PI2;static radiansToDegrees=180/ki.PI;static radDeg=ki.radiansToDegrees;static degreesToRadians=ki.PI/180;static degRad=ki.degreesToRadians;static clamp(e,s,n){return e<s?s:e>n?n:e}static cosDeg(e){return Math.cos(e*ki.degRad)}static sinDeg(e){return Math.sin(e*ki.degRad)}static atan2Deg(e,s){return Math.atan2(e,s)*ki.degRad}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let s=Math.pow(Math.abs(e),.3333333333333333);return e<0?-s:s}static randomTriangular(e,s){return ki.randomTriangularWith(e,s,(e+s)*.5)}static randomTriangularWith(e,s,n){let r=Math.random(),f=s-e;return r<=(n-e)/f?e+Math.sqrt(r*f*(n-e)):s-Math.sqrt((1-r)*f*(s-n))}static isPowerOfTwo(e){return e&&(e&e-1)===0}},N=class{apply(i,e,s){return i+(e-i)*this.applyInternal(s)}},P=class extends N{power=2;constructor(i){super(),this.power=i;}applyInternal(i){return i<=.5?Math.pow(i*2,this.power)/2:Math.pow((i-1)*2,this.power)/(this.power%2==0?-2:2)+1}},E=class extends P{constructor(i){super(i);}applyInternal(i){return Math.pow(i-1,this.power)*(this.power%2==0?-1:1)+1}},D=class Rs{static SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";static arrayCopy(e,s,n,r,f){for(let c=s,d=r;c<s+f;c++,d++)n[d]=e[c];}static arrayFill(e,s,n,r){for(let f=s;f<n;f++)e[f]=r;}static setArraySize(e,s,n=0){let r=e.length;if(r==s)return e;if(e.length=s,r<s)for(let f=r;f<s;f++)e[f]=n;return e}static ensureArrayCapacity(e,s,n=0){return e.length>=s?e:Rs.setArraySize(e,s,n)}static newArray(e,s){let n=new Array(e);for(let r=0;r<e;r++)n[r]=s;return n}static newFloatArray(e){if(Rs.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);{let s=new Array(e);for(let n=0;n<s.length;n++)s[n]=0;return s}}static newShortArray(e){if(Rs.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);{let s=new Array(e);for(let n=0;n<s.length;n++)s[n]=0;return s}}static toFloatArray(e){return Rs.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}static toSinglePrecision(e){return Rs.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}static webkit602BugfixHelper(e,s){}static contains(e,s,n=true){for(var r=0;r<e.length;r++)if(e[r]==s)return  true;return  false}static enumValue(e,s){return e[s[0].toUpperCase()+s.slice(1)]}},q=class{static logBones(i){for(let e=0;e<i.bones.length;e++){let s=i.bones[e];console.log(s.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.worldX+", "+s.worldY);}}},$=class{items=new Array;instantiator;constructor(i){this.instantiator=i;}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(i){i.reset&&i.reset(),this.items.push(i);}freeAll(i){for(let e=0;e<i.length;e++)this.free(i[e]);}clear(){this.items.length=0;}},it=class{constructor(i=0,e=0){this.x=i,this.y=e;}set(i,e){return this.x=i,this.y=e,this}length(){let i=this.x,e=this.y;return Math.sqrt(i*i+e*e)}normalize(){let i=this.length();return i!=0&&(this.x/=i,this.y/=i),this}},vt=class{maxDelta=.064;framesPerSecond=0;delta=0;totalTime=0;lastTime=Date.now()/1e3;frameCount=0;frameTime=0;update(){let i=Date.now()/1e3;this.delta=i-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=i,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0);}},lt=class{values;addedValues=0;lastValue=0;mean=0;dirty=true;constructor(i=32){this.values=new Array(i);}hasEnoughData(){return this.addedValues>=this.values.length}addValue(i){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=i,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=true;}getMean(){if(this.hasEnoughData()){if(this.dirty){let i=0;for(let e=0;e<this.values.length;e++)i+=this.values[e];this.mean=i/this.values.length,this.dirty=false;}return this.mean}return 0}},dt=class{name;constructor(i){if(!i)throw new Error("name cannot be null.");this.name=i;}},st=class Hr extends dt{static nextID=0;id=Hr.nextID++;bones=null;vertices=[];worldVerticesLength=0;timelineAttachment=this;constructor(e){super(e);}computeWorldVertices(e,s,n,r,f,c){n=f+(n>>1)*c;let d=e.bone.skeleton,p=e.deform,x=this.vertices,w=this.bones;if(!w){p.length>0&&(x=p);let X=e.bone,z=X.worldX,W=X.worldY,Z=X.a,J=X.b,j=X.c,Q=X.d;for(let tt=s,nt=f;nt<n;tt+=2,nt+=c){let pt=x[tt],mt=x[tt+1];r[nt]=pt*Z+mt*J+z,r[nt+1]=pt*j+mt*Q+W;}return}let C=0,F=0;for(let X=0;X<s;X+=2){let z=w[C];C+=z+1,F+=z;}let B=d.bones;if(p.length==0)for(let X=f,z=F*3;X<n;X+=c){let W=0,Z=0,J=w[C++];for(J+=C;C<J;C++,z+=3){let j=B[w[C]],Q=x[z],tt=x[z+1],nt=x[z+2];W+=(Q*j.a+tt*j.b+j.worldX)*nt,Z+=(Q*j.c+tt*j.d+j.worldY)*nt;}r[X]=W,r[X+1]=Z;}else {let X=p;for(let z=f,W=F*3,Z=F<<1;z<n;z+=c){let J=0,j=0,Q=w[C++];for(Q+=C;C<Q;C++,W+=3,Z+=2){let tt=B[w[C]],nt=x[W]+X[Z],pt=x[W+1]+X[Z+1],mt=x[W+2];J+=(nt*tt.a+pt*tt.b+tt.worldX)*mt,j+=(nt*tt.c+pt*tt.d+tt.worldY)*mt;}r[z]=J,r[z+1]=j;}}}copyTo(e){this.bones?(e.bones=new Array(this.bones.length),D.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices&&(e.vertices=D.newFloatArray(this.vertices.length),D.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)),e.worldVerticesLength=this.worldVerticesLength,e.timelineAttachment=this.timelineAttachment;}},G=class vr{static _nextID=0;id=vr.nextID();regions;start=0;digits=0;setupIndex=0;constructor(e){this.regions=new Array(e);}copy(){let e=new vr(this.regions.length);return D.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}apply(e,s){let n=e.sequenceIndex;n==-1&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);let r=this.regions[n];s.region!=r&&(s.region=r,s.updateRegion());}getPath(e,s){let n=e,r=(this.start+s).toString();for(let f=this.digits-r.length;f>0;f--)n+="0";return n+=r,n}static nextID(){return vr._nextID++}},et=(i=>(i[i.hold=0]="hold",i[i.once=1]="once",i[i.loop=2]="loop",i[i.pingpong=3]="pingpong",i[i.onceReverse=4]="onceReverse",i[i.loopReverse=5]="loopReverse",i[i.pingpongReverse=6]="pingpongReverse",i))(et||{}),ct=[0,1,2,3,4,5,6],rt=class{name;timelines=[];timelineIds=new S;duration;constructor(i,e,s){if(!i)throw new Error("name cannot be null.");this.name=i,this.setTimelines(e),this.duration=s;}setTimelines(i){if(!i)throw new Error("timelines cannot be null.");this.timelines=i,this.timelineIds.clear();for(var e=0;e<i.length;e++)this.timelineIds.addAll(i[e].getPropertyIds());}hasTimeline(i){for(let e=0;e<i.length;e++)if(this.timelineIds.contains(i[e]))return  true;return  false}apply(i,e,s,n,r,f,c,d){if(!i)throw new Error("skeleton cannot be null.");n&&this.duration!=0&&(s%=this.duration,e>0&&(e%=this.duration));let p=this.timelines;for(let x=0,w=p.length;x<w;x++)p[x].apply(i,e,s,r,f,c,d);}},Tt=(i=>(i[i.setup=0]="setup",i[i.first=1]="first",i[i.replace=2]="replace",i[i.add=3]="add",i))(Tt||{}),ht=(i=>(i[i.mixIn=0]="mixIn",i[i.mixOut=1]="mixOut",i))(ht||{}),ut={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28},Rt=class{propertyIds;frames;constructor(i,e){this.propertyIds=e,this.frames=D.newFloatArray(i*this.getFrameEntries());}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(i,e){let s=i.length;for(let n=1;n<s;n++)if(i[n]>e)return n-1;return s-1}static search(i,e,s){let n=i.length;for(let r=s;r<n;r+=s)if(i[r]>e)return r-s;return n-s}},at=class extends Rt{curves;constructor(i,e,s){super(i,s),this.curves=D.newFloatArray(i+e*18),this.curves[i-1]=1;}setLinear(i){this.curves[i]=0;}setStepped(i){this.curves[i]=1;}shrink(i){let e=this.getFrameCount()+i*18;if(this.curves.length>e){let s=D.newFloatArray(e);D.arrayCopy(this.curves,0,s,0,e),this.curves=s;}}setBezier(i,e,s,n,r,f,c,d,p,x,w){let C=this.curves,F=this.getFrameCount()+i*18;s==0&&(C[e]=2+F);let B=(n-f*2+d)*.03,X=(r-c*2+p)*.03,z=((f-d)*3-n+x)*.006,W=((c-p)*3-r+w)*.006,Z=B*2+z,J=X*2+W,j=(f-n)*.3+B+z*.16666667,Q=(c-r)*.3+X+W*.16666667,tt=n+j,nt=r+Q;for(let pt=F+18;F<pt;F+=2)C[F]=tt,C[F+1]=nt,j+=Z,Q+=J,Z+=z,J+=W,tt+=j,nt+=Q;}getBezierValue(i,e,s,n){let r=this.curves;if(r[n]>i){let p=this.frames[e],x=this.frames[e+s];return x+(i-p)/(r[n]-p)*(r[n+1]-x)}let f=n+18;for(n+=2;n<f;n+=2)if(r[n]>=i){let p=r[n-2],x=r[n-1];return x+(i-p)/(r[n]-p)*(r[n+1]-x)}e+=this.getFrameEntries();let c=r[f-2],d=r[f-1];return d+(i-c)/(this.frames[e]-c)*(this.frames[e+s]-d)}},_=class extends at{constructor(i,e,s){super(i,e,[s]);}getFrameEntries(){return 2}setFrame(i,e,s){i<<=1,this.frames[i]=e,this.frames[i+1]=s;}getCurveValue(i){let e=this.frames,s=e.length-2;for(let r=2;r<=s;r+=2)if(e[r]>i){s=r-2;break}let n=this.curves[s>>1];switch(n){case 0:let r=e[s],f=e[s+1];return f+(i-r)/(e[s+2]-r)*(e[s+2+1]-f);case 1:return e[s+1]}return this.getBezierValue(i,s,1,n-2)}getRelativeValue(i,e,s,n,r){if(i<this.frames[0]){switch(s){case 0:return r;case 1:return n+(r-n)*e}return n}let f=this.getCurveValue(i);switch(s){case 0:return r+f*e;case 1:case 2:f+=r-n;}return n+f*e}getAbsoluteValue(i,e,s,n,r){if(i<this.frames[0]){switch(s){case 0:return r;case 1:return n+(r-n)*e}return n}let f=this.getCurveValue(i);return s==0?r+(f-r)*e:n+(f-n)*e}getAbsoluteValue2(i,e,s,n,r,f){if(i<this.frames[0]){switch(s){case 0:return r;case 1:return n+(r-n)*e}return n}return s==0?r+(f-r)*e:n+(f-n)*e}getScaleValue(i,e,s,n,r,f){let c=this.frames;if(i<c[0]){switch(s){case 0:return f;case 1:return r+(f-r)*e}return r}let d=this.getCurveValue(i)*f;if(e==1)return s==3?r+d-f:d;if(n==1)switch(s){case 0:return f+(Math.abs(d)*T.signum(f)-f)*e;case 1:case 2:return r+(Math.abs(d)*T.signum(r)-r)*e}else {let p=0;switch(s){case 0:return p=Math.abs(f)*T.signum(d),p+(d-p)*e;case 1:case 2:return p=Math.abs(r)*T.signum(d),p+(d-p)*e}}return r+(d-f)*e}},ot=class extends at{constructor(i,e,s,n){super(i,e,[s,n]);}getFrameEntries(){return 3}setFrame(i,e,s,n){i*=3,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n;}},xt=class extends _{boneIndex=0;constructor(i,e,s){super(i,e,ut.rotate+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];d.active&&(d.rotation=this.getRelativeValue(s,r,f,d.rotation,d.data.rotation));}},Mt=class extends ot{boneIndex=0;constructor(i,e,s){super(i,e,ut.x+"|"+s,ut.y+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(f){case 0:d.x=d.data.x,d.y=d.data.y;return;case 1:d.x+=(d.data.x-d.x)*r,d.y+=(d.data.y-d.y)*r;}return}let x=0,w=0,C=Rt.search(p,s,3),F=this.curves[C/3];switch(F){case 0:let B=p[C];x=p[C+1],w=p[C+2];let X=(s-B)/(p[C+3]-B);x+=(p[C+3+1]-x)*X,w+=(p[C+3+2]-w)*X;break;case 1:x=p[C+1],w=p[C+2];break;default:x=this.getBezierValue(s,C,1,F-2),w=this.getBezierValue(s,C,2,F+18-2);}switch(f){case 0:d.x=d.data.x+x*r,d.y=d.data.y+w*r;break;case 1:case 2:d.x+=(d.data.x+x-d.x)*r,d.y+=(d.data.y+w-d.y)*r;break;case 3:d.x+=x*r,d.y+=w*r;}}},Xt=class extends _{boneIndex=0;constructor(i,e,s){super(i,e,ut.x+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];d.active&&(d.x=this.getRelativeValue(s,r,f,d.x,d.data.x));}},Dt=class extends _{boneIndex=0;constructor(i,e,s){super(i,e,ut.y+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];d.active&&(d.y=this.getRelativeValue(s,r,f,d.y,d.data.y));}},Lt=class extends ot{boneIndex=0;constructor(i,e,s){super(i,e,ut.scaleX+"|"+s,ut.scaleY+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(f){case 0:d.scaleX=d.data.scaleX,d.scaleY=d.data.scaleY;return;case 1:d.scaleX+=(d.data.scaleX-d.scaleX)*r,d.scaleY+=(d.data.scaleY-d.scaleY)*r;}return}let x,w,C=Rt.search(p,s,3),F=this.curves[C/3];switch(F){case 0:let B=p[C];x=p[C+1],w=p[C+2];let X=(s-B)/(p[C+3]-B);x+=(p[C+3+1]-x)*X,w+=(p[C+3+2]-w)*X;break;case 1:x=p[C+1],w=p[C+2];break;default:x=this.getBezierValue(s,C,1,F-2),w=this.getBezierValue(s,C,2,F+18-2);}if(x*=d.data.scaleX,w*=d.data.scaleY,r==1)f==3?(d.scaleX+=x-d.data.scaleX,d.scaleY+=w-d.data.scaleY):(d.scaleX=x,d.scaleY=w);else {let B=0,X=0;if(c==1)switch(f){case 0:B=d.data.scaleX,X=d.data.scaleY,d.scaleX=B+(Math.abs(x)*T.signum(B)-B)*r,d.scaleY=X+(Math.abs(w)*T.signum(X)-X)*r;break;case 1:case 2:B=d.scaleX,X=d.scaleY,d.scaleX=B+(Math.abs(x)*T.signum(B)-B)*r,d.scaleY=X+(Math.abs(w)*T.signum(X)-X)*r;break;case 3:d.scaleX+=(x-d.data.scaleX)*r,d.scaleY+=(w-d.data.scaleY)*r;}else switch(f){case 0:B=Math.abs(d.data.scaleX)*T.signum(x),X=Math.abs(d.data.scaleY)*T.signum(w),d.scaleX=B+(x-B)*r,d.scaleY=X+(w-X)*r;break;case 1:case 2:B=Math.abs(d.scaleX)*T.signum(x),X=Math.abs(d.scaleY)*T.signum(w),d.scaleX=B+(x-B)*r,d.scaleY=X+(w-X)*r;break;case 3:d.scaleX+=(x-d.data.scaleX)*r,d.scaleY+=(w-d.data.scaleY)*r;}}}},Bt=class extends _{boneIndex=0;constructor(i,e,s){super(i,e,ut.scaleX+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];d.active&&(d.scaleX=this.getScaleValue(s,r,f,c,d.scaleX,d.data.scaleX));}},Gt=class extends _{boneIndex=0;constructor(i,e,s){super(i,e,ut.scaleY+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];d.active&&(d.scaleY=this.getScaleValue(s,r,f,c,d.scaleY,d.data.scaleY));}},kt=class extends ot{boneIndex=0;constructor(i,e,s){super(i,e,ut.shearX+"|"+s,ut.shearY+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(f){case 0:d.shearX=d.data.shearX,d.shearY=d.data.shearY;return;case 1:d.shearX+=(d.data.shearX-d.shearX)*r,d.shearY+=(d.data.shearY-d.shearY)*r;}return}let x=0,w=0,C=Rt.search(p,s,3),F=this.curves[C/3];switch(F){case 0:let B=p[C];x=p[C+1],w=p[C+2];let X=(s-B)/(p[C+3]-B);x+=(p[C+3+1]-x)*X,w+=(p[C+3+2]-w)*X;break;case 1:x=p[C+1],w=p[C+2];break;default:x=this.getBezierValue(s,C,1,F-2),w=this.getBezierValue(s,C,2,F+18-2);}switch(f){case 0:d.shearX=d.data.shearX+x*r,d.shearY=d.data.shearY+w*r;break;case 1:case 2:d.shearX+=(d.data.shearX+x-d.shearX)*r,d.shearY+=(d.data.shearY+w-d.shearY)*r;break;case 3:d.shearX+=x*r,d.shearY+=w*r;}}},bt=class extends _{boneIndex=0;constructor(i,e,s){super(i,e,ut.shearX+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];d.active&&(d.shearX=this.getRelativeValue(s,r,f,d.shearX,d.data.shearX));}},wt=class extends _{boneIndex=0;constructor(i,e,s){super(i,e,ut.shearY+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];d.active&&(d.shearY=this.getRelativeValue(s,r,f,d.shearY,d.data.shearY));}},Qt=class extends Rt{boneIndex=0;constructor(i,e){super(i,[ut.inherit+"|"+e]),this.boneIndex=e;}getFrameEntries(){return 2}setFrame(i,e,s){i*=2,this.frames[i]=e,this.frames[i+1]=s;}apply(i,e,s,n,r,f,c){let d=i.bones[this.boneIndex];if(!d.active)return;if(c==1){f==0&&(d.inherit=d.data.inherit);return}let p=this.frames;if(s<p[0]){(f==0||f==1)&&(d.inherit=d.data.inherit);return}d.inherit=this.frames[Rt.search(p,s,2)+1];}},ie=class extends at{slotIndex=0;constructor(i,e,s){super(i,e,[ut.rgb+"|"+s,ut.alpha+"|"+s]),this.slotIndex=s;}getFrameEntries(){return 5}setFrame(i,e,s,n,r,f){i*=5,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r,this.frames[i+4]=f;}apply(i,e,s,n,r,f,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=this.frames,x=d.color;if(s<p[0]){let W=d.data.color;switch(f){case 0:x.setFromColor(W);return;case 1:x.add((W.r-x.r)*r,(W.g-x.g)*r,(W.b-x.b)*r,(W.a-x.a)*r);}return}let w=0,C=0,F=0,B=0,X=Rt.search(p,s,5),z=this.curves[X/5];switch(z){case 0:let W=p[X];w=p[X+1],C=p[X+2],F=p[X+3],B=p[X+4];let Z=(s-W)/(p[X+5]-W);w+=(p[X+5+1]-w)*Z,C+=(p[X+5+2]-C)*Z,F+=(p[X+5+3]-F)*Z,B+=(p[X+5+4]-B)*Z;break;case 1:w=p[X+1],C=p[X+2],F=p[X+3],B=p[X+4];break;default:w=this.getBezierValue(s,X,1,z-2),C=this.getBezierValue(s,X,2,z+18-2),F=this.getBezierValue(s,X,3,z+36-2),B=this.getBezierValue(s,X,4,z+54-2);}r==1?x.set(w,C,F,B):(f==0&&x.setFromColor(d.data.color),x.add((w-x.r)*r,(C-x.g)*r,(F-x.b)*r,(B-x.a)*r));}},Kt=class extends at{slotIndex=0;constructor(i,e,s){super(i,e,[ut.rgb+"|"+s]),this.slotIndex=s;}getFrameEntries(){return 4}setFrame(i,e,s,n,r){i<<=2,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r;}apply(i,e,s,n,r,f,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=this.frames,x=d.color;if(s<p[0]){let z=d.data.color;switch(f){case 0:x.r=z.r,x.g=z.g,x.b=z.b;return;case 1:x.r+=(z.r-x.r)*r,x.g+=(z.g-x.g)*r,x.b+=(z.b-x.b)*r;}return}let w=0,C=0,F=0,B=Rt.search(p,s,4),X=this.curves[B>>2];switch(X){case 0:let z=p[B];w=p[B+1],C=p[B+2],F=p[B+3];let W=(s-z)/(p[B+4]-z);w+=(p[B+4+1]-w)*W,C+=(p[B+4+2]-C)*W,F+=(p[B+4+3]-F)*W;break;case 1:w=p[B+1],C=p[B+2],F=p[B+3];break;default:w=this.getBezierValue(s,B,1,X-2),C=this.getBezierValue(s,B,2,X+18-2),F=this.getBezierValue(s,B,3,X+36-2);}if(r==1)x.r=w,x.g=C,x.b=F;else {if(f==0){let z=d.data.color;x.r=z.r,x.g=z.g,x.b=z.b;}x.r+=(w-x.r)*r,x.g+=(C-x.g)*r,x.b+=(F-x.b)*r;}}},Ae=class extends _{slotIndex=0;constructor(i,e,s){super(i,e,ut.alpha+"|"+s),this.slotIndex=s;}apply(i,e,s,n,r,f,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=d.color;if(s<this.frames[0]){let w=d.data.color;switch(f){case 0:p.a=w.a;return;case 1:p.a+=(w.a-p.a)*r;}return}let x=this.getCurveValue(s);r==1?p.a=x:(f==0&&(p.a=d.data.color.a),p.a+=(x-p.a)*r);}},Le=class extends at{slotIndex=0;constructor(i,e,s){super(i,e,[ut.rgb+"|"+s,ut.alpha+"|"+s,ut.rgb2+"|"+s]),this.slotIndex=s;}getFrameEntries(){return 8}setFrame(i,e,s,n,r,f,c,d,p){i<<=3,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r,this.frames[i+4]=f,this.frames[i+5]=c,this.frames[i+6]=d,this.frames[i+7]=p;}apply(i,e,s,n,r,f,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=this.frames,x=d.color,w=d.darkColor;if(s<p[0]){let Q=d.data.color,tt=d.data.darkColor;switch(f){case 0:x.setFromColor(Q),w.r=tt.r,w.g=tt.g,w.b=tt.b;return;case 1:x.add((Q.r-x.r)*r,(Q.g-x.g)*r,(Q.b-x.b)*r,(Q.a-x.a)*r),w.r+=(tt.r-w.r)*r,w.g+=(tt.g-w.g)*r,w.b+=(tt.b-w.b)*r;}return}let C=0,F=0,B=0,X=0,z=0,W=0,Z=0,J=Rt.search(p,s,8),j=this.curves[J>>3];switch(j){case 0:let Q=p[J];C=p[J+1],F=p[J+2],B=p[J+3],X=p[J+4],z=p[J+5],W=p[J+6],Z=p[J+7];let tt=(s-Q)/(p[J+8]-Q);C+=(p[J+8+1]-C)*tt,F+=(p[J+8+2]-F)*tt,B+=(p[J+8+3]-B)*tt,X+=(p[J+8+4]-X)*tt,z+=(p[J+8+5]-z)*tt,W+=(p[J+8+6]-W)*tt,Z+=(p[J+8+7]-Z)*tt;break;case 1:C=p[J+1],F=p[J+2],B=p[J+3],X=p[J+4],z=p[J+5],W=p[J+6],Z=p[J+7];break;default:C=this.getBezierValue(s,J,1,j-2),F=this.getBezierValue(s,J,2,j+18-2),B=this.getBezierValue(s,J,3,j+36-2),X=this.getBezierValue(s,J,4,j+54-2),z=this.getBezierValue(s,J,5,j+72-2),W=this.getBezierValue(s,J,6,j+90-2),Z=this.getBezierValue(s,J,7,j+108-2);}if(r==1)x.set(C,F,B,X),w.r=z,w.g=W,w.b=Z;else {if(f==0){x.setFromColor(d.data.color);let Q=d.data.darkColor;w.r=Q.r,w.g=Q.g,w.b=Q.b;}x.add((C-x.r)*r,(F-x.g)*r,(B-x.b)*r,(X-x.a)*r),w.r+=(z-w.r)*r,w.g+=(W-w.g)*r,w.b+=(Z-w.b)*r;}}},ye=class extends at{slotIndex=0;constructor(i,e,s){super(i,e,[ut.rgb+"|"+s,ut.rgb2+"|"+s]),this.slotIndex=s;}getFrameEntries(){return 7}setFrame(i,e,s,n,r,f,c,d){i*=7,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r,this.frames[i+4]=f,this.frames[i+5]=c,this.frames[i+6]=d;}apply(i,e,s,n,r,f,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=this.frames,x=d.color,w=d.darkColor;if(s<p[0]){let Q=d.data.color,tt=d.data.darkColor;switch(f){case 0:x.r=Q.r,x.g=Q.g,x.b=Q.b,w.r=tt.r,w.g=tt.g,w.b=tt.b;return;case 1:x.r+=(Q.r-x.r)*r,x.g+=(Q.g-x.g)*r,x.b+=(Q.b-x.b)*r,w.r+=(tt.r-w.r)*r,w.g+=(tt.g-w.g)*r,w.b+=(tt.b-w.b)*r;}return}let C=0,F=0,B=0,z=0,W=0,Z=0,J=Rt.search(p,s,7),j=this.curves[J/7];switch(j){case 0:let Q=p[J];C=p[J+1],F=p[J+2],B=p[J+3],z=p[J+4],W=p[J+5],Z=p[J+6];let tt=(s-Q)/(p[J+7]-Q);C+=(p[J+7+1]-C)*tt,F+=(p[J+7+2]-F)*tt,B+=(p[J+7+3]-B)*tt,z+=(p[J+7+4]-z)*tt,W+=(p[J+7+5]-W)*tt,Z+=(p[J+7+6]-Z)*tt;break;case 1:C=p[J+1],F=p[J+2],B=p[J+3],z=p[J+4],W=p[J+5],Z=p[J+6];break;default:C=this.getBezierValue(s,J,1,j-2),F=this.getBezierValue(s,J,2,j+18-2),B=this.getBezierValue(s,J,3,j+36-2),z=this.getBezierValue(s,J,4,j+54-2),W=this.getBezierValue(s,J,5,j+72-2),Z=this.getBezierValue(s,J,6,j+90-2);}if(r==1)x.r=C,x.g=F,x.b=B,w.r=z,w.g=W,w.b=Z;else {if(f==0){let Q=d.data.color,tt=d.data.darkColor;x.r=Q.r,x.g=Q.g,x.b=Q.b,w.r=tt.r,w.g=tt.g,w.b=tt.b;}x.r+=(C-x.r)*r,x.g+=(F-x.g)*r,x.b+=(B-x.b)*r,w.r+=(z-w.r)*r,w.g+=(W-w.g)*r,w.b+=(Z-w.b)*r;}}},Ye=class extends Rt{slotIndex=0;attachmentNames;constructor(i,e){super(i,[ut.attachment+"|"+e]),this.slotIndex=e,this.attachmentNames=new Array(i);}getFrameCount(){return this.frames.length}setFrame(i,e,s){this.frames[i]=e,this.attachmentNames[i]=s;}apply(i,e,s,n,r,f,c){let d=i.slots[this.slotIndex];if(d.bone.active){if(c==1){f==0&&this.setAttachment(i,d,d.data.attachmentName);return}if(s<this.frames[0]){(f==0||f==1)&&this.setAttachment(i,d,d.data.attachmentName);return}this.setAttachment(i,d,this.attachmentNames[Rt.search1(this.frames,s)]);}}setAttachment(i,e,s){e.setAttachment(s?i.getAttachment(this.slotIndex,s):null);}},Ve=class extends at{slotIndex=0;attachment;vertices;constructor(i,e,s,n){super(i,e,[ut.deform+"|"+s+"|"+n.id]),this.slotIndex=s,this.attachment=n,this.vertices=new Array(i);}getFrameCount(){return this.frames.length}setFrame(i,e,s){this.frames[i]=e,this.vertices[i]=s;}setBezier(i,e,s,n,r,f,c,d,p,x,w){let C=this.curves,F=this.getFrameCount()+i*18;s==0&&(C[e]=2+F);let B=(n-f*2+d)*.03,X=p*.03-c*.06,z=((f-d)*3-n+x)*.006,W=(c-p+.33333333)*.018,Z=B*2+z,J=X*2+W,j=(f-n)*.3+B+z*.16666667,Q=c*.3+X+W*.16666667,tt=n+j,nt=Q;for(let pt=F+18;F<pt;F+=2)C[F]=tt,C[F+1]=nt,j+=Z,Q+=J,Z+=z,J+=W,tt+=j,nt+=Q;}getCurvePercent(i,e){let s=this.curves,n=s[e];switch(n){case 0:let d=this.frames[e];return (i-d)/(this.frames[e+this.getFrameEntries()]-d);case 1:return 0}if(n-=2,s[n]>i){let d=this.frames[e];return s[n+1]*(i-d)/(s[n]-d)}let r=n+18;for(n+=2;n<r;n+=2)if(s[n]>=i){let d=s[n-2],p=s[n-1];return p+(i-d)/(s[n]-d)*(s[n+1]-p)}let f=s[r-2],c=s[r-1];return c+(1-c)*(i-f)/(this.frames[e+this.getFrameEntries()]-f)}apply(i,e,s,n,r,f,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=d.getAttachment();if(!p||!(p instanceof st)||p.timelineAttachment!=this.attachment)return;let x=d.deform;x.length==0&&(f=0);let w=this.vertices,C=w[0].length,F=this.frames;if(s<F[0]){switch(f){case 0:x.length=0;return;case 1:if(r==1){x.length=0;return}x.length=C;let J=p;if(J.bones){r=1-r;for(var B=0;B<C;B++)x[B]*=r;}else {let j=J.vertices;for(var B=0;B<C;B++)x[B]+=(j[B]-x[B])*r;}}return}if(x.length=C,s>=F[F.length-1]){let J=w[F.length-1];if(r==1)if(f==3){let j=p;if(j.bones)for(let Q=0;Q<C;Q++)x[Q]+=J[Q];else {let Q=j.vertices;for(let tt=0;tt<C;tt++)x[tt]+=J[tt]-Q[tt];}}else D.arrayCopy(J,0,x,0,C);else switch(f){case 0:{let Q=p;if(Q.bones)for(let tt=0;tt<C;tt++)x[tt]=J[tt]*r;else {let tt=Q.vertices;for(let nt=0;nt<C;nt++){let pt=tt[nt];x[nt]=pt+(J[nt]-pt)*r;}}break}case 1:case 2:for(let Q=0;Q<C;Q++)x[Q]+=(J[Q]-x[Q])*r;break;case 3:let j=p;if(j.bones)for(let Q=0;Q<C;Q++)x[Q]+=J[Q]*r;else {let Q=j.vertices;for(let tt=0;tt<C;tt++)x[tt]+=(J[tt]-Q[tt])*r;}}return}let X=Rt.search1(F,s),z=this.getCurvePercent(s,X),W=w[X],Z=w[X+1];if(r==1)if(f==3){let J=p;if(J.bones)for(let j=0;j<C;j++){let Q=W[j];x[j]+=Q+(Z[j]-Q)*z;}else {let j=J.vertices;for(let Q=0;Q<C;Q++){let tt=W[Q];x[Q]+=tt+(Z[Q]-tt)*z-j[Q];}}}else for(let J=0;J<C;J++){let j=W[J];x[J]=j+(Z[J]-j)*z;}else switch(f){case 0:{let j=p;if(j.bones)for(let Q=0;Q<C;Q++){let tt=W[Q];x[Q]=(tt+(Z[Q]-tt)*z)*r;}else {let Q=j.vertices;for(let tt=0;tt<C;tt++){let nt=W[tt],pt=Q[tt];x[tt]=pt+(nt+(Z[tt]-nt)*z-pt)*r;}}break}case 1:case 2:for(let j=0;j<C;j++){let Q=W[j];x[j]+=(Q+(Z[j]-Q)*z-x[j])*r;}break;case 3:let J=p;if(J.bones)for(let j=0;j<C;j++){let Q=W[j];x[j]+=(Q+(Z[j]-Q)*z)*r;}else {let j=J.vertices;for(let Q=0;Q<C;Q++){let tt=W[Q];x[Q]+=(tt+(Z[Q]-tt)*z-j[Q])*r;}}}}},qe=class Jr extends Rt{static propertyIds=[""+ut.event];events;constructor(e){super(e,Jr.propertyIds),this.events=new Array(e);}getFrameCount(){return this.frames.length}setFrame(e,s){this.frames[e]=s.time,this.events[e]=s;}apply(e,s,n,r,f,c,d){if(!r)return;let p=this.frames,x=this.frames.length;if(s>n)this.apply(e,s,Number.MAX_VALUE,r,f,c,d),s=-1;else if(s>=p[x-1])return;if(n<p[0])return;let w=0;if(s<p[0])w=0;else {w=Rt.search1(p,s)+1;let C=p[w];for(;w>0&&p[w-1]==C;)w--;}for(;w<x&&n>=p[w];w++)r.push(this.events[w]);}},ze=class Qr extends Rt{static propertyIds=[""+ut.drawOrder];drawOrders;constructor(e){super(e,Qr.propertyIds),this.drawOrders=new Array(e);}getFrameCount(){return this.frames.length}setFrame(e,s,n){this.frames[e]=s,this.drawOrders[e]=n;}apply(e,s,n,r,f,c,d){if(d==1){c==0&&D.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}if(n<this.frames[0]){(c==0||c==1)&&D.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}let p=Rt.search1(this.frames,n),x=this.drawOrders[p];if(!x)D.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else {let w=e.drawOrder,C=e.slots;for(let F=0,B=x.length;F<B;F++)w[F]=C[x[F]];}}},Ue=class extends at{constraintIndex=0;constructor(i,e,s){super(i,e,[ut.ikConstraint+"|"+s]),this.constraintIndex=s;}getFrameEntries(){return 6}setFrame(i,e,s,n,r,f,c){i*=6,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r,this.frames[i+4]=f?1:0,this.frames[i+5]=c?1:0;}apply(i,e,s,n,r,f,c){let d=i.ikConstraints[this.constraintIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(f){case 0:d.mix=d.data.mix,d.softness=d.data.softness,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch;return;case 1:d.mix+=(d.data.mix-d.mix)*r,d.softness+=(d.data.softness-d.softness)*r,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch;}return}let x=0,w=0,C=Rt.search(p,s,6),F=this.curves[C/6];switch(F){case 0:let B=p[C];x=p[C+1],w=p[C+2];let X=(s-B)/(p[C+6]-B);x+=(p[C+6+1]-x)*X,w+=(p[C+6+2]-w)*X;break;case 1:x=p[C+1],w=p[C+2];break;default:x=this.getBezierValue(s,C,1,F-2),w=this.getBezierValue(s,C,2,F+18-2);}f==0?(d.mix=d.data.mix+(x-d.data.mix)*r,d.softness=d.data.softness+(w-d.data.softness)*r,c==1?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=p[C+3],d.compress=p[C+4]!=0,d.stretch=p[C+5]!=0)):(d.mix+=(x-d.mix)*r,d.softness+=(w-d.softness)*r,c==0&&(d.bendDirection=p[C+3],d.compress=p[C+4]!=0,d.stretch=p[C+5]!=0));}},_e=class extends at{constraintIndex=0;constructor(i,e,s){super(i,e,[ut.transformConstraint+"|"+s]),this.constraintIndex=s;}getFrameEntries(){return 7}setFrame(i,e,s,n,r,f,c,d){let p=this.frames;i*=7,p[i]=e,p[i+1]=s,p[i+2]=n,p[i+3]=r,p[i+4]=f,p[i+5]=c,p[i+6]=d;}apply(i,e,s,n,r,f,c){let d=i.transformConstraints[this.constraintIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){let Z=d.data;switch(f){case 0:d.mixRotate=Z.mixRotate,d.mixX=Z.mixX,d.mixY=Z.mixY,d.mixScaleX=Z.mixScaleX,d.mixScaleY=Z.mixScaleY,d.mixShearY=Z.mixShearY;return;case 1:d.mixRotate+=(Z.mixRotate-d.mixRotate)*r,d.mixX+=(Z.mixX-d.mixX)*r,d.mixY+=(Z.mixY-d.mixY)*r,d.mixScaleX+=(Z.mixScaleX-d.mixScaleX)*r,d.mixScaleY+=(Z.mixScaleY-d.mixScaleY)*r,d.mixShearY+=(Z.mixShearY-d.mixShearY)*r;}return}let x,w,C,F,B,X,z=Rt.search(p,s,7),W=this.curves[z/7];switch(W){case 0:let Z=p[z];x=p[z+1],w=p[z+2],C=p[z+3],F=p[z+4],B=p[z+5],X=p[z+6];let J=(s-Z)/(p[z+7]-Z);x+=(p[z+7+1]-x)*J,w+=(p[z+7+2]-w)*J,C+=(p[z+7+3]-C)*J,F+=(p[z+7+4]-F)*J,B+=(p[z+7+5]-B)*J,X+=(p[z+7+6]-X)*J;break;case 1:x=p[z+1],w=p[z+2],C=p[z+3],F=p[z+4],B=p[z+5],X=p[z+6];break;default:x=this.getBezierValue(s,z,1,W-2),w=this.getBezierValue(s,z,2,W+18-2),C=this.getBezierValue(s,z,3,W+36-2),F=this.getBezierValue(s,z,4,W+54-2),B=this.getBezierValue(s,z,5,W+72-2),X=this.getBezierValue(s,z,6,W+90-2);}if(f==0){let Z=d.data;d.mixRotate=Z.mixRotate+(x-Z.mixRotate)*r,d.mixX=Z.mixX+(w-Z.mixX)*r,d.mixY=Z.mixY+(C-Z.mixY)*r,d.mixScaleX=Z.mixScaleX+(F-Z.mixScaleX)*r,d.mixScaleY=Z.mixScaleY+(B-Z.mixScaleY)*r,d.mixShearY=Z.mixShearY+(X-Z.mixShearY)*r;}else d.mixRotate+=(x-d.mixRotate)*r,d.mixX+=(w-d.mixX)*r,d.mixY+=(C-d.mixY)*r,d.mixScaleX+=(F-d.mixScaleX)*r,d.mixScaleY+=(B-d.mixScaleY)*r,d.mixShearY+=(X-d.mixShearY)*r;}},We=class extends _{constraintIndex=0;constructor(i,e,s){super(i,e,ut.pathConstraintPosition+"|"+s),this.constraintIndex=s;}apply(i,e,s,n,r,f,c){let d=i.pathConstraints[this.constraintIndex];d.active&&(d.position=this.getAbsoluteValue(s,r,f,d.position,d.data.position));}},Ze=class extends _{constraintIndex=0;constructor(i,e,s){super(i,e,ut.pathConstraintSpacing+"|"+s),this.constraintIndex=s;}apply(i,e,s,n,r,f,c){let d=i.pathConstraints[this.constraintIndex];d.active&&(d.spacing=this.getAbsoluteValue(s,r,f,d.spacing,d.data.spacing));}},Xe=class extends at{constraintIndex=0;constructor(i,e,s){super(i,e,[ut.pathConstraintMix+"|"+s]),this.constraintIndex=s;}getFrameEntries(){return 4}setFrame(i,e,s,n,r){let f=this.frames;i<<=2,f[i]=e,f[i+1]=s,f[i+2]=n,f[i+3]=r;}apply(i,e,s,n,r,f,c){let d=i.pathConstraints[this.constraintIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(f){case 0:d.mixRotate=d.data.mixRotate,d.mixX=d.data.mixX,d.mixY=d.data.mixY;return;case 1:d.mixRotate+=(d.data.mixRotate-d.mixRotate)*r,d.mixX+=(d.data.mixX-d.mixX)*r,d.mixY+=(d.data.mixY-d.mixY)*r;}return}let x,w,C,F=Rt.search(p,s,4),B=this.curves[F>>2];switch(B){case 0:let X=p[F];x=p[F+1],w=p[F+2],C=p[F+3];let z=(s-X)/(p[F+4]-X);x+=(p[F+4+1]-x)*z,w+=(p[F+4+2]-w)*z,C+=(p[F+4+3]-C)*z;break;case 1:x=p[F+1],w=p[F+2],C=p[F+3];break;default:x=this.getBezierValue(s,F,1,B-2),w=this.getBezierValue(s,F,2,B+18-2),C=this.getBezierValue(s,F,3,B+36-2);}if(f==0){let X=d.data;d.mixRotate=X.mixRotate+(x-X.mixRotate)*r,d.mixX=X.mixX+(w-X.mixX)*r,d.mixY=X.mixY+(C-X.mixY)*r;}else d.mixRotate+=(x-d.mixRotate)*r,d.mixX+=(w-d.mixX)*r,d.mixY+=(C-d.mixY)*r;}},$e=class extends _{constraintIndex=0;constructor(i,e,s,n){super(i,e,n+"|"+s),this.constraintIndex=s;}apply(i,e,s,n,r,f,c){let d;if(this.constraintIndex==-1){let p=s>=this.frames[0]?this.getCurveValue(s):0;for(let x of i.physicsConstraints)x.active&&this.global(x.data)&&this.set(x,this.getAbsoluteValue2(s,r,f,this.get(x),this.setup(x),p));}else d=i.physicsConstraints[this.constraintIndex],d.active&&this.set(d,this.getAbsoluteValue(s,r,f,this.get(d),this.setup(d)));}},De=class extends $e{constructor(i,e,s){super(i,e,s,ut.physicsConstraintInertia);}setup(i){return i.data.inertia}get(i){return i.inertia}set(i,e){i.inertia=e;}global(i){return i.inertiaGlobal}},xi=class extends $e{constructor(i,e,s){super(i,e,s,ut.physicsConstraintStrength);}setup(i){return i.data.strength}get(i){return i.strength}set(i,e){i.strength=e;}global(i){return i.strengthGlobal}},ri=class extends $e{constructor(i,e,s){super(i,e,s,ut.physicsConstraintDamping);}setup(i){return i.data.damping}get(i){return i.damping}set(i,e){i.damping=e;}global(i){return i.dampingGlobal}},hi=class extends $e{constructor(i,e,s){super(i,e,s,ut.physicsConstraintMass);}setup(i){return 1/i.data.massInverse}get(i){return 1/i.massInverse}set(i,e){i.massInverse=1/e;}global(i){return i.massGlobal}},ti=class extends $e{constructor(i,e,s){super(i,e,s,ut.physicsConstraintWind);}setup(i){return i.data.wind}get(i){return i.wind}set(i,e){i.wind=e;}global(i){return i.windGlobal}},ci=class extends $e{constructor(i,e,s){super(i,e,s,ut.physicsConstraintGravity);}setup(i){return i.data.gravity}get(i){return i.gravity}set(i,e){i.gravity=e;}global(i){return i.gravityGlobal}},Mi=class extends $e{constructor(i,e,s){super(i,e,s,ut.physicsConstraintMix);}setup(i){return i.data.mix}get(i){return i.mix}set(i,e){i.mix=e;}global(i){return i.mixGlobal}},Hi=class _r extends Rt{static propertyIds=[ut.physicsConstraintReset.toString()];constraintIndex;constructor(e,s){super(e,_r.propertyIds),this.constraintIndex=s;}getFrameCount(){return this.frames.length}setFrame(e,s){this.frames[e]=s;}apply(e,s,n,r,f,c,d){let p;if(this.constraintIndex!=-1&&(p=e.physicsConstraints[this.constraintIndex],!p.active))return;let x=this.frames;if(s>n)this.apply(e,s,Number.MAX_VALUE,[],f,c,d),s=-1;else if(s>=x[x.length-1])return;if(!(n<x[0])&&(s<x[0]||n>=x[Rt.search1(x,s)+1]))if(p!=null)p.reset();else for(let w of e.physicsConstraints)w.active&&w.reset();}},cs=class ji extends Rt{static ENTRIES=3;static MODE=1;static DELAY=2;slotIndex;attachment;constructor(e,s,n){super(e,[ut.sequence+"|"+s+"|"+n.sequence.id]),this.slotIndex=s,this.attachment=n;}getFrameEntries(){return ji.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(e,s,n,r,f){let c=this.frames;e*=ji.ENTRIES,c[e]=s,c[e+ji.MODE]=n|r<<4,c[e+ji.DELAY]=f;}apply(e,s,n,r,f,c,d){let p=e.slots[this.slotIndex];if(!p.bone.active)return;let x=p.attachment,w=this.attachment;if(x!=w&&(!(x instanceof st)||x.timelineAttachment!=w))return;if(d==1){c==0&&(p.sequenceIndex=-1);return}let C=this.frames;if(n<C[0]){(c==0||c==1)&&(p.sequenceIndex=-1);return}let F=Rt.search(C,n,ji.ENTRIES),B=C[F],X=C[F+ji.MODE],z=C[F+ji.DELAY];if(!this.attachment.sequence)return;let W=X>>4,Z=this.attachment.sequence.regions.length,J=ct[X&15];if(J!=0)switch(W+=(n-B)/z+1e-5|0,J){case 1:W=Math.min(Z-1,W);break;case 2:W%=Z;break;case 3:{let j=(Z<<1)-2;W=j==0?0:W%j,W>=Z&&(W=j-W);break}case 4:W=Math.max(Z-1-W,0);break;case 5:W=Z-1-W%Z;break;case 6:{let j=(Z<<1)-2;W=j==0?0:(W+Z-1)%j,W>=Z&&(W=j-W);}}p.sequenceIndex=W;}},ks=class xr{static _emptyAnimation=new rt("<empty>",[],0);static emptyAnimation(){return xr._emptyAnimation}data;tracks=new Array;timeScale=1;unkeyedState=0;events=new Array;listeners=new Array;queue=new Ji(this);propertyIDs=new S;animationsChanged=false;trackEntryPool=new $(()=>new er);constructor(e){this.data=e;}update(e){e*=this.timeScale;let s=this.tracks;for(let n=0,r=s.length;n<r;n++){let f=s[n];if(!f)continue;f.animationLast=f.nextAnimationLast,f.trackLast=f.nextTrackLast;let c=e*f.timeScale;if(f.delay>0){if(f.delay-=c,f.delay>0)continue;c=-f.delay,f.delay=0;}let d=f.next;if(d){let p=f.trackLast-d.delay;if(p>=0){for(d.delay=0,d.trackTime+=f.timeScale==0?0:(p/f.timeScale+e)*d.timeScale,f.trackTime+=c,this.setCurrent(n,d,true);d.mixingFrom;)d.mixTime+=e,d=d.mixingFrom;continue}}else if(f.trackLast>=f.trackEnd&&!f.mixingFrom){s[n]=null,this.queue.end(f),this.clearNext(f);continue}if(f.mixingFrom&&this.updateMixingFrom(f,e)){let p=f.mixingFrom;for(f.mixingFrom=null,p&&(p.mixingTo=null);p;)this.queue.end(p),p=p.mixingFrom;}f.trackTime+=c;}this.queue.drain();}updateMixingFrom(e,s){let n=e.mixingFrom;if(!n)return  true;let r=this.updateMixingFrom(n,s);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.nextTrackLast!=-1&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom!=null&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=s*n.timeScale,e.mixTime+=s,false)}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let s=this.events,n=this.tracks,r=false;for(let F=0,B=n.length;F<B;F++){let X=n[F];if(!X||X.delay>0)continue;r=true;let z=F==0?1:X.mixBlend,W=X.alpha;X.mixingFrom?W*=this.applyMixingFrom(X,e,z):X.trackTime>=X.trackEnd&&!X.next&&(W=0);let Z=W>=X.alphaAttachmentThreshold,J=X.animationLast,j=X.getAnimationTime(),Q=j,tt=s;X.reverse&&(Q=X.animation.duration-Q,tt=null);let nt=X.animation.timelines,pt=nt.length;if(F==0&&W==1||z==3){F==0&&(Z=true);for(let mt=0;mt<pt;mt++){var f=nt[mt];f instanceof Ye?this.applyAttachmentTimeline(f,e,Q,z,Z):f.apply(e,J,Q,tt,W,z,0);}}else {let mt=X.timelineMode,gt=X.shortestRotation,Ct=!gt&&X.timelinesRotation.length!=pt<<1;Ct&&(X.timelinesRotation.length=pt<<1);for(let Ft=0;Ft<pt;Ft++){let Vt=nt[Ft],Ut=mt[Ft]==ni?z:0;!gt&&Vt instanceof xt?this.applyRotateTimeline(Vt,e,Q,W,Ut,X.timelinesRotation,Ft<<1,Ct):Vt instanceof Ye?this.applyAttachmentTimeline(Vt,e,Q,z,Z):(Vt.apply(e,J,Q,tt,W,Ut,0));}}this.queueEvents(X,j),s.length=0,X.nextAnimationLast=j,X.nextTrackLast=X.trackTime;}for(var c=this.unkeyedState+Ps,d=e.slots,p=0,x=e.slots.length;p<x;p++){var w=d[p];if(w.attachmentState==c){var C=w.data.attachmentName;w.setAttachment(C?e.getAttachment(w.data.index,C):null);}}return this.unkeyedState+=2,this.queue.drain(),r}applyMixingFrom(e,s,n){let r=e.mixingFrom;r.mixingFrom&&this.applyMixingFrom(r,s,n);let f=0;e.mixDuration==0?(f=1,n==1&&(n=0)):(f=e.mixTime/e.mixDuration,f>1&&(f=1),n!=1&&(n=r.mixBlend));let c=f<r.mixAttachmentThreshold,d=f<r.mixDrawOrderThreshold,p=r.animation.timelines,x=p.length,w=r.alpha*e.interruptAlpha,C=w*(1-f),F=r.animationLast,B=r.getAnimationTime(),X=B,z=null;if(r.reverse?X=r.animation.duration-X:f<r.eventThreshold&&(z=this.events),n==3)for(let W=0;W<x;W++)p[W].apply(s,F,X,z,C,n,1);else {let W=r.timelineMode,Z=r.timelineHoldMix,J=r.shortestRotation,j=!J&&r.timelinesRotation.length!=x<<1;j&&(r.timelinesRotation.length=x<<1),r.totalAlpha=0;for(let Q=0;Q<x;Q++){let tt=p[Q],nt=1,pt,mt=0;switch(W[Q]){case ni:if(!d&&tt instanceof ze)continue;pt=n,mt=C;break;case Ci:pt=0,mt=C;break;case ds:pt=n,mt=w;break;case us:pt=0,mt=w;break;default:pt=0;let gt=Z[Q];mt=w*Math.max(0,1-gt.mixTime/gt.mixDuration);break}r.totalAlpha+=mt,!J&&tt instanceof xt?this.applyRotateTimeline(tt,s,X,mt,pt,r.timelinesRotation,Q<<1,j):tt instanceof Ye?this.applyAttachmentTimeline(tt,s,X,pt,c&&mt>=r.alphaAttachmentThreshold):(d&&tt instanceof ze&&pt==0&&(nt=0),tt.apply(s,F,X,z,mt,pt,nt));}}return e.mixDuration>0&&this.queueEvents(r,B),this.events.length=0,r.nextAnimationLast=B,r.nextTrackLast=r.trackTime,f}applyAttachmentTimeline(e,s,n,r,f){var c=s.slots[e.slotIndex];c.bone.active&&(n<e.frames[0]?(r==0||r==1)&&this.setAttachment(s,c,c.data.attachmentName,f):this.setAttachment(s,c,e.attachmentNames[Rt.search1(e.frames,n)],f),c.attachmentState<=this.unkeyedState&&(c.attachmentState=this.unkeyedState+Ps));}setAttachment(e,s,n,r){s.setAttachment(n?e.getAttachment(s.data.index,n):null),r&&(s.attachmentState=this.unkeyedState+Ls);}applyRotateTimeline(e,s,n,r,f,c,d,p){if(p&&(c[d]=0),r==1){e.apply(s,0,n,null,1,f,0);return}let x=s.bones[e.boneIndex];if(!x.active)return;let w=e.frames,C=0,F=0;if(n<w[0])switch(f){case 0:x.rotation=x.data.rotation;default:return;case 1:C=x.rotation,F=x.data.rotation;}else C=f==0?x.data.rotation:x.rotation,F=x.data.rotation+e.getCurveValue(n);let B=0,X=F-C;if(X-=Math.ceil(X/360-.5)*360,X==0)B=c[d];else {let z=0,W=0;p?(z=0,W=X):(z=c[d],W=c[d+1]);let Z=z-z%360;B=X+Z;let J=X>=0,j=z>=0;Math.abs(W)<=90&&T.signum(W)!=T.signum(X)&&(Math.abs(z-Z)>180?(B+=360*T.signum(z),j=J):Z!=0?B-=360*T.signum(z):j=J),j!=J&&(B+=360*T.signum(z)),c[d]=B;}c[d+1]=X,x.rotation=C+B*r;}queueEvents(e,s){let n=e.animationStart,r=e.animationEnd,f=r-n,c=e.trackLast%f,d=this.events,p=0,x=d.length;for(;p<x;p++){let C=d[p];if(C.time<c)break;C.time>r||this.queue.event(e,C);}let w=false;if(e.loop)if(f==0)w=true;else {let C=Math.floor(e.trackTime/f);w=C>0&&C>Math.floor(e.trackLast/f);}else w=s>=r&&e.animationLast<r;for(w&&this.queue.complete(e);p<x;p++){let C=d[p];C.time<n||this.queue.event(e,C);}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let s=0,n=this.tracks.length;s<n;s++)this.clearTrack(s);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain();}clearTrack(e){if(e>=this.tracks.length)return;let s=this.tracks[e];if(!s)return;this.queue.end(s),this.clearNext(s);let n=s;for(;;){let r=n.mixingFrom;if(!r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r;}this.tracks[s.trackIndex]=null,this.queue.drain();}setCurrent(e,s,n){let r=this.expandToIndex(e);this.tracks[e]=s,s.previous=null,r&&(n&&this.queue.interrupt(r),s.mixingFrom=r,r.mixingTo=s,s.mixTime=0,r.mixingFrom&&r.mixDuration>0&&(s.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(s);}setAnimation(e,s,n=false){let r=this.data.skeletonData.findAnimation(s);if(!r)throw new Error("Animation not found: "+s);return this.setAnimationWith(e,r,n)}setAnimationWith(e,s,n=false){if(!s)throw new Error("animation cannot be null.");let r=true,f=this.expandToIndex(e);f&&(f.nextTrackLast==-1?(this.tracks[e]=f.mixingFrom,this.queue.interrupt(f),this.queue.end(f),this.clearNext(f),f=f.mixingFrom,r=false):this.clearNext(f));let c=this.trackEntry(e,s,n,f);return this.setCurrent(e,c,r),this.queue.drain(),c}addAnimation(e,s,n=false,r=0){let f=this.data.skeletonData.findAnimation(s);if(!f)throw new Error("Animation not found: "+s);return this.addAnimationWith(e,f,n,r)}addAnimationWith(e,s,n=false,r=0){if(!s)throw new Error("animation cannot be null.");let f=this.expandToIndex(e);if(f)for(;f.next;)f=f.next;let c=this.trackEntry(e,s,n,f);return f?(f.next=c,c.previous=f,r<=0&&(r=Math.max(r+f.getTrackComplete()-c.mixDuration,0))):(this.setCurrent(e,c,true),this.queue.drain(),r<0&&(r=0)),c.delay=r,c}setEmptyAnimation(e,s=0){let n=this.setAnimationWith(e,xr.emptyAnimation(),false);return n.mixDuration=s,n.trackEnd=s,n}addEmptyAnimation(e,s=0,n=0){let r=this.addAnimationWith(e,xr.emptyAnimation(),false,n);return n<=0&&(r.delay=Math.max(r.delay+r.mixDuration-s,0)),r.mixDuration=s,r.trackEnd=s,r}setEmptyAnimations(e=0){let s=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let n=0,r=this.tracks.length;n<r;n++){let f=this.tracks[n];f&&this.setEmptyAnimation(f.trackIndex,e);}this.queue.drainDisabled=s,this.queue.drain();}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(D.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,s,n,r){let f=this.trackEntryPool.obtain();return f.reset(),f.trackIndex=e,f.animation=s,f.loop=n,f.holdPrevious=false,f.reverse=false,f.shortestRotation=false,f.eventThreshold=0,f.alphaAttachmentThreshold=0,f.mixAttachmentThreshold=0,f.mixDrawOrderThreshold=0,f.animationStart=0,f.animationEnd=s.duration,f.animationLast=-1,f.nextAnimationLast=-1,f.delay=0,f.trackTime=0,f.trackLast=-1,f.nextTrackLast=-1,f.trackEnd=Number.MAX_VALUE,f.timeScale=1,f.alpha=1,f.mixTime=0,f.mixDuration=r?this.data.getMix(r.animation,s):0,f.interruptAlpha=1,f.totalAlpha=0,f.mixBlend=2,f}clearNext(e){let s=e.next;for(;s;)this.queue.dispose(s),s=s.next;e.next=null;}_animationsChanged(){this.animationsChanged=false,this.propertyIDs.clear();let e=this.tracks;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r){for(;r.mixingFrom;)r=r.mixingFrom;do(!r.mixingTo||r.mixBlend!=3)&&this.computeHold(r),r=r.mixingTo;while(r)}}}computeHold(e){let s=e.mixingTo,n=e.animation.timelines,r=e.animation.timelines.length,f=e.timelineMode;f.length=r;let c=e.timelineHoldMix;c.length=0;let d=this.propertyIDs;if(s&&s.holdPrevious){for(let p=0;p<r;p++)f[p]=d.addAll(n[p].getPropertyIds())?us:ds;return}t:for(let p=0;p<r;p++){let x=n[p],w=x.getPropertyIds();if(!d.addAll(w))f[p]=ni;else if(!s||x instanceof Ye||x instanceof ze||x instanceof qe||!s.animation.hasTimeline(w))f[p]=Ci;else {for(let C=s.mixingTo;C;C=C.mixingTo)if(!C.animation.hasTimeline(w)){if(e.mixDuration>0){f[p]=Ys,c[p]=C;continue t}break}f[p]=us;}}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e);}removeListener(e){let s=this.listeners.indexOf(e);s>=0&&this.listeners.splice(s,1);}clearListeners(){this.listeners.length=0;}clearListenerNotifications(){this.queue.clear();}},er=class{animation=null;previous=null;next=null;mixingFrom=null;mixingTo=null;listener=null;trackIndex=0;loop=false;holdPrevious=false;reverse=false;shortestRotation=false;eventThreshold=0;mixAttachmentThreshold=0;alphaAttachmentThreshold=0;mixDrawOrderThreshold=0;animationStart=0;animationEnd=0;animationLast=0;nextAnimationLast=0;delay=0;trackTime=0;trackLast=0;nextTrackLast=0;trackEnd=0;timeScale=0;alpha=0;mixTime=0;_mixDuration=0;interruptAlpha=0;totalAlpha=0;get mixDuration(){return this._mixDuration}set mixDuration(i){this._mixDuration=i;}setMixDurationWithDelay(i,e){this._mixDuration=i,e<=0&&(this.previous!=null?e=Math.max(e+this.previous.getTrackComplete()-i,0):e=0),this.delay=e;}mixBlend=2;timelineMode=new Array;timelineHoldMix=new Array;timelinesRotation=new Array;reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;}getAnimationTime(){if(this.loop){let i=this.animationEnd-this.animationStart;return i==0?this.animationStart:this.trackTime%i+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(i){this.animationLast=i,this.nextAnimationLast=i;}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0;}getTrackComplete(){let i=this.animationEnd-this.animationStart;if(i!=0){if(this.loop)return i*(1+(this.trackTime/i|0));if(this.trackTime<i)return i}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}},Ji=class{objects=[];drainDisabled=false;animState;constructor(i){this.animState=i;}start(i){this.objects.push(0),this.objects.push(i),this.animState.animationsChanged=true;}interrupt(i){this.objects.push(1),this.objects.push(i);}end(i){this.objects.push(2),this.objects.push(i),this.animState.animationsChanged=true;}dispose(i){this.objects.push(3),this.objects.push(i);}complete(i){this.objects.push(4),this.objects.push(i);}event(i,e){this.objects.push(5),this.objects.push(i),this.objects.push(e);}drain(){if(this.drainDisabled)return;this.drainDisabled=true;let i=this.objects,e=this.animState.listeners;for(let s=0;s<i.length;s+=2){let n=i[s],r=i[s+1];switch(n){case 0:r.listener&&r.listener.start&&r.listener.start(r);for(let c=0;c<e.length;c++){let d=e[c];d.start&&d.start(r);}break;case 1:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let c=0;c<e.length;c++){let d=e[c];d.interrupt&&d.interrupt(r);}break;case 2:r.listener&&r.listener.end&&r.listener.end(r);for(let c=0;c<e.length;c++){let d=e[c];d.end&&d.end(r);}case 3:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let c=0;c<e.length;c++){let d=e[c];d.dispose&&d.dispose(r);}this.animState.trackEntryPool.free(r);break;case 4:r.listener&&r.listener.complete&&r.listener.complete(r);for(let c=0;c<e.length;c++){let d=e[c];d.complete&&d.complete(r);}break;case 5:let f=i[s+++2];r.listener&&r.listener.event&&r.listener.event(r,f);for(let c=0;c<e.length;c++){let d=e[c];d.event&&d.event(r,f);}break}}this.clear(),this.drainDisabled=false;}clear(){this.objects.length=0;}},Oi=(i=>(i[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event",i))(Oi||{}),Fs=class{start(i){}interrupt(i){}end(i){}dispose(i){}complete(i){}event(i,e){}},ni=0,Ci=1,ds=2,us=3,Ys=4,Ps=1,Ls=2,Xs=class{skeletonData;animationToMixTime={};defaultMix=0;constructor(i){if(!i)throw new Error("skeletonData cannot be null.");this.skeletonData=i;}setMix(i,e,s){let n=this.skeletonData.findAnimation(i);if(!n)throw new Error("Animation not found: "+i);let r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,s);}setMixWith(i,e,s){if(!i)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let n=i.name+"."+e.name;this.animationToMixTime[n]=s;}getMix(i,e){let s=i.name+"."+e.name,n=this.animationToMixTime[s];return n===void 0?this.defaultMix:n}},yi=class Kr extends st{color=new O(1,1,1,1);constructor(e){super(e);}copy(){let e=new Kr(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e}},ui=class $r extends st{endSlot=null;color=new O(.2275,.2275,.8078,1);constructor(e){super(e);}copy(){let e=new $r(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e}},Qi=class{_image;constructor(i){this._image=i;}getImage(){return this._image}},_i=(i=>(i[i.Nearest=9728]="Nearest",i[i.Linear=9729]="Linear",i[i.MipMap=9987]="MipMap",i[i.MipMapNearestNearest=9984]="MipMapNearestNearest",i[i.MipMapLinearNearest=9985]="MipMapLinearNearest",i[i.MipMapNearestLinear=9986]="MipMapNearestLinear",i[i.MipMapLinearLinear=9987]="MipMapLinearLinear",i))(_i||{}),Ie=(i=>(i[i.MirroredRepeat=33648]="MirroredRepeat",i[i.ClampToEdge=33071]="ClampToEdge",i[i.Repeat=10497]="Repeat",i))(Ie||{}),ir=class{texture;u=0;v=0;u2=0;v2=0;width=0;height=0;degrees=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0},Bs=class extends Qi{setFilters(i,e){}setWraps(i,e){}dispose(){}},ii=class{pages=new Array;regions=new Array;constructor(i){let e=new Vs(i),s=new Array(4),n={};n.size=x=>{x.width=parseInt(s[1]),x.height=parseInt(s[2]);},n.format=()=>{},n.filter=x=>{x.minFilter=D.enumValue(_i,s[1]),x.magFilter=D.enumValue(_i,s[2]);},n.repeat=x=>{s[1].indexOf("x")!=-1&&(x.uWrap=10497),s[1].indexOf("y")!=-1&&(x.vWrap=10497);},n.pma=x=>{x.pma=s[1]=="true";};var r={};r.xy=x=>{x.x=parseInt(s[1]),x.y=parseInt(s[2]);},r.size=x=>{x.width=parseInt(s[1]),x.height=parseInt(s[2]);},r.bounds=x=>{x.x=parseInt(s[1]),x.y=parseInt(s[2]),x.width=parseInt(s[3]),x.height=parseInt(s[4]);},r.offset=x=>{x.offsetX=parseInt(s[1]),x.offsetY=parseInt(s[2]);},r.orig=x=>{x.originalWidth=parseInt(s[1]),x.originalHeight=parseInt(s[2]);},r.offsets=x=>{x.offsetX=parseInt(s[1]),x.offsetY=parseInt(s[2]),x.originalWidth=parseInt(s[3]),x.originalHeight=parseInt(s[4]);},r.rotate=x=>{let w=s[1];w=="true"?x.degrees=90:w!="false"&&(x.degrees=parseInt(w));},r.index=x=>{x.index=parseInt(s[1]);};let f=e.readLine();for(;f&&f.trim().length==0;)f=e.readLine();for(;!(!f||f.trim().length==0||e.readEntry(s,f)==0);)f=e.readLine();let c=null,d=null,p=null;for(;f!==null;)if(f.trim().length==0)c=null,f=e.readLine();else if(c){let x=new fs(c,f);for(;;){let w=e.readEntry(s,f=e.readLine());if(w==0)break;let C=r[s[0]];if(C)C(x);else {d||(d=[]),p||(p=[]),d.push(s[0]);let F=[];for(let B=0;B<w;B++)F.push(parseInt(s[B+1]));p.push(F);}}x.originalWidth==0&&x.originalHeight==0&&(x.originalWidth=x.width,x.originalHeight=x.height),d&&d.length>0&&p&&p.length>0&&(x.names=d,x.values=p,d=null,p=null),x.u=x.x/c.width,x.v=x.y/c.height,x.degrees==90?(x.u2=(x.x+x.height)/c.width,x.v2=(x.y+x.width)/c.height):(x.u2=(x.x+x.width)/c.width,x.v2=(x.y+x.height)/c.height),this.regions.push(x);}else {for(c=new Ki(f.trim());e.readEntry(s,f=e.readLine())!=0;){let x=n[s[0]];x&&x(c);}this.pages.push(c);}}findRegion(i){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==i)return this.regions[e];return null}setTextures(i,e=""){for(let s of this.pages)s.setTexture(i.get(e+s.name));}dispose(){var i;for(let e=0;e<this.pages.length;e++)(i=this.pages[e].texture)==null||i.dispose();}},Vs=class{lines;index=0;constructor(i){this.lines=i.split(/\r\n|\r|\n/);}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(i,e){if(!e||(e=e.trim(),e.length==0))return 0;let s=e.indexOf(":");if(s==-1)return 0;i[0]=e.substr(0,s).trim();for(let n=1,r=s+1;;n++){let f=e.indexOf(",",r);if(f==-1)return i[n]=e.substr(r).trim(),n;if(i[n]=e.substr(r,f-r).trim(),r=f+1,n==4)return 4}}},Ki=class{name;minFilter=9728;magFilter=9728;uWrap=33071;vWrap=33071;texture=null;width=0;height=0;pma=false;regions=new Array;constructor(i){this.name=i;}setTexture(i){this.texture=i,i.setFilters(this.minFilter,this.magFilter),i.setWraps(this.uWrap,this.vWrap);for(let e of this.regions)e.texture=i;}},fs=class extends ir{page;name;x=0;y=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0;index=0;degrees=0;names=null;values=null;constructor(i,e){super(),this.page=i,this.name=e,i.regions.push(this);}},Xi=class Dr extends st{region=null;path;regionUVs=[];uvs=[];triangles=[];color=new O(1,1,1,1);width=0;height=0;hullLength=0;edges=[];parentMesh=null;sequence=null;tempColor=new O(0,0,0,0);constructor(e,s){super(e),this.path=s;}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.regionUVs;(!this.uvs||this.uvs.length!=e.length)&&(this.uvs=D.newFloatArray(e.length));let s=this.uvs,n=this.uvs.length,r=this.region.u,f=this.region.v,c=0,d=0;if(this.region instanceof fs){let p=this.region,x=p.page,w=x.width,C=x.height;switch(p.degrees){case 90:r-=(p.originalHeight-p.offsetY-p.height)/w,f-=(p.originalWidth-p.offsetX-p.width)/C,c=p.originalHeight/w,d=p.originalWidth/C;for(let F=0;F<n;F+=2)s[F]=r+e[F+1]*c,s[F+1]=f+(1-e[F])*d;return;case 180:r-=(p.originalWidth-p.offsetX-p.width)/w,f-=p.offsetY/C,c=p.originalWidth/w,d=p.originalHeight/C;for(let F=0;F<n;F+=2)s[F]=r+(1-e[F])*c,s[F+1]=f+(1-e[F+1])*d;return;case 270:r-=p.offsetY/w,f-=p.offsetX/C,c=p.originalHeight/w,d=p.originalWidth/C;for(let F=0;F<n;F+=2)s[F]=r+(1-e[F+1])*c,s[F+1]=f+e[F]*d;return}r-=p.offsetX/w,f-=(p.originalHeight-p.offsetY-p.height)/C,c=p.originalWidth/w,d=p.originalHeight/C;}else this.region?(c=this.region.u2-r,d=this.region.v2-f):(r=f=0,c=d=1);for(let p=0;p<n;p+=2)s[p]=r+e[p]*c,s[p+1]=f+e[p+1]*d;}getParentMesh(){return this.parentMesh}setParentMesh(e){this.parentMesh=e,e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength);}copy(){if(this.parentMesh)return this.newLinkedMesh();let e=new Dr(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Array(this.regionUVs.length),D.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=this.uvs instanceof Float32Array?D.newFloatArray(this.uvs.length):new Array(this.uvs.length),D.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),D.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,e.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(e.edges=new Array(this.edges.length),D.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e}computeWorldVertices(e,s,n,r,f,c){this.sequence!=null&&this.sequence.apply(e,this),super.computeWorldVertices(e,s,n,r,f,c);}newLinkedMesh(){let e=new Dr(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),e.timelineAttachment=this.timelineAttachment,e.setParentMesh(this.parentMesh?this.parentMesh:this),e.region!=null&&e.updateRegion(),e}},Pi=class tn extends st{lengths=[];closed=false;constantSpeed=false;color=new O(1,1,1,1);constructor(e){super(e);}copy(){let e=new tn(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),D.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e}},ms=class en extends st{x=0;y=0;rotation=0;color=new O(.38,.94,0,1);constructor(e){super(e);}computeWorldPosition(e,s){return s.x=this.x*e.a+this.y*e.b+e.worldX,s.y=this.x*e.c+this.y*e.d+e.worldY,s}computeWorldRotation(e){let s=this.rotation*T.degRad,n=Math.cos(s),r=Math.sin(s),f=n*e.a+r*e.b,c=n*e.c+r*e.d;return T.atan2Deg(c,f)}copy(){let e=new en(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e}},Ni=class sn extends dt{x=0;y=0;scaleX=1;scaleY=1;rotation=0;width=0;height=0;color=new O(1,1,1,1);path;region=null;sequence=null;offset=D.newFloatArray(8);uvs=D.newFloatArray(8);tempColor=new O(1,1,1,1);constructor(e,s){super(e),this.path=s;}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.region,s=this.uvs;if(e==null){s[0]=0,s[1]=0,s[2]=0,s[3]=1,s[4]=1,s[5]=1,s[6]=1,s[7]=0;return}let n=this.width/this.region.originalWidth*this.scaleX,r=this.height/this.region.originalHeight*this.scaleY,f=-this.width/2*this.scaleX+this.region.offsetX*n,c=-this.height/2*this.scaleY+this.region.offsetY*r,d=f+this.region.width*n,p=c+this.region.height*r,x=this.rotation*T.degRad,w=Math.cos(x),C=Math.sin(x),F=this.x,B=this.y,X=f*w+F,z=f*C,W=c*w+B,Z=c*C,J=d*w+F,j=d*C,Q=p*w+B,tt=p*C,nt=this.offset;nt[0]=X-Z,nt[1]=W+z,nt[2]=X-tt,nt[3]=Q+z,nt[4]=J-tt,nt[5]=Q+j,nt[6]=J-Z,nt[7]=W+j,e.degrees==90?(s[0]=e.u2,s[1]=e.v2,s[2]=e.u,s[3]=e.v2,s[4]=e.u,s[5]=e.v,s[6]=e.u2,s[7]=e.v):(s[0]=e.u,s[1]=e.v2,s[2]=e.u,s[3]=e.v,s[4]=e.u2,s[5]=e.v,s[6]=e.u2,s[7]=e.v2);}computeWorldVertices(e,s,n,r){this.sequence!=null&&this.sequence.apply(e,this);let f=e.bone,c=this.offset,d=f.worldX,p=f.worldY,x=f.a,w=f.b,C=f.c,F=f.d,B=0,X=0;B=c[0],X=c[1],s[n]=B*x+X*w+d,s[n+1]=B*C+X*F+p,n+=r,B=c[2],X=c[3],s[n]=B*x+X*w+d,s[n+1]=B*C+X*F+p,n+=r,B=c[4],X=c[5],s[n]=B*x+X*w+d,s[n+1]=B*C+X*F+p,n+=r,B=c[6],X=c[7],s[n]=B*x+X*w+d,s[n+1]=B*C+X*F+p;}copy(){let e=new sn(this.name,this.path);return e.region=this.region,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,D.arrayCopy(this.uvs,0,e.uvs,0,8),D.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e.sequence=this.sequence!=null?this.sequence.copy():null,e}static X1=0;static Y1=1;static C1R=2;static C1G=3;static C1B=4;static C1A=5;static U1=6;static V1=7;static X2=8;static Y2=9;static C2R=10;static C2G=11;static C2B=12;static C2A=13;static U2=14;static V2=15;static X3=16;static Y3=17;static C3R=18;static C3G=19;static C3B=20;static C3A=21;static U3=22;static V3=23;static X4=24;static Y4=25;static C4R=26;static C4G=27;static C4B=28;static C4A=29;static U4=30;static V4=31},Ds=class{atlas;constructor(i){this.atlas=i;}loadSequence(i,e,s){let n=s.regions;for(let r=0,f=n.length;r<f;r++){let c=s.getPath(e,r),d=this.atlas.findRegion(c);if(d==null)throw new Error("Region not found in atlas: "+c+" (sequence: "+i+")");n[r]=d;}}newRegionAttachment(i,e,s,n){let r=new Ni(e,s);if(n!=null)this.loadSequence(e,s,n);else {let f=this.atlas.findRegion(s);if(!f)throw new Error("Region not found in atlas: "+s+" (region attachment: "+e+")");r.region=f;}return r}newMeshAttachment(i,e,s,n){let r=new Xi(e,s);if(n!=null)this.loadSequence(e,s,n);else {let f=this.atlas.findRegion(s);if(!f)throw new Error("Region not found in atlas: "+s+" (mesh attachment: "+e+")");r.region=f;}return r}newBoundingBoxAttachment(i,e){return new yi(e)}newPathAttachment(i,e){return new Pi(e)}newPointAttachment(i,e){return new ms(e)}newClippingAttachment(i,e){return new ui(e)}},$i=class{index=0;name;parent=null;length=0;x=0;y=0;rotation=0;scaleX=1;scaleY=1;shearX=0;shearY=0;inherit=0;skinRequired=false;color=new O;icon;visible=false;constructor(i,e,s){if(i<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=i,this.name=e,this.parent=s;}},di=(i=>(i[i.Normal=0]="Normal",i[i.OnlyTranslation=1]="OnlyTranslation",i[i.NoRotationOrReflection=2]="NoRotationOrReflection",i[i.NoScale=3]="NoScale",i[i.NoScaleOrReflection=4]="NoScaleOrReflection",i))(di||{}),He=class{data;skeleton;parent=null;children=new Array;x=0;y=0;rotation=0;scaleX=0;scaleY=0;shearX=0;shearY=0;ax=0;ay=0;arotation=0;ascaleX=0;ascaleY=0;ashearX=0;ashearY=0;a=0;b=0;c=0;d=0;worldY=0;worldX=0;inherit=0;sorted=false;active=false;constructor(i,e,s){if(!i)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=i,this.skeleton=e,this.parent=s,this.setToSetupPose();}isActive(){return this.active}update(i){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY);}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);}updateWorldTransformWith(i,e,s,n,r,f,c){this.ax=i,this.ay=e,this.arotation=s,this.ascaleX=n,this.ascaleY=r,this.ashearX=f,this.ashearY=c;let d=this.parent;if(!d){let F=this.skeleton,B=F.scaleX,X=F.scaleY,z=(s+f)*T.degRad,W=(s+90+c)*T.degRad;this.a=Math.cos(z)*n*B,this.b=Math.cos(W)*r*B,this.c=Math.sin(z)*n*X,this.d=Math.sin(W)*r*X,this.worldX=i*B+F.x,this.worldY=e*X+F.y;return}let p=d.a,x=d.b,w=d.c,C=d.d;switch(this.worldX=p*i+x*e+d.worldX,this.worldY=w*i+C*e+d.worldY,this.inherit){case 0:{let F=(s+f)*T.degRad,B=(s+90+c)*T.degRad,X=Math.cos(F)*n,z=Math.cos(B)*r,W=Math.sin(F)*n,Z=Math.sin(B)*r;this.a=p*X+x*W,this.b=p*z+x*Z,this.c=w*X+C*W,this.d=w*z+C*Z;return}case 1:{let F=(s+f)*T.degRad,B=(s+90+c)*T.degRad;this.a=Math.cos(F)*n,this.b=Math.cos(B)*r,this.c=Math.sin(F)*n,this.d=Math.sin(B)*r;break}case 2:{let F=1/this.skeleton.scaleX,B=1/this.skeleton.scaleY;p*=F,w*=B;let X=p*p+w*w,z=0;X>1e-4?(X=Math.abs(p*C*B-x*F*w)/X,x=w*X,C=p*X,z=Math.atan2(w,p)*T.radDeg):(p=0,w=0,z=90-Math.atan2(C,x)*T.radDeg);let W=(s+f-z)*T.degRad,Z=(s+c-z+90)*T.degRad,J=Math.cos(W)*n,j=Math.cos(Z)*r,Q=Math.sin(W)*n,tt=Math.sin(Z)*r;this.a=p*J-x*Q,this.b=p*j-x*tt,this.c=w*J+C*Q,this.d=w*j+C*tt;break}case 3:case 4:{s*=T.degRad;let F=Math.cos(s),B=Math.sin(s),X=(p*F+x*B)/this.skeleton.scaleX,z=(w*F+C*B)/this.skeleton.scaleY,W=Math.sqrt(X*X+z*z);W>1e-5&&(W=1/W),X*=W,z*=W,W=Math.sqrt(X*X+z*z),this.inherit==3&&p*C-x*w<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(W=-W),s=Math.PI/2+Math.atan2(z,X);let Z=Math.cos(s)*W,J=Math.sin(s)*W;f*=T.degRad,c=(90+c)*T.degRad;let j=Math.cos(f)*n,Q=Math.cos(c)*r,tt=Math.sin(f)*n,nt=Math.sin(c)*r;this.a=X*j+Z*tt,this.b=X*Q+Z*nt,this.c=z*j+J*tt,this.d=z*Q+J*nt;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY;}setToSetupPose(){let i=this.data;this.x=i.x,this.y=i.y,this.rotation=i.rotation,this.scaleX=i.scaleX,this.scaleY=i.scaleY,this.shearX=i.shearX,this.shearY=i.shearY,this.inherit=i.inherit;}updateAppliedTransform(){let i=this.parent;if(!i){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*T.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*T.radDeg;return}let e=i.a,s=i.b,n=i.c,r=i.d,f=1/(e*r-s*n),c=r*f,d=s*f,p=n*f,x=e*f,w=this.worldX-i.worldX,C=this.worldY-i.worldY;this.ax=w*c-C*d,this.ay=C*x-w*p;let F,B,X,z;if(this.inherit==1)F=this.a,B=this.b,X=this.c,z=this.d;else {switch(this.inherit){case 2:{let Q=Math.abs(e*r-s*n)/(e*e+n*n);s=-n*this.skeleton.scaleX*Q/this.skeleton.scaleY,r=e*this.skeleton.scaleY*Q/this.skeleton.scaleX,f=1/(e*r-s*n),c=r*f,d=s*f;break}case 3:case 4:let W=T.cosDeg(this.rotation),Z=T.sinDeg(this.rotation);e=(e*W+s*Z)/this.skeleton.scaleX,n=(n*W+r*Z)/this.skeleton.scaleY;let J=Math.sqrt(e*e+n*n);J>1e-5&&(J=1/J),e*=J,n*=J,J=Math.sqrt(e*e+n*n),this.inherit==3&&f<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(J=-J);let j=T.PI/2+Math.atan2(n,e);s=Math.cos(j)*J,r=Math.sin(j)*J,f=1/(e*r-s*n),c=r*f,d=s*f,p=n*f,x=e*f;}F=c*this.a-d*this.c,B=c*this.b-d*this.d,X=x*this.c-p*this.a,z=x*this.d-p*this.b;}if(this.ashearX=0,this.ascaleX=Math.sqrt(F*F+X*X),this.ascaleX>1e-4){let W=F*z-B*X;this.ascaleY=W/this.ascaleX,this.ashearY=-Math.atan2(F*B+X*z,W)*T.radDeg,this.arotation=Math.atan2(X,F)*T.radDeg;}else this.ascaleX=0,this.ascaleY=Math.sqrt(B*B+z*z),this.ashearY=0,this.arotation=90-Math.atan2(z,B)*T.radDeg;}getWorldRotationX(){return Math.atan2(this.c,this.a)*T.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*T.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(i){let e=1/(this.a*this.d-this.b*this.c),s=i.x-this.worldX,n=i.y-this.worldY;return i.x=s*this.d*e-n*this.b*e,i.y=n*this.a*e-s*this.c*e,i}localToWorld(i){let e=i.x,s=i.y;return i.x=e*this.a+s*this.b+this.worldX,i.y=e*this.c+s*this.d+this.worldY,i}worldToParent(i){if(i==null)throw new Error("world cannot be null.");return this.parent==null?i:this.parent.worldToLocal(i)}parentToWorld(i){if(i==null)throw new Error("world cannot be null.");return this.parent==null?i:this.parent.localToWorld(i)}worldToLocalRotation(i){let e=T.sinDeg(i),s=T.cosDeg(i);return Math.atan2(this.a*e-this.c*s,this.d*s-this.b*e)*T.radDeg+this.rotation-this.shearX}localToWorldRotation(i){i-=this.rotation-this.shearX;let e=T.sinDeg(i),s=T.cosDeg(i);return Math.atan2(s*this.c+e*this.d,s*this.a+e*this.b)*T.radDeg}rotateWorld(i){i*=T.degRad;let e=Math.sin(i),s=Math.cos(i),n=this.a,r=this.b;this.a=s*n-e*this.c,this.b=s*r-e*this.d,this.c=e*n+s*this.c,this.d=e*r+s*this.d;}},fi=class{constructor(i,e,s){this.name=i,this.order=e,this.skinRequired=s;}},wi=class{pathPrefix="";textureLoader;downloader;cache;errors={};toLoad=0;loaded=0;constructor(i,e="",s=new gs,n=new Bi){this.textureLoader=i,this.pathPrefix=e,this.downloader=s,this.cache=n;}start(i){return this.toLoad++,this.pathPrefix+i}success(i,e,s){this.toLoad--,this.loaded++,this.cache.assets[e]=s,this.cache.assetsRefCount[e]=(this.cache.assetsRefCount[e]||0)+1,i&&i(e,s);}error(i,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,i&&i(e,s);}loadAll(){return new Promise((i,e)=>{let s=()=>{if(this.isLoadingComplete()){this.hasErrors()?e(this.errors):i(this);return}requestAnimationFrame(s);};requestAnimationFrame(s);})}setRawDataURI(i,e){this.downloader.rawDataUris[this.pathPrefix+i]=e;}loadBinary(i,e=()=>{},s=()=>{}){i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((n,r)=>{this.downloader.downloadBinary(i,f=>{this.success(e,i,f),n(f);},(f,c)=>{let d=`Couldn't load binary ${i}: status ${f}, ${c}`;this.error(s,i,d),r(d);});}));}loadText(i,e=()=>{},s=()=>{}){i=this.start(i),this.downloader.downloadText(i,n=>{this.success(e,i,n);},(n,r)=>{this.error(s,i,`Couldn't load text ${i}: status ${n}, ${r}`);});}loadJson(i,e=()=>{},s=()=>{}){i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((n,r)=>{this.downloader.downloadJson(i,f=>{this.success(e,i,f),n(f);},(f,c)=>{let d=`Couldn't load JSON ${i}: status ${f}, ${c}`;this.error(s,i,d),r(d);});}));}reuseAssets(i,e=()=>{},s=()=>{}){let n=this.cache.assetsLoaded[i],r=n!==void 0;return r&&(this.cache.assetsLoaded[i]=n.then(f=>(f=f instanceof Image||f instanceof ImageBitmap?this.textureLoader(f):f,this.success(e,i,f),f)).catch(f=>this.error(s,i,f))),r}loadTexture(i,e=()=>{},s=()=>{}){i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((n,r)=>{if(!(typeof window<"u"&&typeof navigator<"u"&&window.document))fetch(i,{mode:"cors"}).then(f=>{if(f.ok)return f.blob();let c=`Couldn't load image: ${i}`;this.error(s,i,`Couldn't load image: ${i}`),r(c);}).then(f=>f?createImageBitmap(f,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(f=>{if(f){let c=this.createTexture(i,f);this.success(e,i,c),n(c);}});else {let f=new Image;f.crossOrigin="anonymous",f.onload=()=>{let c=this.createTexture(i,f);this.success(e,i,c),n(c);},f.onerror=()=>{let c=`Couldn't load image: ${i}`;this.error(s,i,c),r(c);},this.downloader.rawDataUris[i]&&(i=this.downloader.rawDataUris[i]),f.src=i;}}));}loadTextureAtlas(i,e=()=>{},s=()=>{},n){let r=i.lastIndexOf("/"),f=r>=0?i.substring(0,r+1):"";i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((c,d)=>{this.downloader.downloadText(i,p=>{try{let x=this.createTextureAtlas(i,p),w=x.pages.length,C=!1;for(let F of x.pages)this.loadTexture(n?n[F.name]:f+F.name,(B,X)=>{C||(F.setTexture(X),--w==0&&(this.success(e,i,x),c(x)));},(B,X)=>{if(!C){let z=`Couldn't load texture ${i} page image: ${B}`;this.error(s,i,z),d(z);}C=!0;});}catch(x){let w=`Couldn't parse texture atlas ${i}: ${x.message}`;this.error(s,i,w),d(w);}},(p,x)=>{let w=`Couldn't load texture atlas ${i}: status ${p}, ${x}`;this.error(s,i,w),d(w);});}));}loadTextureAtlasButNoTextures(i,e=()=>{},s=()=>{},n){i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((r,f)=>{this.downloader.downloadText(i,c=>{try{let d=this.createTextureAtlas(i,c);this.success(e,i,d),r(d);}catch(d){let p=`Couldn't parse texture atlas ${i}: ${d.message}`;this.error(s,i,p),f(p);}},(c,d)=>{let p=`Couldn't load texture atlas ${i}: status ${c}, ${d}`;this.error(s,i,p),f(p);});}));}async loadBinaryAsync(i){return new Promise((e,s)=>{this.loadBinary(i,(n,r)=>e(r),(n,r)=>s(r));})}async loadJsonAsync(i){return new Promise((e,s)=>{this.loadJson(i,(n,r)=>e(r),(n,r)=>s(r));})}async loadTextureAsync(i){return new Promise((e,s)=>{this.loadTexture(i,(n,r)=>e(r),(n,r)=>s(r));})}async loadTextureAtlasAsync(i){return new Promise((e,s)=>{this.loadTextureAtlas(i,(n,r)=>e(r),(n,r)=>s(r));})}async loadTextureAtlasButNoTexturesAsync(i){return new Promise((e,s)=>{this.loadTextureAtlasButNoTextures(i,(n,r)=>e(r),(n,r)=>s(r));})}setCache(i){this.cache=i;}get(i){return this.cache.assets[this.pathPrefix+i]}require(i){i=this.pathPrefix+i;let e=this.cache.assets[i];if(e)return e;let s=this.errors[i];throw Error("Asset not found: "+i+(s?`
`+s:""))}remove(i){i=this.pathPrefix+i;let e=this.cache.assets[i];return e.dispose&&e.dispose(),delete this.cache.assets[i],delete this.cache.assetsRefCount[i],delete this.cache.assetsLoaded[i],e}removeAll(){for(let i in this.cache.assets){let e=this.cache.assets[i];e.dispose&&e.dispose();}this.cache.assets={},this.cache.assetsLoaded={},this.cache.assetsRefCount={};}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll();}disposeAsset(i){let e=this.cache.assets[i];if(e instanceof ii){e.dispose();return}this.disposeAssetInternal(i);}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}disposeAssetInternal(i){if(this.cache.assetsRefCount[i]>0&&--this.cache.assetsRefCount[i]===0)return this.remove(i)}createTextureAtlas(i,e){let s=new ii(e);return s.dispose=()=>{var n;if(!(this.cache.assetsRefCount[i]<=0)){this.disposeAssetInternal(i);for(let r of s.pages)(n=r.texture)==null||n.dispose();}},s}createTexture(i,e){let s=this.textureLoader(e),n=s.dispose.bind(s);return s.dispose=()=>{this.disposeAssetInternal(i)&&n();},s}},Bi=class Mr{assets={};assetsRefCount={};assetsLoaded={};static AVAILABLE_CACHES=new Map;static getCache(e){let s=Mr.AVAILABLE_CACHES.get(e);if(s)return s;let n=new Mr;return Mr.AVAILABLE_CACHES.set(e,n),n}async addAsset(e,s){this.assetsLoaded[e]=Promise.resolve(s),this.assets[e]=await s;}},gs=class{callbacks={};rawDataUris={};dataUriToString(i){if(!i.startsWith("data:"))throw new Error("Not a data URI.");let e=i.indexOf("base64,");return e!=-1?(e+=7,atob(i.substr(e))):i.substr(i.indexOf(",")+1)}base64ToUint8Array(i){for(var e=window.atob(i),s=e.length,n=new Uint8Array(s),r=0;r<s;r++)n[r]=e.charCodeAt(r);return n}dataUriToUint8Array(i){if(!i.startsWith("data:"))throw new Error("Not a data URI.");let e=i.indexOf("base64,");if(e==-1)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(i.substr(e))}downloadText(i,e,s){if(this.start(i,e,s))return;let n=this.rawDataUris[i];if(n&&!n.includes(".")){try{this.finish(i,200,this.dataUriToString(n));}catch(c){this.finish(i,400,JSON.stringify(c));}return}let r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.open("GET",n||i,true);let f=()=>{this.finish(i,r.status,r.responseText);};r.onload=f,r.onerror=f,r.send();}downloadJson(i,e,s){this.downloadText(i,n=>{e(JSON.parse(n));},s);}downloadBinary(i,e,s){if(this.start(i,e,s))return;let n=this.rawDataUris[i];if(n&&!n.includes(".")){try{this.finish(i,200,this.dataUriToUint8Array(n));}catch(c){this.finish(i,400,JSON.stringify(c));}return}let r=new XMLHttpRequest;r.open("GET",n||i,true),r.responseType="arraybuffer";let f=()=>{this.finish(i,r.status,r.response);};r.onload=()=>{r.status==200||r.status==0?this.finish(i,200,new Uint8Array(r.response)):f();},r.onerror=f,r.send();}start(i,e,s){let n=this.callbacks[i];try{if(n)return !0;this.callbacks[i]=n=[];}finally{n.push(e,s);}}finish(i,e,s){let n=this.callbacks[i];delete this.callbacks[i];let r=e==200||e==0?[s]:[e,s];for(let f=r.length-1,c=n.length;f<c;f+=2)n[f].apply(null,r);}},ps=class{data;intValue=0;floatValue=0;stringValue=null;time=0;volume=0;balance=0;constructor(i,e){if(!e)throw new Error("data cannot be null.");this.time=i,this.data=e;}},Os=class{name;intValue=0;floatValue=0;stringValue=null;audioPath=null;volume=0;balance=0;constructor(i){this.name=i;}},vs=class{data;bones;target;bendDirection=0;compress=false;stretch=false;mix=1;softness=0;active=false;constructor(i,e){if(!i)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=i,this.bones=new Array;for(let n=0;n<i.bones.length;n++){let r=e.findBone(i.bones[n].name);if(!r)throw new Error(`Couldn't find bone ${i.bones[n].name}`);this.bones.push(r);}let s=e.findBone(i.target.name);if(!s)throw new Error(`Couldn't find bone ${i.target.name}`);this.target=s,this.mix=i.mix,this.softness=i.softness,this.bendDirection=i.bendDirection,this.compress=i.compress,this.stretch=i.stretch;}isActive(){return this.active}setToSetupPose(){let i=this.data;this.mix=i.mix,this.softness=i.softness,this.bendDirection=i.bendDirection,this.compress=i.compress,this.stretch=i.stretch;}update(i){if(this.mix==0)return;let e=this.target,s=this.bones;switch(s.length){case 1:this.apply1(s[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(s[0],s[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(i,e,s,n,r,f,c){let d=i.parent;if(!d)throw new Error("IK bone must have parent.");let p=d.a,x=d.b,w=d.c,C=d.d,F=-i.ashearX-i.arotation,B=0,X=0;switch(i.inherit){case 1:B=(e-i.worldX)*T.signum(i.skeleton.scaleX),X=(s-i.worldY)*T.signum(i.skeleton.scaleY);break;case 2:let Z=Math.abs(p*C-x*w)/Math.max(1e-4,p*p+w*w),J=p/i.skeleton.scaleX,j=w/i.skeleton.scaleY;x=-j*Z*i.skeleton.scaleX,C=J*Z*i.skeleton.scaleY,F+=Math.atan2(j,J)*T.radDeg;default:let Q=e-d.worldX,tt=s-d.worldY,nt=p*C-x*w;Math.abs(nt)<=1e-4?(B=0,X=0):(B=(Q*C-tt*x)/nt-i.ax,X=(tt*p-Q*w)/nt-i.ay);}F+=Math.atan2(X,B)*T.radDeg,i.ascaleX<0&&(F+=180),F>180?F-=360:F<-180&&(F+=360);let z=i.ascaleX,W=i.ascaleY;if(n||r){switch(i.inherit){case 3:case 4:B=e-i.worldX,X=s-i.worldY;}let Z=i.data.length*z;if(Z>1e-4){let J=B*B+X*X;if(n&&J<Z*Z||r&&J>Z*Z){let j=(Math.sqrt(J)/Z-1)*c+1;z*=j,f&&(W*=j);}}}i.updateWorldTransformWith(i.ax,i.ay,i.arotation+F*c,z,W,i.ashearX,i.ashearY);}apply2(i,e,s,n,r,f,c,d,p){if(i.inherit!=0||e.inherit!=0)return;let x=i.ax,w=i.ay,C=i.ascaleX,F=i.ascaleY,B=C,X=F,z=e.ascaleX,W=0,Z=0,J=0;C<0?(C=-C,W=180,J=-1):(W=0,J=1),F<0&&(F=-F,J=-J),z<0?(z=-z,Z=180):Z=0;let j=e.ax,Q=0,tt=0,nt=0,pt=i.a,mt=i.b,gt=i.c,Ct=i.d,Ft=Math.abs(C-F)<=1e-4;!Ft||f?(Q=0,tt=pt*j+i.worldX,nt=gt*j+i.worldY):(Q=e.ay,tt=pt*j+mt*Q+i.worldX,nt=gt*j+Ct*Q+i.worldY);let Vt=i.parent;if(!Vt)throw new Error("IK parent must itself have a parent.");pt=Vt.a,mt=Vt.b,gt=Vt.c,Ct=Vt.d;let Ut=pt*Ct-mt*gt,St=tt-Vt.worldX,It=nt-Vt.worldY;Ut=Math.abs(Ut)<=1e-4?0:1/Ut;let Ht=(St*Ct-It*mt)*Ut-x,Se=(It*pt-St*gt)*Ut-w,ve=Math.sqrt(Ht*Ht+Se*Se),be=e.data.length*z,Pe,Re;if(ve<1e-4){this.apply1(i,s,n,false,f,false,p),e.updateWorldTransformWith(j,Q,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}St=s-Vt.worldX,It=n-Vt.worldY;let Ge=(St*Ct-It*mt)*Ut-x,ne=(It*pt-St*gt)*Ut-w,Te=Ge*Ge+ne*ne;if(d!=0){d*=C*(z+1)*.5;let je=Math.sqrt(Te),si=je-ve-be*C+d;if(si>0){let Qe=Math.min(1,si/(d*2))-1;Qe=(si-d*(1-Qe*Qe))/je,Ge-=Qe*Ge,ne-=Qe*ne,Te=Ge*Ge+ne*ne;}}t:if(Ft){be*=C;let je=(Te-ve*ve-be*be)/(2*ve*be);je<-1?(je=-1,Re=Math.PI*r):je>1?(je=1,Re=0,f&&(pt=(Math.sqrt(Te)/(ve+be)-1)*p+1,B*=pt,c&&(X*=pt))):Re=Math.acos(je)*r,pt=ve+be*je,mt=be*Math.sin(Re),Pe=Math.atan2(ne*pt-Ge*mt,Ge*pt+ne*mt);}else {pt=C*be,mt=F*be;let je=pt*pt,si=mt*mt,Qe=Math.atan2(ne,Ge);gt=si*ve*ve+je*Te-je*si;let Ri=-2*si*ve,Cs=si-je;if(Ct=Ri*Ri-4*Cs*gt,Ct>=0){let Es=Math.sqrt(Ct);Ri<0&&(Es=-Es),Es=-(Ri+Es)*.5;let tr=Es/Cs,Zr=gt/Es,pr=Math.abs(tr)<Math.abs(Zr)?tr:Zr;if(tr=Te-pr*pr,tr>=0){It=Math.sqrt(tr)*r,Pe=Qe-Math.atan2(It,pr),Re=Math.atan2(It/F,(pr-ve)/C);break t}}let $s=T.PI,mr=ve-pt,Br=mr*mr,Wr=0,Gr=0,gr=ve+pt,Vr=gr*gr,zr=0;gt=-pt*ve/(je-si),gt>=-1&&gt<=1&&(gt=Math.acos(gt),St=pt*Math.cos(gt)+ve,It=mt*Math.sin(gt),Ct=St*St+It*It,Ct<Br&&($s=gt,Br=Ct,mr=St,Wr=It),Ct>Vr&&(Gr=gt,Vr=Ct,gr=St,zr=It)),Te<=(Br+Vr)*.5?(Pe=Qe-Math.atan2(Wr*r,mr),Re=$s*r):(Pe=Qe-Math.atan2(zr*r,gr),Re=Gr*r);}let Fe=Math.atan2(Q,j)*J,Ke=i.arotation;Pe=(Pe-Fe)*T.radDeg+W-Ke,Pe>180?Pe-=360:Pe<-180&&(Pe+=360),i.updateWorldTransformWith(x,w,Ke+Pe*p,B,X,0,0),Ke=e.arotation,Re=((Re+Fe)*T.radDeg-e.ashearX)*J+Z-Ke,Re>180?Re-=360:Re<-180&&(Re+=360),e.updateWorldTransformWith(j,Q,Ke+Re*p,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);}},ts=class extends fi{bones=new Array;_target=null;set target(i){this._target=i;}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}bendDirection=0;compress=false;stretch=false;uniform=false;mix=0;softness=0;constructor(i){super(i,0,false);}},Ui=class extends fi{bones=new Array;_target=null;set target(i){this._target=i;}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}positionMode=0;spacingMode=1;rotateMode=1;offsetRotation=0;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;constructor(i){super(i,0,false);}},es=(i=>(i[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent",i))(es||{}),ei=(i=>(i[i.Length=0]="Length",i[i.Fixed=1]="Fixed",i[i.Percent=2]="Percent",i[i.Proportional=3]="Proportional",i))(ei||{}),is=(i=>(i[i.Tangent=0]="Tangent",i[i.Chain=1]="Chain",i[i.ChainScale=2]="ChainScale",i))(is||{}),sr=class qi{static NONE=-1;static BEFORE=-2;static AFTER=-3;static epsilon=1e-5;data;bones;target;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;spaces=new Array;positions=new Array;world=new Array;curves=new Array;lengths=new Array;segments=new Array;active=false;constructor(e,s){if(!e)throw new Error("data cannot be null.");if(!s)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let r=0,f=e.bones.length;r<f;r++){let c=s.findBone(e.bones[r].name);if(!c)throw new Error(`Couldn't find bone ${e.bones[r].name}.`);this.bones.push(c);}let n=s.findSlot(e.target.name);if(!n)throw new Error(`Couldn't find target bone ${e.target.name}`);this.target=n,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY;}isActive(){return this.active}setToSetupPose(){let e=this.data;this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY;}update(e){let s=this.target.getAttachment();if(!(s instanceof Pi))return;let n=this.mixRotate,r=this.mixX,f=this.mixY;if(n==0&&r==0&&f==0)return;let c=this.data,d=c.rotateMode==0,p=c.rotateMode==2,x=this.bones,w=x.length,C=d?w:w+1,F=D.setArraySize(this.spaces,C),B=p?this.lengths=D.setArraySize(this.lengths,w):[],X=this.spacing;switch(c.spacingMode){case 2:if(p)for(let nt=0,pt=C-1;nt<pt;nt++){let mt=x[nt],gt=mt.data.length,Ct=gt*mt.a,Ft=gt*mt.c;B[nt]=Math.sqrt(Ct*Ct+Ft*Ft);}D.arrayFill(F,1,C,X);break;case 3:let Q=0;for(let nt=0,pt=C-1;nt<pt;){let mt=x[nt],gt=mt.data.length;if(gt<qi.epsilon)p&&(B[nt]=0),F[++nt]=X;else {let Ct=gt*mt.a,Ft=gt*mt.c,Vt=Math.sqrt(Ct*Ct+Ft*Ft);p&&(B[nt]=Vt),F[++nt]=Vt,Q+=Vt;}}if(Q>0){Q=C/Q*X;for(let nt=1;nt<C;nt++)F[nt]*=Q;}break;default:let tt=c.spacingMode==0;for(let nt=0,pt=C-1;nt<pt;){let mt=x[nt],gt=mt.data.length;if(gt<qi.epsilon)p&&(B[nt]=0),F[++nt]=X;else {let Ct=gt*mt.a,Ft=gt*mt.c,Vt=Math.sqrt(Ct*Ct+Ft*Ft);p&&(B[nt]=Vt),F[++nt]=(tt?gt+X:X)*Vt/gt;}}}let z=this.computeWorldPositions(s,C,d),W=z[0],Z=z[1],J=c.offsetRotation,j=false;if(J==0)j=c.rotateMode==1;else {j=false;let Q=this.target.bone;J*=Q.a*Q.d-Q.b*Q.c>0?T.degRad:-0.01745329277777778;}for(let Q=0,tt=3;Q<w;Q++,tt+=3){let nt=x[Q];nt.worldX+=(W-nt.worldX)*r,nt.worldY+=(Z-nt.worldY)*f;let pt=z[tt],mt=z[tt+1],gt=pt-W,Ct=mt-Z;if(p){let Ft=B[Q];if(Ft!=0){let Vt=(Math.sqrt(gt*gt+Ct*Ct)/Ft-1)*n+1;nt.a*=Vt,nt.c*=Vt;}}if(W=pt,Z=mt,n>0){let Ft=nt.a,Vt=nt.b,Ut=nt.c,St=nt.d,It=0,Ht=0,Se=0;if(d?It=z[tt-1]:F[Q+1]==0?It=z[tt+2]:It=Math.atan2(Ct,gt),It-=Math.atan2(Ut,Ft),j){Ht=Math.cos(It),Se=Math.sin(It);let ve=nt.data.length;W+=(ve*(Ht*Ft-Se*Ut)-gt)*n,Z+=(ve*(Se*Ft+Ht*Ut)-Ct)*n;}else It+=J;It>T.PI?It-=T.PI2:It<-3.1415927&&(It+=T.PI2),It*=n,Ht=Math.cos(It),Se=Math.sin(It),nt.a=Ht*Ft-Se*Ut,nt.b=Ht*Vt-Se*St,nt.c=Se*Ft+Ht*Ut,nt.d=Se*Vt+Ht*St;}nt.updateAppliedTransform();}}computeWorldPositions(e,s,n){let r=this.target,f=this.position,c=this.spaces,d=D.setArraySize(this.positions,s*3+2),p=this.world,x=e.closed,w=e.worldVerticesLength,C=w/6,F=qi.NONE;if(!e.constantSpeed){let ve=e.lengths;C-=x?1:2;let be=ve[C];this.data.positionMode==1&&(f*=be);let Pe;switch(this.data.spacingMode){case 2:Pe=be;break;case 3:Pe=be/s;break;default:Pe=1;}p=D.setArraySize(this.world,8);for(let Re=0,Ge=0,ne=0;Re<s;Re++,Ge+=3){let Te=c[Re]*Pe;f+=Te;let Fe=f;if(x)Fe%=be,Fe<0&&(Fe+=be),ne=0;else if(Fe<0){F!=qi.BEFORE&&(F=qi.BEFORE,e.computeWorldVertices(r,2,4,p,0,2)),this.addBeforePosition(Fe,p,0,d,Ge);continue}else if(Fe>be){F!=qi.AFTER&&(F=qi.AFTER,e.computeWorldVertices(r,w-6,4,p,0,2)),this.addAfterPosition(Fe-be,p,0,d,Ge);continue}for(;;ne++){let Ke=ve[ne];if(!(Fe>Ke)){if(ne==0)Fe/=Ke;else {let je=ve[ne-1];Fe=(Fe-je)/(Ke-je);}break}}ne!=F&&(F=ne,x&&ne==C?(e.computeWorldVertices(r,w-4,4,p,0,2),e.computeWorldVertices(r,0,4,p,4,2)):e.computeWorldVertices(r,ne*6+2,8,p,0,2)),this.addCurvePosition(Fe,p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],d,Ge,n||Re>0&&Te==0);}return d}x?(w+=2,p=D.setArraySize(this.world,w),e.computeWorldVertices(r,2,w-4,p,0,2),e.computeWorldVertices(r,0,2,p,w-4,2),p[w-2]=p[0],p[w-1]=p[1]):(C--,w-=4,p=D.setArraySize(this.world,w),e.computeWorldVertices(r,2,w,p,0,2));let B=D.setArraySize(this.curves,C),X=0,z=p[0],W=p[1],Z=0,J=0,j=0,Q=0,tt=0,nt=0,pt=0,mt=0,gt=0,Ct=0,Ft=0,Vt=0,Ut=0,St=0;for(let ve=0,be=2;ve<C;ve++,be+=6)Z=p[be],J=p[be+1],j=p[be+2],Q=p[be+3],tt=p[be+4],nt=p[be+5],pt=(z-Z*2+j)*.1875,mt=(W-J*2+Q)*.1875,gt=((Z-j)*3-z+tt)*.09375,Ct=((J-Q)*3-W+nt)*.09375,Ft=pt*2+gt,Vt=mt*2+Ct,Ut=(Z-z)*.75+pt+gt*.16666667,St=(J-W)*.75+mt+Ct*.16666667,X+=Math.sqrt(Ut*Ut+St*St),Ut+=Ft,St+=Vt,Ft+=gt,Vt+=Ct,X+=Math.sqrt(Ut*Ut+St*St),Ut+=Ft,St+=Vt,X+=Math.sqrt(Ut*Ut+St*St),Ut+=Ft+gt,St+=Vt+Ct,X+=Math.sqrt(Ut*Ut+St*St),B[ve]=X,z=tt,W=nt;this.data.positionMode==1&&(f*=X);let It;switch(this.data.spacingMode){case 2:It=X;break;case 3:It=X/s;break;default:It=1;}let Ht=this.segments,Se=0;for(let ve=0,be=0,Pe=0,Re=0;ve<s;ve++,be+=3){let Ge=c[ve]*It;f+=Ge;let ne=f;if(x)ne%=X,ne<0&&(ne+=X),Pe=0;else if(ne<0){this.addBeforePosition(ne,p,0,d,be);continue}else if(ne>X){this.addAfterPosition(ne-X,p,w-4,d,be);continue}for(;;Pe++){let Te=B[Pe];if(!(ne>Te)){if(Pe==0)ne/=Te;else {let Fe=B[Pe-1];ne=(ne-Fe)/(Te-Fe);}break}}if(Pe!=F){F=Pe;let Te=Pe*6;for(z=p[Te],W=p[Te+1],Z=p[Te+2],J=p[Te+3],j=p[Te+4],Q=p[Te+5],tt=p[Te+6],nt=p[Te+7],pt=(z-Z*2+j)*.03,mt=(W-J*2+Q)*.03,gt=((Z-j)*3-z+tt)*.006,Ct=((J-Q)*3-W+nt)*.006,Ft=pt*2+gt,Vt=mt*2+Ct,Ut=(Z-z)*.3+pt+gt*.16666667,St=(J-W)*.3+mt+Ct*.16666667,Se=Math.sqrt(Ut*Ut+St*St),Ht[0]=Se,Te=1;Te<8;Te++)Ut+=Ft,St+=Vt,Ft+=gt,Vt+=Ct,Se+=Math.sqrt(Ut*Ut+St*St),Ht[Te]=Se;Ut+=Ft,St+=Vt,Se+=Math.sqrt(Ut*Ut+St*St),Ht[8]=Se,Ut+=Ft+gt,St+=Vt+Ct,Se+=Math.sqrt(Ut*Ut+St*St),Ht[9]=Se,Re=0;}for(ne*=Se;;Re++){let Te=Ht[Re];if(!(ne>Te)){if(Re==0)ne/=Te;else {let Fe=Ht[Re-1];ne=Re+(ne-Fe)/(Te-Fe);}break}}this.addCurvePosition(ne*.1,z,W,Z,J,j,Q,tt,nt,d,be,n||ve>0&&Ge==0);}return d}addBeforePosition(e,s,n,r,f){let c=s[n],d=s[n+1],p=s[n+2]-c,x=s[n+3]-d,w=Math.atan2(x,p);r[f]=c+e*Math.cos(w),r[f+1]=d+e*Math.sin(w),r[f+2]=w;}addAfterPosition(e,s,n,r,f){let c=s[n+2],d=s[n+3],p=c-s[n],x=d-s[n+1],w=Math.atan2(x,p);r[f]=c+e*Math.cos(w),r[f+1]=d+e*Math.sin(w),r[f+2]=w;}addCurvePosition(e,s,n,r,f,c,d,p,x,w,C,F){if(e==0||isNaN(e)){w[C]=s,w[C+1]=n,w[C+2]=Math.atan2(f-n,r-s);return}let B=e*e,X=B*e,z=1-e,W=z*z,Z=W*z,J=z*e,j=J*3,Q=z*j,tt=j*e,nt=s*Z+r*Q+c*tt+p*X,pt=n*Z+f*Q+d*tt+x*X;w[C]=nt,w[C+1]=pt,F&&(e<.001?w[C+2]=Math.atan2(f-n,r-s):w[C+2]=Math.atan2(pt-(n*W+f*J*2+d*B),nt-(s*W+r*J*2+c*B)));}},rr=class{data;_bone=null;set bone(i){this._bone=i;}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}inertia=0;strength=0;damping=0;massInverse=0;wind=0;gravity=0;mix=0;_reset=true;ux=0;uy=0;cx=0;cy=0;tx=0;ty=0;xOffset=0;xVelocity=0;yOffset=0;yVelocity=0;rotateOffset=0;rotateVelocity=0;scaleOffset=0;scaleVelocity=0;active=false;skeleton;remaining=0;lastTime=0;constructor(i,e){this.data=i,this.skeleton=e,this.bone=e.bones[i.bone.index],this.inertia=i.inertia,this.strength=i.strength,this.damping=i.damping,this.massInverse=i.massInverse,this.wind=i.wind,this.gravity=i.gravity,this.mix=i.mix;}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=true,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0;}setToSetupPose(){let i=this.data;this.inertia=i.inertia,this.strength=i.strength,this.damping=i.damping,this.massInverse=i.massInverse,this.wind=i.wind,this.gravity=i.gravity,this.mix=i.mix;}isActive(){return this.active}update(i){let e=this.mix;if(e==0)return;let s=this.data.x>0,n=this.data.y>0,r=this.data.rotate>0||this.data.shearX>0,f=this.data.scaleX>0,c=this.bone,d=c.data.length;switch(i){case 0:return;case 1:this.reset();case 2:let p=this.skeleton,x=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=x,this.lastTime=p.time;let w=c.worldX,C=c.worldY;if(this._reset)this._reset=false,this.ux=w,this.uy=C;else {let F=this.remaining,B=this.inertia,X=this.data.step,z=this.skeleton.data.referenceScale,W=-1,Z=this.data.limit*x,J=Z*Math.abs(p.scaleY);if(Z*=Math.abs(p.scaleX),s||n){if(s){let j=(this.ux-w)*B;this.xOffset+=j>Z?Z:j<-Z?-Z:j,this.ux=w;}if(n){let j=(this.uy-C)*B;this.yOffset+=j>J?J:j<-J?-J:j,this.uy=C;}if(F>=X){W=Math.pow(this.damping,60*X);let j=this.massInverse*X,Q=this.strength,tt=this.wind*z*p.scaleX,nt=this.gravity*z*p.scaleY;do s&&(this.xVelocity+=(tt-this.xOffset*Q)*j,this.xOffset+=this.xVelocity*X,this.xVelocity*=W),n&&(this.yVelocity-=(nt+this.yOffset*Q)*j,this.yOffset+=this.yVelocity*X,this.yVelocity*=W),F-=X;while(F>=X)}s&&(c.worldX+=this.xOffset*e*this.data.x),n&&(c.worldY+=this.yOffset*e*this.data.y);}if(r||f){let j=Math.atan2(c.c,c.a),Q=0,tt=0,nt=0,pt=this.cx-c.worldX,mt=this.cy-c.worldY;if(pt>Z?pt=Z:pt<-Z&&(pt=-Z),mt>J?mt=J:mt<-J&&(mt=-J),r){nt=(this.data.rotate+this.data.shearX)*e;let gt=Math.atan2(mt+this.ty,pt+this.tx)-j-this.rotateOffset*nt;this.rotateOffset+=(gt-Math.ceil(gt*T.invPI2-.5)*T.PI2)*B,gt=this.rotateOffset*nt+j,Q=Math.cos(gt),tt=Math.sin(gt),f&&(gt=d*c.getWorldScaleX(),gt>0&&(this.scaleOffset+=(pt*Q+mt*tt)*B/gt));}else {Q=Math.cos(j),tt=Math.sin(j);let gt=d*c.getWorldScaleX();gt>0&&(this.scaleOffset+=(pt*Q+mt*tt)*B/gt);}if(F=this.remaining,F>=X){W==-1&&(W=Math.pow(this.damping,60*X));let gt=this.massInverse*X,Ct=this.strength,Ft=this.wind,Vt=this.gravity,Ut=d/z;for(;;)if(F-=X,f&&(this.scaleVelocity+=(Ft*Q-Vt*tt-this.scaleOffset*Ct)*gt,this.scaleOffset+=this.scaleVelocity*X,this.scaleVelocity*=W),r){if(this.rotateVelocity-=((Ft*tt+Vt*Q)*Ut+this.rotateOffset*Ct)*gt,this.rotateOffset+=this.rotateVelocity*X,this.rotateVelocity*=W,F<X)break;let St=this.rotateOffset*nt+j;Q=Math.cos(St),tt=Math.sin(St);}else if(F<X)break}}this.remaining=F;}this.cx=c.worldX,this.cy=c.worldY;break;case 3:s&&(c.worldX+=this.xOffset*e*this.data.x),n&&(c.worldY+=this.yOffset*e*this.data.y);}if(r){let p=this.rotateOffset*e,x=0,w=0,C=0;if(this.data.shearX>0){let F=0;this.data.rotate>0&&(F=p*this.data.rotate,x=Math.sin(F),w=Math.cos(F),C=c.b,c.b=w*C-x*c.d,c.d=x*C+w*c.d),F+=p*this.data.shearX,x=Math.sin(F),w=Math.cos(F),C=c.a,c.a=w*C-x*c.c,c.c=x*C+w*c.c;}else p*=this.data.rotate,x=Math.sin(p),w=Math.cos(p),C=c.a,c.a=w*C-x*c.c,c.c=x*C+w*c.c,C=c.b,c.b=w*C-x*c.d,c.d=x*C+w*c.d;}if(f){let p=1+this.scaleOffset*e*this.data.scaleX;c.a*=p,c.c*=p;}i!=3&&(this.tx=d*c.a,this.ty=d*c.c),c.updateAppliedTransform();}translate(i,e){this.ux-=i,this.uy-=e,this.cx-=i,this.cy-=e;}rotate(i,e,s){let n=s*T.degRad,r=Math.cos(n),f=Math.sin(n),c=this.cx-i,d=this.cy-e;this.translate(c*r-d*f-c,c*f+d*r-d);}},nr=class{data;bone;color;darkColor=null;attachment=null;attachmentState=0;sequenceIndex=-1;deform=new Array;constructor(i,e){if(!i)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=i,this.bone=e,this.color=new O,this.darkColor=i.darkColor?new O:null,this.setToSetupPose();}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(i){this.attachment!=i&&((!(i instanceof st)||!(this.attachment instanceof st)||i.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=i,this.sequenceIndex=-1);}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null;}},ar=class{data;bones;target;mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;temp=new it;active=false;constructor(i,e){if(!i)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=i,this.bones=new Array;for(let n=0;n<i.bones.length;n++){let r=e.findBone(i.bones[n].name);if(!r)throw new Error(`Couldn't find bone ${i.bones[n].name}.`);this.bones.push(r);}let s=e.findBone(i.target.name);if(!s)throw new Error(`Couldn't find target bone ${i.target.name}.`);this.target=s,this.mixRotate=i.mixRotate,this.mixX=i.mixX,this.mixY=i.mixY,this.mixScaleX=i.mixScaleX,this.mixScaleY=i.mixScaleY,this.mixShearY=i.mixShearY;}isActive(){return this.active}setToSetupPose(){let i=this.data;this.mixRotate=i.mixRotate,this.mixX=i.mixX,this.mixY=i.mixY,this.mixScaleX=i.mixScaleX,this.mixScaleY=i.mixScaleY,this.mixShearY=i.mixShearY;}update(i){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld());}applyAbsoluteWorld(){let i=this.mixRotate,e=this.mixX,s=this.mixY,n=this.mixScaleX,r=this.mixScaleY,f=this.mixShearY,c=e!=0||s!=0,d=this.target,p=d.a,x=d.b,w=d.c,C=d.d,F=p*C-x*w>0?T.degRad:-0.01745329277777778,B=this.data.offsetRotation*F,X=this.data.offsetShearY*F,z=this.bones;for(let W=0,Z=z.length;W<Z;W++){let J=z[W];if(i!=0){let j=J.a,Q=J.b,tt=J.c,nt=J.d,pt=Math.atan2(w,p)-Math.atan2(tt,j)+B;pt>T.PI?pt-=T.PI2:pt<-3.1415927&&(pt+=T.PI2),pt*=i;let mt=Math.cos(pt),gt=Math.sin(pt);J.a=mt*j-gt*tt,J.b=mt*Q-gt*nt,J.c=gt*j+mt*tt,J.d=gt*Q+mt*nt;}if(c){let j=this.temp;d.localToWorld(j.set(this.data.offsetX,this.data.offsetY)),J.worldX+=(j.x-J.worldX)*e,J.worldY+=(j.y-J.worldY)*s;}if(n!=0){let j=Math.sqrt(J.a*J.a+J.c*J.c);j!=0&&(j=(j+(Math.sqrt(p*p+w*w)-j+this.data.offsetScaleX)*n)/j),J.a*=j,J.c*=j;}if(r!=0){let j=Math.sqrt(J.b*J.b+J.d*J.d);j!=0&&(j=(j+(Math.sqrt(x*x+C*C)-j+this.data.offsetScaleY)*r)/j),J.b*=j,J.d*=j;}if(f>0){let j=J.b,Q=J.d,tt=Math.atan2(Q,j),nt=Math.atan2(C,x)-Math.atan2(w,p)-(tt-Math.atan2(J.c,J.a));nt>T.PI?nt-=T.PI2:nt<-3.1415927&&(nt+=T.PI2),nt=tt+(nt+X)*f;let pt=Math.sqrt(j*j+Q*Q);J.b=Math.cos(nt)*pt,J.d=Math.sin(nt)*pt;}J.updateAppliedTransform();}}applyRelativeWorld(){let i=this.mixRotate,e=this.mixX,s=this.mixY,n=this.mixScaleX,r=this.mixScaleY,f=this.mixShearY,c=e!=0||s!=0,d=this.target,p=d.a,x=d.b,w=d.c,C=d.d,F=p*C-x*w>0?T.degRad:-0.01745329277777778,B=this.data.offsetRotation*F,X=this.data.offsetShearY*F,z=this.bones;for(let W=0,Z=z.length;W<Z;W++){let J=z[W];if(i!=0){let j=J.a,Q=J.b,tt=J.c,nt=J.d,pt=Math.atan2(w,p)+B;pt>T.PI?pt-=T.PI2:pt<-3.1415927&&(pt+=T.PI2),pt*=i;let mt=Math.cos(pt),gt=Math.sin(pt);J.a=mt*j-gt*tt,J.b=mt*Q-gt*nt,J.c=gt*j+mt*tt,J.d=gt*Q+mt*nt;}if(c){let j=this.temp;d.localToWorld(j.set(this.data.offsetX,this.data.offsetY)),J.worldX+=j.x*e,J.worldY+=j.y*s;}if(n!=0){let j=(Math.sqrt(p*p+w*w)-1+this.data.offsetScaleX)*n+1;J.a*=j,J.c*=j;}if(r!=0){let j=(Math.sqrt(x*x+C*C)-1+this.data.offsetScaleY)*r+1;J.b*=j,J.d*=j;}if(f>0){let j=Math.atan2(C,x)-Math.atan2(w,p);j>T.PI?j-=T.PI2:j<-3.1415927&&(j+=T.PI2);let Q=J.b,tt=J.d;j=Math.atan2(tt,Q)+(j-T.PI/2+X)*f;let nt=Math.sqrt(Q*Q+tt*tt);J.b=Math.cos(j)*nt,J.d=Math.sin(j)*nt;}J.updateAppliedTransform();}}applyAbsoluteLocal(){let i=this.mixRotate,e=this.mixX,s=this.mixY,n=this.mixScaleX,r=this.mixScaleY,f=this.mixShearY,c=this.target,d=this.bones;for(let p=0,x=d.length;p<x;p++){let w=d[p],C=w.arotation;i!=0&&(C+=(c.arotation-C+this.data.offsetRotation)*i);let F=w.ax,B=w.ay;F+=(c.ax-F+this.data.offsetX)*e,B+=(c.ay-B+this.data.offsetY)*s;let X=w.ascaleX,z=w.ascaleY;n!=0&&X!=0&&(X=(X+(c.ascaleX-X+this.data.offsetScaleX)*n)/X),r!=0&&z!=0&&(z=(z+(c.ascaleY-z+this.data.offsetScaleY)*r)/z);let W=w.ashearY;f!=0&&(W+=(c.ashearY-W+this.data.offsetShearY)*f),w.updateWorldTransformWith(F,B,C,X,z,w.ashearX,W);}}applyRelativeLocal(){let i=this.mixRotate,e=this.mixX,s=this.mixY,n=this.mixScaleX,r=this.mixScaleY,f=this.mixShearY,c=this.target,d=this.bones;for(let p=0,x=d.length;p<x;p++){let w=d[p],C=w.arotation+(c.arotation+this.data.offsetRotation)*i,F=w.ax+(c.ax+this.data.offsetX)*e,B=w.ay+(c.ay+this.data.offsetY)*s,X=w.ascaleX*((c.ascaleX-1+this.data.offsetScaleX)*n+1),z=w.ascaleY*((c.ascaleY-1+this.data.offsetScaleY)*r+1),W=w.ashearY+(c.ashearY+this.data.offsetShearY)*f;w.updateWorldTransformWith(F,B,C,X,z,w.ashearX,W);}}},Ai=class Or{static quadTriangles=[0,1,2,2,3,0];static yDown=false;data;bones;slots;drawOrder;ikConstraints;transformConstraints;pathConstraints;physicsConstraints;_updateCache=new Array;skin=null;color;scaleX=1;_scaleY=1;get scaleY(){return Or.yDown?-this._scaleY:this._scaleY}set scaleY(e){this._scaleY=e;}x=0;y=0;time=0;constructor(e){if(!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(let s=0;s<e.bones.length;s++){let n=e.bones[s],r;if(!n.parent)r=new He(n,this,null);else {let f=this.bones[n.parent.index];r=new He(n,this,f),f.children.push(r);}this.bones.push(r);}this.slots=new Array,this.drawOrder=new Array;for(let s=0;s<e.slots.length;s++){let n=e.slots[s],r=this.bones[n.boneData.index],f=new nr(n,r);this.slots.push(f),this.drawOrder.push(f);}this.ikConstraints=new Array;for(let s=0;s<e.ikConstraints.length;s++){let n=e.ikConstraints[s];this.ikConstraints.push(new vs(n,this));}this.transformConstraints=new Array;for(let s=0;s<e.transformConstraints.length;s++){let n=e.transformConstraints[s];this.transformConstraints.push(new ar(n,this));}this.pathConstraints=new Array;for(let s=0;s<e.pathConstraints.length;s++){let n=e.pathConstraints[s];this.pathConstraints.push(new sr(n,this));}this.physicsConstraints=new Array;for(let s=0;s<e.physicsConstraints.length;s++){let n=e.physicsConstraints[s];this.physicsConstraints.push(new rr(n,this));}this.color=new O(1,1,1,1),this.updateCache();}updateCache(){let e=this._updateCache;e.length=0;let s=this.bones;for(let F=0,B=s.length;F<B;F++){let X=s[F];X.sorted=X.data.skinRequired,X.active=!X.sorted;}if(this.skin){let F=this.skin.bones;for(let B=0,X=this.skin.bones.length;B<X;B++){let z=this.bones[F[B].index];do z.sorted=false,z.active=true,z=z.parent;while(z)}}let n=this.ikConstraints,r=this.transformConstraints,f=this.pathConstraints,c=this.physicsConstraints,d=n.length,p=r.length,x=f.length,w=this.physicsConstraints.length,C=d+p+x+w;t:for(let F=0;F<C;F++){for(let B=0;B<d;B++){let X=n[B];if(X.data.order==F){this.sortIkConstraint(X);continue t}}for(let B=0;B<p;B++){let X=r[B];if(X.data.order==F){this.sortTransformConstraint(X);continue t}}for(let B=0;B<x;B++){let X=f[B];if(X.data.order==F){this.sortPathConstraint(X);continue t}}for(let B=0;B<w;B++){let X=c[B];if(X.data.order==F){this.sortPhysicsConstraint(X);continue t}}}for(let F=0,B=s.length;F<B;F++)this.sortBone(s[F]);}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&D.contains(this.skin.constraints,e.data,true)),!e.active)return;let s=e.target;this.sortBone(s);let n=e.bones,r=n[0];if(this.sortBone(r),n.length==1)this._updateCache.push(e),this.sortReset(r.children);else {let f=n[n.length-1];this.sortBone(f),this._updateCache.push(e),this.sortReset(r.children),f.sorted=true;}}sortPathConstraint(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&D.contains(this.skin.constraints,e.data,true)),!e.active)return;let s=e.target,n=s.data.index,r=s.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(let p=0,x=this.data.skins.length;p<x;p++)this.sortPathConstraintAttachment(this.data.skins[p],n,r);let f=s.getAttachment();f instanceof Pi&&this.sortPathConstraintAttachmentWith(f,r);let c=e.bones,d=c.length;for(let p=0;p<d;p++)this.sortBone(c[p]);this._updateCache.push(e);for(let p=0;p<d;p++)this.sortReset(c[p].children);for(let p=0;p<d;p++)c[p].sorted=true;}sortTransformConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&D.contains(this.skin.constraints,e.data,true)),!e.active)return;this.sortBone(e.target);let s=e.bones,n=s.length;if(e.data.local)for(let r=0;r<n;r++){let f=s[r];this.sortBone(f.parent),this.sortBone(f);}else for(let r=0;r<n;r++)this.sortBone(s[r]);this._updateCache.push(e);for(let r=0;r<n;r++)this.sortReset(s[r].children);for(let r=0;r<n;r++)s[r].sorted=true;}sortPathConstraintAttachment(e,s,n){let r=e.attachments[s];if(r)for(let f in r)this.sortPathConstraintAttachmentWith(r[f],n);}sortPathConstraintAttachmentWith(e,s){if(!(e instanceof Pi))return;let n=e.bones;if(!n)this.sortBone(s);else {let r=this.bones;for(let f=0,c=n.length;f<c;){let d=n[f++];for(d+=f;f<d;)this.sortBone(r[n[f++]]);}}}sortPhysicsConstraint(e){let s=e.bone;e.active=s.active&&(!e.data.skinRequired||this.skin!=null&&D.contains(this.skin.constraints,e.data,true)),e.active&&(this.sortBone(s),this._updateCache.push(e),this.sortReset(s.children),s.sorted=true);}sortBone(e){if(!e||e.sorted)return;let s=e.parent;s&&this.sortBone(s),e.sorted=true,this._updateCache.push(e);}sortReset(e){for(let s=0,n=e.length;s<n;s++){let r=e[s];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=false);}}updateWorldTransform(e){if(e==null)throw new Error("physics is undefined");let s=this.bones;for(let r=0,f=s.length;r<f;r++){let c=s[r];c.ax=c.x,c.ay=c.y,c.arotation=c.rotation,c.ascaleX=c.scaleX,c.ascaleY=c.scaleY,c.ashearX=c.shearX,c.ashearY=c.shearY;}let n=this._updateCache;for(let r=0,f=n.length;r<f;r++)n[r].update(e);}updateWorldTransformWith(e,s){if(!s)throw new Error("parent cannot be null.");let n=this.bones;for(let W=1,Z=n.length;W<Z;W++){let J=n[W];J.ax=J.x,J.ay=J.y,J.arotation=J.rotation,J.ascaleX=J.scaleX,J.ascaleY=J.scaleY,J.ashearX=J.shearX,J.ashearY=J.shearY;}let r=this.getRootBone();if(!r)throw new Error("Root bone must not be null.");let f=s.a,c=s.b,d=s.c,p=s.d;r.worldX=f*this.x+c*this.y+s.worldX,r.worldY=d*this.x+p*this.y+s.worldY;let x=(r.rotation+r.shearX)*T.degRad,w=(r.rotation+90+r.shearY)*T.degRad,C=Math.cos(x)*r.scaleX,F=Math.cos(w)*r.scaleY,B=Math.sin(x)*r.scaleX,X=Math.sin(w)*r.scaleY;r.a=(f*C+c*B)*this.scaleX,r.b=(f*F+c*X)*this.scaleX,r.c=(d*C+p*B)*this.scaleY,r.d=(d*F+p*X)*this.scaleY;let z=this._updateCache;for(let W=0,Z=z.length;W<Z;W++){let J=z[W];J!=r&&J.update(e);}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose();}setBonesToSetupPose(){for(let e of this.bones)e.setToSetupPose();for(let e of this.ikConstraints)e.setToSetupPose();for(let e of this.transformConstraints)e.setToSetupPose();for(let e of this.pathConstraints)e.setToSetupPose();for(let e of this.physicsConstraints)e.setToSetupPose();}setSlotsToSetupPose(){let e=this.slots;D.arrayCopy(e,0,this.drawOrder,0,e.length);for(let s=0,n=e.length;s<n;s++)e[s].setToSetupPose();}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(e){if(!e)throw new Error("boneName cannot be null.");let s=this.bones;for(let n=0,r=s.length;n<r;n++){let f=s[n];if(f.data.name==e)return f}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let s=this.slots;for(let n=0,r=s.length;n<r;n++){let f=s[n];if(f.data.name==e)return f}return null}setSkinByName(e){let s=this.data.findSkin(e);if(!s)throw new Error("Skin not found: "+e);this.setSkin(s);}setSkin(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else {let s=this.slots;for(let n=0,r=s.length;n<r;n++){let f=s[n],c=f.data.attachmentName;if(c){let d=e.getAttachment(n,c);d&&f.setAttachment(d);}}}this.skin=e,this.updateCache();}}getAttachmentByName(e,s){let n=this.data.findSlot(e);if(!n)throw new Error(`Can't find slot with name ${e}`);return this.getAttachment(n.index,s)}getAttachment(e,s){if(!s)throw new Error("attachmentName cannot be null.");if(this.skin){let n=this.skin.getAttachment(e,s);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,s):null}setAttachment(e,s){if(!e)throw new Error("slotName cannot be null.");let n=this.slots;for(let r=0,f=n.length;r<f;r++){let c=n[r];if(c.data.name==e){let d=null;if(s&&(d=this.getAttachment(r,s),!d))throw new Error("Attachment not found: "+s+", for slot: "+e);c.setAttachment(d);return}}throw new Error("Slot not found: "+e)}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(s=>s.data.name==e)??null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(s=>s.data.name==e)??null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(s=>s.data.name==e)??null}findPhysicsConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(s=>s.data.name==e)??null}getBoundsRect(e){let s=new it,n=new it;return this.getBounds(s,n,void 0,e),{x:s.x,y:s.y,width:n.x,height:n.y}}getBounds(e,s,n=new Array(2),r=null){if(!e)throw new Error("offset cannot be null.");if(!s)throw new Error("size cannot be null.");let f=this.drawOrder,c=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,x=Number.NEGATIVE_INFINITY;for(let w=0,C=f.length;w<C;w++){let F=f[w];if(!F.bone.active)continue;let B=0,X=null,z=null,W=F.getAttachment();if(W instanceof Ni)B=8,X=D.setArraySize(n,B,0),W.computeWorldVertices(F,X,0,2),z=Or.quadTriangles;else if(W instanceof Xi){let Z=W;B=Z.worldVerticesLength,X=D.setArraySize(n,B,0),Z.computeWorldVertices(F,0,B,X,0,2),z=Z.triangles;}else if(W instanceof ui&&r!=null){r.clipStart(F,W);continue}if(X&&z){r!=null&&r.isClipping()&&(r.clipTriangles(X,z,z.length),X=r.clippedVertices,B=r.clippedVertices.length);for(let Z=0,J=X.length;Z<J;Z+=2){let j=X[Z],Q=X[Z+1];c=Math.min(c,j),d=Math.min(d,Q),p=Math.max(p,j),x=Math.max(x,Q);}}r==null||r.clipEndWithSlot(F);}r==null||r.clipEnd(),e.set(c,d),s.set(p-c,x-d);}update(e){this.time+=e;}physicsTranslate(e,s){let n=this.physicsConstraints;for(let r=0,f=n.length;r<f;r++)n[r].translate(e,s);}physicsRotate(e,s,n){let r=this.physicsConstraints;for(let f=0,c=r.length;f<c;f++)r[f].rotate(e,s,n);}},Si=(i=>(i[i.none=0]="none",i[i.reset=1]="reset",i[i.update=2]="update",i[i.pose=3]="pose",i))(Si||{}),xs=class extends fi{_bone=null;set bone(i){this._bone=i;}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}x=0;y=0;rotate=0;scaleX=0;shearX=0;limit=0;step=0;inertia=0;strength=0;damping=0;massInverse=0;wind=0;gravity=0;mix=0;inertiaGlobal=false;strengthGlobal=false;dampingGlobal=false;massGlobal=false;windGlobal=false;gravityGlobal=false;mixGlobal=false;constructor(i){super(i,0,false);}},Ce=class{name=null;bones=new Array;slots=new Array;skins=new Array;defaultSkin=null;events=new Array;animations=new Array;ikConstraints=new Array;transformConstraints=new Array;pathConstraints=new Array;physicsConstraints=new Array;x=0;y=0;width=0;height=0;referenceScale=100;version=null;hash=null;fps=0;imagesPath=null;audioPath=null;findBone(i){if(!i)throw new Error("boneName cannot be null.");let e=this.bones;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findSlot(i){if(!i)throw new Error("slotName cannot be null.");let e=this.slots;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findSkin(i){if(!i)throw new Error("skinName cannot be null.");let e=this.skins;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findEvent(i){if(!i)throw new Error("eventDataName cannot be null.");let e=this.events;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findAnimation(i){if(!i)throw new Error("animationName cannot be null.");let e=this.animations;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findIkConstraint(i){if(!i)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findTransformConstraint(i){if(!i)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findPathConstraint(i){if(!i)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findPhysicsConstraint(i){if(!i)throw new Error("constraintName cannot be null.");let e=this.physicsConstraints;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}},Ns=class{constructor(i=0,e,s){this.slotIndex=i,this.name=e,this.attachment=s;}},Ms=class{name;attachments=new Array;bones=Array();constraints=new Array;color=new O(.99607843,.61960787,.30980393,1);constructor(i){if(!i)throw new Error("name cannot be null.");this.name=i;}setAttachment(i,e,s){if(!s)throw new Error("attachment cannot be null.");let n=this.attachments;i>=n.length&&(n.length=i+1),n[i]||(n[i]={}),n[i][e]=s;}addSkin(i){for(let n=0;n<i.bones.length;n++){let r=i.bones[n],f=false;for(let c=0;c<this.bones.length;c++)if(this.bones[c]==r){f=true;break}f||this.bones.push(r);}for(let n=0;n<i.constraints.length;n++){let r=i.constraints[n],f=false;for(let c=0;c<this.constraints.length;c++)if(this.constraints[c]==r){f=true;break}f||this.constraints.push(r);}let e=i.getAttachments();for(let n=0;n<e.length;n++){var s=e[n];this.setAttachment(s.slotIndex,s.name,s.attachment);}}copySkin(i){for(let n=0;n<i.bones.length;n++){let r=i.bones[n],f=false;for(let c=0;c<this.bones.length;c++)if(this.bones[c]==r){f=true;break}f||this.bones.push(r);}for(let n=0;n<i.constraints.length;n++){let r=i.constraints[n],f=false;for(let c=0;c<this.constraints.length;c++)if(this.constraints[c]==r){f=true;break}f||this.constraints.push(r);}let e=i.getAttachments();for(let n=0;n<e.length;n++){var s=e[n];s.attachment&&(s.attachment instanceof Xi?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)));}}getAttachment(i,e){let s=this.attachments[i];return s?s[e]:null}removeAttachment(i,e){let s=this.attachments[i];s&&delete s[e];}getAttachments(){let i=new Array;for(var e=0;e<this.attachments.length;e++){let s=this.attachments[e];if(s)for(let n in s){let r=s[n];r&&i.push(new Ns(e,n,r));}}return i}getAttachmentsForSlot(i,e){let s=this.attachments[i];if(s)for(let n in s){let r=s[n];r&&e.push(new Ns(i,n,r));}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0;}attachAll(i,e){let s=0;for(let n=0;n<i.slots.length;n++){let r=i.slots[n],f=r.getAttachment();if(f&&s<e.attachments.length){let c=e.attachments[s];for(let d in c){let p=c[d];if(f==p){let x=this.getAttachment(s,d);x&&r.setAttachment(x);break}}}s++;}}},Us=class{index=0;name;boneData;color=new O(1,1,1,1);darkColor=null;attachmentName=null;blendMode=0;visible=true;constructor(i,e,s){if(i<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=i,this.name=e,this.boneData=s;}},Ws=(i=>(i[i.Normal=0]="Normal",i[i.Additive=1]="Additive",i[i.Multiply=2]="Multiply",i[i.Screen=3]="Screen",i))(Ws||{}),Gs=class extends fi{bones=new Array;_target=null;set target(i){this._target=i;}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;offsetRotation=0;offsetX=0;offsetY=0;offsetScaleX=0;offsetScaleY=0;offsetShearY=0;relative=false;local=false;constructor(i){super(i,0,false);}},wr=class{scale=1;attachmentLoader;linkedMeshes=new Array;constructor(i){this.attachmentLoader=i;}readSkeletonData(i){let e=this.scale,s=new Ce;s.name="";let n=new or(i),r=n.readInt32(),f=n.readInt32();s.hash=f==0&&r==0?null:f.toString(16)+r.toString(16),s.version=n.readString(),s.x=n.readFloat(),s.y=n.readFloat(),s.width=n.readFloat(),s.height=n.readFloat(),s.referenceScale=n.readFloat()*e;let c=n.readBoolean();c&&(s.fps=n.readFloat(),s.imagesPath=n.readString(),s.audioPath=n.readString());let d=0;d=n.readInt(true);for(let x=0;x<d;x++){let w=n.readString();if(!w)throw new Error("String in string table must not be null.");n.strings.push(w);}d=n.readInt(true);for(let x=0;x<d;x++){let w=n.readString();if(!w)throw new Error("Bone name must not be null.");let C=x==0?null:s.bones[n.readInt(true)],F=new $i(x,w,C);F.rotation=n.readFloat(),F.x=n.readFloat()*e,F.y=n.readFloat()*e,F.scaleX=n.readFloat(),F.scaleY=n.readFloat(),F.shearX=n.readFloat(),F.shearY=n.readFloat(),F.length=n.readFloat()*e,F.inherit=n.readByte(),F.skinRequired=n.readBoolean(),c&&(O.rgba8888ToColor(F.color,n.readInt32()),F.icon=n.readString()??void 0,F.visible=n.readBoolean()),s.bones.push(F);}d=n.readInt(true);for(let x=0;x<d;x++){let w=n.readString();if(!w)throw new Error("Slot name must not be null.");let C=s.bones[n.readInt(true)],F=new Us(x,w,C);O.rgba8888ToColor(F.color,n.readInt32());let B=n.readInt32();B!=-1&&O.rgb888ToColor(F.darkColor=new O,B),F.attachmentName=n.readStringRef(),F.blendMode=n.readInt(true),c&&(F.visible=n.readBoolean()),s.slots.push(F);}d=n.readInt(true);for(let x=0,w;x<d;x++){let C=n.readString();if(!C)throw new Error("IK constraint data name must not be null.");let F=new ts(C);F.order=n.readInt(true),w=n.readInt(true);for(let X=0;X<w;X++)F.bones.push(s.bones[n.readInt(true)]);F.target=s.bones[n.readInt(true)];let B=n.readByte();F.skinRequired=(B&1)!=0,F.bendDirection=(B&2)!=0?1:-1,F.compress=(B&4)!=0,F.stretch=(B&8)!=0,F.uniform=(B&16)!=0,(B&32)!=0&&(F.mix=(B&64)!=0?n.readFloat():1),(B&128)!=0&&(F.softness=n.readFloat()*e),s.ikConstraints.push(F);}d=n.readInt(true);for(let x=0,w;x<d;x++){let C=n.readString();if(!C)throw new Error("Transform constraint data name must not be null.");let F=new Gs(C);F.order=n.readInt(true),w=n.readInt(true);for(let X=0;X<w;X++)F.bones.push(s.bones[n.readInt(true)]);F.target=s.bones[n.readInt(true)];let B=n.readByte();F.skinRequired=(B&1)!=0,F.local=(B&2)!=0,F.relative=(B&4)!=0,(B&8)!=0&&(F.offsetRotation=n.readFloat()),(B&16)!=0&&(F.offsetX=n.readFloat()*e),(B&32)!=0&&(F.offsetY=n.readFloat()*e),(B&64)!=0&&(F.offsetScaleX=n.readFloat()),(B&128)!=0&&(F.offsetScaleY=n.readFloat()),B=n.readByte(),(B&1)!=0&&(F.offsetShearY=n.readFloat()),(B&2)!=0&&(F.mixRotate=n.readFloat()),(B&4)!=0&&(F.mixX=n.readFloat()),(B&8)!=0&&(F.mixY=n.readFloat()),(B&16)!=0&&(F.mixScaleX=n.readFloat()),(B&32)!=0&&(F.mixScaleY=n.readFloat()),(B&64)!=0&&(F.mixShearY=n.readFloat()),s.transformConstraints.push(F);}d=n.readInt(true);for(let x=0,w;x<d;x++){let C=n.readString();if(!C)throw new Error("Path constraint data name must not be null.");let F=new Ui(C);F.order=n.readInt(true),F.skinRequired=n.readBoolean(),w=n.readInt(true);for(let X=0;X<w;X++)F.bones.push(s.bones[n.readInt(true)]);F.target=s.slots[n.readInt(true)];let B=n.readByte();F.positionMode=B&1,F.spacingMode=B>>1&3,F.rotateMode=B>>3&3,(B&128)!=0&&(F.offsetRotation=n.readFloat()),F.position=n.readFloat(),F.positionMode==0&&(F.position*=e),F.spacing=n.readFloat(),(F.spacingMode==0||F.spacingMode==1)&&(F.spacing*=e),F.mixRotate=n.readFloat(),F.mixX=n.readFloat(),F.mixY=n.readFloat(),s.pathConstraints.push(F);}d=n.readInt(true);for(let x=0,w;x<d;x++){let C=n.readString();if(!C)throw new Error("Physics constraint data name must not be null.");let F=new xs(C);F.order=n.readInt(true),F.bone=s.bones[n.readInt(true)];let B=n.readByte();F.skinRequired=(B&1)!=0,(B&2)!=0&&(F.x=n.readFloat()),(B&4)!=0&&(F.y=n.readFloat()),(B&8)!=0&&(F.rotate=n.readFloat()),(B&16)!=0&&(F.scaleX=n.readFloat()),(B&32)!=0&&(F.shearX=n.readFloat()),F.limit=((B&64)!=0?n.readFloat():5e3)*e,F.step=1/n.readUnsignedByte(),F.inertia=n.readFloat(),F.strength=n.readFloat(),F.damping=n.readFloat(),F.massInverse=(B&128)!=0?n.readFloat():1,F.wind=n.readFloat(),F.gravity=n.readFloat(),B=n.readByte(),(B&1)!=0&&(F.inertiaGlobal=true),(B&2)!=0&&(F.strengthGlobal=true),(B&4)!=0&&(F.dampingGlobal=true),(B&8)!=0&&(F.massGlobal=true),(B&16)!=0&&(F.windGlobal=true),(B&32)!=0&&(F.gravityGlobal=true),(B&64)!=0&&(F.mixGlobal=true),F.mix=(B&128)!=0?n.readFloat():1,s.physicsConstraints.push(F);}let p=this.readSkin(n,s,true,c);p&&(s.defaultSkin=p,s.skins.push(p));{let x=s.skins.length;for(D.setArraySize(s.skins,d=x+n.readInt(true));x<d;x++){let w=this.readSkin(n,s,false,c);if(!w)throw new Error("readSkin() should not have returned null.");s.skins[x]=w;}}d=this.linkedMeshes.length;for(let x=0;x<d;x++){let w=this.linkedMeshes[x],C=s.skins[w.skinIndex];if(!w.parent)throw new Error("Linked mesh parent must not be null");let F=C.getAttachment(w.slotIndex,w.parent);if(!F)throw new Error(`Parent mesh not found: ${w.parent}`);w.mesh.timelineAttachment=w.inheritTimeline?F:w.mesh,w.mesh.setParentMesh(F),w.mesh.region!=null&&w.mesh.updateRegion();}this.linkedMeshes.length=0,d=n.readInt(true);for(let x=0;x<d;x++){let w=n.readString();if(!w)throw new Error("Event data name must not be null");let C=new Os(w);C.intValue=n.readInt(false),C.floatValue=n.readFloat(),C.stringValue=n.readString(),C.audioPath=n.readString(),C.audioPath&&(C.volume=n.readFloat(),C.balance=n.readFloat()),s.events.push(C);}d=n.readInt(true);for(let x=0;x<d;x++){let w=n.readString();if(!w)throw new Error("Animatio name must not be null.");s.animations.push(this.readAnimation(n,w,s));}return s}readSkin(i,e,s,n){let r=null,f=0;if(s){if(f=i.readInt(true),f==0)return null;r=new Ms("default");}else {let c=i.readString();if(!c)throw new Error("Skin name must not be null.");r=new Ms(c),n&&O.rgba8888ToColor(r.color,i.readInt32()),r.bones.length=i.readInt(true);for(let d=0,p=r.bones.length;d<p;d++)r.bones[d]=e.bones[i.readInt(true)];for(let d=0,p=i.readInt(true);d<p;d++)r.constraints.push(e.ikConstraints[i.readInt(true)]);for(let d=0,p=i.readInt(true);d<p;d++)r.constraints.push(e.transformConstraints[i.readInt(true)]);for(let d=0,p=i.readInt(true);d<p;d++)r.constraints.push(e.pathConstraints[i.readInt(true)]);for(let d=0,p=i.readInt(true);d<p;d++)r.constraints.push(e.physicsConstraints[i.readInt(true)]);f=i.readInt(true);}for(let c=0;c<f;c++){let d=i.readInt(true);for(let p=0,x=i.readInt(true);p<x;p++){let w=i.readStringRef();if(!w)throw new Error("Attachment name must not be null");let C=this.readAttachment(i,e,r,d,w,n);C&&r.setAttachment(d,w,C);}}return r}readAttachment(i,e,s,n,r,f){let c=this.scale,d=i.readByte(),p=(d&8)!=0?i.readStringRef():r;if(!p)throw new Error("Attachment name must not be null");switch(d&7){case 0:{let x=(d&16)!=0?i.readStringRef():null,w=(d&32)!=0?i.readInt32():4294967295,C=(d&64)!=0?this.readSequence(i):null,F=(d&128)!=0?i.readFloat():0,B=i.readFloat(),X=i.readFloat(),z=i.readFloat(),W=i.readFloat(),Z=i.readFloat(),J=i.readFloat();x||(x=p);let j=this.attachmentLoader.newRegionAttachment(s,p,x,C);return j?(j.path=x,j.x=B*c,j.y=X*c,j.scaleX=z,j.scaleY=W,j.rotation=F,j.width=Z*c,j.height=J*c,O.rgba8888ToColor(j.color,w),j.sequence=C,C==null&&j.updateRegion(),j):null}case 1:{let x=this.readVertices(i,(d&16)!=0),w=f?i.readInt32():0,C=this.attachmentLoader.newBoundingBoxAttachment(s,p);return C?(C.worldVerticesLength=x.length,C.vertices=x.vertices,C.bones=x.bones,f&&O.rgba8888ToColor(C.color,w),C):null}case 2:{let x=(d&16)!=0?i.readStringRef():p,w=(d&32)!=0?i.readInt32():4294967295,C=(d&64)!=0?this.readSequence(i):null,F=i.readInt(true),B=this.readVertices(i,(d&128)!=0),X=this.readFloatArray(i,B.length,1),z=this.readShortArray(i,(B.length-F-2)*3),W=[],Z=0,J=0;f&&(W=this.readShortArray(i,i.readInt(true)),Z=i.readFloat(),J=i.readFloat()),x||(x=p);let j=this.attachmentLoader.newMeshAttachment(s,p,x,C);return j?(j.path=x,O.rgba8888ToColor(j.color,w),j.bones=B.bones,j.vertices=B.vertices,j.worldVerticesLength=B.length,j.triangles=z,j.regionUVs=X,C==null&&j.updateRegion(),j.hullLength=F<<1,j.sequence=C,f&&(j.edges=W,j.width=Z*c,j.height=J*c),j):null}case 3:{let x=(d&16)!=0?i.readStringRef():p;if(x==null)throw new Error("Path of linked mesh must not be null");let w=(d&32)!=0?i.readInt32():4294967295,C=(d&64)!=0?this.readSequence(i):null,F=(d&128)!=0,B=i.readInt(true),X=i.readStringRef(),z=0,W=0;f&&(z=i.readFloat(),W=i.readFloat());let Z=this.attachmentLoader.newMeshAttachment(s,p,x,C);return Z?(Z.path=x,O.rgba8888ToColor(Z.color,w),Z.sequence=C,f&&(Z.width=z*c,Z.height=W*c),this.linkedMeshes.push(new Ar(Z,B,n,X,F)),Z):null}case 4:{let x=(d&16)!=0,w=(d&32)!=0,C=this.readVertices(i,(d&64)!=0),F=D.newArray(C.length/6,0);for(let z=0,W=F.length;z<W;z++)F[z]=i.readFloat()*c;let B=f?i.readInt32():0,X=this.attachmentLoader.newPathAttachment(s,p);return X?(X.closed=x,X.constantSpeed=w,X.worldVerticesLength=C.length,X.vertices=C.vertices,X.bones=C.bones,X.lengths=F,f&&O.rgba8888ToColor(X.color,B),X):null}case 5:{let x=i.readFloat(),w=i.readFloat(),C=i.readFloat(),F=f?i.readInt32():0,B=this.attachmentLoader.newPointAttachment(s,p);return B?(B.x=w*c,B.y=C*c,B.rotation=x,f&&O.rgba8888ToColor(B.color,F),B):null}case 6:{let x=i.readInt(true),w=this.readVertices(i,(d&16)!=0),C=f?i.readInt32():0,F=this.attachmentLoader.newClippingAttachment(s,p);return F?(F.endSlot=e.slots[x],F.worldVerticesLength=w.length,F.vertices=w.vertices,F.bones=w.bones,f&&O.rgba8888ToColor(F.color,C),F):null}}return null}readSequence(i){let e=new G(i.readInt(true));return e.start=i.readInt(true),e.digits=i.readInt(true),e.setupIndex=i.readInt(true),e}readVertices(i,e){let s=this.scale,n=i.readInt(true),r=new Sr;if(r.length=n<<1,!e)return r.vertices=this.readFloatArray(i,r.length,s),r;let f=new Array,c=new Array;for(let d=0;d<n;d++){let p=i.readInt(true);c.push(p);for(let x=0;x<p;x++)c.push(i.readInt(true)),f.push(i.readFloat()*s),f.push(i.readFloat()*s),f.push(i.readFloat());}return r.vertices=D.toFloatArray(f),r.bones=c,r}readFloatArray(i,e,s){let n=new Array(e);if(s==1)for(let r=0;r<e;r++)n[r]=i.readFloat();else for(let r=0;r<e;r++)n[r]=i.readFloat()*s;return n}readShortArray(i,e){let s=new Array(e);for(let n=0;n<e;n++)s[n]=i.readInt(true);return s}readAnimation(i,e,s){i.readInt(true);let n=new Array,r=this.scale;for(let p=0,x=i.readInt(true);p<x;p++){let w=i.readInt(true);for(let C=0,F=i.readInt(true);C<F;C++){let B=i.readByte(),X=i.readInt(true),z=X-1;switch(B){case ys:{let W=new Ye(X,w);for(let Z=0;Z<X;Z++)W.setFrame(Z,i.readFloat(),i.readStringRef());n.push(W);break}case Fr:{let W=i.readInt(true),Z=new ie(X,W,w),J=i.readFloat(),j=i.readUnsignedByte()/255,Q=i.readUnsignedByte()/255,tt=i.readUnsignedByte()/255,nt=i.readUnsignedByte()/255;for(let pt=0,mt=0;Z.setFrame(pt,J,j,Q,tt,nt),pt!=z;pt++){let gt=i.readFloat(),Ct=i.readUnsignedByte()/255,Ft=i.readUnsignedByte()/255,Vt=i.readUnsignedByte()/255,Ut=i.readUnsignedByte()/255;switch(i.readByte()){case pi:Z.setStepped(pt);break;case Je:Ee(i,Z,mt++,pt,0,J,gt,j,Ct,1),Ee(i,Z,mt++,pt,1,J,gt,Q,Ft,1),Ee(i,Z,mt++,pt,2,J,gt,tt,Vt,1),Ee(i,Z,mt++,pt,3,J,gt,nt,Ut,1);}J=gt,j=Ct,Q=Ft,tt=Vt,nt=Ut;}n.push(Z);break}case Yr:{let W=i.readInt(true),Z=new Kt(X,W,w),J=i.readFloat(),j=i.readUnsignedByte()/255,Q=i.readUnsignedByte()/255,tt=i.readUnsignedByte()/255;for(let nt=0,pt=0;Z.setFrame(nt,J,j,Q,tt),nt!=z;nt++){let mt=i.readFloat(),gt=i.readUnsignedByte()/255,Ct=i.readUnsignedByte()/255,Ft=i.readUnsignedByte()/255;switch(i.readByte()){case pi:Z.setStepped(nt);break;case Je:Ee(i,Z,pt++,nt,0,J,mt,j,gt,1),Ee(i,Z,pt++,nt,1,J,mt,Q,Ct,1),Ee(i,Z,pt++,nt,2,J,mt,tt,Ft,1);}J=mt,j=gt,Q=Ct,tt=Ft;}n.push(Z);break}case bi:{let W=i.readInt(true),Z=new Le(X,W,w),J=i.readFloat(),j=i.readUnsignedByte()/255,Q=i.readUnsignedByte()/255,tt=i.readUnsignedByte()/255,nt=i.readUnsignedByte()/255,pt=i.readUnsignedByte()/255,mt=i.readUnsignedByte()/255,gt=i.readUnsignedByte()/255;for(let Ct=0,Ft=0;Z.setFrame(Ct,J,j,Q,tt,nt,pt,mt,gt),Ct!=z;Ct++){let Vt=i.readFloat(),Ut=i.readUnsignedByte()/255,St=i.readUnsignedByte()/255,It=i.readUnsignedByte()/255,Ht=i.readUnsignedByte()/255,Se=i.readUnsignedByte()/255,ve=i.readUnsignedByte()/255,be=i.readUnsignedByte()/255;switch(i.readByte()){case pi:Z.setStepped(Ct);break;case Je:Ee(i,Z,Ft++,Ct,0,J,Vt,j,Ut,1),Ee(i,Z,Ft++,Ct,1,J,Vt,Q,St,1),Ee(i,Z,Ft++,Ct,2,J,Vt,tt,It,1),Ee(i,Z,Ft++,Ct,3,J,Vt,nt,Ht,1),Ee(i,Z,Ft++,Ct,4,J,Vt,pt,Se,1),Ee(i,Z,Ft++,Ct,5,J,Vt,mt,ve,1),Ee(i,Z,Ft++,Ct,6,J,Vt,gt,be,1);}J=Vt,j=Ut,Q=St,tt=It,nt=Ht,pt=Se,mt=ve,gt=be;}n.push(Z);break}case Zs:{let W=i.readInt(true),Z=new ye(X,W,w),J=i.readFloat(),j=i.readUnsignedByte()/255,Q=i.readUnsignedByte()/255,tt=i.readUnsignedByte()/255,nt=i.readUnsignedByte()/255,pt=i.readUnsignedByte()/255,mt=i.readUnsignedByte()/255;for(let gt=0,Ct=0;Z.setFrame(gt,J,j,Q,tt,nt,pt,mt),gt!=z;gt++){let Ft=i.readFloat(),Vt=i.readUnsignedByte()/255,Ut=i.readUnsignedByte()/255,St=i.readUnsignedByte()/255,It=i.readUnsignedByte()/255,Ht=i.readUnsignedByte()/255,Se=i.readUnsignedByte()/255;switch(i.readByte()){case pi:Z.setStepped(gt);break;case Je:Ee(i,Z,Ct++,gt,0,J,Ft,j,Vt,1),Ee(i,Z,Ct++,gt,1,J,Ft,Q,Ut,1),Ee(i,Z,Ct++,gt,2,J,Ft,tt,St,1),Ee(i,Z,Ct++,gt,3,J,Ft,nt,It,1),Ee(i,Z,Ct++,gt,4,J,Ft,pt,Ht,1),Ee(i,Z,Ct++,gt,5,J,Ft,mt,Se,1);}J=Ft,j=Vt,Q=Ut,tt=St,nt=It,pt=Ht,mt=Se;}n.push(Z);break}case ke:{let W=new Ae(X,i.readInt(true),w),Z=i.readFloat(),J=i.readUnsignedByte()/255;for(let j=0,Q=0;W.setFrame(j,Z,J),j!=z;j++){let tt=i.readFloat(),nt=i.readUnsignedByte()/255;switch(i.readByte()){case pi:W.setStepped(j);break;case Je:Ee(i,W,Q++,j,0,Z,tt,J,nt,1);}Z=tt,J=nt;}n.push(W);}}}}for(let p=0,x=i.readInt(true);p<x;p++){let w=i.readInt(true);for(let C=0,F=i.readInt(true);C<F;C++){let B=i.readByte(),X=i.readInt(true);if(B==li){let W=new Qt(X,w);for(let Z=0;Z<X;Z++)W.setFrame(Z,i.readFloat(),i.readByte());n.push(W);continue}let z=i.readInt(true);switch(B){case br:n.push(ai(i,new xt(X,z,w),1));break;case Tr:n.push(zs(i,new Mt(X,z,w),r));break;case Ir:n.push(ai(i,new Xt(X,z,w),r));break;case Cr:n.push(ai(i,new Dt(X,z,w),r));break;case Er:n.push(zs(i,new Lt(X,z,w),1));break;case Rr:n.push(ai(i,new Bt(X,z,w),1));break;case kr:n.push(ai(i,new Gt(X,z,w),1));break;case mi:n.push(zs(i,new kt(X,z,w),1));break;case gi:n.push(ai(i,new bt(X,z,w),1));break;case hr:n.push(ai(i,new wt(X,z,w),1));}}}for(let p=0,x=i.readInt(true);p<x;p++){let w=i.readInt(true),C=i.readInt(true),F=C-1,B=new Ue(C,i.readInt(true),w),X=i.readByte(),z=i.readFloat(),W=(X&1)!=0?(X&2)!=0?i.readFloat():1:0,Z=(X&4)!=0?i.readFloat()*r:0;for(let J=0,j=0;B.setFrame(J,z,W,Z,(X&8)!=0?1:-1,(X&16)!=0,(X&32)!=0),J!=F;J++){X=i.readByte();let Q=i.readFloat(),tt=(X&1)!=0?(X&2)!=0?i.readFloat():1:0,nt=(X&4)!=0?i.readFloat()*r:0;(X&64)!=0?B.setStepped(J):(X&128)!=0&&(Ee(i,B,j++,J,0,z,Q,W,tt,1),Ee(i,B,j++,J,1,z,Q,Z,nt,r)),z=Q,W=tt,Z=nt;}n.push(B);}for(let p=0,x=i.readInt(true);p<x;p++){let w=i.readInt(true),C=i.readInt(true),F=C-1,B=new _e(C,i.readInt(true),w),X=i.readFloat(),z=i.readFloat(),W=i.readFloat(),Z=i.readFloat(),J=i.readFloat(),j=i.readFloat(),Q=i.readFloat();for(let tt=0,nt=0;B.setFrame(tt,X,z,W,Z,J,j,Q),tt!=F;tt++){let pt=i.readFloat(),mt=i.readFloat(),gt=i.readFloat(),Ct=i.readFloat(),Ft=i.readFloat(),Vt=i.readFloat(),Ut=i.readFloat();switch(i.readByte()){case pi:B.setStepped(tt);break;case Je:Ee(i,B,nt++,tt,0,X,pt,z,mt,1),Ee(i,B,nt++,tt,1,X,pt,W,gt,1),Ee(i,B,nt++,tt,2,X,pt,Z,Ct,1),Ee(i,B,nt++,tt,3,X,pt,J,Ft,1),Ee(i,B,nt++,tt,4,X,pt,j,Vt,1),Ee(i,B,nt++,tt,5,X,pt,Q,Ut,1);}X=pt,z=mt,W=gt,Z=Ct,J=Ft,j=Vt,Q=Ut;}n.push(B);}for(let p=0,x=i.readInt(true);p<x;p++){let w=i.readInt(true),C=s.pathConstraints[w];for(let F=0,B=i.readInt(true);F<B;F++){let X=i.readByte(),z=i.readInt(true),W=i.readInt(true);switch(X){case lr:n.push(ai(i,new We(z,W,w),C.positionMode==0?r:1));break;case cr:n.push(ai(i,new Ze(z,W,w),C.spacingMode==0||C.spacingMode==1?r:1));break;case oi:let Z=new Xe(z,W,w),J=i.readFloat(),j=i.readFloat(),Q=i.readFloat(),tt=i.readFloat();for(let nt=0,pt=0,mt=Z.getFrameCount()-1;Z.setFrame(nt,J,j,Q,tt),nt!=mt;nt++){let gt=i.readFloat(),Ct=i.readFloat(),Ft=i.readFloat(),Vt=i.readFloat();switch(i.readByte()){case pi:Z.setStepped(nt);break;case Je:Ee(i,Z,pt++,nt,0,J,gt,j,Ct,1),Ee(i,Z,pt++,nt,1,J,gt,Q,Ft,1),Ee(i,Z,pt++,nt,2,J,gt,tt,Vt,1);}J=gt,j=Ct,Q=Ft,tt=Vt;}n.push(Z);}}}for(let p=0,x=i.readInt(true);p<x;p++){let w=i.readInt(true)-1;for(let C=0,F=i.readInt(true);C<F;C++){let B=i.readByte(),X=i.readInt(true);if(B==ss){let W=new Hi(X,w);for(let Z=0;Z<X;Z++)W.setFrame(Z,i.readFloat());n.push(W);continue}let z=i.readInt(true);switch(B){case Wi:n.push(ai(i,new De(X,z,w),1));break;case Lr:n.push(ai(i,new xi(X,z,w),1));break;case dr:n.push(ai(i,new ri(X,z,w),1));break;case ws:n.push(ai(i,new hi(X,z,w),1));break;case Xr:n.push(ai(i,new ti(X,z,w),1));break;case As:n.push(ai(i,new ci(X,z,w),1));break;case js:n.push(ai(i,new Mi(X,z,w),1));}}}for(let p=0,x=i.readInt(true);p<x;p++){let w=s.skins[i.readInt(true)];for(let C=0,F=i.readInt(true);C<F;C++){let B=i.readInt(true);for(let X=0,z=i.readInt(true);X<z;X++){let W=i.readStringRef();if(!W)throw new Error("attachmentName must not be null.");let Z=w.getAttachment(B,W),J=i.readByte(),j=i.readInt(true),Q=j-1;switch(J){case Pt:{let tt=Z,nt=tt.bones,pt=tt.vertices,mt=nt?pt.length/3*2:pt.length,gt=i.readInt(true),Ct=new Ve(j,gt,B,tt),Ft=i.readFloat();for(let Vt=0,Ut=0;;Vt++){let St,It=i.readInt(true);if(It==0)St=nt?D.newFloatArray(mt):pt;else {St=D.newFloatArray(mt);let Se=i.readInt(true);if(It+=Se,r==1)for(let ve=Se;ve<It;ve++)St[ve]=i.readFloat();else for(let ve=Se;ve<It;ve++)St[ve]=i.readFloat()*r;if(!nt)for(let ve=0,be=St.length;ve<be;ve++)St[ve]+=pt[ve];}if(Ct.setFrame(Vt,Ft,St),Vt==Q)break;let Ht=i.readFloat();switch(i.readByte()){case pi:Ct.setStepped(Vt);break;case Je:Ee(i,Ct,Ut++,Vt,0,Ft,Ht,0,1,1);}Ft=Ht;}n.push(Ct);break}case Pr:{let tt=new cs(j,B,Z);for(let nt=0;nt<j;nt++){let pt=i.readFloat(),mt=i.readInt32();tt.setFrame(nt,pt,ct[mt&15],mt>>4,i.readFloat());}n.push(tt);break}}}}}let f=i.readInt(true);if(f>0){let p=new ze(f),x=s.slots.length;for(let w=0;w<f;w++){let C=i.readFloat(),F=i.readInt(true),B=D.newArray(x,0);for(let Z=x-1;Z>=0;Z--)B[Z]=-1;let X=D.newArray(x-F,0),z=0,W=0;for(let Z=0;Z<F;Z++){let J=i.readInt(true);for(;z!=J;)X[W++]=z++;B[z+i.readInt(true)]=z++;}for(;z<x;)X[W++]=z++;for(let Z=x-1;Z>=0;Z--)B[Z]==-1&&(B[Z]=X[--W]);p.setFrame(w,C,B);}n.push(p);}let c=i.readInt(true);if(c>0){let p=new qe(c);for(let x=0;x<c;x++){let w=i.readFloat(),C=s.events[i.readInt(true)],F=new ps(w,C);F.intValue=i.readInt(false),F.floatValue=i.readFloat(),F.stringValue=i.readString(),F.stringValue==null&&(F.stringValue=C.stringValue),F.data.audioPath&&(F.volume=i.readFloat(),F.balance=i.readFloat()),p.setFrame(x,F);}n.push(p);}let d=0;for(let p=0,x=n.length;p<x;p++)d=Math.max(d,n[p].getDuration());return new rt(e,n,d)}},or=class{constructor(i,e=new Array,s=0,n=new DataView(i instanceof ArrayBuffer?i:i.buffer)){this.strings=e,this.index=s,this.buffer=n;}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let i=this.buffer.getInt16(this.index);return this.index+=2,i}readInt32(){let i=this.buffer.getInt32(this.index);return this.index+=4,i}readInt(i){let e=this.readByte(),s=e&127;return (e&128)!=0&&(e=this.readByte(),s|=(e&127)<<7,(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<14,(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<21,(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<28)))),i?s:s>>>1^-(s&1)}readStringRef(){let i=this.readInt(true);return i==0?null:this.strings[i-1]}readString(){let i=this.readInt(true);switch(i){case 0:return null;case 1:return ""}i--;let e="";for(let n=0;n<i;){let r=this.readUnsignedByte();switch(r>>4){case 12:case 13:e+=String.fromCharCode((r&31)<<6|this.readByte()&63),n+=2;break;case 14:e+=String.fromCharCode((r&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),n+=3;break;default:e+=String.fromCharCode(r),n++;}}return e}readFloat(){let i=this.buffer.getFloat32(this.index);return this.index+=4,i}readBoolean(){return this.readByte()!=0}},Ar=class{parent;skinIndex;slotIndex;mesh;inheritTimeline;constructor(i,e,s,n,r){this.mesh=i,this.skinIndex=e,this.slotIndex=s,this.parent=n,this.inheritTimeline=r;}},Sr=class{constructor(i=null,e=null,s=0){this.bones=i,this.vertices=e,this.length=s;}};function ai(i,e,s){let n=i.readFloat(),r=i.readFloat()*s;for(let f=0,c=0,d=e.getFrameCount()-1;e.setFrame(f,n,r),f!=d;f++){let p=i.readFloat(),x=i.readFloat()*s;switch(i.readByte()){case pi:e.setStepped(f);break;case Je:Ee(i,e,c++,f,0,n,p,r,x,s);}n=p,r=x;}return e}function zs(i,e,s){let n=i.readFloat(),r=i.readFloat()*s,f=i.readFloat()*s;for(let c=0,d=0,p=e.getFrameCount()-1;e.setFrame(c,n,r,f),c!=p;c++){let x=i.readFloat(),w=i.readFloat()*s,C=i.readFloat()*s;switch(i.readByte()){case pi:e.setStepped(c);break;case Je:Ee(i,e,d++,c,0,n,x,r,w,s),Ee(i,e,d++,c,1,n,x,f,C,s);}n=x,r=w,f=C;}return e}function Ee(i,e,s,n,r,f,c,d,p,x){e.setBezier(s,n,r,f,d,i.readFloat(),i.readFloat()*x,i.readFloat(),i.readFloat()*x,c,p);}var br=0,Tr=1,Ir=2,Cr=3,Er=4,Rr=5,kr=6,mi=7,gi=8,hr=9,li=10,ys=0,Fr=1,Yr=2,bi=3,Zs=4,ke=5,Pt=0,Pr=1,lr=0,cr=1,oi=2,Wi=0,Lr=1,dr=2,ws=4,Xr=5,As=6,js=7,ss=8,pi=1,Je=2,ae=class{minX=0;minY=0;maxX=0;maxY=0;boundingBoxes=new Array;polygons=new Array;polygonPool=new $(()=>D.newFloatArray(16));update(i,e){if(!i)throw new Error("skeleton cannot be null.");let s=this.boundingBoxes,n=this.polygons,r=this.polygonPool,f=i.slots,c=f.length;s.length=0,r.freeAll(n),n.length=0;for(let d=0;d<c;d++){let p=f[d];if(!p.bone.active)continue;let x=p.getAttachment();if(x instanceof yi){let w=x;s.push(w);let C=r.obtain();C.length!=w.worldVerticesLength&&(C=D.newFloatArray(w.worldVerticesLength)),n.push(C),w.computeWorldVertices(p,0,w.worldVerticesLength,C,0,2);}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY);}aabbCompute(){let i=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons;for(let f=0,c=r.length;f<c;f++){let d=r[f],p=d;for(let x=0,w=d.length;x<w;x+=2){let C=p[x],F=p[x+1];i=Math.min(i,C),e=Math.min(e,F),s=Math.max(s,C),n=Math.max(n,F);}}this.minX=i,this.minY=e,this.maxX=s,this.maxY=n;}aabbContainsPoint(i,e){return i>=this.minX&&i<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(i,e,s,n){let r=this.minX,f=this.minY,c=this.maxX,d=this.maxY;if(i<=r&&s<=r||e<=f&&n<=f||i>=c&&s>=c||e>=d&&n>=d)return  false;let p=(n-e)/(s-i),x=p*(r-i)+e;if(x>f&&x<d||(x=p*(c-i)+e,x>f&&x<d))return  true;let w=(f-e)/p+i;return w>r&&w<c||(w=(d-e)/p+i,w>r&&w<c)}aabbIntersectsSkeleton(i){return this.minX<i.maxX&&this.maxX>i.minX&&this.minY<i.maxY&&this.maxY>i.minY}containsPoint(i,e){let s=this.polygons;for(let n=0,r=s.length;n<r;n++)if(this.containsPointPolygon(s[n],i,e))return this.boundingBoxes[n];return null}containsPointPolygon(i,e,s){let n=i,r=i.length,f=r-2,c=false;for(let d=0;d<r;d+=2){let p=n[d+1],x=n[f+1];if(p<s&&x>=s||x<s&&p>=s){let w=n[d];w+(s-p)/(x-p)*(n[f]-w)<e&&(c=!c);}f=d;}return c}intersectsSegment(i,e,s,n){let r=this.polygons;for(let f=0,c=r.length;f<c;f++)if(this.intersectsSegmentPolygon(r[f],i,e,s,n))return this.boundingBoxes[f];return null}intersectsSegmentPolygon(i,e,s,n,r){let f=i,c=i.length,d=e-n,p=s-r,x=e*r-s*n,w=f[c-2],C=f[c-1];for(let F=0;F<c;F+=2){let B=f[F],X=f[F+1],z=w*X-C*B,W=w-B,Z=C-X,J=d*Z-p*W,j=(x*W-d*z)/J;if((j>=w&&j<=B||j>=B&&j<=w)&&(j>=e&&j<=n||j>=n&&j<=e)){let Q=(x*Z-p*z)/J;if((Q>=C&&Q<=X||Q>=X&&Q<=C)&&(Q>=s&&Q<=r||Q>=r&&Q<=s))return  true}w=B,C=X;}return  false}getPolygon(i){if(!i)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(i);return e==-1?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},ue=class vi{convexPolygons=new Array;convexPolygonsIndices=new Array;indicesArray=new Array;isConcaveArray=new Array;triangles=new Array;polygonPool=new $(()=>new Array);polygonIndicesPool=new $(()=>new Array);triangulate(e){let s=e,n=e.length>>1,r=this.indicesArray;r.length=0;for(let d=0;d<n;d++)r[d]=d;let f=this.isConcaveArray;f.length=0;for(let d=0,p=n;d<p;++d)f[d]=vi.isConcave(d,n,s,r);let c=this.triangles;for(c.length=0;n>3;){let d=n-1,p=0,x=1;for(;;){t:if(!f[p]){let F=r[d]<<1,B=r[p]<<1,X=r[x]<<1,z=s[F],W=s[F+1],Z=s[B],J=s[B+1],j=s[X],Q=s[X+1];for(let tt=(x+1)%n;tt!=d;tt=(tt+1)%n){if(!f[tt])continue;let nt=r[tt]<<1,pt=s[nt],mt=s[nt+1];if(vi.positiveArea(j,Q,z,W,pt,mt)&&vi.positiveArea(z,W,Z,J,pt,mt)&&vi.positiveArea(Z,J,j,Q,pt,mt))break t}break}if(x==0){do{if(!f[p])break;p--;}while(p>0);break}d=p,p=x,x=(x+1)%n;}c.push(r[(n+p-1)%n]),c.push(r[p]),c.push(r[(p+1)%n]),r.splice(p,1),f.splice(p,1),n--;let w=(n+p-1)%n,C=p==n?0:p;f[w]=vi.isConcave(w,n,s,r),f[C]=vi.isConcave(C,n,s,r);}return n==3&&(c.push(r[2]),c.push(r[0]),c.push(r[1])),c}decompose(e,s){let n=e,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;let f=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(f),f.length=0;let c=this.polygonIndicesPool.obtain();c.length=0;let d=this.polygonPool.obtain();d.length=0;let p=-1,x=0;for(let w=0,C=s.length;w<C;w+=3){let F=s[w]<<1,B=s[w+1]<<1,X=s[w+2]<<1,z=n[F],W=n[F+1],Z=n[B],J=n[B+1],j=n[X],Q=n[X+1],tt=false;if(p==F){let nt=d.length-4,pt=vi.winding(d[nt],d[nt+1],d[nt+2],d[nt+3],j,Q),mt=vi.winding(j,Q,d[0],d[1],d[2],d[3]);pt==x&&mt==x&&(d.push(j),d.push(Q),c.push(X),tt=true);}tt||(d.length>0?(r.push(d),f.push(c)):(this.polygonPool.free(d),this.polygonIndicesPool.free(c)),d=this.polygonPool.obtain(),d.length=0,d.push(z),d.push(W),d.push(Z),d.push(J),d.push(j),d.push(Q),c=this.polygonIndicesPool.obtain(),c.length=0,c.push(F),c.push(B),c.push(X),x=vi.winding(z,W,Z,J,j,Q),p=F);}d.length>0&&(r.push(d),f.push(c));for(let w=0,C=r.length;w<C;w++){if(c=f[w],c.length==0)continue;let F=c[0],B=c[c.length-1];d=r[w];let X=d.length-4,z=d[X],W=d[X+1],Z=d[X+2],J=d[X+3],j=d[0],Q=d[1],tt=d[2],nt=d[3],pt=vi.winding(z,W,Z,J,j,Q);for(let mt=0;mt<C;mt++){if(mt==w)continue;let gt=f[mt];if(gt.length!=3)continue;let Ct=gt[0],Ft=gt[1],Vt=gt[2],Ut=r[mt],St=Ut[Ut.length-2],It=Ut[Ut.length-1];if(Ct!=F||Ft!=B)continue;let Ht=vi.winding(z,W,Z,J,St,It),Se=vi.winding(St,It,j,Q,tt,nt);Ht==pt&&Se==pt&&(Ut.length=0,gt.length=0,d.push(St),d.push(It),c.push(Vt),z=Z,W=J,Z=St,J=It,mt=0);}}for(let w=r.length-1;w>=0;w--)d=r[w],d.length==0&&(r.splice(w,1),this.polygonPool.free(d),c=f[w],f.splice(w,1),this.polygonIndicesPool.free(c));return r}static isConcave(e,s,n,r){let f=r[(s+e-1)%s]<<1,c=r[e]<<1,d=r[(e+1)%s]<<1;return !this.positiveArea(n[f],n[f+1],n[c],n[c+1],n[d],n[d+1])}static positiveArea(e,s,n,r,f,c){return e*(c-r)+n*(s-c)+f*(r-s)>=0}static winding(e,s,n,r,f,c){let d=n-e,p=r-s;return f*p-c*d+d*s-e*p>=0?1:-1}},fe=class Nr{triangulator=new ue;clippingPolygon=new Array;clipOutput=new Array;clippedVertices=new Array;clippedUVs=new Array;clippedTriangles=new Array;scratch=new Array;clipAttachment=null;clippingPolygons=null;clipStart(e,s){if(this.clipAttachment)return 0;this.clipAttachment=s;let n=s.worldVerticesLength,r=D.setArraySize(this.clippingPolygon,n);s.computeWorldVertices(e,0,n,r,0,2);let f=this.clippingPolygon;Nr.makeClockwise(f);let c=this.clippingPolygons=this.triangulator.decompose(f,this.triangulator.triangulate(f));for(let d=0,p=c.length;d<p;d++){let x=c[d];Nr.makeClockwise(x),x.push(x[0]),x.push(x[1]);}return c.length}clipEndWithSlot(e){this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd();}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0);}isClipping(){return this.clipAttachment!=null}clipTriangles(e,s,n,r,f,c,d,p){let x,w,C,F,B,X;typeof s=="number"?(x=n,w=r,C=f,F=c,B=d,X=p):(x=s,w=n,C=r,F=f,B=c,X=d),C&&F&&B&&typeof X=="boolean"?this.clipTrianglesRender(e,x,w,C,F,B,X):this.clipTrianglesNoRender(e,x,w);}clipTrianglesNoRender(e,s,n){let r=this.clipOutput,f=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,p=d.length,x=0;f.length=0,c.length=0;for(let w=0;w<n;w+=3){let C=s[w]<<1,F=e[C],B=e[C+1];C=s[w+1]<<1;let X=e[C],z=e[C+1];C=s[w+2]<<1;let W=e[C],Z=e[C+1];for(let J=0;J<p;J++){let j=f.length;if(this.clip(F,B,X,z,W,Z,d[J],r)){let Q=r.length;if(Q==0)continue;let tt=Q>>1,nt=this.clipOutput,pt=D.setArraySize(f,j+tt*2);for(let gt=0;gt<Q;gt+=2,j+=2){let Ct=nt[gt],Ft=nt[gt+1];pt[j]=Ct,pt[j+1]=Ft;}j=c.length;let mt=D.setArraySize(c,j+3*(tt-2));tt--;for(let gt=1;gt<tt;gt++,j+=3)mt[j]=x,mt[j+1]=x+gt,mt[j+2]=x+gt+1;x+=tt+1;}else {let Q=D.setArraySize(f,j+6);Q[j]=F,Q[j+1]=B,Q[j+2]=X,Q[j+3]=z,Q[j+4]=W,Q[j+5]=Z,j=c.length;let tt=D.setArraySize(c,j+3);tt[j]=x,tt[j+1]=x+1,tt[j+2]=x+2,x+=3;break}}}}clipTrianglesRender(e,s,n,r,f,c,d){let p=this.clipOutput,x=this.clippedVertices,w=this.clippedTriangles,C=this.clippingPolygons,F=C.length,B=d?12:8,X=0;x.length=0,w.length=0;for(let z=0;z<n;z+=3){let W=s[z]<<1,Z=e[W],J=e[W+1],j=r[W],Q=r[W+1];W=s[z+1]<<1;let tt=e[W],nt=e[W+1],pt=r[W],mt=r[W+1];W=s[z+2]<<1;let gt=e[W],Ct=e[W+1],Ft=r[W],Vt=r[W+1];for(let Ut=0;Ut<F;Ut++){let St=x.length;if(this.clip(Z,J,tt,nt,gt,Ct,C[Ut],p)){let It=p.length;if(It==0)continue;let Ht=nt-Ct,Se=gt-tt,ve=Z-gt,be=Ct-J,Pe=1/(Ht*ve+Se*(J-Ct)),Re=It>>1,Ge=this.clipOutput,ne=D.setArraySize(x,St+Re*B);for(let Fe=0;Fe<It;Fe+=2,St+=B){let Ke=Ge[Fe],je=Ge[Fe+1];ne[St]=Ke,ne[St+1]=je,ne[St+2]=f.r,ne[St+3]=f.g,ne[St+4]=f.b,ne[St+5]=f.a;let si=Ke-gt,Qe=je-Ct,Ri=(Ht*si+Se*Qe)*Pe,Cs=(be*si+ve*Qe)*Pe,$s=1-Ri-Cs;ne[St+6]=j*Ri+pt*Cs+Ft*$s,ne[St+7]=Q*Ri+mt*Cs+Vt*$s,d&&(ne[St+8]=c.r,ne[St+9]=c.g,ne[St+10]=c.b,ne[St+11]=c.a);}St=w.length;let Te=D.setArraySize(w,St+3*(Re-2));Re--;for(let Fe=1;Fe<Re;Fe++,St+=3)Te[St]=X,Te[St+1]=X+Fe,Te[St+2]=X+Fe+1;X+=Re+1;}else {let It=D.setArraySize(x,St+3*B);It[St]=Z,It[St+1]=J,It[St+2]=f.r,It[St+3]=f.g,It[St+4]=f.b,It[St+5]=f.a,d?(It[St+6]=j,It[St+7]=Q,It[St+8]=c.r,It[St+9]=c.g,It[St+10]=c.b,It[St+11]=c.a,It[St+12]=tt,It[St+13]=nt,It[St+14]=f.r,It[St+15]=f.g,It[St+16]=f.b,It[St+17]=f.a,It[St+18]=pt,It[St+19]=mt,It[St+20]=c.r,It[St+21]=c.g,It[St+22]=c.b,It[St+23]=c.a,It[St+24]=gt,It[St+25]=Ct,It[St+26]=f.r,It[St+27]=f.g,It[St+28]=f.b,It[St+29]=f.a,It[St+30]=Ft,It[St+31]=Vt,It[St+32]=c.r,It[St+33]=c.g,It[St+34]=c.b,It[St+35]=c.a):(It[St+6]=j,It[St+7]=Q,It[St+8]=tt,It[St+9]=nt,It[St+10]=f.r,It[St+11]=f.g,It[St+12]=f.b,It[St+13]=f.a,It[St+14]=pt,It[St+15]=mt,It[St+16]=gt,It[St+17]=Ct,It[St+18]=f.r,It[St+19]=f.g,It[St+20]=f.b,It[St+21]=f.a,It[St+22]=Ft,It[St+23]=Vt),St=w.length;let Ht=D.setArraySize(w,St+3);Ht[St]=X,Ht[St+1]=X+1,Ht[St+2]=X+2,X+=3;break}}}}clipTrianglesUnpacked(e,s,n,r){let f=this.clipOutput,c=this.clippedVertices,d=this.clippedUVs,p=this.clippedTriangles,x=this.clippingPolygons,w=x.length,C=0;c.length=0,d.length=0,p.length=0;for(let F=0;F<n;F+=3){let B=s[F]<<1,X=e[B],z=e[B+1],W=r[B],Z=r[B+1];B=s[F+1]<<1;let J=e[B],j=e[B+1],Q=r[B],tt=r[B+1];B=s[F+2]<<1;let nt=e[B],pt=e[B+1],mt=r[B],gt=r[B+1];for(let Ct=0;Ct<w;Ct++){let Ft=c.length;if(this.clip(X,z,J,j,nt,pt,x[Ct],f)){let Vt=f.length;if(Vt==0)continue;let Ut=j-pt,St=nt-J,It=X-nt,Ht=pt-z,Se=1/(Ut*It+St*(z-pt)),ve=Vt>>1,be=this.clipOutput,Pe=D.setArraySize(c,Ft+ve*2),Re=D.setArraySize(d,Ft+ve*2);for(let ne=0;ne<Vt;ne+=2,Ft+=2){let Te=be[ne],Fe=be[ne+1];Pe[Ft]=Te,Pe[Ft+1]=Fe;let Ke=Te-nt,je=Fe-pt,si=(Ut*Ke+St*je)*Se,Qe=(Ht*Ke+It*je)*Se,Ri=1-si-Qe;Re[Ft]=W*si+Q*Qe+mt*Ri,Re[Ft+1]=Z*si+tt*Qe+gt*Ri;}Ft=p.length;let Ge=D.setArraySize(p,Ft+3*(ve-2));ve--;for(let ne=1;ne<ve;ne++,Ft+=3)Ge[Ft]=C,Ge[Ft+1]=C+ne,Ge[Ft+2]=C+ne+1;C+=ve+1;}else {let Vt=D.setArraySize(c,Ft+6);Vt[Ft]=X,Vt[Ft+1]=z,Vt[Ft+2]=J,Vt[Ft+3]=j,Vt[Ft+4]=nt,Vt[Ft+5]=pt;let Ut=D.setArraySize(d,Ft+6);Ut[Ft]=W,Ut[Ft+1]=Z,Ut[Ft+2]=Q,Ut[Ft+3]=tt,Ut[Ft+4]=mt,Ut[Ft+5]=gt,Ft=p.length;let St=D.setArraySize(p,Ft+3);St[Ft]=C,St[Ft+1]=C+1,St[Ft+2]=C+2,C+=3;break}}}}clip(e,s,n,r,f,c,d,p){let x=p,w=false,C;d.length%4>=2?(C=p,p=this.scratch):C=this.scratch,C.length=0,C.push(e),C.push(s),C.push(n),C.push(r),C.push(f),C.push(c),C.push(e),C.push(s),p.length=0;let F=d.length-4,B=d;for(let X=0;;X+=2){let z=B[X],W=B[X+1],Z=z-B[X+2],J=W-B[X+3],j=p.length,Q=C;for(let nt=0,pt=C.length-2;nt<pt;){let mt=Q[nt],gt=Q[nt+1];nt+=2;let Ct=Q[nt],Ft=Q[nt+1],Vt=J*(z-Ct)>Z*(W-Ft),Ut=J*(z-mt)-Z*(W-gt);if(Ut>0){if(Vt){p.push(Ct),p.push(Ft);continue}let St=Ct-mt,It=Ft-gt,Ht=Ut/(St*J-It*Z);if(Ht>=0&&Ht<=1)p.push(mt+St*Ht),p.push(gt+It*Ht);else {p.push(Ct),p.push(Ft);continue}}else if(Vt){let St=Ct-mt,It=Ft-gt,Ht=Ut/(St*J-It*Z);if(Ht>=0&&Ht<=1)p.push(mt+St*Ht),p.push(gt+It*Ht),p.push(Ct),p.push(Ft);else {p.push(Ct),p.push(Ft);continue}}w=true;}if(j==p.length)return x.length=0,true;if(p.push(p[0]),p.push(p[1]),X==F)break;let tt=p;p=C,p.length=0,C=tt;}if(x!=p){x.length=0;for(let X=0,z=p.length-2;X<z;X++)x[X]=p[X];}else x.length=x.length-2;return w}static makeClockwise(e){let s=e,n=e.length,r=s[n-2]*s[1]-s[0]*s[n-1],f=0,c=0,d=0,p=0;for(let x=0,w=n-3;x<w;x+=2)f=s[x],c=s[x+1],d=s[x+2],p=s[x+3],r+=f*p-d*c;if(!(r<0))for(let x=0,w=n-2,C=n>>1;x<C;x+=2){let F=s[x],B=s[x+1],X=w-x;s[x]=s[X],s[x+1]=s[X+1],s[X]=F,s[X+1]=B;}}},me=class{attachmentLoader;scale=1;linkedMeshes=new Array;constructor(i){this.attachmentLoader=i;}readSkeletonData(i){let e=this.scale,s=new Ce,n=typeof i=="string"?JSON.parse(i):i,r=n.skeleton;if(r&&(s.hash=r.hash,s.version=r.spine,s.x=r.x,s.y=r.y,s.width=r.width,s.height=r.height,s.referenceScale=ft(r,"referenceScale",100)*e,s.fps=r.fps,s.imagesPath=r.images??null,s.audioPath=r.audio??null),n.bones)for(let f=0;f<n.bones.length;f++){let c=n.bones[f],d=null,p=ft(c,"parent",null);p&&(d=s.findBone(p));let x=new $i(s.bones.length,c.name,d);x.length=ft(c,"length",0)*e,x.x=ft(c,"x",0)*e,x.y=ft(c,"y",0)*e,x.rotation=ft(c,"rotation",0),x.scaleX=ft(c,"scaleX",1),x.scaleY=ft(c,"scaleY",1),x.shearX=ft(c,"shearX",0),x.shearY=ft(c,"shearY",0),x.inherit=D.enumValue(di,ft(c,"inherit","Normal")),x.skinRequired=ft(c,"skin",false);let w=ft(c,"color",null);w&&x.color.setFromString(w),s.bones.push(x);}if(n.slots)for(let f=0;f<n.slots.length;f++){let c=n.slots[f],d=c.name,p=s.findBone(c.bone);if(!p)throw new Error(`Couldn't find bone ${c.bone} for slot ${d}`);let x=new Us(s.slots.length,d,p),w=ft(c,"color",null);w&&x.color.setFromString(w);let C=ft(c,"dark",null);C&&(x.darkColor=O.fromString(C)),x.attachmentName=ft(c,"attachment",null),x.blendMode=D.enumValue(Ws,ft(c,"blend","normal")),x.visible=ft(c,"visible",true),s.slots.push(x);}if(n.ik)for(let f=0;f<n.ik.length;f++){let c=n.ik[f],d=new ts(c.name);d.order=ft(c,"order",0),d.skinRequired=ft(c,"skin",false);for(let x=0;x<c.bones.length;x++){let w=s.findBone(c.bones[x]);if(!w)throw new Error(`Couldn't find bone ${c.bones[x]} for IK constraint ${c.name}.`);d.bones.push(w);}let p=s.findBone(c.target);if(!p)throw new Error(`Couldn't find target bone ${c.target} for IK constraint ${c.name}.`);d.target=p,d.mix=ft(c,"mix",1),d.softness=ft(c,"softness",0)*e,d.bendDirection=ft(c,"bendPositive",true)?1:-1,d.compress=ft(c,"compress",false),d.stretch=ft(c,"stretch",false),d.uniform=ft(c,"uniform",false),s.ikConstraints.push(d);}if(n.transform)for(let f=0;f<n.transform.length;f++){let c=n.transform[f],d=new Gs(c.name);d.order=ft(c,"order",0),d.skinRequired=ft(c,"skin",false);for(let w=0;w<c.bones.length;w++){let C=c.bones[w],F=s.findBone(C);if(!F)throw new Error(`Couldn't find bone ${C} for transform constraint ${c.name}.`);d.bones.push(F);}let p=c.target,x=s.findBone(p);if(!x)throw new Error(`Couldn't find target bone ${p} for transform constraint ${c.name}.`);d.target=x,d.local=ft(c,"local",false),d.relative=ft(c,"relative",false),d.offsetRotation=ft(c,"rotation",0),d.offsetX=ft(c,"x",0)*e,d.offsetY=ft(c,"y",0)*e,d.offsetScaleX=ft(c,"scaleX",0),d.offsetScaleY=ft(c,"scaleY",0),d.offsetShearY=ft(c,"shearY",0),d.mixRotate=ft(c,"mixRotate",1),d.mixX=ft(c,"mixX",1),d.mixY=ft(c,"mixY",d.mixX),d.mixScaleX=ft(c,"mixScaleX",1),d.mixScaleY=ft(c,"mixScaleY",d.mixScaleX),d.mixShearY=ft(c,"mixShearY",1),s.transformConstraints.push(d);}if(n.path)for(let f=0;f<n.path.length;f++){let c=n.path[f],d=new Ui(c.name);d.order=ft(c,"order",0),d.skinRequired=ft(c,"skin",false);for(let w=0;w<c.bones.length;w++){let C=c.bones[w],F=s.findBone(C);if(!F)throw new Error(`Couldn't find bone ${C} for path constraint ${c.name}.`);d.bones.push(F);}let p=c.target,x=s.findSlot(p);if(!x)throw new Error(`Couldn't find target slot ${p} for path constraint ${c.name}.`);d.target=x,d.positionMode=D.enumValue(es,ft(c,"positionMode","Percent")),d.spacingMode=D.enumValue(ei,ft(c,"spacingMode","Length")),d.rotateMode=D.enumValue(is,ft(c,"rotateMode","Tangent")),d.offsetRotation=ft(c,"rotation",0),d.position=ft(c,"position",0),d.positionMode==0&&(d.position*=e),d.spacing=ft(c,"spacing",0),(d.spacingMode==0||d.spacingMode==1)&&(d.spacing*=e),d.mixRotate=ft(c,"mixRotate",1),d.mixX=ft(c,"mixX",1),d.mixY=ft(c,"mixY",d.mixX),s.pathConstraints.push(d);}if(n.physics)for(let f=0;f<n.physics.length;f++){let c=n.physics[f],d=new xs(c.name);d.order=ft(c,"order",0),d.skinRequired=ft(c,"skin",false);let p=c.bone,x=s.findBone(p);if(x==null)throw new Error("Physics bone not found: "+p);d.bone=x,d.x=ft(c,"x",0),d.y=ft(c,"y",0),d.rotate=ft(c,"rotate",0),d.scaleX=ft(c,"scaleX",0),d.shearX=ft(c,"shearX",0),d.limit=ft(c,"limit",5e3)*e,d.step=1/ft(c,"fps",60),d.inertia=ft(c,"inertia",1),d.strength=ft(c,"strength",100),d.damping=ft(c,"damping",1),d.massInverse=1/ft(c,"mass",1),d.wind=ft(c,"wind",0),d.gravity=ft(c,"gravity",0),d.mix=ft(c,"mix",1),d.inertiaGlobal=ft(c,"inertiaGlobal",false),d.strengthGlobal=ft(c,"strengthGlobal",false),d.dampingGlobal=ft(c,"dampingGlobal",false),d.massGlobal=ft(c,"massGlobal",false),d.windGlobal=ft(c,"windGlobal",false),d.gravityGlobal=ft(c,"gravityGlobal",false),d.mixGlobal=ft(c,"mixGlobal",false),s.physicsConstraints.push(d);}if(n.skins)for(let f=0;f<n.skins.length;f++){let c=n.skins[f],d=new Ms(c.name);if(c.bones)for(let p=0;p<c.bones.length;p++){let x=c.bones[p],w=s.findBone(x);if(!w)throw new Error(`Couldn't find bone ${x} for skin ${c.name}.`);d.bones.push(w);}if(c.ik)for(let p=0;p<c.ik.length;p++){let x=c.ik[p],w=s.findIkConstraint(x);if(!w)throw new Error(`Couldn't find IK constraint ${x} for skin ${c.name}.`);d.constraints.push(w);}if(c.transform)for(let p=0;p<c.transform.length;p++){let x=c.transform[p],w=s.findTransformConstraint(x);if(!w)throw new Error(`Couldn't find transform constraint ${x} for skin ${c.name}.`);d.constraints.push(w);}if(c.path)for(let p=0;p<c.path.length;p++){let x=c.path[p],w=s.findPathConstraint(x);if(!w)throw new Error(`Couldn't find path constraint ${x} for skin ${c.name}.`);d.constraints.push(w);}if(c.physics)for(let p=0;p<c.physics.length;p++){let x=c.physics[p],w=s.findPhysicsConstraint(x);if(!w)throw new Error(`Couldn't find physics constraint ${x} for skin ${c.name}.`);d.constraints.push(w);}for(let p in c.attachments){let x=s.findSlot(p);if(!x)throw new Error(`Couldn't find slot ${p} for skin ${c.name}.`);let w=c.attachments[p];for(let C in w){let F=this.readAttachment(w[C],d,x.index,C,s);F&&d.setAttachment(x.index,C,F);}}s.skins.push(d),d.name=="default"&&(s.defaultSkin=d);}for(let f=0,c=this.linkedMeshes.length;f<c;f++){let d=this.linkedMeshes[f],p=d.skin?s.findSkin(d.skin):s.defaultSkin;if(!p)throw new Error(`Skin not found: ${d.skin}`);let x=p.getAttachment(d.slotIndex,d.parent);if(!x)throw new Error(`Parent mesh not found: ${d.parent}`);d.mesh.timelineAttachment=d.inheritTimeline?x:d.mesh,d.mesh.setParentMesh(x),d.mesh.region!=null&&d.mesh.updateRegion();}if(this.linkedMeshes.length=0,n.events)for(let f in n.events){let c=n.events[f],d=new Os(f);d.intValue=ft(c,"int",0),d.floatValue=ft(c,"float",0),d.stringValue=ft(c,"string",""),d.audioPath=ft(c,"audio",null),d.audioPath&&(d.volume=ft(c,"volume",1),d.balance=ft(c,"balance",0)),s.events.push(d);}if(n.animations)for(let f in n.animations){let c=n.animations[f];this.readAnimation(c,f,s);}return s}readAttachment(i,e,s,n,r){let f=this.scale;switch(n=ft(i,"name",n),ft(i,"type","region")){case "region":{let c=ft(i,"path",n),d=this.readSequence(ft(i,"sequence",null)),p=this.attachmentLoader.newRegionAttachment(e,n,c,d);if(!p)return null;p.path=c,p.x=ft(i,"x",0)*f,p.y=ft(i,"y",0)*f,p.scaleX=ft(i,"scaleX",1),p.scaleY=ft(i,"scaleY",1),p.rotation=ft(i,"rotation",0),p.width=i.width*f,p.height=i.height*f,p.sequence=d;let x=ft(i,"color",null);return x&&p.color.setFromString(x),p.region!=null&&p.updateRegion(),p}case "boundingbox":{let c=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(!c)return null;this.readVertices(i,c,i.vertexCount<<1);let d=ft(i,"color",null);return d&&c.color.setFromString(d),c}case "mesh":case "linkedmesh":{let c=ft(i,"path",n),d=this.readSequence(ft(i,"sequence",null)),p=this.attachmentLoader.newMeshAttachment(e,n,c,d);if(!p)return null;p.path=c;let x=ft(i,"color",null);x&&p.color.setFromString(x),p.width=ft(i,"width",0)*f,p.height=ft(i,"height",0)*f,p.sequence=d;let w=ft(i,"parent",null);if(w)return this.linkedMeshes.push(new xe(p,ft(i,"skin",null),s,w,ft(i,"timelines",true))),p;let C=i.uvs;return this.readVertices(i,p,C.length),p.triangles=i.triangles,p.regionUVs=C,p.region!=null&&p.updateRegion(),p.edges=ft(i,"edges",null),p.hullLength=ft(i,"hull",0)*2,p}case "path":{let c=this.attachmentLoader.newPathAttachment(e,n);if(!c)return null;c.closed=ft(i,"closed",false),c.constantSpeed=ft(i,"constantSpeed",true);let d=i.vertexCount;this.readVertices(i,c,d<<1);let p=D.newArray(d/3,0);for(let w=0;w<i.lengths.length;w++)p[w]=i.lengths[w]*f;c.lengths=p;let x=ft(i,"color",null);return x&&c.color.setFromString(x),c}case "point":{let c=this.attachmentLoader.newPointAttachment(e,n);if(!c)return null;c.x=ft(i,"x",0)*f,c.y=ft(i,"y",0)*f,c.rotation=ft(i,"rotation",0);let d=ft(i,"color",null);return d&&c.color.setFromString(d),c}case "clipping":{let c=this.attachmentLoader.newClippingAttachment(e,n);if(!c)return null;let d=ft(i,"end",null);d&&(c.endSlot=r.findSlot(d));let p=i.vertexCount;this.readVertices(i,c,p<<1);let x=ft(i,"color",null);return x&&c.color.setFromString(x),c}}return null}readSequence(i){if(i==null)return null;let e=new G(ft(i,"count",0));return e.start=ft(i,"start",1),e.digits=ft(i,"digits",0),e.setupIndex=ft(i,"setup",0),e}readVertices(i,e,s){let n=this.scale;e.worldVerticesLength=s;let r=i.vertices;if(s==r.length){let d=D.toFloatArray(r);if(n!=1)for(let p=0,x=r.length;p<x;p++)d[p]*=n;e.vertices=d;return}let f=new Array,c=new Array;for(let d=0,p=r.length;d<p;){let x=r[d++];c.push(x);for(let w=d+x*4;d<w;d+=4)c.push(r[d]),f.push(r[d+1]*n),f.push(r[d+2]*n),f.push(r[d+3]);}e.bones=c,e.vertices=D.toFloatArray(f);}readAnimation(i,e,s){let n=this.scale,r=new Array;if(i.slots)for(let c in i.slots){let d=i.slots[c],p=s.findSlot(c);if(!p)throw new Error("Slot not found: "+c);let x=p.index;for(let w in d){let C=d[w];if(!C)continue;let F=C.length;if(w=="attachment"){let B=new Ye(F,x);for(let X=0;X<F;X++){let z=C[X];B.setFrame(X,ft(z,"time",0),ft(z,"name",null));}r.push(B);}else if(w=="rgba"){let B=new ie(F,F<<2,x),X=C[0],z=ft(X,"time",0),W=O.fromString(X.color);for(let Z=0,J=0;;Z++){B.setFrame(Z,z,W.r,W.g,W.b,W.a);let j=C[Z+1];if(!j){B.shrink(J);break}let Q=ft(j,"time",0),tt=O.fromString(j.color),nt=X.curve;nt&&(J=zt(nt,B,J,Z,0,z,Q,W.r,tt.r,1),J=zt(nt,B,J,Z,1,z,Q,W.g,tt.g,1),J=zt(nt,B,J,Z,2,z,Q,W.b,tt.b,1),J=zt(nt,B,J,Z,3,z,Q,W.a,tt.a,1)),z=Q,W=tt,X=j;}r.push(B);}else if(w=="rgb"){let B=new Kt(F,F*3,x),X=C[0],z=ft(X,"time",0),W=O.fromString(X.color);for(let Z=0,J=0;;Z++){B.setFrame(Z,z,W.r,W.g,W.b);let j=C[Z+1];if(!j){B.shrink(J);break}let Q=ft(j,"time",0),tt=O.fromString(j.color),nt=X.curve;nt&&(J=zt(nt,B,J,Z,0,z,Q,W.r,tt.r,1),J=zt(nt,B,J,Z,1,z,Q,W.g,tt.g,1),J=zt(nt,B,J,Z,2,z,Q,W.b,tt.b,1)),z=Q,W=tt,X=j;}r.push(B);}else if(w=="alpha")r.push(_t(C,new Ae(F,F,x),0,1));else if(w=="rgba2"){let B=new Le(F,F*7,x),X=C[0],z=ft(X,"time",0),W=O.fromString(X.light),Z=O.fromString(X.dark);for(let J=0,j=0;;J++){B.setFrame(J,z,W.r,W.g,W.b,W.a,Z.r,Z.g,Z.b);let Q=C[J+1];if(!Q){B.shrink(j);break}let tt=ft(Q,"time",0),nt=O.fromString(Q.light),pt=O.fromString(Q.dark),mt=X.curve;mt&&(j=zt(mt,B,j,J,0,z,tt,W.r,nt.r,1),j=zt(mt,B,j,J,1,z,tt,W.g,nt.g,1),j=zt(mt,B,j,J,2,z,tt,W.b,nt.b,1),j=zt(mt,B,j,J,3,z,tt,W.a,nt.a,1),j=zt(mt,B,j,J,4,z,tt,Z.r,pt.r,1),j=zt(mt,B,j,J,5,z,tt,Z.g,pt.g,1),j=zt(mt,B,j,J,6,z,tt,Z.b,pt.b,1)),z=tt,W=nt,Z=pt,X=Q;}r.push(B);}else if(w=="rgb2"){let B=new ye(F,F*6,x),X=C[0],z=ft(X,"time",0),W=O.fromString(X.light),Z=O.fromString(X.dark);for(let J=0,j=0;;J++){B.setFrame(J,z,W.r,W.g,W.b,Z.r,Z.g,Z.b);let Q=C[J+1];if(!Q){B.shrink(j);break}let tt=ft(Q,"time",0),nt=O.fromString(Q.light),pt=O.fromString(Q.dark),mt=X.curve;mt&&(j=zt(mt,B,j,J,0,z,tt,W.r,nt.r,1),j=zt(mt,B,j,J,1,z,tt,W.g,nt.g,1),j=zt(mt,B,j,J,2,z,tt,W.b,nt.b,1),j=zt(mt,B,j,J,3,z,tt,Z.r,pt.r,1),j=zt(mt,B,j,J,4,z,tt,Z.g,pt.g,1),j=zt(mt,B,j,J,5,z,tt,Z.b,pt.b,1)),z=tt,W=nt,Z=pt,X=Q;}r.push(B);}}}if(i.bones)for(let c in i.bones){let d=i.bones[c],p=s.findBone(c);if(!p)throw new Error("Bone not found: "+c);let x=p.index;for(let w in d){let C=d[w],F=C.length;if(F!=0){if(w==="rotate")r.push(_t(C,new xt(F,F,x),0,1));else if(w==="translate"){let B=new Mt(F,F<<1,x);r.push(oe(C,B,"x","y",0,n));}else if(w==="translatex"){let B=new Xt(F,F,x);r.push(_t(C,B,0,n));}else if(w==="translatey"){let B=new Dt(F,F,x);r.push(_t(C,B,0,n));}else if(w==="scale"){let B=new Lt(F,F<<1,x);r.push(oe(C,B,"x","y",1,1));}else if(w==="scalex"){let B=new Bt(F,F,x);r.push(_t(C,B,1,1));}else if(w==="scaley"){let B=new Gt(F,F,x);r.push(_t(C,B,1,1));}else if(w==="shear"){let B=new kt(F,F<<1,x);r.push(oe(C,B,"x","y",0,1));}else if(w==="shearx"){let B=new bt(F,F,x);r.push(_t(C,B,0,1));}else if(w==="sheary"){let B=new wt(F,F,x);r.push(_t(C,B,0,1));}else if(w==="inherit"){let B=new Qt(F,p.index);for(let X=0;X<C.length;X++){let z=C[X];B.setFrame(X,ft(z,"time",0),D.enumValue(di,ft(z,"inherit","Normal")));}r.push(B);}}}}if(i.ik)for(let c in i.ik){let d=i.ik[c],p=d[0];if(!p)continue;let x=s.findIkConstraint(c);if(!x)throw new Error("IK Constraint not found: "+c);let w=s.ikConstraints.indexOf(x),C=new Ue(d.length,d.length<<1,w),F=ft(p,"time",0),B=ft(p,"mix",1),X=ft(p,"softness",0)*n;for(let z=0,W=0;;z++){C.setFrame(z,F,B,X,ft(p,"bendPositive",true)?1:-1,ft(p,"compress",false),ft(p,"stretch",false));let Z=d[z+1];if(!Z){C.shrink(W);break}let J=ft(Z,"time",0),j=ft(Z,"mix",1),Q=ft(Z,"softness",0)*n,tt=p.curve;tt&&(W=zt(tt,C,W,z,0,F,J,B,j,1),W=zt(tt,C,W,z,1,F,J,X,Q,n)),F=J,B=j,X=Q,p=Z;}r.push(C);}if(i.transform)for(let c in i.transform){let d=i.transform[c],p=d[0];if(!p)continue;let x=s.findTransformConstraint(c);if(!x)throw new Error("Transform constraint not found: "+c);let w=s.transformConstraints.indexOf(x),C=new _e(d.length,d.length*6,w),F=ft(p,"time",0),B=ft(p,"mixRotate",1),X=ft(p,"mixX",1),z=ft(p,"mixY",X),W=ft(p,"mixScaleX",1),Z=ft(p,"mixScaleY",W),J=ft(p,"mixShearY",1);for(let j=0,Q=0;;j++){C.setFrame(j,F,B,X,z,W,Z,J);let tt=d[j+1];if(!tt){C.shrink(Q);break}let nt=ft(tt,"time",0),pt=ft(tt,"mixRotate",1),mt=ft(tt,"mixX",1),gt=ft(tt,"mixY",mt),Ct=ft(tt,"mixScaleX",1),Ft=ft(tt,"mixScaleY",Ct),Vt=ft(tt,"mixShearY",1),Ut=p.curve;Ut&&(Q=zt(Ut,C,Q,j,0,F,nt,B,pt,1),Q=zt(Ut,C,Q,j,1,F,nt,X,mt,1),Q=zt(Ut,C,Q,j,2,F,nt,z,gt,1),Q=zt(Ut,C,Q,j,3,F,nt,W,Ct,1),Q=zt(Ut,C,Q,j,4,F,nt,Z,Ft,1),Q=zt(Ut,C,Q,j,5,F,nt,J,Vt,1)),F=nt,B=pt,X=mt,z=gt,W=Ct,Z=Ft,W=Ct,p=tt;}r.push(C);}if(i.path)for(let c in i.path){let d=i.path[c],p=s.findPathConstraint(c);if(!p)throw new Error("Path constraint not found: "+c);let x=s.pathConstraints.indexOf(p);for(let w in d){let C=d[w],F=C[0];if(!F)continue;let B=C.length;if(w==="position"){let X=new We(B,B,x);r.push(_t(C,X,0,p.positionMode==0?n:1));}else if(w==="spacing"){let X=new Ze(B,B,x);r.push(_t(C,X,0,p.spacingMode==0||p.spacingMode==1?n:1));}else if(w==="mix"){let X=new Xe(B,B*3,x),z=ft(F,"time",0),W=ft(F,"mixRotate",1),Z=ft(F,"mixX",1),J=ft(F,"mixY",Z);for(let j=0,Q=0;;j++){X.setFrame(j,z,W,Z,J);let tt=C[j+1];if(!tt){X.shrink(Q);break}let nt=ft(tt,"time",0),pt=ft(tt,"mixRotate",1),mt=ft(tt,"mixX",1),gt=ft(tt,"mixY",mt),Ct=F.curve;Ct&&(Q=zt(Ct,X,Q,j,0,z,nt,W,pt,1),Q=zt(Ct,X,Q,j,1,z,nt,Z,mt,1),Q=zt(Ct,X,Q,j,2,z,nt,J,gt,1)),z=nt,W=pt,Z=mt,J=gt,F=tt;}r.push(X);}}}if(i.physics)for(let c in i.physics){let d=i.physics[c],p=-1;if(c.length>0){let x=s.findPhysicsConstraint(c);if(!x)throw new Error("Physics constraint not found: "+c);p=s.physicsConstraints.indexOf(x);}for(let x in d){let w=d[x],C=w[0];if(!C)continue;let F=w.length;if(x=="reset"){let X=new Hi(F,p);for(let z=0;C!=null;C=w[z+1],z++)X.setFrame(z,ft(C,"time",0));r.push(X);continue}let B;if(x=="inertia")B=new De(F,F,p);else if(x=="strength")B=new xi(F,F,p);else if(x=="damping")B=new ri(F,F,p);else if(x=="mass")B=new hi(F,F,p);else if(x=="wind")B=new ti(F,F,p);else if(x=="gravity")B=new ci(F,F,p);else if(x=="mix")B=new Mi(F,F,p);else continue;r.push(_t(w,B,0,1));}}if(i.attachments)for(let c in i.attachments){let d=i.attachments[c],p=s.findSkin(c);if(!p)throw new Error("Skin not found: "+c);for(let x in d){let w=d[x],C=s.findSlot(x);if(!C)throw new Error("Slot not found: "+x);let F=C.index;for(let B in w){let X=w[B],z=p.getAttachment(F,B);for(let W in X){let Z=X[W],J=Z[0];if(J){if(W=="deform"){let j=z.bones,Q=z.vertices,tt=j?Q.length/3*2:Q.length,nt=new Ve(Z.length,Z.length,F,z),pt=ft(J,"time",0);for(let mt=0,gt=0;;mt++){let Ct,Ft=ft(J,"vertices",null);if(!Ft)Ct=j?D.newFloatArray(tt):Q;else {Ct=D.newFloatArray(tt);let It=ft(J,"offset",0);if(D.arrayCopy(Ft,0,Ct,It,Ft.length),n!=1)for(let Ht=It,Se=Ht+Ft.length;Ht<Se;Ht++)Ct[Ht]*=n;if(!j)for(let Ht=0;Ht<tt;Ht++)Ct[Ht]+=Q[Ht];}nt.setFrame(mt,pt,Ct);let Vt=Z[mt+1];if(!Vt){nt.shrink(gt);break}let Ut=ft(Vt,"time",0),St=J.curve;St&&(gt=zt(St,nt,gt,mt,0,pt,Ut,0,1,1)),pt=Ut,J=Vt;}r.push(nt);}else if(W=="sequence"){let j=new cs(Z.length,F,z),Q=0;for(let tt=0;tt<Z.length;tt++){let nt=ft(J,"delay",Q),pt=ft(J,"time",0),mt=et[ft(J,"mode","hold")],gt=ft(J,"index",0);j.setFrame(tt,pt,mt,gt,nt),Q=nt,J=Z[tt+1];}r.push(j);}}}}}}if(i.drawOrder){let c=new ze(i.drawOrder.length),d=s.slots.length,p=0;for(let x=0;x<i.drawOrder.length;x++,p++){let w=i.drawOrder[x],C=null,F=ft(w,"offsets",null);if(F){C=D.newArray(d,-1);let B=D.newArray(d-F.length,0),X=0,z=0;for(let W=0;W<F.length;W++){let Z=F[W],J=s.findSlot(Z.slot);if(!J)throw new Error("Slot not found: "+J);let j=J.index;for(;X!=j;)B[z++]=X++;C[X+Z.offset]=X++;}for(;X<d;)B[z++]=X++;for(let W=d-1;W>=0;W--)C[W]==-1&&(C[W]=B[--z]);}c.setFrame(p,ft(w,"time",0),C);}r.push(c);}if(i.events){let c=new qe(i.events.length),d=0;for(let p=0;p<i.events.length;p++,d++){let x=i.events[p],w=s.findEvent(x.name);if(!w)throw new Error("Event not found: "+x.name);let C=new ps(D.toSinglePrecision(ft(x,"time",0)),w);C.intValue=ft(x,"int",w.intValue),C.floatValue=ft(x,"float",w.floatValue),C.stringValue=ft(x,"string",w.stringValue),C.data.audioPath&&(C.volume=ft(x,"volume",1),C.balance=ft(x,"balance",0)),c.setFrame(d,C);}r.push(c);}let f=0;for(let c=0,d=r.length;c<d;c++)f=Math.max(f,r[c].getDuration());s.animations.push(new rt(e,r,f));}},xe=class{parent;skin;slotIndex;mesh;inheritTimeline;constructor(i,e,s,n,r){this.mesh=i,this.skin=e,this.slotIndex=s,this.parent=n,this.inheritTimeline=r;}};function _t(i,e,s,n){let r=i[0],f=ft(r,"time",0),c=ft(r,"value",s)*n,d=0;for(let p=0;;p++){e.setFrame(p,f,c);let x=i[p+1];if(!x)return e.shrink(d),e;let w=ft(x,"time",0),C=ft(x,"value",s)*n;r.curve&&(d=zt(r.curve,e,d,p,0,f,w,c,C,n)),f=w,c=C,r=x;}}function oe(i,e,s,n,r,f){let c=i[0],d=ft(c,"time",0),p=ft(c,s,r)*f,x=ft(c,n,r)*f,w=0;for(let C=0;;C++){e.setFrame(C,d,p,x);let F=i[C+1];if(!F)return e.shrink(w),e;let B=ft(F,"time",0),X=ft(F,s,r)*f,z=ft(F,n,r)*f,W=c.curve;W&&(w=zt(W,e,w,C,0,d,B,p,X,f),w=zt(W,e,w,C,1,d,B,x,z,f)),d=B,p=X,x=z,c=F;}}function zt(i,e,s,n,r,f,c,d,p,x){if(i=="stepped")return e.setStepped(n),s;let w=r<<2,C=i[w],F=i[w+1]*x,B=i[w+2],X=i[w+3]*x;return e.setBezier(s,n,r,f,d,C,F,B,X,c,p),s+1}function ft(i,e,s){return i[e]!==void 0?i[e]:s}typeof Math.fround>"u"&&(Math.fround=(function(i){return function(e){return i[0]=e,i[0]}})(new Float32Array(1)));var Jt=class{canvas;gl;restorables=[];constructor(i,e={alpha:true}){if(i instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext)this.gl=i,this.canvas=this.gl.canvas;else {let s=i;this.gl=s.getContext("webgl2",e)||s.getContext("webgl",e),this.canvas=s,s.addEventListener("webglcontextlost",this.contextLostHandler),s.addEventListener("webglcontextrestored",this.contextRestoredHandler);}}contextLostHandler=i=>{i&&i.preventDefault();};contextRestoredHandler=()=>{for(let i=0,e=this.restorables.length;i<e;i++)this.restorables[i].restore();};dispose(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler);}addRestorable(i){this.restorables.push(i);}removeRestorable(i){let e=this.restorables.indexOf(i);e>-1&&this.restorables.splice(e,1);}},ee=class yr extends Qi{context;texture=null;boundUnit=0;useMipMaps=false;static DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=false;constructor(e,s,n=false){super(s),this.context=e instanceof Jt?e:new Jt(e),this.useMipMaps=n,this.restore(),this.context.addRestorable(this);}setFilters(e,s){let n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,yr.validateMagFilter(s)),this.useMipMaps=yr.usesMipMaps(e),this.useMipMaps&&n.generateMipmap(n.TEXTURE_2D);}static validateMagFilter(e){switch(e){case 9987:case 9985:case 9986:case 9984:return 9729;default:return e}}static usesMipMaps(e){switch(e){case 9987:case 9985:case 9986:case 9984:return  true;default:return  false}}setWraps(e,s){let n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,s);}update(e){let s=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,this._image),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,e?s.LINEAR_MIPMAP_LINEAR:s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),e&&s.generateMipmap(s.TEXTURE_2D);}restore(){this.texture=null,this.update(this.useMipMaps);}bind(e=0){let s=this.context.gl;this.boundUnit=e,s.activeTexture(s.TEXTURE0+e),s.bindTexture(s.TEXTURE_2D,this.texture);}unbind(){let e=this.context.gl;e.activeTexture(e.TEXTURE0+this.boundUnit),e.bindTexture(e.TEXTURE_2D,null);}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture);}},he=class extends wi{constructor(i,e="",s=new gs){super(n=>new ee(i,n),e,s);}},$t=class{x=0;y=0;z=0;constructor(i=0,e=0,s=0){this.x=i,this.y=e,this.z=s;}setFrom(i){return this.x=i.x,this.y=i.y,this.z=i.z,this}set(i,e,s){return this.x=i,this.y=e,this.z=s,this}add(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z,this}sub(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z,this}scale(i){return this.x*=i,this.y*=i,this.z*=i,this}normalize(){let i=this.length();return i==0?this:(i=1/i,this.x*=i,this.y*=i,this.z*=i,this)}cross(i){return this.set(this.y*i.z-this.z*i.y,this.z*i.x-this.x*i.z,this.x*i.y-this.y*i.x)}multiply(i){let e=i.values;return this.set(this.x*e[Ot]+this.y*e[Wt]+this.z*e[Nt]+e[jt],this.x*e[te]+this.y*e[le]+this.z*e[ce]+e[de],this.x*e[Me]+this.y*e[Zt]+this.z*e[qt]+e[se])}project(i){let e=i.values,s=1/(this.x*e[re]+this.y*e[ge]+this.z*e[we]+e[pe]);return this.set((this.x*e[Ot]+this.y*e[Wt]+this.z*e[Nt]+e[jt])*s,(this.x*e[te]+this.y*e[le]+this.z*e[ce]+e[de])*s,(this.x*e[Me]+this.y*e[Zt]+this.z*e[qt]+e[se])*s)}dot(i){return this.x*i.x+this.y*i.y+this.z*i.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(i){let e=i.x-this.x,s=i.y-this.y,n=i.z-this.z;return Math.sqrt(e*e+s*s+n*n)}},Ot=0,Wt=4,Nt=8,jt=12,te=1,le=5,ce=9,de=13,Me=2,Zt=6,qt=10,se=14,re=3,ge=7,we=11,pe=15,Li=class Fi{temp=new Float32Array(16);values=new Float32Array(16);static xAxis=new $t;static yAxis=new $t;static zAxis=new $t;static tmpMatrix=new Fi;constructor(){let e=this.values;e[Ot]=1,e[le]=1,e[qt]=1,e[pe]=1;}set(e){return this.values.set(e),this}transpose(){let e=this.temp,s=this.values;return e[Ot]=s[Ot],e[Wt]=s[te],e[Nt]=s[Me],e[jt]=s[re],e[te]=s[Wt],e[le]=s[le],e[ce]=s[Zt],e[de]=s[ge],e[Me]=s[Nt],e[Zt]=s[ce],e[qt]=s[qt],e[se]=s[we],e[re]=s[jt],e[ge]=s[de],e[we]=s[se],e[pe]=s[pe],this.set(e)}identity(){let e=this.values;return e[Ot]=1,e[Wt]=0,e[Nt]=0,e[jt]=0,e[te]=0,e[le]=1,e[ce]=0,e[de]=0,e[Me]=0,e[Zt]=0,e[qt]=1,e[se]=0,e[re]=0,e[ge]=0,e[we]=0,e[pe]=1,this}invert(){let e=this.values,s=this.temp,n=e[re]*e[Zt]*e[ce]*e[jt]-e[Me]*e[ge]*e[ce]*e[jt]-e[re]*e[le]*e[qt]*e[jt]+e[te]*e[ge]*e[qt]*e[jt]+e[Me]*e[le]*e[we]*e[jt]-e[te]*e[Zt]*e[we]*e[jt]-e[re]*e[Zt]*e[Nt]*e[de]+e[Me]*e[ge]*e[Nt]*e[de]+e[re]*e[Wt]*e[qt]*e[de]-e[Ot]*e[ge]*e[qt]*e[de]-e[Me]*e[Wt]*e[we]*e[de]+e[Ot]*e[Zt]*e[we]*e[de]+e[re]*e[le]*e[Nt]*e[se]-e[te]*e[ge]*e[Nt]*e[se]-e[re]*e[Wt]*e[ce]*e[se]+e[Ot]*e[ge]*e[ce]*e[se]+e[te]*e[Wt]*e[we]*e[se]-e[Ot]*e[le]*e[we]*e[se]-e[Me]*e[le]*e[Nt]*e[pe]+e[te]*e[Zt]*e[Nt]*e[pe]+e[Me]*e[Wt]*e[ce]*e[pe]-e[Ot]*e[Zt]*e[ce]*e[pe]-e[te]*e[Wt]*e[qt]*e[pe]+e[Ot]*e[le]*e[qt]*e[pe];if(n==0)throw new Error("non-invertible matrix");let r=1/n;return s[Ot]=e[ce]*e[se]*e[ge]-e[de]*e[qt]*e[ge]+e[de]*e[Zt]*e[we]-e[le]*e[se]*e[we]-e[ce]*e[Zt]*e[pe]+e[le]*e[qt]*e[pe],s[Wt]=e[jt]*e[qt]*e[ge]-e[Nt]*e[se]*e[ge]-e[jt]*e[Zt]*e[we]+e[Wt]*e[se]*e[we]+e[Nt]*e[Zt]*e[pe]-e[Wt]*e[qt]*e[pe],s[Nt]=e[Nt]*e[de]*e[ge]-e[jt]*e[ce]*e[ge]+e[jt]*e[le]*e[we]-e[Wt]*e[de]*e[we]-e[Nt]*e[le]*e[pe]+e[Wt]*e[ce]*e[pe],s[jt]=e[jt]*e[ce]*e[Zt]-e[Nt]*e[de]*e[Zt]-e[jt]*e[le]*e[qt]+e[Wt]*e[de]*e[qt]+e[Nt]*e[le]*e[se]-e[Wt]*e[ce]*e[se],s[te]=e[de]*e[qt]*e[re]-e[ce]*e[se]*e[re]-e[de]*e[Me]*e[we]+e[te]*e[se]*e[we]+e[ce]*e[Me]*e[pe]-e[te]*e[qt]*e[pe],s[le]=e[Nt]*e[se]*e[re]-e[jt]*e[qt]*e[re]+e[jt]*e[Me]*e[we]-e[Ot]*e[se]*e[we]-e[Nt]*e[Me]*e[pe]+e[Ot]*e[qt]*e[pe],s[ce]=e[jt]*e[ce]*e[re]-e[Nt]*e[de]*e[re]-e[jt]*e[te]*e[we]+e[Ot]*e[de]*e[we]+e[Nt]*e[te]*e[pe]-e[Ot]*e[ce]*e[pe],s[de]=e[Nt]*e[de]*e[Me]-e[jt]*e[ce]*e[Me]+e[jt]*e[te]*e[qt]-e[Ot]*e[de]*e[qt]-e[Nt]*e[te]*e[se]+e[Ot]*e[ce]*e[se],s[Me]=e[le]*e[se]*e[re]-e[de]*e[Zt]*e[re]+e[de]*e[Me]*e[ge]-e[te]*e[se]*e[ge]-e[le]*e[Me]*e[pe]+e[te]*e[Zt]*e[pe],s[Zt]=e[jt]*e[Zt]*e[re]-e[Wt]*e[se]*e[re]-e[jt]*e[Me]*e[ge]+e[Ot]*e[se]*e[ge]+e[Wt]*e[Me]*e[pe]-e[Ot]*e[Zt]*e[pe],s[qt]=e[Wt]*e[de]*e[re]-e[jt]*e[le]*e[re]+e[jt]*e[te]*e[ge]-e[Ot]*e[de]*e[ge]-e[Wt]*e[te]*e[pe]+e[Ot]*e[le]*e[pe],s[se]=e[jt]*e[le]*e[Me]-e[Wt]*e[de]*e[Me]-e[jt]*e[te]*e[Zt]+e[Ot]*e[de]*e[Zt]+e[Wt]*e[te]*e[se]-e[Ot]*e[le]*e[se],s[re]=e[ce]*e[Zt]*e[re]-e[le]*e[qt]*e[re]-e[ce]*e[Me]*e[ge]+e[te]*e[qt]*e[ge]+e[le]*e[Me]*e[we]-e[te]*e[Zt]*e[we],s[ge]=e[Wt]*e[qt]*e[re]-e[Nt]*e[Zt]*e[re]+e[Nt]*e[Me]*e[ge]-e[Ot]*e[qt]*e[ge]-e[Wt]*e[Me]*e[we]+e[Ot]*e[Zt]*e[we],s[we]=e[Nt]*e[le]*e[re]-e[Wt]*e[ce]*e[re]-e[Nt]*e[te]*e[ge]+e[Ot]*e[ce]*e[ge]+e[Wt]*e[te]*e[we]-e[Ot]*e[le]*e[we],s[pe]=e[Wt]*e[ce]*e[Me]-e[Nt]*e[le]*e[Me]+e[Nt]*e[te]*e[Zt]-e[Ot]*e[ce]*e[Zt]-e[Wt]*e[te]*e[qt]+e[Ot]*e[le]*e[qt],e[Ot]=s[Ot]*r,e[Wt]=s[Wt]*r,e[Nt]=s[Nt]*r,e[jt]=s[jt]*r,e[te]=s[te]*r,e[le]=s[le]*r,e[ce]=s[ce]*r,e[de]=s[de]*r,e[Me]=s[Me]*r,e[Zt]=s[Zt]*r,e[qt]=s[qt]*r,e[se]=s[se]*r,e[re]=s[re]*r,e[ge]=s[ge]*r,e[we]=s[we]*r,e[pe]=s[pe]*r,this}determinant(){let e=this.values;return e[re]*e[Zt]*e[ce]*e[jt]-e[Me]*e[ge]*e[ce]*e[jt]-e[re]*e[le]*e[qt]*e[jt]+e[te]*e[ge]*e[qt]*e[jt]+e[Me]*e[le]*e[we]*e[jt]-e[te]*e[Zt]*e[we]*e[jt]-e[re]*e[Zt]*e[Nt]*e[de]+e[Me]*e[ge]*e[Nt]*e[de]+e[re]*e[Wt]*e[qt]*e[de]-e[Ot]*e[ge]*e[qt]*e[de]-e[Me]*e[Wt]*e[we]*e[de]+e[Ot]*e[Zt]*e[we]*e[de]+e[re]*e[le]*e[Nt]*e[se]-e[te]*e[ge]*e[Nt]*e[se]-e[re]*e[Wt]*e[ce]*e[se]+e[Ot]*e[ge]*e[ce]*e[se]+e[te]*e[Wt]*e[we]*e[se]-e[Ot]*e[le]*e[we]*e[se]-e[Me]*e[le]*e[Nt]*e[pe]+e[te]*e[Zt]*e[Nt]*e[pe]+e[Me]*e[Wt]*e[ce]*e[pe]-e[Ot]*e[Zt]*e[ce]*e[pe]-e[te]*e[Wt]*e[qt]*e[pe]+e[Ot]*e[le]*e[qt]*e[pe]}translate(e,s,n){let r=this.values;return r[jt]+=e,r[de]+=s,r[se]+=n,this}copy(){return new Fi().set(this.values)}projection(e,s,n,r){this.identity();let f=1/Math.tan(n*(Math.PI/180)/2),c=(s+e)/(e-s),d=2*s*e/(e-s),p=this.values;return p[Ot]=f/r,p[te]=0,p[Me]=0,p[re]=0,p[Wt]=0,p[le]=f,p[Zt]=0,p[ge]=0,p[Nt]=0,p[ce]=0,p[qt]=c,p[we]=-1,p[jt]=0,p[de]=0,p[se]=d,p[pe]=0,this}ortho2d(e,s,n,r){return this.ortho(e,e+n,s,s+r,0,1)}ortho(e,s,n,r,f,c){this.identity();let d=2/(s-e),p=2/(r-n),x=-2/(c-f),w=-(s+e)/(s-e),C=-(r+n)/(r-n),F=-(c+f)/(c-f),B=this.values;return B[Ot]=d,B[te]=0,B[Me]=0,B[re]=0,B[Wt]=0,B[le]=p,B[Zt]=0,B[ge]=0,B[Nt]=0,B[ce]=0,B[qt]=x,B[we]=0,B[jt]=w,B[de]=C,B[se]=F,B[pe]=1,this}multiply(e){let s=this.temp,n=this.values,r=e.values;return s[Ot]=n[Ot]*r[Ot]+n[Wt]*r[te]+n[Nt]*r[Me]+n[jt]*r[re],s[Wt]=n[Ot]*r[Wt]+n[Wt]*r[le]+n[Nt]*r[Zt]+n[jt]*r[ge],s[Nt]=n[Ot]*r[Nt]+n[Wt]*r[ce]+n[Nt]*r[qt]+n[jt]*r[we],s[jt]=n[Ot]*r[jt]+n[Wt]*r[de]+n[Nt]*r[se]+n[jt]*r[pe],s[te]=n[te]*r[Ot]+n[le]*r[te]+n[ce]*r[Me]+n[de]*r[re],s[le]=n[te]*r[Wt]+n[le]*r[le]+n[ce]*r[Zt]+n[de]*r[ge],s[ce]=n[te]*r[Nt]+n[le]*r[ce]+n[ce]*r[qt]+n[de]*r[we],s[de]=n[te]*r[jt]+n[le]*r[de]+n[ce]*r[se]+n[de]*r[pe],s[Me]=n[Me]*r[Ot]+n[Zt]*r[te]+n[qt]*r[Me]+n[se]*r[re],s[Zt]=n[Me]*r[Wt]+n[Zt]*r[le]+n[qt]*r[Zt]+n[se]*r[ge],s[qt]=n[Me]*r[Nt]+n[Zt]*r[ce]+n[qt]*r[qt]+n[se]*r[we],s[se]=n[Me]*r[jt]+n[Zt]*r[de]+n[qt]*r[se]+n[se]*r[pe],s[re]=n[re]*r[Ot]+n[ge]*r[te]+n[we]*r[Me]+n[pe]*r[re],s[ge]=n[re]*r[Wt]+n[ge]*r[le]+n[we]*r[Zt]+n[pe]*r[ge],s[we]=n[re]*r[Nt]+n[ge]*r[ce]+n[we]*r[qt]+n[pe]*r[we],s[pe]=n[re]*r[jt]+n[ge]*r[de]+n[we]*r[se]+n[pe]*r[pe],this.set(this.temp)}multiplyLeft(e){let s=this.temp,n=this.values,r=e.values;return s[Ot]=r[Ot]*n[Ot]+r[Wt]*n[te]+r[Nt]*n[Me]+r[jt]*n[re],s[Wt]=r[Ot]*n[Wt]+r[Wt]*n[le]+r[Nt]*n[Zt]+r[jt]*n[ge],s[Nt]=r[Ot]*n[Nt]+r[Wt]*n[ce]+r[Nt]*n[qt]+r[jt]*n[we],s[jt]=r[Ot]*n[jt]+r[Wt]*n[de]+r[Nt]*n[se]+r[jt]*n[pe],s[te]=r[te]*n[Ot]+r[le]*n[te]+r[ce]*n[Me]+r[de]*n[re],s[le]=r[te]*n[Wt]+r[le]*n[le]+r[ce]*n[Zt]+r[de]*n[ge],s[ce]=r[te]*n[Nt]+r[le]*n[ce]+r[ce]*n[qt]+r[de]*n[we],s[de]=r[te]*n[jt]+r[le]*n[de]+r[ce]*n[se]+r[de]*n[pe],s[Me]=r[Me]*n[Ot]+r[Zt]*n[te]+r[qt]*n[Me]+r[se]*n[re],s[Zt]=r[Me]*n[Wt]+r[Zt]*n[le]+r[qt]*n[Zt]+r[se]*n[ge],s[qt]=r[Me]*n[Nt]+r[Zt]*n[ce]+r[qt]*n[qt]+r[se]*n[we],s[se]=r[Me]*n[jt]+r[Zt]*n[de]+r[qt]*n[se]+r[se]*n[pe],s[re]=r[re]*n[Ot]+r[ge]*n[te]+r[we]*n[Me]+r[pe]*n[re],s[ge]=r[re]*n[Wt]+r[ge]*n[le]+r[we]*n[Zt]+r[pe]*n[ge],s[we]=r[re]*n[Nt]+r[ge]*n[ce]+r[we]*n[qt]+r[pe]*n[we],s[pe]=r[re]*n[jt]+r[ge]*n[de]+r[we]*n[se]+r[pe]*n[pe],this.set(this.temp)}lookAt(e,s,n){let r=Fi.xAxis,f=Fi.yAxis,c=Fi.zAxis;c.setFrom(s).normalize(),r.setFrom(s).normalize(),r.cross(n).normalize(),f.setFrom(r).cross(c).normalize(),this.identity();let d=this.values;return d[Ot]=r.x,d[Wt]=r.y,d[Nt]=r.z,d[te]=f.x,d[le]=f.y,d[ce]=f.z,d[Me]=-c.x,d[Zt]=-c.y,d[qt]=-c.z,Fi.tmpMatrix.identity(),Fi.tmpMatrix.values[jt]=-e.x,Fi.tmpMatrix.values[de]=-e.y,Fi.tmpMatrix.values[se]=-e.z,this.multiply(Fi.tmpMatrix),this}},qs=class{position=new $t(0,0,0);direction=new $t(0,0,-1);up=new $t(0,1,0);near=0;far=100;zoom=1;viewportWidth=0;viewportHeight=0;projectionView=new Li;inverseProjectionView=new Li;projection=new Li;view=new Li;constructor(i,e){this.viewportWidth=i,this.viewportHeight=e,this.update();}update(){let i=this.projection,e=this.view,s=this.projectionView,n=this.inverseProjectionView,r=this.zoom,f=this.viewportWidth,c=this.viewportHeight;i.ortho(r*(-f/2),r*(f/2),r*(-c/2),r*(c/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),s.set(i.values),s.multiply(e),n.set(s.values).invert();}screenToWorld(i,e,s){let n=i.x,r=s-i.y-1;return i.x=2*n/e-1,i.y=2*r/s-1,i.z=2*i.z-1,i.project(this.inverseProjectionView),i}worldToScreen(i,e,s){return i.project(this.projectionView),i.x=e*(i.x+1)/2,i.y=s*(i.y+1)/2,i.z=(i.z+1)/2,i}setViewport(i,e){this.viewportWidth=i,this.viewportHeight=e;}},Ti=class{element;mouseX=0;mouseY=0;buttonDown=false;touch0=null;touch1=null;initialPinchDistance=0;listeners=new Array;autoPreventDefault;isTouch=false;callbacks;constructor(i,e=true){this.element=i,this.autoPreventDefault=e,this.callbacks=this.setupCallbacks(i);}setupCallbacks(i){let e=p=>{if(p instanceof MouseEvent&&!this.isTouch){let x=i.getBoundingClientRect();this.mouseX=p.clientX-x.left,this.mouseY=p.clientY-x.top,this.buttonDown=true,this.listeners.map(w=>{w.down&&w.down(this.mouseX,this.mouseY,p);});}},s=p=>{if(p instanceof MouseEvent&&!this.isTouch){let x=i.getBoundingClientRect();this.mouseX=p.clientX-x.left,this.mouseY=p.clientY-x.top,this.listeners.map(w=>{this.buttonDown?w.dragged&&w.dragged(this.mouseX,this.mouseY,p):w.moved&&w.moved(this.mouseX,this.mouseY,p);});}},n=p=>{if(p instanceof MouseEvent&&!this.isTouch){let x=i.getBoundingClientRect();this.mouseX=p.clientX-x.left,this.mouseY=p.clientY-x.top,this.buttonDown=false,this.listeners.map(w=>{w.up&&w.up(this.mouseX,this.mouseY,p);});}},r=p=>{this.autoPreventDefault&&p.preventDefault();let x=p.deltaY;p.deltaMode==WheelEvent.DOM_DELTA_LINE&&(x*=8),p.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(x*=24),this.listeners.map(w=>{w.wheel&&w.wheel(p.deltaY,p);});},f=p=>{if(this.isTouch=true,!this.touch0||!this.touch1){var x=p.changedTouches;let w=x.item(0);if(!w)return;let C=i.getBoundingClientRect(),F=w.clientX-C.left,B=w.clientY-C.top,X=new Ss(w.identifier,F,B);if(this.mouseX=F,this.mouseY=B,this.buttonDown=true,!this.touch0)this.touch0=X,this.listeners.map(z=>{z.down&&z.down(X.x,X.y,p);});else if(!this.touch1){this.touch1=X;let z=this.touch1.x-this.touch0.x,W=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(z*z+W*W),this.listeners.map(Z=>{Z.zoom&&Z.zoom(this.initialPinchDistance,this.initialPinchDistance,p);});}}this.autoPreventDefault&&p.preventDefault();},c=p=>{if(this.isTouch=true,this.touch0){var x=p.changedTouches;let F=i.getBoundingClientRect();for(var w=0;w<x.length;w++){var C=x[w];let B=C.clientX-F.left,X=C.clientY-F.top;this.touch0.identifier===C.identifier&&(this.touch0.x=this.mouseX=B,this.touch0.y=this.mouseY=X,this.listeners.map(z=>{z.dragged&&z.dragged(B,X,p);})),this.touch1&&this.touch1.identifier===C.identifier&&(this.touch1.x=this.mouseX=B,this.touch1.y=this.mouseY=X);}if(this.touch0&&this.touch1){let B=this.touch1.x-this.touch0.x,X=this.touch1.x-this.touch0.x,z=Math.sqrt(B*B+X*X);this.listeners.map(W=>{W.zoom&&W.zoom(this.initialPinchDistance,z,p);});}}this.autoPreventDefault&&p.preventDefault();},d=p=>{if(this.isTouch=true,this.touch0){var x=p.changedTouches;let F=i.getBoundingClientRect();for(var w=0;w<x.length;w++){var C=x[w];let B=C.clientX-F.left,X=C.clientY-F.top;if(this.touch0.identifier===C.identifier)if(this.touch0=null,this.mouseX=B,this.mouseY=X,this.listeners.map(z=>{z.up&&z.up(B,X,p);}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=true,this.listeners.map(z=>{z.down&&z.down(this.touch0.x,this.touch0.y,p);});else {this.buttonDown=false;break}this.touch1&&this.touch1.identifier&&(this.touch1=null);}}this.autoPreventDefault&&p.preventDefault();};return i.addEventListener("mousedown",e,true),i.addEventListener("mousemove",s,true),i.addEventListener("mouseup",n,true),i.addEventListener("wheel",r,true),i.addEventListener("touchstart",f,{passive:false,capture:false}),i.addEventListener("touchmove",c,{passive:false,capture:false}),i.addEventListener("touchend",d,{passive:false,capture:false}),i.addEventListener("touchcancel",d),{mouseDown:e,mouseMove:s,mouseUp:n,mouseWheel:r,touchStart:f,touchMove:c,touchEnd:d}}dispose(){let i=this.element;i.removeEventListener("mousedown",this.callbacks.mouseDown,true),i.removeEventListener("mousemove",this.callbacks.mouseMove,true),i.removeEventListener("mouseup",this.callbacks.mouseUp,true),i.removeEventListener("wheel",this.callbacks.mouseWheel,true),i.removeEventListener("touchstart",this.callbacks.touchStart,{capture:false}),i.removeEventListener("touchmove",this.callbacks.touchMove,{capture:false}),i.removeEventListener("touchend",this.callbacks.touchEnd,{capture:false}),i.removeEventListener("touchcancel",this.callbacks.touchEnd),this.listeners.length=0;}addListener(i){this.listeners.push(i);}removeListener(i){let e=this.listeners.indexOf(i);e>-1&&this.listeners.splice(e,1);}},Ss=class{constructor(i,e,s){this.identifier=i,this.x=e,this.y=s;}},Hs=class{constructor(i,e){this.canvas=i,this.camera=e;let s=0,n=0,f=0,c=0,d=0,p=0,x=0;new Ti(i).addListener({down:(w,C)=>{s=e.position.x,n=e.position.y,f=d=w,c=p=C,x=e.zoom;},dragged:(w,C)=>{let F=w-f,B=C-c,X=e.screenToWorld(new $t(0,0),i.clientWidth,i.clientHeight),z=e.screenToWorld(new $t(F,B),i.clientWidth,i.clientHeight).sub(X);e.position.set(s-z.x,n-z.y,0),e.update(),d=w,p=C;},wheel:w=>{let C=w/200*e.zoom,F=e.zoom+C;if(F>0){let B=0,X=0;if(w<0)B=d,X=p;else {let Z=new $t(i.clientWidth/2+15,i.clientHeight/2),J=d-Z.x,j=i.clientHeight-1-p-Z.y;B=Z.x-J,X=i.clientHeight-1-Z.y+j;}let z=e.screenToWorld(new $t(B,X),i.clientWidth,i.clientHeight);e.zoom=F,e.update();let W=e.screenToWorld(new $t(B,X),i.clientWidth,i.clientHeight);e.position.add(z.sub(W)),e.update();}},zoom:(w,C)=>{let F=w/C;e.zoom=x*F;},up:(w,C)=>{d=w,p=C;},moved:(w,C)=>{d=w,p=C;}});}},Oe=class Ne{constructor(e,s,n){this.vertexShader=s,this.fragmentShader=n,this.vsSource=s,this.fsSource=n,this.context=e instanceof Jt?e:new Jt(e),this.context.addRestorable(this),this.compile();}static MVP_MATRIX="u_projTrans";static POSITION="a_position";static COLOR="a_color";static COLOR2="a_color2";static TEXCOORDS="a_texCoords";static SAMPLER="u_texture";context;vs=null;vsSource;fs=null;fsSource;program=null;tmp2x2=new Float32Array(4);tmp3x3=new Float32Array(9);tmp4x4=new Float32Array(16);getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let e=this.context.gl;try{if(this.vs=this.compileShader(e.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(e.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs);}catch(s){throw this.dispose(),s}}compileShader(e,s){let n=this.context.gl,r=n.createShader(e);if(!r)throw new Error("Couldn't create shader.");if(n.shaderSource(r,s),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){let f="Couldn't compile shader: "+n.getShaderInfoLog(r);if(n.deleteShader(r),!n.isContextLost())throw new Error(f)}return r}compileProgram(e,s){let n=this.context.gl,r=n.createProgram();if(!r)throw new Error("Couldn't compile program.");if(n.attachShader(r,e),n.attachShader(r,s),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS)){let f="Couldn't compile shader program: "+n.getProgramInfoLog(r);if(n.deleteProgram(r),!n.isContextLost())throw new Error(f)}return r}restore(){this.compile();}bind(){this.context.gl.useProgram(this.program);}unbind(){this.context.gl.useProgram(null);}setUniformi(e,s){this.context.gl.uniform1i(this.getUniformLocation(e),s);}setUniformf(e,s){this.context.gl.uniform1f(this.getUniformLocation(e),s);}setUniform2f(e,s,n){this.context.gl.uniform2f(this.getUniformLocation(e),s,n);}setUniform3f(e,s,n,r){this.context.gl.uniform3f(this.getUniformLocation(e),s,n,r);}setUniform4f(e,s,n,r,f){this.context.gl.uniform4f(this.getUniformLocation(e),s,n,r,f);}setUniform2x2f(e,s){let n=this.context.gl;this.tmp2x2.set(s),n.uniformMatrix2fv(this.getUniformLocation(e),false,this.tmp2x2);}setUniform3x3f(e,s){let n=this.context.gl;this.tmp3x3.set(s),n.uniformMatrix3fv(this.getUniformLocation(e),false,this.tmp3x3);}setUniform4x4f(e,s){let n=this.context.gl;this.tmp4x4.set(s),n.uniformMatrix4fv(this.getUniformLocation(e),false,this.tmp4x4);}getUniformLocation(e){let s=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let n=s.getUniformLocation(this.program,e);if(!n&&!s.isContextLost())throw new Error(`Couldn't find location for uniform ${e}`);return n}getAttributeLocation(e){let s=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let n=s.getAttribLocation(this.program,e);if(n==-1&&!s.isContextLost())throw new Error(`Couldn't find location for attribute ${e}`);return n}dispose(){this.context.removeRestorable(this);let e=this.context.gl;this.vs&&(e.deleteShader(this.vs),this.vs=null),this.fs&&(e.deleteShader(this.fs),this.fs=null),this.program&&(e.deleteProgram(this.program),this.program=null);}static newColoredTextured(e){let s=`
attribute vec4 ${Ne.POSITION};
attribute vec4 ${Ne.COLOR};
attribute vec2 ${Ne.TEXCOORDS};
uniform mat4 ${Ne.MVP_MATRIX};
varying vec4 v_color;
varying vec2 v_texCoords;

void main () {
	v_color = ${Ne.COLOR};
	v_texCoords = ${Ne.TEXCOORDS};
	gl_Position = ${Ne.MVP_MATRIX} * ${Ne.POSITION};
}
`,n=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
}
`;return new Ne(e,s,n)}static newTwoColoredTextured(e){let s=`
attribute vec4 ${Ne.POSITION};
attribute vec4 ${Ne.COLOR};
attribute vec4 ${Ne.COLOR2};
attribute vec2 ${Ne.TEXCOORDS};
uniform mat4 ${Ne.MVP_MATRIX};
varying vec4 v_light;
varying vec4 v_dark;
varying vec2 v_texCoords;

void main () {
	v_light = ${Ne.COLOR};
	v_dark = ${Ne.COLOR2};
	v_texCoords = ${Ne.TEXCOORDS};
	gl_Position = ${Ne.MVP_MATRIX} * ${Ne.POSITION};
}
`,n=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_light;
varying LOWP vec4 v_dark;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	vec4 texColor = texture2D(u_texture, v_texCoords);
	gl_FragColor.a = texColor.a * v_light.a;
	gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
}
`;return new Ne(e,s,n)}static newColored(e){let s=`
attribute vec4 ${Ne.POSITION};
attribute vec4 ${Ne.COLOR};
uniform mat4 ${Ne.MVP_MATRIX};
varying vec4 v_color;

void main () {
	v_color = ${Ne.COLOR};
	gl_Position = ${Ne.MVP_MATRIX} * ${Ne.POSITION};
}
`,n=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;

void main () {
	gl_FragColor = v_color;
}
`;return new Ne(e,s,n)}},Gi=class{constructor(i,e,s,n){this.attributes=e,this.context=i instanceof Jt?i:new Jt(i),this.elementsPerVertex=0;for(let r=0;r<e.length;r++)this.elementsPerVertex+=e[r].numElements;this.vertices=new Float32Array(s*this.elementsPerVertex),this.indices=new Uint16Array(n),this.context.addRestorable(this);}context;vertices;verticesBuffer=null;verticesLength=0;dirtyVertices=false;indices;indicesBuffer=null;indicesLength=0;dirtyIndices=false;elementsPerVertex=0;getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(i){this.dirtyVertices=true,this.verticesLength=i;}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(i){this.dirtyIndices=true,this.indicesLength=i;}getIndices(){return this.indices}getVertexSizeInFloats(){let i=0;for(var e=0;e<this.attributes.length;e++){let s=this.attributes[e];i+=s.numElements;}return i}setVertices(i){if(this.dirtyVertices=true,i.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(i,0),this.verticesLength=i.length;}setIndices(i){if(this.dirtyIndices=true,i.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(i,0),this.indicesLength=i.length;}draw(i,e){this.drawWithOffset(i,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex);}drawWithOffset(i,e,s,n){let r=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(i),this.indicesLength>0?r.drawElements(e,n,r.UNSIGNED_SHORT,s*2):r.drawArrays(e,s,n),this.unbind(i);}bind(i){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let s=0;for(let n=0;n<this.attributes.length;n++){let r=this.attributes[n],f=i.getAttributeLocation(r.name);e.enableVertexAttribArray(f),e.vertexAttribPointer(f,r.numElements,e.FLOAT,false,this.elementsPerVertex*4,s*4),s+=r.numElements;}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);}unbind(i){let e=this.context.gl;for(let s=0;s<this.attributes.length;s++){let n=this.attributes[s],r=i.getAttributeLocation(n.name);e.disableVertexAttribArray(r);}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);}update(){let i=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,this.verticesBuffer),i.bufferData(i.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),i.DYNAMIC_DRAW),this.dirtyVertices=false),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=i.createBuffer()),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),i.DYNAMIC_DRAW),this.dirtyIndices=false);}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update();}dispose(){this.context.removeRestorable(this);let i=this.context.gl;i.deleteBuffer(this.verticesBuffer),i.deleteBuffer(this.indicesBuffer);}},Ei=class{constructor(i,e,s){this.name=i,this.type=e,this.numElements=s;}},bs=class extends Ei{constructor(){super(Oe.POSITION,0,2);}},ur=class extends Ei{constructor(){super(Oe.POSITION,0,3);}},rs=class extends Ei{constructor(i=0){super(Oe.TEXCOORDS+(i==0?"":i),0,2);}},yt=class extends Ei{constructor(){super(Oe.COLOR,0,4);}},ns=class extends Ei{constructor(){super(Oe.COLOR2,0,4);}},as=(i=>(i[i.Float=0]="Float",i))(as||{}),Ii=1,zi=769,Zi=770,Vi=771,Js=774,Qs=class ls{static disableCulling=false;context;drawCalls=0;static globalDrawCalls=0;isDrawing=false;mesh;shader=null;lastTexture=null;verticesLength=0;indicesLength=0;srcColorBlend;srcAlphaBlend;dstBlend;cullWasEnabled=false;constructor(e,s=true,n=10920){if(n>10920)throw new Error("Can't have more than 10920 triangles per batch: "+n);this.context=e instanceof Jt?e:new Jt(e);let r=s?[new bs,new yt,new rs,new ns]:[new bs,new yt,new rs];this.mesh=new Gi(e,r,n,n*3);let f=this.context.gl;this.srcColorBlend=f.SRC_ALPHA,this.srcAlphaBlend=f.ONE,this.dstBlend=f.ONE_MINUS_SRC_ALPHA;}begin(e){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=e,this.lastTexture=null,this.isDrawing=true;let s=this.context.gl;s.enable(s.BLEND),s.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}static blendModesGL=[{srcRgb:Zi,srcRgbPma:Ii,dstRgb:Vi,srcAlpha:Ii},{srcRgb:Zi,srcRgbPma:Ii,dstRgb:Ii,srcAlpha:Ii},{srcRgb:Js,srcRgbPma:Js,dstRgb:Vi,srcAlpha:Ii},{srcRgb:Ii,srcRgbPma:Ii,dstRgb:zi,srcAlpha:Ii}];setBlendMode(e,s){let n=ls.blendModesGL[e],r=s?n.srcRgbPma:n.srcRgb,f=n.srcAlpha,c=n.dstRgb;this.srcColorBlend==r&&this.srcAlphaBlend==f&&this.dstBlend==c||(this.srcColorBlend=r,this.srcAlphaBlend=f,this.dstBlend=c,this.isDrawing&&this.flush(),this.context.gl.blendFuncSeparate(r,c,f,c));}draw(e,s,n){e!=this.lastTexture?(this.flush(),this.lastTexture=e):(this.verticesLength+s.length>this.mesh.getVertices().length||this.indicesLength+n.length>this.mesh.getIndices().length)&&this.flush();let r=this.mesh.numVertices();this.mesh.getVertices().set(s,this.verticesLength),this.verticesLength+=s.length,this.mesh.setVerticesLength(this.verticesLength);let f=this.mesh.getIndices();for(let c=this.indicesLength,d=0;d<n.length;c++,d++)f[c]=n[d]+r;this.indicesLength+=n.length,this.mesh.setIndicesLength(this.indicesLength);}flush(){if(this.verticesLength!=0){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,ls.globalDrawCalls++;}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=false;let e=this.context.gl;e.disable(e.BLEND);}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let e=ls.globalDrawCalls;return ls.globalDrawCalls=0,e}dispose(){this.mesh.dispose();}},os=class{context;isDrawing=false;mesh;shapeType=4;color=new O(1,1,1,1);shader=null;vertexIndex=0;tmp=new it;srcColorBlend;srcAlphaBlend;dstBlend;constructor(i,e=10920){if(e>10920)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=i instanceof Jt?i:new Jt(i),this.mesh=new Gi(i,[new bs,new yt],e,0);let s=this.context.gl;this.srcColorBlend=s.SRC_ALPHA,this.srcAlphaBlend=s.ONE,this.dstBlend=s.ONE_MINUS_SRC_ALPHA;}begin(i){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=i,this.vertexIndex=0,this.isDrawing=true;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}setBlendMode(i,e,s){this.srcColorBlend=i,this.srcAlphaBlend=e,this.dstBlend=s,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(i,s,e,s));}setColor(i){this.color.setFromColor(i);}setColorWith(i,e,s,n){this.color.set(i,e,s,n);}point(i,e,s){this.check(0,1),s||(s=this.color),this.vertex(i,e,s);}line(i,e,s,n,r){this.check(1,2);this.mesh.getVertices();this.vertexIndex;r||(r=this.color),this.vertex(i,e,r),this.vertex(s,n,r);}triangle(i,e,s,n,r,f,c,d,p,x){this.check(i?4:1,3);this.mesh.getVertices();this.vertexIndex;d||(d=this.color),p||(p=this.color),x||(x=this.color),i?(this.vertex(e,s,d),this.vertex(n,r,p),this.vertex(f,c,x)):(this.vertex(e,s,d),this.vertex(n,r,p),this.vertex(n,r,d),this.vertex(f,c,p),this.vertex(f,c,d),this.vertex(e,s,p));}quad(i,e,s,n,r,f,c,d,p,x,w,C,F){this.check(i?4:1,3);this.mesh.getVertices();this.vertexIndex;x||(x=this.color),w||(w=this.color),C||(C=this.color),F||(F=this.color),i?(this.vertex(e,s,x),this.vertex(n,r,w),this.vertex(f,c,C),this.vertex(f,c,C),this.vertex(d,p,F),this.vertex(e,s,x)):(this.vertex(e,s,x),this.vertex(n,r,w),this.vertex(n,r,w),this.vertex(f,c,C),this.vertex(f,c,C),this.vertex(d,p,F),this.vertex(d,p,F),this.vertex(e,s,x));}rect(i,e,s,n,r,f){this.quad(i,e,s,e+n,s,e+n,s+r,e,s+r,f,f,f,f);}rectLine(i,e,s,n,r,f,c){this.check(i?4:1,8),c||(c=this.color);let d=this.tmp.set(r-s,e-n);d.normalize(),f*=.5;let p=d.x*f,x=d.y*f;i?(this.vertex(e+p,s+x,c),this.vertex(e-p,s-x,c),this.vertex(n+p,r+x,c),this.vertex(n-p,r-x,c),this.vertex(n+p,r+x,c),this.vertex(e-p,s-x,c)):(this.vertex(e+p,s+x,c),this.vertex(e-p,s-x,c),this.vertex(n+p,r+x,c),this.vertex(n-p,r-x,c),this.vertex(n+p,r+x,c),this.vertex(e+p,s+x,c),this.vertex(n-p,r-x,c),this.vertex(e-p,s-x,c));}x(i,e,s){this.line(i-s,e-s,i+s,e+s),this.line(i-s,e+s,i+s,e-s);}polygon(i,e,s,n){if(s<3)throw new Error("Polygon must contain at least 3 vertices");this.check(1,s*2),n||(n=this.color);this.mesh.getVertices();this.vertexIndex;e<<=1,s<<=1;let c=i[e],d=i[e+1],p=e+s;for(let x=e,w=e+s-2;x<w;x+=2){let C=i[x],F=i[x+1],B=0,X=0;x+2>=p?(B=c,X=d):(B=i[x+2],X=i[x+3]),this.vertex(C,F,n),this.vertex(B,X,n);}}circle(i,e,s,n,r,f=0){if(f==0&&(f=Math.max(1,6*T.cbrt(n)|0)),f<=0)throw new Error("segments must be > 0.");r||(r=this.color);let c=2*T.PI/f,d=Math.cos(c),p=Math.sin(c),x=n,w=0;if(i){this.check(4,f*3+3),f--;for(let F=0;F<f;F++){this.vertex(e,s,r),this.vertex(e+x,s+w,r);let B=x;x=d*x-p*w,w=p*B+d*w,this.vertex(e+x,s+w,r);}this.vertex(e,s,r),this.vertex(e+x,s+w,r);}else {this.check(1,f*2+2);for(let F=0;F<f;F++){this.vertex(e+x,s+w,r);let B=x;x=d*x-p*w,w=p*B+d*w,this.vertex(e+x,s+w,r);}this.vertex(e+x,s+w,r);}x=n,w=0,this.vertex(e+x,s+w,r);}curve(i,e,s,n,r,f,c,d,p,x){this.check(1,p*2+2),x||(x=this.color);let w=1/p,C=w*w,F=w*w*w,B=3*w,X=3*C,z=6*C,W=6*F,Z=i-s*2+r,J=e-n*2+f,j=(s-r)*3-i+c,Q=(n-f)*3-e+d,tt=i,nt=e,pt=(s-i)*B+Z*X+j*F,mt=(n-e)*B+J*X+Q*F,gt=Z*z+j*W,Ct=J*z+Q*W,Ft=j*W,Vt=Q*W;for(;p-- >0;)this.vertex(tt,nt,x),tt+=pt,nt+=mt,pt+=gt,mt+=Ct,gt+=Ft,Ct+=Vt,this.vertex(tt,nt,x);this.vertex(tt,nt,x),this.vertex(c,d,x);}vertex(i,e,s){let n=this.vertexIndex,r=this.mesh.getVertices();r[n++]=i,r[n++]=e,r[n++]=s.r,r[n++]=s.g,r[n++]=s.b,r[n++]=s.a,this.vertexIndex=n;}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let i=this.context.gl;i.disable(i.BLEND),this.isDrawing=false;}flush(){if(this.vertexIndex!=0){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0;}}check(i,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==i)if(this.mesh.maxVertices()-this.mesh.numVertices()<e)this.flush();else return;else this.flush(),this.shapeType=i;}dispose(){this.mesh.dispose();}},_s=(i=>(i[i.Point=0]="Point",i[i.Line=1]="Line",i[i.Filled=4]="Filled",i))(_s||{}),Ks=class Ur{boneLineColor=new O(1,0,0,1);boneOriginColor=new O(0,1,0,1);attachmentLineColor=new O(0,0,1,.5);triangleLineColor=new O(1,.64,0,.5);pathColor=new O().setFromString("FF7F00");clipColor=new O(.8,0,0,2);aabbColor=new O(0,1,0,.5);drawBones=true;drawRegionAttachments=true;drawBoundingBoxes=true;drawMeshHull=true;drawMeshTriangles=true;drawPaths=true;drawSkeletonXY=false;drawClipping=true;premultipliedAlpha=false;scale=1;boneWidth=2;context;bounds=new ae;temp=new Array;vertices=D.newFloatArray(2*1024);static LIGHT_GRAY=new O(192/255,192/255,192/255,1);static GREEN=new O(0,1,0,1);constructor(e){this.context=e instanceof Jt?e:new Jt(e);}draw(e,s,n){let r=s.x,f=s.y,c=this.context.gl,d=this.premultipliedAlpha?c.ONE:c.SRC_ALPHA;e.setBlendMode(d,c.ONE,c.ONE_MINUS_SRC_ALPHA);let p=s.bones;if(this.drawBones){e.setColor(this.boneLineColor);for(let x=0,w=p.length;x<w;x++){let C=p[x];if(n&&n.indexOf(C.data.name)>-1||!C.parent)continue;let F=C.data.length*C.a+C.worldX,B=C.data.length*C.c+C.worldY;e.rectLine(true,C.worldX,C.worldY,F,B,this.boneWidth*this.scale);}this.drawSkeletonXY&&e.x(r,f,4*this.scale);}if(this.drawRegionAttachments){e.setColor(this.attachmentLineColor);let x=s.slots;for(let w=0,C=x.length;w<C;w++){let F=x[w],B=F.getAttachment();if(B instanceof Ni){let X=B,z=this.vertices;X.computeWorldVertices(F,z,0,2),e.line(z[0],z[1],z[2],z[3]),e.line(z[2],z[3],z[4],z[5]),e.line(z[4],z[5],z[6],z[7]),e.line(z[6],z[7],z[0],z[1]);}}}if(this.drawMeshHull||this.drawMeshTriangles){let x=s.slots;for(let w=0,C=x.length;w<C;w++){let F=x[w];if(!F.bone.active)continue;let B=F.getAttachment();if(!(B instanceof Xi))continue;let X=B,z=this.vertices;X.computeWorldVertices(F,0,X.worldVerticesLength,z,0,2);let W=X.triangles,Z=X.hullLength;if(this.drawMeshTriangles){e.setColor(this.triangleLineColor);for(let J=0,j=W.length;J<j;J+=3){let Q=W[J]*2,tt=W[J+1]*2,nt=W[J+2]*2;e.triangle(false,z[Q],z[Q+1],z[tt],z[tt+1],z[nt],z[nt+1]);}}if(this.drawMeshHull&&Z>0){e.setColor(this.attachmentLineColor),Z=(Z>>1)*2;let J=z[Z-2],j=z[Z-1];for(let Q=0,tt=Z;Q<tt;Q+=2){let nt=z[Q],pt=z[Q+1];e.line(nt,pt,J,j),J=nt,j=pt;}}}}if(this.drawBoundingBoxes){let x=this.bounds;x.update(s,true),e.setColor(this.aabbColor),e.rect(false,x.minX,x.minY,x.getWidth(),x.getHeight());let w=x.polygons,C=x.boundingBoxes;for(let F=0,B=w.length;F<B;F++){let X=w[F];e.setColor(C[F].color),e.polygon(X,0,X.length);}}if(this.drawPaths){let x=s.slots;for(let w=0,C=x.length;w<C;w++){let F=x[w];if(!F.bone.active)continue;let B=F.getAttachment();if(!(B instanceof Pi))continue;let X=B,z=X.worldVerticesLength,W=this.temp=D.setArraySize(this.temp,z,0);X.computeWorldVertices(F,0,z,W,0,2);let Z=this.pathColor,J=W[2],j=W[3],Q=0,tt=0;if(X.closed){e.setColor(Z);let nt=W[0],pt=W[1],mt=W[z-2],gt=W[z-1];Q=W[z-4],tt=W[z-3],e.curve(J,j,nt,pt,mt,gt,Q,tt,32),e.setColor(Ur.LIGHT_GRAY),e.line(J,j,nt,pt),e.line(Q,tt,mt,gt);}z-=4;for(let nt=4;nt<z;nt+=6){let pt=W[nt],mt=W[nt+1],gt=W[nt+2],Ct=W[nt+3];Q=W[nt+4],tt=W[nt+5],e.setColor(Z),e.curve(J,j,pt,mt,gt,Ct,Q,tt,32),e.setColor(Ur.LIGHT_GRAY),e.line(J,j,pt,mt),e.line(Q,tt,gt,Ct),J=Q,j=tt;}}}if(this.drawBones){e.setColor(this.boneOriginColor);for(let x=0,w=p.length;x<w;x++){let C=p[x];n&&n.indexOf(C.data.name)>-1||e.circle(true,C.worldX,C.worldY,3*this.scale,this.boneOriginColor,8);}}if(this.drawClipping){let x=s.slots;e.setColor(this.clipColor);for(let w=0,C=x.length;w<C;w++){let F=x[w];if(!F.bone.active)continue;let B=F.getAttachment();if(!(B instanceof ui))continue;let X=B,z=X.worldVerticesLength,W=this.temp=D.setArraySize(this.temp,z,0);X.computeWorldVertices(F,0,z,W,0,2);for(let Z=0,J=W.length;Z<J;Z+=2){let j=W[Z],Q=W[Z+1],tt=W[(Z+2)%W.length],nt=W[(Z+3)%W.length];e.line(j,Q,tt,nt);}}}}dispose(){}},Di=class{constructor(i,e,s){this.vertices=i,this.numVertices=e,this.numFloats=s;}},fr=class rn{static QUAD_TRIANGLES=[0,1,2,2,3,0];premultipliedAlpha=false;tempColor=new O;tempColor2=new O;vertices;vertexSize=8;twoColorTint=false;renderable=new Di([],0,0);clipper=new fe;temp=new it;temp2=new it;temp3=new O;temp4=new O;constructor(e,s=true){this.twoColorTint=s,s&&(this.vertexSize+=4),this.vertices=D.newFloatArray(this.vertexSize*1024);}draw(e,s,n=-1,r=-1,f=null){let c=this.clipper,d=this.premultipliedAlpha,p=this.twoColorTint,x=null,w=this.renderable,C,F,B=s.drawOrder,X,z=s.color,W=p?12:8,Z=false;n==-1&&(Z=true);for(let J=0,j=B.length;J<j;J++){let Q=c.isClipping()?2:W,tt=B[J];if(!tt.bone.active){c.clipEndWithSlot(tt);continue}if(n>=0&&n==tt.data.index&&(Z=true),!Z){c.clipEndWithSlot(tt);continue}r>=0&&r==tt.data.index&&(Z=false);let nt=tt.getAttachment(),pt;if(nt instanceof Ni){let mt=nt;w.vertices=this.vertices,w.numVertices=4,w.numFloats=Q<<2,mt.computeWorldVertices(tt,w.vertices,0,Q),F=rn.QUAD_TRIANGLES,C=mt.uvs,pt=mt.region.texture,X=mt.color;}else if(nt instanceof Xi){let mt=nt;w.vertices=this.vertices,w.numVertices=mt.worldVerticesLength>>1,w.numFloats=w.numVertices*Q,w.numFloats>w.vertices.length&&(w.vertices=this.vertices=D.newFloatArray(w.numFloats)),mt.computeWorldVertices(tt,0,mt.worldVerticesLength,w.vertices,0,Q),F=mt.triangles,pt=mt.region.texture,C=mt.uvs,X=mt.color;}else if(nt instanceof ui){let mt=nt;c.clipStart(tt,mt);continue}else {c.clipEndWithSlot(tt);continue}if(pt){let mt=tt.color,gt=this.tempColor;gt.r=z.r*mt.r*X.r,gt.g=z.g*mt.g*X.g,gt.b=z.b*mt.b*X.b,gt.a=z.a*mt.a*X.a,d&&(gt.r*=gt.a,gt.g*=gt.a,gt.b*=gt.a);let Ct=this.tempColor2;tt.darkColor?(d?(Ct.r=tt.darkColor.r*gt.a,Ct.g=tt.darkColor.g*gt.a,Ct.b=tt.darkColor.b*gt.a):Ct.setFromColor(tt.darkColor),Ct.a=d?1:0):Ct.set(0,0,0,1);let Ft=tt.data.blendMode;if(Ft!=x&&(x=Ft,e.setBlendMode(x,d)),c.isClipping()){c.clipTriangles(w.vertices,F,F.length,C,gt,Ct,p);let Vt=new Float32Array(c.clippedVertices),Ut=c.clippedTriangles;f&&f(Vt,Vt.length,W),e.draw(pt,Vt,Ut);}else {let Vt=w.vertices;if(p)for(let St=2,It=0,Ht=w.numFloats;St<Ht;St+=W,It+=2)Vt[St]=gt.r,Vt[St+1]=gt.g,Vt[St+2]=gt.b,Vt[St+3]=gt.a,Vt[St+4]=C[It],Vt[St+5]=C[It+1],Vt[St+6]=Ct.r,Vt[St+7]=Ct.g,Vt[St+8]=Ct.b,Vt[St+9]=Ct.a;else for(let St=2,It=0,Ht=w.numFloats;St<Ht;St+=W,It+=2)Vt[St]=gt.r,Vt[St+1]=gt.g,Vt[St+2]=gt.b,Vt[St+3]=gt.a,Vt[St+4]=C[It],Vt[St+5]=C[It+1];let Ut=w.vertices.subarray(0,w.numFloats);f&&f(w.vertices,w.numFloats,W),e.draw(pt,Ut,F);}}c.clipEndWithSlot(tt);}c.clipEnd();}getSkeletonClipping(){return this.clipper}},At=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Ts=[0,1,2,2,3,0],Is=new O(1,1,1,1),t=class{context;canvas;camera;batcher;twoColorTint=false;batcherShader;shapes;shapesShader;activeRenderer=null;skeletonRenderer;skeletonDebugRenderer;constructor(i,e,s=true){this.canvas=i,this.context=e instanceof Jt?e:new Jt(e),this.twoColorTint=s,this.camera=new qs(i.width,i.height),this.batcherShader=s?Oe.newTwoColoredTextured(this.context):Oe.newColoredTextured(this.context),this.batcher=new Qs(this.context,s),this.shapesShader=Oe.newColored(this.context),this.shapes=new os(this.context),this.skeletonRenderer=new fr(this.context,s),this.skeletonDebugRenderer=new Ks(this.context);}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose();}begin(){this.camera.update(),this.enableRenderer(this.batcher);}drawSkeleton(i,e=false,s=-1,n=-1,r=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,i,s,n,r);}drawSkeletonDebug(i,e=false,s){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,i,s);}drawTexture(i,e,s,n,r,f){this.enableRenderer(this.batcher),f||(f=Is);var c=0;At[c++]=e,At[c++]=s,At[c++]=f.r,At[c++]=f.g,At[c++]=f.b,At[c++]=f.a,At[c++]=0,At[c++]=1,this.twoColorTint&&(At[c++]=0,At[c++]=0,At[c++]=0,At[c++]=0),At[c++]=e+n,At[c++]=s,At[c++]=f.r,At[c++]=f.g,At[c++]=f.b,At[c++]=f.a,At[c++]=1,At[c++]=1,this.twoColorTint&&(At[c++]=0,At[c++]=0,At[c++]=0,At[c++]=0),At[c++]=e+n,At[c++]=s+r,At[c++]=f.r,At[c++]=f.g,At[c++]=f.b,At[c++]=f.a,At[c++]=1,At[c++]=0,this.twoColorTint&&(At[c++]=0,At[c++]=0,At[c++]=0,At[c++]=0),At[c++]=e,At[c++]=s+r,At[c++]=f.r,At[c++]=f.g,At[c++]=f.b,At[c++]=f.a,At[c++]=0,At[c++]=0,this.twoColorTint&&(At[c++]=0,At[c++]=0,At[c++]=0,At[c]=0),this.batcher.draw(i,At,Ts);}drawTextureUV(i,e,s,n,r,f,c,d,p,x){this.enableRenderer(this.batcher),x||(x=Is);var w=0;At[w++]=e,At[w++]=s,At[w++]=x.r,At[w++]=x.g,At[w++]=x.b,At[w++]=x.a,At[w++]=f,At[w++]=c,this.twoColorTint&&(At[w++]=0,At[w++]=0,At[w++]=0,At[w++]=0),At[w++]=e+n,At[w++]=s,At[w++]=x.r,At[w++]=x.g,At[w++]=x.b,At[w++]=x.a,At[w++]=d,At[w++]=c,this.twoColorTint&&(At[w++]=0,At[w++]=0,At[w++]=0,At[w++]=0),At[w++]=e+n,At[w++]=s+r,At[w++]=x.r,At[w++]=x.g,At[w++]=x.b,At[w++]=x.a,At[w++]=d,At[w++]=p,this.twoColorTint&&(At[w++]=0,At[w++]=0,At[w++]=0,At[w++]=0),At[w++]=e,At[w++]=s+r,At[w++]=x.r,At[w++]=x.g,At[w++]=x.b,At[w++]=x.a,At[w++]=f,At[w++]=p,this.twoColorTint&&(At[w++]=0,At[w++]=0,At[w++]=0,At[w]=0),this.batcher.draw(i,At,Ts);}drawTextureRotated(i,e,s,n,r,f,c,d,p){this.enableRenderer(this.batcher),p||(p=Is);let x=e+f,w=s+c,C=-f,F=-c,B=n-f,X=r-c,z=C,W=F,Z=C,J=X,j=B,Q=X,tt=B,nt=F,pt=0,mt=0,gt=0,Ct=0,Ft=0,Vt=0,Ut=0,St=0;if(d!=0){let Ht=T.cosDeg(d),Se=T.sinDeg(d);pt=Ht*z-Se*W,mt=Se*z+Ht*W,Ut=Ht*Z-Se*J,St=Se*Z+Ht*J,Ft=Ht*j-Se*Q,Vt=Se*j+Ht*Q,gt=Ft+(pt-Ut),Ct=Vt+(mt-St);}else pt=z,mt=W,Ut=Z,St=J,Ft=j,Vt=Q,gt=tt,Ct=nt;pt+=x,mt+=w,gt+=x,Ct+=w,Ft+=x,Vt+=w,Ut+=x,St+=w;var It=0;At[It++]=pt,At[It++]=mt,At[It++]=p.r,At[It++]=p.g,At[It++]=p.b,At[It++]=p.a,At[It++]=0,At[It++]=1,this.twoColorTint&&(At[It++]=0,At[It++]=0,At[It++]=0,At[It++]=0),At[It++]=gt,At[It++]=Ct,At[It++]=p.r,At[It++]=p.g,At[It++]=p.b,At[It++]=p.a,At[It++]=1,At[It++]=1,this.twoColorTint&&(At[It++]=0,At[It++]=0,At[It++]=0,At[It++]=0),At[It++]=Ft,At[It++]=Vt,At[It++]=p.r,At[It++]=p.g,At[It++]=p.b,At[It++]=p.a,At[It++]=1,At[It++]=0,this.twoColorTint&&(At[It++]=0,At[It++]=0,At[It++]=0,At[It++]=0),At[It++]=Ut,At[It++]=St,At[It++]=p.r,At[It++]=p.g,At[It++]=p.b,At[It++]=p.a,At[It++]=0,At[It++]=0,this.twoColorTint&&(At[It++]=0,At[It++]=0,At[It++]=0,At[It]=0),this.batcher.draw(i,At,Ts);}drawRegion(i,e,s,n,r,f){this.enableRenderer(this.batcher),f||(f=Is);var c=0;At[c++]=e,At[c++]=s,At[c++]=f.r,At[c++]=f.g,At[c++]=f.b,At[c++]=f.a,At[c++]=i.u,At[c++]=i.v2,this.twoColorTint&&(At[c++]=0,At[c++]=0,At[c++]=0,At[c++]=0),At[c++]=e+n,At[c++]=s,At[c++]=f.r,At[c++]=f.g,At[c++]=f.b,At[c++]=f.a,At[c++]=i.u2,At[c++]=i.v2,this.twoColorTint&&(At[c++]=0,At[c++]=0,At[c++]=0,At[c++]=0),At[c++]=e+n,At[c++]=s+r,At[c++]=f.r,At[c++]=f.g,At[c++]=f.b,At[c++]=f.a,At[c++]=i.u2,At[c++]=i.v,this.twoColorTint&&(At[c++]=0,At[c++]=0,At[c++]=0,At[c++]=0),At[c++]=e,At[c++]=s+r,At[c++]=f.r,At[c++]=f.g,At[c++]=f.b,At[c++]=f.a,At[c++]=i.u,At[c++]=i.v,this.twoColorTint&&(At[c++]=0,At[c++]=0,At[c++]=0,At[c]=0),this.batcher.draw(i.page.texture,At,Ts);}line(i,e,s,n,r,f){this.enableRenderer(this.shapes),this.shapes.line(i,e,s,n,r);}triangle(i,e,s,n,r,f,c,d,p,x){this.enableRenderer(this.shapes),this.shapes.triangle(i,e,s,n,r,f,c,d,p,x);}quad(i,e,s,n,r,f,c,d,p,x,w,C,F){this.enableRenderer(this.shapes),this.shapes.quad(i,e,s,n,r,f,c,d,p,x,w,C,F);}rect(i,e,s,n,r,f){this.enableRenderer(this.shapes),this.shapes.rect(i,e,s,n,r,f);}rectLine(i,e,s,n,r,f,c){this.enableRenderer(this.shapes),this.shapes.rectLine(i,e,s,n,r,f,c);}polygon(i,e,s,n){this.enableRenderer(this.shapes),this.shapes.polygon(i,e,s,n);}circle(i,e,s,n,r,f=0){this.enableRenderer(this.shapes),this.shapes.circle(i,e,s,n,r,f);}curve(i,e,s,n,r,f,c,d,p,x){this.enableRenderer(this.shapes),this.shapes.curve(i,e,s,n,r,f,c,d,p,x);}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null;}resize(i){let e=this.canvas;var s=window.devicePixelRatio||1,n=Math.round(e.clientWidth*s),r=Math.round(e.clientHeight*s);if((e.width!=n||e.height!=r)&&(e.width=n,e.height=r),this.context.gl.viewport(0,0,e.width,e.height),i===1)this.camera.setViewport(n,r);else if(i===2){let f=e.width,c=e.height,d=this.camera.viewportWidth,p=this.camera.viewportHeight,x=p/d,w=c/f,C=x<w?d/f:p/c;this.camera.setViewport(f*C,c*C);}this.camera.update();}enableRenderer(i){this.activeRenderer!==i&&(this.end(),i instanceof Qs?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(Oe.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):i instanceof os?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(Oe.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer);}},o=(i=>(i[i.Stretch=0]="Stretch",i[i.Expand=1]="Expand",i[i.Fit=2]="Fit",i))(o||{}),h,g,M=0,V=1,b=1,v=165,k=108,I=163,Y=class{renderer;logo=null;spinner=null;angle=0;fadeOut=0;fadeIn=0;timeKeeper=new vt;backgroundColor=new O(.135,.135,.135,1);tempColor=new O;constructor(i){if(this.renderer=i,this.timeKeeper.maxDelta=9,!g){let e=navigator.userAgent.indexOf("Safari")>-1,s=()=>M++;g=new Image,g.src=H,e||(g.crossOrigin="anonymous"),g.onload=s,h=new Image,h.src=U,e||(h.crossOrigin="anonymous"),h.onload=s;}}dispose(){var i,e;(i=this.logo)==null||i.dispose(),(e=this.spinner)==null||e.dispose();}draw(i=false){if(M<2||i&&this.fadeOut>b)return;this.timeKeeper.update();let e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=this.timeKeeper.delta*200*(1+1.5*Math.pow(e,5));let s=this.tempColor,n=this.renderer,r=n.canvas,f=n.context.gl;if(n.resize(1),n.camera.position.set(r.width/2,r.height/2,0),n.batcher.setBlendMode(0,true),i){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>b)return;s.setFromColor(this.backgroundColor),e=1-this.fadeOut/b,e=1-(e-1)*(e-1),s.a*=e,s.a>0&&(n.camera.zoom=1,n.begin(),n.quad(true,0,0,r.width,0,r.width,r.height,0,r.height,s,s,s,s),n.end());}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(f.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),f.clear(f.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/V,1),s.set(e,e,e,e),this.logo||(this.logo=new ee(n.context,g),this.spinner=new ee(n.context,h)),n.camera.zoom=Math.max(1,I/r.height),n.begin(),n.drawTexture(this.logo,(r.width-v)/2,(r.height-k)/2,v,k,s),this.spinner&&n.drawTextureRotated(this.spinner,(r.width-I)/2,(r.height-I)/2,I,I,I/2,I/2,this.angle,s),n.end();}drawInCoordinates(i,e){if(M<2)return;this.timeKeeper.update();let s=this.renderer;s.batcher.setBlendMode(0,true),this.logo||(this.logo=new ee(s.context,g),this.spinner=new ee(s.context,h));let n=i-v/2,r=e-k/2;s.drawTexture(this.logo,n,r,v,k),this.angle-=this.timeKeeper.delta*500,this.spinner&&s.drawTextureRotated(this.spinner,n,r-25,I,I,I/2,I/2,this.angle);}},U="data:image/png;base64,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",H="data:image/png;base64,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",K=class{constructor(i,e){this.config=e,e.pathPrefix||(e.pathPrefix=""),e.app||(e.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{},dispose:()=>{}}),e.webglConfig||(e.webglConfig={alpha:true}),this.htmlCanvas=i,this.context=new Jt(i,e.webglConfig),this.renderer=new t(i,this.context),this.gl=this.context.gl,this.assetManager=new he(this.context,e.pathPrefix),this.input=new Ti(i),e.app.loadAssets&&e.app.loadAssets(this);let s=()=>{this.disposed||(requestAnimationFrame(s),this.time.update(),e.app.update&&e.app.update(this,this.time.delta),e.app.render&&e.app.render(this));},n=()=>{if(!this.disposed){if(this.assetManager.isLoadingComplete()){this.assetManager.hasErrors()?e.app.error&&e.app.error(this,this.assetManager.getErrors()):(e.app.initialize&&e.app.initialize(this),s());return}requestAnimationFrame(n);}};requestAnimationFrame(n);}context;time=new vt;htmlCanvas;gl;renderer;assetManager;input;disposed=false;clear(i,e,s,n){this.gl.clearColor(i,e,s,n),this.gl.clear(this.gl.COLOR_BUFFER_BIT);}dispose(){this.config.app.dispose&&this.config.app.dispose(this),this.disposed=true;}};return m(u)})(),nn=cn;var dn={"4.2webgl":nn},an=dn;var Yi=an["4.2webgl"];console.log(Yi);alert("spine loaded");function on(L,Yt,l,R){L.updateWorldTransform(Yi.Physics.update),Yt.update(),l.update(Yt.delta),l.apply(L),R.begin(),R.drawSkeleton(L),R.end(),requestAnimationFrame(()=>on(L,Yt,l,R));}for(let L of ["Azusa","CH0070","Airi"]){let Yt=document.createElement("div"),l=document.createElement("canvas");l.width=1e3,l.height=1e3;let R=l.getContext("webgl");Yt.appendChild(l),document.body.appendChild(Yt);let y=new Yi.TimeKeeper,a=new Yi.SceneRenderer(l,R,false),m=new Yi.AssetManager(R),u=`https://l2d-pro.schale.qzz.io/${L.toLowerCase()}_home/${L}_home.atlas`,A=`https://l2d-pro.schale.qzz.io/${L.toLowerCase()}_home/${L}_home.skel`;m.loadBinary(A),m.loadTextureAtlas(u),console.log(`loading data for ${L}`);let S,O,T;(async function(N){await new Promise((q,$)=>{function it(){N.isLoadingComplete()?q(N):(N.hasErrors()&&$(N),requestAnimationFrame(it));}requestAnimationFrame(it);}),console.log(N);let P=new Yi.AtlasAttachmentLoader(N.get(u)),E=new Yi.SkeletonBinary(P),D=E.readSkeletonData(N.get(A));T=new Yi.Skeleton(D),S=new Yi.AnimationStateData(T.data),O=new Yi.AnimationState(S),T.scaleX=.3,T.scaleY=.3,T.setToSetupPose(),T.updateWorldTransform(Yi.Physics.update),console.log(T.getBoundsRect()),l.width=T.getBoundsRect().width,l.height=T.getBoundsRect().height,T.y=-T.getBoundsRect().height/2,O.setAnimation(0,"Idle_01",true),window.skeleton=T,window.animationState=O,console.log(P,E,T),requestAnimationFrame(()=>on(T,y,O,a));})(m);}
})();