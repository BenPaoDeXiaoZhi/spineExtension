(function(){'use strict';/* deploy by Github CI/CD
 - Deploy time: 2025/12/27 15:22:44
 - Commit id: 4b8bdaf427ecc8775b9c65a5a4df7970b8f2126e
 - Repository: BenPaoDeXiaoZhi/spineExtension
 - Actor: BenPaoDeXiaoZhi*/
function pn(Y,lt){window.tempExt=Object.assign({Extension:Y},lt);}var nr={extensionName:"spine骨骼动画",description:"在scratch中使用spine骨骼动画!","loadSkeleton.text":"加载配置为[CONFIG]的spine骨骼并命名为[NAME]","loadSkeleton.configError":"请输入有效配置","setSkinSkeleton.text":"将角色[TARGET_NAME]的skin设为骨骼[SKELETON]","setSkinSkeleton.skeletonIdError":"请输入数字或有效的skeleton数据","setSkinSkeleton.characterNotFound":"找不到名为{name}的角色","getSkeletonInSkin.text":"获取skin[SKIN]中的骨架","getSkeletonInSkin.skinError":"请输入有效的spine skin","spriteMenu.currentTarget":"当前角色","SpineSkinReport.type":"spine skin","SpineSkinReport.id":"id为 ","SpineSkinReport.version":"版本为 ","SpineSkinReport.nameText":"名称为 ","SpineSkinReport.monitor":"(spine皮肤) id为{id}, 版本为{version}, 名称为{name}","SpineSkeletonReport.type":"spine骨架","SpineSkeletonReport.nameText":"名称为 ","SpineSkeletonReport.boneNum":"骨骼总数为 "};var ar={extensionName:"Spine Animation",description:"Use Spine animation in Scratch!","loadSkeleton.text":"Load the spine skeleton with configuration [CONFIG] and name it [NAME]","loadSkeleton.configError":"Please input correct configs","setSkinSkeleton.text":"Set the skin of character [TARGET_NAME] to Skeleton:[SKELETON]","setSkinSkeleton.skeletonIdError":"Please input valid Skeleton data!","setSkinSkeleton.characterNotFound":"Cannot find character named {name}","getSkeletonInSkin.text":"Get the skeleton in Skin [SKIN]","getSkeletonInSkin.skinError":"Please input valid Spine skin","spriteMenu.currentTarget":"Current target","SpineSkinReport.type":"Spine Skin","SpineSkinReport.id":"Id is ","SpineSkinReport.version":"Version is ","SpineSkinReport.nameText":"Name is ","SpineSkinReport.monitor":"(Spine Skin) Id is {id}, Version is {version}, Name is {name}","SpineSkeletonReport.type":"Spine Skeleton","SpineSkeletonReport.nameText":"Name is ","SpineSkeletonReport.boneNum":"Total Bone num is "};function xn(Y){let lt=Y.getFormatMessage({"zh-cn":nr,en:ar});return function(o,T){return lt({default:o},T)}}var Tr=class{info;constructor(lt,o){this.info={id:lt,name:o,blocks:[],menus:{}};}getInfo(){return this.info}};var vn=`.bg {
    width: 100%;
    height: 100%;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 540;
    background-color: #0000004c;
    user-select: none;
}
.modal {
    margin: 100px auto;
    width: 580px;
    background-color: var(--theme-color-300, #2e3644);
    border: 1px solid var(--theme-color-200, #3e495b);
    border-radius: 12px;
    min-height: 100px;
    user-select: none;
    position: relative;
    z-index: 550;
}
.header {
    color: white;
    display: flex;
    font-size: 18px;
    border-bottom: 1px solid var(--theme-color-350, #1d2634);
    height: 100%;
    padding: 10px;
}
.close {
    background-color: transparent;
    border: none;
    border-radius: 5px;
    position: absolute;
    right: 5px;
    padding: 0;
    width: 24px;
    height: 24px;
    transition: background-color 0.15s ease-out;
    cursor: pointer;
}
.close:hover {
    background-color: rgba(255, 255, 255, 0.16);
}
`;var Mn=`<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.657 6.112L6.343 17.426m0-11.314l11.314 11.314" stroke="#566276" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round"></path>
</svg>`;var Ir=class{storage;extId;constructor(lt,o="test"){this.storage=lt,this.extId=o;}loadFile(lt){return fetch(`https://m.ccw.site/user_projects_assets/${lt}`)}async storeFile(lt="text/plain",o,T="",y){let a;if(y instanceof String)a=new TextEncoder().encode(y).buffer;else if(y instanceof Blob)a=await y.arrayBuffer();else if(y instanceof Uint8Array)a=y.buffer;else if(y instanceof ArrayBuffer)a=y;else throw new Error(`cannot convert ${y} to array buffer`);return this.storage.store({contentType:lt},T,a,o)}createUI(){customElements.get("scratch-storage-ui")||customElements.define("scratch-storage-ui",tn);}},tn=class extends HTMLElement{constructor(){super();}connectedCallback(){let lt=this.attachShadow({mode:"open"}),o=document.createElement("style");o.innerHTML=vn;let T=document.createElement("div");T.className="bg";let y=document.createElement("div");y.className="modal";let a=document.createElement("header");a.className="header";let f=document.createElement("div");f.style.width="fit-content",f.style.margin="auto",f.innerText="上传spine文件";let u=document.createElement("button");u.className="close",u.innerHTML=Mn,u.addEventListener("click",A=>{this.remove();}),a.appendChild(f),a.appendChild(u),y.appendChild(a),T.appendChild(y),lt.appendChild(T),lt.appendChild(o);}};var yn=Scratch.runtime.renderer.exports.Skin;function wn(Y){let[lt,o]=Y.renderer.createSpineSkin();Y.renderer._allSkins[lt]=void 0,Y.renderer._nextSkinId--,Object.defineProperty(Object.getPrototypeOf(o).constructor,Symbol.hasInstance,{value:function(T){return !!(T instanceof or||T!=null&&T.spine)},writable:true});}var or=class extends yn{gl;manager;_size;skeleton;animationState;tk;name;renderer;constructor(lt,o,T,y,a,f,u){super(lt),this.gl=o.gl,this.renderer=o,this.manager=T,this.skeleton=y,this.tk=f,this.animationState=a,this.name=u,this._texture=this.gl.createTexture(),this.size=[640,360],this._rotationCenter=[320,180];}set size(lt){this._size=lt;}get size(){return this._size}getTexture(lt){return this._texture}updateTransform(lt){console.log(lt),this.updatePosition(lt._position),this.updateScale(lt._scale);}updatePosition([lt,o]){console.log(lt,o),this.skeleton.x=lt,this.skeleton.y=o;}updateScale([lt,o]){this.skeleton.scaleX=lt/100,this.skeleton.scaleY=o/100;}render(lt){this.updateTransform(lt),this.manager.drawSkeleton(this.skeleton,this.tk,this.animationState,[this.renderer._xRight-this.renderer._xLeft,this.renderer._yTop-this.renderer._yBottom]),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),requestAnimationFrame(()=>this.emit(yn.Events.WasAltered));}};var Ve=(function(){var Y=function(lt,o){return (Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,y){T.__proto__=y;}||function(T,y){for(var a in y)Object.prototype.hasOwnProperty.call(y,a)&&(T[a]=y[a]);})(lt,o)};return function(lt,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function T(){this.constructor=lt;}Y(lt,o),lt.prototype=o===null?Object.create(o):(T.prototype=o.prototype,new T);}})(),Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt,Rt;((function(Y){var lt=(function(){function st(G,et,dt){if(G==null)throw new Error("name cannot be null.");if(et==null)throw new Error("timelines cannot be null.");this.name=G,this.timelines=et,this.timelineIds=[];for(var rt=0;rt<et.length;rt++)this.timelineIds[et[rt].getPropertyId()]=true;this.duration=dt;}return st.prototype.hasTimeline=function(G){return this.timelineIds[G]==1},st.prototype.apply=function(G,et,dt,rt,It,ht,ft,kt){if(G==null)throw new Error("skeleton cannot be null.");rt&&this.duration!=0&&(dt%=this.duration,et>0&&(et%=this.duration));for(var at=this.timelines,Q=0,ot=at.length;Q<ot;Q++)at[Q].apply(G,et,dt,It,ht,ft,kt);},st.binarySearch=function(G,et,dt){dt===void 0&&(dt=1);var rt=0,It=G.length/dt-2;if(It==0)return dt;for(var ht=It>>>1;;){if(G[(ht+1)*dt]<=et?rt=ht+1:It=ht,rt==It)return (rt+1)*dt;ht=rt+It>>>1;}},st.linearSearch=function(G,et,dt){for(var rt=0,It=G.length-dt;rt<=It;rt+=dt)if(G[rt]>et)return rt;return  -1},st})(),o,T,y;Y.Animation=lt,(function(st){st[st.setup=0]="setup",st[st.first=1]="first",st[st.replace=2]="replace",st[st.add=3]="add";})(o=Y.MixBlend||(Y.MixBlend={})),(function(st){st[st.mixIn=0]="mixIn",st[st.mixOut=1]="mixOut";})(T=Y.MixDirection||(Y.MixDirection={})),(function(st){st[st.rotate=0]="rotate",st[st.translate=1]="translate",st[st.scale=2]="scale",st[st.shear=3]="shear",st[st.attachment=4]="attachment",st[st.color=5]="color",st[st.deform=6]="deform",st[st.event=7]="event",st[st.drawOrder=8]="drawOrder",st[st.ikConstraint=9]="ikConstraint",st[st.transformConstraint=10]="transformConstraint",st[st.pathConstraintPosition=11]="pathConstraintPosition",st[st.pathConstraintSpacing=12]="pathConstraintSpacing",st[st.pathConstraintMix=13]="pathConstraintMix",st[st.twoColor=14]="twoColor";})(y=Y.TimelineType||(Y.TimelineType={}));var a=(function(){function st(G){if(G<=0)throw new Error("frameCount must be > 0: "+G);this.curves=Y.Utils.newFloatArray((G-1)*st.BEZIER_SIZE);}return st.prototype.getFrameCount=function(){return this.curves.length/st.BEZIER_SIZE+1},st.prototype.setLinear=function(G){this.curves[G*st.BEZIER_SIZE]=st.LINEAR;},st.prototype.setStepped=function(G){this.curves[G*st.BEZIER_SIZE]=st.STEPPED;},st.prototype.getCurveType=function(G){var et=G*st.BEZIER_SIZE;if(et==this.curves.length)return st.LINEAR;var dt=this.curves[et];return dt==st.LINEAR?st.LINEAR:dt==st.STEPPED?st.STEPPED:st.BEZIER},st.prototype.setCurve=function(G,et,dt,rt,It){var ht=.03*(2*-et+rt),ft=.03*(2*-dt+It),kt=.006*(3*(et-rt)+1),at=.006*(3*(dt-It)+1),Q=2*ht+kt,ot=2*ft+at,Mt=.3*et+ht+.16666667*kt,yt=.3*dt+ft+.16666667*at,Bt=G*st.BEZIER_SIZE,Dt=this.curves;Dt[Bt++]=st.BEZIER;for(var Lt=Mt,Vt=yt,Gt=Bt+st.BEZIER_SIZE-1;Bt<Gt;Bt+=2)Dt[Bt]=Lt,Dt[Bt+1]=Vt,Mt+=Q,yt+=ot,Q+=kt,ot+=at,Lt+=Mt,Vt+=yt;},st.prototype.getCurvePercent=function(G,et){et=Y.MathUtils.clamp(et,0,1);var dt=this.curves,rt=G*st.BEZIER_SIZE,It=dt[rt];if(It==st.LINEAR)return et;if(It==st.STEPPED)return 0;for(var ht=0,ft=++rt,kt=rt+st.BEZIER_SIZE-1;rt<kt;rt+=2)if((ht=dt[rt])>=et){var at=void 0,Q=void 0;return rt==ft?(at=0,Q=0):(at=dt[rt-2],Q=dt[rt-1]),Q+(dt[rt+1]-Q)*(et-at)/(ht-at)}var ot=dt[rt-1];return ot+(1-ot)*(et-ht)/(1-ht)},st.LINEAR=0,st.STEPPED=1,st.BEZIER=2,st.BEZIER_SIZE=19,st})();Y.CurveTimeline=a;var f=(function(st){function G(et){var dt=st.call(this,et)||this;return dt.frames=Y.Utils.newFloatArray(et<<1),dt}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.rotate<<24)+this.boneIndex},G.prototype.setFrame=function(et,dt,rt){et<<=1,this.frames[et]=dt,this.frames[et+G.ROTATION]=rt;},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=this.frames,Q=Skeleton.bones[this.boneIndex];if(Q.active)if(rt<at[0])switch(ft){case o.setup:return void(Q.rotation=Q.data.rotation);case o.first:var ot=Q.data.rotation-Q.rotation;Q.rotation+=(ot-360*(16384-(16384.499999999996-ot/360|0)))*ht;}else if(rt>=at[at.length-G.ENTRIES]){var Mt=at[at.length+G.PREV_ROTATION];switch(ft){case o.setup:Q.rotation=Q.data.rotation+Mt*ht;break;case o.first:case o.replace:Mt+=Q.data.rotation-Q.rotation,Mt-=360*(16384-(16384.499999999996-Mt/360|0));case o.add:Q.rotation+=Mt*ht;}}else {var yt=lt.binarySearch(at,rt,G.ENTRIES),Bt=at[yt+G.PREV_ROTATION],Dt=at[yt],Lt=this.getCurvePercent((yt>>1)-1,1-(rt-Dt)/(at[yt+G.PREV_TIME]-Dt)),Vt=at[yt+G.ROTATION]-Bt;switch(Vt=Bt+(Vt-360*(16384-(16384.499999999996-Vt/360|0)))*Lt,ft){case o.setup:Q.rotation=Q.data.rotation+(Vt-360*(16384-(16384.499999999996-Vt/360|0)))*ht;break;case o.first:case o.replace:Vt+=Q.data.rotation-Q.rotation;case o.add:Q.rotation+=(Vt-360*(16384-(16384.499999999996-Vt/360|0)))*ht;}}},G.ENTRIES=2,G.PREV_TIME=-2,G.PREV_ROTATION=-1,G.ROTATION=1,G})(a);Y.RotateTimeline=f;var u=(function(st){function G(et){var dt=st.call(this,et)||this;return dt.frames=Y.Utils.newFloatArray(et*G.ENTRIES),dt}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.translate<<24)+this.boneIndex},G.prototype.setFrame=function(et,dt,rt,It){et*=G.ENTRIES,this.frames[et]=dt,this.frames[et+G.X]=rt,this.frames[et+G.Y]=It;},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=this.frames,Q=Skeleton.bones[this.boneIndex];if(Q.active)if(rt<at[0])switch(ft){case o.setup:return Q.x=Q.data.x,void(Q.y=Q.data.y);case o.first:Q.x+=(Q.data.x-Q.x)*ht,Q.y+=(Q.data.y-Q.y)*ht;}else {var ot=0,Mt=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_X],Mt=at[at.length+G.PREV_Y];else {var yt=lt.binarySearch(at,rt,G.ENTRIES);ot=at[yt+G.PREV_X],Mt=at[yt+G.PREV_Y];var Bt=at[yt],Dt=this.getCurvePercent(yt/G.ENTRIES-1,1-(rt-Bt)/(at[yt+G.PREV_TIME]-Bt));ot+=(at[yt+G.X]-ot)*Dt,Mt+=(at[yt+G.Y]-Mt)*Dt;}switch(ft){case o.setup:Q.x=Q.data.x+ot*ht,Q.y=Q.data.y+Mt*ht;break;case o.first:case o.replace:Q.x+=(Q.data.x+ot-Q.x)*ht,Q.y+=(Q.data.y+Mt-Q.y)*ht;break;case o.add:Q.x+=ot*ht,Q.y+=Mt*ht;}}},G.ENTRIES=3,G.PREV_TIME=-3,G.PREV_X=-2,G.PREV_Y=-1,G.X=1,G.Y=2,G})(a);Y.TranslateTimeline=u;var A=(function(st){function G(et){return st.call(this,et)||this}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.scale<<24)+this.boneIndex},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=this.frames,Q=Skeleton.bones[this.boneIndex];if(Q.active)if(rt<at[0])switch(ft){case o.setup:return Q.scaleX=Q.data.scaleX,void(Q.scaleY=Q.data.scaleY);case o.first:Q.scaleX+=(Q.data.scaleX-Q.scaleX)*ht,Q.scaleY+=(Q.data.scaleY-Q.scaleY)*ht;}else {var ot=0,Mt=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_X]*Q.data.scaleX,Mt=at[at.length+G.PREV_Y]*Q.data.scaleY;else {var yt=lt.binarySearch(at,rt,G.ENTRIES);ot=at[yt+G.PREV_X],Mt=at[yt+G.PREV_Y];var Bt=at[yt],Dt=this.getCurvePercent(yt/G.ENTRIES-1,1-(rt-Bt)/(at[yt+G.PREV_TIME]-Bt));ot=(ot+(at[yt+G.X]-ot)*Dt)*Q.data.scaleX,Mt=(Mt+(at[yt+G.Y]-Mt)*Dt)*Q.data.scaleY;}if(ht==1)ft==o.add?(Q.scaleX+=ot-Q.data.scaleX,Q.scaleY+=Mt-Q.data.scaleY):(Q.scaleX=ot,Q.scaleY=Mt);else {var Lt=0,Vt=0;if(kt==T.mixOut)switch(ft){case o.setup:Lt=Q.data.scaleX,Vt=Q.data.scaleY,Q.scaleX=Lt+(Math.abs(ot)*Y.MathUtils.signum(Lt)-Lt)*ht,Q.scaleY=Vt+(Math.abs(Mt)*Y.MathUtils.signum(Vt)-Vt)*ht;break;case o.first:case o.replace:Lt=Q.scaleX,Vt=Q.scaleY,Q.scaleX=Lt+(Math.abs(ot)*Y.MathUtils.signum(Lt)-Lt)*ht,Q.scaleY=Vt+(Math.abs(Mt)*Y.MathUtils.signum(Vt)-Vt)*ht;break;case o.add:Lt=Q.scaleX,Vt=Q.scaleY,Q.scaleX=Lt+(Math.abs(ot)*Y.MathUtils.signum(Lt)-Q.data.scaleX)*ht,Q.scaleY=Vt+(Math.abs(Mt)*Y.MathUtils.signum(Vt)-Q.data.scaleY)*ht;}else switch(ft){case o.setup:Lt=Math.abs(Q.data.scaleX)*Y.MathUtils.signum(ot),Vt=Math.abs(Q.data.scaleY)*Y.MathUtils.signum(Mt),Q.scaleX=Lt+(ot-Lt)*ht,Q.scaleY=Vt+(Mt-Vt)*ht;break;case o.first:case o.replace:Lt=Math.abs(Q.scaleX)*Y.MathUtils.signum(ot),Vt=Math.abs(Q.scaleY)*Y.MathUtils.signum(Mt),Q.scaleX=Lt+(ot-Lt)*ht,Q.scaleY=Vt+(Mt-Vt)*ht;break;case o.add:Lt=Y.MathUtils.signum(ot),Vt=Y.MathUtils.signum(Mt),Q.scaleX=Math.abs(Q.scaleX)*Lt+(ot-Math.abs(Q.data.scaleX)*Lt)*ht,Q.scaleY=Math.abs(Q.scaleY)*Vt+(Mt-Math.abs(Q.data.scaleY)*Vt)*ht;}}}},G})(u);Y.ScaleTimeline=A;var S=(function(st){function G(et){return st.call(this,et)||this}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.shear<<24)+this.boneIndex},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=this.frames,Q=Skeleton.bones[this.boneIndex];if(Q.active)if(rt<at[0])switch(ft){case o.setup:return Q.shearX=Q.data.shearX,void(Q.shearY=Q.data.shearY);case o.first:Q.shearX+=(Q.data.shearX-Q.shearX)*ht,Q.shearY+=(Q.data.shearY-Q.shearY)*ht;}else {var ot=0,Mt=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_X],Mt=at[at.length+G.PREV_Y];else {var yt=lt.binarySearch(at,rt,G.ENTRIES);ot=at[yt+G.PREV_X],Mt=at[yt+G.PREV_Y];var Bt=at[yt],Dt=this.getCurvePercent(yt/G.ENTRIES-1,1-(rt-Bt)/(at[yt+G.PREV_TIME]-Bt));ot+=(at[yt+G.X]-ot)*Dt,Mt+=(at[yt+G.Y]-Mt)*Dt;}switch(ft){case o.setup:Q.shearX=Q.data.shearX+ot*ht,Q.shearY=Q.data.shearY+Mt*ht;break;case o.first:case o.replace:Q.shearX+=(Q.data.shearX+ot-Q.shearX)*ht,Q.shearY+=(Q.data.shearY+Mt-Q.shearY)*ht;break;case o.add:Q.shearX+=ot*ht,Q.shearY+=Mt*ht;}}},G})(u);Y.ShearTimeline=S;var O=(function(st){function G(et){var dt=st.call(this,et)||this;return dt.frames=Y.Utils.newFloatArray(et*G.ENTRIES),dt}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.color<<24)+this.slotIndex},G.prototype.setFrame=function(et,dt,rt,It,ht,ft){et*=G.ENTRIES,this.frames[et]=dt,this.frames[et+G.R]=rt,this.frames[et+G.G]=It,this.frames[et+G.B]=ht,this.frames[et+G.A]=ft;},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=Skeleton.slots[this.slotIndex];if(at.bone.active){var Q=this.frames;if(rt<Q[0])switch(ft){case o.setup:return void at.color.setFromColor(at.data.color);case o.first:var ot=at.color,Mt=at.data.color;ot.add((Mt.r-ot.r)*ht,(Mt.g-ot.g)*ht,(Mt.b-ot.b)*ht,(Mt.a-ot.a)*ht);}else {var yt=0,Bt=0,Dt=0,Lt=0;if(rt>=Q[Q.length-G.ENTRIES]){var Vt=Q.length;yt=Q[Vt+G.PREV_R],Bt=Q[Vt+G.PREV_G],Dt=Q[Vt+G.PREV_B],Lt=Q[Vt+G.PREV_A];}else {var Gt=lt.binarySearch(Q,rt,G.ENTRIES);yt=Q[Gt+G.PREV_R],Bt=Q[Gt+G.PREV_G],Dt=Q[Gt+G.PREV_B],Lt=Q[Gt+G.PREV_A];var Ft=Q[Gt],Tt=this.getCurvePercent(Gt/G.ENTRIES-1,1-(rt-Ft)/(Q[Gt+G.PREV_TIME]-Ft));yt+=(Q[Gt+G.R]-yt)*Tt,Bt+=(Q[Gt+G.G]-Bt)*Tt,Dt+=(Q[Gt+G.B]-Dt)*Tt,Lt+=(Q[Gt+G.A]-Lt)*Tt;}if(ht==1)at.color.set(yt,Bt,Dt,Lt);else {var ot=at.color;ft==o.setup&&ot.setFromColor(at.data.color),ot.add((yt-ot.r)*ht,(Bt-ot.g)*ht,(Dt-ot.b)*ht,(Lt-ot.a)*ht);}}}},G.ENTRIES=5,G.PREV_TIME=-5,G.PREV_R=-4,G.PREV_G=-3,G.PREV_B=-2,G.PREV_A=-1,G.R=1,G.G=2,G.B=3,G.A=4,G})(a);Y.ColorTimeline=O;var I=(function(st){function G(et){var dt=st.call(this,et)||this;return dt.frames=Y.Utils.newFloatArray(et*G.ENTRIES),dt}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.twoColor<<24)+this.slotIndex},G.prototype.setFrame=function(et,dt,rt,It,ht,ft,kt,at,Q){et*=G.ENTRIES,this.frames[et]=dt,this.frames[et+G.R]=rt,this.frames[et+G.G]=It,this.frames[et+G.B]=ht,this.frames[et+G.A]=ft,this.frames[et+G.R2]=kt,this.frames[et+G.G2]=at,this.frames[et+G.B2]=Q;},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=Skeleton.slots[this.slotIndex];if(at.bone.active){var Q=this.frames;if(rt<Q[0])switch(ft){case o.setup:return at.color.setFromColor(at.data.color),void at.darkColor.setFromColor(at.data.darkColor);case o.first:var ot=at.color,Mt=at.darkColor,yt=at.data.color,Bt=at.data.darkColor;ot.add((yt.r-ot.r)*ht,(yt.g-ot.g)*ht,(yt.b-ot.b)*ht,(yt.a-ot.a)*ht),Mt.add((Bt.r-Mt.r)*ht,(Bt.g-Mt.g)*ht,(Bt.b-Mt.b)*ht,0);}else {var Dt=0,Lt=0,Vt=0,Gt=0,Ft=0,Tt=0,At=0;if(rt>=Q[Q.length-G.ENTRIES]){var _t=Q.length;Dt=Q[_t+G.PREV_R],Lt=Q[_t+G.PREV_G],Vt=Q[_t+G.PREV_B],Gt=Q[_t+G.PREV_A],Ft=Q[_t+G.PREV_R2],Tt=Q[_t+G.PREV_G2],At=Q[_t+G.PREV_B2];}else {var ie=lt.binarySearch(Q,rt,G.ENTRIES);Dt=Q[ie+G.PREV_R],Lt=Q[ie+G.PREV_G],Vt=Q[ie+G.PREV_B],Gt=Q[ie+G.PREV_A],Ft=Q[ie+G.PREV_R2],Tt=Q[ie+G.PREV_G2],At=Q[ie+G.PREV_B2];var Kt=Q[ie],Ae=this.getCurvePercent(ie/G.ENTRIES-1,1-(rt-Kt)/(Q[ie+G.PREV_TIME]-Kt));Dt+=(Q[ie+G.R]-Dt)*Ae,Lt+=(Q[ie+G.G]-Lt)*Ae,Vt+=(Q[ie+G.B]-Vt)*Ae,Gt+=(Q[ie+G.A]-Gt)*Ae,Ft+=(Q[ie+G.R2]-Ft)*Ae,Tt+=(Q[ie+G.G2]-Tt)*Ae,At+=(Q[ie+G.B2]-At)*Ae;}if(ht==1)at.color.set(Dt,Lt,Vt,Gt),at.darkColor.set(Ft,Tt,At,1);else {var ot=at.color,Mt=at.darkColor;ft==o.setup&&(ot.setFromColor(at.data.color),Mt.setFromColor(at.data.darkColor)),ot.add((Dt-ot.r)*ht,(Lt-ot.g)*ht,(Vt-ot.b)*ht,(Gt-ot.a)*ht),Mt.add((Ft-Mt.r)*ht,(Tt-Mt.g)*ht,(At-Mt.b)*ht,0);}}}},G.ENTRIES=8,G.PREV_TIME=-8,G.PREV_R=-7,G.PREV_G=-6,G.PREV_B=-5,G.PREV_A=-4,G.PREV_R2=-3,G.PREV_G2=-2,G.PREV_B2=-1,G.R=1,G.G=2,G.B=3,G.A=4,G.R2=5,G.G2=6,G.B2=7,G})(a);Y.TwoColorTimeline=I;var U=(function(){function st(G){this.frames=Y.Utils.newFloatArray(G),this.attachmentNames=new Array(G);}return st.prototype.getPropertyId=function(){return (y.attachment<<24)+this.slotIndex},st.prototype.getFrameCount=function(){return this.frames.length},st.prototype.setFrame=function(G,et,dt){this.frames[G]=et,this.attachmentNames[G]=dt;},st.prototype.apply=function(G,et,dt,rt,It,ht,ft){var kt=Skeleton.slots[this.slotIndex];if(kt.bone.active)if(ft!=T.mixOut){var at=this.frames;if(dt<at[0])ht!=o.setup&&ht!=o.first||this.setAttachment(G,kt,kt.data.attachmentName);else {var Q=0;Q=dt>=at[at.length-1]?at.length-1:lt.binarySearch(at,dt,1)-1;var ot=this.attachmentNames[Q];G.slots[this.slotIndex].setAttachment(ot==null?null:Skeleton.getAttachment(this.slotIndex,ot));}}else ht==o.setup&&this.setAttachment(G,kt,kt.data.attachmentName);},st.prototype.setAttachment=function(G,et,dt){et.setAttachment(dt==null?null:Skeleton.getAttachment(this.slotIndex,dt));},st})();Y.AttachmentTimeline=U;var L=null,R=(function(st){function G(et){var dt=st.call(this,et)||this;return dt.frames=Y.Utils.newFloatArray(et),dt.frameVertices=new Array(et),L==null&&(L=Y.Utils.newFloatArray(64)),dt}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.deform<<27)+ +this.attachment.id+this.slotIndex},G.prototype.setFrame=function(et,dt,rt){this.frames[et]=dt,this.frameVertices[et]=rt;},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=Skeleton.slots[this.slotIndex];if(at.bone.active){var Q=at.getAttachment();if(Q instanceof Y.VertexAttachment&&Q.deformAttachment==this.attachment){var ot=at.deform;ot.length==0&&(ft=o.setup);var Mt=this.frameVertices,yt=Mt[0].length,Bt=this.frames;if(rt<Bt[0]){var Dt=Q;switch(ft){case o.setup:return void(ot.length=0);case o.first:if(ht==1){ot.length=0;break}var Lt=Y.Utils.setArraySize(ot,yt);if(Dt.bones==null)for(var Vt=Dt.vertices,Gt=0;Gt<yt;Gt++)Lt[Gt]+=(Vt[Gt]-Lt[Gt])*ht;else {ht=1-ht;for(var Gt=0;Gt<yt;Gt++)Lt[Gt]*=ht;}}}else {var Ft=Y.Utils.setArraySize(ot,yt);if(rt>=Bt[Bt.length-1]){var Tt=Mt[Bt.length-1],Dt;if(ht==1)if(ft==o.add)if((Dt=Q).bones==null)for(var Vt=Dt.vertices,At=0;At<yt;At++)Ft[At]+=Tt[At]-Vt[At];else for(var _t=0;_t<yt;_t++)Ft[_t]+=Tt[_t];else Y.Utils.arrayCopy(Tt,0,Ft,0,yt);else switch(ft){case o.setup:var ie=Q;if(ie.bones==null)for(var Vt=ie.vertices,Kt=0;Kt<yt;Kt++){var Ae=Vt[Kt];Ft[Kt]=Ae+(Tt[Kt]-Ae)*ht;}else for(var Le=0;Le<yt;Le++)Ft[Le]=Tt[Le]*ht;break;case o.first:case o.replace:for(var ye=0;ye<yt;ye++)Ft[ye]+=(Tt[ye]-Ft[ye])*ht;break;case o.add:var Dt;if((Dt=Q).bones==null)for(var Vt=Dt.vertices,Ye=0;Ye<yt;Ye++)Ft[Ye]+=(Tt[Ye]-Vt[Ye])*ht;else for(var Xe=0;Xe<yt;Xe++)Ft[Xe]+=Tt[Xe]*ht;}}else {var qe=lt.binarySearch(Bt,rt),ze=Mt[qe-1],Ue=Mt[qe],Qe=Bt[qe],We=this.getCurvePercent(qe-1,1-(rt-Qe)/(Bt[qe-1]-Qe)),Dt;if(ht==1)if(ft==o.add)if((Dt=Q).bones==null)for(var Vt=Dt.vertices,Ze=0;Ze<yt;Ze++){var Be=ze[Ze];Ft[Ze]+=Be+(Ue[Ze]-Be)*We-Vt[Ze];}else for(var $e=0;$e<yt;$e++){var Be=ze[$e];Ft[$e]+=Be+(Ue[$e]-Be)*We;}else for(var De=0;De<yt;De++){var Be=ze[De];Ft[De]=Be+(Ue[De]-Be)*We;}else switch(ft){case o.setup:var vi=Q;if(vi.bones==null)for(var Vt=vi.vertices,ri=0;ri<yt;ri++){var Be=ze[ri],Ae=Vt[ri];Ft[ri]=Ae+(Be+(Ue[ri]-Be)*We-Ae)*ht;}else for(var hi=0;hi<yt;hi++){var Be=ze[hi];Ft[hi]=(Be+(Ue[hi]-Be)*We)*ht;}break;case o.first:case o.replace:for(var ti=0;ti<yt;ti++){var Be=ze[ti];Ft[ti]+=(Be+(Ue[ti]-Be)*We-Ft[ti])*ht;}break;case o.add:var Dt;if((Dt=Q).bones==null)for(var Vt=Dt.vertices,ci=0;ci<yt;ci++){var Be=ze[ci];Ft[ci]+=(Be+(Ue[ci]-Be)*We-Vt[ci])*ht;}else for(var Mi=0;Mi<yt;Mi++){var Be=ze[Mi];Ft[Mi]+=(Be+(Ue[Mi]-Be)*We)*ht;}}}}}}},G})(a);Y.DeformTimeline=R;var D=(function(){function st(G){this.frames=Y.Utils.newFloatArray(G),this.events=new Array(G);}return st.prototype.getPropertyId=function(){return y.event<<24},st.prototype.getFrameCount=function(){return this.frames.length},st.prototype.setFrame=function(G,et){this.frames[G]=et.time,this.events[G]=et;},st.prototype.apply=function(G,et,dt,rt,It,ht,ft){if(rt!=null){var kt=this.frames,at=this.frames.length;if(et>dt)this.apply(G,et,Number.MAX_VALUE,rt,It,ht,ft),et=-1;else if(et>=kt[at-1])return;if(!(dt<kt[0])){var Q=0;if(et<kt[0])Q=0;else for(var ot=kt[Q=lt.binarySearch(kt,et)];Q>0&&kt[Q-1]==ot;)Q--;for(;Q<at&&dt>=kt[Q];Q++)rt.push(this.events[Q]);}}},st})();Y.EventTimeline=D;var q=(function(){function st(G){this.frames=Y.Utils.newFloatArray(G),this.drawOrders=new Array(G);}return st.prototype.getPropertyId=function(){return y.drawOrder<<24},st.prototype.getFrameCount=function(){return this.frames.length},st.prototype.setFrame=function(G,et,dt){this.frames[G]=et,this.drawOrders[G]=dt;},st.prototype.apply=function(G,et,dt,rt,It,ht,ft){var kt=Skeleton.drawOrder,at=Skeleton.slots;if(ft!=T.mixOut){var Q=this.frames;if(dt<Q[0])ht!=o.setup&&ht!=o.first||Y.Utils.arrayCopy(G.slots,0,Skeleton.drawOrder,0,Skeleton.slots.length);else {var ot=0;ot=dt>=Q[Q.length-1]?Q.length-1:lt.binarySearch(Q,dt)-1;var Mt=this.drawOrders[ot];if(Mt==null)Y.Utils.arrayCopy(at,0,kt,0,at.length);else for(var yt=0,Bt=Mt.length;yt<Bt;yt++)kt[yt]=at[Mt[yt]];}}else ht==o.setup&&Y.Utils.arrayCopy(G.slots,0,Skeleton.drawOrder,0,Skeleton.slots.length);},st})();Y.DrawOrderTimeline=q;var $=(function(st){function G(et){var dt=st.call(this,et)||this;return dt.frames=Y.Utils.newFloatArray(et*G.ENTRIES),dt}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.ikConstraint<<24)+this.ikConstraintIndex},G.prototype.setFrame=function(et,dt,rt,It,ht,ft,kt){et*=G.ENTRIES,this.frames[et]=dt,this.frames[et+G.MIX]=rt,this.frames[et+G.SOFTNESS]=It,this.frames[et+G.BEND_DIRECTION]=ht,this.frames[et+G.COMPRESS]=ft?1:0,this.frames[et+G.STRETCH]=kt?1:0;},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=this.frames,Q=Skeleton.ikConstraints[this.ikConstraintIndex];if(Q.active)if(rt<at[0])switch(ft){case o.setup:return Q.mix=Q.data.mix,Q.softness=Q.data.softness,Q.bendDirection=Q.data.bendDirection,Q.compress=Q.data.compress,void(Q.stretch=Q.data.stretch);case o.first:Q.mix+=(Q.data.mix-Q.mix)*ht,Q.softness+=(Q.data.softness-Q.softness)*ht,Q.bendDirection=Q.data.bendDirection,Q.compress=Q.data.compress,Q.stretch=Q.data.stretch;}else if(rt>=at[at.length-G.ENTRIES])ft==o.setup?(Q.mix=Q.data.mix+(at[at.length+G.PREV_MIX]-Q.data.mix)*ht,Q.softness=Q.data.softness+(at[at.length+G.PREV_SOFTNESS]-Q.data.softness)*ht,kt==T.mixOut?(Q.bendDirection=Q.data.bendDirection,Q.compress=Q.data.compress,Q.stretch=Q.data.stretch):(Q.bendDirection=at[at.length+G.PREV_BEND_DIRECTION],Q.compress=at[at.length+G.PREV_COMPRESS]!=0,Q.stretch=at[at.length+G.PREV_STRETCH]!=0)):(Q.mix+=(at[at.length+G.PREV_MIX]-Q.mix)*ht,Q.softness+=(at[at.length+G.PREV_SOFTNESS]-Q.softness)*ht,kt==T.mixIn&&(Q.bendDirection=at[at.length+G.PREV_BEND_DIRECTION],Q.compress=at[at.length+G.PREV_COMPRESS]!=0,Q.stretch=at[at.length+G.PREV_STRETCH]!=0));else {var ot=lt.binarySearch(at,rt,G.ENTRIES),Mt=at[ot+G.PREV_MIX],yt=at[ot+G.PREV_SOFTNESS],Bt=at[ot],Dt=this.getCurvePercent(ot/G.ENTRIES-1,1-(rt-Bt)/(at[ot+G.PREV_TIME]-Bt));ft==o.setup?(Q.mix=Q.data.mix+(Mt+(at[ot+G.MIX]-Mt)*Dt-Q.data.mix)*ht,Q.softness=Q.data.softness+(yt+(at[ot+G.SOFTNESS]-yt)*Dt-Q.data.softness)*ht,kt==T.mixOut?(Q.bendDirection=Q.data.bendDirection,Q.compress=Q.data.compress,Q.stretch=Q.data.stretch):(Q.bendDirection=at[ot+G.PREV_BEND_DIRECTION],Q.compress=at[ot+G.PREV_COMPRESS]!=0,Q.stretch=at[ot+G.PREV_STRETCH]!=0)):(Q.mix+=(Mt+(at[ot+G.MIX]-Mt)*Dt-Q.mix)*ht,Q.softness+=(yt+(at[ot+G.SOFTNESS]-yt)*Dt-Q.softness)*ht,kt==T.mixIn&&(Q.bendDirection=at[ot+G.PREV_BEND_DIRECTION],Q.compress=at[ot+G.PREV_COMPRESS]!=0,Q.stretch=at[ot+G.PREV_STRETCH]!=0));}},G.ENTRIES=6,G.PREV_TIME=-6,G.PREV_MIX=-5,G.PREV_SOFTNESS=-4,G.PREV_BEND_DIRECTION=-3,G.PREV_COMPRESS=-2,G.PREV_STRETCH=-1,G.MIX=1,G.SOFTNESS=2,G.BEND_DIRECTION=3,G.COMPRESS=4,G.STRETCH=5,G})(a);Y.IkConstraintTimeline=$;var it=(function(st){function G(et){var dt=st.call(this,et)||this;return dt.frames=Y.Utils.newFloatArray(et*G.ENTRIES),dt}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.transformConstraint<<24)+this.transformConstraintIndex},G.prototype.setFrame=function(et,dt,rt,It,ht,ft){et*=G.ENTRIES,this.frames[et]=dt,this.frames[et+G.ROTATE]=rt,this.frames[et+G.TRANSLATE]=It,this.frames[et+G.SCALE]=ht,this.frames[et+G.SHEAR]=ft;},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=this.frames,Q=Skeleton.transformConstraints[this.transformConstraintIndex];if(Q.active)if(rt<at[0]){var ot=Q.data;switch(ft){case o.setup:return Q.rotateMix=ot.rotateMix,Q.translateMix=ot.translateMix,Q.scaleMix=ot.scaleMix,void(Q.shearMix=ot.shearMix);case o.first:Q.rotateMix+=(ot.rotateMix-Q.rotateMix)*ht,Q.translateMix+=(ot.translateMix-Q.translateMix)*ht,Q.scaleMix+=(ot.scaleMix-Q.scaleMix)*ht,Q.shearMix+=(ot.shearMix-Q.shearMix)*ht;}}else {var Mt=0,yt=0,Bt=0,Dt=0;if(rt>=at[at.length-G.ENTRIES]){var Lt=at.length;Mt=at[Lt+G.PREV_ROTATE],yt=at[Lt+G.PREV_TRANSLATE],Bt=at[Lt+G.PREV_SCALE],Dt=at[Lt+G.PREV_SHEAR];}else {var Vt=lt.binarySearch(at,rt,G.ENTRIES);Mt=at[Vt+G.PREV_ROTATE],yt=at[Vt+G.PREV_TRANSLATE],Bt=at[Vt+G.PREV_SCALE],Dt=at[Vt+G.PREV_SHEAR];var Gt=at[Vt],Ft=this.getCurvePercent(Vt/G.ENTRIES-1,1-(rt-Gt)/(at[Vt+G.PREV_TIME]-Gt));Mt+=(at[Vt+G.ROTATE]-Mt)*Ft,yt+=(at[Vt+G.TRANSLATE]-yt)*Ft,Bt+=(at[Vt+G.SCALE]-Bt)*Ft,Dt+=(at[Vt+G.SHEAR]-Dt)*Ft;}if(ft==o.setup){var ot=Q.data;Q.rotateMix=ot.rotateMix+(Mt-ot.rotateMix)*ht,Q.translateMix=ot.translateMix+(yt-ot.translateMix)*ht,Q.scaleMix=ot.scaleMix+(Bt-ot.scaleMix)*ht,Q.shearMix=ot.shearMix+(Dt-ot.shearMix)*ht;}else Q.rotateMix+=(Mt-Q.rotateMix)*ht,Q.translateMix+=(yt-Q.translateMix)*ht,Q.scaleMix+=(Bt-Q.scaleMix)*ht,Q.shearMix+=(Dt-Q.shearMix)*ht;}},G.ENTRIES=5,G.PREV_TIME=-5,G.PREV_ROTATE=-4,G.PREV_TRANSLATE=-3,G.PREV_SCALE=-2,G.PREV_SHEAR=-1,G.ROTATE=1,G.TRANSLATE=2,G.SCALE=3,G.SHEAR=4,G})(a);Y.TransformConstraintTimeline=it;var vt=(function(st){function G(et){var dt=st.call(this,et)||this;return dt.frames=Y.Utils.newFloatArray(et*G.ENTRIES),dt}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.pathConstraintPosition<<24)+this.pathConstraintIndex},G.prototype.setFrame=function(et,dt,rt){et*=G.ENTRIES,this.frames[et]=dt,this.frames[et+G.VALUE]=rt;},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=this.frames,Q=Skeleton.pathConstraints[this.pathConstraintIndex];if(Q.active)if(rt<at[0])switch(ft){case o.setup:return void(Q.position=Q.data.position);case o.first:Q.position+=(Q.data.position-Q.position)*ht;}else {var ot=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_VALUE];else {var Mt=lt.binarySearch(at,rt,G.ENTRIES);ot=at[Mt+G.PREV_VALUE];var yt=at[Mt],Bt=this.getCurvePercent(Mt/G.ENTRIES-1,1-(rt-yt)/(at[Mt+G.PREV_TIME]-yt));ot+=(at[Mt+G.VALUE]-ot)*Bt;}ft==o.setup?Q.position=Q.data.position+(ot-Q.data.position)*ht:Q.position+=(ot-Q.position)*ht;}},G.ENTRIES=2,G.PREV_TIME=-2,G.PREV_VALUE=-1,G.VALUE=1,G})(a);Y.PathConstraintPositionTimeline=vt;var ct=(function(st){function G(et){return st.call(this,et)||this}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.pathConstraintSpacing<<24)+this.pathConstraintIndex},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=this.frames,Q=Skeleton.pathConstraints[this.pathConstraintIndex];if(Q.active)if(rt<at[0])switch(ft){case o.setup:return void(Q.spacing=Q.data.spacing);case o.first:Q.spacing+=(Q.data.spacing-Q.spacing)*ht;}else {var ot=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_VALUE];else {var Mt=lt.binarySearch(at,rt,G.ENTRIES);ot=at[Mt+G.PREV_VALUE];var yt=at[Mt],Bt=this.getCurvePercent(Mt/G.ENTRIES-1,1-(rt-yt)/(at[Mt+G.PREV_TIME]-yt));ot+=(at[Mt+G.VALUE]-ot)*Bt;}ft==o.setup?Q.spacing=Q.data.spacing+(ot-Q.data.spacing)*ht:Q.spacing+=(ot-Q.spacing)*ht;}},G})(vt);Y.PathConstraintSpacingTimeline=ct;var ut=(function(st){function G(et){var dt=st.call(this,et)||this;return dt.frames=Y.Utils.newFloatArray(et*G.ENTRIES),dt}return Ve(G,st),G.prototype.getPropertyId=function(){return (y.pathConstraintMix<<24)+this.pathConstraintIndex},G.prototype.setFrame=function(et,dt,rt,It){et*=G.ENTRIES,this.frames[et]=dt,this.frames[et+G.ROTATE]=rt,this.frames[et+G.TRANSLATE]=It;},G.prototype.apply=function(et,dt,rt,It,ht,ft,kt){var at=this.frames,Q=Skeleton.pathConstraints[this.pathConstraintIndex];if(Q.active)if(rt<at[0])switch(ft){case o.setup:return Q.rotateMix=Q.data.rotateMix,void(Q.translateMix=Q.data.translateMix);case o.first:Q.rotateMix+=(Q.data.rotateMix-Q.rotateMix)*ht,Q.translateMix+=(Q.data.translateMix-Q.translateMix)*ht;}else {var ot=0,Mt=0;if(rt>=at[at.length-G.ENTRIES])ot=at[at.length+G.PREV_ROTATE],Mt=at[at.length+G.PREV_TRANSLATE];else {var yt=lt.binarySearch(at,rt,G.ENTRIES);ot=at[yt+G.PREV_ROTATE],Mt=at[yt+G.PREV_TRANSLATE];var Bt=at[yt],Dt=this.getCurvePercent(yt/G.ENTRIES-1,1-(rt-Bt)/(at[yt+G.PREV_TIME]-Bt));ot+=(at[yt+G.ROTATE]-ot)*Dt,Mt+=(at[yt+G.TRANSLATE]-Mt)*Dt;}ft==o.setup?(Q.rotateMix=Q.data.rotateMix+(ot-Q.data.rotateMix)*ht,Q.translateMix=Q.data.translateMix+(Mt-Q.data.translateMix)*ht):(Q.rotateMix+=(ot-Q.rotateMix)*ht,Q.translateMix+=(Mt-Q.translateMix)*ht);}},G.ENTRIES=3,G.PREV_TIME=-3,G.PREV_ROTATE=-2,G.PREV_TRANSLATE=-1,G.ROTATE=1,G.TRANSLATE=2,G})(a);Y.PathConstraintMixTimeline=ut;}))(Rt||(Rt={})),(function(Y){var lt=(function(){function f(u){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new T(this),this.propertyIDs=new Y.IntSet,this.animationsChanged=false,this.trackEntryPool=new Y.Pool((function(){return new o})),this.data=u;}return f.prototype.update=function(u){u*=this.timeScale;for(var A=this.tracks,S=0,O=A.length;S<O;S++){var I=A[S];if(I!=null){I.animationLast=I.nextAnimationLast,I.trackLast=I.nextTrackLast;var U=u*I.timeScale;if(I.delay>0){if(I.delay-=U,I.delay>0)continue;U=-I.delay,I.delay=0;}var L=I.next;if(L!=null){var R=I.trackLast-L.delay;if(R>=0){for(L.delay=0,L.trackTime+=I.timeScale==0?0:(R/I.timeScale+u)*L.timeScale,I.trackTime+=U,this.setCurrent(S,L,true);L.mixingFrom!=null;)L.mixTime+=u,L=L.mixingFrom;continue}}else if(I.trackLast>=I.trackEnd&&I.mixingFrom==null){A[S]=null,this.queue.end(I),this.disposeNext(I);continue}if(I.mixingFrom!=null&&this.updateMixingFrom(I,u)){var D=I.mixingFrom;for(I.mixingFrom=null,D!=null&&(D.mixingTo=null);D!=null;)this.queue.end(D),D=D.mixingFrom;}I.trackTime+=U;}}this.queue.drain();},f.prototype.updateMixingFrom=function(u,A){var S=u.mixingFrom;if(S==null)return  true;var O=this.updateMixingFrom(S,A);return S.animationLast=S.nextAnimationLast,S.trackLast=S.nextTrackLast,u.mixTime>0&&u.mixTime>=u.mixDuration?(S.totalAlpha!=0&&u.mixDuration!=0||(u.mixingFrom=S.mixingFrom,S.mixingFrom!=null&&(S.mixingFrom.mixingTo=u),u.interruptAlpha=S.interruptAlpha,this.queue.end(S)),O):(S.trackTime+=A*S.timeScale,u.mixTime+=A,false)},f.prototype.apply=function(u){if(u==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var A=this.events,S=this.tracks,O=false,I=0,U=S.length;I<U;I++){var L=S[I];if(!(L==null||L.delay>0)){O=true;var R=I==0?Y.MixBlend.first:L.mixBlend,D=L.alpha;L.mixingFrom!=null?D*=this.applyMixingFrom(L,Skeleton,R):L.trackTime>=L.trackEnd&&L.next==null&&(D=0);var q=L.animationLast,$=L.getAnimationTime(),it=L.animation.timelines.length,vt=L.animation.timelines;if(I==0&&D==1||R==Y.MixBlend.add)for(var ct=0;ct<it;ct++){Y.Utils.webkit602BugfixHelper(D,R);var ut=vt[ct];ut instanceof Y.AttachmentTimeline?this.applyAttachmentTimeline(ut,Skeleton,$,R,true):ut.apply(u,q,$,A,D,R,Y.MixDirection.mixIn);}else {var st=L.timelineMode,G=L.timelinesRotation.length==0;G&&Y.Utils.setArraySize(L.timelinesRotation,it<<1,null);for(var et=L.timelinesRotation,ct=0;ct<it;ct++){var dt=vt[ct],rt=st[ct]==f.SUBSEQUENT?R:Y.MixBlend.setup;dt instanceof Y.RotateTimeline?this.applyRotateTimeline(dt,Skeleton,$,D,rt,et,ct<<1,G):dt instanceof Y.AttachmentTimeline?this.applyAttachmentTimeline(dt,Skeleton,$,R,true):(Y.Utils.webkit602BugfixHelper(D,R),dt.apply(u,q,$,A,D,rt,Y.MixDirection.mixIn));}}this.queueEvents(L,$),A.length=0,L.nextAnimationLast=$,L.nextTrackLast=L.trackTime;}}for(var It=this.unkeyedState+f.SETUP,ht=Skeleton.slots,ft=0,kt=Skeleton.slots.length;ft<kt;ft++){var at=ht[ft];if(at.attachmentState==It){var Q=at.data.attachmentName;at.setAttachment(Q==null?null:Skeleton.getAttachment(at.data.index,Q));}}return this.unkeyedState+=2,this.queue.drain(),O},f.prototype.applyMixingFrom=function(u,A,S){var O=u.mixingFrom;O.mixingFrom!=null&&this.applyMixingFrom(O,A,S);var I=0;u.mixDuration==0?(I=1,S==Y.MixBlend.first&&(S=Y.MixBlend.setup)):((I=u.mixTime/u.mixDuration)>1&&(I=1),S!=Y.MixBlend.first&&(S=O.mixBlend));var U=I<O.eventThreshold?this.events:null,L=I<O.attachmentThreshold,R=I<O.drawOrderThreshold,D=O.animationLast,q=O.getAnimationTime(),$=O.animation.timelines.length,it=O.animation.timelines,vt=O.alpha*u.interruptAlpha,ct=vt*(1-I);if(S==Y.MixBlend.add)for(var ut=0;ut<$;ut++)it[ut].apply(skeleton,D,q,U,ct,S,Y.MixDirection.mixOut);else {var st=O.timelineMode,G=O.timelineHoldMix,et=O.timelinesRotation.length==0;et&&Y.Utils.setArraySize(O.timelinesRotation,$<<1,null);var dt=O.timelinesRotation;O.totalAlpha=0;for(var ut=0;ut<$;ut++){var rt=it[ut],It=Y.MixDirection.mixOut,ht=void 0,ft=0;switch(st[ut]){case f.SUBSEQUENT:if(!R&&rt instanceof Y.DrawOrderTimeline)continue;ht=S,ft=ct;break;case f.FIRST:ht=Y.MixBlend.setup,ft=ct;break;case f.HOLD_SUBSEQUENT:ht=S,ft=vt;break;case f.HOLD_FIRST:ht=Y.MixBlend.setup,ft=vt;break;default:ht=Y.MixBlend.setup;var kt=G[ut];ft=vt*Math.max(0,1-kt.mixTime/kt.mixDuration);}O.totalAlpha+=ft,rt instanceof Y.RotateTimeline?this.applyRotateTimeline(rt,A,q,ft,ht,dt,ut<<1,et):rt instanceof Y.AttachmentTimeline?this.applyAttachmentTimeline(rt,A,q,ht,L):(Y.Utils.webkit602BugfixHelper(ft,S),R&&rt instanceof Y.DrawOrderTimeline&&ht==Y.MixBlend.setup&&(It=Y.MixDirection.mixIn),rt.apply(skeleton,D,q,U,ft,ht,It));}}return u.mixDuration>0&&this.queueEvents(O,q),this.events.length=0,O.nextAnimationLast=q,O.nextTrackLast=O.trackTime,I},f.prototype.applyAttachmentTimeline=function(u,A,S,O,I){var U=A.slots[u.slotIndex];if(U.bone.active){var L=u.frames,R;S<L[0]?O!=Y.MixBlend.setup&&O!=Y.MixBlend.first||this.setAttachment(skeleton,U,U.data.attachmentName,I):(R=S>=L[L.length-1]?L.length-1:Y.Animation.binarySearch(L,S)-1,this.setAttachment(skeleton,U,u.attachmentNames[R],I)),U.attachmentState<=this.unkeyedState&&(U.attachmentState=this.unkeyedState+f.SETUP);}},f.prototype.setAttachment=function(u,A,S,O){A.setAttachment(S==null?null:Skeleton.getAttachment(A.data.index,S)),O&&(A.attachmentState=this.unkeyedState+f.CURRENT);},f.prototype.applyRotateTimeline=function(u,A,S,O,I,U,L,R){if(R&&(U[L]=0),O!=1){var D=u,q=D.frames,$=A.bones[D.boneIndex];if($.active){var it=0,vt=0;if(S<q[0])switch(I){case Y.MixBlend.setup:$.rotation=$.data.rotation;default:return;case Y.MixBlend.first:it=$.rotation,vt=$.data.rotation;}else if(it=I==Y.MixBlend.setup?$.data.rotation:$.rotation,S>=q[q.length-Y.RotateTimeline.ENTRIES])vt=$.data.rotation+q[q.length+Y.RotateTimeline.PREV_ROTATION];else {var ct=Y.Animation.binarySearch(q,S,Y.RotateTimeline.ENTRIES),ut=q[ct+Y.RotateTimeline.PREV_ROTATION],st=q[ct],G=D.getCurvePercent((ct>>1)-1,1-(S-st)/(q[ct+Y.RotateTimeline.PREV_TIME]-st));vt=q[ct+Y.RotateTimeline.ROTATION]-ut,vt=ut+(vt-=360*(16384-(16384.499999999996-vt/360|0)))*G+$.data.rotation,vt-=360*(16384-(16384.499999999996-vt/360|0));}var et=0,dt=vt-it;if((dt-=360*(16384-(16384.499999999996-dt/360|0)))==0)et=U[L];else {var rt=0,It=0;R?(rt=0,It=dt):(rt=U[L],It=U[L+1]);var ht=dt>0,ft=rt>=0;Y.MathUtils.signum(It)!=Y.MathUtils.signum(dt)&&Math.abs(It)<=90&&(Math.abs(rt)>180&&(rt+=360*Y.MathUtils.signum(rt)),ft=ht),et=dt+rt-rt%360,ft!=ht&&(et+=360*Y.MathUtils.signum(rt)),U[L]=et;}U[L+1]=dt,it+=et*O,$.rotation=it-360*(16384-(16384.499999999996-it/360|0));}}else u.apply(skeleton,0,S,null,1,I,Y.MixDirection.mixIn);},f.prototype.queueEvents=function(u,A){for(var S=u.animationStart,O=u.animationEnd,I=O-S,U=u.trackLast%I,L=this.events,R=0,D=L.length;R<D;R++){var q=L[R];if(q.time<U)break;q.time>O||this.queue.event(u,q);}for((u.loop?I==0||U>u.trackTime%I:A>=O&&u.animationLast<O)&&this.queue.complete(u);R<D;R++){L[R].time<S||this.queue.event(u,L[R]);}},f.prototype.clearTracks=function(){var u=this.queue.drainDisabled;this.queue.drainDisabled=true;for(var A=0,S=this.tracks.length;A<S;A++)this.clearTrack(A);this.tracks.length=0,this.queue.drainDisabled=u,this.queue.drain();},f.prototype.clearTrack=function(u){if(!(u>=this.tracks.length)){var A=this.tracks[u];if(A!=null){this.queue.end(A),this.disposeNext(A);for(var S=A;;){var O=S.mixingFrom;if(O==null)break;this.queue.end(O),S.mixingFrom=null,S.mixingTo=null,S=O;}this.tracks[A.trackIndex]=null,this.queue.drain();}}},f.prototype.setCurrent=function(u,A,S){var O=this.expandToIndex(u);this.tracks[u]=A,O!=null&&(S&&this.queue.interrupt(O),A.mixingFrom=O,O.mixingTo=A,A.mixTime=0,O.mixingFrom!=null&&O.mixDuration>0&&(A.interruptAlpha*=Math.min(1,O.mixTime/O.mixDuration)),O.timelinesRotation.length=0),this.queue.start(A);},f.prototype.setAnimation=function(u,A,S){var O=this.data.skeletonData.findAnimation(A);if(O==null)throw new Error("Animation not found: "+A);return this.setAnimationWith(u,O,S)},f.prototype.setAnimationWith=function(u,A,S){if(A==null)throw new Error("animation cannot be null.");var O=true,I=this.expandToIndex(u);I!=null&&(I.nextTrackLast==-1?(this.tracks[u]=I.mixingFrom,this.queue.interrupt(I),this.queue.end(I),this.disposeNext(I),I=I.mixingFrom,O=false):this.disposeNext(I));var U=this.trackEntry(u,A,S,I);return this.setCurrent(u,U,O),this.queue.drain(),U},f.prototype.addAnimation=function(u,A,S,O){var I=this.data.skeletonData.findAnimation(A);if(I==null)throw new Error("Animation not found: "+A);return this.addAnimationWith(u,I,S,O)},f.prototype.addAnimationWith=function(u,A,S,O){if(A==null)throw new Error("animation cannot be null.");var I=this.expandToIndex(u);if(I!=null)for(;I.next!=null;)I=I.next;var U=this.trackEntry(u,A,S,I);if(I==null)this.setCurrent(u,U,true),this.queue.drain();else if(I.next=U,O<=0){var L=I.animationEnd-I.animationStart;L!=0?(I.loop?O+=L*(1+(I.trackTime/L|0)):O+=Math.max(L,I.trackTime),O-=this.data.getMix(I.animation,A)):O=I.trackTime;}return U.delay=O,U},f.prototype.setEmptyAnimation=function(u,A){var S=this.setAnimationWith(u,f.emptyAnimation,false);return S.mixDuration=A,S.trackEnd=A,S},f.prototype.addEmptyAnimation=function(u,A,S){S<=0&&(S-=A);var O=this.addAnimationWith(u,f.emptyAnimation,false,S);return O.mixDuration=A,O.trackEnd=A,O},f.prototype.setEmptyAnimations=function(u){var A=this.queue.drainDisabled;this.queue.drainDisabled=true;for(var S=0,O=this.tracks.length;S<O;S++){var I=this.tracks[S];I!=null&&this.setEmptyAnimation(I.trackIndex,u);}this.queue.drainDisabled=A,this.queue.drain();},f.prototype.expandToIndex=function(u){return u<this.tracks.length?this.tracks[u]:(Y.Utils.ensureArrayCapacity(this.tracks,u+1,null),this.tracks.length=u+1,null)},f.prototype.trackEntry=function(u,A,S,O){var I=this.trackEntryPool.obtain();return I.trackIndex=u,I.animation=A,I.loop=S,I.holdPrevious=false,I.eventThreshold=0,I.attachmentThreshold=0,I.drawOrderThreshold=0,I.animationStart=0,I.animationEnd=A.duration,I.animationLast=-1,I.nextAnimationLast=-1,I.delay=0,I.trackTime=0,I.trackLast=-1,I.nextTrackLast=-1,I.trackEnd=Number.MAX_VALUE,I.timeScale=1,I.alpha=1,I.interruptAlpha=1,I.mixTime=0,I.mixDuration=O==null?0:this.data.getMix(O.animation,A),I.mixBlend=Y.MixBlend.replace,I},f.prototype.disposeNext=function(u){for(var A=u.next;A!=null;)this.queue.dispose(A),A=A.next;u.next=null;},f.prototype._animationsChanged=function(){this.animationsChanged=false,this.propertyIDs.clear();for(var u=0,A=this.tracks.length;u<A;u++){var S=this.tracks[u];if(S!=null){for(;S.mixingFrom!=null;)S=S.mixingFrom;do S.mixingFrom!=null&&S.mixBlend==Y.MixBlend.add||this.computeHold(S),S=S.mixingTo;while(S!=null)}}},f.prototype.computeHold=function(u){var A=u.mixingTo,S=u.animation.timelines,O=u.animation.timelines.length,I=Y.Utils.setArraySize(u.timelineMode,O);u.timelineHoldMix.length=0;var U=Y.Utils.setArraySize(u.timelineHoldMix,O),L=this.propertyIDs;if(A!=null&&A.holdPrevious)for(var R=0;R<O;R++)I[R]=L.add(S[R].getPropertyId())?f.HOLD_FIRST:f.HOLD_SUBSEQUENT;else t:for(var R=0;R<O;R++){var D=S[R],q=D.getPropertyId();if(L.add(q))if(A==null||D instanceof Y.AttachmentTimeline||D instanceof Y.DrawOrderTimeline||D instanceof Y.EventTimeline||!A.animation.hasTimeline(q))I[R]=f.FIRST;else {for(var $=A.mixingTo;$!=null;$=$.mixingTo)if(!$.animation.hasTimeline(q)){if(u.mixDuration>0){I[R]=f.HOLD_MIX,U[R]=$;continue t}break}I[R]=f.HOLD_FIRST;}else I[R]=f.SUBSEQUENT;}},f.prototype.getCurrent=function(u){return u>=this.tracks.length?null:this.tracks[u]},f.prototype.addListener=function(u){if(u==null)throw new Error("listener cannot be null.");this.listeners.push(u);},f.prototype.removeListener=function(u){var A=this.listeners.indexOf(u);A>=0&&this.listeners.splice(A,1);},f.prototype.clearListeners=function(){this.listeners.length=0;},f.prototype.clearListenerNotifications=function(){this.queue.clear();},f.emptyAnimation=new Y.Animation("<empty>",[],0),f.SUBSEQUENT=0,f.FIRST=1,f.HOLD_SUBSEQUENT=2,f.HOLD_FIRST=3,f.HOLD_MIX=4,f.SETUP=1,f.CURRENT=2,f})();Y.AnimationState=lt;var o=(function(){function f(){this.mixBlend=Y.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array;}return f.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;},f.prototype.getAnimationTime=function(){if(this.loop){var u=this.animationEnd-this.animationStart;return u==0?this.animationStart:this.trackTime%u+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},f.prototype.setAnimationLast=function(u){this.animationLast=u,this.nextAnimationLast=u;},f.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},f.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0;},f})();Y.TrackEntry=o;var T=(function(){function f(u){this.objects=[],this.drainDisabled=false,this.animState=u;}return f.prototype.start=function(u){this.objects.push(y.start),this.objects.push(u),this.animState.animationsChanged=true;},f.prototype.interrupt=function(u){this.objects.push(y.interrupt),this.objects.push(u);},f.prototype.end=function(u){this.objects.push(y.end),this.objects.push(u),this.animState.animationsChanged=true;},f.prototype.dispose=function(u){this.objects.push(y.dispose),this.objects.push(u);},f.prototype.complete=function(u){this.objects.push(y.complete),this.objects.push(u);},f.prototype.event=function(u,A){this.objects.push(y.event),this.objects.push(u),this.objects.push(A);},f.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=true;for(var u=this.objects,A=this.animState.listeners,S=0;S<u.length;S+=2){var O=u[S],I=u[S+1];switch(O){case y.start:I.listener!=null&&I.listener.start&&I.listener.start(I);for(var U=0;U<A.length;U++)A[U].start&&A[U].start(I);break;case y.interrupt:I.listener!=null&&I.listener.interrupt&&I.listener.interrupt(I);for(var U=0;U<A.length;U++)A[U].interrupt&&A[U].interrupt(I);break;case y.end:I.listener!=null&&I.listener.end&&I.listener.end(I);for(var U=0;U<A.length;U++)A[U].end&&A[U].end(I);case y.dispose:I.listener!=null&&I.listener.dispose&&I.listener.dispose(I);for(var U=0;U<A.length;U++)A[U].dispose&&A[U].dispose(I);this.animState.trackEntryPool.free(I);break;case y.complete:I.listener!=null&&I.listener.complete&&I.listener.complete(I);for(var U=0;U<A.length;U++)A[U].complete&&A[U].complete(I);break;case y.event:var L=u[2+S++];I.listener!=null&&I.listener.event&&I.listener.event(I,L);for(var U=0;U<A.length;U++)A[U].event&&A[U].event(I,L);}}this.clear(),this.drainDisabled=false;}},f.prototype.clear=function(){this.objects.length=0;},f})(),y;Y.EventQueue=T,(function(f){f[f.start=0]="start",f[f.interrupt=1]="interrupt",f[f.end=2]="end",f[f.dispose=3]="dispose",f[f.complete=4]="complete",f[f.event=5]="event";})(y=Y.EventType||(Y.EventType={}));var a=(function(){function f(){}return f.prototype.start=function(u){},f.prototype.interrupt=function(u){},f.prototype.end=function(u){},f.prototype.dispose=function(u){},f.prototype.complete=function(u){},f.prototype.event=function(u,A){},f})();Y.AnimationStateAdapter=a;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T){if(this.animationToMixTime={},this.defaultMix=0,T==null)throw new Error("skeletonData cannot be null.");this.skeletonData=SkeletonData;}return o.prototype.setMix=function(T,y,a){var f=this.skeletonData.findAnimation(T);if(f==null)throw new Error("Animation not found: "+T);var u=this.skeletonData.findAnimation(y);if(u==null)throw new Error("Animation not found: "+y);this.setMixWith(f,u,a);},o.prototype.setMixWith=function(T,y,a){if(T==null)throw new Error("from cannot be null.");if(y==null)throw new Error("to cannot be null.");var f=T.name+"."+y.name;this.animationToMixTime[f]=a;},o.prototype.getMix=function(T,y){var a=T.name+"."+y.name,f=this.animationToMixTime[a];return f===void 0?this.defaultMix:f},o})();Y.AnimationStateData=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y){y===void 0&&(y=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=T,this.pathPrefix=y;}return o.prototype.downloadText=function(T,y,a){var f=new XMLHttpRequest;f.overrideMimeType("text/html"),this.rawDataUris[T]&&(T=this.rawDataUris[T]),f.open("GET",T,true),f.onload=function(){f.status==200?y(f.responseText):a(f.status,f.responseText);},f.onerror=function(){a(f.status,f.responseText);},f.send();},o.prototype.downloadBinary=function(T,y,a){var f=new XMLHttpRequest;this.rawDataUris[T]&&(T=this.rawDataUris[T]),f.open("GET",T,true),f.responseType="arraybuffer",f.onload=function(){f.status==200?y(new Uint8Array(f.response)):a(f.status,f.responseText);},f.onerror=function(){a(f.status,f.responseText);},f.send();},o.prototype.setRawDataURI=function(T,y){this.rawDataUris[this.pathPrefix+T]=y;},o.prototype.loadBinary=function(T,y,a){var f=this;y===void 0&&(y=null),a===void 0&&(a=null),T=this.pathPrefix+T,this.toLoad++,this.downloadBinary(T,(function(u){f.assets[T]=u,y&&y(T,u),f.toLoad--,f.loaded++;}),(function(u,A){f.errors[T]="Couldn't load binary "+T+": status "+status+", "+A,a&&a(T,"Couldn't load binary "+T+": status "+status+", "+A),f.toLoad--,f.loaded++;}));},o.prototype.loadText=function(T,y,a){var f=this;y===void 0&&(y=null),a===void 0&&(a=null),T=this.pathPrefix+T,this.toLoad++,this.downloadText(T,(function(u){f.assets[T]=u,y&&y(T,u),f.toLoad--,f.loaded++;}),(function(u,A){f.errors[T]="Couldn't load text "+T+": status "+status+", "+A,a&&a(T,"Couldn't load text "+T+": status "+status+", "+A),f.toLoad--,f.loaded++;}));},o.prototype.loadTexture=function(T,y,a){var f=this;y===void 0&&(y=null),a===void 0&&(a=null);var u=T=this.pathPrefix+T;this.toLoad++;var A=new Image;A.crossOrigin="anonymous",A.onload=function(S){var O=f.textureLoader(A);f.assets[u]=O,f.toLoad--,f.loaded++,y&&y(T,A);},A.onerror=function(S){f.errors[T]="Couldn't load image "+T,f.toLoad--,f.loaded++,a&&a(T,"Couldn't load image "+T);},this.rawDataUris[T]&&(T=this.rawDataUris[T]),A.src=T;},o.prototype.loadTextureAtlas=function(T,y,a){var f=this;y===void 0&&(y=null),a===void 0&&(a=null);var u=T.lastIndexOf("/")>=0?T.substring(0,T.lastIndexOf("/")):"";T=this.pathPrefix+T,this.toLoad++,this.downloadText(T,(function(A){var S={count:0},O=new Array;try{var I=new Y.TextureAtlas(A,(function($){O.push(u==""?$:u+"/"+$);var it=document.createElement("img");return it.width=16,it.height=16,new Y.FakeTexture(it)}));}catch($){var U=$;return f.errors[T]="Couldn't load texture atlas "+T+": "+U.message,a&&a(T,"Couldn't load texture atlas "+T+": "+U.message),f.toLoad--,void f.loaded++}for(var L=function($){var it=false;f.loadTexture($,(function(vt,ct){if(S.count++,S.count==O.length)if(it)f.errors[T]="Couldn't load texture atlas page "+vt+"} of atlas "+T,a&&a(T,"Couldn't load texture atlas page "+vt+" of atlas "+T),f.toLoad--,f.loaded++;else try{var ut=new Y.TextureAtlas(A,(function(G){return f.get(u==""?G:u+"/"+G)}));f.assets[T]=ut,y&&y(T,ut),f.toLoad--,f.loaded++;}catch(G){var st=G;f.errors[T]="Couldn't load texture atlas "+T+": "+st.message,a&&a(T,"Couldn't load texture atlas "+T+": "+st.message),f.toLoad--,f.loaded++;}}),(function(vt,ct){it=true,S.count++,S.count==O.length&&(f.errors[T]="Couldn't load texture atlas page "+vt+"} of atlas "+T,a&&a(T,"Couldn't load texture atlas page "+vt+" of atlas "+T),f.toLoad--,f.loaded++);}));},R=0,D=O;R<D.length;R++){L(D[R]);}}),(function(A,S){f.errors[T]="Couldn't load texture atlas "+T+": status "+status+", "+S,a&&a(T,"Couldn't load texture atlas "+T+": status "+status+", "+S),f.toLoad--,f.loaded++;}));},o.prototype.get=function(T){return T=this.pathPrefix+T,this.assets[T]},o.prototype.remove=function(T){T=this.pathPrefix+T;var y=this.assets[T];y.dispose&&y.dispose(),this.assets[T]=null;},o.prototype.removeAll=function(){for(var T in this.assets){var y=this.assets[T];y.dispose&&y.dispose();}this.assets={};},o.prototype.isLoadingComplete=function(){return this.toLoad==0},o.prototype.getToLoad=function(){return this.toLoad},o.prototype.getLoaded=function(){return this.loaded},o.prototype.dispose=function(){this.removeAll();},o.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},o.prototype.getErrors=function(){return this.errors},o})();Y.AssetManager=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T){this.atlas=T;}return o.prototype.newRegionAttachment=function(T,y,a){var f=this.atlas.findRegion(a);if(f==null)throw new Error("Region not found in atlas: "+a+" (region attachment: "+y+")");f.renderObject=f;var u=new Y.RegionAttachment(y);return u.setRegion(f),u},o.prototype.newMeshAttachment=function(T,y,a){var f=this.atlas.findRegion(a);if(f==null)throw new Error("Region not found in atlas: "+a+" (mesh attachment: "+y+")");f.renderObject=f;var u=new Y.MeshAttachment(y);return u.region=f,u},o.prototype.newBoundingBoxAttachment=function(T,y){return new Y.BoundingBoxAttachment(y)},o.prototype.newPathAttachment=function(T,y){return new Y.PathAttachment(y)},o.prototype.newPointAttachment=function(T,y){return new Y.PointAttachment(y)},o.prototype.newClippingAttachment=function(T,y){return new Y.ClippingAttachment(y)},o})();Y.AtlasAttachmentLoader=lt;})(Rt||(Rt={})),(function(Y){(function(o){o[o.Normal=0]="Normal",o[o.Additive=1]="Additive",o[o.Multiply=2]="Multiply",o[o.Screen=3]="Screen";})(Y.BlendMode||(Y.BlendMode={}));})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y,a){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=false,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=false,this.active=false,T==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=T,this.skeleton=y,this.parent=a,this.setToSetupPose();}return o.prototype.isActive=function(){return this.active},o.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);},o.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);},o.prototype.updateWorldTransformWith=function(T,y,a,f,u,A,S){this.ax=T,this.ay=y,this.arotation=a,this.ascaleX=f,this.ascaleY=u,this.ashearX=A,this.ashearY=S,this.appliedValid=true;var O=this.parent;if(O==null){var I=this.skeleton,U=a+90+S,L=I.scaleX,R=I.scaleY;return this.a=Y.MathUtils.cosDeg(a+A)*f*L,this.b=Y.MathUtils.cosDeg(U)*u*L,this.c=Y.MathUtils.sinDeg(a+A)*f*R,this.d=Y.MathUtils.sinDeg(U)*u*R,this.worldX=T*L+I.x,void(this.worldY=y*R+I.y)}var D=O.a,q=O.b,$=O.c,it=O.d;switch(this.worldX=D*T+q*y+O.worldX,this.worldY=$*T+it*y+O.worldY,this.data.transformMode){case Y.TransformMode.Normal:var U=a+90+S,kt=Y.MathUtils.cosDeg(a+A)*f,at=Y.MathUtils.cosDeg(U)*u,Q=Y.MathUtils.sinDeg(a+A)*f,ot=Y.MathUtils.sinDeg(U)*u;return this.a=D*kt+q*Q,this.b=D*at+q*ot,this.c=$*kt+it*Q,void(this.d=$*at+it*ot);case Y.TransformMode.OnlyTranslation:var U=a+90+S;this.a=Y.MathUtils.cosDeg(a+A)*f,this.b=Y.MathUtils.cosDeg(U)*u,this.c=Y.MathUtils.sinDeg(a+A)*f,this.d=Y.MathUtils.sinDeg(U)*u;break;case Y.TransformMode.NoRotationOrReflection:var rt,vt=0;(rt=D*D+$*$)>1e-4?(rt=Math.abs(D*it-q*$)/rt,D/=this.skeleton.scaleX,q=($/=this.skeleton.scaleY)*rt,it=D*rt,vt=Math.atan2($,D)*Y.MathUtils.radDeg):(D=0,$=0,vt=90-Math.atan2(it,q)*Y.MathUtils.radDeg);var ct=a+A-vt,ut=a+S-vt+90,kt=Y.MathUtils.cosDeg(ct)*f,at=Y.MathUtils.cosDeg(ut)*u,Q=Y.MathUtils.sinDeg(ct)*f,ot=Y.MathUtils.sinDeg(ut)*u;this.a=D*kt-q*Q,this.b=D*at-q*ot,this.c=$*kt+it*Q,this.d=$*at+it*ot;break;case Y.TransformMode.NoScale:case Y.TransformMode.NoScaleOrReflection:var st=Y.MathUtils.cosDeg(a),G=Y.MathUtils.sinDeg(a),et=(D*st+q*G)/this.skeleton.scaleX,dt=($*st+it*G)/this.skeleton.scaleY,rt;(rt=Math.sqrt(et*et+dt*dt))>1e-5&&(rt=1/rt),et*=rt,dt*=rt,rt=Math.sqrt(et*et+dt*dt),this.data.transformMode==Y.TransformMode.NoScale&&D*it-q*$<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(rt=-rt);var It=Math.PI/2+Math.atan2(dt,et),ht=Math.cos(It)*rt,ft=Math.sin(It)*rt,kt=Y.MathUtils.cosDeg(A)*f,at=Y.MathUtils.cosDeg(90+S)*u,Q=Y.MathUtils.sinDeg(A)*f,ot=Y.MathUtils.sinDeg(90+S)*u;this.a=et*kt+ht*Q,this.b=et*at+ht*ot,this.c=dt*kt+ft*Q,this.d=dt*at+ft*ot;}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY;},o.prototype.setToSetupPose=function(){var T=this.data;this.x=T.x,this.y=T.y,this.rotation=T.rotation,this.scaleX=T.scaleX,this.scaleY=T.scaleY,this.shearX=T.shearX,this.shearY=T.shearY;},o.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*Y.MathUtils.radDeg},o.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*Y.MathUtils.radDeg},o.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},o.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},o.prototype.updateAppliedTransform=function(){this.appliedValid=true;var T=this.parent;if(T==null)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*Y.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*Y.MathUtils.radDeg);var y=T.a,a=T.b,f=T.c,u=T.d,A=1/(y*u-a*f),S=this.worldX-T.worldX,O=this.worldY-T.worldY;this.ax=S*u*A-O*a*A,this.ay=O*y*A-S*f*A;var I=A*u,U=A*y,L=A*a,R=A*f,D=I*this.a-L*this.c,q=I*this.b-L*this.d,$=U*this.c-R*this.a,it=U*this.d-R*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(D*D+$*$),this.ascaleX>1e-4){var vt=D*it-q*$;this.ascaleY=vt/this.ascaleX,this.ashearY=Math.atan2(D*q+$*it,vt)*Y.MathUtils.radDeg,this.arotation=Math.atan2($,D)*Y.MathUtils.radDeg;}else this.ascaleX=0,this.ascaleY=Math.sqrt(q*q+it*it),this.ashearY=0,this.arotation=90-Math.atan2(it,q)*Y.MathUtils.radDeg;},o.prototype.worldToLocal=function(T){var y=this.a,a=this.b,f=this.c,u=this.d,A=1/(y*u-a*f),S=T.x-this.worldX,O=T.y-this.worldY;return T.x=S*u*A-O*a*A,T.y=O*y*A-S*f*A,T},o.prototype.localToWorld=function(T){var y=T.x,a=T.y;return T.x=y*this.a+a*this.b+this.worldX,T.y=y*this.c+a*this.d+this.worldY,T},o.prototype.worldToLocalRotation=function(T){var y=Y.MathUtils.sinDeg(T),a=Y.MathUtils.cosDeg(T);return Math.atan2(this.a*y-this.c*a,this.d*a-this.b*y)*Y.MathUtils.radDeg+this.rotation-this.shearX},o.prototype.localToWorldRotation=function(T){T-=this.rotation-this.shearX;var y=Y.MathUtils.sinDeg(T),a=Y.MathUtils.cosDeg(T);return Math.atan2(a*this.c+y*this.d,a*this.a+y*this.b)*Y.MathUtils.radDeg},o.prototype.rotateWorld=function(T){var y=this.a,a=this.b,f=this.c,u=this.d,A=Y.MathUtils.cosDeg(T),S=Y.MathUtils.sinDeg(T);this.a=A*y-S*f,this.b=A*a-S*u,this.c=S*y+A*f,this.d=S*a+A*u,this.appliedValid=false;},o})();Y.Bone=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function T(y,a,f){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=o.Normal,this.skinRequired=false,this.color=new Y.Color,y<0)throw new Error("index must be >= 0.");if(a==null)throw new Error("name cannot be null.");this.index=y,this.name=a,this.parent=f;}return T})(),o;Y.BoneData=lt,(function(T){T[T.Normal=0]="Normal",T[T.OnlyTranslation=1]="OnlyTranslation",T[T.NoRotationOrReflection=2]="NoRotationOrReflection",T[T.NoScale=3]="NoScale",T[T.NoScaleOrReflection=4]="NoScaleOrReflection";})(o=Y.TransformMode||(Y.TransformMode={}));})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y,a){this.name=T,this.order=y,this.skinRequired=a;}return o})();Y.ConstraintData=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y){if(y==null)throw new Error("data cannot be null.");this.time=T,this.data=y;}return o})();Y.Event=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T){this.name=T;}return o})();Y.EventData=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y){if(this.bendDirection=0,this.compress=false,this.stretch=false,this.mix=1,this.softness=0,this.active=false,T==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=T,this.mix=T.mix,this.softness=T.softness,this.bendDirection=T.bendDirection,this.compress=T.compress,this.stretch=T.stretch,this.bones=new Array;for(var a=0;a<T.bones.length;a++)this.bones.push(skeleton.findBone(T.bones[a].name));this.target=y.findBone(T.target.name);}return o.prototype.isActive=function(){return this.active},o.prototype.apply=function(){this.update();},o.prototype.update=function(){var T=this.target,y=this.bones;switch(y.length){case 1:this.apply1(y[0],T.worldX,T.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(y[0],y[1],T.worldX,T.worldY,this.bendDirection,this.stretch,this.softness,this.mix);}},o.prototype.apply1=function(T,y,a,f,u,A,S){T.appliedValid||T.updateAppliedTransform();var O=T.parent,I=O.a,U=O.b,L=O.c,R=O.d,D=-T.ashearX-T.arotation,q=0,$=0;switch(T.data.transformMode){case Y.TransformMode.OnlyTranslation:q=y-T.worldX,$=a-T.worldY;break;case Y.TransformMode.NoRotationOrReflection:var it=Math.abs(I*R-U*L)/(I*I+L*L),vt=I/T.skeleton.scaleX,ct=L/T.skeleton.scaleY;U=-ct*it*T.skeleton.scaleX,R=vt*it*T.skeleton.scaleY,D+=Math.atan2(ct,vt)*Y.MathUtils.radDeg;default:var ut=y-O.worldX,st=a-O.worldY,G=I*R-U*L;q=(ut*R-st*U)/G-T.ax,$=(st*I-ut*L)/G-T.ay;}D+=Math.atan2($,q)*Y.MathUtils.radDeg,T.ascaleX<0&&(D+=180),D>180?D-=360:D<-180&&(D+=360);var et=T.ascaleX,dt=T.ascaleY;if(f||u){switch(T.data.transformMode){case Y.TransformMode.NoScale:case Y.TransformMode.NoScaleOrReflection:q=y-T.worldX,$=a-T.worldY;}var rt=T.data.length*et,It=Math.sqrt(q*q+$*$),it;(f&&It<rt||u&&It>rt&&rt>1e-4)&&(et*=it=(It/rt-1)*S+1,A&&(dt*=it));}T.updateWorldTransformWith(T.ax,T.ay,T.arotation+D*S,et,dt,T.ashearX,T.ashearY);},o.prototype.apply2=function(T,y,a,f,u,A,S,O){if(O!=0){T.appliedValid||T.updateAppliedTransform(),y.appliedValid||y.updateAppliedTransform();var I=T.ax,U=T.ay,L=T.ascaleX,R=L,D=T.ascaleY,q=y.ascaleX,$=0,it=0,vt=0;L<0?(L=-L,$=180,vt=-1):($=0,vt=1),D<0&&(D=-D,vt=-vt),q<0?(q=-q,it=180):it=0;var ct=y.ax,ut=0,st=0,G=0,et=T.a,dt=T.b,rt=T.c,It=T.d,ht=Math.abs(L-D)<=1e-4;ht?(st=et*ct+dt*(ut=y.ay)+T.worldX,G=rt*ct+It*ut+T.worldY):(ut=0,st=et*ct+T.worldX,G=rt*ct+T.worldY);var ft=T.parent;et=ft.a,dt=ft.b,rt=ft.c;var kt=1/(et*(It=ft.d)-dt*rt),at=st-ft.worldX,Q=G-ft.worldY,ot=(at*It-Q*dt)*kt-I,Mt=(Q*et-at*rt)*kt-U,yt=Math.sqrt(ot*ot+Mt*Mt),Bt=y.data.length*q,Dt,Lt;if(yt<1e-4)return this.apply1(T,a,f,false,A,false,O),void y.updateWorldTransformWith(ct,ut,0,y.ascaleX,y.ascaleY,y.ashearX,y.ashearY);var Vt=((at=a-ft.worldX)*It-(Q=f-ft.worldY)*dt)*kt-I,Gt=(Q*et-at*rt)*kt-U,Ft=Vt*Vt+Gt*Gt;if(S!=0){S*=L*(q+1)/2;var Tt=Math.sqrt(Ft),At=Tt-yt-Bt*L+S;if(At>0){var _t=Math.min(1,At/(2*S))-1;Ft=(Vt-=(_t=(At-S*(1-_t*_t))/Tt)*Vt)*Vt+(Gt-=_t*Gt)*Gt;}}t:if(ht){var ie=(Ft-yt*yt-(Bt*=L)*Bt)/(2*yt*Bt);ie<-1?ie=-1:ie>1&&(ie=1,A&&(R*=(Math.sqrt(Ft)/(yt+Bt)-1)*O+1)),Lt=Math.acos(ie)*u,et=yt+Bt*ie,dt=Bt*Math.sin(Lt),Dt=Math.atan2(Gt*et-Vt*dt,Vt*et+Gt*dt);}else {var Kt=(et=L*Bt)*et,Ae=(dt=D*Bt)*dt,Le=Math.atan2(Gt,Vt),ye=-2*Ae*yt,Ye=Ae-Kt;if((It=ye*ye-4*Ye*(rt=Ae*yt*yt+Kt*Ft-Kt*Ae))>=0){var Xe=Math.sqrt(It);ye<0&&(Xe=-Xe);var qe=(Xe=-(ye+Xe)/2)/Ye,ze=rt/Xe,Ue=Math.abs(qe)<Math.abs(ze)?qe:ze;if(Ue*Ue<=Ft){Q=Math.sqrt(Ft-Ue*Ue)*u,Dt=Le-Math.atan2(Q,Ue),Lt=Math.atan2(Q/D,(Ue-yt)/L);break t}}var Qe=Y.MathUtils.PI,We=yt-et,Ze=We*We,Be=0,$e=0,De=yt+et,vi=De*De,ri=0;(rt=-et*yt/(Kt-Ae))>=-1&&rt<=1&&(rt=Math.acos(rt),(It=(at=et*Math.cos(rt)+yt)*at+(Q=dt*Math.sin(rt))*Q)<Ze&&(Qe=rt,Ze=It,We=at,Be=Q),It>vi&&($e=rt,vi=It,De=at,ri=Q)),Ft<=(Ze+vi)/2?(Dt=Le-Math.atan2(Be*u,We),Lt=Qe*u):(Dt=Le-Math.atan2(ri*u,De),Lt=$e*u);}var hi=Math.atan2(ut,ct)*vt,ti=T.arotation;(Dt=(Dt-hi)*Y.MathUtils.radDeg+$-ti)>180?Dt-=360:Dt<-180&&(Dt+=360),T.updateWorldTransformWith(I,U,ti+Dt*O,R,T.ascaleY,0,0),ti=y.arotation,(Lt=((Lt+hi)*Y.MathUtils.radDeg-y.ashearX)*vt+it-ti)>180?Lt-=360:Lt<-180&&(Lt+=360),y.updateWorldTransformWith(ct,ut,ti+Lt*O,y.ascaleX,y.ascaleY,y.ashearX,y.ashearY);}else y.updateWorldTransform();},o})();Y.IkConstraint=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(o){function T(y){var a=o.call(this,y,0,false)||this;return a.bones=new Array,a.bendDirection=1,a.compress=false,a.stretch=false,a.uniform=false,a.mix=1,a.softness=0,a}return Ve(T,o),T})(Y.ConstraintData);Y.IkConstraintData=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=false,T==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=T,this.bones=new Array;for(var a=0,f=T.bones.length;a<f;a++)this.bones.push(skeleton.findBone(T.bones[a].name));this.target=y.findSlot(T.target.name),this.position=T.position,this.spacing=T.spacing,this.rotateMix=T.rotateMix,this.translateMix=T.translateMix;}return o.prototype.isActive=function(){return this.active},o.prototype.apply=function(){this.update();},o.prototype.update=function(){var T=this.target.getAttachment();if(T instanceof Y.PathAttachment){var y=this.rotateMix,a=this.translateMix,u=y>0;if(a>0||u){var A=this.data,S=A.spacingMode==Y.SpacingMode.Percent,O=A.rotateMode,I=O==Y.RotateMode.Tangent,U=O==Y.RotateMode.ChainScale,L=this.bones.length,R=I?L:L+1,D=this.bones,q=Y.Utils.setArraySize(this.spaces,R),$=null,it=this.spacing;if(U||!S){U&&($=Y.Utils.setArraySize(this.lengths,L));for(var vt=A.spacingMode==Y.SpacingMode.Length,ct=0,ut=R-1;ct<ut;){var st,G=(st=D[ct]).data.length;if(G<o.epsilon)U&&($[ct]=0),q[++ct]=0;else if(S){if(U){var et=G*st.a,dt=G*st.c,rt=Math.sqrt(et*et+dt*dt);$[ct]=rt;}q[++ct]=it;}else {var et=G*st.a,dt=G*st.c,It=Math.sqrt(et*et+dt*dt);U&&($[ct]=It),q[++ct]=(vt?G+it:it)*It/G;}}}else for(var ct=1;ct<R;ct++)q[ct]=it;var ht=this.computeWorldPositions(T,R,I,A.positionMode==Y.PositionMode.Percent,S),ft=ht[0],kt=ht[1],at=A.offsetRotation,Q=false,ot;at==0?Q=O==Y.RotateMode.Chain:(Q=false,at*=(ot=this.target.bone).a*ot.d-ot.b*ot.c>0?Y.MathUtils.degRad:-Y.MathUtils.degRad);for(var ct=0,ot=3;ct<L;ct++,ot+=3){var st;(st=D[ct]).worldX+=(ft-st.worldX)*a,st.worldY+=(kt-st.worldY)*a;var et,dt,Mt=(et=ht[ot])-ft,yt=(dt=ht[ot+1])-kt;if(U){var Bt=$[ct];if(Bt!=0){var Dt=(Math.sqrt(Mt*Mt+yt*yt)/Bt-1)*y+1;st.a*=Dt,st.c*=Dt;}}if(ft=et,kt=dt,u){var Lt=st.a,Vt=st.b,Gt=st.c,Ft=st.d,Tt=0,At=0,_t=0;if(Tt=I?ht[ot-1]:q[ct+1]==0?ht[ot+2]:Math.atan2(yt,Mt),Tt-=Math.atan2(Gt,Lt),Q){At=Math.cos(Tt),_t=Math.sin(Tt);var ie=st.data.length;ft+=(ie*(At*Lt-_t*Gt)-Mt)*y,kt+=(ie*(_t*Lt+At*Gt)-yt)*y;}else Tt+=at;Tt>Y.MathUtils.PI?Tt-=Y.MathUtils.PI2:Tt<-Y.MathUtils.PI&&(Tt+=Y.MathUtils.PI2),Tt*=y,At=Math.cos(Tt),_t=Math.sin(Tt),st.a=At*Lt-_t*Gt,st.b=At*Vt-_t*Ft,st.c=_t*Lt+At*Gt,st.d=_t*Vt+At*Ft;}st.appliedValid=false;}}}},o.prototype.computeWorldPositions=function(T,y,a,f,u){var A=this.target,S=this.position,O=this.spaces,I=Y.Utils.setArraySize(this.positions,3*y+2),U=null,L=T.closed,R=T.worldVerticesLength,D=R/6,q=o.NONE;if(!T.constantSpeed){var $=T.lengths,it=$[D-=L?1:2];if(f&&(S*=it),u)for(var vt=1;vt<y;vt++)O[vt]*=it;U=Y.Utils.setArraySize(this.world,8);for(var vt=0,ct=0,ut=0;vt<y;vt++,ct+=3){var st,G=S+=st=O[vt];if(L)(G%=it)<0&&(G+=it),ut=0;else {if(G<0){q!=o.BEFORE&&(q=o.BEFORE,T.computeWorldVertices(A,2,4,U,0,2)),this.addBeforePosition(G,U,0,I,ct);continue}if(G>it){q!=o.AFTER&&(q=o.AFTER,T.computeWorldVertices(A,R-6,4,U,0,2)),this.addAfterPosition(G-it,U,0,I,ct);continue}}for(;;ut++){var et=$[ut];if(!(G>et)){var dt;ut==0?G/=et:G=(G-(dt=$[ut-1]))/(et-dt);break}}ut!=q&&(q=ut,L&&ut==D?(T.computeWorldVertices(A,R-4,4,U,0,2),T.computeWorldVertices(A,0,4,U,4,2)):T.computeWorldVertices(A,6*ut+2,8,U,0,2)),this.addCurvePosition(G,U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],I,ct,a||vt>0&&st==0);}return I}L?(R+=2,U=Y.Utils.setArraySize(this.world,R),T.computeWorldVertices(A,2,R-4,U,0,2),T.computeWorldVertices(A,0,2,U,R-4,2),U[R-2]=U[0],U[R-1]=U[1]):(D--,R-=4,U=Y.Utils.setArraySize(this.world,R),T.computeWorldVertices(A,2,R,U,0,2));for(var rt=Y.Utils.setArraySize(this.curves,D),It=0,ht=U[0],ft=U[1],kt=0,at=0,Q=0,ot=0,Mt=0,yt=0,Bt=0,Dt=0,Lt=0,Vt=0,Gt=0,Ft=0,Tt=0,At=0,vt=0,_t=2;vt<D;vt++,_t+=6)kt=U[_t],at=U[_t+1],Q=U[_t+2],ot=U[_t+3],Gt=2*(Bt=.1875*(ht-2*kt+Q))+(Lt=.09375*(3*(kt-Q)-ht+(Mt=U[_t+4]))),Ft=2*(Dt=.1875*(ft-2*at+ot))+(Vt=.09375*(3*(at-ot)-ft+(yt=U[_t+5]))),Tt=.75*(kt-ht)+Bt+.16666667*Lt,At=.75*(at-ft)+Dt+.16666667*Vt,It+=Math.sqrt(Tt*Tt+At*At),Tt+=Gt,At+=Ft,Gt+=Lt,Ft+=Vt,It+=Math.sqrt(Tt*Tt+At*At),Tt+=Gt,At+=Ft,It+=Math.sqrt(Tt*Tt+At*At),Tt+=Gt+Lt,At+=Ft+Vt,It+=Math.sqrt(Tt*Tt+At*At),rt[vt]=It,ht=Mt,ft=yt;if(S*=f?It:It/T.lengths[D-1],u)for(var vt=1;vt<y;vt++)O[vt]*=It;for(var ie=this.segments,Kt=0,vt=0,ct=0,ut=0,Ae=0;vt<y;vt++,ct+=3){var st,G=S+=st=O[vt];if(L)(G%=It)<0&&(G+=It),ut=0;else {if(G<0){this.addBeforePosition(G,U,0,I,ct);continue}if(G>It){this.addAfterPosition(G-It,U,R-4,I,ct);continue}}for(;;ut++){var Le=rt[ut];if(!(G>Le)){var dt;ut==0?G/=Le:G=(G-(dt=rt[ut-1]))/(Le-dt);break}}if(ut!=q){q=ut;var ye=6*ut;for(ht=U[ye],ft=U[ye+1],kt=U[ye+2],at=U[ye+3],Q=U[ye+4],ot=U[ye+5],Gt=2*(Bt=.03*(ht-2*kt+Q))+(Lt=.006*(3*(kt-Q)-ht+(Mt=U[ye+6]))),Ft=2*(Dt=.03*(ft-2*at+ot))+(Vt=.006*(3*(at-ot)-ft+(yt=U[ye+7]))),Tt=.3*(kt-ht)+Bt+.16666667*Lt,At=.3*(at-ft)+Dt+.16666667*Vt,Kt=Math.sqrt(Tt*Tt+At*At),ie[0]=Kt,ye=1;ye<8;ye++)Tt+=Gt,At+=Ft,Gt+=Lt,Ft+=Vt,Kt+=Math.sqrt(Tt*Tt+At*At),ie[ye]=Kt;Tt+=Gt,At+=Ft,Kt+=Math.sqrt(Tt*Tt+At*At),ie[8]=Kt,Tt+=Gt+Lt,At+=Ft+Vt,Kt+=Math.sqrt(Tt*Tt+At*At),ie[9]=Kt,Ae=0;}for(G*=Kt;;Ae++){var Ye=ie[Ae];if(!(G>Ye)){var dt;Ae==0?G/=Ye:G=Ae+(G-(dt=ie[Ae-1]))/(Ye-dt);break}}this.addCurvePosition(.1*G,ht,ft,kt,at,Q,ot,Mt,yt,I,ct,a||vt>0&&st==0);}return I},o.prototype.addBeforePosition=function(T,y,a,f,u){var A=y[a],S=y[a+1],O=y[a+2]-A,I=y[a+3]-S,U=Math.atan2(I,O);f[u]=A+T*Math.cos(U),f[u+1]=S+T*Math.sin(U),f[u+2]=U;},o.prototype.addAfterPosition=function(T,y,a,f,u){var A=y[a+2],S=y[a+3],O=A-y[a],I=S-y[a+1],U=Math.atan2(I,O);f[u]=A+T*Math.cos(U),f[u+1]=S+T*Math.sin(U),f[u+2]=U;},o.prototype.addCurvePosition=function(T,y,a,f,u,A,S,O,I,U,L,R){if(T==0||isNaN(T))return U[L]=y,U[L+1]=a,void(U[L+2]=Math.atan2(u-a,f-y));var D=T*T,q=D*T,$=1-T,it=$*$,vt=it*$,ct=$*T,ut=3*ct,st=$*ut,G=ut*T,et=y*vt+f*st+A*G+O*q,dt=a*vt+u*st+S*G+I*q;U[L]=et,U[L+1]=dt,R&&(U[L+2]=T<.001?Math.atan2(u-a,f-y):Math.atan2(dt-(a*it+u*ct*2+S*D),et-(y*it+f*ct*2+A*D)));},o.NONE=-1,o.BEFORE=-2,o.AFTER=-3,o.epsilon=1e-5,o})();Y.PathConstraint=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(a){function f(u){var A=a.call(this,u,0,false)||this;return A.bones=new Array,A}return Ve(f,a),f})(Y.ConstraintData);Y.PathConstraintData=lt,(function(a){a[a.Fixed=0]="Fixed",a[a.Percent=1]="Percent";})(Y.PositionMode||(Y.PositionMode={})),(function(a){a[a.Length=0]="Length",a[a.Fixed=1]="Fixed",a[a.Percent=2]="Percent";})(Y.SpacingMode||(Y.SpacingMode={})),(function(a){a[a.Tangent=0]="Tangent",a[a.Chain=1]="Chain",a[a.ChainScale=2]="ChainScale";})(Y.RotateMode||(Y.RotateMode={}));})(Rt||(Rt={})),(function(Y){var lt=(function(){function T(y){this.toLoad=new Array,this.assets={},this.clientId=y;}return T.prototype.loaded=function(){var y=0;for(var a in this.assets)y++;return y},T})(),o=(function(){function T(y){y===void 0&&(y=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=y;}return T.prototype.queueAsset=function(y,a,f){var u=this.clientAssets[y];return u==null&&(u=new lt(y),this.clientAssets[y]=u),a!==null&&(u.textureLoader=a),u.toLoad.push(f),this.queuedAssets[f]!==f&&(this.queuedAssets[f]=f,true)},T.prototype.loadText=function(y,a){var f=this;if(a=this.pathPrefix+a,this.queueAsset(y,null,a)){var u=new XMLHttpRequest;u.overrideMimeType("text/html"),u.onreadystatechange=function(){u.readyState==XMLHttpRequest.DONE&&(u.status>=200&&u.status<300?f.rawAssets[a]=u.responseText:f.errors[a]="Couldn't load text "+a+": status "+u.status+", "+u.responseText);},u.open("GET",a,true),u.send();}},T.prototype.loadJson=function(y,a){var f=this;if(a=this.pathPrefix+a,this.queueAsset(y,null,a)){var u=new XMLHttpRequest;u.overrideMimeType("text/html"),u.onreadystatechange=function(){u.readyState==XMLHttpRequest.DONE&&(u.status>=200&&u.status<300?f.rawAssets[a]=JSON.parse(u.responseText):f.errors[a]="Couldn't load text "+a+": status "+u.status+", "+u.responseText);},u.open("GET",a,true),u.send();}},T.prototype.loadTexture=function(y,a,f){var u=this;if(f=this.pathPrefix+f,this.queueAsset(y,a,f))if((typeof window>"u"||typeof navigator>"u"||!window.document)&&typeof importScripts<"u"){fetch(f,{mode:"cors"}).then((function(U){return U.ok||(u.errors[f]="Couldn't load image "+f),U.blob()})).then((function(U){return createImageBitmap(U,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(U){u.rawAssets[f]=U;}));}else {var I=new Image;I.crossOrigin="anonymous",I.onload=function(U){u.rawAssets[f]=I;},I.onerror=function(U){u.errors[f]="Couldn't load image "+f;},I.src=f;}},T.prototype.get=function(y,a){a=this.pathPrefix+a;var f=this.clientAssets[y];return f==null||f.assets[a]},T.prototype.updateClientAssets=function(y){for(var a,f=(typeof window>"u"||typeof navigator>"u"||!window.document)&&typeof importScripts<"u",u=0;u<y.toLoad.length;u++){var A=y.toLoad[u],S=y.assets[A];if(S==null){var O=this.rawAssets[A];if(O==null)continue;f?O instanceof ImageBitmap?y.assets[A]=y.textureLoader(O):y.assets[A]=O:O instanceof HTMLImageElement?y.assets[A]=y.textureLoader(O):y.assets[A]=O;}}},T.prototype.isLoadingComplete=function(y){var a=this.clientAssets[y];return a==null||(this.updateClientAssets(a),a.toLoad.length==a.loaded())},T.prototype.dispose=function(){},T.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},T.prototype.getErrors=function(){return this.errors},T})();Y.SharedAssetManager=o;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,T==null)throw new Error("data cannot be null.");this.data=T,this.bones=new Array;for(var y=0;y<T.bones.length;y++){var a=T.bones[y],f=void 0;if(a.parent==null)f=new Y.Bone(a,this,null);else {var u=this.bones[a.parent.index];f=new Y.Bone(a,this,u),u.children.push(f);}this.bones.push(f);}this.slots=new Array,this.drawOrder=new Array;for(var y=0;y<T.slots.length;y++){var A=T.slots[y],f=this.bones[A.boneData.index],S=new Y.Slot(A,f);this.slots.push(S),this.drawOrder.push(S);}this.ikConstraints=new Array;for(var y=0;y<T.ikConstraints.length;y++){var O=T.ikConstraints[y];this.ikConstraints.push(new Y.IkConstraint(O,this));}this.transformConstraints=new Array;for(var y=0;y<T.transformConstraints.length;y++){var I=T.transformConstraints[y];this.transformConstraints.push(new Y.TransformConstraint(I,this));}this.pathConstraints=new Array;for(var y=0;y<T.pathConstraints.length;y++){var U=T.pathConstraints[y];this.pathConstraints.push(new Y.PathConstraint(U,this));}this.color=new Y.Color(1,1,1,1),this.updateCache();}return o.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var y=this.bones,a=0,f=y.length;a<f;a++){var u;(u=y[a]).sorted=u.data.skinRequired,u.active=!u.sorted;}if(this.skin!=null)for(var A=this.skin.bones,a=0,f=this.skin.bones.length;a<f;a++){var u=this.bones[A[a].index];do u.sorted=false,u.active=true,u=u.parent;while(u!=null)}var S=this.ikConstraints,O=this.transformConstraints,I=this.pathConstraints,U=S.length,L=O.length,R=I.length,D=U+L+R;t:for(var a=0;a<D;a++){for(var q=0;q<U;q++){var $;if(($=S[q]).data.order==a){this.sortIkConstraint($);continue t}}for(var q=0;q<L;q++){var $;if(($=O[q]).data.order==a){this.sortTransformConstraint($);continue t}}for(var q=0;q<R;q++){var $;if(($=I[q]).data.order==a){this.sortPathConstraint($);continue t}}}for(var a=0,f=y.length;a<f;a++)this.sortBone(y[a]);},o.prototype.sortIkConstraint=function(T){if(T.active=T.target.isActive()&&(!T.data.skinRequired||this.skin!=null&&Y.Utils.contains(this.skin.constraints,T.data,true)),T.active){var y=T.target;this.sortBone(y);var a=T.bones,f=a[0];if(this.sortBone(f),a.length>1){var u=a[a.length-1];this._updateCache.indexOf(u)>-1||this.updateCacheReset.push(u);}this._updateCache.push(T),this.sortReset(f.children),a[a.length-1].sorted=true;}},o.prototype.sortPathConstraint=function(T){if(T.active=T.target.bone.isActive()&&(!T.data.skinRequired||this.skin!=null&&Y.Utils.contains(this.skin.constraints,T.data,true)),T.active){var y=T.target,a=y.data.index,f=y.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,a,f),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,a,f);for(var u=0,A=this.data.skins.length;u<A;u++)this.sortPathConstraintAttachment(this.data.skins[u],a,f);var S=y.getAttachment();S instanceof Y.PathAttachment&&this.sortPathConstraintAttachmentWith(S,f);for(var O=T.bones,I=O.length,u=0;u<I;u++)this.sortBone(O[u]);this._updateCache.push(T);for(var u=0;u<I;u++)this.sortReset(O[u].children);for(var u=0;u<I;u++)O[u].sorted=true;}},o.prototype.sortTransformConstraint=function(T){if(T.active=T.target.isActive()&&(!T.data.skinRequired||this.skin!=null&&Y.Utils.contains(this.skin.constraints,T.data,true)),T.active){this.sortBone(T.target);var y=T.bones,a=y.length;if(T.data.local)for(var f=0;f<a;f++){var u=y[f];this.sortBone(u.parent),this._updateCache.indexOf(u)>-1||this.updateCacheReset.push(u);}else for(var f=0;f<a;f++)this.sortBone(y[f]);this._updateCache.push(T);for(var A=0;A<a;A++)this.sortReset(y[A].children);for(var A=0;A<a;A++)y[A].sorted=true;}},o.prototype.sortPathConstraintAttachment=function(T,y,a){var f=T.attachments[y];if(f)for(var u in f)this.sortPathConstraintAttachmentWith(f[u],a);},o.prototype.sortPathConstraintAttachmentWith=function(T,y){if(T instanceof Y.PathAttachment){var a=T.bones;if(a==null)this.sortBone(y);else for(var f=this.bones,u=0;u<a.length;)for(var A=a[u++],S=u+A;u<S;u++){var O=a[u];this.sortBone(f[O]);}}},o.prototype.sortBone=function(T){if(!T.sorted){var y=T.parent;y!=null&&this.sortBone(y),T.sorted=true,this._updateCache.push(T);}},o.prototype.sortReset=function(T){for(var y=0,a=T.length;y<a;y++){var f=T[y];f.active&&(f.sorted&&this.sortReset(f.children),f.sorted=false);}},o.prototype.updateWorldTransform=function(){for(var T=this.updateCacheReset,y=0,a=T.length;y<a;y++){var f=T[y];f.ax=f.x,f.ay=f.y,f.arotation=f.rotation,f.ascaleX=f.scaleX,f.ascaleY=f.scaleY,f.ashearX=f.shearX,f.ashearY=f.shearY,f.appliedValid=true;}for(var u=this._updateCache,y=0,a=u.length;y<a;y++)u[y].update();},o.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose();},o.prototype.setBonesToSetupPose=function(){for(var T=this.bones,y=0,a=T.length;y<a;y++)T[y].setToSetupPose();for(var f=this.ikConstraints,y=0,a=f.length;y<a;y++){var u;(u=f[y]).mix=u.data.mix,u.softness=u.data.softness,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch;}for(var A=this.transformConstraints,y=0,a=A.length;y<a;y++){var u,S=(u=A[y]).data;u.rotateMix=S.rotateMix,u.translateMix=S.translateMix,u.scaleMix=S.scaleMix,u.shearMix=S.shearMix;}for(var O=this.pathConstraints,y=0,a=O.length;y<a;y++){var u,S=(u=O[y]).data;u.position=S.position,u.spacing=S.spacing,u.rotateMix=S.rotateMix,u.translateMix=S.translateMix;}},o.prototype.setSlotsToSetupPose=function(){var T=this.slots;Y.Utils.arrayCopy(T,0,this.drawOrder,0,T.length);for(var y=0,a=T.length;y<a;y++)T[y].setToSetupPose();},o.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},o.prototype.findBone=function(T){if(T==null)throw new Error("boneName cannot be null.");for(var y=this.bones,a=0,f=y.length;a<f;a++){var u=y[a];if(u.data.name==T)return u}return null},o.prototype.findBoneIndex=function(T){if(T==null)throw new Error("boneName cannot be null.");for(var y=this.bones,a=0,f=y.length;a<f;a++)if(y[a].data.name==T)return a;return  -1},o.prototype.findSlot=function(T){if(T==null)throw new Error("slotName cannot be null.");for(var y=this.slots,a=0,f=y.length;a<f;a++){var u=y[a];if(u.data.name==T)return u}return null},o.prototype.findSlotIndex=function(T){if(T==null)throw new Error("slotName cannot be null.");for(var y=this.slots,a=0,f=y.length;a<f;a++)if(y[a].data.name==T)return a;return  -1},o.prototype.setSkinByName=function(T){var y=this.data.findSkin(T);if(y==null)throw new Error("Skin not found: "+T);this.setSkin(y);},o.prototype.setSkin=function(T){if(T!=this.skin){if(T!=null)if(this.skin!=null)T.attachAll(this,this.skin);else for(var y=this.slots,a=0,f=y.length;a<f;a++){var u=y[a],A=u.data.attachmentName;if(A!=null){var S=T.getAttachment(a,A);S!=null&&u.setAttachment(S);}}this.skin=T,this.updateCache();}},o.prototype.getAttachmentByName=function(T,y){return this.getAttachment(this.data.findSlotIndex(T),y)},o.prototype.getAttachment=function(T,y){if(y==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var a=this.skin.getAttachment(T,y);if(a!=null)return a}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(T,y):null},o.prototype.setAttachment=function(T,y){if(T==null)throw new Error("slotName cannot be null.");for(var a=this.slots,f=0,u=a.length;f<u;f++){var A=a[f];if(A.data.name==T){var S=null;if(y!=null&&(S=this.getAttachment(f,y))==null)throw new Error("Attachment not found: "+y+", for slot: "+T);return void A.setAttachment(S)}}throw new Error("Slot not found: "+T)},o.prototype.findIkConstraint=function(T){if(T==null)throw new Error("constraintName cannot be null.");for(var y=this.ikConstraints,a=0,f=y.length;a<f;a++){var u=y[a];if(u.data.name==T)return u}return null},o.prototype.findTransformConstraint=function(T){if(T==null)throw new Error("constraintName cannot be null.");for(var y=this.transformConstraints,a=0,f=y.length;a<f;a++){var u=y[a];if(u.data.name==T)return u}return null},o.prototype.findPathConstraint=function(T){if(T==null)throw new Error("constraintName cannot be null.");for(var y=this.pathConstraints,a=0,f=y.length;a<f;a++){var u=y[a];if(u.data.name==T)return u}return null},o.prototype.getBounds=function(T,y,a){if(a===void 0&&(a=new Array(2)),T==null)throw new Error("offset cannot be null.");if(y==null)throw new Error("size cannot be null.");for(var f=this.drawOrder,u=Number.POSITIVE_INFINITY,A=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY,I=0,U=f.length;I<U;I++){var L=f[I];if(L.bone.active){var R=0,D=null,q=L.getAttachment();if(q instanceof Y.RegionAttachment)R=8,D=Y.Utils.setArraySize(a,R,0),q.computeWorldVertices(L.bone,D,0,2);else if(q instanceof Y.MeshAttachment){var $=q;R=$.worldVerticesLength,D=Y.Utils.setArraySize(a,R,0),$.computeWorldVertices(L,0,R,D,0,2);}if(D!=null)for(var it=0,vt=D.length;it<vt;it+=2){var ct=D[it],ut=D[it+1];u=Math.min(u,ct),A=Math.min(A,ut),S=Math.max(S,ct),O=Math.max(O,ut);}}}T.set(u,A),y.set(S-u,O-A);},o.prototype.update=function(T){this.time+=T;},o})();Y.Skeleton=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function a(f){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=f;}return a.prototype.readSkeletonData=function(f){var u=this.scale,A=new A;skeletonData.name="";var S=new o(f);skeletonData.hash=S.readString(),skeletonData.version=S.readString(),skeletonData.x=S.readFloat(),skeletonData.y=S.readFloat(),skeletonData.width=S.readFloat(),skeletonData.height=S.readFloat();var O=S.readBoolean();O&&(skeletonData.fps=S.readFloat(),skeletonData.imagesPath=S.readString(),skeletonData.audioPath=S.readString());var I=0;I=S.readInt(true);for(var ut=0;ut<I;ut++)S.strings.push(S.readString());I=S.readInt(true);for(var ut=0;ut<I;ut++){var U=S.readString(),L=ut==0?null:A.bones[S.readInt(true)],R;(R=new Y.BoneData(ut,U,L)).rotation=S.readFloat(),R.x=S.readFloat()*u,R.y=S.readFloat()*u,R.scaleX=S.readFloat(),R.scaleY=S.readFloat(),R.shearX=S.readFloat(),R.shearY=S.readFloat(),R.length=S.readFloat()*u,R.transformMode=a.TransformModeValues[S.readInt(true)],R.skinRequired=S.readBoolean(),O&&Y.Color.rgba8888ToColor(R.color,S.readInt32()),skeletonData.bones.push(R);}I=S.readInt(true);for(var ut=0;ut<I;ut++){var D=S.readString(),q=A.bones[S.readInt(true)],R=new Y.SlotData(ut,D,q);Y.Color.rgba8888ToColor(R.color,S.readInt32());var $=S.readInt32();$!=-1&&Y.Color.rgb888ToColor(R.darkColor=new Y.Color,$),R.attachmentName=S.readStringRef(),R.blendMode=a.BlendModeValues[S.readInt(true)],skeletonData.slots.push(R);}I=S.readInt(true);for(var ut=0,it=void 0;ut<I;ut++){var R;(R=new Y.IkConstraintData(S.readString())).order=S.readInt(true),R.skinRequired=S.readBoolean(),it=S.readInt(true);for(var vt=0;vt<it;vt++)R.bones.push(skeletonData.bones[S.readInt(true)]);R.target=A.bones[S.readInt(true)],R.mix=S.readFloat(),R.softness=S.readFloat()*u,R.bendDirection=S.readByte(),R.compress=S.readBoolean(),R.stretch=S.readBoolean(),R.uniform=S.readBoolean(),skeletonData.ikConstraints.push(R);}I=S.readInt(true);for(var ut=0,it=void 0;ut<I;ut++){var R;(R=new Y.TransformConstraintData(S.readString())).order=S.readInt(true),R.skinRequired=S.readBoolean(),it=S.readInt(true);for(var vt=0;vt<it;vt++)R.bones.push(skeletonData.bones[S.readInt(true)]);R.target=A.bones[S.readInt(true)],R.local=S.readBoolean(),R.relative=S.readBoolean(),R.offsetRotation=S.readFloat(),R.offsetX=S.readFloat()*u,R.offsetY=S.readFloat()*u,R.offsetScaleX=S.readFloat(),R.offsetScaleY=S.readFloat(),R.offsetShearY=S.readFloat(),R.rotateMix=S.readFloat(),R.translateMix=S.readFloat(),R.scaleMix=S.readFloat(),R.shearMix=S.readFloat(),skeletonData.transformConstraints.push(R);}I=S.readInt(true);for(var ut=0,it=void 0;ut<I;ut++){var R;(R=new Y.PathConstraintData(S.readString())).order=S.readInt(true),R.skinRequired=S.readBoolean(),it=S.readInt(true);for(var vt=0;vt<it;vt++)R.bones.push(skeletonData.bones[S.readInt(true)]);R.target=A.slots[S.readInt(true)],R.positionMode=a.PositionModeValues[S.readInt(true)],R.spacingMode=a.SpacingModeValues[S.readInt(true)],R.rotateMode=a.RotateModeValues[S.readInt(true)],R.offsetRotation=S.readFloat(),R.position=S.readFloat(),R.positionMode==Y.PositionMode.Fixed&&(R.position*=u),R.spacing=S.readFloat(),R.spacingMode!=Y.SpacingMode.Length&&R.spacingMode!=Y.SpacingMode.Fixed||(R.spacing*=u),R.rotateMix=S.readFloat(),R.translateMix=S.readFloat(),skeletonData.pathConstraints.push(R);}var ct=this.readSkin(S,A,true,O);ct!=null&&(skeletonData.defaultSkin=ct,skeletonData.skins.push(ct));var ut=A.skins.length;for(Y.Utils.setArraySize(skeletonData.skins,I=ut+S.readInt(true));ut<I;ut++)skeletonData.skins[ut]=this.readSkin(S,A,false,O);I=this.linkedMeshes.length;for(var ut=0;ut<I;ut++){var st=this.linkedMeshes[ut],G=st.skin==null?A.defaultSkin:A.findSkin(st.skin);if(G==null)throw new Error("Skin not found: "+st.skin);var et=G.getAttachment(st.slotIndex,st.parent);if(et==null)throw new Error("Parent mesh not found: "+st.parent);st.mesh.deformAttachment=st.inheritDeform?et:st.mesh,st.mesh.setParentMesh(et),st.mesh.updateUVs();}this.linkedMeshes.length=0,I=S.readInt(true);for(var ut=0;ut<I;ut++){var R;(R=new Y.EventData(S.readStringRef())).intValue=S.readInt(false),R.floatValue=S.readFloat(),R.stringValue=S.readString(),R.audioPath=S.readString(),R.audioPath!=null&&(R.volume=S.readFloat(),R.balance=S.readFloat()),skeletonData.events.push(R);}I=S.readInt(true);for(var ut=0;ut<I;ut++)skeletonData.animations.push(this.readAnimation(S,S.readString(),A));return A},a.prototype.readSkin=function(f,u,A,S){var O=null,I=0;if(A){if((I=f.readInt(true))==0)return null;O=new Y.Skin("default");}else {(O=new Y.Skin(f.readStringRef())).bones.length=f.readInt(true);for(var U=0,L=O.bones.length;U<L;U++)O.bones[U]=u.bones[f.readInt(true)];for(var U=0,L=f.readInt(true);U<L;U++)O.constraints.push(skeletonData.ikConstraints[f.readInt(true)]);for(var U=0,L=f.readInt(true);U<L;U++)O.constraints.push(skeletonData.transformConstraints[f.readInt(true)]);for(var U=0,L=f.readInt(true);U<L;U++)O.constraints.push(skeletonData.pathConstraints[f.readInt(true)]);I=f.readInt(true);}for(var U=0;U<I;U++)for(var R=f.readInt(true),D=0,q=f.readInt(true);D<q;D++){var $=f.readStringRef(),it=this.readAttachment(f,u,O,R,$,S);it!=null&&O.setAttachment(R,$,it);}return O},a.prototype.readAttachment=function(f,u,A,S,O,I){var U=this.scale,L=f.readStringRef();L==null&&(L=O);var R=f.readByte();switch(a.AttachmentTypeValues[R]){case Y.AttachmentType.Region:var yt=f.readStringRef(),Bt=f.readFloat(),Dt=f.readFloat(),Lt=f.readFloat(),q=f.readFloat(),$=f.readFloat(),It=f.readFloat(),ht=f.readFloat(),At=f.readInt32();yt==null&&(yt=L);var it=this.attachmentLoader.newRegionAttachment(A,L,yt);return it==null?null:(it.path=yt,it.x=Dt*U,it.y=Lt*U,it.scaleX=q,it.scaleY=$,it.rotation=Bt,it.width=It*U,it.height=ht*U,Y.Color.rgba8888ToColor(it.color,At),it.updateOffset(),it);case Y.AttachmentType.BoundingBox:var Ft=f.readInt(true),Tt=this.readVertices(f,Ft),At=I?f.readInt32():0,vt=this.attachmentLoader.newBoundingBoxAttachment(A,L);return vt==null?null:(vt.worldVerticesLength=Ft<<1,vt.vertices=Tt.vertices,vt.bones=Tt.bones,I&&Y.Color.rgba8888ToColor(vt.color,At),vt);case Y.AttachmentType.Mesh:var yt=f.readStringRef(),At=f.readInt32(),Ft=f.readInt(true),ct=this.readFloatArray(f,Ft<<1,1),ut=this.readShortArray(f),Tt=this.readVertices(f,Ft),st=f.readInt(true),G=null,It=0,ht=0,ft;return I&&(G=this.readShortArray(f),It=f.readFloat(),ht=f.readFloat()),yt==null&&(yt=L),(ft=this.attachmentLoader.newMeshAttachment(A,L,yt))==null?null:(ft.path=yt,Y.Color.rgba8888ToColor(ft.color,At),ft.bones=Tt.bones,ft.vertices=Tt.vertices,ft.worldVerticesLength=Ft<<1,ft.triangles=ut,ft.regionUVs=ct,ft.updateUVs(),ft.hullLength=st<<1,I&&(ft.edges=G,ft.width=It*U,ft.height=ht*U),ft);case Y.AttachmentType.LinkedMesh:var yt=f.readStringRef(),At=f.readInt32(),et=f.readStringRef(),dt=f.readStringRef(),rt=f.readBoolean(),It=0,ht=0,ft;return I&&(It=f.readFloat(),ht=f.readFloat()),yt==null&&(yt=L),(ft=this.attachmentLoader.newMeshAttachment(A,L,yt))==null?null:(ft.path=yt,Y.Color.rgba8888ToColor(ft.color,At),I&&(ft.width=It*U,ft.height=ht*U),this.linkedMeshes.push(new T(ft,et,S,dt,rt)),ft);case Y.AttachmentType.Path:for(var kt=f.readBoolean(),at=f.readBoolean(),Ft=f.readInt(true),Tt=this.readVertices(f,Ft),Q=Y.Utils.newArray(Ft/3,0),ot=0,Mt=Q.length;ot<Mt;ot++)Q[ot]=f.readFloat()*U;var At=I?f.readInt32():0,yt;return (yt=this.attachmentLoader.newPathAttachment(A,L))==null?null:(yt.closed=kt,yt.constantSpeed=at,yt.worldVerticesLength=Ft<<1,yt.vertices=Tt.vertices,yt.bones=Tt.bones,yt.lengths=Q,I&&Y.Color.rgba8888ToColor(yt.color,At),yt);case Y.AttachmentType.Point:var Bt=f.readFloat(),Dt=f.readFloat(),Lt=f.readFloat(),At=I?f.readInt32():0,Vt=this.attachmentLoader.newPointAttachment(A,L);return Vt==null?null:(Vt.x=Dt*U,Vt.y=Lt*U,Vt.rotation=Bt,I&&Y.Color.rgba8888ToColor(Vt.color,At),Vt);case Y.AttachmentType.Clipping:var Gt=f.readInt(true),Ft=f.readInt(true),Tt=this.readVertices(f,Ft),At=I?f.readInt32():0,_t=this.attachmentLoader.newClippingAttachment(A,L);return _t==null?null:(_t.endSlot=u.slots[Gt],_t.worldVerticesLength=Ft<<1,_t.vertices=Tt.vertices,_t.bones=Tt.bones,I&&Y.Color.rgba8888ToColor(_t.color,At),_t)}return null},a.prototype.readVertices=function(f,u){var A=u<<1,S=new y,O=this.scale;if(!f.readBoolean())return S.vertices=this.readFloatArray(f,A,O),S;for(var I=new Array,U=new Array,L=0;L<u;L++){var R=f.readInt(true);U.push(R);for(var D=0;D<R;D++)U.push(f.readInt(true)),I.push(f.readFloat()*O),I.push(f.readFloat()*O),I.push(f.readFloat());}return S.vertices=Y.Utils.toFloatArray(I),S.bones=U,S},a.prototype.readFloatArray=function(f,u,A){var S=new Array(u);if(A==1)for(var O=0;O<u;O++)S[O]=f.readFloat();else for(var O=0;O<u;O++)S[O]=f.readFloat()*A;return S},a.prototype.readShortArray=function(f){for(var u=f.readInt(true),A=new Array(u),S=0;S<u;S++)A[S]=f.readShort();return A},a.prototype.readAnimation=function(f,u,A){for(var S=new Array,O=this.scale,I=0,U=new Y.Color,L=new Y.Color,R=0,D=f.readInt(true);R<D;R++)for(var q=f.readInt(true),$=0,it=f.readInt(true);$<it;$++){var vt=f.readByte(),ct=f.readInt(true);switch(vt){case a.SLOT_ATTACHMENT:var G;(G=new Y.AttachmentTimeline(ct)).slotIndex=q;for(var ut=0;ut<ct;ut++)G.setFrame(ut,f.readFloat(),f.readStringRef());S.push(G),I=Math.max(I,G.frames[ct-1]);break;case a.SLOT_COLOR:var G;(G=new Y.ColorTimeline(ct)).slotIndex=q;for(var ut=0;ut<ct;ut++){var st=f.readFloat();Y.Color.rgba8888ToColor(U,f.readInt32()),G.setFrame(ut,st,U.r,U.g,U.b,U.a),ut<ct-1&&this.readCurve(f,ut,G);}S.push(G),I=Math.max(I,G.frames[(ct-1)*Y.ColorTimeline.ENTRIES]);break;case a.SLOT_TWO_COLOR:var G;(G=new Y.TwoColorTimeline(ct)).slotIndex=q;for(var ut=0;ut<ct;ut++){var st=f.readFloat();Y.Color.rgba8888ToColor(U,f.readInt32()),Y.Color.rgb888ToColor(L,f.readInt32()),G.setFrame(ut,st,U.r,U.g,U.b,U.a,L.r,L.g,L.b),ut<ct-1&&this.readCurve(f,ut,G);}S.push(G),I=Math.max(I,G.frames[(ct-1)*Y.TwoColorTimeline.ENTRIES]);}}for(var R=0,D=f.readInt(true);R<D;R++)for(var et=f.readInt(true),$=0,it=f.readInt(true);$<it;$++){var vt=f.readByte(),ct=f.readInt(true);switch(vt){case a.BONE_ROTATE:var G;(G=new Y.RotateTimeline(ct)).boneIndex=et;for(var ut=0;ut<ct;ut++)G.setFrame(ut,f.readFloat(),f.readFloat()),ut<ct-1&&this.readCurve(f,ut,G);S.push(G),I=Math.max(I,G.frames[(ct-1)*Y.RotateTimeline.ENTRIES]);break;case a.BONE_TRANSLATE:case a.BONE_SCALE:case a.BONE_SHEAR:var G=void 0,dt=1;vt==a.BONE_SCALE?G=new Y.ScaleTimeline(ct):vt==a.BONE_SHEAR?G=new Y.ShearTimeline(ct):(G=new Y.TranslateTimeline(ct),dt=O),G.boneIndex=et;for(var ut=0;ut<ct;ut++)G.setFrame(ut,f.readFloat(),f.readFloat()*dt,f.readFloat()*dt),ut<ct-1&&this.readCurve(f,ut,G);S.push(G),I=Math.max(I,G.frames[(ct-1)*Y.TranslateTimeline.ENTRIES]);}}for(var R=0,D=f.readInt(true);R<D;R++){var rt=f.readInt(true),ct=f.readInt(true),G;(G=new Y.IkConstraintTimeline(ct)).ikConstraintIndex=rt;for(var ut=0;ut<ct;ut++)G.setFrame(ut,f.readFloat(),f.readFloat(),f.readFloat()*O,f.readByte(),f.readBoolean(),f.readBoolean()),ut<ct-1&&this.readCurve(f,ut,G);S.push(G),I=Math.max(I,G.frames[(ct-1)*Y.IkConstraintTimeline.ENTRIES]);}for(var R=0,D=f.readInt(true);R<D;R++){var rt=f.readInt(true),ct=f.readInt(true),G;(G=new Y.TransformConstraintTimeline(ct)).transformConstraintIndex=rt;for(var ut=0;ut<ct;ut++)G.setFrame(ut,f.readFloat(),f.readFloat(),f.readFloat(),f.readFloat(),f.readFloat()),ut<ct-1&&this.readCurve(f,ut,G);S.push(G),I=Math.max(I,G.frames[(ct-1)*Y.TransformConstraintTimeline.ENTRIES]);}for(var R=0,D=f.readInt(true);R<D;R++)for(var rt=f.readInt(true),It=A.pathConstraints[rt],$=0,it=f.readInt(true);$<it;$++){var vt=f.readByte(),ct=f.readInt(true);switch(vt){case a.PATH_POSITION:case a.PATH_SPACING:var G=void 0,dt=1;vt==a.PATH_SPACING?(G=new Y.PathConstraintSpacingTimeline(ct),It.spacingMode!=Y.SpacingMode.Length&&It.spacingMode!=Y.SpacingMode.Fixed||(dt=O)):(G=new Y.PathConstraintPositionTimeline(ct),It.positionMode==Y.PositionMode.Fixed&&(dt=O)),G.pathConstraintIndex=rt;for(var ut=0;ut<ct;ut++)G.setFrame(ut,f.readFloat(),f.readFloat()*dt),ut<ct-1&&this.readCurve(f,ut,G);S.push(G),I=Math.max(I,G.frames[(ct-1)*Y.PathConstraintPositionTimeline.ENTRIES]);break;case a.PATH_MIX:var G;(G=new Y.PathConstraintMixTimeline(ct)).pathConstraintIndex=rt;for(var ut=0;ut<ct;ut++)G.setFrame(ut,f.readFloat(),f.readFloat(),f.readFloat()),ut<ct-1&&this.readCurve(f,ut,G);S.push(G),I=Math.max(I,G.frames[(ct-1)*Y.PathConstraintMixTimeline.ENTRIES]);}}for(var R=0,D=f.readInt(true);R<D;R++)for(var ht=A.skins[f.readInt(true)],$=0,it=f.readInt(true);$<it;$++)for(var q=f.readInt(true),ft=0,kt=f.readInt(true);ft<kt;ft++){var at=ht.getAttachment(q,f.readStringRef()),Q=at.bones!=null,ot=at.vertices,Mt=Q?ot.length/3*2:ot.length,ct=f.readInt(true),G;(G=new Y.DeformTimeline(ct)).slotIndex=q,G.attachment=at;for(var ut=0;ut<ct;ut++){var st=f.readFloat(),yt=void 0,Bt=f.readInt(true);if(Bt==0)yt=Q?Y.Utils.newFloatArray(Mt):ot;else {yt=Y.Utils.newFloatArray(Mt);var Dt=f.readInt(true);if(Bt+=Dt,O==1)for(var Lt=Dt;Lt<Bt;Lt++)yt[Lt]=f.readFloat();else for(var Lt=Dt;Lt<Bt;Lt++)yt[Lt]=f.readFloat()*O;if(!Q)for(var Lt=0,Vt=yt.length;Lt<Vt;Lt++)yt[Lt]+=ot[Lt];}G.setFrame(ut,st,yt),ut<ct-1&&this.readCurve(f,ut,G);}S.push(G),I=Math.max(I,G.frames[ct-1]);}var Gt=f.readInt(true);if(Gt>0){for(var G=new Y.DrawOrderTimeline(Gt),Ft=A.slots.length,R=0;R<Gt;R++){for(var st=f.readFloat(),Tt=f.readInt(true),At=Y.Utils.newArray(Ft,0),$=Ft-1;$>=0;$--)At[$]=-1;for(var _t=Y.Utils.newArray(Ft-Tt,0),ie=0,Kt=0,$=0;$<Tt;$++){for(var q=f.readInt(true);ie!=q;)_t[Kt++]=ie++;At[ie+f.readInt(true)]=ie++;}for(;ie<Ft;)_t[Kt++]=ie++;for(var $=Ft-1;$>=0;$--)At[$]==-1&&(At[$]=_t[--Kt]);G.setFrame(R,st,At);}S.push(G),I=Math.max(I,G.frames[Gt-1]);}var Ae=f.readInt(true);if(Ae>0){for(var G=new Y.EventTimeline(Ae),R=0;R<Ae;R++){var st=f.readFloat(),Le=A.events[f.readInt(true)],ye=new Y.Event(st,Le);ye.intValue=f.readInt(false),ye.floatValue=f.readFloat(),ye.stringValue=f.readBoolean()?f.readString():Le.stringValue,ye.data.audioPath!=null&&(ye.volume=f.readFloat(),ye.balance=f.readFloat()),G.setFrame(R,ye);}S.push(G),I=Math.max(I,G.frames[Ae-1]);}return new Y.Animation(u,S,I)},a.prototype.readCurve=function(f,u,A){switch(f.readByte()){case a.CURVE_STEPPED:A.setStepped(u);break;case a.CURVE_BEZIER:this.setCurve(A,u,f.readFloat(),f.readFloat(),f.readFloat(),f.readFloat());}},a.prototype.setCurve=function(f,u,A,S,O,I){f.setCurve(u,A,S,O,I);},a.AttachmentTypeValues=[0,1,2,3,4,5,6],a.TransformModeValues=[Y.TransformMode.Normal,Y.TransformMode.OnlyTranslation,Y.TransformMode.NoRotationOrReflection,Y.TransformMode.NoScale,Y.TransformMode.NoScaleOrReflection],a.PositionModeValues=[Y.PositionMode.Fixed,Y.PositionMode.Percent],a.SpacingModeValues=[Y.SpacingMode.Length,Y.SpacingMode.Fixed,Y.SpacingMode.Percent],a.RotateModeValues=[Y.RotateMode.Tangent,Y.RotateMode.Chain,Y.RotateMode.ChainScale],a.BlendModeValues=[Y.BlendMode.Normal,Y.BlendMode.Additive,Y.BlendMode.Multiply,Y.BlendMode.Screen],a.BONE_ROTATE=0,a.BONE_TRANSLATE=1,a.BONE_SCALE=2,a.BONE_SHEAR=3,a.SLOT_ATTACHMENT=0,a.SLOT_COLOR=1,a.SLOT_TWO_COLOR=2,a.PATH_POSITION=0,a.PATH_SPACING=1,a.PATH_MIX=2,a.CURVE_LINEAR=0,a.CURVE_STEPPED=1,a.CURVE_BEZIER=2,a})();Y.SkeletonBinary=lt;var o=(function(){function a(f,u,A,S){u===void 0&&(u=new Array),A===void 0&&(A=0),S===void 0&&(S=new DataView(f.buffer)),this.strings=u,this.index=A,this.buffer=S;}return a.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},a.prototype.readShort=function(){var f=this.buffer.getInt16(this.index);return this.index+=2,f},a.prototype.readInt32=function(){var f=this.buffer.getInt32(this.index);return this.index+=4,f},a.prototype.readInt=function(f){var u=this.readByte(),A=127&u;return (128&u)!=0&&(A|=(127&(u=this.readByte()))<<7,(128&u)!=0&&(A|=(127&(u=this.readByte()))<<14,(128&u)!=0&&(A|=(127&(u=this.readByte()))<<21,(128&u)!=0&&(A|=(127&(u=this.readByte()))<<28)))),f?A:A>>>1^-(1&A)},a.prototype.readStringRef=function(){var f=this.readInt(true);return f==0?null:this.strings[f-1]},a.prototype.readString=function(){var f=this.readInt(true);switch(f){case 0:return null;case 1:return ""}f--;for(var u="",A=0,S=0;S<f;){var O=this.readByte();switch(O>>4){case 12:case 13:u+=String.fromCharCode((31&O)<<6|63&this.readByte()),S+=2;break;case 14:u+=String.fromCharCode((15&O)<<12|(63&this.readByte())<<6|63&this.readByte()),S+=3;break;default:u+=String.fromCharCode(O),S++;}}return u},a.prototype.readFloat=function(){var f=this.buffer.getFloat32(this.index);return this.index+=4,f},a.prototype.readBoolean=function(){return this.readByte()!=0},a})(),T=(function(){function a(f,u,A,S,O){this.mesh=f,this.skin=u,this.slotIndex=A,this.parent=S,this.inheritDeform=O;}return a})(),y=(function(){function a(f,u){f===void 0&&(f=null),u===void 0&&(u=null),this.bones=f,this.vertices=u;}return a})();})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new Y.Pool((function(){return Y.Utils.newFloatArray(16)}));}return o.prototype.update=function(T,y){if(T==null)throw new Error("skeleton cannot be null.");var a=this.boundingBoxes,f=this.polygons,u=this.polygonPool,A=Skeleton.slots,S=A.length;a.length=0,u.freeAll(f),f.length=0;for(var O=0;O<S;O++){var I=A[O];if(I.bone.active){var U=I.getAttachment();if(U instanceof Y.BoundingBoxAttachment){var L=U;a.push(L);var R=u.obtain();R.length!=L.worldVerticesLength&&(R=Y.Utils.newFloatArray(L.worldVerticesLength)),f.push(R),L.computeWorldVertices(I,0,L.worldVerticesLength,R,0,2);}}}y?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY);},o.prototype.aabbCompute=function(){for(var T=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,u=this.polygons,A=0,S=u.length;A<S;A++)for(var O=u[A],I=O,U=0,L=O.length;U<L;U+=2){var R=I[U],D=I[U+1];T=Math.min(T,R),y=Math.min(y,D),a=Math.max(a,R),f=Math.max(f,D);}this.minX=T,this.minY=y,this.maxX=a,this.maxY=f;},o.prototype.aabbContainsPoint=function(T,y){return T>=this.minX&&T<=this.maxX&&y>=this.minY&&y<=this.maxY},o.prototype.aabbIntersectsSegment=function(T,y,a,f){var u=this.minX,A=this.minY,S=this.maxX,O=this.maxY;if(T<=u&&a<=u||y<=A&&f<=A||T>=S&&a>=S||y>=O&&f>=O)return  false;var I=(f-y)/(a-T),U=I*(u-T)+y;if(U>A&&U<O||(U=I*(S-T)+y)>A&&U<O)return  true;var L=(A-y)/I+T;return L>u&&L<S||(L=(O-y)/I+T)>u&&L<S},o.prototype.aabbIntersectsSkeleton=function(T){return this.minX<T.maxX&&this.maxX>T.minX&&this.minY<T.maxY&&this.maxY>T.minY},o.prototype.containsPoint=function(T,y){for(var a=this.polygons,f=0,u=a.length;f<u;f++)if(this.containsPointPolygon(a[f],T,y))return this.boundingBoxes[f];return null},o.prototype.containsPointPolygon=function(T,y,a){for(var f=T,u=T.length,A=u-2,S=false,O=0;O<u;O+=2){var I=f[O+1],U=f[A+1];if(I<a&&U>=a||U<a&&I>=a){var L=f[O];L+(a-I)/(U-I)*(f[A]-L)<y&&(S=!S);}A=O;}return S},o.prototype.intersectsSegment=function(T,y,a,f){for(var u=this.polygons,A=0,S=u.length;A<S;A++)if(this.intersectsSegmentPolygon(u[A],T,y,a,f))return this.boundingBoxes[A];return null},o.prototype.intersectsSegmentPolygon=function(T,y,a,f,u){for(var A=T,S=T.length,O=y-f,I=a-u,U=y*u-a*f,L=A[S-2],R=A[S-1],D=0;D<S;D+=2){var q=A[D],$=A[D+1],it=L*$-R*q,vt=L-q,ct=R-$,ut=O*ct-I*vt,st=(U*vt-O*it)/ut;if((st>=L&&st<=q||st>=q&&st<=L)&&(st>=y&&st<=f||st>=f&&st<=y)){var G=(U*ct-I*it)/ut;if((G>=R&&G<=$||G>=$&&G<=R)&&(G>=a&&G<=u||G>=u&&G<=a))return  true}L=q,R=$;}return  false},o.prototype.getPolygon=function(T){if(T==null)throw new Error("boundingBox cannot be null.");var y=this.boundingBoxes.indexOf(T);return y==-1?null:this.polygons[y]},o.prototype.getWidth=function(){return this.maxX-this.minX},o.prototype.getHeight=function(){return this.maxY-this.minY},o})();Y.SkeletonBounds=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(){this.triangulator=new Y.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array;}return o.prototype.clipStart=function(T,y){if(this.clipAttachment!=null)return 0;this.clipAttachment=y;var a=y.worldVerticesLength,f=Y.Utils.setArraySize(this.clippingPolygon,a);y.computeWorldVertices(T,0,a,f,0,2);var u=this.clippingPolygon;o.makeClockwise(u);for(var A=this.clippingPolygons=this.triangulator.decompose(u,this.triangulator.triangulate(u)),S=0,O=A.length;S<O;S++){var I=A[S];o.makeClockwise(I),I.push(I[0]),I.push(I[1]);}return A.length},o.prototype.clipEndWithSlot=function(T){this.clipAttachment!=null&&this.clipAttachment.endSlot==T.data&&this.clipEnd();},o.prototype.clipEnd=function(){this.clipAttachment!=null&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0);},o.prototype.isClipping=function(){return this.clipAttachment!=null},o.prototype.clipTriangles=function(T,y,a,f,u,A,S,O){var I=this.clipOutput,U=this.clippedVertices,L=this.clippedTriangles,R=this.clippingPolygons,D=this.clippingPolygons.length,q=O?12:8,$=0;U.length=0,L.length=0;t:for(var it=0;it<f;it+=3)for(var vt=a[it]<<1,ct=T[vt],ut=T[vt+1],st=u[vt],G=u[vt+1],et=T[vt=a[it+1]<<1],dt=T[vt+1],rt=u[vt],It=u[vt+1],ht=T[vt=a[it+2]<<1],ft=T[vt+1],kt=u[vt],at=u[vt+1],Q=0;Q<D;Q++){var ot=U.length;if(!this.clip(ct,ut,et,dt,ht,ft,R[Q],I)){var Mt,yt;(Mt=Y.Utils.setArraySize(U,ot+3*q))[ot]=ct,Mt[ot+1]=ut,Mt[ot+2]=A.r,Mt[ot+3]=A.g,Mt[ot+4]=A.b,Mt[ot+5]=A.a,O?(Mt[ot+6]=st,Mt[ot+7]=G,Mt[ot+8]=S.r,Mt[ot+9]=S.g,Mt[ot+10]=S.b,Mt[ot+11]=S.a,Mt[ot+12]=et,Mt[ot+13]=dt,Mt[ot+14]=A.r,Mt[ot+15]=A.g,Mt[ot+16]=A.b,Mt[ot+17]=A.a,Mt[ot+18]=rt,Mt[ot+19]=It,Mt[ot+20]=S.r,Mt[ot+21]=S.g,Mt[ot+22]=S.b,Mt[ot+23]=S.a,Mt[ot+24]=ht,Mt[ot+25]=ft,Mt[ot+26]=A.r,Mt[ot+27]=A.g,Mt[ot+28]=A.b,Mt[ot+29]=A.a,Mt[ot+30]=kt,Mt[ot+31]=at,Mt[ot+32]=S.r,Mt[ot+33]=S.g,Mt[ot+34]=S.b,Mt[ot+35]=S.a):(Mt[ot+6]=st,Mt[ot+7]=G,Mt[ot+8]=et,Mt[ot+9]=dt,Mt[ot+10]=A.r,Mt[ot+11]=A.g,Mt[ot+12]=A.b,Mt[ot+13]=A.a,Mt[ot+14]=rt,Mt[ot+15]=It,Mt[ot+16]=ht,Mt[ot+17]=ft,Mt[ot+18]=A.r,Mt[ot+19]=A.g,Mt[ot+20]=A.b,Mt[ot+21]=A.a,Mt[ot+22]=kt,Mt[ot+23]=at),ot=L.length,(yt=Y.Utils.setArraySize(L,ot+3))[ot]=$,yt[ot+1]=$+1,yt[ot+2]=$+2,$+=3;continue t}var Bt=I.length;if(Bt!=0){for(var Dt=dt-ft,Lt=ht-et,Vt=ct-ht,Gt=ft-ut,Ft=1/(Dt*Vt+Lt*(ut-ft)),Tt=Bt>>1,At=this.clipOutput,Mt=Y.Utils.setArraySize(U,ot+Tt*q),_t=0;_t<Bt;_t+=2){var ie=At[_t],Kt=At[_t+1];Mt[ot]=ie,Mt[ot+1]=Kt,Mt[ot+2]=A.r,Mt[ot+3]=A.g,Mt[ot+4]=A.b,Mt[ot+5]=A.a;var Ae=ie-ht,Le=Kt-ft,ye=(Dt*Ae+Lt*Le)*Ft,Ye=(Gt*Ae+Vt*Le)*Ft,Xe=1-ye-Ye;Mt[ot+6]=st*ye+rt*Ye+kt*Xe,Mt[ot+7]=G*ye+It*Ye+at*Xe,O&&(Mt[ot+8]=S.r,Mt[ot+9]=S.g,Mt[ot+10]=S.b,Mt[ot+11]=S.a),ot+=q;}ot=L.length;var yt=Y.Utils.setArraySize(L,ot+3*(Tt-2));Tt--;for(var _t=1;_t<Tt;_t++)yt[ot]=$,yt[ot+1]=$+_t,yt[ot+2]=$+_t+1,ot+=3;$+=Tt+1;}}},o.prototype.clip=function(T,y,a,f,u,A,S,O){var I=O,U=false,L=null;S.length%4>=2?(L=O,O=this.scratch):L=this.scratch,L.length=0,L.push(T),L.push(y),L.push(a),L.push(f),L.push(u),L.push(A),L.push(T),L.push(y),O.length=0;for(var R=S,D=S.length-4,q=0;;q+=2){for(var $=R[q],it=R[q+1],vt=R[q+2],ct=R[q+3],ut=$-vt,st=it-ct,G=L,et=L.length-2,dt=O.length,rt=0;rt<et;rt+=2){var It=G[rt],ht=G[rt+1],ft=G[rt+2],kt=G[rt+3],at=ut*(kt-ct)-st*(ft-vt)>0;if(ut*(ht-ct)-st*(It-vt)>0){if(at){O.push(ft),O.push(kt);continue}var Q,ot,Mt=(Q=kt-ht)*(vt-$)-(ot=ft-It)*(ct-it);if(Math.abs(Mt)>1e-6){var yt=(ot*(it-ht)-Q*($-It))/Mt;O.push($+(vt-$)*yt),O.push(it+(ct-it)*yt);}else O.push($),O.push(it);}else if(at){var Q,ot,Mt=(Q=kt-ht)*(vt-$)-(ot=ft-It)*(ct-it);if(Math.abs(Mt)>1e-6){var yt=(ot*(it-ht)-Q*($-It))/Mt;O.push($+(vt-$)*yt),O.push(it+(ct-it)*yt);}else O.push($),O.push(it);O.push(ft),O.push(kt);}U=true;}if(dt==O.length)return I.length=0,true;if(O.push(O[0]),O.push(O[1]),q==D)break;var Bt=O;(O=L).length=0,L=Bt;}if(I!=O){I.length=0;for(var q=0,Dt=O.length-2;q<Dt;q++)I[q]=O[q];}else I.length=I.length-2;return U},o.makeClockwise=function(T){for(var y=T,a=T.length,f=y[a-2]*y[1]-y[0]*y[a-1],u=0,A=0,S=0,O=0,I=0,U=a-3;I<U;I+=2)u=y[I],A=y[I+1],S=y[I+2],f+=u*(O=y[I+3])-S*A;if(!(f<0))for(var I=0,L=a-2,U=a>>1;I<U;I+=2){var R=y[I],D=y[I+1],q=L-I;y[I]=y[q],y[I+1]=y[q+1],y[q]=R,y[q+1]=D;}},o})();Y.SkeletonClipping=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0;}return o.prototype.findBone=function(T){if(T==null)throw new Error("boneName cannot be null.");for(var y=this.bones,a=0,f=y.length;a<f;a++){var u=y[a];if(u.name==T)return u}return null},o.prototype.findBoneIndex=function(T){if(T==null)throw new Error("boneName cannot be null.");for(var y=this.bones,a=0,f=y.length;a<f;a++)if(y[a].name==T)return a;return  -1},o.prototype.findSlot=function(T){if(T==null)throw new Error("slotName cannot be null.");for(var y=this.slots,a=0,f=y.length;a<f;a++){var u=y[a];if(u.name==T)return u}return null},o.prototype.findSlotIndex=function(T){if(T==null)throw new Error("slotName cannot be null.");for(var y=this.slots,a=0,f=y.length;a<f;a++)if(y[a].name==T)return a;return  -1},o.prototype.findSkin=function(T){if(T==null)throw new Error("skinName cannot be null.");for(var y=this.skins,a=0,f=y.length;a<f;a++){var u=y[a];if(u.name==T)return u}return null},o.prototype.findEvent=function(T){if(T==null)throw new Error("eventDataName cannot be null.");for(var y=this.events,a=0,f=y.length;a<f;a++){var u=y[a];if(u.name==T)return u}return null},o.prototype.findAnimation=function(T){if(T==null)throw new Error("animationName cannot be null.");for(var y=this.animations,a=0,f=y.length;a<f;a++){var u=y[a];if(u.name==T)return u}return null},o.prototype.findIkConstraint=function(T){if(T==null)throw new Error("constraintName cannot be null.");for(var y=this.ikConstraints,a=0,f=y.length;a<f;a++){var u=y[a];if(u.name==T)return u}return null},o.prototype.findTransformConstraint=function(T){if(T==null)throw new Error("constraintName cannot be null.");for(var y=this.transformConstraints,a=0,f=y.length;a<f;a++){var u=y[a];if(u.name==T)return u}return null},o.prototype.findPathConstraint=function(T){if(T==null)throw new Error("constraintName cannot be null.");for(var y=this.pathConstraints,a=0,f=y.length;a<f;a++){var u=y[a];if(u.name==T)return u}return null},o.prototype.findPathConstraintIndex=function(T){if(T==null)throw new Error("pathConstraintName cannot be null.");for(var y=this.pathConstraints,a=0,f=y.length;a<f;a++)if(y[a].name==T)return a;return  -1},o})();Y.SkeletonData=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function T(y){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=y;}return T.prototype.readSkeletonData=function(y){var a=this.scale,f=new Y.SkeletonData,u=typeof y=="string"?JSON.parse(y):y,A=u.skeleton;if(A!=null&&(f.hash=A.hash,f.version=A.spine,f.x=A.x,f.y=A.y,f.width=A.width,f.height=A.height,f.fps=A.fps,f.imagesPath=A.images),u.bones)for(var S=0;S<u.bones.length;S++){var O=u.bones[S],I=null,U=this.getValue(O,"parent",null),L;if(U!=null&&(I=f.findBone(U))==null)throw new Error("Parent bone not found: "+U);(L=new Y.BoneData(f.bones.length,O.name,I)).length=this.getValue(O,"length",0)*a,L.x=this.getValue(O,"x",0)*a,L.y=this.getValue(O,"y",0)*a,L.rotation=this.getValue(O,"rotation",0),L.scaleX=this.getValue(O,"scaleX",1),L.scaleY=this.getValue(O,"scaleY",1),L.shearX=this.getValue(O,"shearX",0),L.shearY=this.getValue(O,"shearY",0),L.transformMode=T.transformModeFromString(this.getValue(O,"transform","normal")),L.skinRequired=this.getValue(O,"skin",false),f.bones.push(L);}if(u.slots)for(var S=0;S<u.slots.length;S++){var R,D=(R=u.slots[S]).name,q=R.bone,$=f.findBone(q);if($==null)throw new Error("Slot bone not found: "+q);var L=new Y.SlotData(f.slots.length,D,$),it=this.getValue(R,"color",null);it!=null&&L.color.setFromString(it);var vt=this.getValue(R,"dark",null);vt!=null&&(L.darkColor=new Y.Color(1,1,1,1),L.darkColor.setFromString(vt)),L.attachmentName=this.getValue(R,"attachment",null),L.blendMode=T.blendModeFromString(this.getValue(R,"blend","normal")),f.slots.push(L);}if(u.ik)for(var S=0;S<u.ik.length;S++){var ct=u.ik[S],L;(L=new Y.IkConstraintData(ct.name)).order=this.getValue(ct,"order",0),L.skinRequired=this.getValue(ct,"skin",false);for(var ut=0;ut<ct.bones.length;ut++){var q=ct.bones[ut],st;if((st=SkeletonData.findBone(q))==null)throw new Error("IK bone not found: "+q);L.bones.push(st);}var G=ct.target;if(L.target=SkeletonData.findBone(G),L.target==null)throw new Error("IK target bone not found: "+G);L.mix=this.getValue(ct,"mix",1),L.softness=this.getValue(ct,"softness",0)*a,L.bendDirection=this.getValue(ct,"bendPositive",true)?1:-1,L.compress=this.getValue(ct,"compress",false),L.stretch=this.getValue(ct,"stretch",false),L.uniform=this.getValue(ct,"uniform",false),f.ikConstraints.push(L);}if(u.transform)for(var S=0;S<u.transform.length;S++){var ct=u.transform[S],L;(L=new Y.TransformConstraintData(ct.name)).order=this.getValue(ct,"order",0),L.skinRequired=this.getValue(ct,"skin",false);for(var ut=0;ut<ct.bones.length;ut++){var q=ct.bones[ut],st;if((st=SkeletonData.findBone(q))==null)throw new Error("Transform constraint bone not found: "+q);L.bones.push(st);}var G=ct.target;if(L.target=SkeletonData.findBone(G),L.target==null)throw new Error("Transform constraint target bone not found: "+G);L.local=this.getValue(ct,"local",false),L.relative=this.getValue(ct,"relative",false),L.offsetRotation=this.getValue(ct,"rotation",0),L.offsetX=this.getValue(ct,"x",0)*a,L.offsetY=this.getValue(ct,"y",0)*a,L.offsetScaleX=this.getValue(ct,"scaleX",0),L.offsetScaleY=this.getValue(ct,"scaleY",0),L.offsetShearY=this.getValue(ct,"shearY",0),L.rotateMix=this.getValue(ct,"rotateMix",1),L.translateMix=this.getValue(ct,"translateMix",1),L.scaleMix=this.getValue(ct,"scaleMix",1),L.shearMix=this.getValue(ct,"shearMix",1),f.transformConstraints.push(L);}if(u.path)for(var S=0;S<u.path.length;S++){var ct=u.path[S],L;(L=new Y.PathConstraintData(ct.name)).order=this.getValue(ct,"order",0),L.skinRequired=this.getValue(ct,"skin",false);for(var ut=0;ut<ct.bones.length;ut++){var q=ct.bones[ut],st;if((st=SkeletonData.findBone(q))==null)throw new Error("Transform constraint bone not found: "+q);L.bones.push(st);}var G=ct.target;if(L.target=SkeletonData.findSlot(G),L.target==null)throw new Error("Path target slot not found: "+G);L.positionMode=T.positionModeFromString(this.getValue(ct,"positionMode","percent")),L.spacingMode=T.spacingModeFromString(this.getValue(ct,"spacingMode","length")),L.rotateMode=T.rotateModeFromString(this.getValue(ct,"rotateMode","tangent")),L.offsetRotation=this.getValue(ct,"rotation",0),L.position=this.getValue(ct,"position",0),L.positionMode==Y.PositionMode.Fixed&&(L.position*=a),L.spacing=this.getValue(ct,"spacing",0),L.spacingMode!=Y.SpacingMode.Length&&L.spacingMode!=Y.SpacingMode.Fixed||(L.spacing*=a),L.rotateMix=this.getValue(ct,"rotateMix",1),L.translateMix=this.getValue(ct,"translateMix",1),f.pathConstraints.push(L);}if(u.skins)for(var S=0;S<u.skins.length;S++){var et=u.skins[S],dt=new Y.Skin(et.name);if(et.bones)for(var rt=0;rt<et.bones.length;rt++){var st;if((st=SkeletonData.findBone(et.bones[rt]))==null)throw new Error("Skin bone not found: "+et.bones[S]);dt.bones.push(st);}if(et.ik)for(var rt=0;rt<et.ik.length;rt++){var It;if((It=SkeletonData.findIkConstraint(et.ik[rt]))==null)throw new Error("Skin IK constraint not found: "+et.ik[S]);dt.constraints.push(It);}if(et.transform)for(var rt=0;rt<et.transform.length;rt++){var It;if((It=SkeletonData.findTransformConstraint(et.transform[rt]))==null)throw new Error("Skin transform constraint not found: "+et.transform[S]);dt.constraints.push(It);}if(et.path)for(var rt=0;rt<et.path.length;rt++){var It;if((It=SkeletonData.findPathConstraint(et.path[rt]))==null)throw new Error("Skin path constraint not found: "+et.path[S]);dt.constraints.push(It);}for(var D in et.attachments){var ht=SkeletonData.findSlot(D);if(ht==null)throw new Error("Slot not found: "+D);var R=et.attachments[D];for(var ft in R){var kt=this.readAttachment(R[ft],dt,ht.index,ft,SkeletonData);kt!=null&&dt.setAttachment(ht.index,ft,kt);}}f.skins.push(dt),dt.name=="default"&&(f.defaultSkin=dt);}for(var S=0,at=this.linkedMeshes.length;S<at;S++){var Q=this.linkedMeshes[S],dt;if((dt=Q.skin==null?SkeletonData.defaultSkin:SkeletonData.findSkin(Q.skin))==null)throw new Error("Skin not found: "+Q.skin);var ot=dt.getAttachment(Q.slotIndex,Q.parent);if(ot==null)throw new Error("Parent mesh not found: "+Q.parent);Q.mesh.deformAttachment=Q.inheritDeform?ot:Q.mesh,Q.mesh.setParentMesh(ot),Q.mesh.updateUVs();}if(this.linkedMeshes.length=0,u.events)for(var Mt in u.events){var yt=u.events[Mt],L;(L=new Y.EventData(Mt)).intValue=this.getValue(yt,"int",0),L.floatValue=this.getValue(yt,"float",0),L.stringValue=this.getValue(yt,"string",""),L.audioPath=this.getValue(yt,"audio",null),L.audioPath!=null&&(L.volume=this.getValue(yt,"volume",1),L.balance=this.getValue(yt,"balance",0)),f.events.push(L);}if(u.animations)for(var Bt in u.animations){var Dt=u.animations[Bt];this.readAnimation(Dt,Bt,SkeletonData);}return SkeletonData},T.prototype.readAttachment=function(y,a,f,u,A){var S=this.scale;switch(u=this.getValue(y,"name",u),this.getValue(y,"type","region")){case "region":var q=this.getValue(y,"path",u),I=this.attachmentLoader.newRegionAttachment(a,u,q),et;return I==null?null:(I.path=q,I.x=this.getValue(y,"x",0)*S,I.y=this.getValue(y,"y",0)*S,I.scaleX=this.getValue(y,"scaleX",1),I.scaleY=this.getValue(y,"scaleY",1),I.rotation=this.getValue(y,"rotation",0),I.width=y.width*S,I.height=y.height*S,(et=this.getValue(y,"color",null))!=null&&I.color.setFromString(et),I.updateOffset(),I);case "boundingbox":var U=this.attachmentLoader.newBoundingBoxAttachment(a,u),et;return U==null?null:(this.readVertices(y,U,y.vertexCount<<1),(et=this.getValue(y,"color",null))!=null&&U.color.setFromString(et),U);case "mesh":case "linkedmesh":var q=this.getValue(y,"path",u),L=this.attachmentLoader.newMeshAttachment(a,u,q),et;if(L==null)return null;L.path=q,(et=this.getValue(y,"color",null))!=null&&L.color.setFromString(et),L.width=this.getValue(y,"width",0)*S,L.height=this.getValue(y,"height",0)*S;var R=this.getValue(y,"parent",null);if(R!=null)return this.linkedMeshes.push(new o(L,this.getValue(y,"skin",null),f,R,this.getValue(y,"deform",true))),L;var D=y.uvs;return this.readVertices(y,L,D.length),L.triangles=y.triangles,L.regionUVs=D,L.updateUVs(),L.edges=this.getValue(y,"edges",null),L.hullLength=2*this.getValue(y,"hull",0),L;case "path":var q;if((q=this.attachmentLoader.newPathAttachment(a,u))==null)return null;q.closed=this.getValue(y,"closed",false),q.constantSpeed=this.getValue(y,"constantSpeed",true);var G=y.vertexCount,et;this.readVertices(y,q,G<<1);for(var $=Y.Utils.newArray(G/3,0),it=0;it<y.lengths.length;it++)$[it]=y.lengths[it]*S;return q.lengths=$,(et=this.getValue(y,"color",null))!=null&&q.color.setFromString(et),q;case "point":var vt=this.attachmentLoader.newPointAttachment(a,u),et;return vt==null?null:(vt.x=this.getValue(y,"x",0)*S,vt.y=this.getValue(y,"y",0)*S,vt.rotation=this.getValue(y,"rotation",0),(et=this.getValue(y,"color",null))!=null&&vt.color.setFromString(et),vt);case "clipping":var ct=this.attachmentLoader.newClippingAttachment(a,u);if(ct==null)return null;var ut=this.getValue(y,"end",null);if(ut!=null){var st=A.findSlot(ut);if(st==null)throw new Error("Clipping end slot not found: "+ut);ct.endSlot=st;}var G=y.vertexCount,et;return this.readVertices(y,ct,G<<1),(et=this.getValue(y,"color",null))!=null&&ct.color.setFromString(et),ct}return null},T.prototype.readVertices=function(y,a,f){var u=this.scale;a.worldVerticesLength=f;var A=y.vertices;if(f!=A.length){for(var S=new Array,O=new Array,I=0,U=A.length;I<U;){var L=A[I++];O.push(L);for(var R=I+4*L;I<R;I+=4)O.push(A[I]),S.push(A[I+1]*u),S.push(A[I+2]*u),S.push(A[I+3]);}a.bones=O,a.vertices=Y.Utils.toFloatArray(S);}else {var D=Y.Utils.toFloatArray(A);if(u!=1)for(var I=0,U=A.length;I<U;I++)D[I]*=u;a.vertices=D;}},T.prototype.readAnimation=function(y,a,f){var u=this.scale,A=new Array,S=0;if(y.slots)for(var O in y.slots){var I=y.slots[O],U;if((U=f.findSlotIndex(O))==-1)throw new Error("Slot not found: "+O);for(var L in I){var R=I[L];if(L=="attachment"){var D;(D=new Y.AttachmentTimeline(R.length)).slotIndex=U;for(var q=0,$=0;$<R.length;$++){var it=R[$];D.setFrame(q++,this.getValue(it,"time",0),it.name);}A.push(D),S=Math.max(S,D.frames[D.getFrameCount()-1]);}else if(L=="color"){var D;(D=new Y.ColorTimeline(R.length)).slotIndex=U;for(var q=0,$=0;$<R.length;$++){var it=R[$],vt=new Y.Color;vt.setFromString(it.color),D.setFrame(q,this.getValue(it,"time",0),vt.r,vt.g,vt.b,vt.a),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*Y.ColorTimeline.ENTRIES]);}else {if(L!="twoColor")throw new Error("Invalid timeline type for a slot: "+L+" ("+O+")");var D;(D=new Y.TwoColorTimeline(R.length)).slotIndex=U;for(var q=0,$=0;$<R.length;$++){var it=R[$],ct=new Y.Color,ut=new Y.Color;ct.setFromString(it.light),ut.setFromString(it.dark),D.setFrame(q,this.getValue(it,"time",0),ct.r,ct.g,ct.b,ct.a,ut.r,ut.g,ut.b),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*Y.TwoColorTimeline.ENTRIES]);}}}if(y.bones)for(var st in y.bones){var G=y.bones[st],et=f.findBoneIndex(st);if(et==-1)throw new Error("Bone not found: "+st);for(var L in G){var R=G[L];if(L==="rotate"){var D;(D=new Y.RotateTimeline(R.length)).boneIndex=et;for(var q=0,$=0;$<R.length;$++){var it=R[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,"angle",0)),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*Y.RotateTimeline.ENTRIES]);}else {if(L!=="translate"&&L!=="scale"&&L!=="shear")throw new Error("Invalid timeline type for a bone: "+L+" ("+st+")");var D=null,dt=1,rt=0;L==="scale"?(D=new Y.ScaleTimeline(R.length),rt=1):L==="shear"?D=new Y.ShearTimeline(R.length):(D=new Y.TranslateTimeline(R.length),dt=u),D.boneIndex=et;for(var q=0,$=0;$<R.length;$++){var it=R[$],It=this.getValue(it,"x",rt),ht=this.getValue(it,"y",rt);D.setFrame(q,this.getValue(it,"time",0),It*dt,ht*dt),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*Y.TranslateTimeline.ENTRIES]);}}}if(y.ik)for(var ft in y.ik){var kt=y.ik[ft],at=f.findIkConstraint(ft),D;(D=new Y.IkConstraintTimeline(kt.length)).ikConstraintIndex=f.ikConstraints.indexOf(at);for(var q=0,$=0;$<kt.length;$++){var it=kt[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,"mix",1),this.getValue(it,"softness",0)*u,this.getValue(it,"bendPositive",true)?1:-1,this.getValue(it,"compress",false),this.getValue(it,"stretch",false)),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*Y.IkConstraintTimeline.ENTRIES]);}if(y.transform)for(var ft in y.transform){var kt=y.transform[ft],at=f.findTransformConstraint(ft),D;(D=new Y.TransformConstraintTimeline(kt.length)).transformConstraintIndex=f.transformConstraints.indexOf(at);for(var q=0,$=0;$<kt.length;$++){var it=kt[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,"rotateMix",1),this.getValue(it,"translateMix",1),this.getValue(it,"scaleMix",1),this.getValue(it,"shearMix",1)),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*Y.TransformConstraintTimeline.ENTRIES]);}if(y.path)for(var ft in y.path){var kt=y.path[ft],Q=f.findPathConstraintIndex(ft);if(Q==-1)throw new Error("Path constraint not found: "+ft);var ot=f.pathConstraints[Q];for(var L in kt){var R=kt[L];if(L==="position"||L==="spacing"){var D=null,dt=1;L==="spacing"?(D=new Y.PathConstraintSpacingTimeline(R.length),ot.spacingMode!=Y.SpacingMode.Length&&ot.spacingMode!=Y.SpacingMode.Fixed||(dt=u)):(D=new Y.PathConstraintPositionTimeline(R.length),ot.positionMode==Y.PositionMode.Fixed&&(dt=u)),D.pathConstraintIndex=Q;for(var q=0,$=0;$<R.length;$++){var it=R[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,L,0)*dt),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*Y.PathConstraintPositionTimeline.ENTRIES]);}else if(L==="mix"){var D;(D=new Y.PathConstraintMixTimeline(R.length)).pathConstraintIndex=Q;for(var q=0,$=0;$<R.length;$++){var it=R[$];D.setFrame(q,this.getValue(it,"time",0),this.getValue(it,"rotateMix",1),this.getValue(it,"translateMix",1)),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[(D.getFrameCount()-1)*Y.PathConstraintMixTimeline.ENTRIES]);}}}if(y.deform)for(var Mt in y.deform){var yt=y.deform[Mt],Bt=f.findSkin(Mt);if(Bt==null)throw new Error("Skin not found: "+Mt);for(var O in yt){var I=yt[O],U;if((U=f.findSlotIndex(O))==-1)throw new Error("Slot not found: "+I.name);for(var L in I){var R=I[L],Dt=Bt.getAttachment(U,L);if(Dt==null)throw new Error("Deform attachment not found: "+R.name);var Lt=Dt.bones!=null,Vt=Dt.vertices,Gt=Lt?Vt.length/3*2:Vt.length,D;(D=new Y.DeformTimeline(R.length)).slotIndex=U,D.attachment=Dt;for(var q=0,Ft=0;Ft<R.length;Ft++){var it=R[Ft],Tt=void 0,At=this.getValue(it,"vertices",null);if(At==null)Tt=Lt?Y.Utils.newFloatArray(Gt):Vt;else {Tt=Y.Utils.newFloatArray(Gt);var _t=this.getValue(it,"offset",0);if(Y.Utils.arrayCopy(At,0,Tt,_t,At.length),u!=1)for(var $,ie=($=_t)+At.length;$<ie;$++)Tt[$]*=u;if(!Lt)for(var $=0;$<Gt;$++)Tt[$]+=Vt[$];}D.setFrame(q,this.getValue(it,"time",0),Tt),this.readCurve(it,D,q),q++;}A.push(D),S=Math.max(S,D.frames[D.getFrameCount()-1]);}}}var Kt=y.drawOrder;if(Kt==null&&(Kt=y.draworder),Kt!=null){for(var D=new Y.DrawOrderTimeline(Kt.length),Ae=f.slots.length,q=0,Ft=0;Ft<Kt.length;Ft++){var Le=Kt[Ft],ye=null,Ye=this.getValue(Le,"offsets",null);if(Ye!=null){ye=Y.Utils.newArray(Ae,-1);for(var Xe=Y.Utils.newArray(Ae-Ye.length,0),qe=0,ze=0,$=0;$<Ye.length;$++){var Ue=Ye[$],U;if((U=f.findSlotIndex(Ue.slot))==-1)throw new Error("Slot not found: "+Ue.slot);for(;qe!=U;)Xe[ze++]=qe++;ye[qe+Ue.offset]=qe++;}for(;qe<Ae;)Xe[ze++]=qe++;for(var $=Ae-1;$>=0;$--)ye[$]==-1&&(ye[$]=Xe[--ze]);}D.setFrame(q++,this.getValue(Le,"time",0),ye);}A.push(D),S=Math.max(S,D.frames[D.getFrameCount()-1]);}if(y.events){for(var D=new Y.EventTimeline(y.events.length),q=0,$=0;$<y.events.length;$++){var Qe=y.events[$],We=f.findEvent(Qe.name);if(We==null)throw new Error("Event not found: "+Qe.name);var Ze=new Y.Event(Y.Utils.toSinglePrecision(this.getValue(Qe,"time",0)),We);Ze.intValue=this.getValue(Qe,"int",We.intValue),Ze.floatValue=this.getValue(Qe,"float",We.floatValue),Ze.stringValue=this.getValue(Qe,"string",We.stringValue),Ze.data.audioPath!=null&&(Ze.volume=this.getValue(Qe,"volume",1),Ze.balance=this.getValue(Qe,"balance",0)),D.setFrame(q++,Ze);}A.push(D),S=Math.max(S,D.frames[D.getFrameCount()-1]);}if(isNaN(S))throw new Error("Error while parsing animation, duration is NaN");skeletonData.animations.push(new Y.Animation(a,A,S));},T.prototype.readCurve=function(y,a,f){if(y.hasOwnProperty("curve"))if(y.curve=="stepped")a.setStepped(f);else {var u=y.curve;a.setCurve(f,u,this.getValue(y,"c2",0),this.getValue(y,"c3",1),this.getValue(y,"c4",1));}},T.prototype.getValue=function(y,a,f){return y[a]!==void 0?y[a]:f},T.blendModeFromString=function(y){if((y=y.toLowerCase())=="normal")return Y.BlendMode.Normal;if(y=="additive")return Y.BlendMode.Additive;if(y=="multiply")return Y.BlendMode.Multiply;if(y=="screen")return Y.BlendMode.Screen;throw new Error("Unknown blend mode: "+y)},T.positionModeFromString=function(y){if((y=y.toLowerCase())=="fixed")return Y.PositionMode.Fixed;if(y=="percent")return Y.PositionMode.Percent;throw new Error("Unknown position mode: "+y)},T.spacingModeFromString=function(y){if((y=y.toLowerCase())=="length")return Y.SpacingMode.Length;if(y=="fixed")return Y.SpacingMode.Fixed;if(y=="percent")return Y.SpacingMode.Percent;throw new Error("Unknown position mode: "+y)},T.rotateModeFromString=function(y){if((y=y.toLowerCase())=="tangent")return Y.RotateMode.Tangent;if(y=="chain")return Y.RotateMode.Chain;if(y=="chainscale")return Y.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+y)},T.transformModeFromString=function(y){if((y=y.toLowerCase())=="normal")return Y.TransformMode.Normal;if(y=="onlytranslation")return Y.TransformMode.OnlyTranslation;if(y=="norotationorreflection")return Y.TransformMode.NoRotationOrReflection;if(y=="noscale")return Y.TransformMode.NoScale;if(y=="noscaleorreflection")return Y.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+y)},T})();Y.SkeletonJson=lt;var o=(function(){function T(y,a,f,u,A){this.mesh=y,this.skin=a,this.slotIndex=f,this.parent=u,this.inheritDeform=A;}return T})();})(Rt||(Rt={})),(function(Y){var lt=(function(){function T(y,a,f){this.slotIndex=y,this.name=a,this.attachment=f;}return T})();Y.SkinEntry=lt;var o=(function(){function T(y){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,y==null)throw new Error("name cannot be null.");this.name=y;}return T.prototype.setAttachment=function(y,a,f){if(f==null)throw new Error("attachment cannot be null.");var u=this.attachments;y>=u.length&&(u.length=y+1),u[y]||(u[y]={}),u[y][a]=f;},T.prototype.addSkin=function(y){for(var a=0;a<y.bones.length;a++){for(var f=y.bones[a],u=false,A=0;A<this.bones.length;A++)if(this.bones[A]==f){u=true;break}u||this.bones.push(f);}for(var a=0;a<y.constraints.length;a++){for(var S=y.constraints[a],u=false,A=0;A<this.constraints.length;A++)if(this.constraints[A]==S){u=true;break}u||this.constraints.push(S);}for(var O=y.getAttachments(),a=0;a<O.length;a++){var I=O[a];this.setAttachment(I.slotIndex,I.name,I.attachment);}},T.prototype.copySkin=function(y){for(var a=0;a<y.bones.length;a++){for(var f=y.bones[a],u=false,A=0;A<this.bones.length;A++)if(this.bones[A]==f){u=true;break}u||this.bones.push(f);}for(var a=0;a<y.constraints.length;a++){for(var S=y.constraints[a],u=false,A=0;A<this.constraints.length;A++)if(this.constraints[A]==S){u=true;break}u||this.constraints.push(S);}for(var O=y.getAttachments(),a=0;a<O.length;a++){var I=O[a];I.attachment!=null&&(I.attachment instanceof Y.MeshAttachment?(I.attachment=I.attachment.newLinkedMesh(),this.setAttachment(I.slotIndex,I.name,I.attachment)):(I.attachment=I.attachment.copy(),this.setAttachment(I.slotIndex,I.name,I.attachment)));}},T.prototype.getAttachment=function(y,a){var f=this.attachments[y];return f?f[a]:null},T.prototype.removeAttachment=function(y,a){var f=this.attachments[y];f&&(f[a]=null);},T.prototype.getAttachments=function(){for(var y=new Array,a=0;a<this.attachments.length;a++){var f=this.attachments[a];if(f)for(var u in f){var A=f[u];A&&y.push(new lt(a,u,A));}}return y},T.prototype.getAttachmentsForSlot=function(y,a){var f=this.attachments[y];if(f)for(var u in f){var A=f[u];A&&a.push(new lt(y,u,A));}},T.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0;},T.prototype.attachAll=function(y,a){for(var f=0,u=0;u<Skeleton.slots.length;u++){var A=Skeleton.slots[u],S=A.getAttachment();if(S&&f<a.attachments.length){var O=a.attachments[f];for(var I in O){if(S==O[I]){var L=this.getAttachment(f,I);L!=null&&A.setAttachment(L);break}}}f++;}},T})();Y.Skin=o;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y){if(this.deform=new Array,T==null)throw new Error("data cannot be null.");if(y==null)throw new Error("bone cannot be null.");this.data=T,this.bone=y,this.color=new Y.Color,this.darkColor=T.darkColor==null?null:new Y.Color,this.setToSetupPose();}return o.prototype.getSkeleton=function(){return this.bone.skeleton},o.prototype.getAttachment=function(){return this.attachment},o.prototype.setAttachment=function(T){this.attachment!=T&&(this.attachment=T,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0);},o.prototype.setAttachmentTime=function(T){this.attachmentTime=this.bone.skeleton.time-T;},o.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},o.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)));},o})();Y.Slot=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y,a){if(this.color=new Y.Color(1,1,1,1),T<0)throw new Error("index must be >= 0.");if(y==null)throw new Error("name cannot be null.");if(a==null)throw new Error("boneData cannot be null.");this.index=T,this.name=y,this.boneData=a;}return o})();Y.SlotData=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function f(u){this._image=u;}return f.prototype.getImage=function(){return this._image},f.filterFromString=function(u){switch(u.toLowerCase()){case "nearest":return o.Nearest;case "linear":return o.Linear;case "mipmap":return o.MipMap;case "mipmapnearestnearest":return o.MipMapNearestNearest;case "mipmaplinearnearest":return o.MipMapLinearNearest;case "mipmapnearestlinear":return o.MipMapNearestLinear;case "mipmaplinearlinear":return o.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+u)}},f.wrapFromString=function(u){switch(u.toLowerCase()){case "mirroredtepeat":return T.MirroredRepeat;case "clamptoedge":return T.ClampToEdge;case "repeat":return T.Repeat;default:throw new Error("Unknown texture wrap "+u)}},f})(),o,T;Y.Texture=lt,(function(f){f[f.Nearest=9728]="Nearest",f[f.Linear=9729]="Linear",f[f.MipMap=9987]="MipMap",f[f.MipMapNearestNearest=9984]="MipMapNearestNearest",f[f.MipMapLinearNearest=9985]="MipMapLinearNearest",f[f.MipMapNearestLinear=9986]="MipMapNearestLinear",f[f.MipMapLinearLinear=9987]="MipMapLinearLinear";})(o=Y.TextureFilter||(Y.TextureFilter={})),(function(f){f[f.MirroredRepeat=33648]="MirroredRepeat",f[f.ClampToEdge=33071]="ClampToEdge",f[f.Repeat=10497]="Repeat";})(T=Y.TextureWrap||(Y.TextureWrap={}));var y=(function(){function f(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=false,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0;}return f})();Y.TextureRegion=y;var a=(function(f){function u(){return f!==null&&f.apply(this,arguments)||this}return Ve(u,f),u.prototype.setFilters=function(A,S){},u.prototype.setWraps=function(A,S){},u.prototype.dispose=function(){},u})(lt);Y.FakeTexture=a;})(Rt||(Rt={})),(function(Y){var lt=(function(){function a(f,u){this.pages=new Array,this.regions=new Array,this.load(f,u);}return a.prototype.load=function(f,u){if(u==null)throw new Error("textureLoader cannot be null.");for(var A=new o(f),S=new Array(4),O=null;;){var I=A.readLine();if(I==null)break;if((I=I.trim()).length==0)O=null;else if(O){var U=new y;U.name=I,U.page=O;var L=A.readValue();L.toLocaleLowerCase()=="true"?U.degrees=90:L.toLocaleLowerCase()=="false"?U.degrees=0:U.degrees=parseFloat(L),U.rotate=U.degrees==90,A.readTuple(S);var R=parseInt(S[0]),D=parseInt(S[1]);A.readTuple(S);var q=parseInt(S[0]),$=parseInt(S[1]);U.u=R/O.width,U.v=D/O.height,U.rotate?(U.u2=(R+$)/O.width,U.v2=(D+q)/O.height):(U.u2=(R+q)/O.width,U.v2=(D+$)/O.height),U.x=R,U.y=D,U.width=Math.abs(q),U.height=Math.abs($),A.readTuple(S)==4&&A.readTuple(S)==4&&A.readTuple(S),U.originalWidth=parseInt(S[0]),U.originalHeight=parseInt(S[1]),A.readTuple(S),U.offsetX=parseInt(S[0]),U.offsetY=parseInt(S[1]),U.index=parseInt(A.readValue()),U.texture=O.texture,this.regions.push(U);}else {(O=new T).name=I,A.readTuple(S)==2&&(O.width=parseInt(S[0]),O.height=parseInt(S[1]),A.readTuple(S)),A.readTuple(S),O.minFilter=Y.Texture.filterFromString(S[0]),O.magFilter=Y.Texture.filterFromString(S[1]);var it=A.readValue();O.uWrap=Y.TextureWrap.ClampToEdge,O.vWrap=Y.TextureWrap.ClampToEdge,it=="x"?O.uWrap=Y.TextureWrap.Repeat:it=="y"?O.vWrap=Y.TextureWrap.Repeat:it=="xy"&&(O.uWrap=O.vWrap=Y.TextureWrap.Repeat),O.texture=u(I),O.texture.setFilters(O.minFilter,O.magFilter),O.texture.setWraps(O.uWrap,O.vWrap),O.width=O.texture.getImage().width,O.height=O.texture.getImage().height,this.pages.push(O);}}},a.prototype.findRegion=function(f){for(var u=0;u<this.regions.length;u++)if(this.regions[u].name==f)return this.regions[u];return null},a.prototype.dispose=function(){for(var f=0;f<this.pages.length;f++)this.pages[f].texture.dispose();},a})();Y.TextureAtlas=lt;var o=(function(){function a(f){this.index=0,this.lines=f.split(/\r\n|\r|\n/);}return a.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},a.prototype.readValue=function(){var f=this.readLine(),u=f.indexOf(":");if(u==-1)throw new Error("Invalid line: "+f);return f.substring(u+1).trim()},a.prototype.readTuple=function(f){var u=this.readLine(),A=u.indexOf(":");if(A==-1)throw new Error("Invalid line: "+u);for(var S=0,O=A+1;S<3;S++){var I=u.indexOf(",",O);if(I==-1)break;f[S]=u.substr(O,I-O).trim(),O=I+1;}return f[S]=u.substring(O).trim(),S+1},a})(),T=(function(){function a(){}return a})();Y.TextureAtlasPage=T;var y=(function(a){function f(){return a!==null&&a.apply(this,arguments)||this}return Ve(f,a),f})(Y.TextureRegion);Y.TextureAtlasRegion=y;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new Y.Vector2,this.active=false,T==null)throw new Error("data cannot be null.");if(skeleton==null)throw new Error("skeleton cannot be null.");this.data=T,this.rotateMix=T.rotateMix,this.translateMix=T.translateMix,this.scaleMix=T.scaleMix,this.shearMix=T.shearMix,this.bones=new Array;for(var a=0;a<T.bones.length;a++)this.bones.push(skeleton.findBone(T.bones[a].name));this.target=y.findBone(T.target.name);}return o.prototype.isActive=function(){return this.active},o.prototype.apply=function(){this.update();},o.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld();},o.prototype.applyAbsoluteWorld=function(){for(var T=this.rotateMix,y=this.translateMix,a=this.scaleMix,f=this.shearMix,u=this.target,A=u.a,S=u.b,O=u.c,I=u.d,U=A*I-S*O>0?Y.MathUtils.degRad:-Y.MathUtils.degRad,L=this.data.offsetRotation*U,R=this.data.offsetShearY*U,D=this.bones,q=0,$=D.length;q<$;q++){var it=D[q],vt=false;if(T!=0){var ct=it.a,ut=it.b,st=it.c,G=it.d,et;(et=Math.atan2(O,A)-Math.atan2(st,ct)+L)>Y.MathUtils.PI?et-=Y.MathUtils.PI2:et<-Y.MathUtils.PI&&(et+=Y.MathUtils.PI2),et*=T;var dt=Math.cos(et),rt=Math.sin(et);it.a=dt*ct-rt*st,it.b=dt*ut-rt*G,it.c=rt*ct+dt*st,it.d=rt*ut+dt*G,vt=true;}if(y!=0){var It=this.temp;u.localToWorld(It.set(this.data.offsetX,this.data.offsetY)),it.worldX+=(It.x-it.worldX)*y,it.worldY+=(It.y-it.worldY)*y,vt=true;}if(a>0){var ht=Math.sqrt(it.a*it.a+it.c*it.c),ft=Math.sqrt(A*A+O*O);ht>1e-5&&(ht=(ht+(ft-ht+this.data.offsetScaleX)*a)/ht),it.a*=ht,it.c*=ht,ht=Math.sqrt(it.b*it.b+it.d*it.d),ft=Math.sqrt(S*S+I*I),ht>1e-5&&(ht=(ht+(ft-ht+this.data.offsetScaleY)*a)/ht),it.b*=ht,it.d*=ht,vt=true;}if(f>0){var ut=it.b,G=it.d,kt=Math.atan2(G,ut),et;(et=Math.atan2(I,S)-Math.atan2(O,A)-(kt-Math.atan2(it.c,it.a)))>Y.MathUtils.PI?et-=Y.MathUtils.PI2:et<-Y.MathUtils.PI&&(et+=Y.MathUtils.PI2),et=kt+(et+R)*f;var ht=Math.sqrt(ut*ut+G*G);it.b=Math.cos(et)*ht,it.d=Math.sin(et)*ht,vt=true;}vt&&(it.appliedValid=false);}},o.prototype.applyRelativeWorld=function(){for(var T=this.rotateMix,y=this.translateMix,a=this.scaleMix,f=this.shearMix,u=this.target,A=u.a,S=u.b,O=u.c,I=u.d,U=A*I-S*O>0?Y.MathUtils.degRad:-Y.MathUtils.degRad,L=this.data.offsetRotation*U,R=this.data.offsetShearY*U,D=this.bones,q=0,$=D.length;q<$;q++){var it=D[q],vt=false;if(T!=0){var ct=it.a,ut=it.b,st=it.c,G=it.d,et;(et=Math.atan2(O,A)+L)>Y.MathUtils.PI?et-=Y.MathUtils.PI2:et<-Y.MathUtils.PI&&(et+=Y.MathUtils.PI2),et*=T;var dt=Math.cos(et),rt=Math.sin(et);it.a=dt*ct-rt*st,it.b=dt*ut-rt*G,it.c=rt*ct+dt*st,it.d=rt*ut+dt*G,vt=true;}if(y!=0){var It=this.temp;u.localToWorld(It.set(this.data.offsetX,this.data.offsetY)),it.worldX+=It.x*y,it.worldY+=It.y*y,vt=true;}if(a>0){var ht=(Math.sqrt(A*A+O*O)-1+this.data.offsetScaleX)*a+1;it.a*=ht,it.c*=ht,ht=(Math.sqrt(S*S+I*I)-1+this.data.offsetScaleY)*a+1,it.b*=ht,it.d*=ht,vt=true;}if(f>0){var et;(et=Math.atan2(I,S)-Math.atan2(O,A))>Y.MathUtils.PI?et-=Y.MathUtils.PI2:et<-Y.MathUtils.PI&&(et+=Y.MathUtils.PI2);var ut=it.b,G=it.d;et=Math.atan2(G,ut)+(et-Y.MathUtils.PI/2+R)*f;var ht=Math.sqrt(ut*ut+G*G);it.b=Math.cos(et)*ht,it.d=Math.sin(et)*ht,vt=true;}vt&&(it.appliedValid=false);}},o.prototype.applyAbsoluteLocal=function(){var T=this.rotateMix,y=this.translateMix,a=this.scaleMix,f=this.shearMix,u=this.target;u.appliedValid||u.updateAppliedTransform();for(var A=this.bones,S=0,O=A.length;S<O;S++){var I=A[S];I.appliedValid||I.updateAppliedTransform();var U=I.arotation;if(T!=0){var L=u.arotation-U+this.data.offsetRotation;U+=(L-=360*(16384-(16384.499999999996-L/360|0)))*T;}var R=I.ax,D=I.ay;y!=0&&(R+=(u.ax-R+this.data.offsetX)*y,D+=(u.ay-D+this.data.offsetY)*y);var q=I.ascaleX,$=I.ascaleY;a!=0&&(q>1e-5&&(q=(q+(u.ascaleX-q+this.data.offsetScaleX)*a)/q),$>1e-5&&($=($+(u.ascaleY-$+this.data.offsetScaleY)*a)/$));var it=I.ashearY;if(f!=0){var L=u.ashearY-it+this.data.offsetShearY;L-=360*(16384-(16384.499999999996-L/360|0)),I.shearY+=L*f;}I.updateWorldTransformWith(R,D,U,q,$,I.ashearX,it);}},o.prototype.applyRelativeLocal=function(){var T=this.rotateMix,y=this.translateMix,a=this.scaleMix,f=this.shearMix,u=this.target;u.appliedValid||u.updateAppliedTransform();for(var A=this.bones,S=0,O=A.length;S<O;S++){var I=A[S];I.appliedValid||I.updateAppliedTransform();var U=I.arotation;T!=0&&(U+=(u.arotation+this.data.offsetRotation)*T);var L=I.ax,R=I.ay;y!=0&&(L+=(u.ax+this.data.offsetX)*y,R+=(u.ay+this.data.offsetY)*y);var D=I.ascaleX,q=I.ascaleY;a!=0&&(D>1e-5&&(D*=(u.ascaleX-1+this.data.offsetScaleX)*a+1),q>1e-5&&(q*=(u.ascaleY-1+this.data.offsetScaleY)*a+1));var $=I.ashearY;f!=0&&($+=(u.ashearY+this.data.offsetShearY)*f),I.updateWorldTransformWith(L,R,U,D,q,I.ashearX,$);}},o})();Y.TransformConstraint=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(o){function T(y){var a=o.call(this,y,0,false)||this;return a.bones=new Array,a.rotateMix=0,a.translateMix=0,a.scaleMix=0,a.shearMix=0,a.offsetRotation=0,a.offsetX=0,a.offsetY=0,a.offsetScaleX=0,a.offsetScaleY=0,a.offsetShearY=0,a.relative=false,a.local=false,a}return Ve(T,o),T})(Y.ConstraintData);Y.TransformConstraintData=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new Y.Pool((function(){return new Array})),this.polygonIndicesPool=new Y.Pool((function(){return new Array}));}return o.prototype.triangulate=function(T){var y=T,a=T.length>>1,f=this.indicesArray;f.length=0;for(var u=0;u<a;u++)f[u]=u;var A=this.isConcaveArray;A.length=0;for(var u=0,S=a;u<S;++u)A[u]=o.isConcave(u,a,y,f);var O=this.triangles;for(O.length=0;a>3;){for(var I=a-1,u=0,U=1;;){t:if(!A[u]){for(var L=f[I]<<1,R=f[u]<<1,D=f[U]<<1,q=y[L],$=y[L+1],it=y[R],vt=y[R+1],ct=y[D],ut=y[D+1],st=(U+1)%a;st!=I;st=(st+1)%a)if(A[st]){var G=f[st]<<1,et=y[G],dt=y[G+1];if(o.positiveArea(ct,ut,q,$,et,dt)&&o.positiveArea(q,$,it,vt,et,dt)&&o.positiveArea(it,vt,ct,ut,et,dt))break t}break}if(U==0){do{if(!A[u])break;u--;}while(u>0);break}I=u,u=U,U=(U+1)%a;}O.push(f[(a+u-1)%a]),O.push(f[u]),O.push(f[(u+1)%a]),f.splice(u,1),A.splice(u,1);var rt=(--a+u-1)%a,It=u==a?0:u;A[rt]=o.isConcave(rt,a,y,f),A[It]=o.isConcave(It,a,y,f);}return a==3&&(O.push(f[2]),O.push(f[0]),O.push(f[1])),O},o.prototype.decompose=function(T,y){var a=T,f=this.convexPolygons;this.polygonPool.freeAll(f),f.length=0;var u=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(u),u.length=0;var A=this.polygonIndicesPool.obtain();A.length=0;var S=this.polygonPool.obtain();S.length=0;for(var O=-1,I=0,U=0,L=y.length;U<L;U+=3){var R=y[U]<<1,D=y[U+1]<<1,q=y[U+2]<<1,$=a[R],it=a[R+1],vt=a[D],ct=a[D+1],ut=a[q],st=a[q+1],G=false;if(O==R){var et=S.length-4,dt=o.winding(S[et],S[et+1],S[et+2],S[et+3],ut,st),rt=o.winding(ut,st,S[0],S[1],S[2],S[3]);dt==I&&rt==I&&(S.push(ut),S.push(st),A.push(q),G=true);}G||(S.length>0?(f.push(S),u.push(A)):(this.polygonPool.free(S),this.polygonIndicesPool.free(A)),(S=this.polygonPool.obtain()).length=0,S.push($),S.push(it),S.push(vt),S.push(ct),S.push(ut),S.push(st),(A=this.polygonIndicesPool.obtain()).length=0,A.push(R),A.push(D),A.push(q),I=o.winding($,it,vt,ct,ut,st),O=R);}S.length>0&&(f.push(S),u.push(A));for(var U=0,L=f.length;U<L;U++)if((A=u[U]).length!=0){for(var It=A[0],ht=A[A.length-1],et,ft=(S=f[U])[et=S.length-4],kt=S[et+1],at=S[et+2],Q=S[et+3],ot=S[0],Mt=S[1],yt=S[2],Bt=S[3],Dt=o.winding(ft,kt,at,Q,ot,Mt),Lt=0;Lt<L;Lt++)if(Lt!=U){var Vt=u[Lt];if(Vt.length==3){var Gt=Vt[0],Ft=Vt[1],Tt=Vt[2],At=f[Lt],ut=At[At.length-2],st=At[At.length-1];if(Gt==It&&Ft==ht){var dt=o.winding(ft,kt,at,Q,ut,st),rt=o.winding(ut,st,ot,Mt,yt,Bt);dt==Dt&&rt==Dt&&(At.length=0,Vt.length=0,S.push(ut),S.push(st),A.push(Tt),ft=at,kt=Q,at=ut,Q=st,Lt=0);}}}}for(var U=f.length-1;U>=0;U--)(S=f[U]).length==0&&(f.splice(U,1),this.polygonPool.free(S),A=u[U],u.splice(U,1),this.polygonIndicesPool.free(A));return f},o.isConcave=function(T,y,a,f){var u=f[(y+T-1)%y]<<1,A=f[T]<<1,S=f[(T+1)%y]<<1;return !this.positiveArea(a[u],a[u+1],a[A],a[A+1],a[S],a[S+1])},o.positiveArea=function(T,y,a,f,u,A){return T*(A-f)+a*(y-A)+u*(f-y)>=0},o.winding=function(T,y,a,f,u,A){var S=a-T,O=f-y;return u*O-A*S+S*y-T*O>=0?1:-1},o})();Y.Triangulator=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function L(){this.array=new Array;}return L.prototype.add=function(R){var D=this.contains(R);return this.array[0|R]=0|R,!D},L.prototype.contains=function(R){return this.array[0|R]!=null},L.prototype.remove=function(R){this.array[0|R]=void 0;},L.prototype.clear=function(){this.array.length=0;},L})();Y.IntSet=lt;var o=(function(){function L(R,D,q,$){R===void 0&&(R=0),D===void 0&&(D=0),q===void 0&&(q=0),$===void 0&&($=0),this.r=R,this.g=D,this.b=q,this.a=$;}return L.prototype.set=function(R,D,q,$){return this.r=R,this.g=D,this.b=q,this.a=$,this.clamp(),this},L.prototype.setFromColor=function(R){return this.r=R.r,this.g=R.g,this.b=R.b,this.a=R.a,this},L.prototype.setFromString=function(R){return R=R.charAt(0)=="#"?R.substr(1):R,this.r=parseInt(R.substr(0,2),16)/255,this.g=parseInt(R.substr(2,2),16)/255,this.b=parseInt(R.substr(4,2),16)/255,this.a=(R.length!=8?255:parseInt(R.substr(6,2),16))/255,this},L.prototype.add=function(R,D,q,$){return this.r+=R,this.g+=D,this.b+=q,this.a+=$,this.clamp(),this},L.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},L.rgba8888ToColor=function(R,D){R.r=((4278190080&D)>>>24)/255,R.g=((16711680&D)>>>16)/255,R.b=((65280&D)>>>8)/255,R.a=(255&D)/255;},L.rgb888ToColor=function(R,D){R.r=((16711680&D)>>>16)/255,R.g=((65280&D)>>>8)/255,R.b=(255&D)/255;},L.WHITE=new L(1,1,1,1),L.RED=new L(1,0,0,1),L.GREEN=new L(0,1,0,1),L.BLUE=new L(0,0,1,1),L.MAGENTA=new L(1,0,1,1),L})();Y.Color=o;var T=(function(){function L(){}return L.clamp=function(R,D,q){return R<D?D:R>q?q:R},L.cosDeg=function(R){return Math.cos(R*L.degRad)},L.sinDeg=function(R){return Math.sin(R*L.degRad)},L.signum=function(R){return R>0?1:R<0?-1:0},L.toInt=function(R){return R>0?Math.floor(R):Math.ceil(R)},L.cbrt=function(R){var D=Math.pow(Math.abs(R),.3333333333333333);return R<0?-D:D},L.randomTriangular=function(R,D){return L.randomTriangularWith(R,D,.5*(R+D))},L.randomTriangularWith=function(R,D,q){var $=Math.random(),it=D-R;return $<=(q-R)/it?R+Math.sqrt($*it*(q-R)):D-Math.sqrt((1-$)*it*(D-q))},L.PI=3.1415927,L.PI2=2*L.PI,L.radiansToDegrees=180/L.PI,L.radDeg=L.radiansToDegrees,L.degreesToRadians=L.PI/180,L.degRad=L.degreesToRadians,L})();Y.MathUtils=T;var y=(function(){function L(){}return L.prototype.apply=function(R,D,q){return R+(D-R)*this.applyInternal(q)},L})();Y.Interpolation=y;var a=(function(L){function R(D){var q=L.call(this)||this;return q.power=2,q.power=D,q}return Ve(R,L),R.prototype.applyInternal=function(D){return D<=.5?Math.pow(2*D,this.power)/2:Math.pow(2*(D-1),this.power)/(this.power%2==0?-2:2)+1},R})(y);Y.Pow=a;var f=(function(L){function R(D){return L.call(this,D)||this}return Ve(R,L),R.prototype.applyInternal=function(D){return Math.pow(D-1,this.power)*(this.power%2==0?-1:1)+1},R})(a);Y.PowOut=f;var u=(function(){function L(){}return L.arrayCopy=function(R,D,q,$,it){for(var vt=D,ct=$;vt<D+it;vt++,ct++)q[ct]=R[vt];},L.setArraySize=function(R,D,q){q===void 0&&(q=0);var $=R.length;if($==D)return R;if(R.length=D,$<D)for(var it=$;it<D;it++)R[it]=q;return R},L.ensureArrayCapacity=function(R,D,q){return q===void 0&&(q=0),R.length>=D?R:L.setArraySize(R,D,q)},L.newArray=function(R,D){for(var q=new Array(R),$=0;$<R;$++)q[$]=D;return q},L.newFloatArray=function(R){if(L.SUPPORTS_TYPED_ARRAYS)return new Float32Array(R);for(var D=new Array(R),q=0;q<D.length;q++)D[q]=0;return D},L.newShortArray=function(R){if(L.SUPPORTS_TYPED_ARRAYS)return new Int16Array(R);for(var D=new Array(R),q=0;q<D.length;q++)D[q]=0;return D},L.toFloatArray=function(R){return L.SUPPORTS_TYPED_ARRAYS?new Float32Array(R):R},L.toSinglePrecision=function(R){return L.SUPPORTS_TYPED_ARRAYS?Math.fround(R):R},L.webkit602BugfixHelper=function(R,D){},L.contains=function(R,D,q){for(var $=0;$<R.length;$++)if(R[$]==D)return  true;return  false},L.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",L})();Y.Utils=u;var A=(function(){function L(){}return L.logBones=function(R){for(var D=0;D<Skeleton.bones.length;D++){var q=Skeleton.bones[D];console.log(q.data.name+", "+q.a+", "+q.b+", "+q.c+", "+q.d+", "+q.worldX+", "+q.worldY);}},L})();Y.DebugUtils=A;var S=(function(){function L(R){this.items=new Array,this.instantiator=R;}return L.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},L.prototype.free=function(R){R.reset&&R.reset(),this.items.push(R);},L.prototype.freeAll=function(R){for(var D=0;D<R.length;D++)this.free(R[D]);},L.prototype.clear=function(){this.items.length=0;},L})();Y.Pool=S;var O=(function(){function L(R,D){R===void 0&&(R=0),D===void 0&&(D=0),this.x=R,this.y=D;}return L.prototype.set=function(R,D){return this.x=R,this.y=D,this},L.prototype.length=function(){var R=this.x,D=this.y;return Math.sqrt(R*R+D*D)},L.prototype.normalize=function(){var R=this.length();return R!=0&&(this.x/=R,this.y/=R),this},L})();Y.Vector2=O;var I=(function(){function L(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0;}return L.prototype.update=function(){var R=Date.now()/1e3;this.delta=R-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=R,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0);},L})();Y.TimeKeeper=I;var U=(function(){function L(R){R===void 0&&(R=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=true,this.values=new Array(R);}return L.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},L.prototype.addValue=function(R){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=R,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=true;},L.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var R=0,D=0;D<this.values.length;D++)R+=this.values[D];this.mean=R/this.values.length,this.dirty=false;}return this.mean}return 0},L})();Y.WindowedMean=U;})(Rt||(Rt={})),(function(){var Y;Math.fround||(Math.fround=(Y=new Float32Array(1),function(lt){return Y[0]=lt,Y[0]}));})(),(function(Y){var lt=(function(){function T(y){if(y==null)throw new Error("name cannot be null.");this.name=y;}return T})();Y.Attachment=lt;var o=(function(T){function y(a){var f=T.call(this,a)||this;return f.id=(65535&y.nextID++)<<11,f.worldVerticesLength=0,f.deformAttachment=f,f}return Ve(y,T),y.prototype.computeWorldVertices=function(a,f,u,A,S,O){u=S+(u>>1)*O;var I=a.bone.skeleton,U=a.deform,L=this.vertices,R=this.bones;if(R!=null){for(var D=0,q=0,$=0;$<f;$+=2){var it;D+=(it=R[D])+1,q+=it;}var vt=I.bones;if(U.length==0)for(var ct=S,ut=3*q;ct<u;ct+=O){var st=0,G=0,it=R[D++];for(it+=D;D<it;D++,ut+=3){var et=vt[R[D]],dt=L[ut],rt=L[ut+1],It=L[ut+2];st+=(dt*et.a+rt*et.b+et.worldX)*It,G+=(dt*et.c+rt*et.d+et.worldY)*It;}A[ct]=st,A[ct+1]=G;}else for(var ht=U,ct=S,ut=3*q,ft=q<<1;ct<u;ct+=O){var st=0,G=0,it=R[D++];for(it+=D;D<it;D++,ut+=3,ft+=2){var et=vt[R[D]],dt=L[ut]+ht[ft],rt=L[ut+1]+ht[ft+1],It=L[ut+2];st+=(dt*et.a+rt*et.b+et.worldX)*It,G+=(dt*et.c+rt*et.d+et.worldY)*It;}A[ct]=st,A[ct+1]=G;}}else {U.length>0&&(L=U);for(var et,kt=(et=a.bone).worldX,at=et.worldY,Q=et.a,ut=et.b,ot=et.c,Mt=et.d,yt=f,ct=S;ct<u;yt+=2,ct+=O){var dt=L[yt],rt=L[yt+1];A[ct]=dt*Q+rt*ut+kt,A[ct+1]=dt*ot+rt*Mt+at;}}},y.prototype.copyTo=function(a){this.bones!=null?(a.bones=new Array(this.bones.length),Y.Utils.arrayCopy(this.bones,0,a.bones,0,this.bones.length)):a.bones=null,this.vertices!=null?(a.vertices=Y.Utils.newFloatArray(this.vertices.length),Y.Utils.arrayCopy(this.vertices,0,a.vertices,0,this.vertices.length)):a.vertices=null,a.worldVerticesLength=this.worldVerticesLength,a.deformAttachment=this.deformAttachment;},y.nextID=0,y})(lt);Y.VertexAttachment=o;})(Rt||(Rt={})),(function(Y){(function(o){o[o.Region=0]="Region",o[o.BoundingBox=1]="BoundingBox",o[o.Mesh=2]="Mesh",o[o.LinkedMesh=3]="LinkedMesh",o[o.Path=4]="Path",o[o.Point=5]="Point",o[o.Clipping=6]="Clipping";})(Y.AttachmentType||(Y.AttachmentType={}));})(Rt||(Rt={})),(function(Y){var lt=(function(o){function T(y){var a=o.call(this,y)||this;return a.color=new Y.Color(1,1,1,1),a}return Ve(T,o),T.prototype.copy=function(){var y=new T(this.name);return this.copyTo(y),y.color.setFromColor(this.color),y},T})(Y.VertexAttachment);Y.BoundingBoxAttachment=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(o){function T(y){var a=o.call(this,y)||this;return a.color=new Y.Color(.2275,.2275,.8078,1),a}return Ve(T,o),T.prototype.copy=function(){var y=new T(this.name);return this.copyTo(y),y.endSlot=this.endSlot,y.color.setFromColor(this.color),y},T})(Y.VertexAttachment);Y.ClippingAttachment=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(o){function T(y){var a=o.call(this,y)||this;return a.color=new Y.Color(1,1,1,1),a.tempColor=new Y.Color(0,0,0,0),a}return Ve(T,o),T.prototype.updateUVs=function(){var y=this.regionUVs;this.uvs!=null&&this.uvs.length==y.length||(this.uvs=Y.Utils.newFloatArray(y.length));var a=this.uvs,f=this.uvs.length,u=this.region.u,A=this.region.v,S=0,O=0;if(this.region instanceof Y.TextureAtlasRegion){var I=this.region,U=I.texture.getImage().width,L=I.texture.getImage().height;switch(I.degrees){case 90:u-=(I.originalHeight-I.offsetY-I.height)/U,A-=(I.originalWidth-I.offsetX-I.width)/L,S=I.originalHeight/U,O=I.originalWidth/L;for(var R=0;R<f;R+=2)a[R]=u+y[R+1]*S,a[R+1]=A+(1-y[R])*O;return;case 180:u-=(I.originalWidth-I.offsetX-I.width)/U,A-=I.offsetY/L,S=I.originalWidth/U,O=I.originalHeight/L;for(var R=0;R<f;R+=2)a[R]=u+(1-y[R])*S,a[R+1]=A+(1-y[R+1])*O;return;case 270:u-=I.offsetY/U,A-=I.offsetX/L,S=I.originalHeight/U,O=I.originalWidth/L;for(var R=0;R<f;R+=2)a[R]=u+(1-y[R+1])*S,a[R+1]=A+y[R]*O;return}u-=I.offsetX/U,A-=(I.originalHeight-I.offsetY-I.height)/L,S=I.originalWidth/U,O=I.originalHeight/L;}else this.region==null?(u=A=0,S=O=1):(S=this.region.u2-u,O=this.region.v2-A);for(var R=0;R<f;R+=2)a[R]=u+y[R]*S,a[R+1]=A+y[R+1]*O;},T.prototype.getParentMesh=function(){return this.parentMesh},T.prototype.setParentMesh=function(y){this.parentMesh=y,y!=null&&(this.bones=y.bones,this.vertices=y.vertices,this.worldVerticesLength=y.worldVerticesLength,this.regionUVs=y.regionUVs,this.triangles=y.triangles,this.hullLength=y.hullLength,this.worldVerticesLength=y.worldVerticesLength);},T.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var y=new T(this.name);return y.region=this.region,y.path=this.path,y.color.setFromColor(this.color),this.copyTo(y),y.regionUVs=new Array(this.regionUVs.length),Y.Utils.arrayCopy(this.regionUVs,0,y.regionUVs,0,this.regionUVs.length),y.uvs=new Array(this.uvs.length),Y.Utils.arrayCopy(this.uvs,0,y.uvs,0,this.uvs.length),y.triangles=new Array(this.triangles.length),Y.Utils.arrayCopy(this.triangles,0,y.triangles,0,this.triangles.length),y.hullLength=this.hullLength,this.edges!=null&&(y.edges=new Array(this.edges.length),Y.Utils.arrayCopy(this.edges,0,y.edges,0,this.edges.length)),y.width=this.width,y.height=this.height,y},T.prototype.newLinkedMesh=function(){var y=new T(this.name);return y.region=this.region,y.path=this.path,y.color.setFromColor(this.color),y.deformAttachment=this.deformAttachment,y.setParentMesh(this.parentMesh!=null?this.parentMesh:this),y.updateUVs(),y},T})(Y.VertexAttachment);Y.MeshAttachment=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(o){function T(y){var a=o.call(this,y)||this;return a.closed=false,a.constantSpeed=false,a.color=new Y.Color(1,1,1,1),a}return Ve(T,o),T.prototype.copy=function(){var y=new T(this.name);return this.copyTo(y),y.lengths=new Array(this.lengths.length),Y.Utils.arrayCopy(this.lengths,0,y.lengths,0,this.lengths.length),y.closed=closed,y.constantSpeed=this.constantSpeed,y.color.setFromColor(this.color),y},T})(Y.VertexAttachment);Y.PathAttachment=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(o){function T(y){var a=o.call(this,y)||this;return a.color=new Y.Color(.38,.94,0,1),a}return Ve(T,o),T.prototype.computeWorldPosition=function(y,a){return a.x=this.x*y.a+this.y*y.b+y.worldX,a.y=this.x*y.c+this.y*y.d+y.worldY,a},T.prototype.computeWorldRotation=function(y){var a=Y.MathUtils.cosDeg(this.rotation),f=Y.MathUtils.sinDeg(this.rotation),u=a*y.a+f*y.b,A=a*y.c+f*y.d;return Math.atan2(A,u)*Y.MathUtils.radDeg},T.prototype.copy=function(){var y=new T(this.name);return y.x=this.x,y.y=this.y,y.rotation=this.rotation,y.color.setFromColor(this.color),y},T})(Y.VertexAttachment);Y.PointAttachment=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(o){function T(y){var a=o.call(this,y)||this;return a.x=0,a.y=0,a.scaleX=1,a.scaleY=1,a.rotation=0,a.width=0,a.height=0,a.color=new Y.Color(1,1,1,1),a.offset=Y.Utils.newFloatArray(8),a.uvs=Y.Utils.newFloatArray(8),a.tempColor=new Y.Color(1,1,1,1),a}return Ve(T,o),T.prototype.updateOffset=function(){var y=this.width/this.region.originalWidth*this.scaleX,a=this.height/this.region.originalHeight*this.scaleY,f=-this.width/2*this.scaleX+this.region.offsetX*y,u=-this.height/2*this.scaleY+this.region.offsetY*a,A=f+this.region.width*y,S=u+this.region.height*a,O=this.rotation*Math.PI/180,I=Math.cos(O),U=Math.sin(O),L=f*I+this.x,R=f*U,D=u*I+this.y,q=u*U,$=A*I+this.x,it=A*U,vt=S*I+this.y,ct=S*U,ut=this.offset;ut[T.OX1]=L-q,ut[T.OY1]=D+R,ut[T.OX2]=L-ct,ut[T.OY2]=vt+R,ut[T.OX3]=$-ct,ut[T.OY3]=vt+it,ut[T.OX4]=$-q,ut[T.OY4]=D+it;},T.prototype.setRegion=function(y){this.region=y;var a=this.uvs;y.rotate?(a[2]=y.u,a[3]=y.v2,a[4]=y.u,a[5]=y.v,a[6]=y.u2,a[7]=y.v,a[0]=y.u2,a[1]=y.v2):(a[0]=y.u,a[1]=y.v2,a[2]=y.u,a[3]=y.v,a[4]=y.u2,a[5]=y.v,a[6]=y.u2,a[7]=y.v2);},T.prototype.computeWorldVertices=function(y,a,f,u){var A=this.offset,S=y.worldX,O=y.worldY,I=y.a,U=y.b,L=y.c,R=y.d,D=0,q=0;D=A[T.OX1],q=A[T.OY1],a[f]=D*I+q*U+S,a[f+1]=D*L+q*R+O,f+=u,D=A[T.OX2],q=A[T.OY2],a[f]=D*I+q*U+S,a[f+1]=D*L+q*R+O,f+=u,D=A[T.OX3],q=A[T.OY3],a[f]=D*I+q*U+S,a[f+1]=D*L+q*R+O,f+=u,D=A[T.OX4],q=A[T.OY4],a[f]=D*I+q*U+S,a[f+1]=D*L+q*R+O;},T.prototype.copy=function(){var y=new T(this.name);return y.region=this.region,y.rendererObject=this.rendererObject,y.path=this.path,y.x=this.x,y.y=this.y,y.scaleX=this.scaleX,y.scaleY=this.scaleY,y.rotation=this.rotation,y.width=this.width,y.height=this.height,Y.Utils.arrayCopy(this.uvs,0,y.uvs,0,8),Y.Utils.arrayCopy(this.offset,0,y.offset,0,8),y.color.setFromColor(this.color),y},T.OX1=0,T.OY1=1,T.OX2=2,T.OY2=3,T.OX3=4,T.OY3=5,T.OX4=6,T.OY4=7,T.X1=0,T.Y1=1,T.C1R=2,T.C1G=3,T.C1B=4,T.C1A=5,T.U1=6,T.V1=7,T.X2=8,T.Y2=9,T.C2R=10,T.C2G=11,T.C2B=12,T.C2A=13,T.U2=14,T.V2=15,T.X3=16,T.Y3=17,T.C3R=18,T.C3G=19,T.C3B=20,T.C3A=21,T.U3=22,T.V3=23,T.X4=24,T.Y4=25,T.C4R=26,T.C4G=27,T.C4B=28,T.C4A=29,T.U4=30,T.V4=31,T})(Y.Attachment);Y.RegionAttachment=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T,y){this.jitterX=0,this.jitterY=0,this.jitterX=T,this.jitterY=y;}return o.prototype.begin=function(T){},o.prototype.transform=function(T,y,a,f){T.x+=Y.MathUtils.randomTriangular(-this.jitterX,this.jitterY),T.y+=Y.MathUtils.randomTriangular(-this.jitterX,this.jitterY);},o.prototype.end=function(){},o})();Y.JitterEffect=lt;})(Rt||(Rt={})),(function(Y){var lt=(function(){function o(T){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=T;}return o.prototype.begin=function(T){this.worldX=Skeleton.x+this.centerX,this.worldY=Skeleton.y+this.centerY;},o.prototype.transform=function(T,y,a,f){var u=this.angle*Y.MathUtils.degreesToRadians,A=T.x-this.worldX,S=T.y-this.worldY,O=Math.sqrt(A*A+S*S);if(O<this.radius){var I=o.interpolation.apply(0,u,(this.radius-O)/this.radius),U=Math.cos(I),L=Math.sin(I);T.x=U*A-L*S+this.worldX,T.y=L*A+U*S+this.worldY;}},o.prototype.end=function(){},o.interpolation=new Y.PowOut(2),o})();Y.SwirlEffect=lt;})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(y){function a(f,u){return u===void 0&&(u=""),y.call(this,(function(A){return new Y.webgl.GLTexture(f,A)}),u)||this}return Ve(a,y),a})(Y.AssetManager);o.AssetManager=T;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function y(a,f){this.position=new o.Vector3(0,0,0),this.direction=new o.Vector3(0,0,-1),this.up=new o.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new o.Matrix4,this.inverseProjectionView=new o.Matrix4,this.projection=new o.Matrix4,this.view=new o.Matrix4,this.tmp=new o.Vector3,this.viewportWidth=a,this.viewportHeight=f,this.update();}return y.prototype.update=function(){var a=this.projection,f=this.view,u=this.projectionView,A=this.inverseProjectionView,S=this.zoom,O=this.viewportWidth,I=this.viewportHeight;a.ortho(S*(-O/2),S*(O/2),S*(-I/2),S*(I/2),this.near,this.far),f.lookAt(this.position,this.direction,this.up),u.set(a.values),u.multiply(f),A.set(u.values).invert();},y.prototype.screenToWorld=function(a,f,u){var A=a.x,S=u-a.y-1,O=this.tmp;return O.x=2*A/f-1,O.y=2*S/u-1,O.z=2*a.z-1,O.project(this.inverseProjectionView),a.set(O.x,O.y,O.z),a},y.prototype.setViewport=function(a,f){this.viewportWidth=a,this.viewportHeight=f;},y})();o.OrthoCamera=T;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(y){function a(f,u,A){A===void 0&&(A=false);var S=y.call(this,u)||this;return S.texture=null,S.boundUnit=0,S.useMipMaps=false,S.context=f instanceof o.ManagedWebGLRenderingContext?f:new o.ManagedWebGLRenderingContext(f),S.useMipMaps=A,S.restore(),S.context.addRestorable(S),S}return Ve(a,y),a.prototype.setFilters=function(f,u){var A=this.context.gl;this.bind(),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,f),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,a.validateMagFilter(u));},a.validateMagFilter=function(f){switch(f){case Y.TextureFilter.MipMap:case Y.TextureFilter.MipMapLinearLinear:case Y.TextureFilter.MipMapLinearNearest:case Y.TextureFilter.MipMapNearestLinear:case Y.TextureFilter.MipMapNearestNearest:return Y.TextureFilter.Linear;default:return f}},a.prototype.setWraps=function(f,u){var A=this.context.gl;this.bind(),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,f),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,u);},a.prototype.update=function(f){var u=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),a.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,false),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,this._image),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,f?u.LINEAR_MIPMAP_LINEAR:u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),f&&u.generateMipmap(u.TEXTURE_2D);},a.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps);},a.prototype.bind=function(f){f===void 0&&(f=0);var u=this.context.gl;this.boundUnit=f,u.activeTexture(u.TEXTURE0+f),u.bindTexture(u.TEXTURE_2D,this.texture);},a.prototype.unbind=function(){var f=this.context.gl;f.activeTexture(f.TEXTURE0+this.boundUnit),f.bindTexture(f.TEXTURE_2D,null);},a.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture);},a.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=false,a})(Y.Texture);o.GLTexture=T;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function a(f){this.lastX=0,this.lastY=0,this.buttonDown=false,this.currTouch=null,this.touchesPool=new Y.Pool((function(){return new Y.webgl.Touch(0,0,0)})),this.listeners=new Array,this.element=f,this.setupCallbacks(f);}return a.prototype.setupCallbacks=function(f){var u=this,A=function(I){if(I instanceof MouseEvent){for(var U=f.getBoundingClientRect(),L=I.clientX-U.left,R=I.clientY-U.top,D=u.listeners,q=0;q<D.length;q++)D[q].down&&D[q].down(L,R);u.lastX=L,u.lastY=R,u.buttonDown=true,document.addEventListener("mousemove",S),document.addEventListener("mouseup",O);}},S=function(I){if(I instanceof MouseEvent){for(var U=f.getBoundingClientRect(),L=I.clientX-U.left,R=I.clientY-U.top,D=u.listeners,q=0;q<D.length;q++)u.buttonDown?D[q].dragged&&D[q].dragged(L,R):D[q].moved&&D[q].moved(L,R);u.lastX=L,u.lastY=R;}},O=function(I){if(I instanceof MouseEvent){for(var U=f.getBoundingClientRect(),L=I.clientX-U.left,R=I.clientY-U.top,D=u.listeners,q=0;q<D.length;q++)D[q].up&&D[q].up(L,R);u.lastX=L,u.lastY=R,u.buttonDown=false,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",O);}};f.addEventListener("mousedown",A,true),f.addEventListener("mousemove",S,true),f.addEventListener("mouseup",O,true),f.addEventListener("touchstart",(function(I){if(u.currTouch==null){for(var U=I.changedTouches,L=0;L<U.length;L++){var R=U[L],D=f.getBoundingClientRect(),q=R.clientX-D.left,$=R.clientY-D.top;u.currTouch=u.touchesPool.obtain(),u.currTouch.identifier=R.identifier,u.currTouch.x=q,u.currTouch.y=$;break}for(var it=u.listeners,vt=0;vt<it.length;vt++)it[vt].down&&it[vt].down(u.currTouch.x,u.currTouch.y);u.lastX=u.currTouch.x,u.lastY=u.currTouch.y,u.buttonDown=true,I.preventDefault();}}),false),f.addEventListener("touchend",(function(I){for(var U=I.changedTouches,L=0;L<U.length;L++){var R=U[L];if(u.currTouch.identifier===R.identifier){var D=f.getBoundingClientRect(),q=u.currTouch.x=R.clientX-D.left,$=u.currTouch.y=R.clientY-D.top;u.touchesPool.free(u.currTouch);for(var it=u.listeners,vt=0;vt<it.length;vt++)it[vt].up&&it[vt].up(q,$);u.lastX=q,u.lastY=$,u.buttonDown=false,u.currTouch=null;break}}I.preventDefault();}),false),f.addEventListener("touchcancel",(function(I){for(var U=I.changedTouches,L=0;L<U.length;L++){var R=U[L];if(u.currTouch.identifier===R.identifier){var D=f.getBoundingClientRect(),q=u.currTouch.x=R.clientX-D.left,$=u.currTouch.y=R.clientY-D.top;u.touchesPool.free(u.currTouch);for(var it=u.listeners,vt=0;vt<it.length;vt++)it[vt].up&&it[vt].up(q,$);u.lastX=q,u.lastY=$,u.buttonDown=false,u.currTouch=null;break}}I.preventDefault();}),false),f.addEventListener("touchmove",(function(I){if(u.currTouch!=null){for(var U=I.changedTouches,L=0;L<U.length;L++){var R=U[L];if(u.currTouch.identifier===R.identifier){for(var D=f.getBoundingClientRect(),q=R.clientX-D.left,$=R.clientY-D.top,it=u.listeners,vt=0;vt<it.length;vt++)it[vt].dragged&&it[vt].dragged(q,$);u.lastX=u.currTouch.x=q,u.lastY=u.currTouch.y=$;break}}I.preventDefault();}}),false);},a.prototype.addListener=function(f){this.listeners.push(f);},a.prototype.removeListener=function(f){var u=this.listeners.indexOf(f);u>-1&&this.listeners.splice(u,1);},a})();o.Input=T;var y=(function(){function a(f,u,A){this.identifier=f,this.x=u,this.y=A;}return a})();o.Touch=y;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function y(a){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.timeKeeper=new Y.TimeKeeper,this.backgroundColor=new Y.Color(.135,.135,.135,1),this.tempColor=new Y.Color,this.firstDraw=0,this.renderer=a,this.timeKeeper.maxDelta=9,y.logoImg===null){var f=navigator.userAgent.indexOf("Safari")>-1;y.logoImg=new Image,y.logoImg.src=y.SPINE_LOGO_DATA,f||(y.logoImg.crossOrigin="anonymous"),y.logoImg.onload=function(u){y.loaded++;},y.spinnerImg=new Image,y.spinnerImg.src=y.SPINNER_DATA,f||(y.spinnerImg.crossOrigin="anonymous"),y.spinnerImg.onload=function(u){y.loaded++;};}}return y.prototype.draw=function(a){if(a===void 0&&(a=false),!(a&&this.fadeOut>y.FADE_SECONDS)){this.timeKeeper.update();var f=Math.abs(Math.sin(this.timeKeeper.totalTime+.75));this.angle-=this.timeKeeper.delta/1.4*360*(1+1.5*Math.pow(f,5));var u=this.renderer,A=u.canvas,S=u.context.gl;u.resize(o.ResizeMode.Stretch);var O=u.camera.position.x,I=u.camera.position.y;if(u.camera.position.set(A.width/2,A.height/2,0),u.camera.viewportWidth=A.width,u.camera.viewportHeight=A.height,a){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>y.FADE_SECONDS)return void u.camera.position.set(O,I,0);f=1-this.fadeOut/y.FADE_SECONDS,this.tempColor.setFromColor(this.backgroundColor),this.tempColor.a=1-(f-1)*(f-1),u.begin(),u.quad(true,0,0,A.width,0,A.width,A.height,0,A.height,this.tempColor,this.tempColor,this.tempColor,this.tempColor),u.end();}else S.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),S.clear(S.COLOR_BUFFER_BIT),this.tempColor.a=1;if(this.tempColor.set(1,1,1,this.tempColor.a),y.loaded==2){this.logo===null&&(this.logo=new o.GLTexture(u.context,y.logoImg),this.spinner=new o.GLTexture(u.context,y.spinnerImg)),this.logo.update(false),this.spinner.update(false);var U=this.logo.getImage().width,L=this.logo.getImage().height,R=this.spinner.getImage().width,D=this.spinner.getImage().height;u.batcher.setBlendMode(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA),u.begin(),u.drawTexture(this.logo,(A.width-U)/2,(A.height-L)/2,U,L,this.tempColor),u.drawTextureRotated(this.spinner,(A.width-R)/2,(A.height-D)/2,R,D,R/2,D/2,this.angle,this.tempColor),u.end(),u.camera.position.set(O,I,0);}}},y.FADE_SECONDS=1,y.loaded=0,y.spinnerImg=null,y.logoImg=null,y.SPINNER_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAAACXBIWXMAAAsTAAALEwEAmpwYAAALB2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTEtMTVUMTY6NDA6NTkrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpmZDhlNTljMC02NGJjLTIxNGQtODAyZi1jZDlhODJjM2ZjMGMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmYmNmZWJlYS03MjY2LWE0NGQtOTI4NS0wOTJmNGNhYzk4ZWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjk3IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMjQyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHN0RXZ0OndoZW49IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiNThlMTlkNi0xYTRjLTQyNDEtODU0ZC01MDVlZjYxMjRhODQiIHN0RXZ0OndoZW49IjIwMTgtMTEtMTVUMTY6NDA6MjMrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ3YzYzYzIwLWJkYjgtYzM0YS1hYzMyLWQ5MDdjOWEyOTA0MCIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNVQxNjo0MDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZmQ4ZTU5YzAtNjRiYy0yMTRkLTgwMmYtY2Q5YTgyYzNmYzBjIiBzdEV2dDp3aGVuPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0N2M2M2MyMC1iZGI4LWMzNGEtYWMzMi1kOTA3YzlhMjkwNDAiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2OWRmZjljYy01YzFiLWE5NDctOTc3OS03ODgxZjM0ODk3MDMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFu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",y.SPINE_LOGO_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAACXBIWXMAAAsTAAALEwEAmpwYAAALB2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTEtMTVUMTY6NDA6NTkrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMTdhZGQ3Ni04OTZlLThlNGUtYmM5MS00ZjEyNjI1YjA3MjgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDplMTViNGE2ZS1hMDg3LWEzNDktODdhOS1mNDYzYjE2MzQ0Y2MiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjk3IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMjQyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHN0RXZ0OndoZW49IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiNThlMTlkNi0xYTRjLTQyNDEtODU0ZC01MDVlZjYxMjRhODQiIHN0RXZ0OndoZW49IjIwMTgtMTEtMTVUMTY6NDA6MjMrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJlNjJiMWM2LWIxYzQtNDk0MC04MDMxLWU4ZDkyNTBmODJjNSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNVQxNjo0MDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDE3YWRkNzYtODk2ZS04ZTRlLWJjOTEtNGYxMjYyNWIwNzI4IiBzdEV2dDp3aGVuPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyZTYyYjFjNi1iMWM0LTQ5NDAtODAzMS1lOGQ5MjUwZjgyYzUiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2OWRmZjljYy01YzFiLWE5NDctOTc3OS03ODgxZjM0ODk3MDMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFu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",y})();o.LoadingScreen=T;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){o.M00=0,o.M01=4,o.M02=8,o.M03=12,o.M10=1,o.M11=5,o.M12=9,o.M13=13,o.M20=2,o.M21=6,o.M22=10,o.M23=14,o.M30=3,o.M31=7,o.M32=11,o.M33=15;var T=(function(){function y(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var a=this.values;a[o.M00]=1,a[o.M11]=1,a[o.M22]=1,a[o.M33]=1;}return y.prototype.set=function(a){return this.values.set(a),this},y.prototype.transpose=function(){var a=this.temp,f=this.values;return a[o.M00]=f[o.M00],a[o.M01]=f[o.M10],a[o.M02]=f[o.M20],a[o.M03]=f[o.M30],a[o.M10]=f[o.M01],a[o.M11]=f[o.M11],a[o.M12]=f[o.M21],a[o.M13]=f[o.M31],a[o.M20]=f[o.M02],a[o.M21]=f[o.M12],a[o.M22]=f[o.M22],a[o.M23]=f[o.M32],a[o.M30]=f[o.M03],a[o.M31]=f[o.M13],a[o.M32]=f[o.M23],a[o.M33]=f[o.M33],this.set(a)},y.prototype.identity=function(){var a=this.values;return a[o.M00]=1,a[o.M01]=0,a[o.M02]=0,a[o.M03]=0,a[o.M10]=0,a[o.M11]=1,a[o.M12]=0,a[o.M13]=0,a[o.M20]=0,a[o.M21]=0,a[o.M22]=1,a[o.M23]=0,a[o.M30]=0,a[o.M31]=0,a[o.M32]=0,a[o.M33]=1,this},y.prototype.invert=function(){var a=this.values,f=this.temp,u=a[o.M30]*a[o.M21]*a[o.M12]*a[o.M03]-a[o.M20]*a[o.M31]*a[o.M12]*a[o.M03]-a[o.M30]*a[o.M11]*a[o.M22]*a[o.M03]+a[o.M10]*a[o.M31]*a[o.M22]*a[o.M03]+a[o.M20]*a[o.M11]*a[o.M32]*a[o.M03]-a[o.M10]*a[o.M21]*a[o.M32]*a[o.M03]-a[o.M30]*a[o.M21]*a[o.M02]*a[o.M13]+a[o.M20]*a[o.M31]*a[o.M02]*a[o.M13]+a[o.M30]*a[o.M01]*a[o.M22]*a[o.M13]-a[o.M00]*a[o.M31]*a[o.M22]*a[o.M13]-a[o.M20]*a[o.M01]*a[o.M32]*a[o.M13]+a[o.M00]*a[o.M21]*a[o.M32]*a[o.M13]+a[o.M30]*a[o.M11]*a[o.M02]*a[o.M23]-a[o.M10]*a[o.M31]*a[o.M02]*a[o.M23]-a[o.M30]*a[o.M01]*a[o.M12]*a[o.M23]+a[o.M00]*a[o.M31]*a[o.M12]*a[o.M23]+a[o.M10]*a[o.M01]*a[o.M32]*a[o.M23]-a[o.M00]*a[o.M11]*a[o.M32]*a[o.M23]-a[o.M20]*a[o.M11]*a[o.M02]*a[o.M33]+a[o.M10]*a[o.M21]*a[o.M02]*a[o.M33]+a[o.M20]*a[o.M01]*a[o.M12]*a[o.M33]-a[o.M00]*a[o.M21]*a[o.M12]*a[o.M33]-a[o.M10]*a[o.M01]*a[o.M22]*a[o.M33]+a[o.M00]*a[o.M11]*a[o.M22]*a[o.M33];if(u==0)throw new Error("non-invertible matrix");var A=1/u;return f[o.M00]=a[o.M12]*a[o.M23]*a[o.M31]-a[o.M13]*a[o.M22]*a[o.M31]+a[o.M13]*a[o.M21]*a[o.M32]-a[o.M11]*a[o.M23]*a[o.M32]-a[o.M12]*a[o.M21]*a[o.M33]+a[o.M11]*a[o.M22]*a[o.M33],f[o.M01]=a[o.M03]*a[o.M22]*a[o.M31]-a[o.M02]*a[o.M23]*a[o.M31]-a[o.M03]*a[o.M21]*a[o.M32]+a[o.M01]*a[o.M23]*a[o.M32]+a[o.M02]*a[o.M21]*a[o.M33]-a[o.M01]*a[o.M22]*a[o.M33],f[o.M02]=a[o.M02]*a[o.M13]*a[o.M31]-a[o.M03]*a[o.M12]*a[o.M31]+a[o.M03]*a[o.M11]*a[o.M32]-a[o.M01]*a[o.M13]*a[o.M32]-a[o.M02]*a[o.M11]*a[o.M33]+a[o.M01]*a[o.M12]*a[o.M33],f[o.M03]=a[o.M03]*a[o.M12]*a[o.M21]-a[o.M02]*a[o.M13]*a[o.M21]-a[o.M03]*a[o.M11]*a[o.M22]+a[o.M01]*a[o.M13]*a[o.M22]+a[o.M02]*a[o.M11]*a[o.M23]-a[o.M01]*a[o.M12]*a[o.M23],f[o.M10]=a[o.M13]*a[o.M22]*a[o.M30]-a[o.M12]*a[o.M23]*a[o.M30]-a[o.M13]*a[o.M20]*a[o.M32]+a[o.M10]*a[o.M23]*a[o.M32]+a[o.M12]*a[o.M20]*a[o.M33]-a[o.M10]*a[o.M22]*a[o.M33],f[o.M11]=a[o.M02]*a[o.M23]*a[o.M30]-a[o.M03]*a[o.M22]*a[o.M30]+a[o.M03]*a[o.M20]*a[o.M32]-a[o.M00]*a[o.M23]*a[o.M32]-a[o.M02]*a[o.M20]*a[o.M33]+a[o.M00]*a[o.M22]*a[o.M33],f[o.M12]=a[o.M03]*a[o.M12]*a[o.M30]-a[o.M02]*a[o.M13]*a[o.M30]-a[o.M03]*a[o.M10]*a[o.M32]+a[o.M00]*a[o.M13]*a[o.M32]+a[o.M02]*a[o.M10]*a[o.M33]-a[o.M00]*a[o.M12]*a[o.M33],f[o.M13]=a[o.M02]*a[o.M13]*a[o.M20]-a[o.M03]*a[o.M12]*a[o.M20]+a[o.M03]*a[o.M10]*a[o.M22]-a[o.M00]*a[o.M13]*a[o.M22]-a[o.M02]*a[o.M10]*a[o.M23]+a[o.M00]*a[o.M12]*a[o.M23],f[o.M20]=a[o.M11]*a[o.M23]*a[o.M30]-a[o.M13]*a[o.M21]*a[o.M30]+a[o.M13]*a[o.M20]*a[o.M31]-a[o.M10]*a[o.M23]*a[o.M31]-a[o.M11]*a[o.M20]*a[o.M33]+a[o.M10]*a[o.M21]*a[o.M33],f[o.M21]=a[o.M03]*a[o.M21]*a[o.M30]-a[o.M01]*a[o.M23]*a[o.M30]-a[o.M03]*a[o.M20]*a[o.M31]+a[o.M00]*a[o.M23]*a[o.M31]+a[o.M01]*a[o.M20]*a[o.M33]-a[o.M00]*a[o.M21]*a[o.M33],f[o.M22]=a[o.M01]*a[o.M13]*a[o.M30]-a[o.M03]*a[o.M11]*a[o.M30]+a[o.M03]*a[o.M10]*a[o.M31]-a[o.M00]*a[o.M13]*a[o.M31]-a[o.M01]*a[o.M10]*a[o.M33]+a[o.M00]*a[o.M11]*a[o.M33],f[o.M23]=a[o.M03]*a[o.M11]*a[o.M20]-a[o.M01]*a[o.M13]*a[o.M20]-a[o.M03]*a[o.M10]*a[o.M21]+a[o.M00]*a[o.M13]*a[o.M21]+a[o.M01]*a[o.M10]*a[o.M23]-a[o.M00]*a[o.M11]*a[o.M23],f[o.M30]=a[o.M12]*a[o.M21]*a[o.M30]-a[o.M11]*a[o.M22]*a[o.M30]-a[o.M12]*a[o.M20]*a[o.M31]+a[o.M10]*a[o.M22]*a[o.M31]+a[o.M11]*a[o.M20]*a[o.M32]-a[o.M10]*a[o.M21]*a[o.M32],f[o.M31]=a[o.M01]*a[o.M22]*a[o.M30]-a[o.M02]*a[o.M21]*a[o.M30]+a[o.M02]*a[o.M20]*a[o.M31]-a[o.M00]*a[o.M22]*a[o.M31]-a[o.M01]*a[o.M20]*a[o.M32]+a[o.M00]*a[o.M21]*a[o.M32],f[o.M32]=a[o.M02]*a[o.M11]*a[o.M30]-a[o.M01]*a[o.M12]*a[o.M30]-a[o.M02]*a[o.M10]*a[o.M31]+a[o.M00]*a[o.M12]*a[o.M31]+a[o.M01]*a[o.M10]*a[o.M32]-a[o.M00]*a[o.M11]*a[o.M32],f[o.M33]=a[o.M01]*a[o.M12]*a[o.M20]-a[o.M02]*a[o.M11]*a[o.M20]+a[o.M02]*a[o.M10]*a[o.M21]-a[o.M00]*a[o.M12]*a[o.M21]-a[o.M01]*a[o.M10]*a[o.M22]+a[o.M00]*a[o.M11]*a[o.M22],a[o.M00]=f[o.M00]*A,a[o.M01]=f[o.M01]*A,a[o.M02]=f[o.M02]*A,a[o.M03]=f[o.M03]*A,a[o.M10]=f[o.M10]*A,a[o.M11]=f[o.M11]*A,a[o.M12]=f[o.M12]*A,a[o.M13]=f[o.M13]*A,a[o.M20]=f[o.M20]*A,a[o.M21]=f[o.M21]*A,a[o.M22]=f[o.M22]*A,a[o.M23]=f[o.M23]*A,a[o.M30]=f[o.M30]*A,a[o.M31]=f[o.M31]*A,a[o.M32]=f[o.M32]*A,a[o.M33]=f[o.M33]*A,this},y.prototype.determinant=function(){var a=this.values;return a[o.M30]*a[o.M21]*a[o.M12]*a[o.M03]-a[o.M20]*a[o.M31]*a[o.M12]*a[o.M03]-a[o.M30]*a[o.M11]*a[o.M22]*a[o.M03]+a[o.M10]*a[o.M31]*a[o.M22]*a[o.M03]+a[o.M20]*a[o.M11]*a[o.M32]*a[o.M03]-a[o.M10]*a[o.M21]*a[o.M32]*a[o.M03]-a[o.M30]*a[o.M21]*a[o.M02]*a[o.M13]+a[o.M20]*a[o.M31]*a[o.M02]*a[o.M13]+a[o.M30]*a[o.M01]*a[o.M22]*a[o.M13]-a[o.M00]*a[o.M31]*a[o.M22]*a[o.M13]-a[o.M20]*a[o.M01]*a[o.M32]*a[o.M13]+a[o.M00]*a[o.M21]*a[o.M32]*a[o.M13]+a[o.M30]*a[o.M11]*a[o.M02]*a[o.M23]-a[o.M10]*a[o.M31]*a[o.M02]*a[o.M23]-a[o.M30]*a[o.M01]*a[o.M12]*a[o.M23]+a[o.M00]*a[o.M31]*a[o.M12]*a[o.M23]+a[o.M10]*a[o.M01]*a[o.M32]*a[o.M23]-a[o.M00]*a[o.M11]*a[o.M32]*a[o.M23]-a[o.M20]*a[o.M11]*a[o.M02]*a[o.M33]+a[o.M10]*a[o.M21]*a[o.M02]*a[o.M33]+a[o.M20]*a[o.M01]*a[o.M12]*a[o.M33]-a[o.M00]*a[o.M21]*a[o.M12]*a[o.M33]-a[o.M10]*a[o.M01]*a[o.M22]*a[o.M33]+a[o.M00]*a[o.M11]*a[o.M22]*a[o.M33]},y.prototype.translate=function(a,f,u){var A=this.values;return A[o.M03]+=a,A[o.M13]+=f,A[o.M23]+=u,this},y.prototype.copy=function(){return new y().set(this.values)},y.prototype.projection=function(a,f,u,A){this.identity();var S=1/Math.tan(u*(Math.PI/180)/2),O=(f+a)/(a-f),I=2*f*a/(a-f),U=this.values;return U[o.M00]=S/A,U[o.M10]=0,U[o.M20]=0,U[o.M30]=0,U[o.M01]=0,U[o.M11]=S,U[o.M21]=0,U[o.M31]=0,U[o.M02]=0,U[o.M12]=0,U[o.M22]=O,U[o.M32]=-1,U[o.M03]=0,U[o.M13]=0,U[o.M23]=I,U[o.M33]=0,this},y.prototype.ortho2d=function(a,f,u,A){return this.ortho(a,a+u,f,f+A,0,1)},y.prototype.ortho=function(a,f,u,A,S,O){this.identity();var I=2/(f-a),U=2/(A-u),L=-2/(O-S),R=-(f+a)/(f-a),D=-(A+u)/(A-u),q=-(O+S)/(O-S),$=this.values;return $[o.M00]=I,$[o.M10]=0,$[o.M20]=0,$[o.M30]=0,$[o.M01]=0,$[o.M11]=U,$[o.M21]=0,$[o.M31]=0,$[o.M02]=0,$[o.M12]=0,$[o.M22]=L,$[o.M32]=0,$[o.M03]=R,$[o.M13]=D,$[o.M23]=q,$[o.M33]=1,this},y.prototype.multiply=function(a){var f=this.temp,u=this.values,A=a.values;return f[o.M00]=u[o.M00]*A[o.M00]+u[o.M01]*A[o.M10]+u[o.M02]*A[o.M20]+u[o.M03]*A[o.M30],f[o.M01]=u[o.M00]*A[o.M01]+u[o.M01]*A[o.M11]+u[o.M02]*A[o.M21]+u[o.M03]*A[o.M31],f[o.M02]=u[o.M00]*A[o.M02]+u[o.M01]*A[o.M12]+u[o.M02]*A[o.M22]+u[o.M03]*A[o.M32],f[o.M03]=u[o.M00]*A[o.M03]+u[o.M01]*A[o.M13]+u[o.M02]*A[o.M23]+u[o.M03]*A[o.M33],f[o.M10]=u[o.M10]*A[o.M00]+u[o.M11]*A[o.M10]+u[o.M12]*A[o.M20]+u[o.M13]*A[o.M30],f[o.M11]=u[o.M10]*A[o.M01]+u[o.M11]*A[o.M11]+u[o.M12]*A[o.M21]+u[o.M13]*A[o.M31],f[o.M12]=u[o.M10]*A[o.M02]+u[o.M11]*A[o.M12]+u[o.M12]*A[o.M22]+u[o.M13]*A[o.M32],f[o.M13]=u[o.M10]*A[o.M03]+u[o.M11]*A[o.M13]+u[o.M12]*A[o.M23]+u[o.M13]*A[o.M33],f[o.M20]=u[o.M20]*A[o.M00]+u[o.M21]*A[o.M10]+u[o.M22]*A[o.M20]+u[o.M23]*A[o.M30],f[o.M21]=u[o.M20]*A[o.M01]+u[o.M21]*A[o.M11]+u[o.M22]*A[o.M21]+u[o.M23]*A[o.M31],f[o.M22]=u[o.M20]*A[o.M02]+u[o.M21]*A[o.M12]+u[o.M22]*A[o.M22]+u[o.M23]*A[o.M32],f[o.M23]=u[o.M20]*A[o.M03]+u[o.M21]*A[o.M13]+u[o.M22]*A[o.M23]+u[o.M23]*A[o.M33],f[o.M30]=u[o.M30]*A[o.M00]+u[o.M31]*A[o.M10]+u[o.M32]*A[o.M20]+u[o.M33]*A[o.M30],f[o.M31]=u[o.M30]*A[o.M01]+u[o.M31]*A[o.M11]+u[o.M32]*A[o.M21]+u[o.M33]*A[o.M31],f[o.M32]=u[o.M30]*A[o.M02]+u[o.M31]*A[o.M12]+u[o.M32]*A[o.M22]+u[o.M33]*A[o.M32],f[o.M33]=u[o.M30]*A[o.M03]+u[o.M31]*A[o.M13]+u[o.M32]*A[o.M23]+u[o.M33]*A[o.M33],this.set(this.temp)},y.prototype.multiplyLeft=function(a){var f=this.temp,u=this.values,A=a.values;return f[o.M00]=A[o.M00]*u[o.M00]+A[o.M01]*u[o.M10]+A[o.M02]*u[o.M20]+A[o.M03]*u[o.M30],f[o.M01]=A[o.M00]*u[o.M01]+A[o.M01]*u[o.M11]+A[o.M02]*u[o.M21]+A[o.M03]*u[o.M31],f[o.M02]=A[o.M00]*u[o.M02]+A[o.M01]*u[o.M12]+A[o.M02]*u[o.M22]+A[o.M03]*u[o.M32],f[o.M03]=A[o.M00]*u[o.M03]+A[o.M01]*u[o.M13]+A[o.M02]*u[o.M23]+A[o.M03]*u[o.M33],f[o.M10]=A[o.M10]*u[o.M00]+A[o.M11]*u[o.M10]+A[o.M12]*u[o.M20]+A[o.M13]*u[o.M30],f[o.M11]=A[o.M10]*u[o.M01]+A[o.M11]*u[o.M11]+A[o.M12]*u[o.M21]+A[o.M13]*u[o.M31],f[o.M12]=A[o.M10]*u[o.M02]+A[o.M11]*u[o.M12]+A[o.M12]*u[o.M22]+A[o.M13]*u[o.M32],f[o.M13]=A[o.M10]*u[o.M03]+A[o.M11]*u[o.M13]+A[o.M12]*u[o.M23]+A[o.M13]*u[o.M33],f[o.M20]=A[o.M20]*u[o.M00]+A[o.M21]*u[o.M10]+A[o.M22]*u[o.M20]+A[o.M23]*u[o.M30],f[o.M21]=A[o.M20]*u[o.M01]+A[o.M21]*u[o.M11]+A[o.M22]*u[o.M21]+A[o.M23]*u[o.M31],f[o.M22]=A[o.M20]*u[o.M02]+A[o.M21]*u[o.M12]+A[o.M22]*u[o.M22]+A[o.M23]*u[o.M32],f[o.M23]=A[o.M20]*u[o.M03]+A[o.M21]*u[o.M13]+A[o.M22]*u[o.M23]+A[o.M23]*u[o.M33],f[o.M30]=A[o.M30]*u[o.M00]+A[o.M31]*u[o.M10]+A[o.M32]*u[o.M20]+A[o.M33]*u[o.M30],f[o.M31]=A[o.M30]*u[o.M01]+A[o.M31]*u[o.M11]+A[o.M32]*u[o.M21]+A[o.M33]*u[o.M31],f[o.M32]=A[o.M30]*u[o.M02]+A[o.M31]*u[o.M12]+A[o.M32]*u[o.M22]+A[o.M33]*u[o.M32],f[o.M33]=A[o.M30]*u[o.M03]+A[o.M31]*u[o.M13]+A[o.M32]*u[o.M23]+A[o.M33]*u[o.M33],this.set(this.temp)},y.prototype.lookAt=function(a,f,u){y.initTemps();var A=y.xAxis,S=y.yAxis,O=y.zAxis;O.setFrom(f).normalize(),A.setFrom(f).normalize(),A.cross(u).normalize(),S.setFrom(A).cross(O).normalize(),this.identity();var I=this.values;return I[o.M00]=A.x,I[o.M01]=A.y,I[o.M02]=A.z,I[o.M10]=S.x,I[o.M11]=S.y,I[o.M12]=S.z,I[o.M20]=-O.x,I[o.M21]=-O.y,I[o.M22]=-O.z,y.tmpMatrix.identity(),y.tmpMatrix.values[o.M03]=-a.x,y.tmpMatrix.values[o.M13]=-a.y,y.tmpMatrix.values[o.M23]=-a.z,this.multiply(y.tmpMatrix),this},y.initTemps=function(){y.xAxis===null&&(y.xAxis=new o.Vector3),y.yAxis===null&&(y.yAxis=new o.Vector3),y.zAxis===null&&(y.zAxis=new o.Vector3);},y.xAxis=null,y.yAxis=null,y.zAxis=null,y.tmpMatrix=new y,y})();o.Matrix4=T;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function I(U,L,R,D){this.attributes=L,this.verticesLength=0,this.dirtyVertices=false,this.indicesLength=0,this.dirtyIndices=false,this.elementsPerVertex=0,this.context=U instanceof o.ManagedWebGLRenderingContext?U:new o.ManagedWebGLRenderingContext(U),this.elementsPerVertex=0;for(var q=0;q<L.length;q++)this.elementsPerVertex+=L[q].numElements;this.vertices=new Float32Array(R*this.elementsPerVertex),this.indices=new Uint16Array(D),this.context.addRestorable(this);}return I.prototype.getAttributes=function(){return this.attributes},I.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},I.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},I.prototype.setVerticesLength=function(U){this.dirtyVertices=true,this.verticesLength=U;},I.prototype.getVertices=function(){return this.vertices},I.prototype.maxIndices=function(){return this.indices.length},I.prototype.numIndices=function(){return this.indicesLength},I.prototype.setIndicesLength=function(U){this.dirtyIndices=true,this.indicesLength=U;},I.prototype.getIndices=function(){return this.indices},I.prototype.getVertexSizeInFloats=function(){for(var U=0,L=0;L<this.attributes.length;L++){U+=this.attributes[L].numElements;}return U},I.prototype.setVertices=function(U){if(this.dirtyVertices=true,U.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(U,0),this.verticesLength=U.length;},I.prototype.setIndices=function(U){if(this.dirtyIndices=true,U.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(U,0),this.indicesLength=U.length;},I.prototype.draw=function(U,L){this.drawWithOffset(U,L,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex);},I.prototype.drawWithOffset=function(U,L,R,D){var q=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(U),this.indicesLength>0?q.drawElements(L,D,q.UNSIGNED_SHORT,2*R):q.drawArrays(L,R,D),this.unbind(U);},I.prototype.bind=function(U){var L=this.context.gl;L.bindBuffer(L.ARRAY_BUFFER,this.verticesBuffer);for(var R=0,D=0;D<this.attributes.length;D++){var q=this.attributes[D],$=U.getAttributeLocation(q.name);L.enableVertexAttribArray($),L.vertexAttribPointer($,q.numElements,L.FLOAT,false,4*this.elementsPerVertex,4*R),R+=q.numElements;}this.indicesLength>0&&L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);},I.prototype.unbind=function(U){for(var L=this.context.gl,R=0;R<this.attributes.length;R++){var D=this.attributes[R],q=U.getAttributeLocation(D.name);L.disableVertexAttribArray(q);}L.bindBuffer(L.ARRAY_BUFFER,null),this.indicesLength>0&&L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,null);},I.prototype.update=function(){var U=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=U.createBuffer()),U.bindBuffer(U.ARRAY_BUFFER,this.verticesBuffer),U.bufferData(U.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),U.DYNAMIC_DRAW),this.dirtyVertices=false),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=U.createBuffer()),U.bindBuffer(U.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),U.bufferData(U.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),U.DYNAMIC_DRAW),this.dirtyIndices=false);},I.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update();},I.prototype.dispose=function(){this.context.removeRestorable(this);var U=this.context.gl;U.deleteBuffer(this.verticesBuffer),U.deleteBuffer(this.indicesBuffer);},I})();o.Mesh=T;var y=(function(){function I(U,L,R){this.name=U,this.type=L,this.numElements=R;}return I})();o.VertexAttribute=y;var a=(function(I){function U(){return I.call(this,o.Shader.POSITION,O.Float,2)||this}return Ve(U,I),U})(y);o.Position2Attribute=a;var f=(function(I){function U(){return I.call(this,o.Shader.POSITION,O.Float,3)||this}return Ve(U,I),U})(y);o.Position3Attribute=f;var u=(function(I){function U(L){return L===void 0&&(L=0),I.call(this,o.Shader.TEXCOORDS+(L==0?"":L),O.Float,2)||this}return Ve(U,I),U})(y);o.TexCoordAttribute=u;var A=(function(I){function U(){return I.call(this,o.Shader.COLOR,O.Float,4)||this}return Ve(U,I),U})(y);o.ColorAttribute=A;var S=(function(I){function U(){return I.call(this,o.Shader.COLOR2,O.Float,4)||this}return Ve(U,I),U})(y),O;o.Color2Attribute=S,(function(I){I[I.Float=0]="Float";})(O=o.VertexAttributeType||(o.VertexAttributeType={}));})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function y(a,f,u){if(f===void 0&&(f=true),u===void 0&&(u=10920),this.isDrawing=false,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,u>10920)throw new Error("Can't have more than 10920 triangles per batch: "+u);this.context=a instanceof o.ManagedWebGLRenderingContext?a:new o.ManagedWebGLRenderingContext(a);var A=f?[new o.Position2Attribute,new o.ColorAttribute,new o.TexCoordAttribute,new o.Color2Attribute]:[new o.Position2Attribute,new o.ColorAttribute,new o.TexCoordAttribute];this.mesh=new o.Mesh(a,A,u,3*u),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA;}return y.prototype.begin=function(a){var f=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=a,this.lastTexture=null,this.isDrawing=true,f.enable(f.BLEND),f.blendFunc(this.srcBlend,this.dstBlend);},y.prototype.setBlendMode=function(a,f){var u=this.context.gl;this.srcBlend=a,this.dstBlend=f,this.isDrawing&&(this.flush(),u.blendFunc(this.srcBlend,this.dstBlend));},y.prototype.draw=function(a,f,u){a!=this.lastTexture?(this.flush(),this.lastTexture=a):(this.verticesLength+f.length>this.mesh.getVertices().length||this.indicesLength+u.length>this.mesh.getIndices().length)&&this.flush();var A=this.mesh.numVertices();this.mesh.getVertices().set(f,this.verticesLength),this.verticesLength+=f.length,this.mesh.setVerticesLength(this.verticesLength);for(var S=this.mesh.getIndices(),O=this.indicesLength,I=0;I<u.length;O++,I++)S[O]=u[I]+A;this.indicesLength+=u.length,this.mesh.setIndicesLength(this.indicesLength);},y.prototype.flush=function(){var a=this.context.gl;this.verticesLength!=0&&(this.lastTexture.bind(),this.mesh.draw(this.shader,a.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++);},y.prototype.end=function(){var a=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=false,a.disable(a.BLEND);},y.prototype.getDrawCalls=function(){return this.drawCalls},y.prototype.dispose=function(){this.mesh.dispose();},y})();o.PolygonBatcher=T;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function a(f,u,A){A===void 0&&(A=true),this.twoColorTint=false,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new Y.Color(1,1,1,1),this.canvas=f,this.context=u instanceof o.ManagedWebGLRenderingContext?u:new o.ManagedWebGLRenderingContext(u),this.twoColorTint=A,this.camera=new o.OrthoCamera(f.width,f.height),this.batcherShader=A?o.Shader.newTwoColoredTextured(this.context):o.Shader.newColoredTextured(this.context),this.batcher=new o.PolygonBatcher(this.context,A),this.shapesShader=o.Shader.newColored(this.context),this.shapes=new o.ShapeRenderer(this.context),this.skeletonRenderer=new o.SkeletonRenderer(this.context,A),this.skeletonDebugRenderer=new o.SkeletonDebugRenderer(this.context);}return a.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher);},a.prototype.drawSkeleton=function(f,u,A,S){u===void 0&&(u=false),A===void 0&&(A=-1),S===void 0&&(S=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=u,this.skeletonRenderer.draw(this.batcher,Skeleton,A,S);},a.prototype.drawSkeletonDebug=function(f,u,A){u===void 0&&(u=false),A===void 0&&(A=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=u,this.skeletonDebugRenderer.draw(this.shapes,Skeleton,A);},a.prototype.drawTexture=function(f,u,A,S,O,I){I===void 0&&(I=null),this.enableRenderer(this.batcher),I===null&&(I=this.WHITE);var U=this.QUAD,L=0;U[L++]=u,U[L++]=A,U[L++]=I.r,U[L++]=I.g,U[L++]=I.b,U[L++]=I.a,U[L++]=0,U[L++]=1,this.twoColorTint&&(U[L++]=0,U[L++]=0,U[L++]=0,U[L++]=0),U[L++]=u+S,U[L++]=A,U[L++]=I.r,U[L++]=I.g,U[L++]=I.b,U[L++]=I.a,U[L++]=1,U[L++]=1,this.twoColorTint&&(U[L++]=0,U[L++]=0,U[L++]=0,U[L++]=0),U[L++]=u+S,U[L++]=A+O,U[L++]=I.r,U[L++]=I.g,U[L++]=I.b,U[L++]=I.a,U[L++]=1,U[L++]=0,this.twoColorTint&&(U[L++]=0,U[L++]=0,U[L++]=0,U[L++]=0),U[L++]=u,U[L++]=A+O,U[L++]=I.r,U[L++]=I.g,U[L++]=I.b,U[L++]=I.a,U[L++]=0,U[L++]=0,this.twoColorTint&&(U[L++]=0,U[L++]=0,U[L++]=0,U[L++]=0),this.batcher.draw(f,U,this.QUAD_TRIANGLES);},a.prototype.drawTextureUV=function(f,u,A,S,O,I,U,L,R,D){D===void 0&&(D=null),this.enableRenderer(this.batcher),D===null&&(D=this.WHITE);var q=this.QUAD,$=0;q[$++]=u,q[$++]=A,q[$++]=D.r,q[$++]=D.g,q[$++]=D.b,q[$++]=D.a,q[$++]=I,q[$++]=U,this.twoColorTint&&(q[$++]=0,q[$++]=0,q[$++]=0,q[$++]=0),q[$++]=u+S,q[$++]=A,q[$++]=D.r,q[$++]=D.g,q[$++]=D.b,q[$++]=D.a,q[$++]=L,q[$++]=U,this.twoColorTint&&(q[$++]=0,q[$++]=0,q[$++]=0,q[$++]=0),q[$++]=u+S,q[$++]=A+O,q[$++]=D.r,q[$++]=D.g,q[$++]=D.b,q[$++]=D.a,q[$++]=L,q[$++]=R,this.twoColorTint&&(q[$++]=0,q[$++]=0,q[$++]=0,q[$++]=0),q[$++]=u,q[$++]=A+O,q[$++]=D.r,q[$++]=D.g,q[$++]=D.b,q[$++]=D.a,q[$++]=I,q[$++]=R,this.twoColorTint&&(q[$++]=0,q[$++]=0,q[$++]=0,q[$++]=0),this.batcher.draw(f,q,this.QUAD_TRIANGLES);},a.prototype.drawTextureRotated=function(f,u,A,S,O,I,U,L,R,D){R===void 0&&(R=null),this.enableRenderer(this.batcher),R===null&&(R=this.WHITE);var q=this.QUAD,$=u+I,it=A+U,vt=-I,ct=-U,ut=S-I,st=O-U,G=vt,et=ct,dt=vt,rt=st,It=ut,ht=st,ft=ut,kt=ct,at=0,Q=0,ot=0,Mt=0,yt=0,Bt=0,Dt=0,Lt=0;if(L!=0){var Vt=Y.MathUtils.cosDeg(L),Gt=Y.MathUtils.sinDeg(L);ot=(yt=Vt*It-Gt*ht)+((at=Vt*G-Gt*et)-(Dt=Vt*dt-Gt*rt)),Mt=(Bt=Gt*It+Vt*ht)+((Q=Gt*G+Vt*et)-(Lt=Gt*dt+Vt*rt));}else at=G,Q=et,Dt=dt,Lt=rt,yt=It,Bt=ht,ot=ft,Mt=kt;at+=$,Q+=it,ot+=$,Mt+=it,yt+=$,Bt+=it,Dt+=$,Lt+=it;var Ft=0;q[Ft++]=at,q[Ft++]=Q,q[Ft++]=R.r,q[Ft++]=R.g,q[Ft++]=R.b,q[Ft++]=R.a,q[Ft++]=0,q[Ft++]=1,this.twoColorTint&&(q[Ft++]=0,q[Ft++]=0,q[Ft++]=0,q[Ft++]=0),q[Ft++]=ot,q[Ft++]=Mt,q[Ft++]=R.r,q[Ft++]=R.g,q[Ft++]=R.b,q[Ft++]=R.a,q[Ft++]=1,q[Ft++]=1,this.twoColorTint&&(q[Ft++]=0,q[Ft++]=0,q[Ft++]=0,q[Ft++]=0),q[Ft++]=yt,q[Ft++]=Bt,q[Ft++]=R.r,q[Ft++]=R.g,q[Ft++]=R.b,q[Ft++]=R.a,q[Ft++]=1,q[Ft++]=0,this.twoColorTint&&(q[Ft++]=0,q[Ft++]=0,q[Ft++]=0,q[Ft++]=0),q[Ft++]=Dt,q[Ft++]=Lt,q[Ft++]=R.r,q[Ft++]=R.g,q[Ft++]=R.b,q[Ft++]=R.a,q[Ft++]=0,q[Ft++]=0,this.twoColorTint&&(q[Ft++]=0,q[Ft++]=0,q[Ft++]=0,q[Ft++]=0),this.batcher.draw(f,q,this.QUAD_TRIANGLES);},a.prototype.drawRegion=function(f,u,A,S,O,I,U){I===void 0&&(I=null),this.enableRenderer(this.batcher),I===null&&(I=this.WHITE);var L=this.QUAD,R=0;L[R++]=u,L[R++]=A,L[R++]=I.r,L[R++]=I.g,L[R++]=I.b,L[R++]=I.a,L[R++]=f.u,L[R++]=f.v2,this.twoColorTint&&(L[R++]=0,L[R++]=0,L[R++]=0,L[R++]=0),L[R++]=u+S,L[R++]=A,L[R++]=I.r,L[R++]=I.g,L[R++]=I.b,L[R++]=I.a,L[R++]=f.u2,L[R++]=f.v2,this.twoColorTint&&(L[R++]=0,L[R++]=0,L[R++]=0,L[R++]=0),L[R++]=u+S,L[R++]=A+O,L[R++]=I.r,L[R++]=I.g,L[R++]=I.b,L[R++]=I.a,L[R++]=f.u2,L[R++]=f.v,this.twoColorTint&&(L[R++]=0,L[R++]=0,L[R++]=0,L[R++]=0),L[R++]=u,L[R++]=A+O,L[R++]=I.r,L[R++]=I.g,L[R++]=I.b,L[R++]=I.a,L[R++]=f.u,L[R++]=f.v,this.twoColorTint&&(L[R++]=0,L[R++]=0,L[R++]=0,L[R++]=0),this.batcher.draw(f.texture,L,this.QUAD_TRIANGLES);},a.prototype.line=function(f,u,A,S,O,I){O===void 0&&(O=null),this.enableRenderer(this.shapes),this.shapes.line(f,u,A,S,O);},a.prototype.triangle=function(f,u,A,S,O,I,U,L,R,D){L===void 0&&(L=null),R===void 0&&(R=null),D===void 0&&(D=null),this.enableRenderer(this.shapes),this.shapes.triangle(f,u,A,S,O,I,U,L,R,D);},a.prototype.quad=function(f,u,A,S,O,I,U,L,R,D,q,$,it){D===void 0&&(D=null),q===void 0&&(q=null),$===void 0&&($=null),it===void 0&&(it=null),this.enableRenderer(this.shapes),this.shapes.quad(f,u,A,S,O,I,U,L,R,D,q,$,it);},a.prototype.rect=function(f,u,A,S,O,I){I===void 0&&(I=null),this.enableRenderer(this.shapes),this.shapes.rect(f,u,A,S,O,I);},a.prototype.rectLine=function(f,u,A,S,O,I,U){U===void 0&&(U=null),this.enableRenderer(this.shapes),this.shapes.rectLine(f,u,A,S,O,I,U);},a.prototype.polygon=function(f,u,A,S){S===void 0&&(S=null),this.enableRenderer(this.shapes),this.shapes.polygon(f,u,A,S);},a.prototype.circle=function(f,u,A,S,O,I){O===void 0&&(O=null),I===void 0&&(I=0),this.enableRenderer(this.shapes),this.shapes.circle(f,u,A,S,O,I);},a.prototype.curve=function(f,u,A,S,O,I,U,L,R,D){D===void 0&&(D=null),this.enableRenderer(this.shapes),this.shapes.curve(f,u,A,S,O,I,U,L,R,D);},a.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null;},a.prototype.resize=function(f){var u=this.canvas,A=u.clientWidth,S=u.clientHeight;if(u.width==A&&u.height==S||(u.width=A,u.height=S),this.context.gl.viewport(0,0,u.width,u.height),f!==y.Stretch){if(f===y.Expand)this.camera.setViewport(A,S);else if(f===y.Fit){var O=u.width,I=u.height,U=this.camera.viewportWidth,L=this.camera.viewportHeight,q=L/U<I/O?U/O:L/I;this.camera.viewportWidth=O*q,this.camera.viewportHeight=I*q;}}this.camera.update();},a.prototype.enableRenderer=function(f){this.activeRenderer!==f&&(this.end(),f instanceof o.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(o.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):f instanceof o.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(o.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer);},a.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose();},a})(),y;o.SceneRenderer=T,(function(a){a[a.Stretch=0]="Stretch",a[a.Expand=1]="Expand",a[a.Fit=2]="Fit";})(y=o.ResizeMode||(o.ResizeMode={}));})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function y(a,f,u){this.vertexShader=f,this.fragmentShader=u,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=f,this.fsSource=u,this.context=a instanceof o.ManagedWebGLRenderingContext?a:new o.ManagedWebGLRenderingContext(a),this.context.addRestorable(this),this.compile();}return y.prototype.getProgram=function(){return this.program},y.prototype.getVertexShader=function(){return this.vertexShader},y.prototype.getFragmentShader=function(){return this.fragmentShader},y.prototype.getVertexShaderSource=function(){return this.vsSource},y.prototype.getFragmentSource=function(){return this.fsSource},y.prototype.compile=function(){var a=this.context.gl;try{this.vs=this.compileShader(a.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(a.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs);}catch(f){throw this.dispose(),f}},y.prototype.compileShader=function(a,f){var u=this.context.gl,A=u.createShader(a);if(u.shaderSource(A,f),u.compileShader(A),!u.getShaderParameter(A,u.COMPILE_STATUS)){var S="Couldn't compile shader: "+u.getShaderInfoLog(A);if(u.deleteShader(A),!u.isContextLost())throw new Error(S)}return A},y.prototype.compileProgram=function(a,f){var u=this.context.gl,A=u.createProgram();if(u.attachShader(A,a),u.attachShader(A,f),u.linkProgram(A),!u.getProgramParameter(A,u.LINK_STATUS)){var S="Couldn't compile shader program: "+u.getProgramInfoLog(A);if(u.deleteProgram(A),!u.isContextLost())throw new Error(S)}return A},y.prototype.restore=function(){this.compile();},y.prototype.bind=function(){this.context.gl.useProgram(this.program);},y.prototype.unbind=function(){this.context.gl.useProgram(null);},y.prototype.setUniformi=function(a,f){this.context.gl.uniform1i(this.getUniformLocation(a),f);},y.prototype.setUniformf=function(a,f){this.context.gl.uniform1f(this.getUniformLocation(a),f);},y.prototype.setUniform2f=function(a,f,u){this.context.gl.uniform2f(this.getUniformLocation(a),f,u);},y.prototype.setUniform3f=function(a,f,u,A){this.context.gl.uniform3f(this.getUniformLocation(a),f,u,A);},y.prototype.setUniform4f=function(a,f,u,A,S){this.context.gl.uniform4f(this.getUniformLocation(a),f,u,A,S);},y.prototype.setUniform2x2f=function(a,f){var u=this.context.gl;this.tmp2x2.set(f),u.uniformMatrix2fv(this.getUniformLocation(a),false,this.tmp2x2);},y.prototype.setUniform3x3f=function(a,f){var u=this.context.gl;this.tmp3x3.set(f),u.uniformMatrix3fv(this.getUniformLocation(a),false,this.tmp3x3);},y.prototype.setUniform4x4f=function(a,f){var u=this.context.gl;this.tmp4x4.set(f),u.uniformMatrix4fv(this.getUniformLocation(a),false,this.tmp4x4);},y.prototype.getUniformLocation=function(a){var f=this.context.gl,u=f.getUniformLocation(this.program,a);if(!u&&!f.isContextLost())throw new Error("Couldn't find location for uniform "+a);return u},y.prototype.getAttributeLocation=function(a){var f=this.context.gl,u=f.getAttribLocation(this.program,a);if(u==-1&&!f.isContextLost())throw new Error("Couldn't find location for attribute "+a);return u},y.prototype.dispose=function(){this.context.removeRestorable(this);var a=this.context.gl;this.vs&&(a.deleteShader(this.vs),this.vs=null),this.fs&&(a.deleteShader(this.fs),this.fs=null),this.program&&(a.deleteProgram(this.program),this.program=null);},y.newColoredTextured=function(a){return new y(a,`
				attribute vec4 `+y.POSITION+`;
				attribute vec4 `+y.COLOR+`;
				attribute vec2 `+y.TEXCOORDS+`;
				uniform mat4 `+y.MVP_MATRIX+`;
				varying vec4 v_color;
				varying vec2 v_texCoords;

				void main () {
					v_color = `+y.COLOR+`;
					v_texCoords = `+y.TEXCOORDS+`;
					gl_Position = `+y.MVP_MATRIX+" * "+y.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
				}
			`)},y.newTwoColoredTextured=function(a){return new y(a,`
				attribute vec4 `+y.POSITION+`;
				attribute vec4 `+y.COLOR+`;
				attribute vec4 `+y.COLOR2+`;
				attribute vec2 `+y.TEXCOORDS+`;
				uniform mat4 `+y.MVP_MATRIX+`;
				varying vec4 v_light;
				varying vec4 v_dark;
				varying vec2 v_texCoords;

				void main () {
					v_light = `+y.COLOR+`;
					v_dark = `+y.COLOR2+`;
					v_texCoords = `+y.TEXCOORDS+`;
					gl_Position = `+y.MVP_MATRIX+" * "+y.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_light;
				varying LOWP vec4 v_dark;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					vec4 texColor = texture2D(u_texture, v_texCoords);
					gl_FragColor.a = texColor.a * v_light.a;
					gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
				}
			`)},y.newColored=function(a){return new y(a,`
				attribute vec4 `+y.POSITION+`;
				attribute vec4 `+y.COLOR+`;
				uniform mat4 `+y.MVP_MATRIX+`;
				varying vec4 v_color;

				void main () {
					v_color = `+y.COLOR+`;
					gl_Position = `+y.MVP_MATRIX+" * "+y.POSITION+`;
				}
			`,`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;

				void main () {
					gl_FragColor = v_color;
				}
			`)},y.MVP_MATRIX="u_projTrans",y.POSITION="a_position",y.COLOR="a_color",y.COLOR2="a_color2",y.TEXCOORDS="a_texCoords",y.SAMPLER="u_texture",y})();o.Shader=T;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function a(f,u){if(u===void 0&&(u=10920),this.isDrawing=false,this.shapeType=y.Filled,this.color=new Y.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new Y.Vector2,u>10920)throw new Error("Can't have more than 10920 triangles per batch: "+u);this.context=f instanceof o.ManagedWebGLRenderingContext?f:new o.ManagedWebGLRenderingContext(f),this.mesh=new o.Mesh(f,[new o.Position2Attribute,new o.ColorAttribute],u,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA;}return a.prototype.begin=function(f){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=f,this.vertexIndex=0,this.isDrawing=true;var u=this.context.gl;u.enable(u.BLEND),u.blendFunc(this.srcBlend,this.dstBlend);},a.prototype.setBlendMode=function(f,u){var A=this.context.gl;this.srcBlend=f,this.dstBlend=u,this.isDrawing&&(this.flush(),A.blendFunc(this.srcBlend,this.dstBlend));},a.prototype.setColor=function(f){this.color.setFromColor(f);},a.prototype.setColorWith=function(f,u,A,S){this.color.set(f,u,A,S);},a.prototype.point=function(f,u,A){A===void 0&&(A=null),this.check(y.Point,1),A===null&&(A=this.color),this.vertex(f,u,A);},a.prototype.line=function(f,u,A,S,O){O===void 0&&(O=null),this.check(y.Line,2);this.mesh.getVertices();this.vertexIndex;O===null&&(O=this.color),this.vertex(f,u,O),this.vertex(A,S,O);},a.prototype.triangle=function(f,u,A,S,O,I,U,L,R,D){L===void 0&&(L=null),R===void 0&&(R=null),D===void 0&&(D=null),this.check(f?y.Filled:y.Line,3);this.mesh.getVertices();this.vertexIndex;L===null&&(L=this.color),R===null&&(R=this.color),D===null&&(D=this.color),f?(this.vertex(u,A,L),this.vertex(S,O,R),this.vertex(I,U,D)):(this.vertex(u,A,L),this.vertex(S,O,R),this.vertex(S,O,L),this.vertex(I,U,R),this.vertex(I,U,L),this.vertex(u,A,R));},a.prototype.quad=function(f,u,A,S,O,I,U,L,R,D,q,$,it){D===void 0&&(D=null),q===void 0&&(q=null),$===void 0&&($=null),it===void 0&&(it=null),this.check(f?y.Filled:y.Line,3);this.mesh.getVertices();this.vertexIndex;D===null&&(D=this.color),q===null&&(q=this.color),$===null&&($=this.color),it===null&&(it=this.color),f?(this.vertex(u,A,D),this.vertex(S,O,q),this.vertex(I,U,$),this.vertex(I,U,$),this.vertex(L,R,it),this.vertex(u,A,D)):(this.vertex(u,A,D),this.vertex(S,O,q),this.vertex(S,O,q),this.vertex(I,U,$),this.vertex(I,U,$),this.vertex(L,R,it),this.vertex(L,R,it),this.vertex(u,A,D));},a.prototype.rect=function(f,u,A,S,O,I){I===void 0&&(I=null),this.quad(f,u,A,u+S,A,u+S,A+O,u,A+O,I,I,I,I);},a.prototype.rectLine=function(f,u,A,S,O,I,U){U===void 0&&(U=null),this.check(f?y.Filled:y.Line,8),U===null&&(U=this.color);var L=this.tmp.set(O-A,u-S);L.normalize(),I*=.5;var R=L.x*I,D=L.y*I;f?(this.vertex(u+R,A+D,U),this.vertex(u-R,A-D,U),this.vertex(S+R,O+D,U),this.vertex(S-R,O-D,U),this.vertex(S+R,O+D,U),this.vertex(u-R,A-D,U)):(this.vertex(u+R,A+D,U),this.vertex(u-R,A-D,U),this.vertex(S+R,O+D,U),this.vertex(S-R,O-D,U),this.vertex(S+R,O+D,U),this.vertex(u+R,A+D,U),this.vertex(S-R,O-D,U),this.vertex(u-R,A-D,U));},a.prototype.x=function(f,u,A){this.line(f-A,u-A,f+A,u+A),this.line(f-A,u+A,f+A,u-A);},a.prototype.polygon=function(f,u,A,S){if(S===void 0&&(S=null),A<3)throw new Error("Polygon must contain at least 3 vertices");this.check(y.Line,2*A),S===null&&(S=this.color);this.mesh.getVertices();this.vertexIndex;A<<=1;for(var U=f[u<<=1],L=f[u+1],R=u+A,D=u,q=u+A-2;D<q;D+=2){var $=f[D],it=f[D+1],vt=0,ct=0;D+2>=R?(vt=U,ct=L):(vt=f[D+2],ct=f[D+3]),this.vertex($,it,S),this.vertex(vt,ct,S);}},a.prototype.circle=function(f,u,A,S,O,I){if(O===void 0&&(O=null),I===void 0&&(I=0),I===0&&(I=Math.max(1,6*Y.MathUtils.cbrt(S)|0)),I<=0)throw new Error("segments must be > 0.");O===null&&(O=this.color);var U=2*Y.MathUtils.PI/I,L=Math.cos(U),R=Math.sin(U),D=S,q=0;if(f){this.check(y.Filled,3*I+3),I--;for(var $=0;$<I;$++){this.vertex(u,A,O),this.vertex(u+D,A+q,O);var it=D;D=L*D-R*q,q=R*it+L*q,this.vertex(u+D,A+q,O);}this.vertex(u,A,O),this.vertex(u+D,A+q,O);}else {this.check(y.Line,2*I+2);for(var $=0;$<I;$++){this.vertex(u+D,A+q,O);var vt=D;D=L*D-R*q,q=R*vt+L*q,this.vertex(u+D,A+q,O);}this.vertex(u+D,A+q,O);}D=S,q=0,this.vertex(u+D,A+q,O);},a.prototype.curve=function(f,u,A,S,O,I,U,L,R,D){D===void 0&&(D=null),this.check(y.Line,2*R+2),D===null&&(D=this.color);for(var q=1/R,$=q*q,it=q*q*q,vt=3*q,ct=3*$,ut=6*$,st=6*it,G=f-2*A+O,et=u-2*S+I,dt=3*(A-O)-f+U,rt=3*(S-I)-u+L,It=f,ht=u,ft=(A-f)*vt+G*ct+dt*it,kt=(S-u)*vt+et*ct+rt*it,at=G*ut+dt*st,Q=et*ut+rt*st,ot=dt*st,Mt=rt*st;R-- >0;)this.vertex(It,ht,D),It+=ft,ht+=kt,ft+=at,kt+=Q,at+=ot,Q+=Mt,this.vertex(It,ht,D);this.vertex(It,ht,D),this.vertex(U,L,D);},a.prototype.vertex=function(f,u,A){var S=this.vertexIndex,O=this.mesh.getVertices();O[S++]=f,O[S++]=u,O[S++]=A.r,O[S++]=A.g,O[S++]=A.b,O[S++]=A.a,this.vertexIndex=S;},a.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=false;},a.prototype.flush=function(){this.vertexIndex!=0&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0);},a.prototype.check=function(f,u){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==f){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<u))return;this.flush();}else this.flush(),this.shapeType=f;},a.prototype.dispose=function(){this.mesh.dispose();},a})(),y;o.ShapeRenderer=T,(function(a){a[a.Point=0]="Point",a[a.Line=1]="Line",a[a.Filled=4]="Filled";})(y=o.ShapeType||(o.ShapeType={}));})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function y(a){this.boneLineColor=new Y.Color(1,0,0,1),this.boneOriginColor=new Y.Color(0,1,0,1),this.attachmentLineColor=new Y.Color(0,0,1,.5),this.triangleLineColor=new Y.Color(1,.64,0,.5),this.pathColor=new Y.Color().setFromString("FF7F00"),this.clipColor=new Y.Color(.8,0,0,2),this.aabbColor=new Y.Color(0,1,0,.5),this.drawBones=true,this.drawRegionAttachments=true,this.drawBoundingBoxes=true,this.drawMeshHull=true,this.drawMeshTriangles=true,this.drawPaths=true,this.drawSkeletonXY=false,this.drawClipping=true,this.premultipliedAlpha=false,this.scale=1,this.boneWidth=2,this.bounds=new Y.SkeletonBounds,this.temp=new Array,this.vertices=Y.Utils.newFloatArray(2048),this.context=a instanceof o.ManagedWebGLRenderingContext?a:new o.ManagedWebGLRenderingContext(a);}return y.prototype.draw=function(a,f,u){u===void 0&&(u=null);var A=f.x,S=f.y,O=this.context.gl,I=this.premultipliedAlpha?O.ONE:O.SRC_ALPHA;a.setBlendMode(I,O.ONE_MINUS_SRC_ALPHA);var U=f.bones;if(this.drawBones){a.setColor(this.boneLineColor);for(var L=0,R=U.length;L<R;L++){var D=U[L];if(!(u&&u.indexOf(D.data.name)>-1)&&D.parent!=null){var q=A+D.data.length*D.a+D.worldX,$=S+D.data.length*D.c+D.worldY;a.rectLine(true,A+D.worldX,S+D.worldY,q,$,this.boneWidth*this.scale);}}this.drawSkeletonXY&&a.x(skeletonX,S,4*this.scale);}if(this.drawRegionAttachments){a.setColor(this.attachmentLineColor);for(var it,L=0,R=(it=f.slots).length;L<R;L++){var vt,ct;if((ct=(vt=it[L]).getAttachment())instanceof Y.RegionAttachment){var ut=ct,st=this.vertices;ut.computeWorldVertices(vt.bone,st,0,2),a.line(st[0],st[1],st[2],st[3]),a.line(st[2],st[3],st[4],st[5]),a.line(st[4],st[5],st[6],st[7]),a.line(st[6],st[7],st[0],st[1]);}}}if(this.drawMeshHull||this.drawMeshTriangles)for(var it,L=0,R=(it=f.slots).length;L<R;L++){var vt,ct;if((vt=it[L]).bone.active&&(ct=vt.getAttachment())instanceof Y.MeshAttachment){var G=ct,st=this.vertices;G.computeWorldVertices(vt,0,G.worldVerticesLength,st,0,2);var et=G.triangles,dt=G.hullLength;if(this.drawMeshTriangles){a.setColor(this.triangleLineColor);for(var rt=0,It=et.length;rt<It;rt+=3){var ht=2*et[rt],ft=2*et[rt+1],kt=2*et[rt+2];a.triangle(false,st[ht],st[ht+1],st[ft],st[ft+1],st[kt],st[kt+1]);}}if(this.drawMeshHull&&dt>0){a.setColor(this.attachmentLineColor);for(var at=st[(dt=2*(dt>>1))-2],Q=st[dt-1],rt=0,It=dt;rt<It;rt+=2){var q=st[rt],$=st[rt+1];a.line(q,$,at,Q),at=q,Q=$;}}}}if(this.drawBoundingBoxes){var ot=this.bounds;ot.update(skeleton,true),a.setColor(this.aabbColor),a.rect(false,ot.minX,ot.minY,ot.getWidth(),ot.getHeight());for(var Mt=ot.polygons,yt=ot.boundingBoxes,L=0,R=Mt.length;L<R;L++){var Bt=Mt[L];a.setColor(yt[L].color),a.polygon(Bt,0,Bt.length);}}if(this.drawPaths)for(var it,L=0,R=(it=f.slots).length;L<R;L++){var vt,ct;if((vt=it[L]).bone.active&&(ct=vt.getAttachment())instanceof Y.PathAttachment){var Dt=ct,It=Dt.worldVerticesLength,Lt=this.temp=Y.Utils.setArraySize(this.temp,It,0);Dt.computeWorldVertices(vt,0,It,Lt,0,2);var Vt=this.pathColor,Gt=Lt[2],Ft=Lt[3],Tt=0,At=0;if(Dt.closed){a.setColor(Vt);var _t=Lt[0],ie=Lt[1],Kt=Lt[It-2],Ae=Lt[It-1];Tt=Lt[It-4],At=Lt[It-3],a.curve(Gt,Ft,_t,ie,Kt,Ae,Tt,At,32),a.setColor(y.LIGHT_GRAY),a.line(Gt,Ft,_t,ie),a.line(Tt,At,Kt,Ae);}It-=4;for(var rt=4;rt<It;rt+=6){var _t=Lt[rt],ie=Lt[rt+1],Kt=Lt[rt+2],Ae=Lt[rt+3];Tt=Lt[rt+4],At=Lt[rt+5],a.setColor(Vt),a.curve(Gt,Ft,_t,ie,Kt,Ae,Tt,At,32),a.setColor(y.LIGHT_GRAY),a.line(Gt,Ft,_t,ie),a.line(Tt,At,Kt,Ae),Gt=Tt,Ft=At;}}}if(this.drawBones){a.setColor(this.boneOriginColor);for(var L=0,R=U.length;L<R;L++){var D=U[L];u&&u.indexOf(D.data.name)>-1||a.circle(true,A+D.worldX,S+D.worldY,3*this.scale,y.GREEN,8);}}if(this.drawClipping){var it=f.slots;a.setColor(this.clipColor);for(var L=0,R=it.length;L<R;L++){var vt,ct;if((vt=it[L]).bone.active&&(ct=vt.getAttachment())instanceof Y.ClippingAttachment){var Le=ct,It=Le.worldVerticesLength,Lt=this.temp=Y.Utils.setArraySize(this.temp,It,0);Le.computeWorldVertices(vt,0,It,Lt,0,2);for(var ye=0,Ye=Lt.length;ye<Ye;ye+=2){var q=Lt[ye],$=Lt[ye+1],Tt=Lt[(ye+2)%Lt.length],At=Lt[(ye+3)%Lt.length];a.line(q,$,Tt,At);}}}}},y.prototype.dispose=function(){},y.LIGHT_GRAY=new Y.Color(.7529411764705882,.7529411764705882,.7529411764705882,1),y.GREEN=new Y.Color(0,1,0,1),y})();o.SkeletonDebugRenderer=T;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function a(f,u,A){this.vertices=f,this.numVertices=u,this.numFloats=A;}return a})(),y=(function(){function a(f,u){u===void 0&&(u=true),this.premultipliedAlpha=false,this.vertexEffect=null,this.tempColor=new Y.Color,this.tempColor2=new Y.Color,this.vertexSize=8,this.twoColorTint=false,this.renderable=new T(null,0,0),this.clipper=new Y.SkeletonClipping,this.temp=new Y.Vector2,this.temp2=new Y.Vector2,this.temp3=new Y.Color,this.temp4=new Y.Color,this.twoColorTint=u,u&&(this.vertexSize+=4),this.vertices=Y.Utils.newFloatArray(1024*this.vertexSize);}return a.prototype.draw=function(f,u,A,S){A===void 0&&(A=-1),S===void 0&&(S=-1);var O=this.clipper,I=this.premultipliedAlpha,U=this.twoColorTint,L=null,R=this.temp,D=this.temp2,q=this.temp3,$=this.temp4,it=this.renderable,vt=null,ct=null,ut=u.drawOrder,st=null,G=u.color,et=U?12:8,dt=false;A==-1&&(dt=true);for(var rt=0,It=ut.length;rt<It;rt++){var ht=O.isClipping()?2:et,ft=ut[rt];if(ft.bone.active)if(A>=0&&A==ft.data.index&&(dt=true),dt){S>=0&&S==ft.data.index&&(dt=false);var kt=ft.getAttachment(),at=null;if(kt instanceof Y.RegionAttachment){var Q=kt;it.vertices=this.vertices,it.numVertices=4,it.numFloats=ht<<2,Q.computeWorldVertices(ft.bone,it.vertices,0,ht),ct=a.QUAD_TRIANGLES,vt=Q.uvs,at=Q.region.renderObject.texture,st=Q.color;}else {if(!(kt instanceof Y.MeshAttachment)){if(kt instanceof Y.ClippingAttachment){var ot=kt;O.clipStart(ft,ot);continue}O.clipEndWithSlot(ft);continue}var Mt=kt;it.vertices=this.vertices,it.numVertices=Mt.worldVerticesLength>>1,it.numFloats=it.numVertices*ht,it.numFloats>it.vertices.length&&(it.vertices=this.vertices=Y.Utils.newFloatArray(it.numFloats)),Mt.computeWorldVertices(ft,0,Mt.worldVerticesLength,it.vertices,0,ht),ct=Mt.triangles,at=Mt.region.renderObject.texture,vt=Mt.uvs,st=Mt.color;}if(at!=null){var yt=ft.color,Bt=this.tempColor;Bt.r=G.r*yt.r*st.r,Bt.g=G.g*yt.g*st.g,Bt.b=G.b*yt.b*st.b,Bt.a=G.a*yt.a*st.a,I&&(Bt.r*=Bt.a,Bt.g*=Bt.a,Bt.b*=Bt.a);var Dt=this.tempColor2;ft.darkColor==null?Dt.set(0,0,0,1):(I?(Dt.r=ft.darkColor.r*Bt.a,Dt.g=ft.darkColor.g*Bt.a,Dt.b=ft.darkColor.b*Bt.a):Dt.setFromColor(ft.darkColor),Dt.a=I?1:0);var Lt=ft.data.blendMode;if(Lt!=L&&(L=Lt,f.setBlendMode(o.WebGLBlendModeConverter.getSourceGLBlendMode(L,I),o.WebGLBlendModeConverter.getDestGLBlendMode(L))),O.isClipping()){O.clipTriangles(it.vertices,it.numFloats,ct,ct.length,vt,Bt,Dt,U);var Vt=new Float32Array(O.clippedVertices),Gt=O.clippedTriangles;if(this.vertexEffect!=null){var Ft=this.vertexEffect,Tt=Vt;if(U)for(var At=0,_t=Vt.length;At<_t;At+=et)R.x=Tt[At],R.y=Tt[At+1],q.set(Tt[At+2],Tt[At+3],Tt[At+4],Tt[At+5]),D.x=Tt[At+6],D.y=Tt[At+7],$.set(Tt[At+8],Tt[At+9],Tt[At+10],Tt[At+11]),Ft.transform(R,D,q,$),Tt[At]=R.x,Tt[At+1]=R.y,Tt[At+2]=q.r,Tt[At+3]=q.g,Tt[At+4]=q.b,Tt[At+5]=q.a,Tt[At+6]=D.x,Tt[At+7]=D.y,Tt[At+8]=$.r,Tt[At+9]=$.g,Tt[At+10]=$.b,Tt[At+11]=$.a;else for(var At=0,ie=Vt.length;At<ie;At+=et)R.x=Tt[At],R.y=Tt[At+1],q.set(Tt[At+2],Tt[At+3],Tt[At+4],Tt[At+5]),D.x=Tt[At+6],D.y=Tt[At+7],$.set(0,0,0,0),Ft.transform(R,D,q,$),Tt[At]=R.x,Tt[At+1]=R.y,Tt[At+2]=q.r,Tt[At+3]=q.g,Tt[At+4]=q.b,Tt[At+5]=q.a,Tt[At+6]=D.x,Tt[At+7]=D.y;}f.draw(at,Vt,Gt);}else {var Tt=it.vertices;if(this.vertexEffect!=null){var Ft=this.vertexEffect;if(U)for(var At=0,Kt=0,Ae=it.numFloats;At<Ae;At+=et,Kt+=2)R.x=Tt[At],R.y=Tt[At+1],D.x=vt[Kt],D.y=vt[Kt+1],q.setFromColor(Bt),$.setFromColor(Dt),Ft.transform(R,D,q,$),Tt[At]=R.x,Tt[At+1]=R.y,Tt[At+2]=q.r,Tt[At+3]=q.g,Tt[At+4]=q.b,Tt[At+5]=q.a,Tt[At+6]=D.x,Tt[At+7]=D.y,Tt[At+8]=$.r,Tt[At+9]=$.g,Tt[At+10]=$.b,Tt[At+11]=$.a;else for(var At=0,Kt=0,Le=it.numFloats;At<Le;At+=et,Kt+=2)R.x=Tt[At],R.y=Tt[At+1],D.x=vt[Kt],D.y=vt[Kt+1],q.setFromColor(Bt),$.set(0,0,0,0),Ft.transform(R,D,q,$),Tt[At]=R.x,Tt[At+1]=R.y,Tt[At+2]=q.r,Tt[At+3]=q.g,Tt[At+4]=q.b,Tt[At+5]=q.a,Tt[At+6]=D.x,Tt[At+7]=D.y;}else if(U)for(var At=2,Kt=0,ye=it.numFloats;At<ye;At+=et,Kt+=2)Tt[At]=Bt.r,Tt[At+1]=Bt.g,Tt[At+2]=Bt.b,Tt[At+3]=Bt.a,Tt[At+4]=vt[Kt],Tt[At+5]=vt[Kt+1],Tt[At+6]=Dt.r,Tt[At+7]=Dt.g,Tt[At+8]=Dt.b,Tt[At+9]=Dt.a;else for(var At=2,Kt=0,Ye=it.numFloats;At<Ye;At+=et,Kt+=2)Tt[At]=Bt.r,Tt[At+1]=Bt.g,Tt[At+2]=Bt.b,Tt[At+3]=Bt.a,Tt[At+4]=vt[Kt],Tt[At+5]=vt[Kt+1];var Xe=it.vertices.subarray(0,it.numFloats);f.draw(at,Xe,ct);}}O.clipEndWithSlot(ft);}else O.clipEndWithSlot(ft);else O.clipEndWithSlot(ft);}O.clipEnd();},a.QUAD_TRIANGLES=[0,1,2,2,3,0],a})();o.SkeletonRenderer=y;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function y(a,f,u){a===void 0&&(a=0),f===void 0&&(f=0),u===void 0&&(u=0),this.x=0,this.y=0,this.z=0,this.x=a,this.y=f,this.z=u;}return y.prototype.setFrom=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},y.prototype.set=function(a,f,u){return this.x=a,this.y=f,this.z=u,this},y.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},y.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},y.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this},y.prototype.normalize=function(){var a=this.length();return a==0?this:(a=1/a,this.x*=a,this.y*=a,this.z*=a,this)},y.prototype.cross=function(a){return this.set(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},y.prototype.multiply=function(a){var f=a.values;return this.set(this.x*f[o.M00]+this.y*f[o.M01]+this.z*f[o.M02]+f[o.M03],this.x*f[o.M10]+this.y*f[o.M11]+this.z*f[o.M12]+f[o.M13],this.x*f[o.M20]+this.y*f[o.M21]+this.z*f[o.M22]+f[o.M23])},y.prototype.project=function(a){var f=a.values,u=1/(this.x*f[o.M30]+this.y*f[o.M31]+this.z*f[o.M32]+f[o.M33]);return this.set((this.x*f[o.M00]+this.y*f[o.M01]+this.z*f[o.M02]+f[o.M03])*u,(this.x*f[o.M10]+this.y*f[o.M11]+this.z*f[o.M12]+f[o.M13])*u,(this.x*f[o.M20]+this.y*f[o.M21]+this.z*f[o.M22]+f[o.M23])*u)},y.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},y.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},y.prototype.distance=function(a){var f=a.x-this.x,u=a.y-this.y,A=a.z-this.z;return Math.sqrt(f*f+u*u+A*A)},y})();o.Vector3=T;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={})),(function(Y){(function(o){var T=(function(){function a(f,u){u===void 0&&(u={alpha:"true"}),this.restorables=new Array,f instanceof WebGLRenderingContext||f instanceof WebGL2RenderingContext?(this.gl=f,this.canvas=this.gl.canvas):this.setupCanvas(f,u);}return a.prototype.setupCanvas=function(f,u){var A=this;this.gl=f.getContext("webgl2",u)||f.getContext("webgl",u),this.canvas=f,f.addEventListener("webglcontextlost",(function(S){S&&S.preventDefault();})),f.addEventListener("webglcontextrestored",(function(S){for(var O=0,I=A.restorables.length;O<I;O++)A.restorables[O].restore();}));},a.prototype.addRestorable=function(f){this.restorables.push(f);},a.prototype.removeRestorable=function(f){var u=this.restorables.indexOf(f);u>-1&&this.restorables.splice(u,1);},a})();o.ManagedWebGLRenderingContext=T;var y=(function(){function a(){}return a.getDestGLBlendMode=function(f){switch(f){case Y.BlendMode.Normal:return a.ONE_MINUS_SRC_ALPHA;case Y.BlendMode.Additive:return a.ONE;case Y.BlendMode.Multiply:case Y.BlendMode.Screen:return a.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+f)}},a.getSourceGLBlendMode=function(f,u){switch(u===void 0&&(u=false),f){case Y.BlendMode.Normal:case Y.BlendMode.Additive:return u?a.ONE:a.SRC_ALPHA;case Y.BlendMode.Multiply:return a.DST_COLOR;case Y.BlendMode.Screen:return a.ONE;default:throw new Error("Unknown blend mode: "+f)}},a.ZERO=0,a.ONE=1,a.SRC_COLOR=768,a.ONE_MINUS_SRC_COLOR=769,a.SRC_ALPHA=770,a.ONE_MINUS_SRC_ALPHA=771,a.DST_ALPHA=772,a.ONE_MINUS_DST_ALPHA=773,a.DST_COLOR=774,a})();o.WebGLBlendModeConverter=y;})(Y.webgl||(Y.webgl={}));})(Rt||(Rt={}));var On=Object.assign(Rt,Rt.webgl);var An=On;var Nn=(()=>{var Y=Object.defineProperty,lt=t=>Y(t,"__esModule",{value:true}),o=(t,h)=>{lt(t);for(var l in h)Y(t,l,{get:h[l],enumerable:true});},T={};o(T,{AlphaTimeline:()=>At,Animation:()=>G,AnimationState:()=>Ze,AnimationStateAdapter:()=>vi,AnimationStateData:()=>lr,AssetManager:()=>pi,AssetManagerBase:()=>ms,AtlasAttachmentLoader:()=>cr,Attachment:()=>ct,AttachmentTimeline:()=>Kt,BinaryInput:()=>ur,BlendMode:()=>ei,Bone:()=>Us,BoneData:()=>Ns,BoundingBoxAttachment:()=>Ji,CURRENT:()=>ds,CameraController:()=>Me,ClippingAttachment:()=>Di,Color:()=>u,Color2Attribute:()=>Qs,ColorAttribute:()=>Pi,ConstraintData:()=>Ki,CurveTimeline:()=>ht,CurveTimeline1:()=>ft,CurveTimeline2:()=>kt,DebugUtils:()=>D,DeformTimeline:()=>Ae,Downloader:()=>Li,DrawOrderTimeline:()=>Xe,Event:()=>Yi,EventData:()=>gs,EventQueue:()=>$e,EventTimeline:()=>ye,EventType:()=>De,FIRST:()=>hi,FakeTexture:()=>fs,GLTexture:()=>ss,HOLD_FIRST:()=>ci,HOLD_MIX:()=>Mi,HOLD_SUBSEQUENT:()=>ti,IkConstraint:()=>Oi,IkConstraintData:()=>Ws,IkConstraintTimeline:()=>qe,Input:()=>ce,IntSet:()=>y,Interpolation:()=>O,JitterEffect:()=>Jr,LoadingScreen:()=>wr,M00:()=>ae,M01:()=>ue,M02:()=>fe,M03:()=>me,M10:()=>ve,M11:()=>Qt,M12:()=>oe,M13:()=>zt,M20:()=>mt,M21:()=>Jt,M22:()=>ee,M23:()=>he,M30:()=>$t,M31:()=>Ot,M32:()=>Wt,M33:()=>Nt,ManagedWebGLRenderingContext:()=>oi,MathUtils:()=>S,Matrix4:()=>te,Mesh:()=>se,MeshAttachment:()=>yi,MixBlend:()=>et,MixDirection:()=>dt,OrthoCamera:()=>le,PathAttachment:()=>ui,PathConstraint:()=>Bi,PathConstraintData:()=>$i,PathConstraintMixTimeline:()=>We,PathConstraintPositionTimeline:()=>Ue,PathConstraintSpacingTimeline:()=>Qe,PointAttachment:()=>_i,PolygonBatcher:()=>bs,Pool:()=>q,Position2Attribute:()=>ge,Position3Attribute:()=>we,PositionMode:()=>di,Pow:()=>I,PowOut:()=>U,RGB2Timeline:()=>ie,RGBA2Timeline:()=>_t,RGBATimeline:()=>Ft,RGBTimeline:()=>Tt,RegionAttachment:()=>Ie,ResizeMode:()=>Gi,RotateMode:()=>fi,RotateTimeline:()=>at,SETUP:()=>Hi,SUBSEQUENT:()=>ri,ScaleTimeline:()=>yt,ScaleXTimeline:()=>Bt,ScaleYTimeline:()=>Dt,SceneRenderer:()=>Ii,Shader:()=>qt,ShapeRenderer:()=>Ks,ShapeType:()=>Oe,ShearTimeline:()=>Lt,ShearXTimeline:()=>Vt,ShearYTimeline:()=>Gt,Skeleton:()=>Gs,SkeletonBinary:()=>dr,SkeletonBounds:()=>pr,SkeletonClipping:()=>ws,SkeletonData:()=>vs,SkeletonDebugRenderer:()=>Ci,SkeletonJson:()=>qr,SkeletonRenderer:()=>rs,Skin:()=>Ni,SkinEntry:()=>ts,Slot:()=>ps,SlotData:()=>es,SpacingMode:()=>He,SpineCanvas:()=>Es,StringSet:()=>a,SwirlEffect:()=>vr,TexCoordAttribute:()=>pe,Texture:()=>Bs,TextureAtlas:()=>Vs,TextureAtlasPage:()=>Ds,TextureAtlasRegion:()=>Os,TextureFilter:()=>ni,TextureRegion:()=>us,TextureWrap:()=>Ei,TimeKeeper:()=>it,Timeline:()=>It,Touch:()=>de,TrackEntry:()=>Be,TransformConstraint:()=>xs,TransformConstraintData:()=>is,TransformConstraintTimeline:()=>ze,TransformMode:()=>ii,TranslateTimeline:()=>Q,TranslateXTimeline:()=>ot,TranslateYTimeline:()=>Mt,Triangulator:()=>li,Utils:()=>R,Vector2:()=>$,Vector3:()=>Je,VertexAttachment:()=>st,VertexAttribute:()=>re,VertexAttributeType:()=>Ti,WebGLBlendModeConverter:()=>Ss,WindowedMean:()=>vt});var y=class{constructor(){this.array=new Array;}add(t){let h=this.contains(t);return this.array[t|0]=t|0,!h}contains(t){return this.array[t|0]!=null}remove(t){this.array[t|0]=void 0;}clear(){this.array.length=0;}},a=class{constructor(){this.entries={},this.size=0;}add(t){let h=this.entries[t];return this.entries[t]=true,h?false:(this.size++,true)}addAll(t){let h=this.size;for(var l=0,g=t.length;l<g;l++)this.add(t[l]);return h!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0;}},f=class{constructor(t=0,h=0,l=0,g=0){this.r=t,this.g=h,this.b=l,this.a=g;}set(t,h,l,g){return this.r=t,this.g=h,this.b=l,this.a=g,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this}add(t,h,l,g){return this.r+=t,this.g+=h,this.b+=l,this.a+=g,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,h){t.r=((h&4278190080)>>>24)/255,t.g=((h&16711680)>>>16)/255,t.b=((h&65280)>>>8)/255,t.a=(h&255)/255;}static rgb888ToColor(t,h){t.r=((h&16711680)>>>16)/255,t.g=((h&65280)>>>8)/255,t.b=(h&255)/255;}static fromString(t){return new f().setFromString(t)}},u=f;u.WHITE=new f(1,1,1,1),u.RED=new f(1,0,0,1),u.GREEN=new f(0,1,0,1),u.BLUE=new f(0,0,1,1),u.MAGENTA=new f(1,0,1,1);var A=class{static clamp(t,h,l){return t<h?h:t>l?l:t}static cosDeg(t){return Math.cos(t*A.degRad)}static sinDeg(t){return Math.sin(t*A.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let h=Math.pow(Math.abs(t),.3333333333333333);return t<0?-h:h}static randomTriangular(t,h){return A.randomTriangularWith(t,h,(t+h)*.5)}static randomTriangularWith(t,h,l){let g=Math.random(),M=h-t;return g<=(l-t)/M?t+Math.sqrt(g*M*(l-t)):h-Math.sqrt((1-g)*M*(h-l))}static isPowerOfTwo(t){return t&&(t&t-1)==0}},S=A;S.PI=3.1415927,S.PI2=A.PI*2,S.radiansToDegrees=180/A.PI,S.radDeg=A.radiansToDegrees,S.degreesToRadians=A.PI/180,S.degRad=A.degreesToRadians;var O=class{apply(t,h,l){return t+(h-t)*this.applyInternal(l)}},I=class extends O{constructor(t){super(),this.power=2,this.power=t;}applyInternal(t){return t<=.5?Math.pow(t*2,this.power)/2:Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1}},U=class extends I{constructor(t){super(t);}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},L=class{static arrayCopy(t,h,l,g,M){for(let X=h,b=g;X<h+M;X++,b++)l[b]=t[X];}static arrayFill(t,h,l,g){for(let M=h;M<l;M++)t[M]=g;}static setArraySize(t,h,l=0){let g=t.length;if(g==h)return t;if(t.length=h,g<h)for(let M=g;M<h;M++)t[M]=l;return t}static ensureArrayCapacity(t,h,l=0){return t.length>=h?t:L.setArraySize(t,h,l)}static newArray(t,h){let l=new Array(t);for(let g=0;g<t;g++)l[g]=h;return l}static newFloatArray(t){if(L.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let h=new Array(t);for(let l=0;l<h.length;l++)h[l]=0;return h}}static newShortArray(t){if(L.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let h=new Array(t);for(let l=0;l<h.length;l++)h[l]=0;return h}}static toFloatArray(t){return L.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return L.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,h){}static contains(t,h,l=true){for(var g=0;g<t.length;g++)if(t[g]==h)return  true;return  false}static enumValue(t,h){return t[h[0].toUpperCase()+h.slice(1)]}},R=L;R.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";var D=class{static logBones(t){for(let h=0;h<t.bones.length;h++){let l=t.bones[h];console.log(l.data.name+", "+l.a+", "+l.b+", "+l.c+", "+l.d+", "+l.worldX+", "+l.worldY);}}},q=class{constructor(t){this.items=new Array,this.instantiator=t;}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t);}freeAll(t){for(let h=0;h<t.length;h++)this.free(t[h]);}clear(){this.items.length=0;}},$=class{constructor(t=0,h=0){this.x=t,this.y=h;}set(t,h){return this.x=t,this.y=h,this}length(){let t=this.x,h=this.y;return Math.sqrt(t*t+h*h)}normalize(){let t=this.length();return t!=0&&(this.x/=t,this.y/=t),this}},it=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0;}update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0);}},vt=class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=true,this.values=new Array(t);}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=true;}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let h=0;h<this.values.length;h++)t+=this.values[h];this.mean=t/this.values.length,this.dirty=false;}return this.mean}return 0}},ct=class{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t;}},ut=class extends ct{constructor(t){super(t),this.id=ut.nextID++,this.bones=null,this.vertices=null,this.worldVerticesLength=0,this.deformAttachment=this;}computeWorldVertices(t,h,l,g,M,X){l=M+(l>>1)*X;let b=t.bone.skeleton,x=t.deform,k=this.vertices,E=this.bones;if(!E){x.length>0&&(k=x);let K=t.bone,i=K.worldX,e=K.worldY,s=K.a,n=K.b,r=K.c,m=K.d;for(let c=h,d=M;d<l;c+=2,d+=X){let p=k[c],v=k[c+1];g[d]=p*s+v*n+i,g[d+1]=p*r+v*m+e;}return}let P=0,N=0;for(let K=0;K<h;K+=2){let i=E[P];P+=i+1,N+=i;}let H=b.bones;if(x.length==0)for(let K=M,i=N*3;K<l;K+=X){let e=0,s=0,n=E[P++];for(n+=P;P<n;P++,i+=3){let r=H[E[P]],m=k[i],c=k[i+1],d=k[i+2];e+=(m*r.a+c*r.b+r.worldX)*d,s+=(m*r.c+c*r.d+r.worldY)*d;}g[K]=e,g[K+1]=s;}else {let K=x;for(let i=M,e=N*3,s=N<<1;i<l;i+=X){let n=0,r=0,m=E[P++];for(m+=P;P<m;P++,e+=3,s+=2){let c=H[E[P]],d=k[e]+K[s],p=k[e+1]+K[s+1],v=k[e+2];n+=(d*c.a+p*c.b+c.worldX)*v,r+=(d*c.c+p*c.d+c.worldY)*v;}g[i]=n,g[i+1]=r;}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),R.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=R.newFloatArray(this.vertices.length),R.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment;}},st=ut;st.nextID=0;var G=class{constructor(t,h,l){if(this.timelines=null,this.timelineIds=null,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(h),this.duration=l;}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new a;for(var h=0;h<t.length;h++)this.timelineIds.addAll(t[h].getPropertyIds());}hasTimeline(t){for(let h=0;h<t.length;h++)if(this.timelineIds.contains(t[h]))return  true;return  false}apply(t,h,l,g,M,X,b,x){if(!t)throw new Error("skeleton cannot be null.");g&&this.duration!=0&&(l%=this.duration,h>0&&(h%=this.duration));let k=this.timelines;for(let E=0,P=k.length;E<P;E++)k[E].apply(t,h,l,M,X,b,x);}},et;(function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add";})(et||(et={}));var dt;(function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut";})(dt||(dt={}));var rt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18},It=class{constructor(t,h){this.propertyIds=null,this.frames=null,this.propertyIds=h,this.frames=R.newFloatArray(t*this.getFrameEntries());}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,h){let l=t.length;for(let g=1;g<l;g++)if(t[g]>h)return g-1;return l-1}static search(t,h,l){let g=t.length;for(let M=l;M<g;M+=l)if(t[M]>h)return M-l;return g-l}},ht=class extends It{constructor(t,h,l){super(t,l),this.curves=null,this.curves=R.newFloatArray(t+h*18),this.curves[t-1]=1;}setLinear(t){this.curves[t]=0;}setStepped(t){this.curves[t]=1;}shrink(t){let h=this.getFrameCount()+t*18;if(this.curves.length>h){let l=R.newFloatArray(h);R.arrayCopy(this.curves,0,l,0,h),this.curves=l;}}setBezier(t,h,l,g,M,X,b,x,k,E,P){let N=this.curves,H=this.getFrameCount()+t*18;l==0&&(N[h]=2+H);let K=(g-X*2+x)*.03,i=(M-b*2+k)*.03,e=((X-x)*3-g+E)*.006,s=((b-k)*3-M+P)*.006,n=K*2+e,r=i*2+s,m=(X-g)*.3+K+e*.16666667,c=(b-M)*.3+i+s*.16666667,d=g+m,p=M+c;for(let v=H+18;H<v;H+=2)N[H]=d,N[H+1]=p,m+=n,c+=r,n+=e,r+=s,d+=m,p+=c;}getBezierValue(t,h,l,g){let M=this.curves;if(M[g]>t){let k=this.frames[h],E=this.frames[h+l];return E+(t-k)/(M[g]-k)*(M[g+1]-E)}let X=g+18;for(g+=2;g<X;g+=2)if(M[g]>=t){let k=M[g-2],E=M[g-1];return E+(t-k)/(M[g]-k)*(M[g+1]-E)}h+=this.getFrameEntries();let b=M[X-2],x=M[X-1];return x+(t-b)/(this.frames[h]-b)*(this.frames[h+l]-x)}},ft=class extends ht{constructor(t,h,l){super(t,h,[l]);}getFrameEntries(){return 2}setFrame(t,h,l){t<<=1,this.frames[t]=h,this.frames[t+1]=l;}getCurveValue(t){let h=this.frames,l=h.length-2;for(let M=2;M<=l;M+=2)if(h[M]>t){l=M-2;break}let g=this.curves[l>>1];switch(g){case 0:let M=h[l],X=h[l+1];return X+(t-M)/(h[l+2]-M)*(h[l+2+1]-X);case 1:return h[l+1]}return this.getBezierValue(t,l,1,g-2)}},kt=class extends ht{constructor(t,h,l,g){super(t,h,[l,g]);}getFrameEntries(){return 3}setFrame(t,h,l,g){t*=3,this.frames[t]=h,this.frames[t+1]=l,this.frames[t+2]=g;}},at=class extends ft{constructor(t,h,l){super(t,h,rt.rotate+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.rotation=x.data.rotation;return;case 1:x.rotation+=(x.data.rotation-x.rotation)*M;}return}let E=this.getCurveValue(l);switch(X){case 0:x.rotation=x.data.rotation+E*M;break;case 1:case 2:E+=x.data.rotation-x.rotation;case 3:x.rotation+=E*M;}}},Q=class extends kt{constructor(t,h,l){super(t,h,rt.x+"|"+l,rt.y+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.x=x.data.x,x.y=x.data.y;return;case 1:x.x+=(x.data.x-x.x)*M,x.y+=(x.data.y-x.y)*M;}return}let E=0,P=0,N=It.search(k,l,3),H=this.curves[N/3];switch(H){case 0:let K=k[N];E=k[N+1],P=k[N+2];let i=(l-K)/(k[N+3]-K);E+=(k[N+3+1]-E)*i,P+=(k[N+3+2]-P)*i;break;case 1:E=k[N+1],P=k[N+2];break;default:E=this.getBezierValue(l,N,1,H-2),P=this.getBezierValue(l,N,2,H+18-2);}switch(X){case 0:x.x=x.data.x+E*M,x.y=x.data.y+P*M;break;case 1:case 2:x.x+=(x.data.x+E-x.x)*M,x.y+=(x.data.y+P-x.y)*M;break;case 3:x.x+=E*M,x.y+=P*M;}}},ot=class extends ft{constructor(t,h,l){super(t,h,rt.x+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.x=x.data.x;return;case 1:x.x+=(x.data.x-x.x)*M;}return}let E=this.getCurveValue(l);switch(X){case 0:x.x=x.data.x+E*M;break;case 1:case 2:x.x+=(x.data.x+E-x.x)*M;break;case 3:x.x+=E*M;}}},Mt=class extends ft{constructor(t,h,l){super(t,h,rt.y+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.y=x.data.y;return;case 1:x.y+=(x.data.y-x.y)*M;}return}let E=this.getCurveValue(l);switch(X){case 0:x.y=x.data.y+E*M;break;case 1:case 2:x.y+=(x.data.y+E-x.y)*M;break;case 3:x.y+=E*M;}}},yt=class extends kt{constructor(t,h,l){super(t,h,rt.scaleX+"|"+l,rt.scaleY+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.scaleX=x.data.scaleX,x.scaleY=x.data.scaleY;return;case 1:x.scaleX+=(x.data.scaleX-x.scaleX)*M,x.scaleY+=(x.data.scaleY-x.scaleY)*M;}return}let E,P,N=It.search(k,l,3),H=this.curves[N/3];switch(H){case 0:let K=k[N];E=k[N+1],P=k[N+2];let i=(l-K)/(k[N+3]-K);E+=(k[N+3+1]-E)*i,P+=(k[N+3+2]-P)*i;break;case 1:E=k[N+1],P=k[N+2];break;default:E=this.getBezierValue(l,N,1,H-2),P=this.getBezierValue(l,N,2,H+18-2);}if(E*=x.data.scaleX,P*=x.data.scaleY,M==1)X==3?(x.scaleX+=E-x.data.scaleX,x.scaleY+=P-x.data.scaleY):(x.scaleX=E,x.scaleY=P);else {let K=0,i=0;if(b==1)switch(X){case 0:K=x.data.scaleX,i=x.data.scaleY,x.scaleX=K+(Math.abs(E)*S.signum(K)-K)*M,x.scaleY=i+(Math.abs(P)*S.signum(i)-i)*M;break;case 1:case 2:K=x.scaleX,i=x.scaleY,x.scaleX=K+(Math.abs(E)*S.signum(K)-K)*M,x.scaleY=i+(Math.abs(P)*S.signum(i)-i)*M;break;case 3:x.scaleX+=(E-x.data.scaleX)*M,x.scaleY+=(P-x.data.scaleY)*M;}else switch(X){case 0:K=Math.abs(x.data.scaleX)*S.signum(E),i=Math.abs(x.data.scaleY)*S.signum(P),x.scaleX=K+(E-K)*M,x.scaleY=i+(P-i)*M;break;case 1:case 2:K=Math.abs(x.scaleX)*S.signum(E),i=Math.abs(x.scaleY)*S.signum(P),x.scaleX=K+(E-K)*M,x.scaleY=i+(P-i)*M;break;case 3:x.scaleX+=(E-x.data.scaleX)*M,x.scaleY+=(P-x.data.scaleY)*M;}}}},Bt=class extends ft{constructor(t,h,l){super(t,h,rt.scaleX+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.scaleX=x.data.scaleX;return;case 1:x.scaleX+=(x.data.scaleX-x.scaleX)*M;}return}let E=this.getCurveValue(l)*x.data.scaleX;if(M==1)X==3?x.scaleX+=E-x.data.scaleX:x.scaleX=E;else {let P=0;if(b==1)switch(X){case 0:P=x.data.scaleX,x.scaleX=P+(Math.abs(E)*S.signum(P)-P)*M;break;case 1:case 2:P=x.scaleX,x.scaleX=P+(Math.abs(E)*S.signum(P)-P)*M;break;case 3:x.scaleX+=(E-x.data.scaleX)*M;}else switch(X){case 0:P=Math.abs(x.data.scaleX)*S.signum(E),x.scaleX=P+(E-P)*M;break;case 1:case 2:P=Math.abs(x.scaleX)*S.signum(E),x.scaleX=P+(E-P)*M;break;case 3:x.scaleX+=(E-x.data.scaleX)*M;}}}},Dt=class extends ft{constructor(t,h,l){super(t,h,rt.scaleY+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.scaleY=x.data.scaleY;return;case 1:x.scaleY+=(x.data.scaleY-x.scaleY)*M;}return}let E=this.getCurveValue(l)*x.data.scaleY;if(M==1)X==3?x.scaleY+=E-x.data.scaleY:x.scaleY=E;else {let P=0;if(b==1)switch(X){case 0:P=x.data.scaleY,x.scaleY=P+(Math.abs(E)*S.signum(P)-P)*M;break;case 1:case 2:P=x.scaleY,x.scaleY=P+(Math.abs(E)*S.signum(P)-P)*M;break;case 3:x.scaleY+=(E-x.data.scaleY)*M;}else switch(X){case 0:P=Math.abs(x.data.scaleY)*S.signum(E),x.scaleY=P+(E-P)*M;break;case 1:case 2:P=Math.abs(x.scaleY)*S.signum(E),x.scaleY=P+(E-P)*M;break;case 3:x.scaleY+=(E-x.data.scaleY)*M;}}}},Lt=class extends kt{constructor(t,h,l){super(t,h,rt.shearX+"|"+l,rt.shearY+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.shearX=x.data.shearX,x.shearY=x.data.shearY;return;case 1:x.shearX+=(x.data.shearX-x.shearX)*M,x.shearY+=(x.data.shearY-x.shearY)*M;}return}let E=0,P=0,N=It.search(k,l,3),H=this.curves[N/3];switch(H){case 0:let K=k[N];E=k[N+1],P=k[N+2];let i=(l-K)/(k[N+3]-K);E+=(k[N+3+1]-E)*i,P+=(k[N+3+2]-P)*i;break;case 1:E=k[N+1],P=k[N+2];break;default:E=this.getBezierValue(l,N,1,H-2),P=this.getBezierValue(l,N,2,H+18-2);}switch(X){case 0:x.shearX=x.data.shearX+E*M,x.shearY=x.data.shearY+P*M;break;case 1:case 2:x.shearX+=(x.data.shearX+E-x.shearX)*M,x.shearY+=(x.data.shearY+P-x.shearY)*M;break;case 3:x.shearX+=E*M,x.shearY+=P*M;}}},Vt=class extends ft{constructor(t,h,l){super(t,h,rt.shearX+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.shearX=x.data.shearX;return;case 1:x.shearX+=(x.data.shearX-x.shearX)*M;}return}let E=this.getCurveValue(l);switch(X){case 0:x.shearX=x.data.shearX+E*M;break;case 1:case 2:x.shearX+=(x.data.shearX+E-x.shearX)*M;break;case 3:x.shearX+=E*M;}}},Gt=class extends ft{constructor(t,h,l){super(t,h,rt.shearY+"|"+l),this.boneIndex=0,this.boneIndex=l;}apply(t,h,l,g,M,X,b){let x=t.bones[this.boneIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.shearY=x.data.shearY;return;case 1:x.shearY+=(x.data.shearY-x.shearY)*M;}return}let E=this.getCurveValue(l);switch(X){case 0:x.shearY=x.data.shearY+E*M;break;case 1:case 2:x.shearY+=(x.data.shearY+E-x.shearY)*M;break;case 3:x.shearY+=E*M;}}},Ft=class extends ht{constructor(t,h,l){super(t,h,[rt.rgb+"|"+l,rt.alpha+"|"+l]),this.slotIndex=0,this.slotIndex=l;}getFrameEntries(){return 5}setFrame(t,h,l,g,M,X){t*=5,this.frames[t]=h,this.frames[t+1]=l,this.frames[t+2]=g,this.frames[t+3]=M,this.frames[t+4]=X;}apply(t,h,l,g,M,X,b){let x=t.slots[this.slotIndex];if(!x.bone.active)return;let k=this.frames,E=x.color;if(l<k[0]){let s=x.data.color;switch(X){case 0:E.setFromColor(s);return;case 1:E.add((s.r-E.r)*M,(s.g-E.g)*M,(s.b-E.b)*M,(s.a-E.a)*M);}return}let P=0,N=0,H=0,K=0,i=It.search(k,l,5),e=this.curves[i/5];switch(e){case 0:let s=k[i];P=k[i+1],N=k[i+2],H=k[i+3],K=k[i+4];let n=(l-s)/(k[i+5]-s);P+=(k[i+5+1]-P)*n,N+=(k[i+5+2]-N)*n,H+=(k[i+5+3]-H)*n,K+=(k[i+5+4]-K)*n;break;case 1:P=k[i+1],N=k[i+2],H=k[i+3],K=k[i+4];break;default:P=this.getBezierValue(l,i,1,e-2),N=this.getBezierValue(l,i,2,e+18-2),H=this.getBezierValue(l,i,3,e+36-2),K=this.getBezierValue(l,i,4,e+54-2);}M==1?E.set(P,N,H,K):(X==0&&E.setFromColor(x.data.color),E.add((P-E.r)*M,(N-E.g)*M,(H-E.b)*M,(K-E.a)*M));}},Tt=class extends ht{constructor(t,h,l){super(t,h,[rt.rgb+"|"+l]),this.slotIndex=0,this.slotIndex=l;}getFrameEntries(){return 4}setFrame(t,h,l,g,M){t<<=2,this.frames[t]=h,this.frames[t+1]=l,this.frames[t+2]=g,this.frames[t+3]=M;}apply(t,h,l,g,M,X,b){let x=t.slots[this.slotIndex];if(!x.bone.active)return;let k=this.frames,E=x.color;if(l<k[0]){let e=x.data.color;switch(X){case 0:E.r=e.r,E.g=e.g,E.b=e.b;return;case 1:E.r+=(e.r-E.r)*M,E.g+=(e.g-E.g)*M,E.b+=(e.b-E.b)*M;}return}let P=0,N=0,H=0,K=It.search(k,l,4),i=this.curves[K>>2];switch(i){case 0:let e=k[K];P=k[K+1],N=k[K+2],H=k[K+3];let s=(l-e)/(k[K+4]-e);P+=(k[K+4+1]-P)*s,N+=(k[K+4+2]-N)*s,H+=(k[K+4+3]-H)*s;break;case 1:P=k[K+1],N=k[K+2],H=k[K+3];break;default:P=this.getBezierValue(l,K,1,i-2),N=this.getBezierValue(l,K,2,i+18-2),H=this.getBezierValue(l,K,3,i+36-2);}if(M==1)E.r=P,E.g=N,E.b=H;else {if(X==0){let e=x.data.color;E.r=e.r,E.g=e.g,E.b=e.b;}E.r+=(P-E.r)*M,E.g+=(N-E.g)*M,E.b+=(H-E.b)*M;}}},At=class extends ft{constructor(t,h,l){super(t,h,rt.alpha+"|"+l),this.slotIndex=0,this.slotIndex=l;}apply(t,h,l,g,M,X,b){let x=t.slots[this.slotIndex];if(!x.bone.active)return;let k=x.color;if(l<this.frames[0]){let P=x.data.color;switch(X){case 0:k.a=P.a;return;case 1:k.a+=(P.a-k.a)*M;}return}let E=this.getCurveValue(l);M==1?k.a=E:(X==0&&(k.a=x.data.color.a),k.a+=(E-k.a)*M);}},_t=class extends ht{constructor(t,h,l){super(t,h,[rt.rgb+"|"+l,rt.alpha+"|"+l,rt.rgb2+"|"+l]),this.slotIndex=0,this.slotIndex=l;}getFrameEntries(){return 8}setFrame(t,h,l,g,M,X,b,x,k){t<<=3,this.frames[t]=h,this.frames[t+1]=l,this.frames[t+2]=g,this.frames[t+3]=M,this.frames[t+4]=X,this.frames[t+5]=b,this.frames[t+6]=x,this.frames[t+7]=k;}apply(t,h,l,g,M,X,b){let x=t.slots[this.slotIndex];if(!x.bone.active)return;let k=this.frames,E=x.color,P=x.darkColor;if(l<k[0]){let c=x.data.color,d=x.data.darkColor;switch(X){case 0:E.setFromColor(c),P.r=d.r,P.g=d.g,P.b=d.b;return;case 1:E.add((c.r-E.r)*M,(c.g-E.g)*M,(c.b-E.b)*M,(c.a-E.a)*M),P.r+=(d.r-P.r)*M,P.g+=(d.g-P.g)*M,P.b+=(d.b-P.b)*M;}return}let N=0,H=0,K=0,i=0,e=0,s=0,n=0,r=It.search(k,l,8),m=this.curves[r>>3];switch(m){case 0:let c=k[r];N=k[r+1],H=k[r+2],K=k[r+3],i=k[r+4],e=k[r+5],s=k[r+6],n=k[r+7];let d=(l-c)/(k[r+8]-c);N+=(k[r+8+1]-N)*d,H+=(k[r+8+2]-H)*d,K+=(k[r+8+3]-K)*d,i+=(k[r+8+4]-i)*d,e+=(k[r+8+5]-e)*d,s+=(k[r+8+6]-s)*d,n+=(k[r+8+7]-n)*d;break;case 1:N=k[r+1],H=k[r+2],K=k[r+3],i=k[r+4],e=k[r+5],s=k[r+6],n=k[r+7];break;default:N=this.getBezierValue(l,r,1,m-2),H=this.getBezierValue(l,r,2,m+18-2),K=this.getBezierValue(l,r,3,m+36-2),i=this.getBezierValue(l,r,4,m+54-2),e=this.getBezierValue(l,r,5,m+72-2),s=this.getBezierValue(l,r,6,m+90-2),n=this.getBezierValue(l,r,7,m+108-2);}if(M==1)E.set(N,H,K,i),P.r=e,P.g=s,P.b=n;else {if(X==0){E.setFromColor(x.data.color);let c=x.data.darkColor;P.r=c.r,P.g=c.g,P.b=c.b;}E.add((N-E.r)*M,(H-E.g)*M,(K-E.b)*M,(i-E.a)*M),P.r+=(e-P.r)*M,P.g+=(s-P.g)*M,P.b+=(n-P.b)*M;}}},ie=class extends ht{constructor(t,h,l){super(t,h,[rt.rgb+"|"+l,rt.rgb2+"|"+l]),this.slotIndex=0,this.slotIndex=l;}getFrameEntries(){return 7}setFrame(t,h,l,g,M,X,b,x){t*=7,this.frames[t]=h,this.frames[t+1]=l,this.frames[t+2]=g,this.frames[t+3]=M,this.frames[t+4]=X,this.frames[t+5]=b,this.frames[t+6]=x;}apply(t,h,l,g,M,X,b){let x=t.slots[this.slotIndex];if(!x.bone.active)return;let k=this.frames,E=x.color,P=x.darkColor;if(l<k[0]){let c=x.data.color,d=x.data.darkColor;switch(X){case 0:E.r=c.r,E.g=c.g,E.b=c.b,P.r=d.r,P.g=d.g,P.b=d.b;return;case 1:E.r+=(c.r-E.r)*M,E.g+=(c.g-E.g)*M,E.b+=(c.b-E.b)*M,P.r+=(d.r-P.r)*M,P.g+=(d.g-P.g)*M,P.b+=(d.b-P.b)*M;}return}let N=0,H=0,K=0,e=0,s=0,n=0,r=It.search(k,l,7),m=this.curves[r/7];switch(m){case 0:let c=k[r];N=k[r+1],H=k[r+2],K=k[r+3],e=k[r+4],s=k[r+5],n=k[r+6];let d=(l-c)/(k[r+7]-c);N+=(k[r+7+1]-N)*d,H+=(k[r+7+2]-H)*d,K+=(k[r+7+3]-K)*d,e+=(k[r+7+4]-e)*d,s+=(k[r+7+5]-s)*d,n+=(k[r+7+6]-n)*d;break;case 1:N=k[r+1],H=k[r+2],K=k[r+3],e=k[r+4],s=k[r+5],n=k[r+6];break;default:N=this.getBezierValue(l,r,1,m-2),H=this.getBezierValue(l,r,2,m+18-2),K=this.getBezierValue(l,r,3,m+36-2),e=this.getBezierValue(l,r,4,m+54-2),s=this.getBezierValue(l,r,5,m+72-2),n=this.getBezierValue(l,r,6,m+90-2);}if(M==1)E.r=N,E.g=H,E.b=K,P.r=e,P.g=s,P.b=n;else {if(X==0){let c=x.data.color,d=x.data.darkColor;E.r=c.r,E.g=c.g,E.b=c.b,P.r=d.r,P.g=d.g,P.b=d.b;}E.r+=(N-E.r)*M,E.g+=(H-E.g)*M,E.b+=(K-E.b)*M,P.r+=(e-P.r)*M,P.g+=(s-P.g)*M,P.b+=(n-P.b)*M;}}},Kt=class extends It{constructor(t,h){super(t,[rt.attachment+"|"+h]),this.slotIndex=0,this.slotIndex=h,this.attachmentNames=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,h,l){this.frames[t]=h,this.attachmentNames[t]=l;}apply(t,h,l,g,M,X,b){let x=t.slots[this.slotIndex];if(x.bone.active){if(b==1){X==0&&this.setAttachment(t,x,x.data.attachmentName);return}if(l<this.frames[0]){(X==0||X==1)&&this.setAttachment(t,x,x.data.attachmentName);return}this.setAttachment(t,x,this.attachmentNames[It.search1(this.frames,l)]);}}setAttachment(t,h,l){h.setAttachment(l?t.getAttachment(this.slotIndex,l):null);}},Ae=class extends ht{constructor(t,h,l,g){super(t,h,[rt.deform+"|"+l+"|"+g.id]),this.slotIndex=0,this.attachment=null,this.vertices=null,this.slotIndex=l,this.attachment=g,this.vertices=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,h,l){this.frames[t]=h,this.vertices[t]=l;}setBezier(t,h,l,g,M,X,b,x,k,E,P){let N=this.curves,H=this.getFrameCount()+t*18;l==0&&(N[h]=2+H);let K=(g-X*2+x)*.03,i=k*.03-b*.06,e=((X-x)*3-g+E)*.006,s=(b-k+.33333333)*.018,n=K*2+e,r=i*2+s,m=(X-g)*.3+K+e*.16666667,c=b*.3+i+s*.16666667,d=g+m,p=c;for(let v=H+18;H<v;H+=2)N[H]=d,N[H+1]=p,m+=n,c+=r,n+=e,r+=s,d+=m,p+=c;}getCurvePercent(t,h){let l=this.curves,g=l[h];switch(g){case 0:let x=this.frames[h];return (t-x)/(this.frames[h+this.getFrameEntries()]-x);case 1:return 0}if(g-=2,l[g]>t){let x=this.frames[h];return l[g+1]*(t-x)/(l[g]-x)}let M=g+18;for(g+=2;g<M;g+=2)if(l[g]>=t){let x=l[g-2],k=l[g-1];return k+(t-x)/(l[g]-x)*(l[g+1]-k)}let X=l[M-2],b=l[M-1];return b+(1-b)*(t-X)/(this.frames[h+this.getFrameEntries()]-X)}apply(t,h,l,g,M,X,b){let x=t.slots[this.slotIndex];if(!x.bone.active)return;let k=x.getAttachment();if(!(k instanceof st)||k.deformAttachment!=this.attachment)return;let E=x.deform;E.length==0&&(X=0);let P=this.vertices,N=P[0].length,H=this.frames;if(l<H[0]){let r=k;switch(X){case 0:E.length=0;return;case 1:if(M==1){E.length=0;return}if(E.length=N,r.bones){M=1-M;for(var K=0;K<N;K++)E[K]*=M;}else {let m=r.vertices;for(var K=0;K<N;K++)E[K]+=(m[K]-E[K])*M;}}return}if(E.length=N,l>=H[H.length-1]){let r=P[H.length-1];if(M==1)if(X==3){let m=k;if(m.bones)for(let c=0;c<N;c++)E[c]+=r[c];else {let c=m.vertices;for(let d=0;d<N;d++)E[d]+=r[d]-c[d];}}else R.arrayCopy(r,0,E,0,N);else switch(X){case 0:{let c=k;if(c.bones)for(let d=0;d<N;d++)E[d]=r[d]*M;else {let d=c.vertices;for(let p=0;p<N;p++){let v=d[p];E[p]=v+(r[p]-v)*M;}}break}case 1:case 2:for(let c=0;c<N;c++)E[c]+=(r[c]-E[c])*M;break;case 3:let m=k;if(m.bones)for(let c=0;c<N;c++)E[c]+=r[c]*M;else {let c=m.vertices;for(let d=0;d<N;d++)E[d]+=(r[d]-c[d])*M;}}return}let i=It.search1(H,l),e=this.getCurvePercent(l,i),s=P[i],n=P[i+1];if(M==1)if(X==3){let r=k;if(r.bones)for(let m=0;m<N;m++){let c=s[m];E[m]+=c+(n[m]-c)*e;}else {let m=r.vertices;for(let c=0;c<N;c++){let d=s[c];E[c]+=d+(n[c]-d)*e-m[c];}}}else for(let r=0;r<N;r++){let m=s[r];E[r]=m+(n[r]-m)*e;}else switch(X){case 0:{let m=k;if(m.bones)for(let c=0;c<N;c++){let d=s[c];E[c]=(d+(n[c]-d)*e)*M;}else {let c=m.vertices;for(let d=0;d<N;d++){let p=s[d],v=c[d];E[d]=v+(p+(n[d]-p)*e-v)*M;}}break}case 1:case 2:for(let m=0;m<N;m++){let c=s[m];E[m]+=(c+(n[m]-c)*e-E[m])*M;}break;case 3:let r=k;if(r.bones)for(let m=0;m<N;m++){let c=s[m];E[m]+=(c+(n[m]-c)*e)*M;}else {let m=r.vertices;for(let c=0;c<N;c++){let d=s[c];E[c]+=(d+(n[c]-d)*e-m[c])*M;}}}}},Le=class extends It{constructor(t){super(t,Le.propertyIds),this.events=null,this.events=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,h){this.frames[t]=h.time,this.events[t]=h;}apply(t,h,l,g,M,X,b){if(!g)return;let x=this.frames,k=this.frames.length;if(h>l)this.apply(t,h,Number.MAX_VALUE,g,M,X,b),h=-1;else if(h>=x[k-1])return;if(l<x[0])return;let E=0;if(h<x[0])E=0;else {E=It.search1(x,h)+1;let P=x[E];for(;E>0&&x[E-1]==P;)E--;}for(;E<k&&l>=x[E];E++)g.push(this.events[E]);}},ye=Le;ye.propertyIds=[""+rt.event];var Ye=class extends It{constructor(t){super(t,Ye.propertyIds),this.drawOrders=null,this.drawOrders=new Array(t);}getFrameCount(){return this.frames.length}setFrame(t,h,l){this.frames[t]=h,this.drawOrders[t]=l;}apply(t,h,l,g,M,X,b){if(b==1){X==0&&R.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(l<this.frames[0]){(X==0||X==1)&&R.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let x=this.drawOrders[It.search1(this.frames,l)];if(!x)R.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else {let k=t.drawOrder,E=t.slots;for(let P=0,N=x.length;P<N;P++)k[P]=E[x[P]];}}},Xe=Ye;Xe.propertyIds=[""+rt.drawOrder];var qe=class extends ht{constructor(t,h,l){super(t,h,[rt.ikConstraint+"|"+l]),this.ikConstraintIndex=0,this.ikConstraintIndex=l;}getFrameEntries(){return 6}setFrame(t,h,l,g,M,X,b){t*=6,this.frames[t]=h,this.frames[t+1]=l,this.frames[t+2]=g,this.frames[t+3]=M,this.frames[t+4]=X?1:0,this.frames[t+5]=b?1:0;}apply(t,h,l,g,M,X,b){let x=t.ikConstraints[this.ikConstraintIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.mix=x.data.mix,x.softness=x.data.softness,x.bendDirection=x.data.bendDirection,x.compress=x.data.compress,x.stretch=x.data.stretch;return;case 1:x.mix+=(x.data.mix-x.mix)*M,x.softness+=(x.data.softness-x.softness)*M,x.bendDirection=x.data.bendDirection,x.compress=x.data.compress,x.stretch=x.data.stretch;}return}let E=0,P=0,N=It.search(k,l,6),H=this.curves[N/6];switch(H){case 0:let K=k[N];E=k[N+1],P=k[N+2];let i=(l-K)/(k[N+6]-K);E+=(k[N+6+1]-E)*i,P+=(k[N+6+2]-P)*i;break;case 1:E=k[N+1],P=k[N+2];break;default:E=this.getBezierValue(l,N,1,H-2),P=this.getBezierValue(l,N,2,H+18-2);}X==0?(x.mix=x.data.mix+(E-x.data.mix)*M,x.softness=x.data.softness+(P-x.data.softness)*M,b==1?(x.bendDirection=x.data.bendDirection,x.compress=x.data.compress,x.stretch=x.data.stretch):(x.bendDirection=k[N+3],x.compress=k[N+4]!=0,x.stretch=k[N+5]!=0)):(x.mix+=(E-x.mix)*M,x.softness+=(P-x.softness)*M,b==0&&(x.bendDirection=k[N+3],x.compress=k[N+4]!=0,x.stretch=k[N+5]!=0));}},ze=class extends ht{constructor(t,h,l){super(t,h,[rt.transformConstraint+"|"+l]),this.transformConstraintIndex=0,this.transformConstraintIndex=l;}getFrameEntries(){return 7}setFrame(t,h,l,g,M,X,b,x){let k=this.frames;t*=7,k[t]=h,k[t+1]=l,k[t+2]=g,k[t+3]=M,k[t+4]=X,k[t+5]=b,k[t+6]=x;}apply(t,h,l,g,M,X,b){let x=t.transformConstraints[this.transformConstraintIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){let n=x.data;switch(X){case 0:x.mixRotate=n.mixRotate,x.mixX=n.mixX,x.mixY=n.mixY,x.mixScaleX=n.mixScaleX,x.mixScaleY=n.mixScaleY,x.mixShearY=n.mixShearY;return;case 1:x.mixRotate+=(n.mixRotate-x.mixRotate)*M,x.mixX+=(n.mixX-x.mixX)*M,x.mixY+=(n.mixY-x.mixY)*M,x.mixScaleX+=(n.mixScaleX-x.mixScaleX)*M,x.mixScaleY+=(n.mixScaleY-x.mixScaleY)*M,x.mixShearY+=(n.mixShearY-x.mixShearY)*M;}return}let E,P,N,H,K,i,e=It.search(k,l,7),s=this.curves[e/7];switch(s){case 0:let n=k[e];E=k[e+1],P=k[e+2],N=k[e+3],H=k[e+4],K=k[e+5],i=k[e+6];let r=(l-n)/(k[e+7]-n);E+=(k[e+7+1]-E)*r,P+=(k[e+7+2]-P)*r,N+=(k[e+7+3]-N)*r,H+=(k[e+7+4]-H)*r,K+=(k[e+7+5]-K)*r,i+=(k[e+7+6]-i)*r;break;case 1:E=k[e+1],P=k[e+2],N=k[e+3],H=k[e+4],K=k[e+5],i=k[e+6];break;default:E=this.getBezierValue(l,e,1,s-2),P=this.getBezierValue(l,e,2,s+18-2),N=this.getBezierValue(l,e,3,s+36-2),H=this.getBezierValue(l,e,4,s+54-2),K=this.getBezierValue(l,e,5,s+72-2),i=this.getBezierValue(l,e,6,s+90-2);}if(X==0){let n=x.data;x.mixRotate=n.mixRotate+(E-n.mixRotate)*M,x.mixX=n.mixX+(P-n.mixX)*M,x.mixY=n.mixY+(N-n.mixY)*M,x.mixScaleX=n.mixScaleX+(H-n.mixScaleX)*M,x.mixScaleY=n.mixScaleY+(K-n.mixScaleY)*M,x.mixShearY=n.mixShearY+(i-n.mixShearY)*M;}else x.mixRotate+=(E-x.mixRotate)*M,x.mixX+=(P-x.mixX)*M,x.mixY+=(N-x.mixY)*M,x.mixScaleX+=(H-x.mixScaleX)*M,x.mixScaleY+=(K-x.mixScaleY)*M,x.mixShearY+=(i-x.mixShearY)*M;}},Ue=class extends ft{constructor(t,h,l){super(t,h,rt.pathConstraintPosition+"|"+l),this.pathConstraintIndex=0,this.pathConstraintIndex=l;}apply(t,h,l,g,M,X,b){let x=t.pathConstraints[this.pathConstraintIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.position=x.data.position;return;case 1:x.position+=(x.data.position-x.position)*M;}return}let E=this.getCurveValue(l);X==0?x.position=x.data.position+(E-x.data.position)*M:x.position+=(E-x.position)*M;}},Qe=class extends ft{constructor(t,h,l){super(t,h,rt.pathConstraintSpacing+"|"+l),this.pathConstraintIndex=0,this.pathConstraintIndex=l;}apply(t,h,l,g,M,X,b){let x=t.pathConstraints[this.pathConstraintIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.spacing=x.data.spacing;return;case 1:x.spacing+=(x.data.spacing-x.spacing)*M;}return}let E=this.getCurveValue(l);X==0?x.spacing=x.data.spacing+(E-x.data.spacing)*M:x.spacing+=(E-x.spacing)*M;}},We=class extends ht{constructor(t,h,l){super(t,h,[rt.pathConstraintMix+"|"+l]),this.pathConstraintIndex=0,this.pathConstraintIndex=l;}getFrameEntries(){return 4}setFrame(t,h,l,g,M){let X=this.frames;t<<=2,X[t]=h,X[t+1]=l,X[t+2]=g,X[t+3]=M;}apply(t,h,l,g,M,X,b){let x=t.pathConstraints[this.pathConstraintIndex];if(!x.active)return;let k=this.frames;if(l<k[0]){switch(X){case 0:x.mixRotate=x.data.mixRotate,x.mixX=x.data.mixX,x.mixY=x.data.mixY;return;case 1:x.mixRotate+=(x.data.mixRotate-x.mixRotate)*M,x.mixX+=(x.data.mixX-x.mixX)*M,x.mixY+=(x.data.mixY-x.mixY)*M;}return}let E,P,N,H=It.search(k,l,4),K=this.curves[H>>2];switch(K){case 0:let i=k[H];E=k[H+1],P=k[H+2],N=k[H+3];let e=(l-i)/(k[H+4]-i);E+=(k[H+4+1]-E)*e,P+=(k[H+4+2]-P)*e,N+=(k[H+4+3]-N)*e;break;case 1:E=k[H+1],P=k[H+2],N=k[H+3];break;default:E=this.getBezierValue(l,H,1,K-2),P=this.getBezierValue(l,H,2,K+18-2),N=this.getBezierValue(l,H,3,K+36-2);}if(X==0){let i=x.data;x.mixRotate=i.mixRotate+(E-i.mixRotate)*M,x.mixX=i.mixX+(P-i.mixX)*M,x.mixY=i.mixY+(N-i.mixY)*M;}else x.mixRotate+=(E-x.mixRotate)*M,x.mixX+=(P-x.mixX)*M,x.mixY+=(N-x.mixY)*M;}},Ze=class{constructor(t){this.data=null,this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new $e(this),this.propertyIDs=new a,this.animationsChanged=false,this.trackEntryPool=new q(()=>new Be),this.data=t;}static emptyAnimation(){return Ls||(Ls=new G("<empty>",[],0)),Ls}update(t){t*=this.timeScale;let h=this.tracks;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(!M)continue;M.animationLast=M.nextAnimationLast,M.trackLast=M.nextTrackLast;let X=t*M.timeScale;if(M.delay>0){if(M.delay-=X,M.delay>0)continue;X=-M.delay,M.delay=0;}let b=M.next;if(b){let x=M.trackLast-b.delay;if(x>=0){for(b.delay=0,b.trackTime+=M.timeScale==0?0:(x/M.timeScale+t)*b.timeScale,M.trackTime+=X,this.setCurrent(l,b,true);b.mixingFrom;)b.mixTime+=t,b=b.mixingFrom;continue}}else if(M.trackLast>=M.trackEnd&&!M.mixingFrom){h[l]=null,this.queue.end(M),this.clearNext(M);continue}if(M.mixingFrom&&this.updateMixingFrom(M,t)){let x=M.mixingFrom;for(M.mixingFrom=null,x&&(x.mixingTo=null);x;)this.queue.end(x),x=x.mixingFrom;}M.trackTime+=X;}this.queue.drain();}updateMixingFrom(t,h){let l=t.mixingFrom;if(!l)return  true;let g=this.updateMixingFrom(l,h);return l.animationLast=l.nextAnimationLast,l.trackLast=l.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((l.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=l.mixingFrom,l.mixingFrom&&(l.mixingFrom.mixingTo=t),t.interruptAlpha=l.interruptAlpha,this.queue.end(l)),g):(l.trackTime+=h*l.timeScale,t.mixTime+=h,false)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let h=this.events,l=this.tracks,g=false;for(let N=0,H=l.length;N<H;N++){let K=l[N];if(!K||K.delay>0)continue;g=true;let i=N==0?et.first:K.mixBlend,e=K.alpha;K.mixingFrom?e*=this.applyMixingFrom(K,t,i):K.trackTime>=K.trackEnd&&!K.next&&(e=0);let s=K.animationLast,n=K.getAnimationTime(),r=n,m=h;K.reverse&&(r=K.animation.duration-r,m=null);let c=K.animation.timelines,d=c.length;if(N==0&&e==1||i==et.add)for(let p=0;p<d;p++){var M=c[p];M instanceof Kt?this.applyAttachmentTimeline(M,t,r,i,true):M.apply(t,s,r,m,e,i,dt.mixIn);}else {let p=K.timelineMode,v=K.timelinesRotation.length!=d<<1;v&&(K.timelinesRotation.length=d<<1);for(let w=0;w<d;w++){let C=c[w],F=p[w]==ri?i:et.setup;C instanceof at?this.applyRotateTimeline(C,t,r,e,F,K.timelinesRotation,w<<1,v):C instanceof Kt?this.applyAttachmentTimeline(C,t,r,i,true):(C.apply(t,s,r,m,e,F,dt.mixIn));}}this.queueEvents(K,n),h.length=0,K.nextAnimationLast=n,K.nextTrackLast=K.trackTime;}for(var X=this.unkeyedState+Hi,b=t.slots,x=0,k=t.slots.length;x<k;x++){var E=b[x];if(E.attachmentState==X){var P=E.data.attachmentName;E.setAttachment(P?t.getAttachment(E.data.index,P):null);}}return this.unkeyedState+=2,this.queue.drain(),g}applyMixingFrom(t,h,l){let g=t.mixingFrom;g.mixingFrom&&this.applyMixingFrom(g,h,l);let M=0;t.mixDuration==0?(M=1,l==et.first&&(l=et.setup)):(M=t.mixTime/t.mixDuration,M>1&&(M=1),l!=et.first&&(l=g.mixBlend));let X=M<g.attachmentThreshold,b=M<g.drawOrderThreshold,x=g.animation.timelines,k=x.length,E=g.alpha*t.interruptAlpha,P=E*(1-M),N=g.animationLast,H=g.getAnimationTime(),K=H,i=null;if(g.reverse?K=g.animation.duration-K:M<g.eventThreshold&&(i=this.events),l==et.add)for(let e=0;e<k;e++)x[e].apply(h,N,K,i,P,l,dt.mixOut);else {let e=g.timelineMode,s=g.timelineHoldMix,n=g.timelinesRotation.length!=k<<1;n&&(g.timelinesRotation.length=k<<1),g.totalAlpha=0;for(let r=0;r<k;r++){let m=x[r],c=dt.mixOut,d,p=0;switch(e[r]){case ri:if(!b&&m instanceof Xe)continue;d=l,p=P;break;case hi:d=et.setup,p=P;break;case ti:d=l,p=E;break;case ci:d=et.setup,p=E;break;default:d=et.setup;let v=s[r];p=E*Math.max(0,1-v.mixTime/v.mixDuration);break}g.totalAlpha+=p,m instanceof at?this.applyRotateTimeline(m,h,K,p,d,g.timelinesRotation,r<<1,n):m instanceof Kt?this.applyAttachmentTimeline(m,h,K,d,X):(b&&m instanceof Xe&&d==et.setup&&(c=dt.mixIn),m.apply(h,N,K,i,p,d,c));}}return t.mixDuration>0&&this.queueEvents(g,H),this.events.length=0,g.nextAnimationLast=H,g.nextTrackLast=g.trackTime,M}applyAttachmentTimeline(t,h,l,g,M){var X=h.slots[t.slotIndex];!X.bone.active||(l<t.frames[0]?(g==et.setup||g==et.first)&&this.setAttachment(h,X,X.data.attachmentName,M):this.setAttachment(h,X,t.attachmentNames[It.search1(t.frames,l)],M),X.attachmentState<=this.unkeyedState&&(X.attachmentState=this.unkeyedState+Hi));}setAttachment(t,h,l,g){h.setAttachment(l?t.getAttachment(h.data.index,l):null),g&&(h.attachmentState=this.unkeyedState+ds);}applyRotateTimeline(t,h,l,g,M,X,b,x){if(x&&(X[b]=0),g==1){t.apply(h,0,l,null,1,M,dt.mixIn);return}let k=h.bones[t.boneIndex];if(!k.active)return;let E=t.frames,P=0,N=0;if(l<E[0])switch(M){case et.setup:k.rotation=k.data.rotation;default:return;case et.first:P=k.rotation,N=k.data.rotation;}else P=M==et.setup?k.data.rotation:k.rotation,N=k.data.rotation+t.getCurveValue(l);let H=0,K=N-P;if(K-=(16384-(16384.499999999996-K/360|0))*360,K==0)H=X[b];else {let i=0,e=0;x?(i=0,e=K):(i=X[b],e=X[b+1]);let s=K>0,n=i>=0;S.signum(e)!=S.signum(K)&&Math.abs(e)<=90&&(Math.abs(i)>180&&(i+=360*S.signum(i)),n=s),H=K+i-i%360,n!=s&&(H+=360*S.signum(i)),X[b]=H;}X[b+1]=K,k.rotation=P+H*g;}queueEvents(t,h){let l=t.animationStart,g=t.animationEnd,M=g-l,X=t.trackLast%M,b=this.events,x=0,k=b.length;for(;x<k;x++){let P=b[x];if(P.time<X)break;P.time>g||this.queue.event(t,P);}let E=false;for(t.loop?E=M==0||X>t.trackTime%M:E=h>=g&&t.animationLast<g,E&&this.queue.complete(t);x<k;x++){let P=b[x];P.time<l||this.queue.event(t,P);}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let h=0,l=this.tracks.length;h<l;h++)this.clearTrack(h);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain();}clearTrack(t){if(t>=this.tracks.length)return;let h=this.tracks[t];if(!h)return;this.queue.end(h),this.clearNext(h);let l=h;for(;;){let g=l.mixingFrom;if(!g)break;this.queue.end(g),l.mixingFrom=null,l.mixingTo=null,l=g;}this.tracks[h.trackIndex]=null,this.queue.drain();}setCurrent(t,h,l){let g=this.expandToIndex(t);this.tracks[t]=h,h.previous=null,g&&(l&&this.queue.interrupt(g),h.mixingFrom=g,g.mixingTo=h,h.mixTime=0,g.mixingFrom&&g.mixDuration>0&&(h.interruptAlpha*=Math.min(1,g.mixTime/g.mixDuration)),g.timelinesRotation.length=0),this.queue.start(h);}setAnimation(t,h,l=false){let g=this.data.skeletonData.findAnimation(h);if(!g)throw new Error("Animation not found: "+h);return this.setAnimationWith(t,g,l)}setAnimationWith(t,h,l=false){if(!h)throw new Error("animation cannot be null.");let g=true,M=this.expandToIndex(t);M&&(M.nextTrackLast==-1?(this.tracks[t]=M.mixingFrom,this.queue.interrupt(M),this.queue.end(M),this.clearNext(M),M=M.mixingFrom,g=false):this.clearNext(M));let X=this.trackEntry(t,h,l,M);return this.setCurrent(t,X,g),this.queue.drain(),X}addAnimation(t,h,l=false,g=0){let M=this.data.skeletonData.findAnimation(h);if(!M)throw new Error("Animation not found: "+h);return this.addAnimationWith(t,M,l,g)}addAnimationWith(t,h,l=false,g=0){if(!h)throw new Error("animation cannot be null.");let M=this.expandToIndex(t);if(M)for(;M.next;)M=M.next;let X=this.trackEntry(t,h,l,M);return M?(M.next=X,X.previous=M,g<=0&&(g+=M.getTrackComplete()-X.mixDuration)):(this.setCurrent(t,X,true),this.queue.drain()),X.delay=g,X}setEmptyAnimation(t,h=0){let l=this.setAnimationWith(t,Ze.emptyAnimation(),false);return l.mixDuration=h,l.trackEnd=h,l}addEmptyAnimation(t,h=0,l=0){let g=this.addAnimationWith(t,Ze.emptyAnimation(),false,l);return l<=0&&(g.delay+=g.mixDuration-h),g.mixDuration=h,g.trackEnd=h,g}setEmptyAnimations(t=0){let h=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let l=0,g=this.tracks.length;l<g;l++){let M=this.tracks[l];M&&this.setEmptyAnimation(M.trackIndex,t);}this.queue.drainDisabled=h,this.queue.drain();}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(R.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,h,l,g){let M=this.trackEntryPool.obtain();return M.reset(),M.trackIndex=t,M.animation=h,M.loop=l,M.holdPrevious=false,M.eventThreshold=0,M.attachmentThreshold=0,M.drawOrderThreshold=0,M.animationStart=0,M.animationEnd=h.duration,M.animationLast=-1,M.nextAnimationLast=-1,M.delay=0,M.trackTime=0,M.trackLast=-1,M.nextTrackLast=-1,M.trackEnd=Number.MAX_VALUE,M.timeScale=1,M.alpha=1,M.interruptAlpha=1,M.mixTime=0,M.mixDuration=g?this.data.getMix(g.animation,h):0,M.mixBlend=et.replace,M}clearNext(t){let h=t.next;for(;h;)this.queue.dispose(h),h=h.next;t.next=null;}_animationsChanged(){this.animationsChanged=false,this.propertyIDs.clear();let t=this.tracks;for(let h=0,l=t.length;h<l;h++){let g=t[h];if(g){for(;g.mixingFrom;)g=g.mixingFrom;do(!g.mixingTo||g.mixBlend!=et.add)&&this.computeHold(g),g=g.mixingTo;while(g)}}}computeHold(t){let h=t.mixingTo,l=t.animation.timelines,g=t.animation.timelines.length,M=t.timelineMode;M.length=g;let X=t.timelineHoldMix;X.length=0;let b=this.propertyIDs;if(h&&h.holdPrevious){for(let x=0;x<g;x++)M[x]=b.addAll(l[x].getPropertyIds())?ci:ti;return}t:for(let x=0;x<g;x++){let k=l[x],E=k.getPropertyIds();if(!b.addAll(E))M[x]=ri;else if(!h||k instanceof Kt||k instanceof Xe||k instanceof ye||!h.animation.hasTimeline(E))M[x]=hi;else {for(let P=h.mixingTo;P;P=P.mixingTo)if(!P.animation.hasTimeline(E)){if(t.mixDuration>0){M[x]=Mi,X[x]=P;continue t}break}M[x]=ci;}}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t);}removeListener(t){let h=this.listeners.indexOf(t);h>=0&&this.listeners.splice(h,1);}clearListeners(){this.listeners.length=0;}clearListenerNotifications(){this.queue.clear();}},Be=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=false,this.holdPrevious=false,this.reverse=false,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=et.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array;}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t;}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0;}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(t!=0){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},$e=class{constructor(t){this.objects=[],this.drainDisabled=false,this.animState=null,this.animState=t;}start(t){this.objects.push(De.start),this.objects.push(t),this.animState.animationsChanged=true;}interrupt(t){this.objects.push(De.interrupt),this.objects.push(t);}end(t){this.objects.push(De.end),this.objects.push(t),this.animState.animationsChanged=true;}dispose(t){this.objects.push(De.dispose),this.objects.push(t);}complete(t){this.objects.push(De.complete),this.objects.push(t);}event(t,h){this.objects.push(De.event),this.objects.push(t),this.objects.push(h);}drain(){if(this.drainDisabled)return;this.drainDisabled=true;let t=this.objects,h=this.animState.listeners;for(let l=0;l<t.length;l+=2){let g=t[l],M=t[l+1];switch(g){case De.start:M.listener&&M.listener.start&&M.listener.start(M);for(let b=0;b<h.length;b++)h[b].start&&h[b].start(M);break;case De.interrupt:M.listener&&M.listener.interrupt&&M.listener.interrupt(M);for(let b=0;b<h.length;b++)h[b].interrupt&&h[b].interrupt(M);break;case De.end:M.listener&&M.listener.end&&M.listener.end(M);for(let b=0;b<h.length;b++)h[b].end&&h[b].end(M);case De.dispose:M.listener&&M.listener.dispose&&M.listener.dispose(M);for(let b=0;b<h.length;b++)h[b].dispose&&h[b].dispose(M);this.animState.trackEntryPool.free(M);break;case De.complete:M.listener&&M.listener.complete&&M.listener.complete(M);for(let b=0;b<h.length;b++)h[b].complete&&h[b].complete(M);break;case De.event:let X=t[l+++2];M.listener&&M.listener.event&&M.listener.event(M,X);for(let b=0;b<h.length;b++)h[b].event&&h[b].event(M,X);break}}this.clear(),this.drainDisabled=false;}clear(){this.objects.length=0;}},De;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event";})(De||(De={}));var vi=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,h){}},ri=0,hi=1,ti=2,ci=3,Mi=4,Hi=1,ds=2,Ls=null,lr=class{constructor(t){if(this.skeletonData=null,this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t;}setMix(t,h,l){let g=this.skeletonData.findAnimation(t);if(!g)throw new Error("Animation not found: "+t);let M=this.skeletonData.findAnimation(h);if(!M)throw new Error("Animation not found: "+h);this.setMixWith(g,M,l);}setMixWith(t,h,l){if(!t)throw new Error("from cannot be null.");if(!h)throw new Error("to cannot be null.");let g=t.name+"."+h.name;this.animationToMixTime[g]=l;}getMix(t,h){let l=t.name+"."+h.name,g=this.animationToMixTime[l];return g===void 0?this.defaultMix:g}},Ji=class extends st{constructor(t){super(t),this.color=new u(1,1,1,1);}copy(){let t=new Ji(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},Di=class extends st{constructor(t){super(t),this.endSlot=null,this.color=new u(.2275,.2275,.8078,1);}copy(){let t=new Di(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},Bs=class{constructor(t){this._image=t;}getImage(){return this._image}},ni;(function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear";})(ni||(ni={}));var Ei;(function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat";})(Ei||(Ei={}));var us=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0;}},fs=class extends Bs{setFilters(t,h){}setWraps(t,h){}dispose(){}},Vs=class{constructor(t){this.pages=new Array,this.regions=new Array;let h=new Xs(t),l=new Array(4),g=null,M=null,X={};X.size=()=>{g.width=parseInt(l[1]),g.height=parseInt(l[2]);},X.format=()=>{},X.filter=()=>{g.minFilter=R.enumValue(ni,l[1]),g.magFilter=R.enumValue(ni,l[2]);},X.repeat=()=>{l[1].indexOf("x")!=-1&&(g.uWrap=Ei.Repeat),l[1].indexOf("y")!=-1&&(g.vWrap=Ei.Repeat);},X.pma=()=>{g.pma=l[1]=="true";};var b={};b.xy=()=>{M.x=parseInt(l[1]),M.y=parseInt(l[2]);},b.size=()=>{M.width=parseInt(l[1]),M.height=parseInt(l[2]);},b.bounds=()=>{M.x=parseInt(l[1]),M.y=parseInt(l[2]),M.width=parseInt(l[3]),M.height=parseInt(l[4]);},b.offset=()=>{M.offsetX=parseInt(l[1]),M.offsetY=parseInt(l[2]);},b.orig=()=>{M.originalWidth=parseInt(l[1]),M.originalHeight=parseInt(l[2]);},b.offsets=()=>{M.offsetX=parseInt(l[1]),M.offsetY=parseInt(l[2]),M.originalWidth=parseInt(l[3]),M.originalHeight=parseInt(l[4]);},b.rotate=()=>{let P=l[1];P=="true"?M.degrees=90:P!="false"&&(M.degrees=parseInt(P));},b.index=()=>{M.index=parseInt(l[1]);};let x=h.readLine();for(;x&&x.trim().length==0;)x=h.readLine();for(;!(!x||x.trim().length==0||h.readEntry(l,x)==0);)x=h.readLine();let k=null,E=null;for(;x!==null;)if(x.trim().length==0)g=null,x=h.readLine();else if(g){for(M=new Os,M.page=g,M.name=x;;){let P=h.readEntry(l,x=h.readLine());if(P==0)break;let N=b[l[0]];if(N)N();else {k||(k=[],E=[]),k.push(l[0]);let H=[];for(let K=0;K<P;K++)H.push(parseInt(l[K+1]));E.push(H);}}M.originalWidth==0&&M.originalHeight==0&&(M.originalWidth=M.width,M.originalHeight=M.height),k&&k.length>0&&(M.names=k,M.values=E,k=null,E=null),M.u=M.x/g.width,M.v=M.y/g.height,M.degrees==90?(M.u2=(M.x+M.height)/g.width,M.v2=(M.y+M.width)/g.height):(M.u2=(M.x+M.width)/g.width,M.v2=(M.y+M.height)/g.height),this.regions.push(M);}else {for(g=new Ds,g.name=x.trim();h.readEntry(l,x=h.readLine())!=0;){let P=X[l[0]];P&&P();}this.pages.push(g);}}findRegion(t){for(let h=0;h<this.regions.length;h++)if(this.regions[h].name==t)return this.regions[h];return null}setTextures(t,h=""){for(let l of this.pages)l.setTexture(t.get(h+l.name));}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].texture.dispose();}},Xs=class{constructor(t){this.lines=null,this.index=0,this.lines=t.split(/\r\n|\r|\n/);}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,h){if(!h||(h=h.trim(),h.length==0))return 0;let l=h.indexOf(":");if(l==-1)return 0;t[0]=h.substr(0,l).trim();for(let g=1,M=l+1;;g++){let X=h.indexOf(",",M);if(X==-1)return t[g]=h.substr(M).trim(),g;if(t[g]=h.substr(M,X-M).trim(),M=X+1,g==4)return 4}}},Ds=class{constructor(){this.name=null,this.minFilter=ni.Nearest,this.magFilter=ni.Nearest,this.uWrap=Ei.ClampToEdge,this.vWrap=Ei.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=false;}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);}},Os=class extends us{constructor(){super(...arguments),this.page=null,this.name=null,this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null;}},yi=class extends st{constructor(t){super(t),this.region=null,this.path=null,this.regionUVs=null,this.uvs=null,this.triangles=null,this.color=new u(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=null,this.parentMesh=null,this.tempColor=new u(0,0,0,0);}updateUVs(){let t=this.regionUVs;(!this.uvs||this.uvs.length!=t.length)&&(this.uvs=R.newFloatArray(t.length));let h=this.uvs,l=this.uvs.length,g=this.region.u,M=this.region.v,X=0,b=0;if(this.region instanceof Os){let x=this.region,k=x.page.texture.getImage(),E=k.width,P=k.height;switch(x.degrees){case 90:g-=(x.originalHeight-x.offsetY-x.height)/E,M-=(x.originalWidth-x.offsetX-x.width)/P,X=x.originalHeight/E,b=x.originalWidth/P;for(let N=0;N<l;N+=2)h[N]=g+t[N+1]*X,h[N+1]=M+(1-t[N])*b;return;case 180:g-=(x.originalWidth-x.offsetX-x.width)/E,M-=x.offsetY/P,X=x.originalWidth/E,b=x.originalHeight/P;for(let N=0;N<l;N+=2)h[N]=g+(1-t[N])*X,h[N+1]=M+(1-t[N+1])*b;return;case 270:g-=x.offsetY/E,M-=x.offsetX/P,X=x.originalHeight/E,b=x.originalWidth/P;for(let N=0;N<l;N+=2)h[N]=g+(1-t[N+1])*X,h[N+1]=M+t[N]*b;return}g-=x.offsetX/E,M-=(x.originalHeight-x.offsetY-x.height)/P,X=x.originalWidth/E,b=x.originalHeight/P;}else this.region?(X=this.region.u2-g,b=this.region.v2-M):(g=M=0,X=b=1);for(let x=0;x<l;x+=2)h[x]=g+t[x]*X,h[x+1]=M+t[x+1]*b;}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength);}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new yi(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),R.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),R.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),R.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=new Array(this.edges.length),R.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){let t=new yi(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.updateUVs(),t}},ui=class extends st{constructor(t){super(t),this.lengths=null,this.closed=false,this.constantSpeed=false,this.color=new u(1,1,1,1);}copy(){let t=new ui(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),R.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},_i=class extends st{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new u(.38,.94,0,1);}computeWorldPosition(t,h){return h.x=this.x*t.a+this.y*t.b+t.worldX,h.y=this.x*t.c+this.y*t.d+t.worldY,h}computeWorldRotation(t){let h=S.cosDeg(this.rotation),l=S.sinDeg(this.rotation),g=h*t.a+l*t.b,M=h*t.c+l*t.d;return Math.atan2(M,g)*S.radDeg}copy(){let t=new _i(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},Qi=class extends ct{constructor(t){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new u(1,1,1,1),this.path=null,this.rendererObject=null,this.region=null,this.offset=R.newFloatArray(8),this.uvs=R.newFloatArray(8),this.tempColor=new u(1,1,1,1);}updateOffset(){this.region;let h=this.width/this.region.originalWidth*this.scaleX,l=this.height/this.region.originalHeight*this.scaleY,g=-this.width/2*this.scaleX+this.region.offsetX*h,M=-this.height/2*this.scaleY+this.region.offsetY*l,X=g+this.region.width*h,b=M+this.region.height*l,x=this.rotation*Math.PI/180,k=Math.cos(x),E=Math.sin(x),P=this.x,N=this.y,H=g*k+P,K=g*E,i=M*k+N,e=M*E,s=X*k+P,n=X*E,r=b*k+N,m=b*E,c=this.offset;c[0]=H-e,c[1]=i+K,c[2]=H-m,c[3]=r+K,c[4]=s-m,c[5]=r+n,c[6]=s-e,c[7]=i+n;}setRegion(t){this.region=t;let h=this.uvs;t.degrees==90?(h[2]=t.u,h[3]=t.v2,h[4]=t.u,h[5]=t.v,h[6]=t.u2,h[7]=t.v,h[0]=t.u2,h[1]=t.v2):(h[0]=t.u,h[1]=t.v2,h[2]=t.u,h[3]=t.v,h[4]=t.u2,h[5]=t.v,h[6]=t.u2,h[7]=t.v2);}computeWorldVertices(t,h,l,g){let M=this.offset,X=t.worldX,b=t.worldY,x=t.a,k=t.b,E=t.c,P=t.d,N=0,H=0;N=M[0],H=M[1],h[l]=N*x+H*k+X,h[l+1]=N*E+H*P+b,l+=g,N=M[2],H=M[3],h[l]=N*x+H*k+X,h[l+1]=N*E+H*P+b,l+=g,N=M[4],H=M[5],h[l]=N*x+H*k+X,h[l+1]=N*E+H*P+b,l+=g,N=M[6],H=M[7],h[l]=N*x+H*k+X,h[l+1]=N*E+H*P+b;}copy(){let t=new Qi(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,R.arrayCopy(this.uvs,0,t.uvs,0,8),R.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}},Ie=Qi;Ie.X1=0,Ie.Y1=1,Ie.C1R=2,Ie.C1G=3,Ie.C1B=4,Ie.C1A=5,Ie.U1=6,Ie.V1=7,Ie.X2=8,Ie.Y2=9,Ie.C2R=10,Ie.C2G=11,Ie.C2B=12,Ie.C2A=13,Ie.U2=14,Ie.V2=15,Ie.X3=16,Ie.Y3=17,Ie.C3R=18,Ie.C3G=19,Ie.C3B=20,Ie.C3A=21,Ie.U3=22,Ie.V3=23,Ie.X4=24,Ie.Y4=25,Ie.C4R=26,Ie.C4G=27,Ie.C4B=28,Ie.C4A=29,Ie.U4=30,Ie.V4=31;var cr=class{constructor(t){this.atlas=null,this.atlas=t;}newRegionAttachment(t,h,l){let g=this.atlas.findRegion(l);if(!g)throw new Error("Region not found in atlas: "+l+" (region attachment: "+h+")");g.renderObject=g;let M=new Ie(h);return M.setRegion(g),M}newMeshAttachment(t,h,l){let g=this.atlas.findRegion(l);if(!g)throw new Error("Region not found in atlas: "+l+" (mesh attachment: "+h+")");g.renderObject=g;let M=new yi(h);return M.region=g,M}newBoundingBoxAttachment(t,h){return new Ji(h)}newPathAttachment(t,h){return new ui(h)}newPointAttachment(t,h){return new _i(h)}newClippingAttachment(t,h){return new Di(h)}},Ns=class{constructor(t,h,l){if(this.index=0,this.name=null,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=ii.Normal,this.skinRequired=false,this.color=new u,t<0)throw new Error("index must be >= 0.");if(!h)throw new Error("name cannot be null.");this.index=t,this.name=h,this.parent=l;}},ii;(function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection";})(ii||(ii={}));var Us=class{constructor(t,h,l){if(this.data=null,this.skeleton=null,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=false,this.active=false,!t)throw new Error("data cannot be null.");if(!h)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=h,this.parent=l,this.setToSetupPose();}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY);}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);}updateWorldTransformWith(t,h,l,g,M,X,b){this.ax=t,this.ay=h,this.arotation=l,this.ascaleX=g,this.ascaleY=M,this.ashearX=X,this.ashearY=b;let x=this.parent;if(!x){let H=this.skeleton,K=l+90+b,i=H.scaleX,e=H.scaleY;this.a=S.cosDeg(l+X)*g*i,this.b=S.cosDeg(K)*M*i,this.c=S.sinDeg(l+X)*g*e,this.d=S.sinDeg(K)*M*e,this.worldX=t*i+H.x,this.worldY=h*e+H.y;return}let k=x.a,E=x.b,P=x.c,N=x.d;switch(this.worldX=k*t+E*h+x.worldX,this.worldY=P*t+N*h+x.worldY,this.data.transformMode){case ii.Normal:{let H=l+90+b,K=S.cosDeg(l+X)*g,i=S.cosDeg(H)*M,e=S.sinDeg(l+X)*g,s=S.sinDeg(H)*M;this.a=k*K+E*e,this.b=k*i+E*s,this.c=P*K+N*e,this.d=P*i+N*s;return}case ii.OnlyTranslation:{let H=l+90+b;this.a=S.cosDeg(l+X)*g,this.b=S.cosDeg(H)*M,this.c=S.sinDeg(l+X)*g,this.d=S.sinDeg(H)*M;break}case ii.NoRotationOrReflection:{let H=k*k+P*P,K=0;H>1e-4?(H=Math.abs(k*N-E*P)/H,k/=this.skeleton.scaleX,P/=this.skeleton.scaleY,E=P*H,N=k*H,K=Math.atan2(P,k)*S.radDeg):(k=0,P=0,K=90-Math.atan2(N,E)*S.radDeg);let i=l+X-K,e=l+b-K+90,s=S.cosDeg(i)*g,n=S.cosDeg(e)*M,r=S.sinDeg(i)*g,m=S.sinDeg(e)*M;this.a=k*s-E*r,this.b=k*n-E*m,this.c=P*s+N*r,this.d=P*n+N*m;break}case ii.NoScale:case ii.NoScaleOrReflection:{let H=S.cosDeg(l),K=S.sinDeg(l),i=(k*H+E*K)/this.skeleton.scaleX,e=(P*H+N*K)/this.skeleton.scaleY,s=Math.sqrt(i*i+e*e);s>1e-5&&(s=1/s),i*=s,e*=s,s=Math.sqrt(i*i+e*e),this.data.transformMode==ii.NoScale&&k*N-E*P<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(s=-s);let n=Math.PI/2+Math.atan2(e,i),r=Math.cos(n)*s,m=Math.sin(n)*s,c=S.cosDeg(X)*g,d=S.cosDeg(90+b)*M,p=S.sinDeg(X)*g,v=S.sinDeg(90+b)*M;this.a=i*c+r*p,this.b=i*d+r*v,this.c=e*c+m*p,this.d=e*d+m*v;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY;}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY;}getWorldRotationX(){return Math.atan2(this.c,this.a)*S.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*S.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*S.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*S.radDeg;return}let h=t.a,l=t.b,g=t.c,M=t.d,X=1/(h*M-l*g),b=this.worldX-t.worldX,x=this.worldY-t.worldY;this.ax=b*M*X-x*l*X,this.ay=x*h*X-b*g*X;let k=X*M,E=X*h,P=X*l,N=X*g,H=k*this.a-P*this.c,K=k*this.b-P*this.d,i=E*this.c-N*this.a,e=E*this.d-N*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(H*H+i*i),this.ascaleX>1e-4){let s=H*e-K*i;this.ascaleY=s/this.ascaleX,this.ashearY=Math.atan2(H*K+i*e,s)*S.radDeg,this.arotation=Math.atan2(i,H)*S.radDeg;}else this.ascaleX=0,this.ascaleY=Math.sqrt(K*K+e*e),this.ashearY=0,this.arotation=90-Math.atan2(e,K)*S.radDeg;}worldToLocal(t){let h=1/(this.a*this.d-this.b*this.c),l=t.x-this.worldX,g=t.y-this.worldY;return t.x=l*this.d*h-g*this.b*h,t.y=g*this.a*h-l*this.c*h,t}localToWorld(t){let h=t.x,l=t.y;return t.x=h*this.a+l*this.b+this.worldX,t.y=h*this.c+l*this.d+this.worldY,t}worldToLocalRotation(t){let h=S.sinDeg(t),l=S.cosDeg(t);return Math.atan2(this.a*h-this.c*l,this.d*l-this.b*h)*S.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let h=S.sinDeg(t),l=S.cosDeg(t);return Math.atan2(l*this.c+h*this.d,l*this.a+h*this.b)*S.radDeg}rotateWorld(t){let h=this.a,l=this.b,g=this.c,M=this.d,X=S.cosDeg(t),b=S.sinDeg(t);this.a=X*h-b*g,this.b=X*l-b*M,this.c=b*h+X*g,this.d=b*l+X*M;}},Ki=class{constructor(t,h,l){this.name=t,this.order=h,this.skinRequired=l;}},ms=class{constructor(t,h="",l=null){this.pathPrefix=null,this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=h,this.downloader=l||new Li;}start(t){return this.toLoad++,this.pathPrefix+t}success(t,h,l){this.toLoad--,this.loaded++,this.assets[h]=l,t&&t(h,l);}error(t,h,l){this.toLoad--,this.loaded++,this.errors[h]=l,t&&t(h,l);}loadAll(){return new Promise((t,h)=>{let l=()=>{if(this.isLoadingComplete()){this.hasErrors()?h(this.errors):t(this);return}requestAnimationFrame(l);};requestAnimationFrame(l);})}setRawDataURI(t,h){this.downloader.rawDataUris[this.pathPrefix+t]=h;}loadBinary(t,h=null,l=null){t=this.start(t),this.downloader.downloadBinary(t,g=>{this.success(h,t,g);},(g,M)=>{this.error(l,t,`Couldn't load binary ${t}: status ${g}, ${M}`);});}loadText(t,h=null,l=null){t=this.start(t),this.downloader.downloadText(t,g=>{this.success(h,t,g);},(g,M)=>{this.error(l,t,`Couldn't load text ${t}: status ${g}, ${M}`);});}loadJson(t,h=null,l=null){t=this.start(t),this.downloader.downloadJson(t,g=>{this.success(h,t,g);},(g,M)=>{this.error(l,t,`Couldn't load JSON ${t}: status ${g}, ${M}`);});}loadTexture(t,h=null,l=null){if(t=this.start(t),!(typeof window<"u"&&typeof navigator<"u"&&window.document))fetch(t,{mode:"cors"}).then(g=>g.ok?g.blob():(this.error(l,t,`Couldn't load image: ${t}`),null)).then(g=>g?createImageBitmap(g,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(g=>{g&&this.success(h,t,this.textureLoader(g));});else {let g=new Image;g.crossOrigin="anonymous",g.onload=()=>{this.success(h,t,this.textureLoader(g));},g.onerror=()=>{this.error(l,t,`Couldn't load image: ${t}`);},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),g.src=t;}}loadTextureAtlas(t,h=null,l=null,g=null){let M=t.lastIndexOf("/"),X=M>=0?t.substring(0,M+1):"";t=this.start(t),this.downloader.downloadText(t,b=>{try{let x=new Vs(b),k=x.pages.length,E=!1;for(let P of x.pages)this.loadTexture(g==null?X+P.name:g[P.name],(N,H)=>{E||(P.setTexture(H),--k==0&&this.success(h,t,x));},(N,H)=>{E||this.error(l,t,`Couldn't load texture atlas ${t} page image: ${N}`),E=!0;});}catch(x){this.error(l,t,`Couldn't parse texture atlas ${t}: ${x.message}`);}},(b,x)=>{this.error(l,t,`Couldn't load texture atlas ${t}: status ${b}, ${x}`);});}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let h=this.assets[t];if(h)return h;let l=this.errors[t];throw Error("Asset not found: "+t+(l?`
`+l:""))}remove(t){t=this.pathPrefix+t;let h=this.assets[t];return h.dispose&&h.dispose(),delete this.assets[t],h}removeAll(){for(let t in this.assets){let h=this.assets[t];h.dispose&&h.dispose();}this.assets={};}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll();}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},Li=class{constructor(){this.callbacks={},this.rawDataUris={};}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let h=t.indexOf("base64,");return h!=-1?(h+=7,atob(t.substr(h))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var h=window.atob(t),l=h.length,g=new Uint8Array(l),M=0;M<l;M++)g[M]=h.charCodeAt(M);return g}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let h=t.indexOf("base64,");if(h==-1)throw new Error("Not a binary data URI.");return h+=7,this.base64ToUint8Array(t.substr(h))}downloadText(t,h,l){if(this.start(t,h,l))return;if(this.rawDataUris[t]){try{let X=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(X));}catch(X){this.finish(t,400,JSON.stringify(X));}return}let g=new XMLHttpRequest;g.overrideMimeType("text/html"),g.open("GET",t,true);let M=()=>{this.finish(t,g.status,g.responseText);};g.onload=M,g.onerror=M,g.send();}downloadJson(t,h,l){this.downloadText(t,g=>{h(JSON.parse(g));},l);}downloadBinary(t,h,l){if(this.start(t,h,l))return;if(this.rawDataUris[t]){try{let X=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(X));}catch(X){this.finish(t,400,JSON.stringify(X));}return}let g=new XMLHttpRequest;g.open("GET",t,true),g.responseType="arraybuffer";let M=()=>{this.finish(t,g.status,g.response);};g.onload=()=>{g.status==200||g.status==0?this.finish(t,200,new Uint8Array(g.response)):M();},g.onerror=M,g.send();}start(t,h,l){let g=this.callbacks[t];try{if(g)return !0;this.callbacks[t]=g=[];}finally{g.push(h,l);}}finish(t,h,l){let g=this.callbacks[t];delete this.callbacks[t];let M=h==200||h==0?[l]:[h,l];for(let X=M.length-1,b=g.length;X<b;X+=2)g[X].apply(null,M);}},Yi=class{constructor(t,h){if(this.data=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!h)throw new Error("data cannot be null.");this.time=t,this.data=h;}},gs=class{constructor(t){this.name=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t;}},Oi=class{constructor(t,h){if(this.data=null,this.bones=null,this.target=null,this.bendDirection=0,this.compress=false,this.stretch=false,this.mix=1,this.softness=0,this.active=false,!t)throw new Error("data cannot be null.");if(!h)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let l=0;l<t.bones.length;l++)this.bones.push(h.findBone(t.bones[l].name));this.target=h.findBone(t.target.name);}isActive(){return this.active}update(){if(this.mix==0)return;let t=this.target,h=this.bones;switch(h.length){case 1:this.apply1(h[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(h[0],h[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(t,h,l,g,M,X,b){let x=t.parent,k=x.a,E=x.b,P=x.c,N=x.d,H=-t.ashearX-t.arotation,K=0,i=0;switch(t.data.transformMode){case ii.OnlyTranslation:K=h-t.worldX,i=l-t.worldY;break;case ii.NoRotationOrReflection:let n=Math.abs(k*N-E*P)/(k*k+P*P),r=k/t.skeleton.scaleX,m=P/t.skeleton.scaleY;E=-m*n*t.skeleton.scaleX,N=r*n*t.skeleton.scaleY,H+=Math.atan2(m,r)*S.radDeg;default:let c=h-x.worldX,d=l-x.worldY,p=k*N-E*P;K=(c*N-d*E)/p-t.ax,i=(d*k-c*P)/p-t.ay;}H+=Math.atan2(i,K)*S.radDeg,t.ascaleX<0&&(H+=180),H>180?H-=360:H<-180&&(H+=360);let e=t.ascaleX,s=t.ascaleY;if(g||M){switch(t.data.transformMode){case ii.NoScale:case ii.NoScaleOrReflection:K=h-t.worldX,i=l-t.worldY;}let n=t.data.length*e,r=Math.sqrt(K*K+i*i);if(g&&r<n||M&&r>n&&n>1e-4){let m=(r/n-1)*b+1;e*=m,X&&(s*=m);}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+H*b,e,s,t.ashearX,t.ashearY);}apply2(t,h,l,g,M,X,b,x,k){let E=t.ax,P=t.ay,N=t.ascaleX,H=t.ascaleY,K=N,i=H,e=h.ascaleX,s=0,n=0,r=0;N<0?(N=-N,s=180,r=-1):(s=0,r=1),H<0&&(H=-H,r=-r),e<0?(e=-e,n=180):n=0;let m=h.ax,c=0,d=0,p=0,v=t.a,w=t.b,C=t.c,F=t.d,V=Math.abs(N-H)<=1e-4;!V||X?(c=0,d=v*m+t.worldX,p=C*m+t.worldY):(c=h.ay,d=v*m+w*c+t.worldX,p=C*m+F*c+t.worldY);let B=t.parent;v=B.a,w=B.b,C=B.c,F=B.d;let z=1/(v*F-w*C),W=d-B.worldX,Z=p-B.worldY,J=(W*F-Z*w)*z-E,j=(Z*v-W*C)*z-P,_=Math.sqrt(J*J+j*j),tt=h.data.length*e,nt,xt;if(_<1e-4){this.apply1(t,l,g,false,X,false,k),h.updateWorldTransformWith(m,c,0,h.ascaleX,h.ascaleY,h.ashearX,h.ashearY);return}W=l-B.worldX,Z=g-B.worldY;let gt=(W*F-Z*w)*z-E,pt=(Z*v-W*C)*z-P,Ct=gt*gt+pt*pt;if(x!=0){x*=N*(e+1)*.5;let Ut=Math.sqrt(Ct),bt=Ut-_-tt*N+x;if(bt>0){let Et=Math.min(1,bt/(x*2))-1;Et=(bt-x*(1-Et*Et))/Ut,gt-=Et*gt,pt-=Et*pt,Ct=gt*gt+pt*pt;}}t:if(V){tt*=N;let Ut=(Ct-_*_-tt*tt)/(2*_*tt);Ut<-1?(Ut=-1,xt=Math.PI*M):Ut>1?(Ut=1,xt=0,X&&(v=(Math.sqrt(Ct)/(_+tt)-1)*k+1,K*=v,b&&(i*=v))):xt=Math.acos(Ut)*M,v=_+tt*Ut,w=tt*Math.sin(xt),nt=Math.atan2(pt*v-gt*w,gt*v+pt*w);}else {v=N*tt,w=H*tt;let Ut=v*v,bt=w*w,Et=Math.atan2(pt,gt);C=bt*_*_+Ut*Ct-Ut*bt;let Ht=-2*bt*_,Se=bt-Ut;if(F=Ht*Ht-4*Se*C,F>=0){let Ke=Math.sqrt(F);Ht<0&&(Ke=-Ke),Ke=-(Ht+Ke)*.5;let je=Ke/Se,si=C/Ke,_e=Math.abs(je)<Math.abs(si)?je:si;if(_e*_e<=Ct){Z=Math.sqrt(Ct-_e*_e)*M,nt=Et-Math.atan2(Z,_e),xt=Math.atan2(Z/H,(_e-_)/N);break t}}let xe=S.PI,be=_-v,Pe=be*be,Re=0,Ge=0,ne=_+v,Te=ne*ne,Fe=0;C=-v*_/(Ut-bt),C>=-1&&C<=1&&(C=Math.acos(C),W=v*Math.cos(C)+_,Z=w*Math.sin(C),F=W*W+Z*Z,F<Pe&&(xe=C,Pe=F,be=W,Re=Z),F>Te&&(Ge=C,Te=F,ne=W,Fe=Z)),Ct<=(Pe+Te)*.5?(nt=Et-Math.atan2(Re*M,be),xt=xe*M):(nt=Et-Math.atan2(Fe*M,ne),xt=Ge*M);}let Yt=Math.atan2(c,m)*r,Xt=t.arotation;nt=(nt-Yt)*S.radDeg+s-Xt,nt>180?nt-=360:nt<-180&&(nt+=360),t.updateWorldTransformWith(E,P,Xt+nt*k,K,i,0,0),Xt=h.arotation,xt=((xt+Yt)*S.radDeg-h.ashearX)*r+n-Xt,xt>180?xt-=360:xt<-180&&(xt+=360),h.updateWorldTransformWith(m,c,Xt+xt*k,h.ascaleX,h.ascaleY,h.ashearX,h.ashearY);}},Ws=class extends Ki{constructor(t){super(t,0,false),this.bones=new Array,this.target=null,this.bendDirection=1,this.compress=false,this.stretch=false,this.uniform=false,this.mix=1,this.softness=0;}},$i=class extends Ki{constructor(t){super(t,0,false),this.bones=new Array,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0;}},di;(function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent";})(di||(di={}));var He;(function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional";})(He||(He={}));var fi;(function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale";})(fi||(fi={}));var wi=class{constructor(t,h){if(this.data=null,this.bones=null,this.target=null,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=false,!t)throw new Error("data cannot be null.");if(!h)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let l=0,g=t.bones.length;l<g;l++)this.bones.push(h.findBone(t.bones[l].name));this.target=h.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY;}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof ui))return;let h=this.mixRotate,l=this.mixX,g=this.mixY;if(h==0&&l==0&&g==0)return;let M=this.data,X=M.rotateMode==fi.Tangent,b=M.rotateMode==fi.ChainScale,x=this.bones,k=x.length,E=X?k:k+1,P=R.setArraySize(this.spaces,E),N=b?this.lengths=R.setArraySize(this.lengths,k):null,H=this.spacing;switch(M.spacingMode){case He.Percent:if(b)for(let c=0,d=E-1;c<d;c++){let p=x[c],v=p.data.length;if(v<wi.epsilon)N[c]=0;else {let w=v*p.a,C=v*p.c;N[c]=Math.sqrt(w*w+C*C);}}R.arrayFill(P,1,E,H);break;case He.Proportional:let r=0;for(let c=0,d=E-1;c<d;){let p=x[c],v=p.data.length;if(v<wi.epsilon)b&&(N[c]=0),P[++c]=H;else {let w=v*p.a,C=v*p.c,F=Math.sqrt(w*w+C*C);b&&(N[c]=F),P[++c]=F,r+=F;}}if(r>0){r=E/r*H;for(let c=1;c<E;c++)P[c]*=r;}break;default:let m=M.spacingMode==He.Length;for(let c=0,d=E-1;c<d;){let p=x[c],v=p.data.length;if(v<wi.epsilon)b&&(N[c]=0),P[++c]=H;else {let w=v*p.a,C=v*p.c,F=Math.sqrt(w*w+C*C);b&&(N[c]=F),P[++c]=(m?v+H:H)*F/v;}}}let K=this.computeWorldPositions(t,E,X),i=K[0],e=K[1],s=M.offsetRotation,n=false;if(s==0)n=M.rotateMode==fi.Chain;else {n=false;let r=this.target.bone;s*=r.a*r.d-r.b*r.c>0?S.degRad:-S.degRad;}for(let r=0,m=3;r<k;r++,m+=3){let c=x[r];c.worldX+=(i-c.worldX)*l,c.worldY+=(e-c.worldY)*g;let d=K[m],p=K[m+1],v=d-i,w=p-e;if(b){let C=N[r];if(C!=0){let F=(Math.sqrt(v*v+w*w)/C-1)*h+1;c.a*=F,c.c*=F;}}if(i=d,e=p,h>0){let C=c.a,F=c.b,V=c.c,B=c.d,z=0,W=0,Z=0;if(X?z=K[m-1]:P[r+1]==0?z=K[m+2]:z=Math.atan2(w,v),z-=Math.atan2(V,C),n){W=Math.cos(z),Z=Math.sin(z);let J=c.data.length;i+=(J*(W*C-Z*V)-v)*h,e+=(J*(Z*C+W*V)-w)*h;}else z+=s;z>S.PI?z-=S.PI2:z<-S.PI&&(z+=S.PI2),z*=h,W=Math.cos(z),Z=Math.sin(z),c.a=W*C-Z*V,c.b=W*F-Z*B,c.c=Z*C+W*V,c.d=Z*F+W*B;}c.updateAppliedTransform();}}computeWorldPositions(t,h,l){let g=this.target,M=this.position,X=this.spaces,b=R.setArraySize(this.positions,h*3+2),x=null,k=t.closed,E=t.worldVerticesLength,P=E/6,N=wi.NONE;if(!t.constantSpeed){let j=t.lengths;P-=k?1:2;let _=j[P];this.data.positionMode==di.Percent&&(M*=_);let tt;switch(this.data.spacingMode){case He.Percent:tt=_;break;case He.Proportional:tt=_/h;break;default:tt=1;}x=R.setArraySize(this.world,8);for(let nt=0,xt=0,gt=0;nt<h;nt++,xt+=3){let pt=X[nt]*tt;M+=pt;let Ct=M;if(k)Ct%=_,Ct<0&&(Ct+=_),gt=0;else if(Ct<0){N!=wi.BEFORE&&(N=wi.BEFORE,t.computeWorldVertices(g,2,4,x,0,2)),this.addBeforePosition(Ct,x,0,b,xt);continue}else if(Ct>_){N!=wi.AFTER&&(N=wi.AFTER,t.computeWorldVertices(g,E-6,4,x,0,2)),this.addAfterPosition(Ct-_,x,0,b,xt);continue}for(;;gt++){let Yt=j[gt];if(!(Ct>Yt)){if(gt==0)Ct/=Yt;else {let Xt=j[gt-1];Ct=(Ct-Xt)/(Yt-Xt);}break}}gt!=N&&(N=gt,k&&gt==P?(t.computeWorldVertices(g,E-4,4,x,0,2),t.computeWorldVertices(g,0,4,x,4,2)):t.computeWorldVertices(g,gt*6+2,8,x,0,2)),this.addCurvePosition(Ct,x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],b,xt,l||nt>0&&pt==0);}return b}k?(E+=2,x=R.setArraySize(this.world,E),t.computeWorldVertices(g,2,E-4,x,0,2),t.computeWorldVertices(g,0,2,x,E-4,2),x[E-2]=x[0],x[E-1]=x[1]):(P--,E-=4,x=R.setArraySize(this.world,E),t.computeWorldVertices(g,2,E,x,0,2));let H=R.setArraySize(this.curves,P),K=0,i=x[0],e=x[1],s=0,n=0,r=0,m=0,c=0,d=0,p=0,v=0,w=0,C=0,F=0,V=0,B=0,z=0;for(let j=0,_=2;j<P;j++,_+=6)s=x[_],n=x[_+1],r=x[_+2],m=x[_+3],c=x[_+4],d=x[_+5],p=(i-s*2+r)*.1875,v=(e-n*2+m)*.1875,w=((s-r)*3-i+c)*.09375,C=((n-m)*3-e+d)*.09375,F=p*2+w,V=v*2+C,B=(s-i)*.75+p+w*.16666667,z=(n-e)*.75+v+C*.16666667,K+=Math.sqrt(B*B+z*z),B+=F,z+=V,F+=w,V+=C,K+=Math.sqrt(B*B+z*z),B+=F,z+=V,K+=Math.sqrt(B*B+z*z),B+=F+w,z+=V+C,K+=Math.sqrt(B*B+z*z),H[j]=K,i=c,e=d;this.data.positionMode==di.Percent&&(M*=K);let W;switch(this.data.spacingMode){case He.Percent:W=K;break;case He.Proportional:W=K/h;break;default:W=1;}let Z=this.segments,J=0;for(let j=0,_=0,tt=0,nt=0;j<h;j++,_+=3){let xt=X[j]*W;M+=xt;let gt=M;if(k)gt%=K,gt<0&&(gt+=K),tt=0;else if(gt<0){this.addBeforePosition(gt,x,0,b,_);continue}else if(gt>K){this.addAfterPosition(gt-K,x,E-4,b,_);continue}for(;;tt++){let pt=H[tt];if(!(gt>pt)){if(tt==0)gt/=pt;else {let Ct=H[tt-1];gt=(gt-Ct)/(pt-Ct);}break}}if(tt!=N){N=tt;let pt=tt*6;for(i=x[pt],e=x[pt+1],s=x[pt+2],n=x[pt+3],r=x[pt+4],m=x[pt+5],c=x[pt+6],d=x[pt+7],p=(i-s*2+r)*.03,v=(e-n*2+m)*.03,w=((s-r)*3-i+c)*.006,C=((n-m)*3-e+d)*.006,F=p*2+w,V=v*2+C,B=(s-i)*.3+p+w*.16666667,z=(n-e)*.3+v+C*.16666667,J=Math.sqrt(B*B+z*z),Z[0]=J,pt=1;pt<8;pt++)B+=F,z+=V,F+=w,V+=C,J+=Math.sqrt(B*B+z*z),Z[pt]=J;B+=F,z+=V,J+=Math.sqrt(B*B+z*z),Z[8]=J,B+=F+w,z+=V+C,J+=Math.sqrt(B*B+z*z),Z[9]=J,nt=0;}for(gt*=J;;nt++){let pt=Z[nt];if(!(gt>pt)){if(nt==0)gt/=pt;else {let Ct=Z[nt-1];gt=nt+(gt-Ct)/(pt-Ct);}break}}this.addCurvePosition(gt*.1,i,e,s,n,r,m,c,d,b,_,l||j>0&&xt==0);}return b}addBeforePosition(t,h,l,g,M){let X=h[l],b=h[l+1],x=h[l+2]-X,k=h[l+3]-b,E=Math.atan2(k,x);g[M]=X+t*Math.cos(E),g[M+1]=b+t*Math.sin(E),g[M+2]=E;}addAfterPosition(t,h,l,g,M){let X=h[l+2],b=h[l+3],x=X-h[l],k=b-h[l+1],E=Math.atan2(k,x);g[M]=X+t*Math.cos(E),g[M+1]=b+t*Math.sin(E),g[M+2]=E;}addCurvePosition(t,h,l,g,M,X,b,x,k,E,P,N){if(t==0||isNaN(t)){E[P]=h,E[P+1]=l,E[P+2]=Math.atan2(M-l,g-h);return}let H=t*t,K=H*t,i=1-t,e=i*i,s=e*i,n=i*t,r=n*3,m=i*r,c=r*t,d=h*s+g*m+X*c+x*K,p=l*s+M*m+b*c+k*K;E[P]=d,E[P+1]=p,N&&(t<.001?E[P+2]=Math.atan2(M-l,g-h):E[P+2]=Math.atan2(p-(l*e+M*n*2+b*H),d-(h*e+g*n*2+X*H)));}},Bi=wi;Bi.NONE=-1,Bi.BEFORE=-2,Bi.AFTER=-3,Bi.epsilon=1e-5;var ps=class{constructor(t,h){if(this.data=null,this.bone=null,this.color=null,this.darkColor=null,this.attachment=null,this.attachmentTime=0,this.attachmentState=0,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!h)throw new Error("bone cannot be null.");this.data=t,this.bone=h,this.color=new u,this.darkColor=t.darkColor?new u:null,this.setToSetupPose();}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&((!(t instanceof st)||!(this.attachment instanceof st)||t.deformAttachment!=this.attachment.deformAttachment)&&(this.deform.length=0),this.attachment=t,this.attachmentTime=this.bone.skeleton.time);}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t;}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null;}},xs=class{constructor(t,h){if(this.data=null,this.bones=null,this.target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new $,this.active=false,!t)throw new Error("data cannot be null.");if(!h)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let l=0;l<t.bones.length;l++)this.bones.push(h.findBone(t.bones[l].name));this.target=h.findBone(t.target.name);}isActive(){return this.active}update(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld());}applyAbsoluteWorld(){let t=this.mixRotate,h=this.mixX,l=this.mixY,g=this.mixScaleX,M=this.mixScaleY,X=this.mixShearY,b=h!=0||l!=0,x=this.target,k=x.a,E=x.b,P=x.c,N=x.d,H=k*N-E*P>0?S.degRad:-S.degRad,K=this.data.offsetRotation*H,i=this.data.offsetShearY*H,e=this.bones;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(t!=0){let m=r.a,c=r.b,d=r.c,p=r.d,v=Math.atan2(P,k)-Math.atan2(d,m)+K;v>S.PI?v-=S.PI2:v<-S.PI&&(v+=S.PI2),v*=t;let w=Math.cos(v),C=Math.sin(v);r.a=w*m-C*d,r.b=w*c-C*p,r.c=C*m+w*d,r.d=C*c+w*p;}if(b){let m=this.temp;x.localToWorld(m.set(this.data.offsetX,this.data.offsetY)),r.worldX+=(m.x-r.worldX)*h,r.worldY+=(m.y-r.worldY)*l;}if(g!=0){let m=Math.sqrt(r.a*r.a+r.c*r.c);m!=0&&(m=(m+(Math.sqrt(k*k+P*P)-m+this.data.offsetScaleX)*g)/m),r.a*=m,r.c*=m;}if(M!=0){let m=Math.sqrt(r.b*r.b+r.d*r.d);m!=0&&(m=(m+(Math.sqrt(E*E+N*N)-m+this.data.offsetScaleY)*M)/m),r.b*=m,r.d*=m;}if(X>0){let m=r.b,c=r.d,d=Math.atan2(c,m),p=Math.atan2(N,E)-Math.atan2(P,k)-(d-Math.atan2(r.c,r.a));p>S.PI?p-=S.PI2:p<-S.PI&&(p+=S.PI2),p=d+(p+i)*X;let v=Math.sqrt(m*m+c*c);r.b=Math.cos(p)*v,r.d=Math.sin(p)*v;}r.updateAppliedTransform();}}applyRelativeWorld(){let t=this.mixRotate,h=this.mixX,l=this.mixY,g=this.mixScaleX,M=this.mixScaleY,X=this.mixShearY,b=h!=0||l!=0,x=this.target,k=x.a,E=x.b,P=x.c,N=x.d,H=k*N-E*P>0?S.degRad:-S.degRad,K=this.data.offsetRotation*H,i=this.data.offsetShearY*H,e=this.bones;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(t!=0){let m=r.a,c=r.b,d=r.c,p=r.d,v=Math.atan2(P,k)+K;v>S.PI?v-=S.PI2:v<-S.PI&&(v+=S.PI2),v*=t;let w=Math.cos(v),C=Math.sin(v);r.a=w*m-C*d,r.b=w*c-C*p,r.c=C*m+w*d,r.d=C*c+w*p;}if(b){let m=this.temp;x.localToWorld(m.set(this.data.offsetX,this.data.offsetY)),r.worldX+=m.x*h,r.worldY+=m.y*l;}if(g!=0){let m=(Math.sqrt(k*k+P*P)-1+this.data.offsetScaleX)*g+1;r.a*=m,r.c*=m;}if(M!=0){let m=(Math.sqrt(E*E+N*N)-1+this.data.offsetScaleY)*M+1;r.b*=m,r.d*=m;}if(X>0){let m=Math.atan2(N,E)-Math.atan2(P,k);m>S.PI?m-=S.PI2:m<-S.PI&&(m+=S.PI2);let c=r.b,d=r.d;m=Math.atan2(d,c)+(m-S.PI/2+i)*X;let p=Math.sqrt(c*c+d*d);r.b=Math.cos(m)*p,r.d=Math.sin(m)*p;}r.updateAppliedTransform();}}applyAbsoluteLocal(){let t=this.mixRotate,h=this.mixX,l=this.mixY,g=this.mixScaleX,M=this.mixScaleY,X=this.mixShearY,b=this.target,x=this.bones;for(let k=0,E=x.length;k<E;k++){let P=x[k],N=P.arotation;if(t!=0){let n=b.arotation-N+this.data.offsetRotation;n-=(16384-(16384.499999999996-n/360|0))*360,N+=n*t;}let H=P.ax,K=P.ay;H+=(b.ax-H+this.data.offsetX)*h,K+=(b.ay-K+this.data.offsetY)*l;let i=P.ascaleX,e=P.ascaleY;g!=0&&i!=0&&(i=(i+(b.ascaleX-i+this.data.offsetScaleX)*g)/i),M!=0&&e!=0&&(e=(e+(b.ascaleY-e+this.data.offsetScaleY)*M)/e);let s=P.ashearY;if(X!=0){let n=b.ashearY-s+this.data.offsetShearY;n-=(16384-(16384.499999999996-n/360|0))*360,s+=n*X;}P.updateWorldTransformWith(H,K,N,i,e,P.ashearX,s);}}applyRelativeLocal(){let t=this.mixRotate,h=this.mixX,l=this.mixY,g=this.mixScaleX,M=this.mixScaleY,X=this.mixShearY,b=this.target,x=this.bones;for(let k=0,E=x.length;k<E;k++){let P=x[k],N=P.arotation+(b.arotation+this.data.offsetRotation)*t,H=P.ax+(b.ax+this.data.offsetX)*h,K=P.ay+(b.ay+this.data.offsetY)*l,i=P.ascaleX*((b.ascaleX-1+this.data.offsetScaleX)*g+1),e=P.ascaleY*((b.ascaleY-1+this.data.offsetScaleY)*M+1),s=P.ashearY+(b.ashearY+this.data.offsetShearY)*X;P.updateWorldTransformWith(H,K,N,i,e,P.ashearX,s);}}},Gs=class{constructor(t){if(this.data=null,this.bones=null,this.slots=null,this.drawOrder=null,this.ikConstraints=null,this.transformConstraints=null,this.pathConstraints=null,this._updateCache=new Array,this.skin=null,this.color=null,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let h=0;h<t.bones.length;h++){let l=t.bones[h],g;if(!l.parent)g=new Us(l,this,null);else {let M=this.bones[l.parent.index];g=new Us(l,this,M),M.children.push(g);}this.bones.push(g);}this.slots=new Array,this.drawOrder=new Array;for(let h=0;h<t.slots.length;h++){let l=t.slots[h],g=this.bones[l.boneData.index],M=new ps(l,g);this.slots.push(M),this.drawOrder.push(M);}this.ikConstraints=new Array;for(let h=0;h<t.ikConstraints.length;h++){let l=t.ikConstraints[h];this.ikConstraints.push(new Oi(l,this));}this.transformConstraints=new Array;for(let h=0;h<t.transformConstraints.length;h++){let l=t.transformConstraints[h];this.transformConstraints.push(new xs(l,this));}this.pathConstraints=new Array;for(let h=0;h<t.pathConstraints.length;h++){let l=t.pathConstraints[h];this.pathConstraints.push(new Bi(l,this));}this.color=new u(1,1,1,1),this.updateCache();}updateCache(){let t=this._updateCache;t.length=0;let h=this.bones;for(let E=0,P=h.length;E<P;E++){let N=h[E];N.sorted=N.data.skinRequired,N.active=!N.sorted;}if(this.skin){let E=this.skin.bones;for(let P=0,N=this.skin.bones.length;P<N;P++){let H=this.bones[E[P].index];do H.sorted=false,H.active=true,H=H.parent;while(H)}}let l=this.ikConstraints,g=this.transformConstraints,M=this.pathConstraints,X=l.length,b=g.length,x=M.length,k=X+b+x;t:for(let E=0;E<k;E++){for(let P=0;P<X;P++){let N=l[P];if(N.data.order==E){this.sortIkConstraint(N);continue t}}for(let P=0;P<b;P++){let N=g[P];if(N.data.order==E){this.sortTransformConstraint(N);continue t}}for(let P=0;P<x;P++){let N=M[P];if(N.data.order==E){this.sortPathConstraint(N);continue t}}}for(let E=0,P=h.length;E<P;E++)this.sortBone(h[E]);}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&R.contains(this.skin.constraints,t.data,true)),!t.active)return;let h=t.target;this.sortBone(h);let l=t.bones,g=l[0];if(this.sortBone(g),l.length==1)this._updateCache.push(t),this.sortReset(g.children);else {let M=l[l.length-1];this.sortBone(M),this._updateCache.push(t),this.sortReset(g.children),M.sorted=true;}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&R.contains(this.skin.constraints,t.data,true)),!t.active)return;let h=t.target,l=h.data.index,g=h.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,l,g),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,l,g);for(let x=0,k=this.data.skins.length;x<k;x++)this.sortPathConstraintAttachment(this.data.skins[x],l,g);let M=h.getAttachment();M instanceof ui&&this.sortPathConstraintAttachmentWith(M,g);let X=t.bones,b=X.length;for(let x=0;x<b;x++)this.sortBone(X[x]);this._updateCache.push(t);for(let x=0;x<b;x++)this.sortReset(X[x].children);for(let x=0;x<b;x++)X[x].sorted=true;}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&R.contains(this.skin.constraints,t.data,true)),!t.active)return;this.sortBone(t.target);let h=t.bones,l=h.length;if(t.data.local)for(let g=0;g<l;g++){let M=h[g];this.sortBone(M.parent),this.sortBone(M);}else for(let g=0;g<l;g++)this.sortBone(h[g]);this._updateCache.push(t);for(let g=0;g<l;g++)this.sortReset(h[g].children);for(let g=0;g<l;g++)h[g].sorted=true;}sortPathConstraintAttachment(t,h,l){let g=t.attachments[h];if(g)for(let M in g)this.sortPathConstraintAttachmentWith(g[M],l);}sortPathConstraintAttachmentWith(t,h){if(!(t instanceof ui))return;let l=t.bones;if(!l)this.sortBone(h);else {let g=this.bones;for(let M=0,X=l.length;M<X;){let b=l[M++];for(b+=M;M<b;)this.sortBone(g[l[M++]]);}}}sortBone(t){if(t.sorted)return;let h=t.parent;h&&this.sortBone(h),t.sorted=true,this._updateCache.push(t);}sortReset(t){for(let h=0,l=t.length;h<l;h++){let g=t[h];!g.active||(g.sorted&&this.sortReset(g.children),g.sorted=false);}}updateWorldTransform(){let t=this.bones;for(let l=0,g=t.length;l<g;l++){let M=t[l];M.ax=M.x,M.ay=M.y,M.arotation=M.rotation,M.ascaleX=M.scaleX,M.ascaleY=M.scaleY,M.ashearX=M.shearX,M.ashearY=M.shearY;}let h=this._updateCache;for(let l=0,g=h.length;l<g;l++)h[l].update();}updateWorldTransformWith(t){let h=this.getRootBone(),l=t.a,g=t.b,M=t.c,X=t.d;h.worldX=l*this.x+g*this.y+t.worldX,h.worldY=M*this.x+X*this.y+t.worldY;let b=h.rotation+90+h.shearY,x=S.cosDeg(h.rotation+h.shearX)*h.scaleX,k=S.cosDeg(b)*h.scaleY,E=S.sinDeg(h.rotation+h.shearX)*h.scaleX,P=S.sinDeg(b)*h.scaleY;h.a=(l*x+g*E)*this.scaleX,h.b=(l*k+g*P)*this.scaleX,h.c=(M*x+X*E)*this.scaleY,h.d=(M*k+X*P)*this.scaleY;let N=this._updateCache;for(let H=0,K=N.length;H<K;H++){let i=N[H];i!=h&&i.update();}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose();}setBonesToSetupPose(){let t=this.bones;for(let M=0,X=t.length;M<X;M++)t[M].setToSetupPose();let h=this.ikConstraints;for(let M=0,X=h.length;M<X;M++){let b=h[M];b.mix=b.data.mix,b.softness=b.data.softness,b.bendDirection=b.data.bendDirection,b.compress=b.data.compress,b.stretch=b.data.stretch;}let l=this.transformConstraints;for(let M=0,X=l.length;M<X;M++){let b=l[M],x=b.data;b.mixRotate=x.mixRotate,b.mixX=x.mixX,b.mixY=x.mixY,b.mixScaleX=x.mixScaleX,b.mixScaleY=x.mixScaleY,b.mixShearY=x.mixShearY;}let g=this.pathConstraints;for(let M=0,X=g.length;M<X;M++){let b=g[M],x=b.data;b.position=x.position,b.spacing=x.spacing,b.mixRotate=x.mixRotate,b.mixX=x.mixX,b.mixY=x.mixY;}}setSlotsToSetupPose(){let t=this.slots;R.arrayCopy(t,0,this.drawOrder,0,t.length);for(let h=0,l=t.length;h<l;h++)t[h].setToSetupPose();}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let h=this.bones;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.data.name==t)return M}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let h=this.slots;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.data.name==t)return M}return null}setSkinByName(t){let h=this.data.findSkin(t);if(!h)throw new Error("Skin not found: "+t);this.setSkin(h);}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else {let h=this.slots;for(let l=0,g=h.length;l<g;l++){let M=h[l],X=M.data.attachmentName;if(X){let b=t.getAttachment(l,X);b&&M.setAttachment(b);}}}this.skin=t,this.updateCache();}}getAttachmentByName(t,h){return this.getAttachment(this.data.findSlot(t).index,h)}getAttachment(t,h){if(!h)throw new Error("attachmentName cannot be null.");if(this.skin){let l=this.skin.getAttachment(t,h);if(l)return l}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,h):null}setAttachment(t,h){if(!t)throw new Error("slotName cannot be null.");let l=this.slots;for(let g=0,M=l.length;g<M;g++){let X=l[g];if(X.data.name==t){let b=null;if(h&&(b=this.getAttachment(g,h),!b))throw new Error("Attachment not found: "+h+", for slot: "+t);X.setAttachment(b);return}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let h=this.ikConstraints;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.data.name==t)return M}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let h=this.transformConstraints;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.data.name==t)return M}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let h=this.pathConstraints;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.data.name==t)return M}return null}getBoundsRect(){let t=new $,h=new $;return this.getBounds(t,h),{x:t.x,y:t.y,width:h.x,height:h.y}}getBounds(t,h,l=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!h)throw new Error("size cannot be null.");let g=this.drawOrder,M=Number.POSITIVE_INFINITY,X=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,x=Number.NEGATIVE_INFINITY;for(let k=0,E=g.length;k<E;k++){let P=g[k];if(!P.bone.active)continue;let N=0,H=null,K=P.getAttachment();if(K instanceof Ie)N=8,H=R.setArraySize(l,N,0),K.computeWorldVertices(P.bone,H,0,2);else if(K instanceof yi){let i=K;N=i.worldVerticesLength,H=R.setArraySize(l,N,0),i.computeWorldVertices(P,0,N,H,0,2);}if(H)for(let i=0,e=H.length;i<e;i+=2){let s=H[i],n=H[i+1];M=Math.min(M,s),X=Math.min(X,n),b=Math.max(b,s),x=Math.max(x,n);}}t.set(M,X),h.set(b-M,x-X);}update(t){this.time+=t;}},vs=class{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null;}findBone(t){if(!t)throw new Error("boneName cannot be null.");let h=this.bones;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.name==t)return M}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let h=this.slots;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.name==t)return M}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let h=this.skins;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.name==t)return M}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let h=this.events;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.name==t)return M}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let h=this.animations;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.name==t)return M}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let h=this.ikConstraints;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.name==t)return M}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let h=this.transformConstraints;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.name==t)return M}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let h=this.pathConstraints;for(let l=0,g=h.length;l<g;l++){let M=h[l];if(M.name==t)return M}return null}},ts=class{constructor(t=0,h=null,l=null){this.slotIndex=t,this.name=h,this.attachment=l;}},Ni=class{constructor(t){if(this.name=null,this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t;}setAttachment(t,h,l){if(!l)throw new Error("attachment cannot be null.");let g=this.attachments;t>=g.length&&(g.length=t+1),g[t]||(g[t]={}),g[t][h]=l;}addSkin(t){for(let g=0;g<t.bones.length;g++){let M=t.bones[g],X=false;for(let b=0;b<this.bones.length;b++)if(this.bones[b]==M){X=true;break}X||this.bones.push(M);}for(let g=0;g<t.constraints.length;g++){let M=t.constraints[g],X=false;for(let b=0;b<this.constraints.length;b++)if(this.constraints[b]==M){X=true;break}X||this.constraints.push(M);}let h=t.getAttachments();for(let g=0;g<h.length;g++){var l=h[g];this.setAttachment(l.slotIndex,l.name,l.attachment);}}copySkin(t){for(let g=0;g<t.bones.length;g++){let M=t.bones[g],X=false;for(let b=0;b<this.bones.length;b++)if(this.bones[b]==M){X=true;break}X||this.bones.push(M);}for(let g=0;g<t.constraints.length;g++){let M=t.constraints[g],X=false;for(let b=0;b<this.constraints.length;b++)if(this.constraints[b]==M){X=true;break}X||this.constraints.push(M);}let h=t.getAttachments();for(let g=0;g<h.length;g++){var l=h[g];!l.attachment||(l.attachment instanceof yi?(l.attachment=l.attachment.newLinkedMesh(),this.setAttachment(l.slotIndex,l.name,l.attachment)):(l.attachment=l.attachment.copy(),this.setAttachment(l.slotIndex,l.name,l.attachment)));}}getAttachment(t,h){let l=this.attachments[t];return l?l[h]:null}removeAttachment(t,h){let l=this.attachments[t];l&&(l[h]=null);}getAttachments(){let t=new Array;for(var h=0;h<this.attachments.length;h++){let l=this.attachments[h];if(l)for(let g in l){let M=l[g];M&&t.push(new ts(h,g,M));}}return t}getAttachmentsForSlot(t,h){let l=this.attachments[t];if(l)for(let g in l){let M=l[g];M&&h.push(new ts(t,g,M));}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0;}attachAll(t,h){let l=0;for(let g=0;g<t.slots.length;g++){let M=t.slots[g],X=M.getAttachment();if(X&&l<h.attachments.length){let b=h.attachments[l];for(let x in b){let k=b[x];if(X==k){let E=this.getAttachment(l,x);E&&M.setAttachment(E);break}}}l++;}}},es=class{constructor(t,h,l){if(this.index=0,this.name=null,this.boneData=null,this.color=new u(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=null,t<0)throw new Error("index must be >= 0.");if(!h)throw new Error("name cannot be null.");if(!l)throw new Error("boneData cannot be null.");this.index=t,this.name=h,this.boneData=l;}},ei;(function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen";})(ei||(ei={}));var is=class extends Ki{constructor(t){super(t,0,false),this.bones=new Array,this.target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=false,this.local=false;}},dr=class{constructor(t){this.scale=1,this.attachmentLoader=null,this.linkedMeshes=new Array,this.attachmentLoader=t;}readSkeletonData(t){let h=this.scale,l=new vs;l.name="";let g=new ur(t),M=g.readInt32(),X=g.readInt32();l.hash=X==0&&M==0?null:X.toString(16)+M.toString(16),l.version=g.readString(),l.x=g.readFloat(),l.y=g.readFloat(),l.width=g.readFloat(),l.height=g.readFloat();let b=g.readBoolean();b&&(l.fps=g.readFloat(),l.imagesPath=g.readString(),l.audioPath=g.readString());let x=0;x=g.readInt(true);for(let E=0;E<x;E++)g.strings.push(g.readString());x=g.readInt(true);for(let E=0;E<x;E++){let P=g.readString(),N=E==0?null:l.bones[g.readInt(true)],H=new Ns(E,P,N);H.rotation=g.readFloat(),H.x=g.readFloat()*h,H.y=g.readFloat()*h,H.scaleX=g.readFloat(),H.scaleY=g.readFloat(),H.shearX=g.readFloat(),H.shearY=g.readFloat(),H.length=g.readFloat()*h,H.transformMode=g.readInt(true),H.skinRequired=g.readBoolean(),b&&u.rgba8888ToColor(H.color,g.readInt32()),l.bones.push(H);}x=g.readInt(true);for(let E=0;E<x;E++){let P=g.readString(),N=l.bones[g.readInt(true)],H=new es(E,P,N);u.rgba8888ToColor(H.color,g.readInt32());let K=g.readInt32();K!=-1&&u.rgb888ToColor(H.darkColor=new u,K),H.attachmentName=g.readStringRef(),H.blendMode=g.readInt(true),l.slots.push(H);}x=g.readInt(true);for(let E=0,P;E<x;E++){let N=new Ws(g.readString());N.order=g.readInt(true),N.skinRequired=g.readBoolean(),P=g.readInt(true);for(let H=0;H<P;H++)N.bones.push(l.bones[g.readInt(true)]);N.target=l.bones[g.readInt(true)],N.mix=g.readFloat(),N.softness=g.readFloat()*h,N.bendDirection=g.readByte(),N.compress=g.readBoolean(),N.stretch=g.readBoolean(),N.uniform=g.readBoolean(),l.ikConstraints.push(N);}x=g.readInt(true);for(let E=0,P;E<x;E++){let N=new is(g.readString());N.order=g.readInt(true),N.skinRequired=g.readBoolean(),P=g.readInt(true);for(let H=0;H<P;H++)N.bones.push(l.bones[g.readInt(true)]);N.target=l.bones[g.readInt(true)],N.local=g.readBoolean(),N.relative=g.readBoolean(),N.offsetRotation=g.readFloat(),N.offsetX=g.readFloat()*h,N.offsetY=g.readFloat()*h,N.offsetScaleX=g.readFloat(),N.offsetScaleY=g.readFloat(),N.offsetShearY=g.readFloat(),N.mixRotate=g.readFloat(),N.mixX=g.readFloat(),N.mixY=g.readFloat(),N.mixScaleX=g.readFloat(),N.mixScaleY=g.readFloat(),N.mixShearY=g.readFloat(),l.transformConstraints.push(N);}x=g.readInt(true);for(let E=0,P;E<x;E++){let N=new $i(g.readString());N.order=g.readInt(true),N.skinRequired=g.readBoolean(),P=g.readInt(true);for(let H=0;H<P;H++)N.bones.push(l.bones[g.readInt(true)]);N.target=l.slots[g.readInt(true)],N.positionMode=g.readInt(true),N.spacingMode=g.readInt(true),N.rotateMode=g.readInt(true),N.offsetRotation=g.readFloat(),N.position=g.readFloat(),N.positionMode==di.Fixed&&(N.position*=h),N.spacing=g.readFloat(),(N.spacingMode==He.Length||N.spacingMode==He.Fixed)&&(N.spacing*=h),N.mixRotate=g.readFloat(),N.mixX=g.readFloat(),N.mixY=g.readFloat(),l.pathConstraints.push(N);}let k=this.readSkin(g,l,true,b);k&&(l.defaultSkin=k,l.skins.push(k));{let E=l.skins.length;for(R.setArraySize(l.skins,x=E+g.readInt(true));E<x;E++)l.skins[E]=this.readSkin(g,l,false,b);}x=this.linkedMeshes.length;for(let E=0;E<x;E++){let P=this.linkedMeshes[E],N=(P.skin?l.findSkin(P.skin):l.defaultSkin).getAttachment(P.slotIndex,P.parent);P.mesh.deformAttachment=P.inheritDeform?N:P.mesh,P.mesh.setParentMesh(N),P.mesh.updateUVs();}this.linkedMeshes.length=0,x=g.readInt(true);for(let E=0;E<x;E++){let P=new gs(g.readStringRef());P.intValue=g.readInt(false),P.floatValue=g.readFloat(),P.stringValue=g.readString(),P.audioPath=g.readString(),P.audioPath&&(P.volume=g.readFloat(),P.balance=g.readFloat()),l.events.push(P);}x=g.readInt(true);for(let E=0;E<x;E++)l.animations.push(this.readAnimation(g,g.readString(),l));return l}readSkin(t,h,l,g){let M=null,X=0;if(l){if(X=t.readInt(true),X==0)return null;M=new Ni("default");}else {M=new Ni(t.readStringRef()),M.bones.length=t.readInt(true);for(let b=0,x=M.bones.length;b<x;b++)M.bones[b]=h.bones[t.readInt(true)];for(let b=0,x=t.readInt(true);b<x;b++)M.constraints.push(h.ikConstraints[t.readInt(true)]);for(let b=0,x=t.readInt(true);b<x;b++)M.constraints.push(h.transformConstraints[t.readInt(true)]);for(let b=0,x=t.readInt(true);b<x;b++)M.constraints.push(h.pathConstraints[t.readInt(true)]);X=t.readInt(true);}for(let b=0;b<X;b++){let x=t.readInt(true);for(let k=0,E=t.readInt(true);k<E;k++){let P=t.readStringRef(),N=this.readAttachment(t,h,M,x,P,g);N&&M.setAttachment(x,P,N);}}return M}readAttachment(t,h,l,g,M,X){let b=this.scale,x=t.readStringRef();switch(x||(x=M),t.readByte()){case Ai.Region:{let k=t.readStringRef(),E=t.readFloat(),P=t.readFloat(),N=t.readFloat(),H=t.readFloat(),K=t.readFloat(),i=t.readFloat(),e=t.readFloat(),s=t.readInt32();k||(k=x);let n=this.attachmentLoader.newRegionAttachment(l,x,k);return n?(n.path=k,n.x=P*b,n.y=N*b,n.scaleX=H,n.scaleY=K,n.rotation=E,n.width=i*b,n.height=e*b,u.rgba8888ToColor(n.color,s),n.updateOffset(),n):null}case Ai.BoundingBox:{let k=t.readInt(true),E=this.readVertices(t,k),P=X?t.readInt32():0,N=this.attachmentLoader.newBoundingBoxAttachment(l,x);return N?(N.worldVerticesLength=k<<1,N.vertices=E.vertices,N.bones=E.bones,X&&u.rgba8888ToColor(N.color,P),N):null}case Ai.Mesh:{let k=t.readStringRef(),E=t.readInt32(),P=t.readInt(true),N=this.readFloatArray(t,P<<1,1),H=this.readShortArray(t),K=this.readVertices(t,P),i=t.readInt(true),e=null,s=0,n=0;X&&(e=this.readShortArray(t),s=t.readFloat(),n=t.readFloat()),k||(k=x);let r=this.attachmentLoader.newMeshAttachment(l,x,k);return r?(r.path=k,u.rgba8888ToColor(r.color,E),r.bones=K.bones,r.vertices=K.vertices,r.worldVerticesLength=P<<1,r.triangles=H,r.regionUVs=N,r.updateUVs(),r.hullLength=i<<1,X&&(r.edges=e,r.width=s*b,r.height=n*b),r):null}case Ai.LinkedMesh:{let k=t.readStringRef(),E=t.readInt32(),P=t.readStringRef(),N=t.readStringRef(),H=t.readBoolean(),K=0,i=0;X&&(K=t.readFloat(),i=t.readFloat()),k||(k=x);let e=this.attachmentLoader.newMeshAttachment(l,x,k);return e?(e.path=k,u.rgba8888ToColor(e.color,E),X&&(e.width=K*b,e.height=i*b),this.linkedMeshes.push(new fr(e,P,g,N,H)),e):null}case Ai.Path:{let k=t.readBoolean(),E=t.readBoolean(),P=t.readInt(true),N=this.readVertices(t,P),H=R.newArray(P/3,0);for(let e=0,s=H.length;e<s;e++)H[e]=t.readFloat()*b;let K=X?t.readInt32():0,i=this.attachmentLoader.newPathAttachment(l,x);return i?(i.closed=k,i.constantSpeed=E,i.worldVerticesLength=P<<1,i.vertices=N.vertices,i.bones=N.bones,i.lengths=H,X&&u.rgba8888ToColor(i.color,K),i):null}case Ai.Point:{let k=t.readFloat(),E=t.readFloat(),P=t.readFloat(),N=X?t.readInt32():0,H=this.attachmentLoader.newPointAttachment(l,x);return H?(H.x=E*b,H.y=P*b,H.rotation=k,X&&u.rgba8888ToColor(H.color,N),H):null}case Ai.Clipping:{let k=t.readInt(true),E=t.readInt(true),P=this.readVertices(t,E),N=X?t.readInt32():0,H=this.attachmentLoader.newClippingAttachment(l,x);return H?(H.endSlot=h.slots[k],H.worldVerticesLength=E<<1,H.vertices=P.vertices,H.bones=P.bones,X&&u.rgba8888ToColor(H.color,N),H):null}}return null}readVertices(t,h){let l=this.scale,g=h<<1,M=new mr;if(!t.readBoolean())return M.vertices=this.readFloatArray(t,g,l),M;let X=new Array,b=new Array;for(let x=0;x<h;x++){let k=t.readInt(true);b.push(k);for(let E=0;E<k;E++)b.push(t.readInt(true)),X.push(t.readFloat()*l),X.push(t.readFloat()*l),X.push(t.readFloat());}return M.vertices=R.toFloatArray(X),M.bones=b,M}readFloatArray(t,h,l){let g=new Array(h);if(l==1)for(let M=0;M<h;M++)g[M]=t.readFloat();else for(let M=0;M<h;M++)g[M]=t.readFloat()*l;return g}readShortArray(t){let h=t.readInt(true),l=new Array(h);for(let g=0;g<h;g++)l[g]=t.readShort();return l}readAnimation(t,h,l){t.readInt(true);let g=new Array,M=this.scale;for(let P=0,N=t.readInt(true);P<N;P++){let H=t.readInt(true);for(let K=0,i=t.readInt(true);K<i;K++){let e=t.readByte(),s=t.readInt(true),n=s-1;switch(e){case Hs:{let r=new Kt(s,H);for(let m=0;m<s;m++)r.setFrame(m,t.readFloat(),t.readStringRef());g.push(r);break}case Ce:{let r=t.readInt(true),m=new Ft(s,r,H),c=t.readFloat(),d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255;for(let C=0,F=0;m.setFrame(C,c,d,p,v,w),C!=n;C++){let V=t.readFloat(),B=t.readUnsignedByte()/255,z=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255;switch(t.readByte()){case mi:m.setStepped(C);break;case gi:Ee(t,m,F++,C,0,c,V,d,B,1),Ee(t,m,F++,C,1,c,V,p,z,1),Ee(t,m,F++,C,2,c,V,v,W,1),Ee(t,m,F++,C,3,c,V,w,Z,1);}c=V,d=B,p=z,v=W,w=Z;}g.push(m);break}case Nr:{let r=t.readInt(true),m=new Tt(s,r,H),c=t.readFloat(),d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255;for(let w=0,C=0;m.setFrame(w,c,d,p,v),w!=n;w++){let F=t.readFloat(),V=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,z=t.readUnsignedByte()/255;switch(t.readByte()){case mi:m.setStepped(w);break;case gi:Ee(t,m,C++,w,0,c,F,d,V,1),Ee(t,m,C++,w,1,c,F,p,B,1),Ee(t,m,C++,w,2,c,F,v,z,1);}c=F,d=V,p=B,v=z;}g.push(m);break}case Ur:{let r=t.readInt(true),m=new _t(s,r,H),c=t.readFloat(),d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,V=t.readUnsignedByte()/255;for(let B=0,z=0;m.setFrame(B,c,d,p,v,w,C,F,V),B!=n;B++){let W=t.readFloat(),Z=t.readUnsignedByte()/255,J=t.readUnsignedByte()/255,j=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,tt=t.readUnsignedByte()/255,nt=t.readUnsignedByte()/255,xt=t.readUnsignedByte()/255;switch(t.readByte()){case mi:m.setStepped(B);break;case gi:Ee(t,m,z++,B,0,c,W,d,Z,1),Ee(t,m,z++,B,1,c,W,p,J,1),Ee(t,m,z++,B,2,c,W,v,j,1),Ee(t,m,z++,B,3,c,W,w,_,1),Ee(t,m,z++,B,4,c,W,C,tt,1),Ee(t,m,z++,B,5,c,W,F,nt,1),Ee(t,m,z++,B,6,c,W,V,xt,1);}c=W,d=Z,p=J,v=j,w=_,C=tt,F=nt,V=xt;}g.push(m);break}case Wr:{let r=t.readInt(true),m=new ie(s,r,H),c=t.readFloat(),d=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255;for(let V=0,B=0;m.setFrame(V,c,d,p,v,w,C,F),V!=n;V++){let z=t.readFloat(),W=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255,J=t.readUnsignedByte()/255,j=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,tt=t.readUnsignedByte()/255;switch(t.readByte()){case mi:m.setStepped(V);break;case gi:Ee(t,m,B++,V,0,c,z,d,W,1),Ee(t,m,B++,V,1,c,z,p,Z,1),Ee(t,m,B++,V,2,c,z,v,J,1),Ee(t,m,B++,V,3,c,z,w,j,1),Ee(t,m,B++,V,4,c,z,C,_,1),Ee(t,m,B++,V,5,c,z,F,tt,1);}c=z,d=W,p=Z,v=J,w=j,C=_,F=tt;}g.push(m);break}case Gr:{let r=new At(s,t.readInt(true),H),m=t.readFloat(),c=t.readUnsignedByte()/255;for(let d=0,p=0;r.setFrame(d,m,c),d!=n;d++){let v=t.readFloat(),w=t.readUnsignedByte()/255;switch(t.readByte()){case mi:r.setStepped(d);break;case gi:Ee(t,r,p++,d,0,m,v,c,w,1);}m=v,c=w;}g.push(r);break}}}}for(let P=0,N=t.readInt(true);P<N;P++){let H=t.readInt(true);for(let K=0,i=t.readInt(true);K<i;K++){let e=t.readByte(),s=t.readInt(true),n=t.readInt(true);switch(e){case zs:g.push(Si(t,new at(s,n,H),1));break;case ys:g.push(Ms(t,new Q(s,n,H),M));break;case Zs:g.push(Si(t,new ot(s,n,H),M));break;case js:g.push(Si(t,new Mt(s,n,H),M));break;case qs:g.push(Ms(t,new yt(s,n,H),1));break;case Xr:g.push(Si(t,new Bt(s,n,H),1));break;case gr:g.push(Si(t,new Dt(s,n,H),1));break;case Dr:g.push(Ms(t,new Lt(s,n,H),1));break;case Or:g.push(Si(t,new Vt(s,n,H),1));break;case ai:g.push(Si(t,new Gt(s,n,H),1));}}}for(let P=0,N=t.readInt(true);P<N;P++){let H=t.readInt(true),K=t.readInt(true),i=K-1,e=new qe(K,t.readInt(true),H),s=t.readFloat(),n=t.readFloat(),r=t.readFloat()*M;for(let m=0,c=0;e.setFrame(m,s,n,r,t.readByte(),t.readBoolean(),t.readBoolean()),m!=i;m++){let d=t.readFloat(),p=t.readFloat(),v=t.readFloat()*M;switch(t.readByte()){case mi:e.setStepped(m);break;case gi:Ee(t,e,c++,m,0,s,d,n,p,1),Ee(t,e,c++,m,1,s,d,r,v,M);}s=d,n=p,r=v;}g.push(e);}for(let P=0,N=t.readInt(true);P<N;P++){let H=t.readInt(true),K=t.readInt(true),i=K-1,e=new ze(K,t.readInt(true),H),s=t.readFloat(),n=t.readFloat(),r=t.readFloat(),m=t.readFloat(),c=t.readFloat(),d=t.readFloat(),p=t.readFloat();for(let v=0,w=0;e.setFrame(v,s,n,r,m,c,d,p),v!=i;v++){let C=t.readFloat(),F=t.readFloat(),V=t.readFloat(),B=t.readFloat(),z=t.readFloat(),W=t.readFloat(),Z=t.readFloat();switch(t.readByte()){case mi:e.setStepped(v);break;case gi:Ee(t,e,w++,v,0,s,C,n,F,1),Ee(t,e,w++,v,1,s,C,r,V,1),Ee(t,e,w++,v,2,s,C,m,B,1),Ee(t,e,w++,v,3,s,C,c,z,1),Ee(t,e,w++,v,4,s,C,d,W,1),Ee(t,e,w++,v,5,s,C,p,Z,1);}s=C,n=F,r=V,m=B,c=z,d=W,p=Z;}g.push(e);}for(let P=0,N=t.readInt(true);P<N;P++){let H=t.readInt(true),K=l.pathConstraints[H];for(let i=0,e=t.readInt(true);i<e;i++)switch(t.readByte()){case zr:g.push(Si(t,new Ue(t.readInt(true),t.readInt(true),H),K.positionMode==di.Fixed?M:1));break;case Zr:g.push(Si(t,new Qe(t.readInt(true),t.readInt(true),H),K.spacingMode==He.Length||K.spacingMode==He.Fixed?M:1));break;case jr:let s=new We(t.readInt(true),t.readInt(true),H),n=t.readFloat(),r=t.readFloat(),m=t.readFloat(),c=t.readFloat();for(let d=0,p=0,v=s.getFrameCount()-1;s.setFrame(d,n,r,m,c),d!=v;d++){let w=t.readFloat(),C=t.readFloat(),F=t.readFloat(),V=t.readFloat();switch(t.readByte()){case mi:s.setStepped(d);break;case gi:Ee(t,s,p++,d,0,n,w,r,C,1),Ee(t,s,p++,d,1,n,w,m,F,1),Ee(t,s,p++,d,2,n,w,c,V,1);}n=w,r=C,m=F,c=V;}g.push(s);}}for(let P=0,N=t.readInt(true);P<N;P++){let H=l.skins[t.readInt(true)];for(let K=0,i=t.readInt(true);K<i;K++){let e=t.readInt(true);for(let s=0,n=t.readInt(true);s<n;s++){let r=t.readStringRef(),m=H.getAttachment(e,r),c=m.bones,d=m.vertices,p=c?d.length/3*2:d.length,v=t.readInt(true),w=v-1,C=t.readInt(true),F=new Ae(v,C,e,m),V=t.readFloat();for(let B=0,z=0;;B++){let W,Z=t.readInt(true);if(Z==0)W=c?R.newFloatArray(p):d;else {W=R.newFloatArray(p);let j=t.readInt(true);if(Z+=j,M==1)for(let _=j;_<Z;_++)W[_]=t.readFloat();else for(let _=j;_<Z;_++)W[_]=t.readFloat()*M;if(!c)for(let _=0,tt=W.length;_<tt;_++)W[_]+=d[_];}if(F.setFrame(B,V,W),B==w)break;let J=t.readFloat();switch(t.readByte()){case mi:F.setStepped(B);break;case gi:Ee(t,F,z++,B,0,V,J,0,1,1);}V=J;}g.push(F);}}}let x=t.readInt(true);if(x>0){let P=new Xe(x),N=l.slots.length;for(let H=0;H<x;H++){let K=t.readFloat(),i=t.readInt(true),e=R.newArray(N,0);for(let m=N-1;m>=0;m--)e[m]=-1;let s=R.newArray(N-i,0),n=0,r=0;for(let m=0;m<i;m++){let c=t.readInt(true);for(;n!=c;)s[r++]=n++;e[n+t.readInt(true)]=n++;}for(;n<N;)s[r++]=n++;for(let m=N-1;m>=0;m--)e[m]==-1&&(e[m]=s[--r]);P.setFrame(H,K,e);}g.push(P);}let k=t.readInt(true);if(k>0){let P=new ye(k);for(let N=0;N<k;N++){let H=t.readFloat(),K=l.events[t.readInt(true)],i=new Yi(H,K);i.intValue=t.readInt(false),i.floatValue=t.readFloat(),i.stringValue=t.readBoolean()?t.readString():K.stringValue,i.data.audioPath&&(i.volume=t.readFloat(),i.balance=t.readFloat()),P.setFrame(N,i);}g.push(P);}let E=0;for(let P=0,N=g.length;P<N;P++)E=Math.max(E,g[P].getDuration());return new G(h,g,E)}},ur=class{constructor(t,h=new Array,l=0,g=new DataView(t.buffer)){this.strings=h,this.index=l,this.buffer=g;}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let h=this.readByte(),l=h&127;return (h&128)!=0&&(h=this.readByte(),l|=(h&127)<<7,(h&128)!=0&&(h=this.readByte(),l|=(h&127)<<14,(h&128)!=0&&(h=this.readByte(),l|=(h&127)<<21,(h&128)!=0&&(h=this.readByte(),l|=(h&127)<<28)))),t?l:l>>>1^-(l&1)}readStringRef(){let t=this.readInt(true);return t==0?null:this.strings[t-1]}readString(){let t=this.readInt(true);switch(t){case 0:return null;case 1:return ""}t--;let h="";for(let g=0;g<t;){let M=this.readUnsignedByte();switch(M>>4){case 12:case 13:h+=String.fromCharCode((M&31)<<6|this.readByte()&63),g+=2;break;case 14:h+=String.fromCharCode((M&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),g+=3;break;default:h+=String.fromCharCode(M),g++;}}return h}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return this.readByte()!=0}},fr=class{constructor(t,h,l,g,M){this.mesh=t,this.skin=h,this.slotIndex=l,this.parent=g,this.inheritDeform=M;}},mr=class{constructor(t=null,h=null){this.bones=t,this.vertices=h;}},Ai;(function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping";})(Ai||(Ai={}));function Si(t,h,l){let g=t.readFloat(),M=t.readFloat()*l;for(let X=0,b=0,x=h.getFrameCount()-1;h.setFrame(X,g,M),X!=x;X++){let k=t.readFloat(),E=t.readFloat()*l;switch(t.readByte()){case mi:h.setStepped(X);break;case gi:Ee(t,h,b++,X,0,g,k,M,E,l);}g=k,M=E;}return h}function Ms(t,h,l){let g=t.readFloat(),M=t.readFloat()*l,X=t.readFloat()*l;for(let b=0,x=0,k=h.getFrameCount()-1;h.setFrame(b,g,M,X),b!=k;b++){let E=t.readFloat(),P=t.readFloat()*l,N=t.readFloat()*l;switch(t.readByte()){case mi:h.setStepped(b);break;case gi:Ee(t,h,x++,b,0,g,E,M,P,l),Ee(t,h,x++,b,1,g,E,X,N,l);}g=E,M=P,X=N;}return h}function Ee(t,h,l,g,M,X,b,x,k,E){h.setBezier(l,g,M,X,x,t.readFloat(),t.readFloat()*E,t.readFloat(),t.readFloat()*E,b,k);}var zs=0,ys=1,Zs=2,js=3,qs=4,Xr=5,gr=6,Dr=7,Or=8,ai=9,Hs=0,Ce=1,Nr=2,Ur=3,Wr=4,Gr=5,zr=0,Zr=1,jr=2,mi=1,gi=2,pr=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new q(()=>R.newFloatArray(16));}update(t,h){if(!t)throw new Error("skeleton cannot be null.");let l=this.boundingBoxes,g=this.polygons,M=this.polygonPool,X=t.slots,b=X.length;l.length=0,M.freeAll(g),g.length=0;for(let x=0;x<b;x++){let k=X[x];if(!k.bone.active)continue;let E=k.getAttachment();if(E instanceof Ji){let P=E;l.push(P);let N=M.obtain();N.length!=P.worldVerticesLength&&(N=R.newFloatArray(P.worldVerticesLength)),g.push(N),P.computeWorldVertices(k,0,P.worldVerticesLength,N,0,2);}}h?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY);}aabbCompute(){let t=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY,M=this.polygons;for(let X=0,b=M.length;X<b;X++){let x=M[X],k=x;for(let E=0,P=x.length;E<P;E+=2){let N=k[E],H=k[E+1];t=Math.min(t,N),h=Math.min(h,H),l=Math.max(l,N),g=Math.max(g,H);}}this.minX=t,this.minY=h,this.maxX=l,this.maxY=g;}aabbContainsPoint(t,h){return t>=this.minX&&t<=this.maxX&&h>=this.minY&&h<=this.maxY}aabbIntersectsSegment(t,h,l,g){let M=this.minX,X=this.minY,b=this.maxX,x=this.maxY;if(t<=M&&l<=M||h<=X&&g<=X||t>=b&&l>=b||h>=x&&g>=x)return  false;let k=(g-h)/(l-t),E=k*(M-t)+h;if(E>X&&E<x||(E=k*(b-t)+h,E>X&&E<x))return  true;let P=(X-h)/k+t;return P>M&&P<b||(P=(x-h)/k+t,P>M&&P<b)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,h){let l=this.polygons;for(let g=0,M=l.length;g<M;g++)if(this.containsPointPolygon(l[g],t,h))return this.boundingBoxes[g];return null}containsPointPolygon(t,h,l){let g=t,M=t.length,X=M-2,b=false;for(let x=0;x<M;x+=2){let k=g[x+1],E=g[X+1];if(k<l&&E>=l||E<l&&k>=l){let P=g[x];P+(l-k)/(E-k)*(g[X]-P)<h&&(b=!b);}X=x;}return b}intersectsSegment(t,h,l,g){let M=this.polygons;for(let X=0,b=M.length;X<b;X++)if(this.intersectsSegmentPolygon(M[X],t,h,l,g))return this.boundingBoxes[X];return null}intersectsSegmentPolygon(t,h,l,g,M){let X=t,b=t.length,x=h-g,k=l-M,E=h*M-l*g,P=X[b-2],N=X[b-1];for(let H=0;H<b;H+=2){let K=X[H],i=X[H+1],e=P*i-N*K,s=P-K,n=N-i,r=x*n-k*s,m=(E*s-x*e)/r;if((m>=P&&m<=K||m>=K&&m<=P)&&(m>=h&&m<=g||m>=g&&m<=h)){let c=(E*n-k*e)/r;if((c>=N&&c<=i||c>=i&&c<=N)&&(c>=l&&c<=M||c>=M&&c<=l))return  true}P=K,N=i;}return  false}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let h=this.boundingBoxes.indexOf(t);return h==-1?null:this.polygons[h]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},li=class{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new q(()=>new Array),this.polygonIndicesPool=new q(()=>new Array);}triangulate(t){let h=t,l=t.length>>1,g=this.indicesArray;g.length=0;for(let b=0;b<l;b++)g[b]=b;let M=this.isConcaveArray;M.length=0;for(let b=0,x=l;b<x;++b)M[b]=li.isConcave(b,l,h,g);let X=this.triangles;for(X.length=0;l>3;){let b=l-1,x=0,k=1;for(;;){t:if(!M[x]){let N=g[b]<<1,H=g[x]<<1,K=g[k]<<1,i=h[N],e=h[N+1],s=h[H],n=h[H+1],r=h[K],m=h[K+1];for(let c=(k+1)%l;c!=b;c=(c+1)%l){if(!M[c])continue;let d=g[c]<<1,p=h[d],v=h[d+1];if(li.positiveArea(r,m,i,e,p,v)&&li.positiveArea(i,e,s,n,p,v)&&li.positiveArea(s,n,r,m,p,v))break t}break}if(k==0){do{if(!M[x])break;x--;}while(x>0);break}b=x,x=k,k=(k+1)%l;}X.push(g[(l+x-1)%l]),X.push(g[x]),X.push(g[(x+1)%l]),g.splice(x,1),M.splice(x,1),l--;let E=(l+x-1)%l,P=x==l?0:x;M[E]=li.isConcave(E,l,h,g),M[P]=li.isConcave(P,l,h,g);}return l==3&&(X.push(g[2]),X.push(g[0]),X.push(g[1])),X}decompose(t,h){let l=t,g=this.convexPolygons;this.polygonPool.freeAll(g),g.length=0;let M=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(M),M.length=0;let X=this.polygonIndicesPool.obtain();X.length=0;let b=this.polygonPool.obtain();b.length=0;let x=-1,k=0;for(let E=0,P=h.length;E<P;E+=3){let N=h[E]<<1,H=h[E+1]<<1,K=h[E+2]<<1,i=l[N],e=l[N+1],s=l[H],n=l[H+1],r=l[K],m=l[K+1],c=false;if(x==N){let d=b.length-4,p=li.winding(b[d],b[d+1],b[d+2],b[d+3],r,m),v=li.winding(r,m,b[0],b[1],b[2],b[3]);p==k&&v==k&&(b.push(r),b.push(m),X.push(K),c=true);}c||(b.length>0?(g.push(b),M.push(X)):(this.polygonPool.free(b),this.polygonIndicesPool.free(X)),b=this.polygonPool.obtain(),b.length=0,b.push(i),b.push(e),b.push(s),b.push(n),b.push(r),b.push(m),X=this.polygonIndicesPool.obtain(),X.length=0,X.push(N),X.push(H),X.push(K),k=li.winding(i,e,s,n,r,m),x=N);}b.length>0&&(g.push(b),M.push(X));for(let E=0,P=g.length;E<P;E++){if(X=M[E],X.length==0)continue;let N=X[0],H=X[X.length-1];b=g[E];let K=b.length-4,i=b[K],e=b[K+1],s=b[K+2],n=b[K+3],r=b[0],m=b[1],c=b[2],d=b[3],p=li.winding(i,e,s,n,r,m);for(let v=0;v<P;v++){if(v==E)continue;let w=M[v];if(w.length!=3)continue;let C=w[0],F=w[1],V=w[2],B=g[v],z=B[B.length-2],W=B[B.length-1];if(C!=N||F!=H)continue;let Z=li.winding(i,e,s,n,z,W),J=li.winding(z,W,r,m,c,d);Z==p&&J==p&&(B.length=0,w.length=0,b.push(z),b.push(W),X.push(V),i=s,e=n,s=z,n=W,v=0);}}for(let E=g.length-1;E>=0;E--)b=g[E],b.length==0&&(g.splice(E,1),this.polygonPool.free(b),X=M[E],M.splice(E,1),this.polygonIndicesPool.free(X));return g}static isConcave(t,h,l,g){let M=g[(h+t-1)%h]<<1,X=g[t]<<1,b=g[(t+1)%h]<<1;return !this.positiveArea(l[M],l[M+1],l[X],l[X+1],l[b],l[b+1])}static positiveArea(t,h,l,g,M,X){return t*(X-g)+l*(h-X)+M*(g-h)>=0}static winding(t,h,l,g,M,X){let b=l-t,x=g-h;return M*x-X*b+b*h-t*x>=0?1:-1}},ws=class{constructor(){this.triangulator=new li,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array;}clipStart(t,h){if(this.clipAttachment)return 0;this.clipAttachment=h;let l=h.worldVerticesLength,g=R.setArraySize(this.clippingPolygon,l);h.computeWorldVertices(t,0,l,g,0,2);let M=this.clippingPolygon;ws.makeClockwise(M);let X=this.clippingPolygons=this.triangulator.decompose(M,this.triangulator.triangulate(M));for(let b=0,x=X.length;b<x;b++){let k=X[b];ws.makeClockwise(k),k.push(k[0]),k.push(k[1]);}return X.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd();}clipEnd(){!this.clipAttachment||(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0);}isClipping(){return this.clipAttachment!=null}clipTriangles(t,h,l,g,M,X,b,x){let k=this.clipOutput,E=this.clippedVertices,P=this.clippedTriangles,N=this.clippingPolygons,H=this.clippingPolygons.length,K=x?12:8,i=0;E.length=0,P.length=0;t:for(let e=0;e<g;e+=3){let s=l[e]<<1,n=t[s],r=t[s+1],m=M[s],c=M[s+1];s=l[e+1]<<1;let d=t[s],p=t[s+1],v=M[s],w=M[s+1];s=l[e+2]<<1;let C=t[s],F=t[s+1],V=M[s],B=M[s+1];for(let z=0;z<H;z++){let W=E.length;if(this.clip(n,r,d,p,C,F,N[z],k)){let Z=k.length;if(Z==0)continue;let J=p-F,j=C-d,_=n-C,tt=F-r,nt=1/(J*_+j*(r-F)),xt=Z>>1,gt=this.clipOutput,pt=R.setArraySize(E,W+xt*K);for(let Yt=0;Yt<Z;Yt+=2){let Xt=gt[Yt],Ut=gt[Yt+1];pt[W]=Xt,pt[W+1]=Ut,pt[W+2]=X.r,pt[W+3]=X.g,pt[W+4]=X.b,pt[W+5]=X.a;let bt=Xt-C,Et=Ut-F,Ht=(J*bt+j*Et)*nt,Se=(tt*bt+_*Et)*nt,xe=1-Ht-Se;pt[W+6]=m*Ht+v*Se+V*xe,pt[W+7]=c*Ht+w*Se+B*xe,x&&(pt[W+8]=b.r,pt[W+9]=b.g,pt[W+10]=b.b,pt[W+11]=b.a),W+=K;}W=P.length;let Ct=R.setArraySize(P,W+3*(xt-2));xt--;for(let Yt=1;Yt<xt;Yt++)Ct[W]=i,Ct[W+1]=i+Yt,Ct[W+2]=i+Yt+1,W+=3;i+=xt+1;}else {let Z=R.setArraySize(E,W+3*K);Z[W]=n,Z[W+1]=r,Z[W+2]=X.r,Z[W+3]=X.g,Z[W+4]=X.b,Z[W+5]=X.a,x?(Z[W+6]=m,Z[W+7]=c,Z[W+8]=b.r,Z[W+9]=b.g,Z[W+10]=b.b,Z[W+11]=b.a,Z[W+12]=d,Z[W+13]=p,Z[W+14]=X.r,Z[W+15]=X.g,Z[W+16]=X.b,Z[W+17]=X.a,Z[W+18]=v,Z[W+19]=w,Z[W+20]=b.r,Z[W+21]=b.g,Z[W+22]=b.b,Z[W+23]=b.a,Z[W+24]=C,Z[W+25]=F,Z[W+26]=X.r,Z[W+27]=X.g,Z[W+28]=X.b,Z[W+29]=X.a,Z[W+30]=V,Z[W+31]=B,Z[W+32]=b.r,Z[W+33]=b.g,Z[W+34]=b.b,Z[W+35]=b.a):(Z[W+6]=m,Z[W+7]=c,Z[W+8]=d,Z[W+9]=p,Z[W+10]=X.r,Z[W+11]=X.g,Z[W+12]=X.b,Z[W+13]=X.a,Z[W+14]=v,Z[W+15]=w,Z[W+16]=C,Z[W+17]=F,Z[W+18]=X.r,Z[W+19]=X.g,Z[W+20]=X.b,Z[W+21]=X.a,Z[W+22]=V,Z[W+23]=B),W=P.length;let J=R.setArraySize(P,W+3);J[W]=i,J[W+1]=i+1,J[W+2]=i+2,i+=3;continue t}}}}clip(t,h,l,g,M,X,b,x){let k=x,E=false,P=null;b.length%4>=2?(P=x,x=this.scratch):P=this.scratch,P.length=0,P.push(t),P.push(h),P.push(l),P.push(g),P.push(M),P.push(X),P.push(t),P.push(h),x.length=0;let N=b,H=b.length-4;for(let K=0;;K+=2){let i=N[K],e=N[K+1],s=N[K+2],n=N[K+3],r=i-s,m=e-n,c=P,d=P.length-2,p=x.length;for(let w=0;w<d;w+=2){let C=c[w],F=c[w+1],V=c[w+2],B=c[w+3],z=r*(B-n)-m*(V-s)>0;if(r*(F-n)-m*(C-s)>0){if(z){x.push(V),x.push(B);continue}let W=B-F,Z=V-C,J=W*(s-i)-Z*(n-e);if(Math.abs(J)>1e-6){let j=(Z*(e-F)-W*(i-C))/J;x.push(i+(s-i)*j),x.push(e+(n-e)*j);}else x.push(i),x.push(e);}else if(z){let W=B-F,Z=V-C,J=W*(s-i)-Z*(n-e);if(Math.abs(J)>1e-6){let j=(Z*(e-F)-W*(i-C))/J;x.push(i+(s-i)*j),x.push(e+(n-e)*j);}else x.push(i),x.push(e);x.push(V),x.push(B);}E=true;}if(p==x.length)return k.length=0,true;if(x.push(x[0]),x.push(x[1]),K==H)break;let v=x;x=P,x.length=0,P=v;}if(k!=x){k.length=0;for(let K=0,i=x.length-2;K<i;K++)k[K]=x[K];}else k.length=k.length-2;return E}static makeClockwise(t){let h=t,l=t.length,g=h[l-2]*h[1]-h[0]*h[l-1],M=0,X=0,b=0,x=0;for(let k=0,E=l-3;k<E;k+=2)M=h[k],X=h[k+1],b=h[k+2],x=h[k+3],g+=M*x-b*X;if(!(g<0))for(let k=0,E=l-2,P=l>>1;k<P;k+=2){let N=h[k],H=h[k+1],K=E-k;h[k]=h[K],h[k+1]=h[K+1],h[K]=N,h[K+1]=H;}}},qr=class{constructor(t){this.attachmentLoader=null,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t;}readSkeletonData(t){let h=this.scale,l=new vs,g=typeof t=="string"?JSON.parse(t):t,M=g.skeleton;if(M&&(l.hash=M.hash,l.version=M.spine,l.x=M.x,l.y=M.y,l.width=M.width,l.height=M.height,l.fps=M.fps,l.imagesPath=M.images),g.bones)for(let X=0;X<g.bones.length;X++){let b=g.bones[X],x=null,k=Pt(b,"parent",null);k&&(x=l.findBone(k));let E=new Ns(l.bones.length,b.name,x);E.length=Pt(b,"length",0)*h,E.x=Pt(b,"x",0)*h,E.y=Pt(b,"y",0)*h,E.rotation=Pt(b,"rotation",0),E.scaleX=Pt(b,"scaleX",1),E.scaleY=Pt(b,"scaleY",1),E.shearX=Pt(b,"shearX",0),E.shearY=Pt(b,"shearY",0),E.transformMode=R.enumValue(ii,Pt(b,"transform","Normal")),E.skinRequired=Pt(b,"skin",false);let P=Pt(b,"color",null);P&&E.color.setFromString(P),l.bones.push(E);}if(g.slots)for(let X=0;X<g.slots.length;X++){let b=g.slots[X],x=l.findBone(b.bone),k=new es(l.slots.length,b.name,x),E=Pt(b,"color",null);E&&k.color.setFromString(E);let P=Pt(b,"dark",null);P&&(k.darkColor=u.fromString(P)),k.attachmentName=Pt(b,"attachment",null),k.blendMode=R.enumValue(ei,Pt(b,"blend","normal")),l.slots.push(k);}if(g.ik)for(let X=0;X<g.ik.length;X++){let b=g.ik[X],x=new Ws(b.name);x.order=Pt(b,"order",0),x.skinRequired=Pt(b,"skin",false);for(let k=0;k<b.bones.length;k++)x.bones.push(l.findBone(b.bones[k]));x.target=l.findBone(b.target),x.mix=Pt(b,"mix",1),x.softness=Pt(b,"softness",0)*h,x.bendDirection=Pt(b,"bendPositive",true)?1:-1,x.compress=Pt(b,"compress",false),x.stretch=Pt(b,"stretch",false),x.uniform=Pt(b,"uniform",false),l.ikConstraints.push(x);}if(g.transform)for(let X=0;X<g.transform.length;X++){let b=g.transform[X],x=new is(b.name);x.order=Pt(b,"order",0),x.skinRequired=Pt(b,"skin",false);for(let E=0;E<b.bones.length;E++)x.bones.push(l.findBone(b.bones[E]));let k=b.target;x.target=l.findBone(k),x.local=Pt(b,"local",false),x.relative=Pt(b,"relative",false),x.offsetRotation=Pt(b,"rotation",0),x.offsetX=Pt(b,"x",0)*h,x.offsetY=Pt(b,"y",0)*h,x.offsetScaleX=Pt(b,"scaleX",0),x.offsetScaleY=Pt(b,"scaleY",0),x.offsetShearY=Pt(b,"shearY",0),x.mixRotate=Pt(b,"mixRotate",1),x.mixX=Pt(b,"mixX",1),x.mixY=Pt(b,"mixY",x.mixX),x.mixScaleX=Pt(b,"mixScaleX",1),x.mixScaleY=Pt(b,"mixScaleY",x.mixScaleX),x.mixShearY=Pt(b,"mixShearY",1),l.transformConstraints.push(x);}if(g.path)for(let X=0;X<g.path.length;X++){let b=g.path[X],x=new $i(b.name);x.order=Pt(b,"order",0),x.skinRequired=Pt(b,"skin",false);for(let E=0;E<b.bones.length;E++)x.bones.push(l.findBone(b.bones[E]));let k=b.target;x.target=l.findSlot(k),x.positionMode=R.enumValue(di,Pt(b,"positionMode","Percent")),x.spacingMode=R.enumValue(He,Pt(b,"spacingMode","Length")),x.rotateMode=R.enumValue(fi,Pt(b,"rotateMode","Tangent")),x.offsetRotation=Pt(b,"rotation",0),x.position=Pt(b,"position",0),x.positionMode==di.Fixed&&(x.position*=h),x.spacing=Pt(b,"spacing",0),(x.spacingMode==He.Length||x.spacingMode==He.Fixed)&&(x.spacing*=h),x.mixRotate=Pt(b,"mixRotate",1),x.mixX=Pt(b,"mixX",1),x.mixY=Pt(b,"mixY",x.mixX),l.pathConstraints.push(x);}if(g.skins)for(let X=0;X<g.skins.length;X++){let b=g.skins[X],x=new Ni(b.name);if(b.bones)for(let k=0;k<b.bones.length;k++)x.bones.push(l.findBone(b.bones[k]));if(b.ik)for(let k=0;k<b.ik.length;k++)x.constraints.push(l.findIkConstraint(b.ik[k]));if(b.transform)for(let k=0;k<b.transform.length;k++)x.constraints.push(l.findTransformConstraint(b.transform[k]));if(b.path)for(let k=0;k<b.path.length;k++)x.constraints.push(l.findPathConstraint(b.path[k]));for(let k in b.attachments){let E=l.findSlot(k),P=b.attachments[k];for(let N in P){let H=this.readAttachment(P[N],x,E.index,N,l);H&&x.setAttachment(E.index,N,H);}}l.skins.push(x),x.name=="default"&&(l.defaultSkin=x);}for(let X=0,b=this.linkedMeshes.length;X<b;X++){let x=this.linkedMeshes[X],k=(x.skin?l.findSkin(x.skin):l.defaultSkin).getAttachment(x.slotIndex,x.parent);x.mesh.deformAttachment=x.inheritDeform?k:x.mesh,x.mesh.setParentMesh(k),x.mesh.updateUVs();}if(this.linkedMeshes.length=0,g.events)for(let X in g.events){let b=g.events[X],x=new gs(X);x.intValue=Pt(b,"int",0),x.floatValue=Pt(b,"float",0),x.stringValue=Pt(b,"string",""),x.audioPath=Pt(b,"audio",null),x.audioPath&&(x.volume=Pt(b,"volume",1),x.balance=Pt(b,"balance",0)),l.events.push(x);}if(g.animations)for(let X in g.animations){let b=g.animations[X];this.readAnimation(b,X,l);}return l}readAttachment(t,h,l,g,M){let X=this.scale;switch(g=Pt(t,"name",g),Pt(t,"type","region")){case "region":{let b=Pt(t,"path",g),x=this.attachmentLoader.newRegionAttachment(h,g,b);if(!x)return null;x.path=b,x.x=Pt(t,"x",0)*X,x.y=Pt(t,"y",0)*X,x.scaleX=Pt(t,"scaleX",1),x.scaleY=Pt(t,"scaleY",1),x.rotation=Pt(t,"rotation",0),x.width=t.width*X,x.height=t.height*X;let k=Pt(t,"color",null);return k&&x.color.setFromString(k),x.updateOffset(),x}case "boundingbox":{let b=this.attachmentLoader.newBoundingBoxAttachment(h,g);if(!b)return null;this.readVertices(t,b,t.vertexCount<<1);let x=Pt(t,"color",null);return x&&b.color.setFromString(x),b}case "mesh":case "linkedmesh":{let b=Pt(t,"path",g),x=this.attachmentLoader.newMeshAttachment(h,g,b);if(!x)return null;x.path=b;let k=Pt(t,"color",null);k&&x.color.setFromString(k),x.width=Pt(t,"width",0)*X,x.height=Pt(t,"height",0)*X;let E=Pt(t,"parent",null);if(E)return this.linkedMeshes.push(new Hr(x,Pt(t,"skin",null),l,E,Pt(t,"deform",true))),x;let P=t.uvs;return this.readVertices(t,x,P.length),x.triangles=t.triangles,x.regionUVs=P,x.updateUVs(),x.edges=Pt(t,"edges",null),x.hullLength=Pt(t,"hull",0)*2,x}case "path":{let b=this.attachmentLoader.newPathAttachment(h,g);if(!b)return null;b.closed=Pt(t,"closed",false),b.constantSpeed=Pt(t,"constantSpeed",true);let x=t.vertexCount;this.readVertices(t,b,x<<1);let k=R.newArray(x/3,0);for(let P=0;P<t.lengths.length;P++)k[P]=t.lengths[P]*X;b.lengths=k;let E=Pt(t,"color",null);return E&&b.color.setFromString(E),b}case "point":{let b=this.attachmentLoader.newPointAttachment(h,g);if(!b)return null;b.x=Pt(t,"x",0)*X,b.y=Pt(t,"y",0)*X,b.rotation=Pt(t,"rotation",0);let x=Pt(t,"color",null);return x&&b.color.setFromString(x),b}case "clipping":{let b=this.attachmentLoader.newClippingAttachment(h,g);if(!b)return null;let x=Pt(t,"end",null);x&&(b.endSlot=M.findSlot(x));let k=t.vertexCount;this.readVertices(t,b,k<<1);let E=Pt(t,"color",null);return E&&b.color.setFromString(E),b}}return null}readVertices(t,h,l){let g=this.scale;h.worldVerticesLength=l;let M=t.vertices;if(l==M.length){let x=R.toFloatArray(M);if(g!=1)for(let k=0,E=M.length;k<E;k++)x[k]*=g;h.vertices=x;return}let X=new Array,b=new Array;for(let x=0,k=M.length;x<k;){let E=M[x++];b.push(E);for(let P=x+E*4;x<P;x+=4)b.push(M[x]),X.push(M[x+1]*g),X.push(M[x+2]*g),X.push(M[x+3]);}h.bones=b,h.vertices=R.toFloatArray(X);}readAnimation(t,h,l){let g=this.scale,M=new Array;if(t.slots)for(let b in t.slots){let x=t.slots[b],k=l.findSlot(b).index;for(let E in x){let P=x[E];if(!P)continue;let N=P.length;if(E=="attachment"){let H=new Kt(N,k);for(let K=0;K<N;K++){let i=P[K];H.setFrame(K,Pt(i,"time",0),i.name);}M.push(H);}else if(E=="rgba"){let H=new Ft(N,N<<2,k),K=P[0],i=Pt(K,"time",0),e=u.fromString(K.color);for(let s=0,n=0;;s++){H.setFrame(s,i,e.r,e.g,e.b,e.a);let r=P[s+1];if(!r){H.shrink(n);break}let m=Pt(r,"time",0),c=u.fromString(r.color),d=K.curve;d&&(n=ke(d,H,n,s,0,i,m,e.r,c.r,1),n=ke(d,H,n,s,1,i,m,e.g,c.g,1),n=ke(d,H,n,s,2,i,m,e.b,c.b,1),n=ke(d,H,n,s,3,i,m,e.a,c.a,1)),i=m,e=c,K=r;}M.push(H);}else if(E=="rgb"){let H=new Tt(N,N*3,k),K=P[0],i=Pt(K,"time",0),e=u.fromString(K.color);for(let s=0,n=0;;s++){H.setFrame(s,i,e.r,e.g,e.b);let r=P[s+1];if(!r){H.shrink(n);break}let m=Pt(r,"time",0),c=u.fromString(r.color),d=K.curve;d&&(n=ke(d,H,n,s,0,i,m,e.r,c.r,1),n=ke(d,H,n,s,1,i,m,e.g,c.g,1),n=ke(d,H,n,s,2,i,m,e.b,c.b,1)),i=m,e=c,K=r;}M.push(H);}else if(E=="alpha")M.push(bi(P,new At(N,N,k),0,1));else if(E=="rgba2"){let H=new _t(N,N*7,k),K=P[0],i=Pt(K,"time",0),e=u.fromString(K.light),s=u.fromString(K.dark);for(let n=0,r=0;;n++){H.setFrame(n,i,e.r,e.g,e.b,e.a,s.r,s.g,s.b);let m=P[n+1];if(!m){H.shrink(r);break}let c=Pt(m,"time",0),d=u.fromString(m.light),p=u.fromString(m.dark),v=K.curve;v&&(r=ke(v,H,r,n,0,i,c,e.r,d.r,1),r=ke(v,H,r,n,1,i,c,e.g,d.g,1),r=ke(v,H,r,n,2,i,c,e.b,d.b,1),r=ke(v,H,r,n,3,i,c,e.a,d.a,1),r=ke(v,H,r,n,4,i,c,s.r,p.r,1),r=ke(v,H,r,n,5,i,c,s.g,p.g,1),r=ke(v,H,r,n,6,i,c,s.b,p.b,1)),i=c,e=d,s=p,K=m;}M.push(H);}else if(E=="rgb2"){let H=new ie(N,N*6,k),K=P[0],i=Pt(K,"time",0),e=u.fromString(K.light),s=u.fromString(K.dark);for(let n=0,r=0;;n++){H.setFrame(n,i,e.r,e.g,e.b,s.r,s.g,s.b);let m=P[n+1];if(!m){H.shrink(r);break}let c=Pt(m,"time",0),d=u.fromString(m.light),p=u.fromString(m.dark),v=K.curve;v&&(r=ke(v,H,r,n,0,i,c,e.r,d.r,1),r=ke(v,H,r,n,1,i,c,e.g,d.g,1),r=ke(v,H,r,n,2,i,c,e.b,d.b,1),r=ke(v,H,r,n,3,i,c,s.r,p.r,1),r=ke(v,H,r,n,4,i,c,s.g,p.g,1),r=ke(v,H,r,n,5,i,c,s.b,p.b,1)),i=c,e=d,s=p,K=m;}M.push(H);}}}if(t.bones)for(let b in t.bones){let x=t.bones[b],k=l.findBone(b).index;for(let E in x){let P=x[E],N=P.length;if(N!=0){if(E==="rotate")M.push(bi(P,new at(N,N,k),0,1));else if(E==="translate"){let H=new Q(N,N<<1,k);M.push(Js(P,H,"x","y",0,g));}else if(E==="translatex"){let H=new ot(N,N,k);M.push(bi(P,H,0,g));}else if(E==="translatey"){let H=new Mt(N,N,k);M.push(bi(P,H,0,g));}else if(E==="scale"){let H=new yt(N,N<<1,k);M.push(Js(P,H,"x","y",1,1));}else if(E==="scalex"){let H=new Bt(N,N,k);M.push(bi(P,H,1,1));}else if(E==="scaley"){let H=new Dt(N,N,k);M.push(bi(P,H,1,1));}else if(E==="shear"){let H=new Lt(N,N<<1,k);M.push(Js(P,H,"x","y",0,1));}else if(E==="shearx"){let H=new Vt(N,N,k);M.push(bi(P,H,0,1));}else if(E==="sheary"){let H=new Gt(N,N,k);M.push(bi(P,H,0,1));}}}}if(t.ik)for(let b in t.ik){let x=t.ik[b],k=x[0];if(!k)continue;let E=l.findIkConstraint(b),P=l.ikConstraints.indexOf(E),N=new qe(x.length,x.length<<1,P),H=Pt(k,"time",0),K=Pt(k,"mix",1),i=Pt(k,"softness",0)*g;for(let e=0,s=0;;e++){N.setFrame(e,H,K,i,Pt(k,"bendPositive",true)?1:-1,Pt(k,"compress",false),Pt(k,"stretch",false));let n=x[e+1];if(!n){N.shrink(s);break}let r=Pt(n,"time",0),m=Pt(n,"mix",1),c=Pt(n,"softness",0)*g,d=k.curve;d&&(s=ke(d,N,s,e,0,H,r,K,m,1),s=ke(d,N,s,e,1,H,r,i,c,g)),H=r,K=m,i=c,k=n;}M.push(N);}if(t.transform)for(let b in t.transform){let x=t.transform[b],k=x[0];if(!k)continue;let E=l.findTransformConstraint(b),P=l.transformConstraints.indexOf(E),N=new ze(x.length,x.length*6,P),H=Pt(k,"time",0),K=Pt(k,"mixRotate",1),i=Pt(k,"mixX",1),e=Pt(k,"mixY",i),s=Pt(k,"mixScaleX",1),n=Pt(k,"mixScaleY",s),r=Pt(k,"mixShearY",1);for(let m=0,c=0;;m++){N.setFrame(m,H,K,i,e,s,n,r);let d=x[m+1];if(!d){N.shrink(c);break}let p=Pt(d,"time",0),v=Pt(d,"mixRotate",1),w=Pt(d,"mixX",1),C=Pt(d,"mixY",w),F=Pt(d,"mixScaleX",1),V=Pt(d,"mixScaleY",F),B=Pt(d,"mixShearY",1),z=k.curve;z&&(c=ke(z,N,c,m,0,H,p,K,v,1),c=ke(z,N,c,m,1,H,p,i,w,1),c=ke(z,N,c,m,2,H,p,e,C,1),c=ke(z,N,c,m,3,H,p,s,F,1),c=ke(z,N,c,m,4,H,p,n,V,1),c=ke(z,N,c,m,5,H,p,r,B,1)),H=p,K=v,i=w,e=C,s=F,n=V,s=F,k=d;}M.push(N);}if(t.path)for(let b in t.path){let x=t.path[b],k=l.findPathConstraint(b),E=l.pathConstraints.indexOf(k);for(let P in x){let N=x[P],H=N[0];if(!H)continue;let K=N.length;if(P==="position"){let i=new Ue(K,K,E);M.push(bi(N,i,0,k.positionMode==di.Fixed?g:1));}else if(P==="spacing"){let i=new Qe(K,K,E);M.push(bi(N,i,0,k.spacingMode==He.Length||k.spacingMode==He.Fixed?g:1));}else if(P==="mix"){let i=new We(K,K*3,E),e=Pt(H,"time",0),s=Pt(H,"mixRotate",1),n=Pt(H,"mixX",1),r=Pt(H,"mixY",n);for(let m=0,c=0;;m++){i.setFrame(m,e,s,n,r);let d=N[m+1];if(!d){i.shrink(c);break}let p=Pt(d,"time",0),v=Pt(d,"mixRotate",1),w=Pt(d,"mixX",1),C=Pt(d,"mixY",w),F=H.curve;F&&(c=ke(F,i,c,m,0,e,p,s,v,1),c=ke(F,i,c,m,1,e,p,n,w,1),c=ke(F,i,c,m,2,e,p,r,C,1)),e=p,s=v,n=w,r=C,H=d;}M.push(i);}}}if(t.deform)for(let b in t.deform){let x=t.deform[b],k=l.findSkin(b);for(let E in x){let P=x[E],N=l.findSlot(E).index;for(let H in P){let K=P[H],i=K[0];if(!i)continue;let e=k.getAttachment(N,H),s=e.bones,n=e.vertices,r=s?n.length/3*2:n.length,m=new Ae(K.length,K.length,N,e),c=Pt(i,"time",0);for(let d=0,p=0;;d++){let v,w=Pt(i,"vertices",null);if(!w)v=s?R.newFloatArray(r):n;else {v=R.newFloatArray(r);let B=Pt(i,"offset",0);if(R.arrayCopy(w,0,v,B,w.length),g!=1)for(let z=B,W=z+w.length;z<W;z++)v[z]*=g;if(!s)for(let z=0;z<r;z++)v[z]+=n[z];}m.setFrame(d,c,v);let C=K[d+1];if(!C){m.shrink(p);break}let F=Pt(C,"time",0),V=i.curve;V&&(p=ke(V,m,p,d,0,c,F,0,1,1)),c=F,i=C;}M.push(m);}}}if(t.drawOrder){let b=new Xe(t.drawOrder.length),x=l.slots.length,k=0;for(let E=0;E<t.drawOrder.length;E++,k++){let P=t.drawOrder[E],N=null,H=Pt(P,"offsets",null);if(H){N=R.newArray(x,-1);let K=R.newArray(x-H.length,0),i=0,e=0;for(let s=0;s<H.length;s++){let n=H[s],r=l.findSlot(n.slot).index;for(;i!=r;)K[e++]=i++;N[i+n.offset]=i++;}for(;i<x;)K[e++]=i++;for(let s=x-1;s>=0;s--)N[s]==-1&&(N[s]=K[--e]);}b.setFrame(k,Pt(P,"time",0),N);}M.push(b);}if(t.events){let b=new ye(t.events.length),x=0;for(let k=0;k<t.events.length;k++,x++){let E=t.events[k],P=l.findEvent(E.name),N=new Yi(R.toSinglePrecision(Pt(E,"time",0)),P);N.intValue=Pt(E,"int",P.intValue),N.floatValue=Pt(E,"float",P.floatValue),N.stringValue=Pt(E,"string",P.stringValue),N.data.audioPath&&(N.volume=Pt(E,"volume",1),N.balance=Pt(E,"balance",0)),b.setFrame(x,N);}M.push(b);}let X=0;for(let b=0,x=M.length;b<x;b++)X=Math.max(X,M[b].getDuration());l.animations.push(new G(h,M,X));}},Hr=class{constructor(t,h,l,g,M){this.mesh=t,this.skin=h,this.slotIndex=l,this.parent=g,this.inheritDeform=M;}};function bi(t,h,l,g){let M=t[0],X=Pt(M,"time",0),b=Pt(M,"value",l)*g,x=0;for(let k=0;;k++){h.setFrame(k,X,b);let E=t[k+1];if(!E)return h.shrink(x),h;let P=Pt(E,"time",0),N=Pt(E,"value",l)*g;M.curve&&(x=ke(M.curve,h,x,k,0,X,P,b,N,g)),X=P,b=N,M=E;}}function Js(t,h,l,g,M,X){let b=t[0],x=Pt(b,"time",0),k=Pt(b,l,M)*X,E=Pt(b,g,M)*X,P=0;for(let N=0;;N++){h.setFrame(N,x,k,E);let H=t[N+1];if(!H)return h.shrink(P),h;let K=Pt(H,"time",0),i=Pt(H,l,M)*X,e=Pt(H,g,M)*X,s=b.curve;s&&(P=ke(s,h,P,N,0,x,K,k,i,X),P=ke(s,h,P,N,1,x,K,E,e,X)),x=K,k=i,E=e,b=H;}}function ke(t,h,l,g,M,X,b,x,k,E){if(t=="stepped")return h.setStepped(g),l;let P=M<<2,N=t[P],H=t[P+1]*E,K=t[P+2],i=t[P+3]*E;return h.setBezier(l,g,M,X,x,N,H,K,i,b,k),l+1}function Pt(t,h,l){return t[h]!==void 0?t[h]:l}typeof Math.fround>"u"&&(Math.fround=(function(t){return function(h){return t[0]=h,t[0]}})(new Float32Array(1)));var Jr=class{constructor(t,h){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=h;}begin(t){}transform(t,h,l,g){t.x+=S.randomTriangular(-this.jitterX,this.jitterY),t.y+=S.randomTriangular(-this.jitterX,this.jitterY);}end(){}},xr=class{constructor(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t;}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY;}transform(t,h,l,g){let M=this.angle*S.degreesToRadians,X=t.x-this.worldX,b=t.y-this.worldY,x=Math.sqrt(X*X+b*b);if(x<this.radius){let k=xr.interpolation.apply(0,M,(this.radius-x)/this.radius),E=Math.cos(k),P=Math.sin(k);t.x=E*X-P*b+this.worldX,t.y=P*X+E*b+this.worldY;}}end(){}},vr=xr;vr.interpolation=new U(2);var oi=class{constructor(t,h={alpha:"true"}){this.restorables=new Array,t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?(this.gl=t,this.canvas=this.gl.canvas):this.setupCanvas(t,h);}setupCanvas(t,h){this.gl=t.getContext("webgl2",h)||t.getContext("webgl",h),this.canvas=t,t.addEventListener("webglcontextlost",l=>{l&&l.preventDefault();}),t.addEventListener("webglcontextrestored",l=>{for(let g=0,M=this.restorables.length;g<M;g++)this.restorables[g].restore();});}addRestorable(t){this.restorables.push(t);}removeRestorable(t){let h=this.restorables.indexOf(t);h>-1&&this.restorables.splice(h,1);}},Ui=1,_r=769,Mr=770,As=771,Qr=774,Ss=class{static getDestGLBlendMode(t){switch(t){case ei.Normal:return As;case ei.Additive:return Ui;case ei.Multiply:return As;case ei.Screen:return As;default:throw new Error("Unknown blend mode: "+t)}}static getSourceColorGLBlendMode(t,h=false){switch(t){case ei.Normal:return h?Ui:Mr;case ei.Additive:return h?Ui:Mr;case ei.Multiply:return Qr;case ei.Screen:return Ui;default:throw new Error("Unknown blend mode: "+t)}}static getSourceAlphaGLBlendMode(t){switch(t){case ei.Normal:return Ui;case ei.Additive:return Ui;case ei.Multiply:return As;case ei.Screen:return _r;default:throw new Error("Unknown blend mode: "+t)}}},_s=class extends Bs{constructor(t,h,l=false){super(h),this.texture=null,this.boundUnit=0,this.useMipMaps=false,this.context=t instanceof oi?t:new oi(t),this.useMipMaps=l,this.restore(),this.context.addRestorable(this);}setFilters(t,h){let l=this.context.gl;this.bind(),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,_s.validateMagFilter(h));}static validateMagFilter(t){switch(t){case ni.MipMap:case ni.MipMapLinearLinear:case ni.MipMapLinearNearest:case ni.MipMapNearestLinear:case ni.MipMapNearestNearest:return ni.Linear;default:return t}}setWraps(t,h){let l=this.context.gl;this.bind(),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,h);}update(t){let h=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),_s.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,false),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,this._image),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,t?h.LINEAR_MIPMAP_LINEAR:h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),t&&h.generateMipmap(h.TEXTURE_2D);}restore(){this.texture=null,this.update(this.useMipMaps);}bind(t=0){let h=this.context.gl;this.boundUnit=t,h.activeTexture(h.TEXTURE0+t),h.bindTexture(h.TEXTURE_2D,this.texture);}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null);}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture);}},ss=_s;ss.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=false;var pi=class extends ms{constructor(t,h="",l=null){super(g=>new ss(t,g),h,l);}},Je=class{constructor(t=0,h=0,l=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=h,this.z=l;}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,h,l){return this.x=t,this.y=h,this.z=l,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return t==0?this:(t=1/t,this.x*=t,this.y*=t,this.z*=t,this)}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let h=t.values;return this.set(this.x*h[ae]+this.y*h[ue]+this.z*h[fe]+h[me],this.x*h[ve]+this.y*h[Qt]+this.z*h[oe]+h[zt],this.x*h[mt]+this.y*h[Jt]+this.z*h[ee]+h[he])}project(t){let h=t.values,l=1/(this.x*h[$t]+this.y*h[Ot]+this.z*h[Wt]+h[Nt]);return this.set((this.x*h[ae]+this.y*h[ue]+this.z*h[fe]+h[me])*l,(this.x*h[ve]+this.y*h[Qt]+this.z*h[oe]+h[zt])*l,(this.x*h[mt]+this.y*h[Jt]+this.z*h[ee]+h[he])*l)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let h=t.x-this.x,l=t.y-this.y,g=t.z-this.z;return Math.sqrt(h*h+l*l+g*g)}},ae=0,ue=4,fe=8,me=12,ve=1,Qt=5,oe=9,zt=13,mt=2,Jt=6,ee=10,he=14,$t=3,Ot=7,Wt=11,Nt=15,jt=class{constructor(){this.temp=new Float32Array(16),this.values=new Float32Array(16);let t=this.values;t[ae]=1,t[Qt]=1,t[ee]=1,t[Nt]=1;}set(t){return this.values.set(t),this}transpose(){let t=this.temp,h=this.values;return t[ae]=h[ae],t[ue]=h[ve],t[fe]=h[mt],t[me]=h[$t],t[ve]=h[ue],t[Qt]=h[Qt],t[oe]=h[Jt],t[zt]=h[Ot],t[mt]=h[fe],t[Jt]=h[oe],t[ee]=h[ee],t[he]=h[Wt],t[$t]=h[me],t[Ot]=h[zt],t[Wt]=h[he],t[Nt]=h[Nt],this.set(t)}identity(){let t=this.values;return t[ae]=1,t[ue]=0,t[fe]=0,t[me]=0,t[ve]=0,t[Qt]=1,t[oe]=0,t[zt]=0,t[mt]=0,t[Jt]=0,t[ee]=1,t[he]=0,t[$t]=0,t[Ot]=0,t[Wt]=0,t[Nt]=1,this}invert(){let t=this.values,h=this.temp,l=t[$t]*t[Jt]*t[oe]*t[me]-t[mt]*t[Ot]*t[oe]*t[me]-t[$t]*t[Qt]*t[ee]*t[me]+t[ve]*t[Ot]*t[ee]*t[me]+t[mt]*t[Qt]*t[Wt]*t[me]-t[ve]*t[Jt]*t[Wt]*t[me]-t[$t]*t[Jt]*t[fe]*t[zt]+t[mt]*t[Ot]*t[fe]*t[zt]+t[$t]*t[ue]*t[ee]*t[zt]-t[ae]*t[Ot]*t[ee]*t[zt]-t[mt]*t[ue]*t[Wt]*t[zt]+t[ae]*t[Jt]*t[Wt]*t[zt]+t[$t]*t[Qt]*t[fe]*t[he]-t[ve]*t[Ot]*t[fe]*t[he]-t[$t]*t[ue]*t[oe]*t[he]+t[ae]*t[Ot]*t[oe]*t[he]+t[ve]*t[ue]*t[Wt]*t[he]-t[ae]*t[Qt]*t[Wt]*t[he]-t[mt]*t[Qt]*t[fe]*t[Nt]+t[ve]*t[Jt]*t[fe]*t[Nt]+t[mt]*t[ue]*t[oe]*t[Nt]-t[ae]*t[Jt]*t[oe]*t[Nt]-t[ve]*t[ue]*t[ee]*t[Nt]+t[ae]*t[Qt]*t[ee]*t[Nt];if(l==0)throw new Error("non-invertible matrix");let g=1/l;return h[ae]=t[oe]*t[he]*t[Ot]-t[zt]*t[ee]*t[Ot]+t[zt]*t[Jt]*t[Wt]-t[Qt]*t[he]*t[Wt]-t[oe]*t[Jt]*t[Nt]+t[Qt]*t[ee]*t[Nt],h[ue]=t[me]*t[ee]*t[Ot]-t[fe]*t[he]*t[Ot]-t[me]*t[Jt]*t[Wt]+t[ue]*t[he]*t[Wt]+t[fe]*t[Jt]*t[Nt]-t[ue]*t[ee]*t[Nt],h[fe]=t[fe]*t[zt]*t[Ot]-t[me]*t[oe]*t[Ot]+t[me]*t[Qt]*t[Wt]-t[ue]*t[zt]*t[Wt]-t[fe]*t[Qt]*t[Nt]+t[ue]*t[oe]*t[Nt],h[me]=t[me]*t[oe]*t[Jt]-t[fe]*t[zt]*t[Jt]-t[me]*t[Qt]*t[ee]+t[ue]*t[zt]*t[ee]+t[fe]*t[Qt]*t[he]-t[ue]*t[oe]*t[he],h[ve]=t[zt]*t[ee]*t[$t]-t[oe]*t[he]*t[$t]-t[zt]*t[mt]*t[Wt]+t[ve]*t[he]*t[Wt]+t[oe]*t[mt]*t[Nt]-t[ve]*t[ee]*t[Nt],h[Qt]=t[fe]*t[he]*t[$t]-t[me]*t[ee]*t[$t]+t[me]*t[mt]*t[Wt]-t[ae]*t[he]*t[Wt]-t[fe]*t[mt]*t[Nt]+t[ae]*t[ee]*t[Nt],h[oe]=t[me]*t[oe]*t[$t]-t[fe]*t[zt]*t[$t]-t[me]*t[ve]*t[Wt]+t[ae]*t[zt]*t[Wt]+t[fe]*t[ve]*t[Nt]-t[ae]*t[oe]*t[Nt],h[zt]=t[fe]*t[zt]*t[mt]-t[me]*t[oe]*t[mt]+t[me]*t[ve]*t[ee]-t[ae]*t[zt]*t[ee]-t[fe]*t[ve]*t[he]+t[ae]*t[oe]*t[he],h[mt]=t[Qt]*t[he]*t[$t]-t[zt]*t[Jt]*t[$t]+t[zt]*t[mt]*t[Ot]-t[ve]*t[he]*t[Ot]-t[Qt]*t[mt]*t[Nt]+t[ve]*t[Jt]*t[Nt],h[Jt]=t[me]*t[Jt]*t[$t]-t[ue]*t[he]*t[$t]-t[me]*t[mt]*t[Ot]+t[ae]*t[he]*t[Ot]+t[ue]*t[mt]*t[Nt]-t[ae]*t[Jt]*t[Nt],h[ee]=t[ue]*t[zt]*t[$t]-t[me]*t[Qt]*t[$t]+t[me]*t[ve]*t[Ot]-t[ae]*t[zt]*t[Ot]-t[ue]*t[ve]*t[Nt]+t[ae]*t[Qt]*t[Nt],h[he]=t[me]*t[Qt]*t[mt]-t[ue]*t[zt]*t[mt]-t[me]*t[ve]*t[Jt]+t[ae]*t[zt]*t[Jt]+t[ue]*t[ve]*t[he]-t[ae]*t[Qt]*t[he],h[$t]=t[oe]*t[Jt]*t[$t]-t[Qt]*t[ee]*t[$t]-t[oe]*t[mt]*t[Ot]+t[ve]*t[ee]*t[Ot]+t[Qt]*t[mt]*t[Wt]-t[ve]*t[Jt]*t[Wt],h[Ot]=t[ue]*t[ee]*t[$t]-t[fe]*t[Jt]*t[$t]+t[fe]*t[mt]*t[Ot]-t[ae]*t[ee]*t[Ot]-t[ue]*t[mt]*t[Wt]+t[ae]*t[Jt]*t[Wt],h[Wt]=t[fe]*t[Qt]*t[$t]-t[ue]*t[oe]*t[$t]-t[fe]*t[ve]*t[Ot]+t[ae]*t[oe]*t[Ot]+t[ue]*t[ve]*t[Wt]-t[ae]*t[Qt]*t[Wt],h[Nt]=t[ue]*t[oe]*t[mt]-t[fe]*t[Qt]*t[mt]+t[fe]*t[ve]*t[Jt]-t[ae]*t[oe]*t[Jt]-t[ue]*t[ve]*t[ee]+t[ae]*t[Qt]*t[ee],t[ae]=h[ae]*g,t[ue]=h[ue]*g,t[fe]=h[fe]*g,t[me]=h[me]*g,t[ve]=h[ve]*g,t[Qt]=h[Qt]*g,t[oe]=h[oe]*g,t[zt]=h[zt]*g,t[mt]=h[mt]*g,t[Jt]=h[Jt]*g,t[ee]=h[ee]*g,t[he]=h[he]*g,t[$t]=h[$t]*g,t[Ot]=h[Ot]*g,t[Wt]=h[Wt]*g,t[Nt]=h[Nt]*g,this}determinant(){let t=this.values;return t[$t]*t[Jt]*t[oe]*t[me]-t[mt]*t[Ot]*t[oe]*t[me]-t[$t]*t[Qt]*t[ee]*t[me]+t[ve]*t[Ot]*t[ee]*t[me]+t[mt]*t[Qt]*t[Wt]*t[me]-t[ve]*t[Jt]*t[Wt]*t[me]-t[$t]*t[Jt]*t[fe]*t[zt]+t[mt]*t[Ot]*t[fe]*t[zt]+t[$t]*t[ue]*t[ee]*t[zt]-t[ae]*t[Ot]*t[ee]*t[zt]-t[mt]*t[ue]*t[Wt]*t[zt]+t[ae]*t[Jt]*t[Wt]*t[zt]+t[$t]*t[Qt]*t[fe]*t[he]-t[ve]*t[Ot]*t[fe]*t[he]-t[$t]*t[ue]*t[oe]*t[he]+t[ae]*t[Ot]*t[oe]*t[he]+t[ve]*t[ue]*t[Wt]*t[he]-t[ae]*t[Qt]*t[Wt]*t[he]-t[mt]*t[Qt]*t[fe]*t[Nt]+t[ve]*t[Jt]*t[fe]*t[Nt]+t[mt]*t[ue]*t[oe]*t[Nt]-t[ae]*t[Jt]*t[oe]*t[Nt]-t[ve]*t[ue]*t[ee]*t[Nt]+t[ae]*t[Qt]*t[ee]*t[Nt]}translate(t,h,l){let g=this.values;return g[me]+=t,g[zt]+=h,g[he]+=l,this}copy(){return new jt().set(this.values)}projection(t,h,l,g){this.identity();let M=1/Math.tan(l*(Math.PI/180)/2),X=(h+t)/(t-h),b=2*h*t/(t-h),x=this.values;return x[ae]=M/g,x[ve]=0,x[mt]=0,x[$t]=0,x[ue]=0,x[Qt]=M,x[Jt]=0,x[Ot]=0,x[fe]=0,x[oe]=0,x[ee]=X,x[Wt]=-1,x[me]=0,x[zt]=0,x[he]=b,x[Nt]=0,this}ortho2d(t,h,l,g){return this.ortho(t,t+l,h,h+g,0,1)}ortho(t,h,l,g,M,X){this.identity();let b=2/(h-t),x=2/(g-l),k=-2/(X-M),E=-(h+t)/(h-t),P=-(g+l)/(g-l),N=-(X+M)/(X-M),H=this.values;return H[ae]=b,H[ve]=0,H[mt]=0,H[$t]=0,H[ue]=0,H[Qt]=x,H[Jt]=0,H[Ot]=0,H[fe]=0,H[oe]=0,H[ee]=k,H[Wt]=0,H[me]=E,H[zt]=P,H[he]=N,H[Nt]=1,this}multiply(t){let h=this.temp,l=this.values,g=t.values;return h[ae]=l[ae]*g[ae]+l[ue]*g[ve]+l[fe]*g[mt]+l[me]*g[$t],h[ue]=l[ae]*g[ue]+l[ue]*g[Qt]+l[fe]*g[Jt]+l[me]*g[Ot],h[fe]=l[ae]*g[fe]+l[ue]*g[oe]+l[fe]*g[ee]+l[me]*g[Wt],h[me]=l[ae]*g[me]+l[ue]*g[zt]+l[fe]*g[he]+l[me]*g[Nt],h[ve]=l[ve]*g[ae]+l[Qt]*g[ve]+l[oe]*g[mt]+l[zt]*g[$t],h[Qt]=l[ve]*g[ue]+l[Qt]*g[Qt]+l[oe]*g[Jt]+l[zt]*g[Ot],h[oe]=l[ve]*g[fe]+l[Qt]*g[oe]+l[oe]*g[ee]+l[zt]*g[Wt],h[zt]=l[ve]*g[me]+l[Qt]*g[zt]+l[oe]*g[he]+l[zt]*g[Nt],h[mt]=l[mt]*g[ae]+l[Jt]*g[ve]+l[ee]*g[mt]+l[he]*g[$t],h[Jt]=l[mt]*g[ue]+l[Jt]*g[Qt]+l[ee]*g[Jt]+l[he]*g[Ot],h[ee]=l[mt]*g[fe]+l[Jt]*g[oe]+l[ee]*g[ee]+l[he]*g[Wt],h[he]=l[mt]*g[me]+l[Jt]*g[zt]+l[ee]*g[he]+l[he]*g[Nt],h[$t]=l[$t]*g[ae]+l[Ot]*g[ve]+l[Wt]*g[mt]+l[Nt]*g[$t],h[Ot]=l[$t]*g[ue]+l[Ot]*g[Qt]+l[Wt]*g[Jt]+l[Nt]*g[Ot],h[Wt]=l[$t]*g[fe]+l[Ot]*g[oe]+l[Wt]*g[ee]+l[Nt]*g[Wt],h[Nt]=l[$t]*g[me]+l[Ot]*g[zt]+l[Wt]*g[he]+l[Nt]*g[Nt],this.set(this.temp)}multiplyLeft(t){let h=this.temp,l=this.values,g=t.values;return h[ae]=g[ae]*l[ae]+g[ue]*l[ve]+g[fe]*l[mt]+g[me]*l[$t],h[ue]=g[ae]*l[ue]+g[ue]*l[Qt]+g[fe]*l[Jt]+g[me]*l[Ot],h[fe]=g[ae]*l[fe]+g[ue]*l[oe]+g[fe]*l[ee]+g[me]*l[Wt],h[me]=g[ae]*l[me]+g[ue]*l[zt]+g[fe]*l[he]+g[me]*l[Nt],h[ve]=g[ve]*l[ae]+g[Qt]*l[ve]+g[oe]*l[mt]+g[zt]*l[$t],h[Qt]=g[ve]*l[ue]+g[Qt]*l[Qt]+g[oe]*l[Jt]+g[zt]*l[Ot],h[oe]=g[ve]*l[fe]+g[Qt]*l[oe]+g[oe]*l[ee]+g[zt]*l[Wt],h[zt]=g[ve]*l[me]+g[Qt]*l[zt]+g[oe]*l[he]+g[zt]*l[Nt],h[mt]=g[mt]*l[ae]+g[Jt]*l[ve]+g[ee]*l[mt]+g[he]*l[$t],h[Jt]=g[mt]*l[ue]+g[Jt]*l[Qt]+g[ee]*l[Jt]+g[he]*l[Ot],h[ee]=g[mt]*l[fe]+g[Jt]*l[oe]+g[ee]*l[ee]+g[he]*l[Wt],h[he]=g[mt]*l[me]+g[Jt]*l[zt]+g[ee]*l[he]+g[he]*l[Nt],h[$t]=g[$t]*l[ae]+g[Ot]*l[ve]+g[Wt]*l[mt]+g[Nt]*l[$t],h[Ot]=g[$t]*l[ue]+g[Ot]*l[Qt]+g[Wt]*l[Jt]+g[Nt]*l[Ot],h[Wt]=g[$t]*l[fe]+g[Ot]*l[oe]+g[Wt]*l[ee]+g[Nt]*l[Wt],h[Nt]=g[$t]*l[me]+g[Ot]*l[zt]+g[Wt]*l[he]+g[Nt]*l[Nt],this.set(this.temp)}lookAt(t,h,l){jt.initTemps();let g=jt.xAxis,M=jt.yAxis,X=jt.zAxis;X.setFrom(h).normalize(),g.setFrom(h).normalize(),g.cross(l).normalize(),M.setFrom(g).cross(X).normalize(),this.identity();let b=this.values;return b[ae]=g.x,b[ue]=g.y,b[fe]=g.z,b[ve]=M.x,b[Qt]=M.y,b[oe]=M.z,b[mt]=-X.x,b[Jt]=-X.y,b[ee]=-X.z,jt.tmpMatrix.identity(),jt.tmpMatrix.values[me]=-t.x,jt.tmpMatrix.values[zt]=-t.y,jt.tmpMatrix.values[he]=-t.z,this.multiply(jt.tmpMatrix),this}static initTemps(){jt.xAxis===null&&(jt.xAxis=new Je),jt.yAxis===null&&(jt.yAxis=new Je),jt.zAxis===null&&(jt.zAxis=new Je);}},te=jt;te.xAxis=null,te.yAxis=null,te.zAxis=null,te.tmpMatrix=new jt;var le=class{constructor(t,h){this.position=new Je(0,0,0),this.direction=new Je(0,0,-1),this.up=new Je(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new te,this.inverseProjectionView=new te,this.projection=new te,this.view=new te,this.viewportWidth=t,this.viewportHeight=h,this.update();}update(){let t=this.projection,h=this.view,l=this.projectionView,g=this.inverseProjectionView,M=this.zoom,X=this.viewportWidth,b=this.viewportHeight;t.ortho(M*(-X/2),M*(X/2),M*(-b/2),M*(b/2),this.near,this.far),h.lookAt(this.position,this.direction,this.up),l.set(t.values),l.multiply(h),g.set(l.values).invert();}screenToWorld(t,h,l){let g=t.x,M=l-t.y-1;return t.x=2*g/h-1,t.y=2*M/l-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,h,l){return t.project(this.projectionView),t.x=h*(t.x+1)/2,t.y=l*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,h){this.viewportWidth=t,this.viewportHeight=h;}},ce=class{constructor(t){this.mouseX=0,this.mouseY=0,this.buttonDown=false,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=new Array,this.eventListeners=[],this.element=t,this.setupCallbacks(t);}setupCallbacks(t){let h=b=>{if(b instanceof MouseEvent){let x=t.getBoundingClientRect();this.mouseX=b.clientX-x.left,this.mouseY=b.clientY-x.top,this.buttonDown=true,this.listeners.map(k=>{k.down&&k.down(this.mouseX,this.mouseY);}),document.addEventListener("mousemove",l),document.addEventListener("mouseup",g);}},l=b=>{if(b instanceof MouseEvent){let x=t.getBoundingClientRect();this.mouseX=b.clientX-x.left,this.mouseY=b.clientY-x.top,this.listeners.map(k=>{this.buttonDown?k.dragged&&k.dragged(this.mouseX,this.mouseY):k.moved&&k.moved(this.mouseX,this.mouseY);});}},g=b=>{if(b instanceof MouseEvent){let x=t.getBoundingClientRect();this.mouseX=b.clientX-x.left,this.mouseY=b.clientY-x.top,this.buttonDown=false,this.listeners.map(k=>{k.up&&k.up(this.mouseX,this.mouseY);}),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",g);}},M=b=>{b.preventDefault();let x=b.deltaY;b.deltaMode==WheelEvent.DOM_DELTA_LINE&&(x*=8),b.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(x*=24),this.listeners.map(k=>{k.wheel&&k.wheel(b.deltaY);});};t.addEventListener("mousedown",h,true),t.addEventListener("mousemove",l,true),t.addEventListener("mouseup",g,true),t.addEventListener("wheel",M,true),t.addEventListener("touchstart",b=>{if(!this.touch0||!this.touch1){var x=b.changedTouches;let k=x.item(0),E=t.getBoundingClientRect(),P=k.clientX-E.left,N=k.clientY-E.top,H=new de(k.identifier,P,N);if(this.mouseX=P,this.mouseY=N,this.buttonDown=true,!this.touch0)this.touch0=H,this.listeners.map(K=>{K.down&&K.down(H.x,H.y);});else if(!this.touch1){this.touch1=H;let K=this.touch1.x-this.touch0.x,i=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(K*K+i*i),this.listeners.map(e=>{e.zoom&&e.zoom(this.initialPinchDistance,this.initialPinchDistance);});}}b.preventDefault();},false),t.addEventListener("touchmove",b=>{if(this.touch0){var x=b.changedTouches;let P=t.getBoundingClientRect();for(var k=0;k<x.length;k++){var E=x[k];let N=E.clientX-P.left,H=E.clientY-P.top;this.touch0.identifier===E.identifier&&(this.touch0.x=this.mouseX=N,this.touch0.y=this.mouseY=H,this.listeners.map(K=>{K.dragged&&K.dragged(N,H);})),this.touch1&&this.touch1.identifier===E.identifier&&(this.touch1.x=this.mouseX=N,this.touch1.y=this.mouseY=H);}if(this.touch0&&this.touch1){let N=this.touch1.x-this.touch0.x,H=this.touch1.x-this.touch0.x,K=Math.sqrt(N*N+H*H);this.listeners.map(i=>{i.zoom&&i.zoom(this.initialPinchDistance,K);});}}b.preventDefault();},false);let X=b=>{if(this.touch0){var x=b.changedTouches;let P=t.getBoundingClientRect();for(var k=0;k<x.length;k++){var E=x[k];let N=E.clientX-P.left,H=E.clientY-P.top;if(this.touch0.identifier===E.identifier)if(this.touch0=null,this.mouseX=N,this.mouseY=H,this.listeners.map(K=>{K.up&&K.up(N,H);}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=true,this.listeners.map(K=>{K.down&&K.down(this.touch0.x,this.touch0.y);});else {this.buttonDown=false;break}this.touch1&&this.touch1.identifier&&(this.touch1=null);}}b.preventDefault();};t.addEventListener("touchend",X,false),t.addEventListener("touchcancel",X);}addListener(t){this.listeners.push(t);}removeListener(t){let h=this.listeners.indexOf(t);h>-1&&this.listeners.splice(h,1);}},de=class{constructor(t,h,l){this.identifier=t,this.x=h,this.y=l;}},Me=class{constructor(t,h){this.canvas=t,this.camera=h;let l=0,g=0,X=0,b=0,x=0,k=0,E=0;new ce(t).addListener({down:(P,N)=>{l=h.position.x,g=h.position.y,X=x=P,b=k=N,E=h.zoom;},dragged:(P,N)=>{let H=P-X,K=N-b,i=h.screenToWorld(new Je(0,0),t.clientWidth,t.clientHeight),e=h.screenToWorld(new Je(H,K),t.clientWidth,t.clientHeight).sub(i);h.position.set(l-e.x,g-e.y,0),h.update(),x=P,k=N;},wheel:P=>{let N=P/200*h.zoom,H=h.zoom+N;if(H>0){let K=0,i=0;if(P<0)K=x,i=k;else {let n=new Je(t.clientWidth/2+15,t.clientHeight/2),r=x-n.x,m=t.clientHeight-1-k-n.y;K=n.x-r,i=t.clientHeight-1-n.y+m;}let e=h.screenToWorld(new Je(K,i),t.clientWidth,t.clientHeight);h.zoom=H,h.update();let s=h.screenToWorld(new Je(K,i),t.clientWidth,t.clientHeight);h.position.add(e.sub(s)),h.update();}},zoom:(P,N)=>{let H=P/N;h.zoom=E*H;},up:(P,N)=>{x=P,k=N;},moved:(P,N)=>{x=P,k=N;}});}},Zt=class{constructor(t,h,l){this.vertexShader=h,this.fragmentShader=l,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=h,this.fsSource=l,this.context=t instanceof oi?t:new oi(t),this.context.addRestorable(this),this.compile();}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs);}catch(h){throw this.dispose(),h}}compileShader(t,h){let l=this.context.gl,g=l.createShader(t);if(l.shaderSource(g,h),l.compileShader(g),!l.getShaderParameter(g,l.COMPILE_STATUS)){let M="Couldn't compile shader: "+l.getShaderInfoLog(g);if(l.deleteShader(g),!l.isContextLost())throw new Error(M)}return g}compileProgram(t,h){let l=this.context.gl,g=l.createProgram();if(l.attachShader(g,t),l.attachShader(g,h),l.linkProgram(g),!l.getProgramParameter(g,l.LINK_STATUS)){let M="Couldn't compile shader program: "+l.getProgramInfoLog(g);if(l.deleteProgram(g),!l.isContextLost())throw new Error(M)}return g}restore(){this.compile();}bind(){this.context.gl.useProgram(this.program);}unbind(){this.context.gl.useProgram(null);}setUniformi(t,h){this.context.gl.uniform1i(this.getUniformLocation(t),h);}setUniformf(t,h){this.context.gl.uniform1f(this.getUniformLocation(t),h);}setUniform2f(t,h,l){this.context.gl.uniform2f(this.getUniformLocation(t),h,l);}setUniform3f(t,h,l,g){this.context.gl.uniform3f(this.getUniformLocation(t),h,l,g);}setUniform4f(t,h,l,g,M){this.context.gl.uniform4f(this.getUniformLocation(t),h,l,g,M);}setUniform2x2f(t,h){let l=this.context.gl;this.tmp2x2.set(h),l.uniformMatrix2fv(this.getUniformLocation(t),false,this.tmp2x2);}setUniform3x3f(t,h){let l=this.context.gl;this.tmp3x3.set(h),l.uniformMatrix3fv(this.getUniformLocation(t),false,this.tmp3x3);}setUniform4x4f(t,h){let l=this.context.gl;this.tmp4x4.set(h),l.uniformMatrix4fv(this.getUniformLocation(t),false,this.tmp4x4);}getUniformLocation(t){let h=this.context.gl,l=h.getUniformLocation(this.program,t);if(!l&&!h.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return l}getAttributeLocation(t){let h=this.context.gl,l=h.getAttribLocation(this.program,t);if(l==-1&&!h.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return l}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null);}static newColoredTextured(t){let h=`
				attribute vec4 ${Zt.POSITION};
				attribute vec4 ${Zt.COLOR};
				attribute vec2 ${Zt.TEXCOORDS};
				uniform mat4 ${Zt.MVP_MATRIX};
				varying vec4 v_color;
				varying vec2 v_texCoords;

				void main () {
					v_color = ${Zt.COLOR};
					v_texCoords = ${Zt.TEXCOORDS};
					gl_Position = ${Zt.MVP_MATRIX} * ${Zt.POSITION};
				}
			`,l=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
				}
			`;return new Zt(t,h,l)}static newTwoColoredTextured(t){let h=`
				attribute vec4 ${Zt.POSITION};
				attribute vec4 ${Zt.COLOR};
				attribute vec4 ${Zt.COLOR2};
				attribute vec2 ${Zt.TEXCOORDS};
				uniform mat4 ${Zt.MVP_MATRIX};
				varying vec4 v_light;
				varying vec4 v_dark;
				varying vec2 v_texCoords;

				void main () {
					v_light = ${Zt.COLOR};
					v_dark = ${Zt.COLOR2};
					v_texCoords = ${Zt.TEXCOORDS};
					gl_Position = ${Zt.MVP_MATRIX} * ${Zt.POSITION};
				}
			`,l=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_light;
				varying LOWP vec4 v_dark;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					vec4 texColor = texture2D(u_texture, v_texCoords);
					gl_FragColor.a = texColor.a * v_light.a;
					gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
				}
			`;return new Zt(t,h,l)}static newColored(t){let h=`
				attribute vec4 ${Zt.POSITION};
				attribute vec4 ${Zt.COLOR};
				uniform mat4 ${Zt.MVP_MATRIX};
				varying vec4 v_color;

				void main () {
					v_color = ${Zt.COLOR};
					gl_Position = ${Zt.MVP_MATRIX} * ${Zt.POSITION};
				}
			`,l=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;

				void main () {
					gl_FragColor = v_color;
				}
			`;return new Zt(t,h,l)}},qt=Zt;qt.MVP_MATRIX="u_projTrans",qt.POSITION="a_position",qt.COLOR="a_color",qt.COLOR2="a_color2",qt.TEXCOORDS="a_texCoords",qt.SAMPLER="u_texture";var se=class{constructor(t,h,l,g){this.attributes=h,this.verticesLength=0,this.dirtyVertices=false,this.indicesLength=0,this.dirtyIndices=false,this.elementsPerVertex=0,this.context=t instanceof oi?t:new oi(t),this.elementsPerVertex=0;for(let M=0;M<h.length;M++)this.elementsPerVertex+=h[M].numElements;this.vertices=new Float32Array(l*this.elementsPerVertex),this.indices=new Uint16Array(g),this.context.addRestorable(this);}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=true,this.verticesLength=t;}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=true,this.indicesLength=t;}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var h=0;h<this.attributes.length;h++)t+=this.attributes[h].numElements;return t}setVertices(t){if(this.dirtyVertices=true,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length;}setIndices(t){if(this.dirtyIndices=true,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length;}draw(t,h){this.drawWithOffset(t,h,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex);}drawWithOffset(t,h,l,g){let M=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?M.drawElements(h,g,M.UNSIGNED_SHORT,l*2):M.drawArrays(h,l,g),this.unbind(t);}bind(t){let h=this.context.gl;h.bindBuffer(h.ARRAY_BUFFER,this.verticesBuffer);let l=0;for(let g=0;g<this.attributes.length;g++){let M=this.attributes[g],X=t.getAttributeLocation(M.name);h.enableVertexAttribArray(X),h.vertexAttribPointer(X,M.numElements,h.FLOAT,false,this.elementsPerVertex*4,l*4),l+=M.numElements;}this.indicesLength>0&&h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);}unbind(t){let h=this.context.gl;for(let l=0;l<this.attributes.length;l++){let g=this.attributes[l],M=t.getAttributeLocation(g.name);h.disableVertexAttribArray(M);}h.bindBuffer(h.ARRAY_BUFFER,null),this.indicesLength>0&&h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=false),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=false);}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update();}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer);}},re=class{constructor(t,h,l){this.name=t,this.type=h,this.numElements=l;}},ge=class extends re{constructor(){super(qt.POSITION,Ti.Float,2);}},we=class extends re{constructor(){super(qt.POSITION,Ti.Float,3);}},pe=class extends re{constructor(t=0){super(qt.TEXCOORDS+(t==0?"":t),Ti.Float,2);}},Pi=class extends re{constructor(){super(qt.COLOR,Ti.Float,4);}},Qs=class extends re{constructor(){super(qt.COLOR2,Ti.Float,4);}},Ti;(function(t){t[t.Float=0]="Float";})(Ti||(Ti={}));var bs=class{constructor(t,h=true,l=10920){if(this.isDrawing=false,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,l>10920)throw new Error("Can't have more than 10920 triangles per batch: "+l);this.context=t instanceof oi?t:new oi(t);let g=h?[new ge,new Pi,new pe,new Qs]:[new ge,new Pi,new pe];this.mesh=new se(t,g,l,l*3);let M=this.context.gl;this.srcColorBlend=M.SRC_ALPHA,this.srcAlphaBlend=M.ONE,this.dstBlend=M.ONE_MINUS_SRC_ALPHA;}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=true;let h=this.context.gl;h.enable(h.BLEND),h.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}setBlendMode(t,h,l){this.srcColorBlend==t&&this.srcAlphaBlend==h&&this.dstBlend==l||(this.srcColorBlend=t,this.srcAlphaBlend=h,this.dstBlend=l,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,l,h,l)));}draw(t,h,l){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+h.length>this.mesh.getVertices().length||this.indicesLength+l.length>this.mesh.getIndices().length)&&this.flush();let g=this.mesh.numVertices();this.mesh.getVertices().set(h,this.verticesLength),this.verticesLength+=h.length,this.mesh.setVerticesLength(this.verticesLength);let M=this.mesh.getIndices();for(let X=this.indicesLength,b=0;b<l.length;X++,b++)M[X]=l[b]+g;this.indicesLength+=l.length,this.mesh.setIndicesLength(this.indicesLength);}flush(){this.verticesLength!=0&&(this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++);}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=false;let t=this.context.gl;t.disable(t.BLEND);}getDrawCalls(){return this.drawCalls}dispose(){this.mesh.dispose();}},Ks=class{constructor(t,h=10920){if(this.isDrawing=false,this.shapeType=Oe.Filled,this.color=new u(1,1,1,1),this.vertexIndex=0,this.tmp=new $,h>10920)throw new Error("Can't have more than 10920 triangles per batch: "+h);this.context=t instanceof oi?t:new oi(t),this.mesh=new se(t,[new ge,new Pi],h,0);let l=this.context.gl;this.srcColorBlend=l.SRC_ALPHA,this.srcAlphaBlend=l.ONE,this.dstBlend=l.ONE_MINUS_SRC_ALPHA;}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=true;let h=this.context.gl;h.enable(h.BLEND),h.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}setBlendMode(t,h,l){this.srcColorBlend=t,this.srcAlphaBlend=h,this.dstBlend=l,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,l,h,l));}setColor(t){this.color.setFromColor(t);}setColorWith(t,h,l,g){this.color.set(t,h,l,g);}point(t,h,l=null){this.check(Oe.Point,1),l===null&&(l=this.color),this.vertex(t,h,l);}line(t,h,l,g,M=null){this.check(Oe.Line,2);this.mesh.getVertices();this.vertexIndex;M===null&&(M=this.color),this.vertex(t,h,M),this.vertex(l,g,M);}triangle(t,h,l,g,M,X,b,x=null,k=null,E=null){this.check(t?Oe.Filled:Oe.Line,3);this.mesh.getVertices();this.vertexIndex;x===null&&(x=this.color),k===null&&(k=this.color),E===null&&(E=this.color),t?(this.vertex(h,l,x),this.vertex(g,M,k),this.vertex(X,b,E)):(this.vertex(h,l,x),this.vertex(g,M,k),this.vertex(g,M,x),this.vertex(X,b,k),this.vertex(X,b,x),this.vertex(h,l,k));}quad(t,h,l,g,M,X,b,x,k,E=null,P=null,N=null,H=null){this.check(t?Oe.Filled:Oe.Line,3);this.mesh.getVertices();this.vertexIndex;E===null&&(E=this.color),P===null&&(P=this.color),N===null&&(N=this.color),H===null&&(H=this.color),t?(this.vertex(h,l,E),this.vertex(g,M,P),this.vertex(X,b,N),this.vertex(X,b,N),this.vertex(x,k,H),this.vertex(h,l,E)):(this.vertex(h,l,E),this.vertex(g,M,P),this.vertex(g,M,P),this.vertex(X,b,N),this.vertex(X,b,N),this.vertex(x,k,H),this.vertex(x,k,H),this.vertex(h,l,E));}rect(t,h,l,g,M,X=null){this.quad(t,h,l,h+g,l,h+g,l+M,h,l+M,X,X,X,X);}rectLine(t,h,l,g,M,X,b=null){this.check(t?Oe.Filled:Oe.Line,8),b===null&&(b=this.color);let x=this.tmp.set(M-l,h-g);x.normalize(),X*=.5;let k=x.x*X,E=x.y*X;t?(this.vertex(h+k,l+E,b),this.vertex(h-k,l-E,b),this.vertex(g+k,M+E,b),this.vertex(g-k,M-E,b),this.vertex(g+k,M+E,b),this.vertex(h-k,l-E,b)):(this.vertex(h+k,l+E,b),this.vertex(h-k,l-E,b),this.vertex(g+k,M+E,b),this.vertex(g-k,M-E,b),this.vertex(g+k,M+E,b),this.vertex(h+k,l+E,b),this.vertex(g-k,M-E,b),this.vertex(h-k,l-E,b));}x(t,h,l){this.line(t-l,h-l,t+l,h+l),this.line(t-l,h+l,t+l,h-l);}polygon(t,h,l,g=null){if(l<3)throw new Error("Polygon must contain at least 3 vertices");this.check(Oe.Line,l*2),g===null&&(g=this.color);this.mesh.getVertices();this.vertexIndex;h<<=1,l<<=1;let b=t[h],x=t[h+1],k=h+l;for(let E=h,P=h+l-2;E<P;E+=2){let N=t[E],H=t[E+1],K=0,i=0;E+2>=k?(K=b,i=x):(K=t[E+2],i=t[E+3]),this.vertex(N,H,g),this.vertex(K,i,g);}}circle(t,h,l,g,M=null,X=0){if(X===0&&(X=Math.max(1,6*S.cbrt(g)|0)),X<=0)throw new Error("segments must be > 0.");M===null&&(M=this.color);let b=2*S.PI/X,x=Math.cos(b),k=Math.sin(b),E=g,P=0;if(t){this.check(Oe.Filled,X*3+3),X--;for(let H=0;H<X;H++){this.vertex(h,l,M),this.vertex(h+E,l+P,M);let K=E;E=x*E-k*P,P=k*K+x*P,this.vertex(h+E,l+P,M);}this.vertex(h,l,M),this.vertex(h+E,l+P,M);}else {this.check(Oe.Line,X*2+2);for(let H=0;H<X;H++){this.vertex(h+E,l+P,M);let K=E;E=x*E-k*P,P=k*K+x*P,this.vertex(h+E,l+P,M);}this.vertex(h+E,l+P,M);}E=g,P=0,this.vertex(h+E,l+P,M);}curve(t,h,l,g,M,X,b,x,k,E=null){this.check(Oe.Line,k*2+2),E===null&&(E=this.color);let P=1/k,N=P*P,H=P*P*P,K=3*P,i=3*N,e=6*N,s=6*H,n=t-l*2+M,r=h-g*2+X,m=(l-M)*3-t+b,c=(g-X)*3-h+x,d=t,p=h,v=(l-t)*K+n*i+m*H,w=(g-h)*K+r*i+c*H,C=n*e+m*s,F=r*e+c*s,V=m*s,B=c*s;for(;k-- >0;)this.vertex(d,p,E),d+=v,p+=w,v+=C,w+=F,C+=V,F+=B,this.vertex(d,p,E);this.vertex(d,p,E),this.vertex(b,x,E);}vertex(t,h,l){let g=this.vertexIndex,M=this.mesh.getVertices();M[g++]=t,M[g++]=h,M[g++]=l.r,M[g++]=l.g,M[g++]=l.b,M[g++]=l.a,this.vertexIndex=g;}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=false;}flush(){this.vertexIndex!=0&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0);}check(t,h){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t)if(this.mesh.maxVertices()-this.mesh.numVertices()<h)this.flush();else return;else this.flush(),this.shapeType=t;}dispose(){this.mesh.dispose();}},Oe;(function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled";})(Oe||(Oe={}));var Wi=class{constructor(t){this.boneLineColor=new u(1,0,0,1),this.boneOriginColor=new u(0,1,0,1),this.attachmentLineColor=new u(0,0,1,.5),this.triangleLineColor=new u(1,.64,0,.5),this.pathColor=new u().setFromString("FF7F00"),this.clipColor=new u(.8,0,0,2),this.aabbColor=new u(0,1,0,.5),this.drawBones=true,this.drawRegionAttachments=true,this.drawBoundingBoxes=true,this.drawMeshHull=true,this.drawMeshTriangles=true,this.drawPaths=true,this.drawSkeletonXY=false,this.drawClipping=true,this.premultipliedAlpha=false,this.scale=1,this.boneWidth=2,this.bounds=new pr,this.temp=new Array,this.vertices=R.newFloatArray(2*1024),this.context=t instanceof oi?t:new oi(t);}draw(t,h,l=null){let g=h.x,M=h.y,X=this.context.gl,b=this.premultipliedAlpha?X.ONE:X.SRC_ALPHA;t.setBlendMode(b,X.ONE,X.ONE_MINUS_SRC_ALPHA);let x=h.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let k=0,E=x.length;k<E;k++){let P=x[k];if(l&&l.indexOf(P.data.name)>-1||!P.parent)continue;let N=g+P.data.length*P.a+P.worldX,H=M+P.data.length*P.c+P.worldY;t.rectLine(true,g+P.worldX,M+P.worldY,N,H,this.boneWidth*this.scale);}this.drawSkeletonXY&&t.x(g,M,4*this.scale);}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let k=h.slots;for(let E=0,P=k.length;E<P;E++){let N=k[E],H=N.getAttachment();if(H instanceof Ie){let K=H,i=this.vertices;K.computeWorldVertices(N.bone,i,0,2),t.line(i[0],i[1],i[2],i[3]),t.line(i[2],i[3],i[4],i[5]),t.line(i[4],i[5],i[6],i[7]),t.line(i[6],i[7],i[0],i[1]);}}}if(this.drawMeshHull||this.drawMeshTriangles){let k=h.slots;for(let E=0,P=k.length;E<P;E++){let N=k[E];if(!N.bone.active)continue;let H=N.getAttachment();if(!(H instanceof yi))continue;let K=H,i=this.vertices;K.computeWorldVertices(N,0,K.worldVerticesLength,i,0,2);let e=K.triangles,s=K.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let n=0,r=e.length;n<r;n+=3){let m=e[n]*2,c=e[n+1]*2,d=e[n+2]*2;t.triangle(false,i[m],i[m+1],i[c],i[c+1],i[d],i[d+1]);}}if(this.drawMeshHull&&s>0){t.setColor(this.attachmentLineColor),s=(s>>1)*2;let n=i[s-2],r=i[s-1];for(let m=0,c=s;m<c;m+=2){let d=i[m],p=i[m+1];t.line(d,p,n,r),n=d,r=p;}}}}if(this.drawBoundingBoxes){let k=this.bounds;k.update(h,true),t.setColor(this.aabbColor),t.rect(false,k.minX,k.minY,k.getWidth(),k.getHeight());let E=k.polygons,P=k.boundingBoxes;for(let N=0,H=E.length;N<H;N++){let K=E[N];t.setColor(P[N].color),t.polygon(K,0,K.length);}}if(this.drawPaths){let k=h.slots;for(let E=0,P=k.length;E<P;E++){let N=k[E];if(!N.bone.active)continue;let H=N.getAttachment();if(!(H instanceof ui))continue;let K=H,i=K.worldVerticesLength,e=this.temp=R.setArraySize(this.temp,i,0);K.computeWorldVertices(N,0,i,e,0,2);let s=this.pathColor,n=e[2],r=e[3],m=0,c=0;if(K.closed){t.setColor(s);let d=e[0],p=e[1],v=e[i-2],w=e[i-1];m=e[i-4],c=e[i-3],t.curve(n,r,d,p,v,w,m,c,32),t.setColor(Wi.LIGHT_GRAY),t.line(n,r,d,p),t.line(m,c,v,w);}i-=4;for(let d=4;d<i;d+=6){let p=e[d],v=e[d+1],w=e[d+2],C=e[d+3];m=e[d+4],c=e[d+5],t.setColor(s),t.curve(n,r,p,v,w,C,m,c,32),t.setColor(Wi.LIGHT_GRAY),t.line(n,r,p,v),t.line(m,c,w,C),n=m,r=c;}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let k=0,E=x.length;k<E;k++){let P=x[k];l&&l.indexOf(P.data.name)>-1||t.circle(true,g+P.worldX,M+P.worldY,3*this.scale,Wi.GREEN,8);}}if(this.drawClipping){let k=h.slots;t.setColor(this.clipColor);for(let E=0,P=k.length;E<P;E++){let N=k[E];if(!N.bone.active)continue;let H=N.getAttachment();if(!(H instanceof Di))continue;let K=H,i=K.worldVerticesLength,e=this.temp=R.setArraySize(this.temp,i,0);K.computeWorldVertices(N,0,i,e,0,2);for(let s=0,n=e.length;s<n;s+=2){let r=e[s],m=e[s+1],c=e[(s+2)%e.length],d=e[(s+3)%e.length];t.line(r,m,c,d);}}}}dispose(){}},Ci=Wi;Ci.LIGHT_GRAY=new u(.7529411764705882,.7529411764705882,.7529411764705882,1),Ci.GREEN=new u(0,1,0,1);var Ts=class{constructor(t,h,l){this.vertices=t,this.numVertices=h,this.numFloats=l;}},yr=class{constructor(t,h=true){this.premultipliedAlpha=false,this.vertexEffect=null,this.tempColor=new u,this.tempColor2=new u,this.vertexSize=8,this.twoColorTint=false,this.renderable=new Ts(null,0,0),this.clipper=new ws,this.temp=new $,this.temp2=new $,this.temp3=new u,this.temp4=new u,this.twoColorTint=h,h&&(this.vertexSize+=4),this.vertices=R.newFloatArray(this.vertexSize*1024);}draw(t,h,l=-1,g=-1){let M=this.clipper,X=this.premultipliedAlpha,b=this.twoColorTint,x=null,k=this.temp,E=this.temp2,P=this.temp3,N=this.temp4,H=this.renderable,K=null,i=null,e=h.drawOrder,s=null,n=h.color,r=b?12:8,m=false;l==-1&&(m=true);for(let c=0,d=e.length;c<d;c++){let p=M.isClipping()?2:r,v=e[c];if(!v.bone.active){M.clipEndWithSlot(v);continue}if(l>=0&&l==v.data.index&&(m=true),!m){M.clipEndWithSlot(v);continue}g>=0&&g==v.data.index&&(m=false);let w=v.getAttachment(),C=null;if(w instanceof Ie){let F=w;H.vertices=this.vertices,H.numVertices=4,H.numFloats=p<<2,F.computeWorldVertices(v.bone,H.vertices,0,p),i=yr.QUAD_TRIANGLES,K=F.uvs,C=F.region.renderObject.page.texture,s=F.color;}else if(w instanceof yi){let F=w;H.vertices=this.vertices,H.numVertices=F.worldVerticesLength>>1,H.numFloats=H.numVertices*p,H.numFloats>H.vertices.length&&(H.vertices=this.vertices=R.newFloatArray(H.numFloats)),F.computeWorldVertices(v,0,F.worldVerticesLength,H.vertices,0,p),i=F.triangles,C=F.region.renderObject.page.texture,K=F.uvs,s=F.color;}else if(w instanceof Di){let F=w;M.clipStart(v,F);continue}else {M.clipEndWithSlot(v);continue}if(C){let F=v.color,V=this.tempColor;V.r=n.r*F.r*s.r,V.g=n.g*F.g*s.g,V.b=n.b*F.b*s.b,V.a=n.a*F.a*s.a,X&&(V.r*=V.a,V.g*=V.a,V.b*=V.a);let B=this.tempColor2;v.darkColor?(X?(B.r=v.darkColor.r*V.a,B.g=v.darkColor.g*V.a,B.b=v.darkColor.b*V.a):B.setFromColor(v.darkColor),B.a=X?1:0):B.set(0,0,0,1);let z=v.data.blendMode;if(z!=x&&(x=z,t.setBlendMode(Ss.getSourceColorGLBlendMode(x,X),Ss.getSourceAlphaGLBlendMode(x),Ss.getDestGLBlendMode(x))),M.isClipping()){M.clipTriangles(H.vertices,H.numFloats,i,i.length,K,V,B,b);let W=new Float32Array(M.clippedVertices),Z=M.clippedTriangles;if(this.vertexEffect){let J=this.vertexEffect,j=W;if(b)for(let _=0,tt=W.length;_<tt;_+=r)k.x=j[_],k.y=j[_+1],P.set(j[_+2],j[_+3],j[_+4],j[_+5]),E.x=j[_+6],E.y=j[_+7],N.set(j[_+8],j[_+9],j[_+10],j[_+11]),J.transform(k,E,P,N),j[_]=k.x,j[_+1]=k.y,j[_+2]=P.r,j[_+3]=P.g,j[_+4]=P.b,j[_+5]=P.a,j[_+6]=E.x,j[_+7]=E.y,j[_+8]=N.r,j[_+9]=N.g,j[_+10]=N.b,j[_+11]=N.a;else for(let _=0,tt=W.length;_<tt;_+=r)k.x=j[_],k.y=j[_+1],P.set(j[_+2],j[_+3],j[_+4],j[_+5]),E.x=j[_+6],E.y=j[_+7],N.set(0,0,0,0),J.transform(k,E,P,N),j[_]=k.x,j[_+1]=k.y,j[_+2]=P.r,j[_+3]=P.g,j[_+4]=P.b,j[_+5]=P.a,j[_+6]=E.x,j[_+7]=E.y;}t.draw(C,W,Z);}else {let W=H.vertices;if(this.vertexEffect){let J=this.vertexEffect;if(b)for(let j=0,_=0,tt=H.numFloats;j<tt;j+=r,_+=2)k.x=W[j],k.y=W[j+1],E.x=K[_],E.y=K[_+1],P.setFromColor(V),N.setFromColor(B),J.transform(k,E,P,N),W[j]=k.x,W[j+1]=k.y,W[j+2]=P.r,W[j+3]=P.g,W[j+4]=P.b,W[j+5]=P.a,W[j+6]=E.x,W[j+7]=E.y,W[j+8]=N.r,W[j+9]=N.g,W[j+10]=N.b,W[j+11]=N.a;else for(let j=0,_=0,tt=H.numFloats;j<tt;j+=r,_+=2)k.x=W[j],k.y=W[j+1],E.x=K[_],E.y=K[_+1],P.setFromColor(V),N.set(0,0,0,0),J.transform(k,E,P,N),W[j]=k.x,W[j+1]=k.y,W[j+2]=P.r,W[j+3]=P.g,W[j+4]=P.b,W[j+5]=P.a,W[j+6]=E.x,W[j+7]=E.y;}else if(b)for(let J=2,j=0,_=H.numFloats;J<_;J+=r,j+=2)W[J]=V.r,W[J+1]=V.g,W[J+2]=V.b,W[J+3]=V.a,W[J+4]=K[j],W[J+5]=K[j+1],W[J+6]=B.r,W[J+7]=B.g,W[J+8]=B.b,W[J+9]=B.a;else for(let J=2,j=0,_=H.numFloats;J<_;J+=r,j+=2)W[J]=V.r,W[J+1]=V.g,W[J+2]=V.b,W[J+3]=V.a,W[J+4]=K[j],W[J+5]=K[j+1];let Z=H.vertices.subarray(0,H.numFloats);t.draw(C,Z,i);}}M.clipEndWithSlot(v);}M.clipEnd();}},rs=yr;rs.QUAD_TRIANGLES=[0,1,2,2,3,0];var wt=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],ns=[0,1,2,2,3,0],as=new u(1,1,1,1),Ii=class{constructor(t,h,l=true){this.twoColorTint=false,this.canvas=t,this.context=h instanceof oi?h:new oi(h),this.twoColorTint=l,this.camera=new le(t.width,t.height),this.batcherShader=l?qt.newTwoColoredTextured(this.context):qt.newColoredTextured(this.context),this.batcher=new bs(this.context,l),this.shapesShader=qt.newColored(this.context),this.shapes=new Ks(this.context),this.skeletonRenderer=new rs(this.context,l),this.skeletonDebugRenderer=new Ci(this.context);}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose();}begin(){this.camera.update(),this.enableRenderer(this.batcher);}drawSkeleton(t,h=false,l=-1,g=-1){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=h,this.skeletonRenderer.draw(this.batcher,t,l,g);}drawSkeletonDebug(t,h=false,l=null){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=h,this.skeletonDebugRenderer.draw(this.shapes,t,l);}drawTexture(t,h,l,g,M,X=null){this.enableRenderer(this.batcher),X===null&&(X=as);var b=0;wt[b++]=h,wt[b++]=l,wt[b++]=X.r,wt[b++]=X.g,wt[b++]=X.b,wt[b++]=X.a,wt[b++]=0,wt[b++]=1,this.twoColorTint&&(wt[b++]=0,wt[b++]=0,wt[b++]=0,wt[b++]=0),wt[b++]=h+g,wt[b++]=l,wt[b++]=X.r,wt[b++]=X.g,wt[b++]=X.b,wt[b++]=X.a,wt[b++]=1,wt[b++]=1,this.twoColorTint&&(wt[b++]=0,wt[b++]=0,wt[b++]=0,wt[b++]=0),wt[b++]=h+g,wt[b++]=l+M,wt[b++]=X.r,wt[b++]=X.g,wt[b++]=X.b,wt[b++]=X.a,wt[b++]=1,wt[b++]=0,this.twoColorTint&&(wt[b++]=0,wt[b++]=0,wt[b++]=0,wt[b++]=0),wt[b++]=h,wt[b++]=l+M,wt[b++]=X.r,wt[b++]=X.g,wt[b++]=X.b,wt[b++]=X.a,wt[b++]=0,wt[b++]=0,this.twoColorTint&&(wt[b++]=0,wt[b++]=0,wt[b++]=0,wt[b]=0),this.batcher.draw(t,wt,ns);}drawTextureUV(t,h,l,g,M,X,b,x,k,E=null){this.enableRenderer(this.batcher),E===null&&(E=as);var P=0;wt[P++]=h,wt[P++]=l,wt[P++]=E.r,wt[P++]=E.g,wt[P++]=E.b,wt[P++]=E.a,wt[P++]=X,wt[P++]=b,this.twoColorTint&&(wt[P++]=0,wt[P++]=0,wt[P++]=0,wt[P++]=0),wt[P++]=h+g,wt[P++]=l,wt[P++]=E.r,wt[P++]=E.g,wt[P++]=E.b,wt[P++]=E.a,wt[P++]=x,wt[P++]=b,this.twoColorTint&&(wt[P++]=0,wt[P++]=0,wt[P++]=0,wt[P++]=0),wt[P++]=h+g,wt[P++]=l+M,wt[P++]=E.r,wt[P++]=E.g,wt[P++]=E.b,wt[P++]=E.a,wt[P++]=x,wt[P++]=k,this.twoColorTint&&(wt[P++]=0,wt[P++]=0,wt[P++]=0,wt[P++]=0),wt[P++]=h,wt[P++]=l+M,wt[P++]=E.r,wt[P++]=E.g,wt[P++]=E.b,wt[P++]=E.a,wt[P++]=X,wt[P++]=k,this.twoColorTint&&(wt[P++]=0,wt[P++]=0,wt[P++]=0,wt[P]=0),this.batcher.draw(t,wt,ns);}drawTextureRotated(t,h,l,g,M,X,b,x,k=null){this.enableRenderer(this.batcher),k===null&&(k=as);let E=h+X,P=l+b,N=-X,H=-b,K=g-X,i=M-b,e=N,s=H,n=N,r=i,m=K,c=i,d=K,p=H,v=0,w=0,C=0,F=0,V=0,B=0,z=0,W=0;if(x!=0){let J=S.cosDeg(x),j=S.sinDeg(x);v=J*e-j*s,w=j*e+J*s,z=J*n-j*r,W=j*n+J*r,V=J*m-j*c,B=j*m+J*c,C=V+(v-z),F=B+(w-W);}else v=e,w=s,z=n,W=r,V=m,B=c,C=d,F=p;v+=E,w+=P,C+=E,F+=P,V+=E,B+=P,z+=E,W+=P;var Z=0;wt[Z++]=v,wt[Z++]=w,wt[Z++]=k.r,wt[Z++]=k.g,wt[Z++]=k.b,wt[Z++]=k.a,wt[Z++]=0,wt[Z++]=1,this.twoColorTint&&(wt[Z++]=0,wt[Z++]=0,wt[Z++]=0,wt[Z++]=0),wt[Z++]=C,wt[Z++]=F,wt[Z++]=k.r,wt[Z++]=k.g,wt[Z++]=k.b,wt[Z++]=k.a,wt[Z++]=1,wt[Z++]=1,this.twoColorTint&&(wt[Z++]=0,wt[Z++]=0,wt[Z++]=0,wt[Z++]=0),wt[Z++]=V,wt[Z++]=B,wt[Z++]=k.r,wt[Z++]=k.g,wt[Z++]=k.b,wt[Z++]=k.a,wt[Z++]=1,wt[Z++]=0,this.twoColorTint&&(wt[Z++]=0,wt[Z++]=0,wt[Z++]=0,wt[Z++]=0),wt[Z++]=z,wt[Z++]=W,wt[Z++]=k.r,wt[Z++]=k.g,wt[Z++]=k.b,wt[Z++]=k.a,wt[Z++]=0,wt[Z++]=0,this.twoColorTint&&(wt[Z++]=0,wt[Z++]=0,wt[Z++]=0,wt[Z]=0),this.batcher.draw(t,wt,ns);}drawRegion(t,h,l,g,M,X=null){this.enableRenderer(this.batcher),X===null&&(X=as);var b=0;wt[b++]=h,wt[b++]=l,wt[b++]=X.r,wt[b++]=X.g,wt[b++]=X.b,wt[b++]=X.a,wt[b++]=t.u,wt[b++]=t.v2,this.twoColorTint&&(wt[b++]=0,wt[b++]=0,wt[b++]=0,wt[b++]=0),wt[b++]=h+g,wt[b++]=l,wt[b++]=X.r,wt[b++]=X.g,wt[b++]=X.b,wt[b++]=X.a,wt[b++]=t.u2,wt[b++]=t.v2,this.twoColorTint&&(wt[b++]=0,wt[b++]=0,wt[b++]=0,wt[b++]=0),wt[b++]=h+g,wt[b++]=l+M,wt[b++]=X.r,wt[b++]=X.g,wt[b++]=X.b,wt[b++]=X.a,wt[b++]=t.u2,wt[b++]=t.v,this.twoColorTint&&(wt[b++]=0,wt[b++]=0,wt[b++]=0,wt[b++]=0),wt[b++]=h,wt[b++]=l+M,wt[b++]=X.r,wt[b++]=X.g,wt[b++]=X.b,wt[b++]=X.a,wt[b++]=t.u,wt[b++]=t.v,this.twoColorTint&&(wt[b++]=0,wt[b++]=0,wt[b++]=0,wt[b]=0),this.batcher.draw(t.page.texture,wt,ns);}line(t,h,l,g,M=null,X=null){this.enableRenderer(this.shapes),this.shapes.line(t,h,l,g,M);}triangle(t,h,l,g,M,X,b,x=null,k=null,E=null){this.enableRenderer(this.shapes),this.shapes.triangle(t,h,l,g,M,X,b,x,k,E);}quad(t,h,l,g,M,X,b,x,k,E=null,P=null,N=null,H=null){this.enableRenderer(this.shapes),this.shapes.quad(t,h,l,g,M,X,b,x,k,E,P,N,H);}rect(t,h,l,g,M,X=null){this.enableRenderer(this.shapes),this.shapes.rect(t,h,l,g,M,X);}rectLine(t,h,l,g,M,X,b=null){this.enableRenderer(this.shapes),this.shapes.rectLine(t,h,l,g,M,X,b);}polygon(t,h,l,g=null){this.enableRenderer(this.shapes),this.shapes.polygon(t,h,l,g);}circle(t,h,l,g,M=null,X=0){this.enableRenderer(this.shapes),this.shapes.circle(t,h,l,g,M,X);}curve(t,h,l,g,M,X,b,x,k,E=null){this.enableRenderer(this.shapes),this.shapes.curve(t,h,l,g,M,X,b,x,k,E);}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null;}resize(t){let h=this.canvas;var l=window.devicePixelRatio||1,g=Math.round(h.clientWidth*l),M=Math.round(h.clientHeight*l);if((h.width!=g||h.height!=M)&&(h.width=g,h.height=M),this.context.gl.viewport(0,0,h.width,h.height),t===Gi.Expand)this.camera.setViewport(g,M);else if(t===Gi.Fit){let X=h.width,b=h.height,x=this.camera.viewportWidth,k=this.camera.viewportHeight,E=k/x,P=b/X,N=E<P?x/X:k/b;this.camera.setViewport(X*N,b*N);}this.camera.update();}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof bs?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(qt.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof Ks?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(qt.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer);}},Gi;(function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit";})(Gi||(Gi={}));var zi,Vi,$s=0,tr=1,os=1,er=165,ir=108,Xi=163,wr=class{constructor(t){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new it,this.backgroundColor=new u(.135,.135,.135,1),this.tempColor=new u,this.renderer=t,this.timeKeeper.maxDelta=9,!Vi){let h=navigator.userAgent.indexOf("Safari")>-1,l=()=>$s++;Vi=new Image,Vi.src=Is,h||(Vi.crossOrigin="anonymous"),Vi.onload=l,zi=new Image,zi.src=St,h||(zi.crossOrigin="anonymous"),zi.onload=l;}}dispose(){var t,h;(t=this.logo)==null||t.dispose(),(h=this.spinner)==null||h.dispose();}draw(t=false){if($s<2||t&&this.fadeOut>os)return;this.timeKeeper.update();let h=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=this.timeKeeper.delta*200*(1+1.5*Math.pow(h,5));let l=this.tempColor,g=this.renderer,M=g.canvas,X=g.context.gl;if(g.resize(Gi.Expand),g.camera.position.set(M.width/2,M.height/2,0),g.batcher.setBlendMode(X.ONE,X.ONE,X.ONE_MINUS_SRC_ALPHA),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>os)return;l.setFromColor(this.backgroundColor),h=1-this.fadeOut/os,h=1-(h-1)*(h-1),l.a*=h,l.a>0&&(g.camera.zoom=1,g.begin(),g.quad(true,0,0,M.width,0,M.width,M.height,0,M.height,l,l,l,l),g.end());}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(X.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),X.clear(X.COLOR_BUFFER_BIT)),h=1;h*=Math.min(this.fadeIn/tr,1),l.set(h,h,h,h),this.logo||(this.logo=new ss(g.context,Vi),this.spinner=new ss(g.context,zi)),g.camera.zoom=Math.max(1,Xi/M.height),g.begin(),g.drawTexture(this.logo,(M.width-er)/2,(M.height-ir)/2,er,ir,l),g.drawTextureRotated(this.spinner,(M.width-Xi)/2,(M.height-Xi)/2,Xi,Xi,Xi/2,Xi/2,this.angle,l),g.end();}},St="data:image/png;base64,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",Is="data:image/png;base64,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",Es=class{constructor(t,h){this.time=new it,h.pathPrefix===void 0&&(h.pathPrefix=""),h.app===void 0&&(h.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),h.webglConfig===void 0&&(h.webglConfig={alpha:true}),this.htmlCanvas=t,this.context=new oi(t,h.webglConfig),this.renderer=new Ii(t,this.context),this.gl=this.context.gl,this.assetManager=new pi(this.context,h.pathPrefix),this.input=new ce(t),h.app.loadAssets(this);let l=()=>{requestAnimationFrame(l),this.time.update(),h.app.update(this,this.time.delta),h.app.render(this);},g=()=>{if(this.assetManager.isLoadingComplete()){this.assetManager.hasErrors()?h.app.error(this,this.assetManager.getErrors()):(h.app.initialize(this),l());return}requestAnimationFrame(g);};requestAnimationFrame(g);}clear(t,h,l,g){this.gl.clearColor(t,h,l,g),this.gl.clear(this.gl.COLOR_BUFFER_BIT);}};return T})(),ks=Nn;var Un=(()=>{var Y=Object.defineProperty,lt=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,T=Object.prototype.hasOwnProperty,y=(i,e)=>{for(var s in e)Y(i,s,{get:e[s],enumerable:true});},a=(i,e,s,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of o(e))!T.call(i,r)&&r!==s&&Y(i,r,{get:()=>e[r],enumerable:!(n=lt(e,r))||n.enumerable});return i},f=i=>a(Y({},"__esModule",{value:true}),i),u={};y(u,{AlphaTimeline:()=>Ae,Animation:()=>rt,AnimationState:()=>Ls,AnimationStateAdapter:()=>Bs,AnimationStateData:()=>Os,AssetCache:()=>Bi,AssetManager:()=>he,AssetManagerBase:()=>wi,AtlasAttachmentLoader:()=>Ws,Attachment:()=>ut,AttachmentTimeline:()=>Ye,BinaryInput:()=>gr,BlendMode:()=>js,Bone:()=>He,BoneData:()=>$i,BoundingBoxAttachment:()=>yi,CURRENT:()=>Ds,CameraController:()=>Ks,ClippingAttachment:()=>ui,Color:()=>O,Color2Attribute:()=>ns,ColorAttribute:()=>wt,ConstraintData:()=>fi,CurveTimeline:()=>at,CurveTimeline1:()=>Q,CurveTimeline2:()=>ot,DebugUtils:()=>q,DeformTimeline:()=>Xe,Downloader:()=>ps,DrawOrderTimeline:()=>ze,Event:()=>xs,EventData:()=>Gs,EventQueue:()=>Ji,EventTimeline:()=>qe,EventType:()=>Di,FIRST:()=>Ei,FakeTexture:()=>Ns,GLTexture:()=>ee,HOLD_FIRST:()=>fs,HOLD_MIX:()=>Vs,HOLD_SUBSEQUENT:()=>us,IkConstraint:()=>vs,IkConstraintData:()=>ts,IkConstraintTimeline:()=>Ue,Inherit:()=>di,InheritTimeline:()=>_t,Input:()=>Ti,IntSet:()=>A,Interpolation:()=>U,LoadingScreen:()=>P,M00:()=>Ot,M01:()=>Wt,M02:()=>Nt,M03:()=>jt,M10:()=>te,M11:()=>le,M12:()=>ce,M13:()=>de,M20:()=>Me,M21:()=>Zt,M22:()=>qt,M23:()=>se,M30:()=>re,M31:()=>ge,M32:()=>we,M33:()=>pe,ManagedWebGLRenderingContext:()=>Jt,MathUtils:()=>I,Matrix4:()=>Pi,Mesh:()=>Wi,MeshAttachment:()=>Li,MixBlend:()=>It,MixDirection:()=>ht,OrthoCamera:()=>Qs,PathAttachment:()=>Yi,PathConstraint:()=>dr,PathConstraintData:()=>Ni,PathConstraintMixTimeline:()=>Be,PathConstraintPositionTimeline:()=>We,PathConstraintSpacingTimeline:()=>Ze,Physics:()=>Si,PhysicsConstraintDampingTimeline:()=>ri,PhysicsConstraintGravityTimeline:()=>ci,PhysicsConstraintInertiaTimeline:()=>De,PhysicsConstraintMassTimeline:()=>hi,PhysicsConstraintMixTimeline:()=>Mi,PhysicsConstraintResetTimeline:()=>Hi,PhysicsConstraintStrengthTimeline:()=>vi,PhysicsConstraintTimeline:()=>$e,PhysicsConstraintWindTimeline:()=>ti,PointAttachment:()=>gs,PolygonBatcher:()=>tr,Pool:()=>$,Position2Attribute:()=>Ts,Position3Attribute:()=>yr,PositionMode:()=>es,Pow:()=>L,PowOut:()=>R,RGB2Timeline:()=>ye,RGBA2Timeline:()=>Le,RGBATimeline:()=>ie,RGBTimeline:()=>Kt,RegionAttachment:()=>Oi,ResizeMode:()=>h,RotateMode:()=>is,RotateTimeline:()=>Mt,SETUP:()=>Xs,SUBSEQUENT:()=>ni,ScaleTimeline:()=>Lt,ScaleXTimeline:()=>Vt,ScaleYTimeline:()=>Gt,SceneRenderer:()=>t,SequenceTimeline:()=>ds,Shader:()=>Oe,ShapeRenderer:()=>os,ShapeType:()=>er,ShearTimeline:()=>Ft,ShearXTimeline:()=>Tt,ShearYTimeline:()=>At,Skeleton:()=>Ai,SkeletonBinary:()=>Xr,SkeletonBounds:()=>ae,SkeletonClipping:()=>fe,SkeletonData:()=>Ee,SkeletonDebugRenderer:()=>ir,SkeletonJson:()=>me,SkeletonRenderer:()=>wr,Skin:()=>ys,SkinEntry:()=>zs,Slot:()=>fr,SlotData:()=>Zs,SpacingMode:()=>ei,SpineCanvas:()=>K,StringSet:()=>S,TexCoordAttribute:()=>rs,Texture:()=>_i,TextureAtlas:()=>ii,TextureAtlasPage:()=>Ki,TextureAtlasRegion:()=>ms,TextureFilter:()=>Qi,TextureRegion:()=>cr,TextureWrap:()=>Ie,TimeKeeper:()=>vt,Timeline:()=>kt,Touch:()=>bs,TrackEntry:()=>lr,TransformConstraint:()=>mr,TransformConstraintData:()=>qs,TransformConstraintTimeline:()=>Qe,TranslateTimeline:()=>yt,TranslateXTimeline:()=>Bt,TranslateYTimeline:()=>Dt,Triangulator:()=>ue,Utils:()=>D,Vector2:()=>it,Vector3:()=>$t,VertexAttachment:()=>st,VertexAttribute:()=>Ci,VertexAttributeType:()=>as,WindowedMean:()=>ct});var A=class{array=new Array;add(i){let e=this.contains(i);return this.array[i|0]=i|0,!e}contains(i){return this.array[i|0]!=null}remove(i){this.array[i|0]=void 0;}clear(){this.array.length=0;}},S=class{entries={};size=0;add(i){let e=this.entries[i];return this.entries[i]=true,e?false:(this.size++,true)}addAll(i){let e=this.size;for(var s=0,n=i.length;s<n;s++)this.add(i[s]);return e!=this.size}contains(i){return this.entries[i]}clear(){this.entries={},this.size=0;}},O=class hs{constructor(e=0,s=0,n=0,r=0){this.r=e,this.g=s,this.b=n,this.a=r;}static WHITE=new hs(1,1,1,1);static RED=new hs(1,0,0,1);static GREEN=new hs(0,1,0,1);static BLUE=new hs(0,0,1,1);static MAGENTA=new hs(1,0,1,1);set(e,s,n,r){return this.r=e,this.g=s,this.b=n,this.a=r,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this}add(e,s,n,r){return this.r+=e,this.g+=s,this.b+=n,this.a+=r,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,s){e.r=((s&4278190080)>>>24)/255,e.g=((s&16711680)>>>16)/255,e.b=((s&65280)>>>8)/255,e.a=(s&255)/255;}static rgb888ToColor(e,s){e.r=((s&16711680)>>>16)/255,e.g=((s&65280)>>>8)/255,e.b=(s&255)/255;}toRgb888(){let e=s=>("0"+(s*255).toString(16)).slice(-2);return +("0x"+e(this.r)+e(this.g)+e(this.b))}static fromString(e,s=new hs){return s.setFromString(e)}},I=class ki{static PI=3.1415927;static PI2=ki.PI*2;static invPI2=1/ki.PI2;static radiansToDegrees=180/ki.PI;static radDeg=ki.radiansToDegrees;static degreesToRadians=ki.PI/180;static degRad=ki.degreesToRadians;static clamp(e,s,n){return e<s?s:e>n?n:e}static cosDeg(e){return Math.cos(e*ki.degRad)}static sinDeg(e){return Math.sin(e*ki.degRad)}static atan2Deg(e,s){return Math.atan2(e,s)*ki.degRad}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let s=Math.pow(Math.abs(e),.3333333333333333);return e<0?-s:s}static randomTriangular(e,s){return ki.randomTriangularWith(e,s,(e+s)*.5)}static randomTriangularWith(e,s,n){let r=Math.random(),m=s-e;return r<=(n-e)/m?e+Math.sqrt(r*m*(n-e)):s-Math.sqrt((1-r)*m*(s-n))}static isPowerOfTwo(e){return e&&(e&e-1)===0}},U=class{apply(i,e,s){return i+(e-i)*this.applyInternal(s)}},L=class extends U{power=2;constructor(i){super(),this.power=i;}applyInternal(i){return i<=.5?Math.pow(i*2,this.power)/2:Math.pow((i-1)*2,this.power)/(this.power%2==0?-2:2)+1}},R=class extends L{constructor(i){super(i);}applyInternal(i){return Math.pow(i-1,this.power)*(this.power%2==0?-1:1)+1}},D=class Fs{static SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";static arrayCopy(e,s,n,r,m){for(let c=s,d=r;c<s+m;c++,d++)n[d]=e[c];}static arrayFill(e,s,n,r){for(let m=s;m<n;m++)e[m]=r;}static setArraySize(e,s,n=0){let r=e.length;if(r==s)return e;if(e.length=s,r<s)for(let m=r;m<s;m++)e[m]=n;return e}static ensureArrayCapacity(e,s,n=0){return e.length>=s?e:Fs.setArraySize(e,s,n)}static newArray(e,s){let n=new Array(e);for(let r=0;r<e;r++)n[r]=s;return n}static newFloatArray(e){if(Fs.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);{let s=new Array(e);for(let n=0;n<s.length;n++)s[n]=0;return s}}static newShortArray(e){if(Fs.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);{let s=new Array(e);for(let n=0;n<s.length;n++)s[n]=0;return s}}static toFloatArray(e){return Fs.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}static toSinglePrecision(e){return Fs.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}static webkit602BugfixHelper(e,s){}static contains(e,s,n=true){for(var r=0;r<e.length;r++)if(e[r]==s)return  true;return  false}static enumValue(e,s){return e[s[0].toUpperCase()+s.slice(1)]}},q=class{static logBones(i){for(let e=0;e<i.bones.length;e++){let s=i.bones[e];console.log(s.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.worldX+", "+s.worldY);}}},$=class{items=new Array;instantiator;constructor(i){this.instantiator=i;}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(i){i.reset&&i.reset(),this.items.push(i);}freeAll(i){for(let e=0;e<i.length;e++)this.free(i[e]);}clear(){this.items.length=0;}},it=class{constructor(i=0,e=0){this.x=i,this.y=e;}set(i,e){return this.x=i,this.y=e,this}length(){let i=this.x,e=this.y;return Math.sqrt(i*i+e*e)}normalize(){let i=this.length();return i!=0&&(this.x/=i,this.y/=i),this}},vt=class{maxDelta=.064;framesPerSecond=0;delta=0;totalTime=0;lastTime=Date.now()/1e3;frameCount=0;frameTime=0;update(){let i=Date.now()/1e3;this.delta=i-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=i,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0);}},ct=class{values;addedValues=0;lastValue=0;mean=0;dirty=true;constructor(i=32){this.values=new Array(i);}hasEnoughData(){return this.addedValues>=this.values.length}addValue(i){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=i,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=true;}getMean(){if(this.hasEnoughData()){if(this.dirty){let i=0;for(let e=0;e<this.values.length;e++)i+=this.values[e];this.mean=i/this.values.length,this.dirty=false;}return this.mean}return 0}},ut=class{name;constructor(i){if(!i)throw new Error("name cannot be null.");this.name=i;}},st=class Sn extends ut{static nextID=0;id=Sn.nextID++;bones=null;vertices=[];worldVerticesLength=0;timelineAttachment=this;constructor(e){super(e);}computeWorldVertices(e,s,n,r,m,c){n=m+(n>>1)*c;let d=e.bone.skeleton,p=e.deform,v=this.vertices,w=this.bones;if(!w){p.length>0&&(v=p);let B=e.bone,z=B.worldX,W=B.worldY,Z=B.a,J=B.b,j=B.c,_=B.d;for(let tt=s,nt=m;nt<n;tt+=2,nt+=c){let xt=v[tt],gt=v[tt+1];r[nt]=xt*Z+gt*J+z,r[nt+1]=xt*j+gt*_+W;}return}let C=0,F=0;for(let B=0;B<s;B+=2){let z=w[C];C+=z+1,F+=z;}let V=d.bones;if(p.length==0)for(let B=m,z=F*3;B<n;B+=c){let W=0,Z=0,J=w[C++];for(J+=C;C<J;C++,z+=3){let j=V[w[C]],_=v[z],tt=v[z+1],nt=v[z+2];W+=(_*j.a+tt*j.b+j.worldX)*nt,Z+=(_*j.c+tt*j.d+j.worldY)*nt;}r[B]=W,r[B+1]=Z;}else {let B=p;for(let z=m,W=F*3,Z=F<<1;z<n;z+=c){let J=0,j=0,_=w[C++];for(_+=C;C<_;C++,W+=3,Z+=2){let tt=V[w[C]],nt=v[W]+B[Z],xt=v[W+1]+B[Z+1],gt=v[W+2];J+=(nt*tt.a+xt*tt.b+tt.worldX)*gt,j+=(nt*tt.c+xt*tt.d+tt.worldY)*gt;}r[z]=J,r[z+1]=j;}}}copyTo(e){this.bones?(e.bones=new Array(this.bones.length),D.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices&&(e.vertices=D.newFloatArray(this.vertices.length),D.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)),e.worldVerticesLength=this.worldVerticesLength,e.timelineAttachment=this.timelineAttachment;}},G=class Er{static _nextID=0;id=Er.nextID();regions;start=0;digits=0;setupIndex=0;constructor(e){this.regions=new Array(e);}copy(){let e=new Er(this.regions.length);return D.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}apply(e,s){let n=e.sequenceIndex;n==-1&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);let r=this.regions[n];s.region!=r&&(s.region=r,s.updateRegion());}getPath(e,s){let n=e,r=(this.start+s).toString();for(let m=this.digits-r.length;m>0;m--)n+="0";return n+=r,n}static nextID(){return Er._nextID++}},et=(i=>(i[i.hold=0]="hold",i[i.once=1]="once",i[i.loop=2]="loop",i[i.pingpong=3]="pingpong",i[i.onceReverse=4]="onceReverse",i[i.loopReverse=5]="loopReverse",i[i.pingpongReverse=6]="pingpongReverse",i))(et||{}),dt=[0,1,2,3,4,5,6],rt=class{name;timelines=[];timelineIds=new S;duration;constructor(i,e,s){if(!i)throw new Error("name cannot be null.");this.name=i,this.setTimelines(e),this.duration=s;}setTimelines(i){if(!i)throw new Error("timelines cannot be null.");this.timelines=i,this.timelineIds.clear();for(var e=0;e<i.length;e++)this.timelineIds.addAll(i[e].getPropertyIds());}hasTimeline(i){for(let e=0;e<i.length;e++)if(this.timelineIds.contains(i[e]))return  true;return  false}apply(i,e,s,n,r,m,c,d){if(!i)throw new Error("skeleton cannot be null.");n&&this.duration!=0&&(s%=this.duration,e>0&&(e%=this.duration));let p=this.timelines;for(let v=0,w=p.length;v<w;v++)p[v].apply(i,e,s,r,m,c,d);}},It=(i=>(i[i.setup=0]="setup",i[i.first=1]="first",i[i.replace=2]="replace",i[i.add=3]="add",i))(It||{}),ht=(i=>(i[i.mixIn=0]="mixIn",i[i.mixOut=1]="mixOut",i))(ht||{}),ft={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28},kt=class{propertyIds;frames;constructor(i,e){this.propertyIds=e,this.frames=D.newFloatArray(i*this.getFrameEntries());}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(i,e){let s=i.length;for(let n=1;n<s;n++)if(i[n]>e)return n-1;return s-1}static search(i,e,s){let n=i.length;for(let r=s;r<n;r+=s)if(i[r]>e)return r-s;return n-s}},at=class extends kt{curves;constructor(i,e,s){super(i,s),this.curves=D.newFloatArray(i+e*18),this.curves[i-1]=1;}setLinear(i){this.curves[i]=0;}setStepped(i){this.curves[i]=1;}shrink(i){let e=this.getFrameCount()+i*18;if(this.curves.length>e){let s=D.newFloatArray(e);D.arrayCopy(this.curves,0,s,0,e),this.curves=s;}}setBezier(i,e,s,n,r,m,c,d,p,v,w){let C=this.curves,F=this.getFrameCount()+i*18;s==0&&(C[e]=2+F);let V=(n-m*2+d)*.03,B=(r-c*2+p)*.03,z=((m-d)*3-n+v)*.006,W=((c-p)*3-r+w)*.006,Z=V*2+z,J=B*2+W,j=(m-n)*.3+V+z*.16666667,_=(c-r)*.3+B+W*.16666667,tt=n+j,nt=r+_;for(let xt=F+18;F<xt;F+=2)C[F]=tt,C[F+1]=nt,j+=Z,_+=J,Z+=z,J+=W,tt+=j,nt+=_;}getBezierValue(i,e,s,n){let r=this.curves;if(r[n]>i){let p=this.frames[e],v=this.frames[e+s];return v+(i-p)/(r[n]-p)*(r[n+1]-v)}let m=n+18;for(n+=2;n<m;n+=2)if(r[n]>=i){let p=r[n-2],v=r[n-1];return v+(i-p)/(r[n]-p)*(r[n+1]-v)}e+=this.getFrameEntries();let c=r[m-2],d=r[m-1];return d+(i-c)/(this.frames[e]-c)*(this.frames[e+s]-d)}},Q=class extends at{constructor(i,e,s){super(i,e,[s]);}getFrameEntries(){return 2}setFrame(i,e,s){i<<=1,this.frames[i]=e,this.frames[i+1]=s;}getCurveValue(i){let e=this.frames,s=e.length-2;for(let r=2;r<=s;r+=2)if(e[r]>i){s=r-2;break}let n=this.curves[s>>1];switch(n){case 0:let r=e[s],m=e[s+1];return m+(i-r)/(e[s+2]-r)*(e[s+2+1]-m);case 1:return e[s+1]}return this.getBezierValue(i,s,1,n-2)}getRelativeValue(i,e,s,n,r){if(i<this.frames[0]){switch(s){case 0:return r;case 1:return n+(r-n)*e}return n}let m=this.getCurveValue(i);switch(s){case 0:return r+m*e;case 1:case 2:m+=r-n;}return n+m*e}getAbsoluteValue(i,e,s,n,r){if(i<this.frames[0]){switch(s){case 0:return r;case 1:return n+(r-n)*e}return n}let m=this.getCurveValue(i);return s==0?r+(m-r)*e:n+(m-n)*e}getAbsoluteValue2(i,e,s,n,r,m){if(i<this.frames[0]){switch(s){case 0:return r;case 1:return n+(r-n)*e}return n}return s==0?r+(m-r)*e:n+(m-n)*e}getScaleValue(i,e,s,n,r,m){let c=this.frames;if(i<c[0]){switch(s){case 0:return m;case 1:return r+(m-r)*e}return r}let d=this.getCurveValue(i)*m;if(e==1)return s==3?r+d-m:d;if(n==1)switch(s){case 0:return m+(Math.abs(d)*I.signum(m)-m)*e;case 1:case 2:return r+(Math.abs(d)*I.signum(r)-r)*e}else {let p=0;switch(s){case 0:return p=Math.abs(m)*I.signum(d),p+(d-p)*e;case 1:case 2:return p=Math.abs(r)*I.signum(d),p+(d-p)*e}}return r+(d-m)*e}},ot=class extends at{constructor(i,e,s,n){super(i,e,[s,n]);}getFrameEntries(){return 3}setFrame(i,e,s,n){i*=3,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n;}},Mt=class extends Q{boneIndex=0;constructor(i,e,s){super(i,e,ft.rotate+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];d.active&&(d.rotation=this.getRelativeValue(s,r,m,d.rotation,d.data.rotation));}},yt=class extends ot{boneIndex=0;constructor(i,e,s){super(i,e,ft.x+"|"+s,ft.y+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(m){case 0:d.x=d.data.x,d.y=d.data.y;return;case 1:d.x+=(d.data.x-d.x)*r,d.y+=(d.data.y-d.y)*r;}return}let v=0,w=0,C=kt.search(p,s,3),F=this.curves[C/3];switch(F){case 0:let V=p[C];v=p[C+1],w=p[C+2];let B=(s-V)/(p[C+3]-V);v+=(p[C+3+1]-v)*B,w+=(p[C+3+2]-w)*B;break;case 1:v=p[C+1],w=p[C+2];break;default:v=this.getBezierValue(s,C,1,F-2),w=this.getBezierValue(s,C,2,F+18-2);}switch(m){case 0:d.x=d.data.x+v*r,d.y=d.data.y+w*r;break;case 1:case 2:d.x+=(d.data.x+v-d.x)*r,d.y+=(d.data.y+w-d.y)*r;break;case 3:d.x+=v*r,d.y+=w*r;}}},Bt=class extends Q{boneIndex=0;constructor(i,e,s){super(i,e,ft.x+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];d.active&&(d.x=this.getRelativeValue(s,r,m,d.x,d.data.x));}},Dt=class extends Q{boneIndex=0;constructor(i,e,s){super(i,e,ft.y+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];d.active&&(d.y=this.getRelativeValue(s,r,m,d.y,d.data.y));}},Lt=class extends ot{boneIndex=0;constructor(i,e,s){super(i,e,ft.scaleX+"|"+s,ft.scaleY+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(m){case 0:d.scaleX=d.data.scaleX,d.scaleY=d.data.scaleY;return;case 1:d.scaleX+=(d.data.scaleX-d.scaleX)*r,d.scaleY+=(d.data.scaleY-d.scaleY)*r;}return}let v,w,C=kt.search(p,s,3),F=this.curves[C/3];switch(F){case 0:let V=p[C];v=p[C+1],w=p[C+2];let B=(s-V)/(p[C+3]-V);v+=(p[C+3+1]-v)*B,w+=(p[C+3+2]-w)*B;break;case 1:v=p[C+1],w=p[C+2];break;default:v=this.getBezierValue(s,C,1,F-2),w=this.getBezierValue(s,C,2,F+18-2);}if(v*=d.data.scaleX,w*=d.data.scaleY,r==1)m==3?(d.scaleX+=v-d.data.scaleX,d.scaleY+=w-d.data.scaleY):(d.scaleX=v,d.scaleY=w);else {let V=0,B=0;if(c==1)switch(m){case 0:V=d.data.scaleX,B=d.data.scaleY,d.scaleX=V+(Math.abs(v)*I.signum(V)-V)*r,d.scaleY=B+(Math.abs(w)*I.signum(B)-B)*r;break;case 1:case 2:V=d.scaleX,B=d.scaleY,d.scaleX=V+(Math.abs(v)*I.signum(V)-V)*r,d.scaleY=B+(Math.abs(w)*I.signum(B)-B)*r;break;case 3:d.scaleX+=(v-d.data.scaleX)*r,d.scaleY+=(w-d.data.scaleY)*r;}else switch(m){case 0:V=Math.abs(d.data.scaleX)*I.signum(v),B=Math.abs(d.data.scaleY)*I.signum(w),d.scaleX=V+(v-V)*r,d.scaleY=B+(w-B)*r;break;case 1:case 2:V=Math.abs(d.scaleX)*I.signum(v),B=Math.abs(d.scaleY)*I.signum(w),d.scaleX=V+(v-V)*r,d.scaleY=B+(w-B)*r;break;case 3:d.scaleX+=(v-d.data.scaleX)*r,d.scaleY+=(w-d.data.scaleY)*r;}}}},Vt=class extends Q{boneIndex=0;constructor(i,e,s){super(i,e,ft.scaleX+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];d.active&&(d.scaleX=this.getScaleValue(s,r,m,c,d.scaleX,d.data.scaleX));}},Gt=class extends Q{boneIndex=0;constructor(i,e,s){super(i,e,ft.scaleY+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];d.active&&(d.scaleY=this.getScaleValue(s,r,m,c,d.scaleY,d.data.scaleY));}},Ft=class extends ot{boneIndex=0;constructor(i,e,s){super(i,e,ft.shearX+"|"+s,ft.shearY+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(m){case 0:d.shearX=d.data.shearX,d.shearY=d.data.shearY;return;case 1:d.shearX+=(d.data.shearX-d.shearX)*r,d.shearY+=(d.data.shearY-d.shearY)*r;}return}let v=0,w=0,C=kt.search(p,s,3),F=this.curves[C/3];switch(F){case 0:let V=p[C];v=p[C+1],w=p[C+2];let B=(s-V)/(p[C+3]-V);v+=(p[C+3+1]-v)*B,w+=(p[C+3+2]-w)*B;break;case 1:v=p[C+1],w=p[C+2];break;default:v=this.getBezierValue(s,C,1,F-2),w=this.getBezierValue(s,C,2,F+18-2);}switch(m){case 0:d.shearX=d.data.shearX+v*r,d.shearY=d.data.shearY+w*r;break;case 1:case 2:d.shearX+=(d.data.shearX+v-d.shearX)*r,d.shearY+=(d.data.shearY+w-d.shearY)*r;break;case 3:d.shearX+=v*r,d.shearY+=w*r;}}},Tt=class extends Q{boneIndex=0;constructor(i,e,s){super(i,e,ft.shearX+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];d.active&&(d.shearX=this.getRelativeValue(s,r,m,d.shearX,d.data.shearX));}},At=class extends Q{boneIndex=0;constructor(i,e,s){super(i,e,ft.shearY+"|"+s),this.boneIndex=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];d.active&&(d.shearY=this.getRelativeValue(s,r,m,d.shearY,d.data.shearY));}},_t=class extends kt{boneIndex=0;constructor(i,e){super(i,[ft.inherit+"|"+e]),this.boneIndex=e;}getFrameEntries(){return 2}setFrame(i,e,s){i*=2,this.frames[i]=e,this.frames[i+1]=s;}apply(i,e,s,n,r,m,c){let d=i.bones[this.boneIndex];if(!d.active)return;if(c==1){m==0&&(d.inherit=d.data.inherit);return}let p=this.frames;if(s<p[0]){(m==0||m==1)&&(d.inherit=d.data.inherit);return}d.inherit=this.frames[kt.search(p,s,2)+1];}},ie=class extends at{slotIndex=0;constructor(i,e,s){super(i,e,[ft.rgb+"|"+s,ft.alpha+"|"+s]),this.slotIndex=s;}getFrameEntries(){return 5}setFrame(i,e,s,n,r,m){i*=5,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r,this.frames[i+4]=m;}apply(i,e,s,n,r,m,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=this.frames,v=d.color;if(s<p[0]){let W=d.data.color;switch(m){case 0:v.setFromColor(W);return;case 1:v.add((W.r-v.r)*r,(W.g-v.g)*r,(W.b-v.b)*r,(W.a-v.a)*r);}return}let w=0,C=0,F=0,V=0,B=kt.search(p,s,5),z=this.curves[B/5];switch(z){case 0:let W=p[B];w=p[B+1],C=p[B+2],F=p[B+3],V=p[B+4];let Z=(s-W)/(p[B+5]-W);w+=(p[B+5+1]-w)*Z,C+=(p[B+5+2]-C)*Z,F+=(p[B+5+3]-F)*Z,V+=(p[B+5+4]-V)*Z;break;case 1:w=p[B+1],C=p[B+2],F=p[B+3],V=p[B+4];break;default:w=this.getBezierValue(s,B,1,z-2),C=this.getBezierValue(s,B,2,z+18-2),F=this.getBezierValue(s,B,3,z+36-2),V=this.getBezierValue(s,B,4,z+54-2);}r==1?v.set(w,C,F,V):(m==0&&v.setFromColor(d.data.color),v.add((w-v.r)*r,(C-v.g)*r,(F-v.b)*r,(V-v.a)*r));}},Kt=class extends at{slotIndex=0;constructor(i,e,s){super(i,e,[ft.rgb+"|"+s]),this.slotIndex=s;}getFrameEntries(){return 4}setFrame(i,e,s,n,r){i<<=2,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r;}apply(i,e,s,n,r,m,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=this.frames,v=d.color;if(s<p[0]){let z=d.data.color;switch(m){case 0:v.r=z.r,v.g=z.g,v.b=z.b;return;case 1:v.r+=(z.r-v.r)*r,v.g+=(z.g-v.g)*r,v.b+=(z.b-v.b)*r;}return}let w=0,C=0,F=0,V=kt.search(p,s,4),B=this.curves[V>>2];switch(B){case 0:let z=p[V];w=p[V+1],C=p[V+2],F=p[V+3];let W=(s-z)/(p[V+4]-z);w+=(p[V+4+1]-w)*W,C+=(p[V+4+2]-C)*W,F+=(p[V+4+3]-F)*W;break;case 1:w=p[V+1],C=p[V+2],F=p[V+3];break;default:w=this.getBezierValue(s,V,1,B-2),C=this.getBezierValue(s,V,2,B+18-2),F=this.getBezierValue(s,V,3,B+36-2);}if(r==1)v.r=w,v.g=C,v.b=F;else {if(m==0){let z=d.data.color;v.r=z.r,v.g=z.g,v.b=z.b;}v.r+=(w-v.r)*r,v.g+=(C-v.g)*r,v.b+=(F-v.b)*r;}}},Ae=class extends Q{slotIndex=0;constructor(i,e,s){super(i,e,ft.alpha+"|"+s),this.slotIndex=s;}apply(i,e,s,n,r,m,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=d.color;if(s<this.frames[0]){let w=d.data.color;switch(m){case 0:p.a=w.a;return;case 1:p.a+=(w.a-p.a)*r;}return}let v=this.getCurveValue(s);r==1?p.a=v:(m==0&&(p.a=d.data.color.a),p.a+=(v-p.a)*r);}},Le=class extends at{slotIndex=0;constructor(i,e,s){super(i,e,[ft.rgb+"|"+s,ft.alpha+"|"+s,ft.rgb2+"|"+s]),this.slotIndex=s;}getFrameEntries(){return 8}setFrame(i,e,s,n,r,m,c,d,p){i<<=3,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r,this.frames[i+4]=m,this.frames[i+5]=c,this.frames[i+6]=d,this.frames[i+7]=p;}apply(i,e,s,n,r,m,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=this.frames,v=d.color,w=d.darkColor;if(s<p[0]){let _=d.data.color,tt=d.data.darkColor;switch(m){case 0:v.setFromColor(_),w.r=tt.r,w.g=tt.g,w.b=tt.b;return;case 1:v.add((_.r-v.r)*r,(_.g-v.g)*r,(_.b-v.b)*r,(_.a-v.a)*r),w.r+=(tt.r-w.r)*r,w.g+=(tt.g-w.g)*r,w.b+=(tt.b-w.b)*r;}return}let C=0,F=0,V=0,B=0,z=0,W=0,Z=0,J=kt.search(p,s,8),j=this.curves[J>>3];switch(j){case 0:let _=p[J];C=p[J+1],F=p[J+2],V=p[J+3],B=p[J+4],z=p[J+5],W=p[J+6],Z=p[J+7];let tt=(s-_)/(p[J+8]-_);C+=(p[J+8+1]-C)*tt,F+=(p[J+8+2]-F)*tt,V+=(p[J+8+3]-V)*tt,B+=(p[J+8+4]-B)*tt,z+=(p[J+8+5]-z)*tt,W+=(p[J+8+6]-W)*tt,Z+=(p[J+8+7]-Z)*tt;break;case 1:C=p[J+1],F=p[J+2],V=p[J+3],B=p[J+4],z=p[J+5],W=p[J+6],Z=p[J+7];break;default:C=this.getBezierValue(s,J,1,j-2),F=this.getBezierValue(s,J,2,j+18-2),V=this.getBezierValue(s,J,3,j+36-2),B=this.getBezierValue(s,J,4,j+54-2),z=this.getBezierValue(s,J,5,j+72-2),W=this.getBezierValue(s,J,6,j+90-2),Z=this.getBezierValue(s,J,7,j+108-2);}if(r==1)v.set(C,F,V,B),w.r=z,w.g=W,w.b=Z;else {if(m==0){v.setFromColor(d.data.color);let _=d.data.darkColor;w.r=_.r,w.g=_.g,w.b=_.b;}v.add((C-v.r)*r,(F-v.g)*r,(V-v.b)*r,(B-v.a)*r),w.r+=(z-w.r)*r,w.g+=(W-w.g)*r,w.b+=(Z-w.b)*r;}}},ye=class extends at{slotIndex=0;constructor(i,e,s){super(i,e,[ft.rgb+"|"+s,ft.rgb2+"|"+s]),this.slotIndex=s;}getFrameEntries(){return 7}setFrame(i,e,s,n,r,m,c,d){i*=7,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r,this.frames[i+4]=m,this.frames[i+5]=c,this.frames[i+6]=d;}apply(i,e,s,n,r,m,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=this.frames,v=d.color,w=d.darkColor;if(s<p[0]){let _=d.data.color,tt=d.data.darkColor;switch(m){case 0:v.r=_.r,v.g=_.g,v.b=_.b,w.r=tt.r,w.g=tt.g,w.b=tt.b;return;case 1:v.r+=(_.r-v.r)*r,v.g+=(_.g-v.g)*r,v.b+=(_.b-v.b)*r,w.r+=(tt.r-w.r)*r,w.g+=(tt.g-w.g)*r,w.b+=(tt.b-w.b)*r;}return}let C=0,F=0,V=0,z=0,W=0,Z=0,J=kt.search(p,s,7),j=this.curves[J/7];switch(j){case 0:let _=p[J];C=p[J+1],F=p[J+2],V=p[J+3],z=p[J+4],W=p[J+5],Z=p[J+6];let tt=(s-_)/(p[J+7]-_);C+=(p[J+7+1]-C)*tt,F+=(p[J+7+2]-F)*tt,V+=(p[J+7+3]-V)*tt,z+=(p[J+7+4]-z)*tt,W+=(p[J+7+5]-W)*tt,Z+=(p[J+7+6]-Z)*tt;break;case 1:C=p[J+1],F=p[J+2],V=p[J+3],z=p[J+4],W=p[J+5],Z=p[J+6];break;default:C=this.getBezierValue(s,J,1,j-2),F=this.getBezierValue(s,J,2,j+18-2),V=this.getBezierValue(s,J,3,j+36-2),z=this.getBezierValue(s,J,4,j+54-2),W=this.getBezierValue(s,J,5,j+72-2),Z=this.getBezierValue(s,J,6,j+90-2);}if(r==1)v.r=C,v.g=F,v.b=V,w.r=z,w.g=W,w.b=Z;else {if(m==0){let _=d.data.color,tt=d.data.darkColor;v.r=_.r,v.g=_.g,v.b=_.b,w.r=tt.r,w.g=tt.g,w.b=tt.b;}v.r+=(C-v.r)*r,v.g+=(F-v.g)*r,v.b+=(V-v.b)*r,w.r+=(z-w.r)*r,w.g+=(W-w.g)*r,w.b+=(Z-w.b)*r;}}},Ye=class extends kt{slotIndex=0;attachmentNames;constructor(i,e){super(i,[ft.attachment+"|"+e]),this.slotIndex=e,this.attachmentNames=new Array(i);}getFrameCount(){return this.frames.length}setFrame(i,e,s){this.frames[i]=e,this.attachmentNames[i]=s;}apply(i,e,s,n,r,m,c){let d=i.slots[this.slotIndex];if(d.bone.active){if(c==1){m==0&&this.setAttachment(i,d,d.data.attachmentName);return}if(s<this.frames[0]){(m==0||m==1)&&this.setAttachment(i,d,d.data.attachmentName);return}this.setAttachment(i,d,this.attachmentNames[kt.search1(this.frames,s)]);}}setAttachment(i,e,s){e.setAttachment(s?i.getAttachment(this.slotIndex,s):null);}},Xe=class extends at{slotIndex=0;attachment;vertices;constructor(i,e,s,n){super(i,e,[ft.deform+"|"+s+"|"+n.id]),this.slotIndex=s,this.attachment=n,this.vertices=new Array(i);}getFrameCount(){return this.frames.length}setFrame(i,e,s){this.frames[i]=e,this.vertices[i]=s;}setBezier(i,e,s,n,r,m,c,d,p,v,w){let C=this.curves,F=this.getFrameCount()+i*18;s==0&&(C[e]=2+F);let V=(n-m*2+d)*.03,B=p*.03-c*.06,z=((m-d)*3-n+v)*.006,W=(c-p+.33333333)*.018,Z=V*2+z,J=B*2+W,j=(m-n)*.3+V+z*.16666667,_=c*.3+B+W*.16666667,tt=n+j,nt=_;for(let xt=F+18;F<xt;F+=2)C[F]=tt,C[F+1]=nt,j+=Z,_+=J,Z+=z,J+=W,tt+=j,nt+=_;}getCurvePercent(i,e){let s=this.curves,n=s[e];switch(n){case 0:let d=this.frames[e];return (i-d)/(this.frames[e+this.getFrameEntries()]-d);case 1:return 0}if(n-=2,s[n]>i){let d=this.frames[e];return s[n+1]*(i-d)/(s[n]-d)}let r=n+18;for(n+=2;n<r;n+=2)if(s[n]>=i){let d=s[n-2],p=s[n-1];return p+(i-d)/(s[n]-d)*(s[n+1]-p)}let m=s[r-2],c=s[r-1];return c+(1-c)*(i-m)/(this.frames[e+this.getFrameEntries()]-m)}apply(i,e,s,n,r,m,c){let d=i.slots[this.slotIndex];if(!d.bone.active)return;let p=d.getAttachment();if(!p||!(p instanceof st)||p.timelineAttachment!=this.attachment)return;let v=d.deform;v.length==0&&(m=0);let w=this.vertices,C=w[0].length,F=this.frames;if(s<F[0]){switch(m){case 0:v.length=0;return;case 1:if(r==1){v.length=0;return}v.length=C;let J=p;if(J.bones){r=1-r;for(var V=0;V<C;V++)v[V]*=r;}else {let j=J.vertices;for(var V=0;V<C;V++)v[V]+=(j[V]-v[V])*r;}}return}if(v.length=C,s>=F[F.length-1]){let J=w[F.length-1];if(r==1)if(m==3){let j=p;if(j.bones)for(let _=0;_<C;_++)v[_]+=J[_];else {let _=j.vertices;for(let tt=0;tt<C;tt++)v[tt]+=J[tt]-_[tt];}}else D.arrayCopy(J,0,v,0,C);else switch(m){case 0:{let _=p;if(_.bones)for(let tt=0;tt<C;tt++)v[tt]=J[tt]*r;else {let tt=_.vertices;for(let nt=0;nt<C;nt++){let xt=tt[nt];v[nt]=xt+(J[nt]-xt)*r;}}break}case 1:case 2:for(let _=0;_<C;_++)v[_]+=(J[_]-v[_])*r;break;case 3:let j=p;if(j.bones)for(let _=0;_<C;_++)v[_]+=J[_]*r;else {let _=j.vertices;for(let tt=0;tt<C;tt++)v[tt]+=(J[tt]-_[tt])*r;}}return}let B=kt.search1(F,s),z=this.getCurvePercent(s,B),W=w[B],Z=w[B+1];if(r==1)if(m==3){let J=p;if(J.bones)for(let j=0;j<C;j++){let _=W[j];v[j]+=_+(Z[j]-_)*z;}else {let j=J.vertices;for(let _=0;_<C;_++){let tt=W[_];v[_]+=tt+(Z[_]-tt)*z-j[_];}}}else for(let J=0;J<C;J++){let j=W[J];v[J]=j+(Z[J]-j)*z;}else switch(m){case 0:{let j=p;if(j.bones)for(let _=0;_<C;_++){let tt=W[_];v[_]=(tt+(Z[_]-tt)*z)*r;}else {let _=j.vertices;for(let tt=0;tt<C;tt++){let nt=W[tt],xt=_[tt];v[tt]=xt+(nt+(Z[tt]-nt)*z-xt)*r;}}break}case 1:case 2:for(let j=0;j<C;j++){let _=W[j];v[j]+=(_+(Z[j]-_)*z-v[j])*r;}break;case 3:let J=p;if(J.bones)for(let j=0;j<C;j++){let _=W[j];v[j]+=(_+(Z[j]-_)*z)*r;}else {let j=J.vertices;for(let _=0;_<C;_++){let tt=W[_];v[_]+=(tt+(Z[_]-tt)*z-j[_])*r;}}}}},qe=class bn extends kt{static propertyIds=[""+ft.event];events;constructor(e){super(e,bn.propertyIds),this.events=new Array(e);}getFrameCount(){return this.frames.length}setFrame(e,s){this.frames[e]=s.time,this.events[e]=s;}apply(e,s,n,r,m,c,d){if(!r)return;let p=this.frames,v=this.frames.length;if(s>n)this.apply(e,s,Number.MAX_VALUE,r,m,c,d),s=-1;else if(s>=p[v-1])return;if(n<p[0])return;let w=0;if(s<p[0])w=0;else {w=kt.search1(p,s)+1;let C=p[w];for(;w>0&&p[w-1]==C;)w--;}for(;w<v&&n>=p[w];w++)r.push(this.events[w]);}},ze=class Tn extends kt{static propertyIds=[""+ft.drawOrder];drawOrders;constructor(e){super(e,Tn.propertyIds),this.drawOrders=new Array(e);}getFrameCount(){return this.frames.length}setFrame(e,s,n){this.frames[e]=s,this.drawOrders[e]=n;}apply(e,s,n,r,m,c,d){if(d==1){c==0&&D.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}if(n<this.frames[0]){(c==0||c==1)&&D.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}let p=kt.search1(this.frames,n),v=this.drawOrders[p];if(!v)D.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else {let w=e.drawOrder,C=e.slots;for(let F=0,V=v.length;F<V;F++)w[F]=C[v[F]];}}},Ue=class extends at{constraintIndex=0;constructor(i,e,s){super(i,e,[ft.ikConstraint+"|"+s]),this.constraintIndex=s;}getFrameEntries(){return 6}setFrame(i,e,s,n,r,m,c){i*=6,this.frames[i]=e,this.frames[i+1]=s,this.frames[i+2]=n,this.frames[i+3]=r,this.frames[i+4]=m?1:0,this.frames[i+5]=c?1:0;}apply(i,e,s,n,r,m,c){let d=i.ikConstraints[this.constraintIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(m){case 0:d.mix=d.data.mix,d.softness=d.data.softness,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch;return;case 1:d.mix+=(d.data.mix-d.mix)*r,d.softness+=(d.data.softness-d.softness)*r,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch;}return}let v=0,w=0,C=kt.search(p,s,6),F=this.curves[C/6];switch(F){case 0:let V=p[C];v=p[C+1],w=p[C+2];let B=(s-V)/(p[C+6]-V);v+=(p[C+6+1]-v)*B,w+=(p[C+6+2]-w)*B;break;case 1:v=p[C+1],w=p[C+2];break;default:v=this.getBezierValue(s,C,1,F-2),w=this.getBezierValue(s,C,2,F+18-2);}m==0?(d.mix=d.data.mix+(v-d.data.mix)*r,d.softness=d.data.softness+(w-d.data.softness)*r,c==1?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=p[C+3],d.compress=p[C+4]!=0,d.stretch=p[C+5]!=0)):(d.mix+=(v-d.mix)*r,d.softness+=(w-d.softness)*r,c==0&&(d.bendDirection=p[C+3],d.compress=p[C+4]!=0,d.stretch=p[C+5]!=0));}},Qe=class extends at{constraintIndex=0;constructor(i,e,s){super(i,e,[ft.transformConstraint+"|"+s]),this.constraintIndex=s;}getFrameEntries(){return 7}setFrame(i,e,s,n,r,m,c,d){let p=this.frames;i*=7,p[i]=e,p[i+1]=s,p[i+2]=n,p[i+3]=r,p[i+4]=m,p[i+5]=c,p[i+6]=d;}apply(i,e,s,n,r,m,c){let d=i.transformConstraints[this.constraintIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){let Z=d.data;switch(m){case 0:d.mixRotate=Z.mixRotate,d.mixX=Z.mixX,d.mixY=Z.mixY,d.mixScaleX=Z.mixScaleX,d.mixScaleY=Z.mixScaleY,d.mixShearY=Z.mixShearY;return;case 1:d.mixRotate+=(Z.mixRotate-d.mixRotate)*r,d.mixX+=(Z.mixX-d.mixX)*r,d.mixY+=(Z.mixY-d.mixY)*r,d.mixScaleX+=(Z.mixScaleX-d.mixScaleX)*r,d.mixScaleY+=(Z.mixScaleY-d.mixScaleY)*r,d.mixShearY+=(Z.mixShearY-d.mixShearY)*r;}return}let v,w,C,F,V,B,z=kt.search(p,s,7),W=this.curves[z/7];switch(W){case 0:let Z=p[z];v=p[z+1],w=p[z+2],C=p[z+3],F=p[z+4],V=p[z+5],B=p[z+6];let J=(s-Z)/(p[z+7]-Z);v+=(p[z+7+1]-v)*J,w+=(p[z+7+2]-w)*J,C+=(p[z+7+3]-C)*J,F+=(p[z+7+4]-F)*J,V+=(p[z+7+5]-V)*J,B+=(p[z+7+6]-B)*J;break;case 1:v=p[z+1],w=p[z+2],C=p[z+3],F=p[z+4],V=p[z+5],B=p[z+6];break;default:v=this.getBezierValue(s,z,1,W-2),w=this.getBezierValue(s,z,2,W+18-2),C=this.getBezierValue(s,z,3,W+36-2),F=this.getBezierValue(s,z,4,W+54-2),V=this.getBezierValue(s,z,5,W+72-2),B=this.getBezierValue(s,z,6,W+90-2);}if(m==0){let Z=d.data;d.mixRotate=Z.mixRotate+(v-Z.mixRotate)*r,d.mixX=Z.mixX+(w-Z.mixX)*r,d.mixY=Z.mixY+(C-Z.mixY)*r,d.mixScaleX=Z.mixScaleX+(F-Z.mixScaleX)*r,d.mixScaleY=Z.mixScaleY+(V-Z.mixScaleY)*r,d.mixShearY=Z.mixShearY+(B-Z.mixShearY)*r;}else d.mixRotate+=(v-d.mixRotate)*r,d.mixX+=(w-d.mixX)*r,d.mixY+=(C-d.mixY)*r,d.mixScaleX+=(F-d.mixScaleX)*r,d.mixScaleY+=(V-d.mixScaleY)*r,d.mixShearY+=(B-d.mixShearY)*r;}},We=class extends Q{constraintIndex=0;constructor(i,e,s){super(i,e,ft.pathConstraintPosition+"|"+s),this.constraintIndex=s;}apply(i,e,s,n,r,m,c){let d=i.pathConstraints[this.constraintIndex];d.active&&(d.position=this.getAbsoluteValue(s,r,m,d.position,d.data.position));}},Ze=class extends Q{constraintIndex=0;constructor(i,e,s){super(i,e,ft.pathConstraintSpacing+"|"+s),this.constraintIndex=s;}apply(i,e,s,n,r,m,c){let d=i.pathConstraints[this.constraintIndex];d.active&&(d.spacing=this.getAbsoluteValue(s,r,m,d.spacing,d.data.spacing));}},Be=class extends at{constraintIndex=0;constructor(i,e,s){super(i,e,[ft.pathConstraintMix+"|"+s]),this.constraintIndex=s;}getFrameEntries(){return 4}setFrame(i,e,s,n,r){let m=this.frames;i<<=2,m[i]=e,m[i+1]=s,m[i+2]=n,m[i+3]=r;}apply(i,e,s,n,r,m,c){let d=i.pathConstraints[this.constraintIndex];if(!d.active)return;let p=this.frames;if(s<p[0]){switch(m){case 0:d.mixRotate=d.data.mixRotate,d.mixX=d.data.mixX,d.mixY=d.data.mixY;return;case 1:d.mixRotate+=(d.data.mixRotate-d.mixRotate)*r,d.mixX+=(d.data.mixX-d.mixX)*r,d.mixY+=(d.data.mixY-d.mixY)*r;}return}let v,w,C,F=kt.search(p,s,4),V=this.curves[F>>2];switch(V){case 0:let B=p[F];v=p[F+1],w=p[F+2],C=p[F+3];let z=(s-B)/(p[F+4]-B);v+=(p[F+4+1]-v)*z,w+=(p[F+4+2]-w)*z,C+=(p[F+4+3]-C)*z;break;case 1:v=p[F+1],w=p[F+2],C=p[F+3];break;default:v=this.getBezierValue(s,F,1,V-2),w=this.getBezierValue(s,F,2,V+18-2),C=this.getBezierValue(s,F,3,V+36-2);}if(m==0){let B=d.data;d.mixRotate=B.mixRotate+(v-B.mixRotate)*r,d.mixX=B.mixX+(w-B.mixX)*r,d.mixY=B.mixY+(C-B.mixY)*r;}else d.mixRotate+=(v-d.mixRotate)*r,d.mixX+=(w-d.mixX)*r,d.mixY+=(C-d.mixY)*r;}},$e=class extends Q{constraintIndex=0;constructor(i,e,s,n){super(i,e,n+"|"+s),this.constraintIndex=s;}apply(i,e,s,n,r,m,c){let d;if(this.constraintIndex==-1){let p=s>=this.frames[0]?this.getCurveValue(s):0;for(let v of i.physicsConstraints)v.active&&this.global(v.data)&&this.set(v,this.getAbsoluteValue2(s,r,m,this.get(v),this.setup(v),p));}else d=i.physicsConstraints[this.constraintIndex],d.active&&this.set(d,this.getAbsoluteValue(s,r,m,this.get(d),this.setup(d)));}},De=class extends $e{constructor(i,e,s){super(i,e,s,ft.physicsConstraintInertia);}setup(i){return i.data.inertia}get(i){return i.inertia}set(i,e){i.inertia=e;}global(i){return i.inertiaGlobal}},vi=class extends $e{constructor(i,e,s){super(i,e,s,ft.physicsConstraintStrength);}setup(i){return i.data.strength}get(i){return i.strength}set(i,e){i.strength=e;}global(i){return i.strengthGlobal}},ri=class extends $e{constructor(i,e,s){super(i,e,s,ft.physicsConstraintDamping);}setup(i){return i.data.damping}get(i){return i.damping}set(i,e){i.damping=e;}global(i){return i.dampingGlobal}},hi=class extends $e{constructor(i,e,s){super(i,e,s,ft.physicsConstraintMass);}setup(i){return 1/i.data.massInverse}get(i){return 1/i.massInverse}set(i,e){i.massInverse=1/e;}global(i){return i.massGlobal}},ti=class extends $e{constructor(i,e,s){super(i,e,s,ft.physicsConstraintWind);}setup(i){return i.data.wind}get(i){return i.wind}set(i,e){i.wind=e;}global(i){return i.windGlobal}},ci=class extends $e{constructor(i,e,s){super(i,e,s,ft.physicsConstraintGravity);}setup(i){return i.data.gravity}get(i){return i.gravity}set(i,e){i.gravity=e;}global(i){return i.gravityGlobal}},Mi=class extends $e{constructor(i,e,s){super(i,e,s,ft.physicsConstraintMix);}setup(i){return i.data.mix}get(i){return i.mix}set(i,e){i.mix=e;}global(i){return i.mixGlobal}},Hi=class In extends kt{static propertyIds=[ft.physicsConstraintReset.toString()];constraintIndex;constructor(e,s){super(e,In.propertyIds),this.constraintIndex=s;}getFrameCount(){return this.frames.length}setFrame(e,s){this.frames[e]=s;}apply(e,s,n,r,m,c,d){let p;if(this.constraintIndex!=-1&&(p=e.physicsConstraints[this.constraintIndex],!p.active))return;let v=this.frames;if(s>n)this.apply(e,s,Number.MAX_VALUE,[],m,c,d),s=-1;else if(s>=v[v.length-1])return;if(!(n<v[0])&&(s<v[0]||n>=v[kt.search1(v,s)+1]))if(p!=null)p.reset();else for(let w of e.physicsConstraints)w.active&&w.reset();}},ds=class Zi extends kt{static ENTRIES=3;static MODE=1;static DELAY=2;slotIndex;attachment;constructor(e,s,n){super(e,[ft.sequence+"|"+s+"|"+n.sequence.id]),this.slotIndex=s,this.attachment=n;}getFrameEntries(){return Zi.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(e,s,n,r,m){let c=this.frames;e*=Zi.ENTRIES,c[e]=s,c[e+Zi.MODE]=n|r<<4,c[e+Zi.DELAY]=m;}apply(e,s,n,r,m,c,d){let p=e.slots[this.slotIndex];if(!p.bone.active)return;let v=p.attachment,w=this.attachment;if(v!=w&&(!(v instanceof st)||v.timelineAttachment!=w))return;if(d==1){c==0&&(p.sequenceIndex=-1);return}let C=this.frames;if(n<C[0]){(c==0||c==1)&&(p.sequenceIndex=-1);return}let F=kt.search(C,n,Zi.ENTRIES),V=C[F],B=C[F+Zi.MODE],z=C[F+Zi.DELAY];if(!this.attachment.sequence)return;let W=B>>4,Z=this.attachment.sequence.regions.length,J=dt[B&15];if(J!=0)switch(W+=(n-V)/z+1e-5|0,J){case 1:W=Math.min(Z-1,W);break;case 2:W%=Z;break;case 3:{let j=(Z<<1)-2;W=j==0?0:W%j,W>=Z&&(W=j-W);break}case 4:W=Math.max(Z-1-W,0);break;case 5:W=Z-1-W%Z;break;case 6:{let j=(Z<<1)-2;W=j==0?0:(W+Z-1)%j,W>=Z&&(W=j-W);}}p.sequenceIndex=W;}},Ls=class Cr{static _emptyAnimation=new rt("<empty>",[],0);static emptyAnimation(){return Cr._emptyAnimation}data;tracks=new Array;timeScale=1;unkeyedState=0;events=new Array;listeners=new Array;queue=new Ji(this);propertyIDs=new S;animationsChanged=false;trackEntryPool=new $(()=>new lr);constructor(e){this.data=e;}update(e){e*=this.timeScale;let s=this.tracks;for(let n=0,r=s.length;n<r;n++){let m=s[n];if(!m)continue;m.animationLast=m.nextAnimationLast,m.trackLast=m.nextTrackLast;let c=e*m.timeScale;if(m.delay>0){if(m.delay-=c,m.delay>0)continue;c=-m.delay,m.delay=0;}let d=m.next;if(d){let p=m.trackLast-d.delay;if(p>=0){for(d.delay=0,d.trackTime+=m.timeScale==0?0:(p/m.timeScale+e)*d.timeScale,m.trackTime+=c,this.setCurrent(n,d,true);d.mixingFrom;)d.mixTime+=e,d=d.mixingFrom;continue}}else if(m.trackLast>=m.trackEnd&&!m.mixingFrom){s[n]=null,this.queue.end(m),this.clearNext(m);continue}if(m.mixingFrom&&this.updateMixingFrom(m,e)){let p=m.mixingFrom;for(m.mixingFrom=null,p&&(p.mixingTo=null);p;)this.queue.end(p),p=p.mixingFrom;}m.trackTime+=c;}this.queue.drain();}updateMixingFrom(e,s){let n=e.mixingFrom;if(!n)return  true;let r=this.updateMixingFrom(n,s);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.nextTrackLast!=-1&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom!=null&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=s*n.timeScale,e.mixTime+=s,false)}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let s=this.events,n=this.tracks,r=false;for(let F=0,V=n.length;F<V;F++){let B=n[F];if(!B||B.delay>0)continue;r=true;let z=F==0?1:B.mixBlend,W=B.alpha;B.mixingFrom?W*=this.applyMixingFrom(B,e,z):B.trackTime>=B.trackEnd&&!B.next&&(W=0);let Z=W>=B.alphaAttachmentThreshold,J=B.animationLast,j=B.getAnimationTime(),_=j,tt=s;B.reverse&&(_=B.animation.duration-_,tt=null);let nt=B.animation.timelines,xt=nt.length;if(F==0&&W==1||z==3){F==0&&(Z=true);for(let gt=0;gt<xt;gt++){var m=nt[gt];m instanceof Ye?this.applyAttachmentTimeline(m,e,_,z,Z):m.apply(e,J,_,tt,W,z,0);}}else {let gt=B.timelineMode,pt=B.shortestRotation,Ct=!pt&&B.timelinesRotation.length!=xt<<1;Ct&&(B.timelinesRotation.length=xt<<1);for(let Yt=0;Yt<xt;Yt++){let Xt=nt[Yt],Ut=gt[Yt]==ni?z:0;!pt&&Xt instanceof Mt?this.applyRotateTimeline(Xt,e,_,W,Ut,B.timelinesRotation,Yt<<1,Ct):Xt instanceof Ye?this.applyAttachmentTimeline(Xt,e,_,z,Z):(Xt.apply(e,J,_,tt,W,Ut,0));}}this.queueEvents(B,j),s.length=0,B.nextAnimationLast=j,B.nextTrackLast=B.trackTime;}for(var c=this.unkeyedState+Xs,d=e.slots,p=0,v=e.slots.length;p<v;p++){var w=d[p];if(w.attachmentState==c){var C=w.data.attachmentName;w.setAttachment(C?e.getAttachment(w.data.index,C):null);}}return this.unkeyedState+=2,this.queue.drain(),r}applyMixingFrom(e,s,n){let r=e.mixingFrom;r.mixingFrom&&this.applyMixingFrom(r,s,n);let m=0;e.mixDuration==0?(m=1,n==1&&(n=0)):(m=e.mixTime/e.mixDuration,m>1&&(m=1),n!=1&&(n=r.mixBlend));let c=m<r.mixAttachmentThreshold,d=m<r.mixDrawOrderThreshold,p=r.animation.timelines,v=p.length,w=r.alpha*e.interruptAlpha,C=w*(1-m),F=r.animationLast,V=r.getAnimationTime(),B=V,z=null;if(r.reverse?B=r.animation.duration-B:m<r.eventThreshold&&(z=this.events),n==3)for(let W=0;W<v;W++)p[W].apply(s,F,B,z,C,n,1);else {let W=r.timelineMode,Z=r.timelineHoldMix,J=r.shortestRotation,j=!J&&r.timelinesRotation.length!=v<<1;j&&(r.timelinesRotation.length=v<<1),r.totalAlpha=0;for(let _=0;_<v;_++){let tt=p[_],nt=1,xt,gt=0;switch(W[_]){case ni:if(!d&&tt instanceof ze)continue;xt=n,gt=C;break;case Ei:xt=0,gt=C;break;case us:xt=n,gt=w;break;case fs:xt=0,gt=w;break;default:xt=0;let pt=Z[_];gt=w*Math.max(0,1-pt.mixTime/pt.mixDuration);break}r.totalAlpha+=gt,!J&&tt instanceof Mt?this.applyRotateTimeline(tt,s,B,gt,xt,r.timelinesRotation,_<<1,j):tt instanceof Ye?this.applyAttachmentTimeline(tt,s,B,xt,c&&gt>=r.alphaAttachmentThreshold):(d&&tt instanceof ze&&xt==0&&(nt=0),tt.apply(s,F,B,z,gt,xt,nt));}}return e.mixDuration>0&&this.queueEvents(r,V),this.events.length=0,r.nextAnimationLast=V,r.nextTrackLast=r.trackTime,m}applyAttachmentTimeline(e,s,n,r,m){var c=s.slots[e.slotIndex];c.bone.active&&(n<e.frames[0]?(r==0||r==1)&&this.setAttachment(s,c,c.data.attachmentName,m):this.setAttachment(s,c,e.attachmentNames[kt.search1(e.frames,n)],m),c.attachmentState<=this.unkeyedState&&(c.attachmentState=this.unkeyedState+Xs));}setAttachment(e,s,n,r){s.setAttachment(n?e.getAttachment(s.data.index,n):null),r&&(s.attachmentState=this.unkeyedState+Ds);}applyRotateTimeline(e,s,n,r,m,c,d,p){if(p&&(c[d]=0),r==1){e.apply(s,0,n,null,1,m,0);return}let v=s.bones[e.boneIndex];if(!v.active)return;let w=e.frames,C=0,F=0;if(n<w[0])switch(m){case 0:v.rotation=v.data.rotation;default:return;case 1:C=v.rotation,F=v.data.rotation;}else C=m==0?v.data.rotation:v.rotation,F=v.data.rotation+e.getCurveValue(n);let V=0,B=F-C;if(B-=Math.ceil(B/360-.5)*360,B==0)V=c[d];else {let z=0,W=0;p?(z=0,W=B):(z=c[d],W=c[d+1]);let Z=z-z%360;V=B+Z;let J=B>=0,j=z>=0;Math.abs(W)<=90&&I.signum(W)!=I.signum(B)&&(Math.abs(z-Z)>180?(V+=360*I.signum(z),j=J):Z!=0?V-=360*I.signum(z):j=J),j!=J&&(V+=360*I.signum(z)),c[d]=V;}c[d+1]=B,v.rotation=C+V*r;}queueEvents(e,s){let n=e.animationStart,r=e.animationEnd,m=r-n,c=e.trackLast%m,d=this.events,p=0,v=d.length;for(;p<v;p++){let C=d[p];if(C.time<c)break;C.time>r||this.queue.event(e,C);}let w=false;if(e.loop)if(m==0)w=true;else {let C=Math.floor(e.trackTime/m);w=C>0&&C>Math.floor(e.trackLast/m);}else w=s>=r&&e.animationLast<r;for(w&&this.queue.complete(e);p<v;p++){let C=d[p];C.time<n||this.queue.event(e,C);}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let s=0,n=this.tracks.length;s<n;s++)this.clearTrack(s);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain();}clearTrack(e){if(e>=this.tracks.length)return;let s=this.tracks[e];if(!s)return;this.queue.end(s),this.clearNext(s);let n=s;for(;;){let r=n.mixingFrom;if(!r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r;}this.tracks[s.trackIndex]=null,this.queue.drain();}setCurrent(e,s,n){let r=this.expandToIndex(e);this.tracks[e]=s,s.previous=null,r&&(n&&this.queue.interrupt(r),s.mixingFrom=r,r.mixingTo=s,s.mixTime=0,r.mixingFrom&&r.mixDuration>0&&(s.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(s);}setAnimation(e,s,n=false){let r=this.data.skeletonData.findAnimation(s);if(!r)throw new Error("Animation not found: "+s);return this.setAnimationWith(e,r,n)}setAnimationWith(e,s,n=false){if(!s)throw new Error("animation cannot be null.");let r=true,m=this.expandToIndex(e);m&&(m.nextTrackLast==-1?(this.tracks[e]=m.mixingFrom,this.queue.interrupt(m),this.queue.end(m),this.clearNext(m),m=m.mixingFrom,r=false):this.clearNext(m));let c=this.trackEntry(e,s,n,m);return this.setCurrent(e,c,r),this.queue.drain(),c}addAnimation(e,s,n=false,r=0){let m=this.data.skeletonData.findAnimation(s);if(!m)throw new Error("Animation not found: "+s);return this.addAnimationWith(e,m,n,r)}addAnimationWith(e,s,n=false,r=0){if(!s)throw new Error("animation cannot be null.");let m=this.expandToIndex(e);if(m)for(;m.next;)m=m.next;let c=this.trackEntry(e,s,n,m);return m?(m.next=c,c.previous=m,r<=0&&(r=Math.max(r+m.getTrackComplete()-c.mixDuration,0))):(this.setCurrent(e,c,true),this.queue.drain(),r<0&&(r=0)),c.delay=r,c}setEmptyAnimation(e,s=0){let n=this.setAnimationWith(e,Cr.emptyAnimation(),false);return n.mixDuration=s,n.trackEnd=s,n}addEmptyAnimation(e,s=0,n=0){let r=this.addAnimationWith(e,Cr.emptyAnimation(),false,n);return n<=0&&(r.delay=Math.max(r.delay+r.mixDuration-s,0)),r.mixDuration=s,r.trackEnd=s,r}setEmptyAnimations(e=0){let s=this.queue.drainDisabled;this.queue.drainDisabled=true;for(let n=0,r=this.tracks.length;n<r;n++){let m=this.tracks[n];m&&this.setEmptyAnimation(m.trackIndex,e);}this.queue.drainDisabled=s,this.queue.drain();}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(D.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,s,n,r){let m=this.trackEntryPool.obtain();return m.reset(),m.trackIndex=e,m.animation=s,m.loop=n,m.holdPrevious=false,m.reverse=false,m.shortestRotation=false,m.eventThreshold=0,m.alphaAttachmentThreshold=0,m.mixAttachmentThreshold=0,m.mixDrawOrderThreshold=0,m.animationStart=0,m.animationEnd=s.duration,m.animationLast=-1,m.nextAnimationLast=-1,m.delay=0,m.trackTime=0,m.trackLast=-1,m.nextTrackLast=-1,m.trackEnd=Number.MAX_VALUE,m.timeScale=1,m.alpha=1,m.mixTime=0,m.mixDuration=r?this.data.getMix(r.animation,s):0,m.interruptAlpha=1,m.totalAlpha=0,m.mixBlend=2,m}clearNext(e){let s=e.next;for(;s;)this.queue.dispose(s),s=s.next;e.next=null;}_animationsChanged(){this.animationsChanged=false,this.propertyIDs.clear();let e=this.tracks;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r){for(;r.mixingFrom;)r=r.mixingFrom;do(!r.mixingTo||r.mixBlend!=3)&&this.computeHold(r),r=r.mixingTo;while(r)}}}computeHold(e){let s=e.mixingTo,n=e.animation.timelines,r=e.animation.timelines.length,m=e.timelineMode;m.length=r;let c=e.timelineHoldMix;c.length=0;let d=this.propertyIDs;if(s&&s.holdPrevious){for(let p=0;p<r;p++)m[p]=d.addAll(n[p].getPropertyIds())?fs:us;return}t:for(let p=0;p<r;p++){let v=n[p],w=v.getPropertyIds();if(!d.addAll(w))m[p]=ni;else if(!s||v instanceof Ye||v instanceof ze||v instanceof qe||!s.animation.hasTimeline(w))m[p]=Ei;else {for(let C=s.mixingTo;C;C=C.mixingTo)if(!C.animation.hasTimeline(w)){if(e.mixDuration>0){m[p]=Vs,c[p]=C;continue t}break}m[p]=fs;}}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e);}removeListener(e){let s=this.listeners.indexOf(e);s>=0&&this.listeners.splice(s,1);}clearListeners(){this.listeners.length=0;}clearListenerNotifications(){this.queue.clear();}},lr=class{animation=null;previous=null;next=null;mixingFrom=null;mixingTo=null;listener=null;trackIndex=0;loop=false;holdPrevious=false;reverse=false;shortestRotation=false;eventThreshold=0;mixAttachmentThreshold=0;alphaAttachmentThreshold=0;mixDrawOrderThreshold=0;animationStart=0;animationEnd=0;animationLast=0;nextAnimationLast=0;delay=0;trackTime=0;trackLast=0;nextTrackLast=0;trackEnd=0;timeScale=0;alpha=0;mixTime=0;_mixDuration=0;interruptAlpha=0;totalAlpha=0;get mixDuration(){return this._mixDuration}set mixDuration(i){this._mixDuration=i;}setMixDurationWithDelay(i,e){this._mixDuration=i,e<=0&&(this.previous!=null?e=Math.max(e+this.previous.getTrackComplete()-i,0):e=0),this.delay=e;}mixBlend=2;timelineMode=new Array;timelineHoldMix=new Array;timelinesRotation=new Array;reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0;}getAnimationTime(){if(this.loop){let i=this.animationEnd-this.animationStart;return i==0?this.animationStart:this.trackTime%i+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(i){this.animationLast=i,this.nextAnimationLast=i;}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0;}getTrackComplete(){let i=this.animationEnd-this.animationStart;if(i!=0){if(this.loop)return i*(1+(this.trackTime/i|0));if(this.trackTime<i)return i}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}},Ji=class{objects=[];drainDisabled=false;animState;constructor(i){this.animState=i;}start(i){this.objects.push(0),this.objects.push(i),this.animState.animationsChanged=true;}interrupt(i){this.objects.push(1),this.objects.push(i);}end(i){this.objects.push(2),this.objects.push(i),this.animState.animationsChanged=true;}dispose(i){this.objects.push(3),this.objects.push(i);}complete(i){this.objects.push(4),this.objects.push(i);}event(i,e){this.objects.push(5),this.objects.push(i),this.objects.push(e);}drain(){if(this.drainDisabled)return;this.drainDisabled=true;let i=this.objects,e=this.animState.listeners;for(let s=0;s<i.length;s+=2){let n=i[s],r=i[s+1];switch(n){case 0:r.listener&&r.listener.start&&r.listener.start(r);for(let c=0;c<e.length;c++){let d=e[c];d.start&&d.start(r);}break;case 1:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let c=0;c<e.length;c++){let d=e[c];d.interrupt&&d.interrupt(r);}break;case 2:r.listener&&r.listener.end&&r.listener.end(r);for(let c=0;c<e.length;c++){let d=e[c];d.end&&d.end(r);}case 3:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let c=0;c<e.length;c++){let d=e[c];d.dispose&&d.dispose(r);}this.animState.trackEntryPool.free(r);break;case 4:r.listener&&r.listener.complete&&r.listener.complete(r);for(let c=0;c<e.length;c++){let d=e[c];d.complete&&d.complete(r);}break;case 5:let m=i[s+++2];r.listener&&r.listener.event&&r.listener.event(r,m);for(let c=0;c<e.length;c++){let d=e[c];d.event&&d.event(r,m);}break}}this.clear(),this.drainDisabled=false;}clear(){this.objects.length=0;}},Di=(i=>(i[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event",i))(Di||{}),Bs=class{start(i){}interrupt(i){}end(i){}dispose(i){}complete(i){}event(i,e){}},ni=0,Ei=1,us=2,fs=3,Vs=4,Xs=1,Ds=2,Os=class{skeletonData;animationToMixTime={};defaultMix=0;constructor(i){if(!i)throw new Error("skeletonData cannot be null.");this.skeletonData=i;}setMix(i,e,s){let n=this.skeletonData.findAnimation(i);if(!n)throw new Error("Animation not found: "+i);let r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,s);}setMixWith(i,e,s){if(!i)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let n=i.name+"."+e.name;this.animationToMixTime[n]=s;}getMix(i,e){let s=i.name+"."+e.name,n=this.animationToMixTime[s];return n===void 0?this.defaultMix:n}},yi=class En extends st{color=new O(1,1,1,1);constructor(e){super(e);}copy(){let e=new En(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e}},ui=class Cn extends st{endSlot=null;color=new O(.2275,.2275,.8078,1);constructor(e){super(e);}copy(){let e=new Cn(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e}},_i=class{_image;constructor(i){this._image=i;}getImage(){return this._image}},Qi=(i=>(i[i.Nearest=9728]="Nearest",i[i.Linear=9729]="Linear",i[i.MipMap=9987]="MipMap",i[i.MipMapNearestNearest=9984]="MipMapNearestNearest",i[i.MipMapLinearNearest=9985]="MipMapLinearNearest",i[i.MipMapNearestLinear=9986]="MipMapNearestLinear",i[i.MipMapLinearLinear=9987]="MipMapLinearLinear",i))(Qi||{}),Ie=(i=>(i[i.MirroredRepeat=33648]="MirroredRepeat",i[i.ClampToEdge=33071]="ClampToEdge",i[i.Repeat=10497]="Repeat",i))(Ie||{}),cr=class{texture;u=0;v=0;u2=0;v2=0;width=0;height=0;degrees=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0},Ns=class extends _i{setFilters(i,e){}setWraps(i,e){}dispose(){}},ii=class{pages=new Array;regions=new Array;constructor(i){let e=new Us(i),s=new Array(4),n={};n.size=v=>{v.width=parseInt(s[1]),v.height=parseInt(s[2]);},n.format=()=>{},n.filter=v=>{v.minFilter=D.enumValue(Qi,s[1]),v.magFilter=D.enumValue(Qi,s[2]);},n.repeat=v=>{s[1].indexOf("x")!=-1&&(v.uWrap=10497),s[1].indexOf("y")!=-1&&(v.vWrap=10497);},n.pma=v=>{v.pma=s[1]=="true";};var r={};r.xy=v=>{v.x=parseInt(s[1]),v.y=parseInt(s[2]);},r.size=v=>{v.width=parseInt(s[1]),v.height=parseInt(s[2]);},r.bounds=v=>{v.x=parseInt(s[1]),v.y=parseInt(s[2]),v.width=parseInt(s[3]),v.height=parseInt(s[4]);},r.offset=v=>{v.offsetX=parseInt(s[1]),v.offsetY=parseInt(s[2]);},r.orig=v=>{v.originalWidth=parseInt(s[1]),v.originalHeight=parseInt(s[2]);},r.offsets=v=>{v.offsetX=parseInt(s[1]),v.offsetY=parseInt(s[2]),v.originalWidth=parseInt(s[3]),v.originalHeight=parseInt(s[4]);},r.rotate=v=>{let w=s[1];w=="true"?v.degrees=90:w!="false"&&(v.degrees=parseInt(w));},r.index=v=>{v.index=parseInt(s[1]);};let m=e.readLine();for(;m&&m.trim().length==0;)m=e.readLine();for(;!(!m||m.trim().length==0||e.readEntry(s,m)==0);)m=e.readLine();let c=null,d=null,p=null;for(;m!==null;)if(m.trim().length==0)c=null,m=e.readLine();else if(c){let v=new ms(c,m);for(;;){let w=e.readEntry(s,m=e.readLine());if(w==0)break;let C=r[s[0]];if(C)C(v);else {d||(d=[]),p||(p=[]),d.push(s[0]);let F=[];for(let V=0;V<w;V++)F.push(parseInt(s[V+1]));p.push(F);}}v.originalWidth==0&&v.originalHeight==0&&(v.originalWidth=v.width,v.originalHeight=v.height),d&&d.length>0&&p&&p.length>0&&(v.names=d,v.values=p,d=null,p=null),v.u=v.x/c.width,v.v=v.y/c.height,v.degrees==90?(v.u2=(v.x+v.height)/c.width,v.v2=(v.y+v.width)/c.height):(v.u2=(v.x+v.width)/c.width,v.v2=(v.y+v.height)/c.height),this.regions.push(v);}else {for(c=new Ki(m.trim());e.readEntry(s,m=e.readLine())!=0;){let v=n[s[0]];v&&v(c);}this.pages.push(c);}}findRegion(i){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==i)return this.regions[e];return null}setTextures(i,e=""){for(let s of this.pages)s.setTexture(i.get(e+s.name));}dispose(){var i;for(let e=0;e<this.pages.length;e++)(i=this.pages[e].texture)==null||i.dispose();}},Us=class{lines;index=0;constructor(i){this.lines=i.split(/\r\n|\r|\n/);}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(i,e){if(!e||(e=e.trim(),e.length==0))return 0;let s=e.indexOf(":");if(s==-1)return 0;i[0]=e.substr(0,s).trim();for(let n=1,r=s+1;;n++){let m=e.indexOf(",",r);if(m==-1)return i[n]=e.substr(r).trim(),n;if(i[n]=e.substr(r,m-r).trim(),r=m+1,n==4)return 4}}},Ki=class{name;minFilter=9728;magFilter=9728;uWrap=33071;vWrap=33071;texture=null;width=0;height=0;pma=false;regions=new Array;constructor(i){this.name=i;}setTexture(i){this.texture=i,i.setFilters(this.minFilter,this.magFilter),i.setWraps(this.uWrap,this.vWrap);for(let e of this.regions)e.texture=i;}},ms=class extends cr{page;name;x=0;y=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0;index=0;degrees=0;names=null;values=null;constructor(i,e){super(),this.page=i,this.name=e,i.regions.push(this);}},Li=class en extends st{region=null;path;regionUVs=[];uvs=[];triangles=[];color=new O(1,1,1,1);width=0;height=0;hullLength=0;edges=[];parentMesh=null;sequence=null;tempColor=new O(0,0,0,0);constructor(e,s){super(e),this.path=s;}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.regionUVs;(!this.uvs||this.uvs.length!=e.length)&&(this.uvs=D.newFloatArray(e.length));let s=this.uvs,n=this.uvs.length,r=this.region.u,m=this.region.v,c=0,d=0;if(this.region instanceof ms){let p=this.region,v=p.page,w=v.width,C=v.height;switch(p.degrees){case 90:r-=(p.originalHeight-p.offsetY-p.height)/w,m-=(p.originalWidth-p.offsetX-p.width)/C,c=p.originalHeight/w,d=p.originalWidth/C;for(let F=0;F<n;F+=2)s[F]=r+e[F+1]*c,s[F+1]=m+(1-e[F])*d;return;case 180:r-=(p.originalWidth-p.offsetX-p.width)/w,m-=p.offsetY/C,c=p.originalWidth/w,d=p.originalHeight/C;for(let F=0;F<n;F+=2)s[F]=r+(1-e[F])*c,s[F+1]=m+(1-e[F+1])*d;return;case 270:r-=p.offsetY/w,m-=p.offsetX/C,c=p.originalHeight/w,d=p.originalWidth/C;for(let F=0;F<n;F+=2)s[F]=r+(1-e[F+1])*c,s[F+1]=m+e[F]*d;return}r-=p.offsetX/w,m-=(p.originalHeight-p.offsetY-p.height)/C,c=p.originalWidth/w,d=p.originalHeight/C;}else this.region?(c=this.region.u2-r,d=this.region.v2-m):(r=m=0,c=d=1);for(let p=0;p<n;p+=2)s[p]=r+e[p]*c,s[p+1]=m+e[p+1]*d;}getParentMesh(){return this.parentMesh}setParentMesh(e){this.parentMesh=e,e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength);}copy(){if(this.parentMesh)return this.newLinkedMesh();let e=new en(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Array(this.regionUVs.length),D.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=this.uvs instanceof Float32Array?D.newFloatArray(this.uvs.length):new Array(this.uvs.length),D.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),D.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,e.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(e.edges=new Array(this.edges.length),D.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e}computeWorldVertices(e,s,n,r,m,c){this.sequence!=null&&this.sequence.apply(e,this),super.computeWorldVertices(e,s,n,r,m,c);}newLinkedMesh(){let e=new en(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),e.timelineAttachment=this.timelineAttachment,e.setParentMesh(this.parentMesh?this.parentMesh:this),e.region!=null&&e.updateRegion(),e}},Yi=class Rn extends st{lengths=[];closed=false;constantSpeed=false;color=new O(1,1,1,1);constructor(e){super(e);}copy(){let e=new Rn(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),D.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e}},gs=class kn extends st{x=0;y=0;rotation=0;color=new O(.38,.94,0,1);constructor(e){super(e);}computeWorldPosition(e,s){return s.x=this.x*e.a+this.y*e.b+e.worldX,s.y=this.x*e.c+this.y*e.d+e.worldY,s}computeWorldRotation(e){let s=this.rotation*I.degRad,n=Math.cos(s),r=Math.sin(s),m=n*e.a+r*e.b,c=n*e.c+r*e.d;return I.atan2Deg(c,m)}copy(){let e=new kn(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e}},Oi=class Fn extends ut{x=0;y=0;scaleX=1;scaleY=1;rotation=0;width=0;height=0;color=new O(1,1,1,1);path;region=null;sequence=null;offset=D.newFloatArray(8);uvs=D.newFloatArray(8);tempColor=new O(1,1,1,1);constructor(e,s){super(e),this.path=s;}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.region,s=this.uvs;if(e==null){s[0]=0,s[1]=0,s[2]=0,s[3]=1,s[4]=1,s[5]=1,s[6]=1,s[7]=0;return}let n=this.width/this.region.originalWidth*this.scaleX,r=this.height/this.region.originalHeight*this.scaleY,m=-this.width/2*this.scaleX+this.region.offsetX*n,c=-this.height/2*this.scaleY+this.region.offsetY*r,d=m+this.region.width*n,p=c+this.region.height*r,v=this.rotation*I.degRad,w=Math.cos(v),C=Math.sin(v),F=this.x,V=this.y,B=m*w+F,z=m*C,W=c*w+V,Z=c*C,J=d*w+F,j=d*C,_=p*w+V,tt=p*C,nt=this.offset;nt[0]=B-Z,nt[1]=W+z,nt[2]=B-tt,nt[3]=_+z,nt[4]=J-tt,nt[5]=_+j,nt[6]=J-Z,nt[7]=W+j,e.degrees==90?(s[0]=e.u2,s[1]=e.v2,s[2]=e.u,s[3]=e.v2,s[4]=e.u,s[5]=e.v,s[6]=e.u2,s[7]=e.v):(s[0]=e.u,s[1]=e.v2,s[2]=e.u,s[3]=e.v,s[4]=e.u2,s[5]=e.v,s[6]=e.u2,s[7]=e.v2);}computeWorldVertices(e,s,n,r){this.sequence!=null&&this.sequence.apply(e,this);let m=e.bone,c=this.offset,d=m.worldX,p=m.worldY,v=m.a,w=m.b,C=m.c,F=m.d,V=0,B=0;V=c[0],B=c[1],s[n]=V*v+B*w+d,s[n+1]=V*C+B*F+p,n+=r,V=c[2],B=c[3],s[n]=V*v+B*w+d,s[n+1]=V*C+B*F+p,n+=r,V=c[4],B=c[5],s[n]=V*v+B*w+d,s[n+1]=V*C+B*F+p,n+=r,V=c[6],B=c[7],s[n]=V*v+B*w+d,s[n+1]=V*C+B*F+p;}copy(){let e=new Fn(this.name,this.path);return e.region=this.region,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,D.arrayCopy(this.uvs,0,e.uvs,0,8),D.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e.sequence=this.sequence!=null?this.sequence.copy():null,e}static X1=0;static Y1=1;static C1R=2;static C1G=3;static C1B=4;static C1A=5;static U1=6;static V1=7;static X2=8;static Y2=9;static C2R=10;static C2G=11;static C2B=12;static C2A=13;static U2=14;static V2=15;static X3=16;static Y3=17;static C3R=18;static C3G=19;static C3B=20;static C3A=21;static U3=22;static V3=23;static X4=24;static Y4=25;static C4R=26;static C4G=27;static C4B=28;static C4A=29;static U4=30;static V4=31},Ws=class{atlas;constructor(i){this.atlas=i;}loadSequence(i,e,s){let n=s.regions;for(let r=0,m=n.length;r<m;r++){let c=s.getPath(e,r),d=this.atlas.findRegion(c);if(d==null)throw new Error("Region not found in atlas: "+c+" (sequence: "+i+")");n[r]=d;}}newRegionAttachment(i,e,s,n){let r=new Oi(e,s);if(n!=null)this.loadSequence(e,s,n);else {let m=this.atlas.findRegion(s);if(!m)throw new Error("Region not found in atlas: "+s+" (region attachment: "+e+")");r.region=m;}return r}newMeshAttachment(i,e,s,n){let r=new Li(e,s);if(n!=null)this.loadSequence(e,s,n);else {let m=this.atlas.findRegion(s);if(!m)throw new Error("Region not found in atlas: "+s+" (mesh attachment: "+e+")");r.region=m;}return r}newBoundingBoxAttachment(i,e){return new yi(e)}newPathAttachment(i,e){return new Yi(e)}newPointAttachment(i,e){return new gs(e)}newClippingAttachment(i,e){return new ui(e)}},$i=class{index=0;name;parent=null;length=0;x=0;y=0;rotation=0;scaleX=1;scaleY=1;shearX=0;shearY=0;inherit=0;skinRequired=false;color=new O;icon;visible=false;constructor(i,e,s){if(i<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=i,this.name=e,this.parent=s;}},di=(i=>(i[i.Normal=0]="Normal",i[i.OnlyTranslation=1]="OnlyTranslation",i[i.NoRotationOrReflection=2]="NoRotationOrReflection",i[i.NoScale=3]="NoScale",i[i.NoScaleOrReflection=4]="NoScaleOrReflection",i))(di||{}),He=class{data;skeleton;parent=null;children=new Array;x=0;y=0;rotation=0;scaleX=0;scaleY=0;shearX=0;shearY=0;ax=0;ay=0;arotation=0;ascaleX=0;ascaleY=0;ashearX=0;ashearY=0;a=0;b=0;c=0;d=0;worldY=0;worldX=0;inherit=0;sorted=false;active=false;constructor(i,e,s){if(!i)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=i,this.skeleton=e,this.parent=s,this.setToSetupPose();}isActive(){return this.active}update(i){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY);}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY);}updateWorldTransformWith(i,e,s,n,r,m,c){this.ax=i,this.ay=e,this.arotation=s,this.ascaleX=n,this.ascaleY=r,this.ashearX=m,this.ashearY=c;let d=this.parent;if(!d){let F=this.skeleton,V=F.scaleX,B=F.scaleY,z=(s+m)*I.degRad,W=(s+90+c)*I.degRad;this.a=Math.cos(z)*n*V,this.b=Math.cos(W)*r*V,this.c=Math.sin(z)*n*B,this.d=Math.sin(W)*r*B,this.worldX=i*V+F.x,this.worldY=e*B+F.y;return}let p=d.a,v=d.b,w=d.c,C=d.d;switch(this.worldX=p*i+v*e+d.worldX,this.worldY=w*i+C*e+d.worldY,this.inherit){case 0:{let F=(s+m)*I.degRad,V=(s+90+c)*I.degRad,B=Math.cos(F)*n,z=Math.cos(V)*r,W=Math.sin(F)*n,Z=Math.sin(V)*r;this.a=p*B+v*W,this.b=p*z+v*Z,this.c=w*B+C*W,this.d=w*z+C*Z;return}case 1:{let F=(s+m)*I.degRad,V=(s+90+c)*I.degRad;this.a=Math.cos(F)*n,this.b=Math.cos(V)*r,this.c=Math.sin(F)*n,this.d=Math.sin(V)*r;break}case 2:{let F=1/this.skeleton.scaleX,V=1/this.skeleton.scaleY;p*=F,w*=V;let B=p*p+w*w,z=0;B>1e-4?(B=Math.abs(p*C*V-v*F*w)/B,v=w*B,C=p*B,z=Math.atan2(w,p)*I.radDeg):(p=0,w=0,z=90-Math.atan2(C,v)*I.radDeg);let W=(s+m-z)*I.degRad,Z=(s+c-z+90)*I.degRad,J=Math.cos(W)*n,j=Math.cos(Z)*r,_=Math.sin(W)*n,tt=Math.sin(Z)*r;this.a=p*J-v*_,this.b=p*j-v*tt,this.c=w*J+C*_,this.d=w*j+C*tt;break}case 3:case 4:{s*=I.degRad;let F=Math.cos(s),V=Math.sin(s),B=(p*F+v*V)/this.skeleton.scaleX,z=(w*F+C*V)/this.skeleton.scaleY,W=Math.sqrt(B*B+z*z);W>1e-5&&(W=1/W),B*=W,z*=W,W=Math.sqrt(B*B+z*z),this.inherit==3&&p*C-v*w<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(W=-W),s=Math.PI/2+Math.atan2(z,B);let Z=Math.cos(s)*W,J=Math.sin(s)*W;m*=I.degRad,c=(90+c)*I.degRad;let j=Math.cos(m)*n,_=Math.cos(c)*r,tt=Math.sin(m)*n,nt=Math.sin(c)*r;this.a=B*j+Z*tt,this.b=B*_+Z*nt,this.c=z*j+J*tt,this.d=z*_+J*nt;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY;}setToSetupPose(){let i=this.data;this.x=i.x,this.y=i.y,this.rotation=i.rotation,this.scaleX=i.scaleX,this.scaleY=i.scaleY,this.shearX=i.shearX,this.shearY=i.shearY,this.inherit=i.inherit;}updateAppliedTransform(){let i=this.parent;if(!i){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*I.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*I.radDeg;return}let e=i.a,s=i.b,n=i.c,r=i.d,m=1/(e*r-s*n),c=r*m,d=s*m,p=n*m,v=e*m,w=this.worldX-i.worldX,C=this.worldY-i.worldY;this.ax=w*c-C*d,this.ay=C*v-w*p;let F,V,B,z;if(this.inherit==1)F=this.a,V=this.b,B=this.c,z=this.d;else {switch(this.inherit){case 2:{let _=Math.abs(e*r-s*n)/(e*e+n*n);s=-n*this.skeleton.scaleX*_/this.skeleton.scaleY,r=e*this.skeleton.scaleY*_/this.skeleton.scaleX,m=1/(e*r-s*n),c=r*m,d=s*m;break}case 3:case 4:let W=I.cosDeg(this.rotation),Z=I.sinDeg(this.rotation);e=(e*W+s*Z)/this.skeleton.scaleX,n=(n*W+r*Z)/this.skeleton.scaleY;let J=Math.sqrt(e*e+n*n);J>1e-5&&(J=1/J),e*=J,n*=J,J=Math.sqrt(e*e+n*n),this.inherit==3&&m<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(J=-J);let j=I.PI/2+Math.atan2(n,e);s=Math.cos(j)*J,r=Math.sin(j)*J,m=1/(e*r-s*n),c=r*m,d=s*m,p=n*m,v=e*m;}F=c*this.a-d*this.c,V=c*this.b-d*this.d,B=v*this.c-p*this.a,z=v*this.d-p*this.b;}if(this.ashearX=0,this.ascaleX=Math.sqrt(F*F+B*B),this.ascaleX>1e-4){let W=F*z-V*B;this.ascaleY=W/this.ascaleX,this.ashearY=-Math.atan2(F*V+B*z,W)*I.radDeg,this.arotation=Math.atan2(B,F)*I.radDeg;}else this.ascaleX=0,this.ascaleY=Math.sqrt(V*V+z*z),this.ashearY=0,this.arotation=90-Math.atan2(z,V)*I.radDeg;}getWorldRotationX(){return Math.atan2(this.c,this.a)*I.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*I.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(i){let e=1/(this.a*this.d-this.b*this.c),s=i.x-this.worldX,n=i.y-this.worldY;return i.x=s*this.d*e-n*this.b*e,i.y=n*this.a*e-s*this.c*e,i}localToWorld(i){let e=i.x,s=i.y;return i.x=e*this.a+s*this.b+this.worldX,i.y=e*this.c+s*this.d+this.worldY,i}worldToParent(i){if(i==null)throw new Error("world cannot be null.");return this.parent==null?i:this.parent.worldToLocal(i)}parentToWorld(i){if(i==null)throw new Error("world cannot be null.");return this.parent==null?i:this.parent.localToWorld(i)}worldToLocalRotation(i){let e=I.sinDeg(i),s=I.cosDeg(i);return Math.atan2(this.a*e-this.c*s,this.d*s-this.b*e)*I.radDeg+this.rotation-this.shearX}localToWorldRotation(i){i-=this.rotation-this.shearX;let e=I.sinDeg(i),s=I.cosDeg(i);return Math.atan2(s*this.c+e*this.d,s*this.a+e*this.b)*I.radDeg}rotateWorld(i){i*=I.degRad;let e=Math.sin(i),s=Math.cos(i),n=this.a,r=this.b;this.a=s*n-e*this.c,this.b=s*r-e*this.d,this.c=e*n+s*this.c,this.d=e*r+s*this.d;}},fi=class{constructor(i,e,s){this.name=i,this.order=e,this.skinRequired=s;}},wi=class{pathPrefix="";textureLoader;downloader;cache;errors={};toLoad=0;loaded=0;constructor(i,e="",s=new ps,n=new Bi){this.textureLoader=i,this.pathPrefix=e,this.downloader=s,this.cache=n;}start(i){return this.toLoad++,this.pathPrefix+i}success(i,e,s){this.toLoad--,this.loaded++,this.cache.assets[e]=s,this.cache.assetsRefCount[e]=(this.cache.assetsRefCount[e]||0)+1,i&&i(e,s);}error(i,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,i&&i(e,s);}loadAll(){return new Promise((i,e)=>{let s=()=>{if(this.isLoadingComplete()){this.hasErrors()?e(this.errors):i(this);return}requestAnimationFrame(s);};requestAnimationFrame(s);})}setRawDataURI(i,e){this.downloader.rawDataUris[this.pathPrefix+i]=e;}loadBinary(i,e=()=>{},s=()=>{}){i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((n,r)=>{this.downloader.downloadBinary(i,m=>{this.success(e,i,m),n(m);},(m,c)=>{let d=`Couldn't load binary ${i}: status ${m}, ${c}`;this.error(s,i,d),r(d);});}));}loadText(i,e=()=>{},s=()=>{}){i=this.start(i),this.downloader.downloadText(i,n=>{this.success(e,i,n);},(n,r)=>{this.error(s,i,`Couldn't load text ${i}: status ${n}, ${r}`);});}loadJson(i,e=()=>{},s=()=>{}){i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((n,r)=>{this.downloader.downloadJson(i,m=>{this.success(e,i,m),n(m);},(m,c)=>{let d=`Couldn't load JSON ${i}: status ${m}, ${c}`;this.error(s,i,d),r(d);});}));}reuseAssets(i,e=()=>{},s=()=>{}){let n=this.cache.assetsLoaded[i],r=n!==void 0;return r&&(this.cache.assetsLoaded[i]=n.then(m=>(m=m instanceof Image||m instanceof ImageBitmap?this.textureLoader(m):m,this.success(e,i,m),m)).catch(m=>this.error(s,i,m))),r}loadTexture(i,e=()=>{},s=()=>{}){i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((n,r)=>{if(!(typeof window<"u"&&typeof navigator<"u"&&window.document))fetch(i,{mode:"cors"}).then(m=>{if(m.ok)return m.blob();let c=`Couldn't load image: ${i}`;this.error(s,i,`Couldn't load image: ${i}`),r(c);}).then(m=>m?createImageBitmap(m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(m=>{if(m){let c=this.createTexture(i,m);this.success(e,i,c),n(c);}});else {let m=new Image;m.crossOrigin="anonymous",m.onload=()=>{let c=this.createTexture(i,m);this.success(e,i,c),n(c);},m.onerror=()=>{let c=`Couldn't load image: ${i}`;this.error(s,i,c),r(c);},this.downloader.rawDataUris[i]&&(i=this.downloader.rawDataUris[i]),m.src=i;}}));}loadTextureAtlas(i,e=()=>{},s=()=>{},n){let r=i.lastIndexOf("/"),m=r>=0?i.substring(0,r+1):"";i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((c,d)=>{this.downloader.downloadText(i,p=>{try{let v=this.createTextureAtlas(i,p),w=v.pages.length,C=!1;for(let F of v.pages)this.loadTexture(n?n[F.name]:m+F.name,(V,B)=>{C||(F.setTexture(B),--w==0&&(this.success(e,i,v),c(v)));},(V,B)=>{if(!C){let z=`Couldn't load texture ${i} page image: ${V}`;this.error(s,i,z),d(z);}C=!0;});}catch(v){let w=`Couldn't parse texture atlas ${i}: ${v.message}`;this.error(s,i,w),d(w);}},(p,v)=>{let w=`Couldn't load texture atlas ${i}: status ${p}, ${v}`;this.error(s,i,w),d(w);});}));}loadTextureAtlasButNoTextures(i,e=()=>{},s=()=>{},n){i=this.start(i),!this.reuseAssets(i,e,s)&&(this.cache.assetsLoaded[i]=new Promise((r,m)=>{this.downloader.downloadText(i,c=>{try{let d=this.createTextureAtlas(i,c);this.success(e,i,d),r(d);}catch(d){let p=`Couldn't parse texture atlas ${i}: ${d.message}`;this.error(s,i,p),m(p);}},(c,d)=>{let p=`Couldn't load texture atlas ${i}: status ${c}, ${d}`;this.error(s,i,p),m(p);});}));}async loadBinaryAsync(i){return new Promise((e,s)=>{this.loadBinary(i,(n,r)=>e(r),(n,r)=>s(r));})}async loadJsonAsync(i){return new Promise((e,s)=>{this.loadJson(i,(n,r)=>e(r),(n,r)=>s(r));})}async loadTextureAsync(i){return new Promise((e,s)=>{this.loadTexture(i,(n,r)=>e(r),(n,r)=>s(r));})}async loadTextureAtlasAsync(i){return new Promise((e,s)=>{this.loadTextureAtlas(i,(n,r)=>e(r),(n,r)=>s(r));})}async loadTextureAtlasButNoTexturesAsync(i){return new Promise((e,s)=>{this.loadTextureAtlasButNoTextures(i,(n,r)=>e(r),(n,r)=>s(r));})}setCache(i){this.cache=i;}get(i){return this.cache.assets[this.pathPrefix+i]}require(i){i=this.pathPrefix+i;let e=this.cache.assets[i];if(e)return e;let s=this.errors[i];throw Error("Asset not found: "+i+(s?`
`+s:""))}remove(i){i=this.pathPrefix+i;let e=this.cache.assets[i];return e.dispose&&e.dispose(),delete this.cache.assets[i],delete this.cache.assetsRefCount[i],delete this.cache.assetsLoaded[i],e}removeAll(){for(let i in this.cache.assets){let e=this.cache.assets[i];e.dispose&&e.dispose();}this.cache.assets={},this.cache.assetsLoaded={},this.cache.assetsRefCount={};}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll();}disposeAsset(i){let e=this.cache.assets[i];if(e instanceof ii){e.dispose();return}this.disposeAssetInternal(i);}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}disposeAssetInternal(i){if(this.cache.assetsRefCount[i]>0&&--this.cache.assetsRefCount[i]===0)return this.remove(i)}createTextureAtlas(i,e){let s=new ii(e);return s.dispose=()=>{var n;if(!(this.cache.assetsRefCount[i]<=0)){this.disposeAssetInternal(i);for(let r of s.pages)(n=r.texture)==null||n.dispose();}},s}createTexture(i,e){let s=this.textureLoader(e),n=s.dispose.bind(s);return s.dispose=()=>{this.disposeAssetInternal(i)&&n();},s}},Bi=class Rr{assets={};assetsRefCount={};assetsLoaded={};static AVAILABLE_CACHES=new Map;static getCache(e){let s=Rr.AVAILABLE_CACHES.get(e);if(s)return s;let n=new Rr;return Rr.AVAILABLE_CACHES.set(e,n),n}async addAsset(e,s){this.assetsLoaded[e]=Promise.resolve(s),this.assets[e]=await s;}},ps=class{callbacks={};rawDataUris={};dataUriToString(i){if(!i.startsWith("data:"))throw new Error("Not a data URI.");let e=i.indexOf("base64,");return e!=-1?(e+=7,atob(i.substr(e))):i.substr(i.indexOf(",")+1)}base64ToUint8Array(i){for(var e=window.atob(i),s=e.length,n=new Uint8Array(s),r=0;r<s;r++)n[r]=e.charCodeAt(r);return n}dataUriToUint8Array(i){if(!i.startsWith("data:"))throw new Error("Not a data URI.");let e=i.indexOf("base64,");if(e==-1)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(i.substr(e))}downloadText(i,e,s){if(this.start(i,e,s))return;let n=this.rawDataUris[i];if(n&&!n.includes(".")){try{this.finish(i,200,this.dataUriToString(n));}catch(c){this.finish(i,400,JSON.stringify(c));}return}let r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.open("GET",n||i,true);let m=()=>{this.finish(i,r.status,r.responseText);};r.onload=m,r.onerror=m,r.send();}downloadJson(i,e,s){this.downloadText(i,n=>{e(JSON.parse(n));},s);}downloadBinary(i,e,s){if(this.start(i,e,s))return;let n=this.rawDataUris[i];if(n&&!n.includes(".")){try{this.finish(i,200,this.dataUriToUint8Array(n));}catch(c){this.finish(i,400,JSON.stringify(c));}return}let r=new XMLHttpRequest;r.open("GET",n||i,true),r.responseType="arraybuffer";let m=()=>{this.finish(i,r.status,r.response);};r.onload=()=>{r.status==200||r.status==0?this.finish(i,200,new Uint8Array(r.response)):m();},r.onerror=m,r.send();}start(i,e,s){let n=this.callbacks[i];try{if(n)return !0;this.callbacks[i]=n=[];}finally{n.push(e,s);}}finish(i,e,s){let n=this.callbacks[i];delete this.callbacks[i];let r=e==200||e==0?[s]:[e,s];for(let m=r.length-1,c=n.length;m<c;m+=2)n[m].apply(null,r);}},xs=class{data;intValue=0;floatValue=0;stringValue=null;time=0;volume=0;balance=0;constructor(i,e){if(!e)throw new Error("data cannot be null.");this.time=i,this.data=e;}},Gs=class{name;intValue=0;floatValue=0;stringValue=null;audioPath=null;volume=0;balance=0;constructor(i){this.name=i;}},vs=class{data;bones;target;bendDirection=0;compress=false;stretch=false;mix=1;softness=0;active=false;constructor(i,e){if(!i)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=i,this.bones=new Array;for(let n=0;n<i.bones.length;n++){let r=e.findBone(i.bones[n].name);if(!r)throw new Error(`Couldn't find bone ${i.bones[n].name}`);this.bones.push(r);}let s=e.findBone(i.target.name);if(!s)throw new Error(`Couldn't find bone ${i.target.name}`);this.target=s,this.mix=i.mix,this.softness=i.softness,this.bendDirection=i.bendDirection,this.compress=i.compress,this.stretch=i.stretch;}isActive(){return this.active}setToSetupPose(){let i=this.data;this.mix=i.mix,this.softness=i.softness,this.bendDirection=i.bendDirection,this.compress=i.compress,this.stretch=i.stretch;}update(i){if(this.mix==0)return;let e=this.target,s=this.bones;switch(s.length){case 1:this.apply1(s[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(s[0],s[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(i,e,s,n,r,m,c){let d=i.parent;if(!d)throw new Error("IK bone must have parent.");let p=d.a,v=d.b,w=d.c,C=d.d,F=-i.ashearX-i.arotation,V=0,B=0;switch(i.inherit){case 1:V=(e-i.worldX)*I.signum(i.skeleton.scaleX),B=(s-i.worldY)*I.signum(i.skeleton.scaleY);break;case 2:let Z=Math.abs(p*C-v*w)/Math.max(1e-4,p*p+w*w),J=p/i.skeleton.scaleX,j=w/i.skeleton.scaleY;v=-j*Z*i.skeleton.scaleX,C=J*Z*i.skeleton.scaleY,F+=Math.atan2(j,J)*I.radDeg;default:let _=e-d.worldX,tt=s-d.worldY,nt=p*C-v*w;Math.abs(nt)<=1e-4?(V=0,B=0):(V=(_*C-tt*v)/nt-i.ax,B=(tt*p-_*w)/nt-i.ay);}F+=Math.atan2(B,V)*I.radDeg,i.ascaleX<0&&(F+=180),F>180?F-=360:F<-180&&(F+=360);let z=i.ascaleX,W=i.ascaleY;if(n||r){switch(i.inherit){case 3:case 4:V=e-i.worldX,B=s-i.worldY;}let Z=i.data.length*z;if(Z>1e-4){let J=V*V+B*B;if(n&&J<Z*Z||r&&J>Z*Z){let j=(Math.sqrt(J)/Z-1)*c+1;z*=j,m&&(W*=j);}}}i.updateWorldTransformWith(i.ax,i.ay,i.arotation+F*c,z,W,i.ashearX,i.ashearY);}apply2(i,e,s,n,r,m,c,d,p){if(i.inherit!=0||e.inherit!=0)return;let v=i.ax,w=i.ay,C=i.ascaleX,F=i.ascaleY,V=C,B=F,z=e.ascaleX,W=0,Z=0,J=0;C<0?(C=-C,W=180,J=-1):(W=0,J=1),F<0&&(F=-F,J=-J),z<0?(z=-z,Z=180):Z=0;let j=e.ax,_=0,tt=0,nt=0,xt=i.a,gt=i.b,pt=i.c,Ct=i.d,Yt=Math.abs(C-F)<=1e-4;!Yt||m?(_=0,tt=xt*j+i.worldX,nt=pt*j+i.worldY):(_=e.ay,tt=xt*j+gt*_+i.worldX,nt=pt*j+Ct*_+i.worldY);let Xt=i.parent;if(!Xt)throw new Error("IK parent must itself have a parent.");xt=Xt.a,gt=Xt.b,pt=Xt.c,Ct=Xt.d;let Ut=xt*Ct-gt*pt,bt=tt-Xt.worldX,Et=nt-Xt.worldY;Ut=Math.abs(Ut)<=1e-4?0:1/Ut;let Ht=(bt*Ct-Et*gt)*Ut-v,Se=(Et*xt-bt*pt)*Ut-w,xe=Math.sqrt(Ht*Ht+Se*Se),be=e.data.length*z,Pe,Re;if(xe<1e-4){this.apply1(i,s,n,false,m,false,p),e.updateWorldTransformWith(j,_,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}bt=s-Xt.worldX,Et=n-Xt.worldY;let Ge=(bt*Ct-Et*gt)*Ut-v,ne=(Et*xt-bt*pt)*Ut-w,Te=Ge*Ge+ne*ne;if(d!=0){d*=C*(z+1)*.5;let je=Math.sqrt(Te),si=je-xe-be*C+d;if(si>0){let _e=Math.min(1,si/(d*2))-1;_e=(si-d*(1-_e*_e))/je,Ge-=_e*Ge,ne-=_e*ne,Te=Ge*Ge+ne*ne;}}t:if(Yt){be*=C;let je=(Te-xe*xe-be*be)/(2*xe*be);je<-1?(je=-1,Re=Math.PI*r):je>1?(je=1,Re=0,m&&(xt=(Math.sqrt(Te)/(xe+be)-1)*p+1,V*=xt,c&&(B*=xt))):Re=Math.acos(je)*r,xt=xe+be*je,gt=be*Math.sin(Re),Pe=Math.atan2(ne*xt-Ge*gt,Ge*xt+ne*gt);}else {xt=C*be,gt=F*be;let je=xt*xt,si=gt*gt,_e=Math.atan2(ne,Ge);pt=si*xe*xe+je*Te-je*si;let Ri=-2*si*xe,Cs=si-je;if(Ct=Ri*Ri-4*Cs*pt,Ct>=0){let Rs=Math.sqrt(Ct);Ri<0&&(Rs=-Rs),Rs=-(Ri+Rs)*.5;let rr=Rs/Cs,gn=pt/Rs,br=Math.abs(rr)<Math.abs(gn)?rr:gn;if(rr=Te-br*br,rr>=0){Et=Math.sqrt(rr)*r,Pe=_e-Math.atan2(Et,br),Re=Math.atan2(Et/F,(br-xe)/C);break t}}let sr=I.PI,Ar=xe-xt,Kr=Ar*Ar,un=0,fn=0,Sr=xe+xt,$r=Sr*Sr,mn=0;pt=-xt*xe/(je-si),pt>=-1&&pt<=1&&(pt=Math.acos(pt),bt=xt*Math.cos(pt)+xe,Et=gt*Math.sin(pt),Ct=bt*bt+Et*Et,Ct<Kr&&(sr=pt,Kr=Ct,Ar=bt,un=Et),Ct>$r&&(fn=pt,$r=Ct,Sr=bt,mn=Et)),Te<=(Kr+$r)*.5?(Pe=_e-Math.atan2(un*r,Ar),Re=sr*r):(Pe=_e-Math.atan2(mn*r,Sr),Re=fn*r);}let Fe=Math.atan2(_,j)*J,Ke=i.arotation;Pe=(Pe-Fe)*I.radDeg+W-Ke,Pe>180?Pe-=360:Pe<-180&&(Pe+=360),i.updateWorldTransformWith(v,w,Ke+Pe*p,V,B,0,0),Ke=e.arotation,Re=((Re+Fe)*I.radDeg-e.ashearX)*J+Z-Ke,Re>180?Re-=360:Re<-180&&(Re+=360),e.updateWorldTransformWith(j,_,Ke+Re*p,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);}},ts=class extends fi{bones=new Array;_target=null;set target(i){this._target=i;}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}bendDirection=0;compress=false;stretch=false;uniform=false;mix=0;softness=0;constructor(i){super(i,0,false);}},Ni=class extends fi{bones=new Array;_target=null;set target(i){this._target=i;}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}positionMode=0;spacingMode=1;rotateMode=1;offsetRotation=0;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;constructor(i){super(i,0,false);}},es=(i=>(i[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent",i))(es||{}),ei=(i=>(i[i.Length=0]="Length",i[i.Fixed=1]="Fixed",i[i.Percent=2]="Percent",i[i.Proportional=3]="Proportional",i))(ei||{}),is=(i=>(i[i.Tangent=0]="Tangent",i[i.Chain=1]="Chain",i[i.ChainScale=2]="ChainScale",i))(is||{}),dr=class ji{static NONE=-1;static BEFORE=-2;static AFTER=-3;static epsilon=1e-5;data;bones;target;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;spaces=new Array;positions=new Array;world=new Array;curves=new Array;lengths=new Array;segments=new Array;active=false;constructor(e,s){if(!e)throw new Error("data cannot be null.");if(!s)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let r=0,m=e.bones.length;r<m;r++){let c=s.findBone(e.bones[r].name);if(!c)throw new Error(`Couldn't find bone ${e.bones[r].name}.`);this.bones.push(c);}let n=s.findSlot(e.target.name);if(!n)throw new Error(`Couldn't find target bone ${e.target.name}`);this.target=n,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY;}isActive(){return this.active}setToSetupPose(){let e=this.data;this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY;}update(e){let s=this.target.getAttachment();if(!(s instanceof Yi))return;let n=this.mixRotate,r=this.mixX,m=this.mixY;if(n==0&&r==0&&m==0)return;let c=this.data,d=c.rotateMode==0,p=c.rotateMode==2,v=this.bones,w=v.length,C=d?w:w+1,F=D.setArraySize(this.spaces,C),V=p?this.lengths=D.setArraySize(this.lengths,w):[],B=this.spacing;switch(c.spacingMode){case 2:if(p)for(let nt=0,xt=C-1;nt<xt;nt++){let gt=v[nt],pt=gt.data.length,Ct=pt*gt.a,Yt=pt*gt.c;V[nt]=Math.sqrt(Ct*Ct+Yt*Yt);}D.arrayFill(F,1,C,B);break;case 3:let _=0;for(let nt=0,xt=C-1;nt<xt;){let gt=v[nt],pt=gt.data.length;if(pt<ji.epsilon)p&&(V[nt]=0),F[++nt]=B;else {let Ct=pt*gt.a,Yt=pt*gt.c,Xt=Math.sqrt(Ct*Ct+Yt*Yt);p&&(V[nt]=Xt),F[++nt]=Xt,_+=Xt;}}if(_>0){_=C/_*B;for(let nt=1;nt<C;nt++)F[nt]*=_;}break;default:let tt=c.spacingMode==0;for(let nt=0,xt=C-1;nt<xt;){let gt=v[nt],pt=gt.data.length;if(pt<ji.epsilon)p&&(V[nt]=0),F[++nt]=B;else {let Ct=pt*gt.a,Yt=pt*gt.c,Xt=Math.sqrt(Ct*Ct+Yt*Yt);p&&(V[nt]=Xt),F[++nt]=(tt?pt+B:B)*Xt/pt;}}}let z=this.computeWorldPositions(s,C,d),W=z[0],Z=z[1],J=c.offsetRotation,j=false;if(J==0)j=c.rotateMode==1;else {j=false;let _=this.target.bone;J*=_.a*_.d-_.b*_.c>0?I.degRad:-0.01745329277777778;}for(let _=0,tt=3;_<w;_++,tt+=3){let nt=v[_];nt.worldX+=(W-nt.worldX)*r,nt.worldY+=(Z-nt.worldY)*m;let xt=z[tt],gt=z[tt+1],pt=xt-W,Ct=gt-Z;if(p){let Yt=V[_];if(Yt!=0){let Xt=(Math.sqrt(pt*pt+Ct*Ct)/Yt-1)*n+1;nt.a*=Xt,nt.c*=Xt;}}if(W=xt,Z=gt,n>0){let Yt=nt.a,Xt=nt.b,Ut=nt.c,bt=nt.d,Et=0,Ht=0,Se=0;if(d?Et=z[tt-1]:F[_+1]==0?Et=z[tt+2]:Et=Math.atan2(Ct,pt),Et-=Math.atan2(Ut,Yt),j){Ht=Math.cos(Et),Se=Math.sin(Et);let xe=nt.data.length;W+=(xe*(Ht*Yt-Se*Ut)-pt)*n,Z+=(xe*(Se*Yt+Ht*Ut)-Ct)*n;}else Et+=J;Et>I.PI?Et-=I.PI2:Et<-3.1415927&&(Et+=I.PI2),Et*=n,Ht=Math.cos(Et),Se=Math.sin(Et),nt.a=Ht*Yt-Se*Ut,nt.b=Ht*Xt-Se*bt,nt.c=Se*Yt+Ht*Ut,nt.d=Se*Xt+Ht*bt;}nt.updateAppliedTransform();}}computeWorldPositions(e,s,n){let r=this.target,m=this.position,c=this.spaces,d=D.setArraySize(this.positions,s*3+2),p=this.world,v=e.closed,w=e.worldVerticesLength,C=w/6,F=ji.NONE;if(!e.constantSpeed){let xe=e.lengths;C-=v?1:2;let be=xe[C];this.data.positionMode==1&&(m*=be);let Pe;switch(this.data.spacingMode){case 2:Pe=be;break;case 3:Pe=be/s;break;default:Pe=1;}p=D.setArraySize(this.world,8);for(let Re=0,Ge=0,ne=0;Re<s;Re++,Ge+=3){let Te=c[Re]*Pe;m+=Te;let Fe=m;if(v)Fe%=be,Fe<0&&(Fe+=be),ne=0;else if(Fe<0){F!=ji.BEFORE&&(F=ji.BEFORE,e.computeWorldVertices(r,2,4,p,0,2)),this.addBeforePosition(Fe,p,0,d,Ge);continue}else if(Fe>be){F!=ji.AFTER&&(F=ji.AFTER,e.computeWorldVertices(r,w-6,4,p,0,2)),this.addAfterPosition(Fe-be,p,0,d,Ge);continue}for(;;ne++){let Ke=xe[ne];if(!(Fe>Ke)){if(ne==0)Fe/=Ke;else {let je=xe[ne-1];Fe=(Fe-je)/(Ke-je);}break}}ne!=F&&(F=ne,v&&ne==C?(e.computeWorldVertices(r,w-4,4,p,0,2),e.computeWorldVertices(r,0,4,p,4,2)):e.computeWorldVertices(r,ne*6+2,8,p,0,2)),this.addCurvePosition(Fe,p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],d,Ge,n||Re>0&&Te==0);}return d}v?(w+=2,p=D.setArraySize(this.world,w),e.computeWorldVertices(r,2,w-4,p,0,2),e.computeWorldVertices(r,0,2,p,w-4,2),p[w-2]=p[0],p[w-1]=p[1]):(C--,w-=4,p=D.setArraySize(this.world,w),e.computeWorldVertices(r,2,w,p,0,2));let V=D.setArraySize(this.curves,C),B=0,z=p[0],W=p[1],Z=0,J=0,j=0,_=0,tt=0,nt=0,xt=0,gt=0,pt=0,Ct=0,Yt=0,Xt=0,Ut=0,bt=0;for(let xe=0,be=2;xe<C;xe++,be+=6)Z=p[be],J=p[be+1],j=p[be+2],_=p[be+3],tt=p[be+4],nt=p[be+5],xt=(z-Z*2+j)*.1875,gt=(W-J*2+_)*.1875,pt=((Z-j)*3-z+tt)*.09375,Ct=((J-_)*3-W+nt)*.09375,Yt=xt*2+pt,Xt=gt*2+Ct,Ut=(Z-z)*.75+xt+pt*.16666667,bt=(J-W)*.75+gt+Ct*.16666667,B+=Math.sqrt(Ut*Ut+bt*bt),Ut+=Yt,bt+=Xt,Yt+=pt,Xt+=Ct,B+=Math.sqrt(Ut*Ut+bt*bt),Ut+=Yt,bt+=Xt,B+=Math.sqrt(Ut*Ut+bt*bt),Ut+=Yt+pt,bt+=Xt+Ct,B+=Math.sqrt(Ut*Ut+bt*bt),V[xe]=B,z=tt,W=nt;this.data.positionMode==1&&(m*=B);let Et;switch(this.data.spacingMode){case 2:Et=B;break;case 3:Et=B/s;break;default:Et=1;}let Ht=this.segments,Se=0;for(let xe=0,be=0,Pe=0,Re=0;xe<s;xe++,be+=3){let Ge=c[xe]*Et;m+=Ge;let ne=m;if(v)ne%=B,ne<0&&(ne+=B),Pe=0;else if(ne<0){this.addBeforePosition(ne,p,0,d,be);continue}else if(ne>B){this.addAfterPosition(ne-B,p,w-4,d,be);continue}for(;;Pe++){let Te=V[Pe];if(!(ne>Te)){if(Pe==0)ne/=Te;else {let Fe=V[Pe-1];ne=(ne-Fe)/(Te-Fe);}break}}if(Pe!=F){F=Pe;let Te=Pe*6;for(z=p[Te],W=p[Te+1],Z=p[Te+2],J=p[Te+3],j=p[Te+4],_=p[Te+5],tt=p[Te+6],nt=p[Te+7],xt=(z-Z*2+j)*.03,gt=(W-J*2+_)*.03,pt=((Z-j)*3-z+tt)*.006,Ct=((J-_)*3-W+nt)*.006,Yt=xt*2+pt,Xt=gt*2+Ct,Ut=(Z-z)*.3+xt+pt*.16666667,bt=(J-W)*.3+gt+Ct*.16666667,Se=Math.sqrt(Ut*Ut+bt*bt),Ht[0]=Se,Te=1;Te<8;Te++)Ut+=Yt,bt+=Xt,Yt+=pt,Xt+=Ct,Se+=Math.sqrt(Ut*Ut+bt*bt),Ht[Te]=Se;Ut+=Yt,bt+=Xt,Se+=Math.sqrt(Ut*Ut+bt*bt),Ht[8]=Se,Ut+=Yt+pt,bt+=Xt+Ct,Se+=Math.sqrt(Ut*Ut+bt*bt),Ht[9]=Se,Re=0;}for(ne*=Se;;Re++){let Te=Ht[Re];if(!(ne>Te)){if(Re==0)ne/=Te;else {let Fe=Ht[Re-1];ne=Re+(ne-Fe)/(Te-Fe);}break}}this.addCurvePosition(ne*.1,z,W,Z,J,j,_,tt,nt,d,be,n||xe>0&&Ge==0);}return d}addBeforePosition(e,s,n,r,m){let c=s[n],d=s[n+1],p=s[n+2]-c,v=s[n+3]-d,w=Math.atan2(v,p);r[m]=c+e*Math.cos(w),r[m+1]=d+e*Math.sin(w),r[m+2]=w;}addAfterPosition(e,s,n,r,m){let c=s[n+2],d=s[n+3],p=c-s[n],v=d-s[n+1],w=Math.atan2(v,p);r[m]=c+e*Math.cos(w),r[m+1]=d+e*Math.sin(w),r[m+2]=w;}addCurvePosition(e,s,n,r,m,c,d,p,v,w,C,F){if(e==0||isNaN(e)){w[C]=s,w[C+1]=n,w[C+2]=Math.atan2(m-n,r-s);return}let V=e*e,B=V*e,z=1-e,W=z*z,Z=W*z,J=z*e,j=J*3,_=z*j,tt=j*e,nt=s*Z+r*_+c*tt+p*B,xt=n*Z+m*_+d*tt+v*B;w[C]=nt,w[C+1]=xt,F&&(e<.001?w[C+2]=Math.atan2(m-n,r-s):w[C+2]=Math.atan2(xt-(n*W+m*J*2+d*V),nt-(s*W+r*J*2+c*V)));}},ur=class{data;_bone=null;set bone(i){this._bone=i;}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}inertia=0;strength=0;damping=0;massInverse=0;wind=0;gravity=0;mix=0;_reset=true;ux=0;uy=0;cx=0;cy=0;tx=0;ty=0;xOffset=0;xVelocity=0;yOffset=0;yVelocity=0;rotateOffset=0;rotateVelocity=0;scaleOffset=0;scaleVelocity=0;active=false;skeleton;remaining=0;lastTime=0;constructor(i,e){this.data=i,this.skeleton=e,this.bone=e.bones[i.bone.index],this.inertia=i.inertia,this.strength=i.strength,this.damping=i.damping,this.massInverse=i.massInverse,this.wind=i.wind,this.gravity=i.gravity,this.mix=i.mix;}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=true,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0;}setToSetupPose(){let i=this.data;this.inertia=i.inertia,this.strength=i.strength,this.damping=i.damping,this.massInverse=i.massInverse,this.wind=i.wind,this.gravity=i.gravity,this.mix=i.mix;}isActive(){return this.active}update(i){let e=this.mix;if(e==0)return;let s=this.data.x>0,n=this.data.y>0,r=this.data.rotate>0||this.data.shearX>0,m=this.data.scaleX>0,c=this.bone,d=c.data.length;switch(i){case 0:return;case 1:this.reset();case 2:let p=this.skeleton,v=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=v,this.lastTime=p.time;let w=c.worldX,C=c.worldY;if(this._reset)this._reset=false,this.ux=w,this.uy=C;else {let F=this.remaining,V=this.inertia,B=this.data.step,z=this.skeleton.data.referenceScale,W=-1,Z=this.data.limit*v,J=Z*Math.abs(p.scaleY);if(Z*=Math.abs(p.scaleX),s||n){if(s){let j=(this.ux-w)*V;this.xOffset+=j>Z?Z:j<-Z?-Z:j,this.ux=w;}if(n){let j=(this.uy-C)*V;this.yOffset+=j>J?J:j<-J?-J:j,this.uy=C;}if(F>=B){W=Math.pow(this.damping,60*B);let j=this.massInverse*B,_=this.strength,tt=this.wind*z*p.scaleX,nt=this.gravity*z*p.scaleY;do s&&(this.xVelocity+=(tt-this.xOffset*_)*j,this.xOffset+=this.xVelocity*B,this.xVelocity*=W),n&&(this.yVelocity-=(nt+this.yOffset*_)*j,this.yOffset+=this.yVelocity*B,this.yVelocity*=W),F-=B;while(F>=B)}s&&(c.worldX+=this.xOffset*e*this.data.x),n&&(c.worldY+=this.yOffset*e*this.data.y);}if(r||m){let j=Math.atan2(c.c,c.a),_=0,tt=0,nt=0,xt=this.cx-c.worldX,gt=this.cy-c.worldY;if(xt>Z?xt=Z:xt<-Z&&(xt=-Z),gt>J?gt=J:gt<-J&&(gt=-J),r){nt=(this.data.rotate+this.data.shearX)*e;let pt=Math.atan2(gt+this.ty,xt+this.tx)-j-this.rotateOffset*nt;this.rotateOffset+=(pt-Math.ceil(pt*I.invPI2-.5)*I.PI2)*V,pt=this.rotateOffset*nt+j,_=Math.cos(pt),tt=Math.sin(pt),m&&(pt=d*c.getWorldScaleX(),pt>0&&(this.scaleOffset+=(xt*_+gt*tt)*V/pt));}else {_=Math.cos(j),tt=Math.sin(j);let pt=d*c.getWorldScaleX();pt>0&&(this.scaleOffset+=(xt*_+gt*tt)*V/pt);}if(F=this.remaining,F>=B){W==-1&&(W=Math.pow(this.damping,60*B));let pt=this.massInverse*B,Ct=this.strength,Yt=this.wind,Xt=this.gravity,Ut=d/z;for(;;)if(F-=B,m&&(this.scaleVelocity+=(Yt*_-Xt*tt-this.scaleOffset*Ct)*pt,this.scaleOffset+=this.scaleVelocity*B,this.scaleVelocity*=W),r){if(this.rotateVelocity-=((Yt*tt+Xt*_)*Ut+this.rotateOffset*Ct)*pt,this.rotateOffset+=this.rotateVelocity*B,this.rotateVelocity*=W,F<B)break;let bt=this.rotateOffset*nt+j;_=Math.cos(bt),tt=Math.sin(bt);}else if(F<B)break}}this.remaining=F;}this.cx=c.worldX,this.cy=c.worldY;break;case 3:s&&(c.worldX+=this.xOffset*e*this.data.x),n&&(c.worldY+=this.yOffset*e*this.data.y);}if(r){let p=this.rotateOffset*e,v=0,w=0,C=0;if(this.data.shearX>0){let F=0;this.data.rotate>0&&(F=p*this.data.rotate,v=Math.sin(F),w=Math.cos(F),C=c.b,c.b=w*C-v*c.d,c.d=v*C+w*c.d),F+=p*this.data.shearX,v=Math.sin(F),w=Math.cos(F),C=c.a,c.a=w*C-v*c.c,c.c=v*C+w*c.c;}else p*=this.data.rotate,v=Math.sin(p),w=Math.cos(p),C=c.a,c.a=w*C-v*c.c,c.c=v*C+w*c.c,C=c.b,c.b=w*C-v*c.d,c.d=v*C+w*c.d;}if(m){let p=1+this.scaleOffset*e*this.data.scaleX;c.a*=p,c.c*=p;}i!=3&&(this.tx=d*c.a,this.ty=d*c.c),c.updateAppliedTransform();}translate(i,e){this.ux-=i,this.uy-=e,this.cx-=i,this.cy-=e;}rotate(i,e,s){let n=s*I.degRad,r=Math.cos(n),m=Math.sin(n),c=this.cx-i,d=this.cy-e;this.translate(c*r-d*m-c,c*m+d*r-d);}},fr=class{data;bone;color;darkColor=null;attachment=null;attachmentState=0;sequenceIndex=-1;deform=new Array;constructor(i,e){if(!i)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=i,this.bone=e,this.color=new O,this.darkColor=i.darkColor?new O:null,this.setToSetupPose();}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(i){this.attachment!=i&&((!(i instanceof st)||!(this.attachment instanceof st)||i.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=i,this.sequenceIndex=-1);}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null;}},mr=class{data;bones;target;mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;temp=new it;active=false;constructor(i,e){if(!i)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=i,this.bones=new Array;for(let n=0;n<i.bones.length;n++){let r=e.findBone(i.bones[n].name);if(!r)throw new Error(`Couldn't find bone ${i.bones[n].name}.`);this.bones.push(r);}let s=e.findBone(i.target.name);if(!s)throw new Error(`Couldn't find target bone ${i.target.name}.`);this.target=s,this.mixRotate=i.mixRotate,this.mixX=i.mixX,this.mixY=i.mixY,this.mixScaleX=i.mixScaleX,this.mixScaleY=i.mixScaleY,this.mixShearY=i.mixShearY;}isActive(){return this.active}setToSetupPose(){let i=this.data;this.mixRotate=i.mixRotate,this.mixX=i.mixX,this.mixY=i.mixY,this.mixScaleX=i.mixScaleX,this.mixScaleY=i.mixScaleY,this.mixShearY=i.mixShearY;}update(i){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld());}applyAbsoluteWorld(){let i=this.mixRotate,e=this.mixX,s=this.mixY,n=this.mixScaleX,r=this.mixScaleY,m=this.mixShearY,c=e!=0||s!=0,d=this.target,p=d.a,v=d.b,w=d.c,C=d.d,F=p*C-v*w>0?I.degRad:-0.01745329277777778,V=this.data.offsetRotation*F,B=this.data.offsetShearY*F,z=this.bones;for(let W=0,Z=z.length;W<Z;W++){let J=z[W];if(i!=0){let j=J.a,_=J.b,tt=J.c,nt=J.d,xt=Math.atan2(w,p)-Math.atan2(tt,j)+V;xt>I.PI?xt-=I.PI2:xt<-3.1415927&&(xt+=I.PI2),xt*=i;let gt=Math.cos(xt),pt=Math.sin(xt);J.a=gt*j-pt*tt,J.b=gt*_-pt*nt,J.c=pt*j+gt*tt,J.d=pt*_+gt*nt;}if(c){let j=this.temp;d.localToWorld(j.set(this.data.offsetX,this.data.offsetY)),J.worldX+=(j.x-J.worldX)*e,J.worldY+=(j.y-J.worldY)*s;}if(n!=0){let j=Math.sqrt(J.a*J.a+J.c*J.c);j!=0&&(j=(j+(Math.sqrt(p*p+w*w)-j+this.data.offsetScaleX)*n)/j),J.a*=j,J.c*=j;}if(r!=0){let j=Math.sqrt(J.b*J.b+J.d*J.d);j!=0&&(j=(j+(Math.sqrt(v*v+C*C)-j+this.data.offsetScaleY)*r)/j),J.b*=j,J.d*=j;}if(m>0){let j=J.b,_=J.d,tt=Math.atan2(_,j),nt=Math.atan2(C,v)-Math.atan2(w,p)-(tt-Math.atan2(J.c,J.a));nt>I.PI?nt-=I.PI2:nt<-3.1415927&&(nt+=I.PI2),nt=tt+(nt+B)*m;let xt=Math.sqrt(j*j+_*_);J.b=Math.cos(nt)*xt,J.d=Math.sin(nt)*xt;}J.updateAppliedTransform();}}applyRelativeWorld(){let i=this.mixRotate,e=this.mixX,s=this.mixY,n=this.mixScaleX,r=this.mixScaleY,m=this.mixShearY,c=e!=0||s!=0,d=this.target,p=d.a,v=d.b,w=d.c,C=d.d,F=p*C-v*w>0?I.degRad:-0.01745329277777778,V=this.data.offsetRotation*F,B=this.data.offsetShearY*F,z=this.bones;for(let W=0,Z=z.length;W<Z;W++){let J=z[W];if(i!=0){let j=J.a,_=J.b,tt=J.c,nt=J.d,xt=Math.atan2(w,p)+V;xt>I.PI?xt-=I.PI2:xt<-3.1415927&&(xt+=I.PI2),xt*=i;let gt=Math.cos(xt),pt=Math.sin(xt);J.a=gt*j-pt*tt,J.b=gt*_-pt*nt,J.c=pt*j+gt*tt,J.d=pt*_+gt*nt;}if(c){let j=this.temp;d.localToWorld(j.set(this.data.offsetX,this.data.offsetY)),J.worldX+=j.x*e,J.worldY+=j.y*s;}if(n!=0){let j=(Math.sqrt(p*p+w*w)-1+this.data.offsetScaleX)*n+1;J.a*=j,J.c*=j;}if(r!=0){let j=(Math.sqrt(v*v+C*C)-1+this.data.offsetScaleY)*r+1;J.b*=j,J.d*=j;}if(m>0){let j=Math.atan2(C,v)-Math.atan2(w,p);j>I.PI?j-=I.PI2:j<-3.1415927&&(j+=I.PI2);let _=J.b,tt=J.d;j=Math.atan2(tt,_)+(j-I.PI/2+B)*m;let nt=Math.sqrt(_*_+tt*tt);J.b=Math.cos(j)*nt,J.d=Math.sin(j)*nt;}J.updateAppliedTransform();}}applyAbsoluteLocal(){let i=this.mixRotate,e=this.mixX,s=this.mixY,n=this.mixScaleX,r=this.mixScaleY,m=this.mixShearY,c=this.target,d=this.bones;for(let p=0,v=d.length;p<v;p++){let w=d[p],C=w.arotation;i!=0&&(C+=(c.arotation-C+this.data.offsetRotation)*i);let F=w.ax,V=w.ay;F+=(c.ax-F+this.data.offsetX)*e,V+=(c.ay-V+this.data.offsetY)*s;let B=w.ascaleX,z=w.ascaleY;n!=0&&B!=0&&(B=(B+(c.ascaleX-B+this.data.offsetScaleX)*n)/B),r!=0&&z!=0&&(z=(z+(c.ascaleY-z+this.data.offsetScaleY)*r)/z);let W=w.ashearY;m!=0&&(W+=(c.ashearY-W+this.data.offsetShearY)*m),w.updateWorldTransformWith(F,V,C,B,z,w.ashearX,W);}}applyRelativeLocal(){let i=this.mixRotate,e=this.mixX,s=this.mixY,n=this.mixScaleX,r=this.mixScaleY,m=this.mixShearY,c=this.target,d=this.bones;for(let p=0,v=d.length;p<v;p++){let w=d[p],C=w.arotation+(c.arotation+this.data.offsetRotation)*i,F=w.ax+(c.ax+this.data.offsetX)*e,V=w.ay+(c.ay+this.data.offsetY)*s,B=w.ascaleX*((c.ascaleX-1+this.data.offsetScaleX)*n+1),z=w.ascaleY*((c.ascaleY-1+this.data.offsetScaleY)*r+1),W=w.ashearY+(c.ashearY+this.data.offsetShearY)*m;w.updateWorldTransformWith(F,V,C,B,z,w.ashearX,W);}}},Ai=class sn{static quadTriangles=[0,1,2,2,3,0];static yDown=false;data;bones;slots;drawOrder;ikConstraints;transformConstraints;pathConstraints;physicsConstraints;_updateCache=new Array;skin=null;color;scaleX=1;_scaleY=1;get scaleY(){return sn.yDown?-this._scaleY:this._scaleY}set scaleY(e){this._scaleY=e;}x=0;y=0;time=0;constructor(e){if(!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(let s=0;s<e.bones.length;s++){let n=e.bones[s],r;if(!n.parent)r=new He(n,this,null);else {let m=this.bones[n.parent.index];r=new He(n,this,m),m.children.push(r);}this.bones.push(r);}this.slots=new Array,this.drawOrder=new Array;for(let s=0;s<e.slots.length;s++){let n=e.slots[s],r=this.bones[n.boneData.index],m=new fr(n,r);this.slots.push(m),this.drawOrder.push(m);}this.ikConstraints=new Array;for(let s=0;s<e.ikConstraints.length;s++){let n=e.ikConstraints[s];this.ikConstraints.push(new vs(n,this));}this.transformConstraints=new Array;for(let s=0;s<e.transformConstraints.length;s++){let n=e.transformConstraints[s];this.transformConstraints.push(new mr(n,this));}this.pathConstraints=new Array;for(let s=0;s<e.pathConstraints.length;s++){let n=e.pathConstraints[s];this.pathConstraints.push(new dr(n,this));}this.physicsConstraints=new Array;for(let s=0;s<e.physicsConstraints.length;s++){let n=e.physicsConstraints[s];this.physicsConstraints.push(new ur(n,this));}this.color=new O(1,1,1,1),this.updateCache();}updateCache(){let e=this._updateCache;e.length=0;let s=this.bones;for(let F=0,V=s.length;F<V;F++){let B=s[F];B.sorted=B.data.skinRequired,B.active=!B.sorted;}if(this.skin){let F=this.skin.bones;for(let V=0,B=this.skin.bones.length;V<B;V++){let z=this.bones[F[V].index];do z.sorted=false,z.active=true,z=z.parent;while(z)}}let n=this.ikConstraints,r=this.transformConstraints,m=this.pathConstraints,c=this.physicsConstraints,d=n.length,p=r.length,v=m.length,w=this.physicsConstraints.length,C=d+p+v+w;t:for(let F=0;F<C;F++){for(let V=0;V<d;V++){let B=n[V];if(B.data.order==F){this.sortIkConstraint(B);continue t}}for(let V=0;V<p;V++){let B=r[V];if(B.data.order==F){this.sortTransformConstraint(B);continue t}}for(let V=0;V<v;V++){let B=m[V];if(B.data.order==F){this.sortPathConstraint(B);continue t}}for(let V=0;V<w;V++){let B=c[V];if(B.data.order==F){this.sortPhysicsConstraint(B);continue t}}}for(let F=0,V=s.length;F<V;F++)this.sortBone(s[F]);}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&D.contains(this.skin.constraints,e.data,true)),!e.active)return;let s=e.target;this.sortBone(s);let n=e.bones,r=n[0];if(this.sortBone(r),n.length==1)this._updateCache.push(e),this.sortReset(r.children);else {let m=n[n.length-1];this.sortBone(m),this._updateCache.push(e),this.sortReset(r.children),m.sorted=true;}}sortPathConstraint(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&D.contains(this.skin.constraints,e.data,true)),!e.active)return;let s=e.target,n=s.data.index,r=s.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(let p=0,v=this.data.skins.length;p<v;p++)this.sortPathConstraintAttachment(this.data.skins[p],n,r);let m=s.getAttachment();m instanceof Yi&&this.sortPathConstraintAttachmentWith(m,r);let c=e.bones,d=c.length;for(let p=0;p<d;p++)this.sortBone(c[p]);this._updateCache.push(e);for(let p=0;p<d;p++)this.sortReset(c[p].children);for(let p=0;p<d;p++)c[p].sorted=true;}sortTransformConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&D.contains(this.skin.constraints,e.data,true)),!e.active)return;this.sortBone(e.target);let s=e.bones,n=s.length;if(e.data.local)for(let r=0;r<n;r++){let m=s[r];this.sortBone(m.parent),this.sortBone(m);}else for(let r=0;r<n;r++)this.sortBone(s[r]);this._updateCache.push(e);for(let r=0;r<n;r++)this.sortReset(s[r].children);for(let r=0;r<n;r++)s[r].sorted=true;}sortPathConstraintAttachment(e,s,n){let r=e.attachments[s];if(r)for(let m in r)this.sortPathConstraintAttachmentWith(r[m],n);}sortPathConstraintAttachmentWith(e,s){if(!(e instanceof Yi))return;let n=e.bones;if(!n)this.sortBone(s);else {let r=this.bones;for(let m=0,c=n.length;m<c;){let d=n[m++];for(d+=m;m<d;)this.sortBone(r[n[m++]]);}}}sortPhysicsConstraint(e){let s=e.bone;e.active=s.active&&(!e.data.skinRequired||this.skin!=null&&D.contains(this.skin.constraints,e.data,true)),e.active&&(this.sortBone(s),this._updateCache.push(e),this.sortReset(s.children),s.sorted=true);}sortBone(e){if(!e||e.sorted)return;let s=e.parent;s&&this.sortBone(s),e.sorted=true,this._updateCache.push(e);}sortReset(e){for(let s=0,n=e.length;s<n;s++){let r=e[s];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=false);}}updateWorldTransform(e){if(e==null)throw new Error("physics is undefined");let s=this.bones;for(let r=0,m=s.length;r<m;r++){let c=s[r];c.ax=c.x,c.ay=c.y,c.arotation=c.rotation,c.ascaleX=c.scaleX,c.ascaleY=c.scaleY,c.ashearX=c.shearX,c.ashearY=c.shearY;}let n=this._updateCache;for(let r=0,m=n.length;r<m;r++)n[r].update(e);}updateWorldTransformWith(e,s){if(!s)throw new Error("parent cannot be null.");let n=this.bones;for(let W=1,Z=n.length;W<Z;W++){let J=n[W];J.ax=J.x,J.ay=J.y,J.arotation=J.rotation,J.ascaleX=J.scaleX,J.ascaleY=J.scaleY,J.ashearX=J.shearX,J.ashearY=J.shearY;}let r=this.getRootBone();if(!r)throw new Error("Root bone must not be null.");let m=s.a,c=s.b,d=s.c,p=s.d;r.worldX=m*this.x+c*this.y+s.worldX,r.worldY=d*this.x+p*this.y+s.worldY;let v=(r.rotation+r.shearX)*I.degRad,w=(r.rotation+90+r.shearY)*I.degRad,C=Math.cos(v)*r.scaleX,F=Math.cos(w)*r.scaleY,V=Math.sin(v)*r.scaleX,B=Math.sin(w)*r.scaleY;r.a=(m*C+c*V)*this.scaleX,r.b=(m*F+c*B)*this.scaleX,r.c=(d*C+p*V)*this.scaleY,r.d=(d*F+p*B)*this.scaleY;let z=this._updateCache;for(let W=0,Z=z.length;W<Z;W++){let J=z[W];J!=r&&J.update(e);}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose();}setBonesToSetupPose(){for(let e of this.bones)e.setToSetupPose();for(let e of this.ikConstraints)e.setToSetupPose();for(let e of this.transformConstraints)e.setToSetupPose();for(let e of this.pathConstraints)e.setToSetupPose();for(let e of this.physicsConstraints)e.setToSetupPose();}setSlotsToSetupPose(){let e=this.slots;D.arrayCopy(e,0,this.drawOrder,0,e.length);for(let s=0,n=e.length;s<n;s++)e[s].setToSetupPose();}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(e){if(!e)throw new Error("boneName cannot be null.");let s=this.bones;for(let n=0,r=s.length;n<r;n++){let m=s[n];if(m.data.name==e)return m}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let s=this.slots;for(let n=0,r=s.length;n<r;n++){let m=s[n];if(m.data.name==e)return m}return null}setSkinByName(e){let s=this.data.findSkin(e);if(!s)throw new Error("Skin not found: "+e);this.setSkin(s);}setSkin(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else {let s=this.slots;for(let n=0,r=s.length;n<r;n++){let m=s[n],c=m.data.attachmentName;if(c){let d=e.getAttachment(n,c);d&&m.setAttachment(d);}}}this.skin=e,this.updateCache();}}getAttachmentByName(e,s){let n=this.data.findSlot(e);if(!n)throw new Error(`Can't find slot with name ${e}`);return this.getAttachment(n.index,s)}getAttachment(e,s){if(!s)throw new Error("attachmentName cannot be null.");if(this.skin){let n=this.skin.getAttachment(e,s);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,s):null}setAttachment(e,s){if(!e)throw new Error("slotName cannot be null.");let n=this.slots;for(let r=0,m=n.length;r<m;r++){let c=n[r];if(c.data.name==e){let d=null;if(s&&(d=this.getAttachment(r,s),!d))throw new Error("Attachment not found: "+s+", for slot: "+e);c.setAttachment(d);return}}throw new Error("Slot not found: "+e)}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(s=>s.data.name==e)??null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(s=>s.data.name==e)??null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(s=>s.data.name==e)??null}findPhysicsConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(s=>s.data.name==e)??null}getBoundsRect(e){let s=new it,n=new it;return this.getBounds(s,n,void 0,e),{x:s.x,y:s.y,width:n.x,height:n.y}}getBounds(e,s,n=new Array(2),r=null){if(!e)throw new Error("offset cannot be null.");if(!s)throw new Error("size cannot be null.");let m=this.drawOrder,c=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,v=Number.NEGATIVE_INFINITY;for(let w=0,C=m.length;w<C;w++){let F=m[w];if(!F.bone.active)continue;let V=0,B=null,z=null,W=F.getAttachment();if(W instanceof Oi)V=8,B=D.setArraySize(n,V,0),W.computeWorldVertices(F,B,0,2),z=sn.quadTriangles;else if(W instanceof Li){let Z=W;V=Z.worldVerticesLength,B=D.setArraySize(n,V,0),Z.computeWorldVertices(F,0,V,B,0,2),z=Z.triangles;}else if(W instanceof ui&&r!=null){r.clipStart(F,W);continue}if(B&&z){r!=null&&r.isClipping()&&(r.clipTriangles(B,z,z.length),B=r.clippedVertices,V=r.clippedVertices.length);for(let Z=0,J=B.length;Z<J;Z+=2){let j=B[Z],_=B[Z+1];c=Math.min(c,j),d=Math.min(d,_),p=Math.max(p,j),v=Math.max(v,_);}}r==null||r.clipEndWithSlot(F);}r==null||r.clipEnd(),e.set(c,d),s.set(p-c,v-d);}update(e){this.time+=e;}physicsTranslate(e,s){let n=this.physicsConstraints;for(let r=0,m=n.length;r<m;r++)n[r].translate(e,s);}physicsRotate(e,s,n){let r=this.physicsConstraints;for(let m=0,c=r.length;m<c;m++)r[m].rotate(e,s,n);}},Si=(i=>(i[i.none=0]="none",i[i.reset=1]="reset",i[i.update=2]="update",i[i.pose=3]="pose",i))(Si||{}),Ms=class extends fi{_bone=null;set bone(i){this._bone=i;}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}x=0;y=0;rotate=0;scaleX=0;shearX=0;limit=0;step=0;inertia=0;strength=0;damping=0;massInverse=0;wind=0;gravity=0;mix=0;inertiaGlobal=false;strengthGlobal=false;dampingGlobal=false;massGlobal=false;windGlobal=false;gravityGlobal=false;mixGlobal=false;constructor(i){super(i,0,false);}},Ee=class{name=null;bones=new Array;slots=new Array;skins=new Array;defaultSkin=null;events=new Array;animations=new Array;ikConstraints=new Array;transformConstraints=new Array;pathConstraints=new Array;physicsConstraints=new Array;x=0;y=0;width=0;height=0;referenceScale=100;version=null;hash=null;fps=0;imagesPath=null;audioPath=null;findBone(i){if(!i)throw new Error("boneName cannot be null.");let e=this.bones;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findSlot(i){if(!i)throw new Error("slotName cannot be null.");let e=this.slots;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findSkin(i){if(!i)throw new Error("skinName cannot be null.");let e=this.skins;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findEvent(i){if(!i)throw new Error("eventDataName cannot be null.");let e=this.events;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findAnimation(i){if(!i)throw new Error("animationName cannot be null.");let e=this.animations;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findIkConstraint(i){if(!i)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findTransformConstraint(i){if(!i)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findPathConstraint(i){if(!i)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}findPhysicsConstraint(i){if(!i)throw new Error("constraintName cannot be null.");let e=this.physicsConstraints;for(let s=0,n=e.length;s<n;s++){let r=e[s];if(r.name==i)return r}return null}},zs=class{constructor(i=0,e,s){this.slotIndex=i,this.name=e,this.attachment=s;}},ys=class{name;attachments=new Array;bones=Array();constraints=new Array;color=new O(.99607843,.61960787,.30980393,1);constructor(i){if(!i)throw new Error("name cannot be null.");this.name=i;}setAttachment(i,e,s){if(!s)throw new Error("attachment cannot be null.");let n=this.attachments;i>=n.length&&(n.length=i+1),n[i]||(n[i]={}),n[i][e]=s;}addSkin(i){for(let n=0;n<i.bones.length;n++){let r=i.bones[n],m=false;for(let c=0;c<this.bones.length;c++)if(this.bones[c]==r){m=true;break}m||this.bones.push(r);}for(let n=0;n<i.constraints.length;n++){let r=i.constraints[n],m=false;for(let c=0;c<this.constraints.length;c++)if(this.constraints[c]==r){m=true;break}m||this.constraints.push(r);}let e=i.getAttachments();for(let n=0;n<e.length;n++){var s=e[n];this.setAttachment(s.slotIndex,s.name,s.attachment);}}copySkin(i){for(let n=0;n<i.bones.length;n++){let r=i.bones[n],m=false;for(let c=0;c<this.bones.length;c++)if(this.bones[c]==r){m=true;break}m||this.bones.push(r);}for(let n=0;n<i.constraints.length;n++){let r=i.constraints[n],m=false;for(let c=0;c<this.constraints.length;c++)if(this.constraints[c]==r){m=true;break}m||this.constraints.push(r);}let e=i.getAttachments();for(let n=0;n<e.length;n++){var s=e[n];s.attachment&&(s.attachment instanceof Li?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)));}}getAttachment(i,e){let s=this.attachments[i];return s?s[e]:null}removeAttachment(i,e){let s=this.attachments[i];s&&delete s[e];}getAttachments(){let i=new Array;for(var e=0;e<this.attachments.length;e++){let s=this.attachments[e];if(s)for(let n in s){let r=s[n];r&&i.push(new zs(e,n,r));}}return i}getAttachmentsForSlot(i,e){let s=this.attachments[i];if(s)for(let n in s){let r=s[n];r&&e.push(new zs(i,n,r));}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0;}attachAll(i,e){let s=0;for(let n=0;n<i.slots.length;n++){let r=i.slots[n],m=r.getAttachment();if(m&&s<e.attachments.length){let c=e.attachments[s];for(let d in c){let p=c[d];if(m==p){let v=this.getAttachment(s,d);v&&r.setAttachment(v);break}}}s++;}}},Zs=class{index=0;name;boneData;color=new O(1,1,1,1);darkColor=null;attachmentName=null;blendMode=0;visible=true;constructor(i,e,s){if(i<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=i,this.name=e,this.boneData=s;}},js=(i=>(i[i.Normal=0]="Normal",i[i.Additive=1]="Additive",i[i.Multiply=2]="Multiply",i[i.Screen=3]="Screen",i))(js||{}),qs=class extends fi{bones=new Array;_target=null;set target(i){this._target=i;}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;offsetRotation=0;offsetX=0;offsetY=0;offsetScaleX=0;offsetScaleY=0;offsetShearY=0;relative=false;local=false;constructor(i){super(i,0,false);}},Xr=class{scale=1;attachmentLoader;linkedMeshes=new Array;constructor(i){this.attachmentLoader=i;}readSkeletonData(i){let e=this.scale,s=new Ee;s.name="";let n=new gr(i),r=n.readInt32(),m=n.readInt32();s.hash=m==0&&r==0?null:m.toString(16)+r.toString(16),s.version=n.readString(),s.x=n.readFloat(),s.y=n.readFloat(),s.width=n.readFloat(),s.height=n.readFloat(),s.referenceScale=n.readFloat()*e;let c=n.readBoolean();c&&(s.fps=n.readFloat(),s.imagesPath=n.readString(),s.audioPath=n.readString());let d=0;d=n.readInt(true);for(let v=0;v<d;v++){let w=n.readString();if(!w)throw new Error("String in string table must not be null.");n.strings.push(w);}d=n.readInt(true);for(let v=0;v<d;v++){let w=n.readString();if(!w)throw new Error("Bone name must not be null.");let C=v==0?null:s.bones[n.readInt(true)],F=new $i(v,w,C);F.rotation=n.readFloat(),F.x=n.readFloat()*e,F.y=n.readFloat()*e,F.scaleX=n.readFloat(),F.scaleY=n.readFloat(),F.shearX=n.readFloat(),F.shearY=n.readFloat(),F.length=n.readFloat()*e,F.inherit=n.readByte(),F.skinRequired=n.readBoolean(),c&&(O.rgba8888ToColor(F.color,n.readInt32()),F.icon=n.readString()??void 0,F.visible=n.readBoolean()),s.bones.push(F);}d=n.readInt(true);for(let v=0;v<d;v++){let w=n.readString();if(!w)throw new Error("Slot name must not be null.");let C=s.bones[n.readInt(true)],F=new Zs(v,w,C);O.rgba8888ToColor(F.color,n.readInt32());let V=n.readInt32();V!=-1&&O.rgb888ToColor(F.darkColor=new O,V),F.attachmentName=n.readStringRef(),F.blendMode=n.readInt(true),c&&(F.visible=n.readBoolean()),s.slots.push(F);}d=n.readInt(true);for(let v=0,w;v<d;v++){let C=n.readString();if(!C)throw new Error("IK constraint data name must not be null.");let F=new ts(C);F.order=n.readInt(true),w=n.readInt(true);for(let B=0;B<w;B++)F.bones.push(s.bones[n.readInt(true)]);F.target=s.bones[n.readInt(true)];let V=n.readByte();F.skinRequired=(V&1)!=0,F.bendDirection=(V&2)!=0?1:-1,F.compress=(V&4)!=0,F.stretch=(V&8)!=0,F.uniform=(V&16)!=0,(V&32)!=0&&(F.mix=(V&64)!=0?n.readFloat():1),(V&128)!=0&&(F.softness=n.readFloat()*e),s.ikConstraints.push(F);}d=n.readInt(true);for(let v=0,w;v<d;v++){let C=n.readString();if(!C)throw new Error("Transform constraint data name must not be null.");let F=new qs(C);F.order=n.readInt(true),w=n.readInt(true);for(let B=0;B<w;B++)F.bones.push(s.bones[n.readInt(true)]);F.target=s.bones[n.readInt(true)];let V=n.readByte();F.skinRequired=(V&1)!=0,F.local=(V&2)!=0,F.relative=(V&4)!=0,(V&8)!=0&&(F.offsetRotation=n.readFloat()),(V&16)!=0&&(F.offsetX=n.readFloat()*e),(V&32)!=0&&(F.offsetY=n.readFloat()*e),(V&64)!=0&&(F.offsetScaleX=n.readFloat()),(V&128)!=0&&(F.offsetScaleY=n.readFloat()),V=n.readByte(),(V&1)!=0&&(F.offsetShearY=n.readFloat()),(V&2)!=0&&(F.mixRotate=n.readFloat()),(V&4)!=0&&(F.mixX=n.readFloat()),(V&8)!=0&&(F.mixY=n.readFloat()),(V&16)!=0&&(F.mixScaleX=n.readFloat()),(V&32)!=0&&(F.mixScaleY=n.readFloat()),(V&64)!=0&&(F.mixShearY=n.readFloat()),s.transformConstraints.push(F);}d=n.readInt(true);for(let v=0,w;v<d;v++){let C=n.readString();if(!C)throw new Error("Path constraint data name must not be null.");let F=new Ni(C);F.order=n.readInt(true),F.skinRequired=n.readBoolean(),w=n.readInt(true);for(let B=0;B<w;B++)F.bones.push(s.bones[n.readInt(true)]);F.target=s.slots[n.readInt(true)];let V=n.readByte();F.positionMode=V&1,F.spacingMode=V>>1&3,F.rotateMode=V>>3&3,(V&128)!=0&&(F.offsetRotation=n.readFloat()),F.position=n.readFloat(),F.positionMode==0&&(F.position*=e),F.spacing=n.readFloat(),(F.spacingMode==0||F.spacingMode==1)&&(F.spacing*=e),F.mixRotate=n.readFloat(),F.mixX=n.readFloat(),F.mixY=n.readFloat(),s.pathConstraints.push(F);}d=n.readInt(true);for(let v=0,w;v<d;v++){let C=n.readString();if(!C)throw new Error("Physics constraint data name must not be null.");let F=new Ms(C);F.order=n.readInt(true),F.bone=s.bones[n.readInt(true)];let V=n.readByte();F.skinRequired=(V&1)!=0,(V&2)!=0&&(F.x=n.readFloat()),(V&4)!=0&&(F.y=n.readFloat()),(V&8)!=0&&(F.rotate=n.readFloat()),(V&16)!=0&&(F.scaleX=n.readFloat()),(V&32)!=0&&(F.shearX=n.readFloat()),F.limit=((V&64)!=0?n.readFloat():5e3)*e,F.step=1/n.readUnsignedByte(),F.inertia=n.readFloat(),F.strength=n.readFloat(),F.damping=n.readFloat(),F.massInverse=(V&128)!=0?n.readFloat():1,F.wind=n.readFloat(),F.gravity=n.readFloat(),V=n.readByte(),(V&1)!=0&&(F.inertiaGlobal=true),(V&2)!=0&&(F.strengthGlobal=true),(V&4)!=0&&(F.dampingGlobal=true),(V&8)!=0&&(F.massGlobal=true),(V&16)!=0&&(F.windGlobal=true),(V&32)!=0&&(F.gravityGlobal=true),(V&64)!=0&&(F.mixGlobal=true),F.mix=(V&128)!=0?n.readFloat():1,s.physicsConstraints.push(F);}let p=this.readSkin(n,s,true,c);p&&(s.defaultSkin=p,s.skins.push(p));{let v=s.skins.length;for(D.setArraySize(s.skins,d=v+n.readInt(true));v<d;v++){let w=this.readSkin(n,s,false,c);if(!w)throw new Error("readSkin() should not have returned null.");s.skins[v]=w;}}d=this.linkedMeshes.length;for(let v=0;v<d;v++){let w=this.linkedMeshes[v],C=s.skins[w.skinIndex];if(!w.parent)throw new Error("Linked mesh parent must not be null");let F=C.getAttachment(w.slotIndex,w.parent);if(!F)throw new Error(`Parent mesh not found: ${w.parent}`);w.mesh.timelineAttachment=w.inheritTimeline?F:w.mesh,w.mesh.setParentMesh(F),w.mesh.region!=null&&w.mesh.updateRegion();}this.linkedMeshes.length=0,d=n.readInt(true);for(let v=0;v<d;v++){let w=n.readString();if(!w)throw new Error("Event data name must not be null");let C=new Gs(w);C.intValue=n.readInt(false),C.floatValue=n.readFloat(),C.stringValue=n.readString(),C.audioPath=n.readString(),C.audioPath&&(C.volume=n.readFloat(),C.balance=n.readFloat()),s.events.push(C);}d=n.readInt(true);for(let v=0;v<d;v++){let w=n.readString();if(!w)throw new Error("Animatio name must not be null.");s.animations.push(this.readAnimation(n,w,s));}return s}readSkin(i,e,s,n){let r=null,m=0;if(s){if(m=i.readInt(true),m==0)return null;r=new ys("default");}else {let c=i.readString();if(!c)throw new Error("Skin name must not be null.");r=new ys(c),n&&O.rgba8888ToColor(r.color,i.readInt32()),r.bones.length=i.readInt(true);for(let d=0,p=r.bones.length;d<p;d++)r.bones[d]=e.bones[i.readInt(true)];for(let d=0,p=i.readInt(true);d<p;d++)r.constraints.push(e.ikConstraints[i.readInt(true)]);for(let d=0,p=i.readInt(true);d<p;d++)r.constraints.push(e.transformConstraints[i.readInt(true)]);for(let d=0,p=i.readInt(true);d<p;d++)r.constraints.push(e.pathConstraints[i.readInt(true)]);for(let d=0,p=i.readInt(true);d<p;d++)r.constraints.push(e.physicsConstraints[i.readInt(true)]);m=i.readInt(true);}for(let c=0;c<m;c++){let d=i.readInt(true);for(let p=0,v=i.readInt(true);p<v;p++){let w=i.readStringRef();if(!w)throw new Error("Attachment name must not be null");let C=this.readAttachment(i,e,r,d,w,n);C&&r.setAttachment(d,w,C);}}return r}readAttachment(i,e,s,n,r,m){let c=this.scale,d=i.readByte(),p=(d&8)!=0?i.readStringRef():r;if(!p)throw new Error("Attachment name must not be null");switch(d&7){case 0:{let v=(d&16)!=0?i.readStringRef():null,w=(d&32)!=0?i.readInt32():4294967295,C=(d&64)!=0?this.readSequence(i):null,F=(d&128)!=0?i.readFloat():0,V=i.readFloat(),B=i.readFloat(),z=i.readFloat(),W=i.readFloat(),Z=i.readFloat(),J=i.readFloat();v||(v=p);let j=this.attachmentLoader.newRegionAttachment(s,p,v,C);return j?(j.path=v,j.x=V*c,j.y=B*c,j.scaleX=z,j.scaleY=W,j.rotation=F,j.width=Z*c,j.height=J*c,O.rgba8888ToColor(j.color,w),j.sequence=C,C==null&&j.updateRegion(),j):null}case 1:{let v=this.readVertices(i,(d&16)!=0),w=m?i.readInt32():0,C=this.attachmentLoader.newBoundingBoxAttachment(s,p);return C?(C.worldVerticesLength=v.length,C.vertices=v.vertices,C.bones=v.bones,m&&O.rgba8888ToColor(C.color,w),C):null}case 2:{let v=(d&16)!=0?i.readStringRef():p,w=(d&32)!=0?i.readInt32():4294967295,C=(d&64)!=0?this.readSequence(i):null,F=i.readInt(true),V=this.readVertices(i,(d&128)!=0),B=this.readFloatArray(i,V.length,1),z=this.readShortArray(i,(V.length-F-2)*3),W=[],Z=0,J=0;m&&(W=this.readShortArray(i,i.readInt(true)),Z=i.readFloat(),J=i.readFloat()),v||(v=p);let j=this.attachmentLoader.newMeshAttachment(s,p,v,C);return j?(j.path=v,O.rgba8888ToColor(j.color,w),j.bones=V.bones,j.vertices=V.vertices,j.worldVerticesLength=V.length,j.triangles=z,j.regionUVs=B,C==null&&j.updateRegion(),j.hullLength=F<<1,j.sequence=C,m&&(j.edges=W,j.width=Z*c,j.height=J*c),j):null}case 3:{let v=(d&16)!=0?i.readStringRef():p;if(v==null)throw new Error("Path of linked mesh must not be null");let w=(d&32)!=0?i.readInt32():4294967295,C=(d&64)!=0?this.readSequence(i):null,F=(d&128)!=0,V=i.readInt(true),B=i.readStringRef(),z=0,W=0;m&&(z=i.readFloat(),W=i.readFloat());let Z=this.attachmentLoader.newMeshAttachment(s,p,v,C);return Z?(Z.path=v,O.rgba8888ToColor(Z.color,w),Z.sequence=C,m&&(Z.width=z*c,Z.height=W*c),this.linkedMeshes.push(new Dr(Z,V,n,B,F)),Z):null}case 4:{let v=(d&16)!=0,w=(d&32)!=0,C=this.readVertices(i,(d&64)!=0),F=D.newArray(C.length/6,0);for(let z=0,W=F.length;z<W;z++)F[z]=i.readFloat()*c;let V=m?i.readInt32():0,B=this.attachmentLoader.newPathAttachment(s,p);return B?(B.closed=v,B.constantSpeed=w,B.worldVerticesLength=C.length,B.vertices=C.vertices,B.bones=C.bones,B.lengths=F,m&&O.rgba8888ToColor(B.color,V),B):null}case 5:{let v=i.readFloat(),w=i.readFloat(),C=i.readFloat(),F=m?i.readInt32():0,V=this.attachmentLoader.newPointAttachment(s,p);return V?(V.x=w*c,V.y=C*c,V.rotation=v,m&&O.rgba8888ToColor(V.color,F),V):null}case 6:{let v=i.readInt(true),w=this.readVertices(i,(d&16)!=0),C=m?i.readInt32():0,F=this.attachmentLoader.newClippingAttachment(s,p);return F?(F.endSlot=e.slots[v],F.worldVerticesLength=w.length,F.vertices=w.vertices,F.bones=w.bones,m&&O.rgba8888ToColor(F.color,C),F):null}}return null}readSequence(i){let e=new G(i.readInt(true));return e.start=i.readInt(true),e.digits=i.readInt(true),e.setupIndex=i.readInt(true),e}readVertices(i,e){let s=this.scale,n=i.readInt(true),r=new Or;if(r.length=n<<1,!e)return r.vertices=this.readFloatArray(i,r.length,s),r;let m=new Array,c=new Array;for(let d=0;d<n;d++){let p=i.readInt(true);c.push(p);for(let v=0;v<p;v++)c.push(i.readInt(true)),m.push(i.readFloat()*s),m.push(i.readFloat()*s),m.push(i.readFloat());}return r.vertices=D.toFloatArray(m),r.bones=c,r}readFloatArray(i,e,s){let n=new Array(e);if(s==1)for(let r=0;r<e;r++)n[r]=i.readFloat();else for(let r=0;r<e;r++)n[r]=i.readFloat()*s;return n}readShortArray(i,e){let s=new Array(e);for(let n=0;n<e;n++)s[n]=i.readInt(true);return s}readAnimation(i,e,s){i.readInt(true);let n=new Array,r=this.scale;for(let p=0,v=i.readInt(true);p<v;p++){let w=i.readInt(true);for(let C=0,F=i.readInt(true);C<F;C++){let V=i.readByte(),B=i.readInt(true),z=B-1;switch(V){case ws:{let W=new Ye(B,w);for(let Z=0;Z<B;Z++)W.setFrame(Z,i.readFloat(),i.readStringRef());n.push(W);break}case qr:{let W=i.readInt(true),Z=new ie(B,W,w),J=i.readFloat(),j=i.readUnsignedByte()/255,_=i.readUnsignedByte()/255,tt=i.readUnsignedByte()/255,nt=i.readUnsignedByte()/255;for(let xt=0,gt=0;Z.setFrame(xt,J,j,_,tt,nt),xt!=z;xt++){let pt=i.readFloat(),Ct=i.readUnsignedByte()/255,Yt=i.readUnsignedByte()/255,Xt=i.readUnsignedByte()/255,Ut=i.readUnsignedByte()/255;switch(i.readByte()){case pi:Z.setStepped(xt);break;case Je:Ce(i,Z,gt++,xt,0,J,pt,j,Ct,1),Ce(i,Z,gt++,xt,1,J,pt,_,Yt,1),Ce(i,Z,gt++,xt,2,J,pt,tt,Xt,1),Ce(i,Z,gt++,xt,3,J,pt,nt,Ut,1);}J=pt,j=Ct,_=Yt,tt=Xt,nt=Ut;}n.push(Z);break}case Hr:{let W=i.readInt(true),Z=new Kt(B,W,w),J=i.readFloat(),j=i.readUnsignedByte()/255,_=i.readUnsignedByte()/255,tt=i.readUnsignedByte()/255;for(let nt=0,xt=0;Z.setFrame(nt,J,j,_,tt),nt!=z;nt++){let gt=i.readFloat(),pt=i.readUnsignedByte()/255,Ct=i.readUnsignedByte()/255,Yt=i.readUnsignedByte()/255;switch(i.readByte()){case pi:Z.setStepped(nt);break;case Je:Ce(i,Z,xt++,nt,0,J,gt,j,pt,1),Ce(i,Z,xt++,nt,1,J,gt,_,Ct,1),Ce(i,Z,xt++,nt,2,J,gt,tt,Yt,1);}J=gt,j=pt,_=Ct,tt=Yt;}n.push(Z);break}case bi:{let W=i.readInt(true),Z=new Le(B,W,w),J=i.readFloat(),j=i.readUnsignedByte()/255,_=i.readUnsignedByte()/255,tt=i.readUnsignedByte()/255,nt=i.readUnsignedByte()/255,xt=i.readUnsignedByte()/255,gt=i.readUnsignedByte()/255,pt=i.readUnsignedByte()/255;for(let Ct=0,Yt=0;Z.setFrame(Ct,J,j,_,tt,nt,xt,gt,pt),Ct!=z;Ct++){let Xt=i.readFloat(),Ut=i.readUnsignedByte()/255,bt=i.readUnsignedByte()/255,Et=i.readUnsignedByte()/255,Ht=i.readUnsignedByte()/255,Se=i.readUnsignedByte()/255,xe=i.readUnsignedByte()/255,be=i.readUnsignedByte()/255;switch(i.readByte()){case pi:Z.setStepped(Ct);break;case Je:Ce(i,Z,Yt++,Ct,0,J,Xt,j,Ut,1),Ce(i,Z,Yt++,Ct,1,J,Xt,_,bt,1),Ce(i,Z,Yt++,Ct,2,J,Xt,tt,Et,1),Ce(i,Z,Yt++,Ct,3,J,Xt,nt,Ht,1),Ce(i,Z,Yt++,Ct,4,J,Xt,xt,Se,1),Ce(i,Z,Yt++,Ct,5,J,Xt,gt,xe,1),Ce(i,Z,Yt++,Ct,6,J,Xt,pt,be,1);}J=Xt,j=Ut,_=bt,tt=Et,nt=Ht,xt=Se,gt=xe,pt=be;}n.push(Z);break}case Js:{let W=i.readInt(true),Z=new ye(B,W,w),J=i.readFloat(),j=i.readUnsignedByte()/255,_=i.readUnsignedByte()/255,tt=i.readUnsignedByte()/255,nt=i.readUnsignedByte()/255,xt=i.readUnsignedByte()/255,gt=i.readUnsignedByte()/255;for(let pt=0,Ct=0;Z.setFrame(pt,J,j,_,tt,nt,xt,gt),pt!=z;pt++){let Yt=i.readFloat(),Xt=i.readUnsignedByte()/255,Ut=i.readUnsignedByte()/255,bt=i.readUnsignedByte()/255,Et=i.readUnsignedByte()/255,Ht=i.readUnsignedByte()/255,Se=i.readUnsignedByte()/255;switch(i.readByte()){case pi:Z.setStepped(pt);break;case Je:Ce(i,Z,Ct++,pt,0,J,Yt,j,Xt,1),Ce(i,Z,Ct++,pt,1,J,Yt,_,Ut,1),Ce(i,Z,Ct++,pt,2,J,Yt,tt,bt,1),Ce(i,Z,Ct++,pt,3,J,Yt,nt,Et,1),Ce(i,Z,Ct++,pt,4,J,Yt,xt,Ht,1),Ce(i,Z,Ct++,pt,5,J,Yt,gt,Se,1);}J=Yt,j=Xt,_=Ut,tt=bt,nt=Et,xt=Ht,gt=Se;}n.push(Z);break}case ke:{let W=new Ae(B,i.readInt(true),w),Z=i.readFloat(),J=i.readUnsignedByte()/255;for(let j=0,_=0;W.setFrame(j,Z,J),j!=z;j++){let tt=i.readFloat(),nt=i.readUnsignedByte()/255;switch(i.readByte()){case pi:W.setStepped(j);break;case Je:Ce(i,W,_++,j,0,Z,tt,J,nt,1);}Z=tt,J=nt;}n.push(W);}}}}for(let p=0,v=i.readInt(true);p<v;p++){let w=i.readInt(true);for(let C=0,F=i.readInt(true);C<F;C++){let V=i.readByte(),B=i.readInt(true);if(V==li){let W=new _t(B,w);for(let Z=0;Z<B;Z++)W.setFrame(Z,i.readFloat(),i.readByte());n.push(W);continue}let z=i.readInt(true);switch(V){case Nr:n.push(ai(i,new Mt(B,z,w),1));break;case Ur:n.push(Hs(i,new yt(B,z,w),r));break;case Wr:n.push(ai(i,new Bt(B,z,w),r));break;case Gr:n.push(ai(i,new Dt(B,z,w),r));break;case zr:n.push(Hs(i,new Lt(B,z,w),1));break;case Zr:n.push(ai(i,new Vt(B,z,w),1));break;case jr:n.push(ai(i,new Gt(B,z,w),1));break;case mi:n.push(Hs(i,new Ft(B,z,w),1));break;case gi:n.push(ai(i,new Tt(B,z,w),1));break;case pr:n.push(ai(i,new At(B,z,w),1));}}}for(let p=0,v=i.readInt(true);p<v;p++){let w=i.readInt(true),C=i.readInt(true),F=C-1,V=new Ue(C,i.readInt(true),w),B=i.readByte(),z=i.readFloat(),W=(B&1)!=0?(B&2)!=0?i.readFloat():1:0,Z=(B&4)!=0?i.readFloat()*r:0;for(let J=0,j=0;V.setFrame(J,z,W,Z,(B&8)!=0?1:-1,(B&16)!=0,(B&32)!=0),J!=F;J++){B=i.readByte();let _=i.readFloat(),tt=(B&1)!=0?(B&2)!=0?i.readFloat():1:0,nt=(B&4)!=0?i.readFloat()*r:0;(B&64)!=0?V.setStepped(J):(B&128)!=0&&(Ce(i,V,j++,J,0,z,_,W,tt,1),Ce(i,V,j++,J,1,z,_,Z,nt,r)),z=_,W=tt,Z=nt;}n.push(V);}for(let p=0,v=i.readInt(true);p<v;p++){let w=i.readInt(true),C=i.readInt(true),F=C-1,V=new Qe(C,i.readInt(true),w),B=i.readFloat(),z=i.readFloat(),W=i.readFloat(),Z=i.readFloat(),J=i.readFloat(),j=i.readFloat(),_=i.readFloat();for(let tt=0,nt=0;V.setFrame(tt,B,z,W,Z,J,j,_),tt!=F;tt++){let xt=i.readFloat(),gt=i.readFloat(),pt=i.readFloat(),Ct=i.readFloat(),Yt=i.readFloat(),Xt=i.readFloat(),Ut=i.readFloat();switch(i.readByte()){case pi:V.setStepped(tt);break;case Je:Ce(i,V,nt++,tt,0,B,xt,z,gt,1),Ce(i,V,nt++,tt,1,B,xt,W,pt,1),Ce(i,V,nt++,tt,2,B,xt,Z,Ct,1),Ce(i,V,nt++,tt,3,B,xt,J,Yt,1),Ce(i,V,nt++,tt,4,B,xt,j,Xt,1),Ce(i,V,nt++,tt,5,B,xt,_,Ut,1);}B=xt,z=gt,W=pt,Z=Ct,J=Yt,j=Xt,_=Ut;}n.push(V);}for(let p=0,v=i.readInt(true);p<v;p++){let w=i.readInt(true),C=s.pathConstraints[w];for(let F=0,V=i.readInt(true);F<V;F++){let B=i.readByte(),z=i.readInt(true),W=i.readInt(true);switch(B){case xr:n.push(ai(i,new We(z,W,w),C.positionMode==0?r:1));break;case vr:n.push(ai(i,new Ze(z,W,w),C.spacingMode==0||C.spacingMode==1?r:1));break;case oi:let Z=new Be(z,W,w),J=i.readFloat(),j=i.readFloat(),_=i.readFloat(),tt=i.readFloat();for(let nt=0,xt=0,gt=Z.getFrameCount()-1;Z.setFrame(nt,J,j,_,tt),nt!=gt;nt++){let pt=i.readFloat(),Ct=i.readFloat(),Yt=i.readFloat(),Xt=i.readFloat();switch(i.readByte()){case pi:Z.setStepped(nt);break;case Je:Ce(i,Z,xt++,nt,0,J,pt,j,Ct,1),Ce(i,Z,xt++,nt,1,J,pt,_,Yt,1),Ce(i,Z,xt++,nt,2,J,pt,tt,Xt,1);}J=pt,j=Ct,_=Yt,tt=Xt;}n.push(Z);}}}for(let p=0,v=i.readInt(true);p<v;p++){let w=i.readInt(true)-1;for(let C=0,F=i.readInt(true);C<F;C++){let V=i.readByte(),B=i.readInt(true);if(V==ss){let W=new Hi(B,w);for(let Z=0;Z<B;Z++)W.setFrame(Z,i.readFloat());n.push(W);continue}let z=i.readInt(true);switch(V){case Ui:n.push(ai(i,new De(B,z,w),1));break;case _r:n.push(ai(i,new vi(B,z,w),1));break;case Mr:n.push(ai(i,new ri(B,z,w),1));break;case As:n.push(ai(i,new hi(B,z,w),1));break;case Qr:n.push(ai(i,new ti(B,z,w),1));break;case Ss:n.push(ai(i,new ci(B,z,w),1));break;case _s:n.push(ai(i,new Mi(B,z,w),1));}}}for(let p=0,v=i.readInt(true);p<v;p++){let w=s.skins[i.readInt(true)];for(let C=0,F=i.readInt(true);C<F;C++){let V=i.readInt(true);for(let B=0,z=i.readInt(true);B<z;B++){let W=i.readStringRef();if(!W)throw new Error("attachmentName must not be null.");let Z=w.getAttachment(V,W),J=i.readByte(),j=i.readInt(true),_=j-1;switch(J){case Pt:{let tt=Z,nt=tt.bones,xt=tt.vertices,gt=nt?xt.length/3*2:xt.length,pt=i.readInt(true),Ct=new Xe(j,pt,V,tt),Yt=i.readFloat();for(let Xt=0,Ut=0;;Xt++){let bt,Et=i.readInt(true);if(Et==0)bt=nt?D.newFloatArray(gt):xt;else {bt=D.newFloatArray(gt);let Se=i.readInt(true);if(Et+=Se,r==1)for(let xe=Se;xe<Et;xe++)bt[xe]=i.readFloat();else for(let xe=Se;xe<Et;xe++)bt[xe]=i.readFloat()*r;if(!nt)for(let xe=0,be=bt.length;xe<be;xe++)bt[xe]+=xt[xe];}if(Ct.setFrame(Xt,Yt,bt),Xt==_)break;let Ht=i.readFloat();switch(i.readByte()){case pi:Ct.setStepped(Xt);break;case Je:Ce(i,Ct,Ut++,Xt,0,Yt,Ht,0,1,1);}Yt=Ht;}n.push(Ct);break}case Jr:{let tt=new ds(j,V,Z);for(let nt=0;nt<j;nt++){let xt=i.readFloat(),gt=i.readInt32();tt.setFrame(nt,xt,dt[gt&15],gt>>4,i.readFloat());}n.push(tt);break}}}}}let m=i.readInt(true);if(m>0){let p=new ze(m),v=s.slots.length;for(let w=0;w<m;w++){let C=i.readFloat(),F=i.readInt(true),V=D.newArray(v,0);for(let Z=v-1;Z>=0;Z--)V[Z]=-1;let B=D.newArray(v-F,0),z=0,W=0;for(let Z=0;Z<F;Z++){let J=i.readInt(true);for(;z!=J;)B[W++]=z++;V[z+i.readInt(true)]=z++;}for(;z<v;)B[W++]=z++;for(let Z=v-1;Z>=0;Z--)V[Z]==-1&&(V[Z]=B[--W]);p.setFrame(w,C,V);}n.push(p);}let c=i.readInt(true);if(c>0){let p=new qe(c);for(let v=0;v<c;v++){let w=i.readFloat(),C=s.events[i.readInt(true)],F=new xs(w,C);F.intValue=i.readInt(false),F.floatValue=i.readFloat(),F.stringValue=i.readString(),F.stringValue==null&&(F.stringValue=C.stringValue),F.data.audioPath&&(F.volume=i.readFloat(),F.balance=i.readFloat()),p.setFrame(v,F);}n.push(p);}let d=0;for(let p=0,v=n.length;p<v;p++)d=Math.max(d,n[p].getDuration());return new rt(e,n,d)}},gr=class{constructor(i,e=new Array,s=0,n=new DataView(i instanceof ArrayBuffer?i:i.buffer)){this.strings=e,this.index=s,this.buffer=n;}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let i=this.buffer.getInt16(this.index);return this.index+=2,i}readInt32(){let i=this.buffer.getInt32(this.index);return this.index+=4,i}readInt(i){let e=this.readByte(),s=e&127;return (e&128)!=0&&(e=this.readByte(),s|=(e&127)<<7,(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<14,(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<21,(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<28)))),i?s:s>>>1^-(s&1)}readStringRef(){let i=this.readInt(true);return i==0?null:this.strings[i-1]}readString(){let i=this.readInt(true);switch(i){case 0:return null;case 1:return ""}i--;let e="";for(let n=0;n<i;){let r=this.readUnsignedByte();switch(r>>4){case 12:case 13:e+=String.fromCharCode((r&31)<<6|this.readByte()&63),n+=2;break;case 14:e+=String.fromCharCode((r&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),n+=3;break;default:e+=String.fromCharCode(r),n++;}}return e}readFloat(){let i=this.buffer.getFloat32(this.index);return this.index+=4,i}readBoolean(){return this.readByte()!=0}},Dr=class{parent;skinIndex;slotIndex;mesh;inheritTimeline;constructor(i,e,s,n,r){this.mesh=i,this.skinIndex=e,this.slotIndex=s,this.parent=n,this.inheritTimeline=r;}},Or=class{constructor(i=null,e=null,s=0){this.bones=i,this.vertices=e,this.length=s;}};function ai(i,e,s){let n=i.readFloat(),r=i.readFloat()*s;for(let m=0,c=0,d=e.getFrameCount()-1;e.setFrame(m,n,r),m!=d;m++){let p=i.readFloat(),v=i.readFloat()*s;switch(i.readByte()){case pi:e.setStepped(m);break;case Je:Ce(i,e,c++,m,0,n,p,r,v,s);}n=p,r=v;}return e}function Hs(i,e,s){let n=i.readFloat(),r=i.readFloat()*s,m=i.readFloat()*s;for(let c=0,d=0,p=e.getFrameCount()-1;e.setFrame(c,n,r,m),c!=p;c++){let v=i.readFloat(),w=i.readFloat()*s,C=i.readFloat()*s;switch(i.readByte()){case pi:e.setStepped(c);break;case Je:Ce(i,e,d++,c,0,n,v,r,w,s),Ce(i,e,d++,c,1,n,v,m,C,s);}n=v,r=w,m=C;}return e}function Ce(i,e,s,n,r,m,c,d,p,v){e.setBezier(s,n,r,m,d,i.readFloat(),i.readFloat()*v,i.readFloat(),i.readFloat()*v,c,p);}var Nr=0,Ur=1,Wr=2,Gr=3,zr=4,Zr=5,jr=6,mi=7,gi=8,pr=9,li=10,ws=0,qr=1,Hr=2,bi=3,Js=4,ke=5,Pt=0,Jr=1,xr=0,vr=1,oi=2,Ui=0,_r=1,Mr=2,As=4,Qr=5,Ss=6,_s=7,ss=8,pi=1,Je=2,ae=class{minX=0;minY=0;maxX=0;maxY=0;boundingBoxes=new Array;polygons=new Array;polygonPool=new $(()=>D.newFloatArray(16));update(i,e){if(!i)throw new Error("skeleton cannot be null.");let s=this.boundingBoxes,n=this.polygons,r=this.polygonPool,m=i.slots,c=m.length;s.length=0,r.freeAll(n),n.length=0;for(let d=0;d<c;d++){let p=m[d];if(!p.bone.active)continue;let v=p.getAttachment();if(v instanceof yi){let w=v;s.push(w);let C=r.obtain();C.length!=w.worldVerticesLength&&(C=D.newFloatArray(w.worldVerticesLength)),n.push(C),w.computeWorldVertices(p,0,w.worldVerticesLength,C,0,2);}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY);}aabbCompute(){let i=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons;for(let m=0,c=r.length;m<c;m++){let d=r[m],p=d;for(let v=0,w=d.length;v<w;v+=2){let C=p[v],F=p[v+1];i=Math.min(i,C),e=Math.min(e,F),s=Math.max(s,C),n=Math.max(n,F);}}this.minX=i,this.minY=e,this.maxX=s,this.maxY=n;}aabbContainsPoint(i,e){return i>=this.minX&&i<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(i,e,s,n){let r=this.minX,m=this.minY,c=this.maxX,d=this.maxY;if(i<=r&&s<=r||e<=m&&n<=m||i>=c&&s>=c||e>=d&&n>=d)return  false;let p=(n-e)/(s-i),v=p*(r-i)+e;if(v>m&&v<d||(v=p*(c-i)+e,v>m&&v<d))return  true;let w=(m-e)/p+i;return w>r&&w<c||(w=(d-e)/p+i,w>r&&w<c)}aabbIntersectsSkeleton(i){return this.minX<i.maxX&&this.maxX>i.minX&&this.minY<i.maxY&&this.maxY>i.minY}containsPoint(i,e){let s=this.polygons;for(let n=0,r=s.length;n<r;n++)if(this.containsPointPolygon(s[n],i,e))return this.boundingBoxes[n];return null}containsPointPolygon(i,e,s){let n=i,r=i.length,m=r-2,c=false;for(let d=0;d<r;d+=2){let p=n[d+1],v=n[m+1];if(p<s&&v>=s||v<s&&p>=s){let w=n[d];w+(s-p)/(v-p)*(n[m]-w)<e&&(c=!c);}m=d;}return c}intersectsSegment(i,e,s,n){let r=this.polygons;for(let m=0,c=r.length;m<c;m++)if(this.intersectsSegmentPolygon(r[m],i,e,s,n))return this.boundingBoxes[m];return null}intersectsSegmentPolygon(i,e,s,n,r){let m=i,c=i.length,d=e-n,p=s-r,v=e*r-s*n,w=m[c-2],C=m[c-1];for(let F=0;F<c;F+=2){let V=m[F],B=m[F+1],z=w*B-C*V,W=w-V,Z=C-B,J=d*Z-p*W,j=(v*W-d*z)/J;if((j>=w&&j<=V||j>=V&&j<=w)&&(j>=e&&j<=n||j>=n&&j<=e)){let _=(v*Z-p*z)/J;if((_>=C&&_<=B||_>=B&&_<=C)&&(_>=s&&_<=r||_>=r&&_<=s))return  true}w=V,C=B;}return  false}getPolygon(i){if(!i)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(i);return e==-1?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},ue=class xi{convexPolygons=new Array;convexPolygonsIndices=new Array;indicesArray=new Array;isConcaveArray=new Array;triangles=new Array;polygonPool=new $(()=>new Array);polygonIndicesPool=new $(()=>new Array);triangulate(e){let s=e,n=e.length>>1,r=this.indicesArray;r.length=0;for(let d=0;d<n;d++)r[d]=d;let m=this.isConcaveArray;m.length=0;for(let d=0,p=n;d<p;++d)m[d]=xi.isConcave(d,n,s,r);let c=this.triangles;for(c.length=0;n>3;){let d=n-1,p=0,v=1;for(;;){t:if(!m[p]){let F=r[d]<<1,V=r[p]<<1,B=r[v]<<1,z=s[F],W=s[F+1],Z=s[V],J=s[V+1],j=s[B],_=s[B+1];for(let tt=(v+1)%n;tt!=d;tt=(tt+1)%n){if(!m[tt])continue;let nt=r[tt]<<1,xt=s[nt],gt=s[nt+1];if(xi.positiveArea(j,_,z,W,xt,gt)&&xi.positiveArea(z,W,Z,J,xt,gt)&&xi.positiveArea(Z,J,j,_,xt,gt))break t}break}if(v==0){do{if(!m[p])break;p--;}while(p>0);break}d=p,p=v,v=(v+1)%n;}c.push(r[(n+p-1)%n]),c.push(r[p]),c.push(r[(p+1)%n]),r.splice(p,1),m.splice(p,1),n--;let w=(n+p-1)%n,C=p==n?0:p;m[w]=xi.isConcave(w,n,s,r),m[C]=xi.isConcave(C,n,s,r);}return n==3&&(c.push(r[2]),c.push(r[0]),c.push(r[1])),c}decompose(e,s){let n=e,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;let m=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(m),m.length=0;let c=this.polygonIndicesPool.obtain();c.length=0;let d=this.polygonPool.obtain();d.length=0;let p=-1,v=0;for(let w=0,C=s.length;w<C;w+=3){let F=s[w]<<1,V=s[w+1]<<1,B=s[w+2]<<1,z=n[F],W=n[F+1],Z=n[V],J=n[V+1],j=n[B],_=n[B+1],tt=false;if(p==F){let nt=d.length-4,xt=xi.winding(d[nt],d[nt+1],d[nt+2],d[nt+3],j,_),gt=xi.winding(j,_,d[0],d[1],d[2],d[3]);xt==v&&gt==v&&(d.push(j),d.push(_),c.push(B),tt=true);}tt||(d.length>0?(r.push(d),m.push(c)):(this.polygonPool.free(d),this.polygonIndicesPool.free(c)),d=this.polygonPool.obtain(),d.length=0,d.push(z),d.push(W),d.push(Z),d.push(J),d.push(j),d.push(_),c=this.polygonIndicesPool.obtain(),c.length=0,c.push(F),c.push(V),c.push(B),v=xi.winding(z,W,Z,J,j,_),p=F);}d.length>0&&(r.push(d),m.push(c));for(let w=0,C=r.length;w<C;w++){if(c=m[w],c.length==0)continue;let F=c[0],V=c[c.length-1];d=r[w];let B=d.length-4,z=d[B],W=d[B+1],Z=d[B+2],J=d[B+3],j=d[0],_=d[1],tt=d[2],nt=d[3],xt=xi.winding(z,W,Z,J,j,_);for(let gt=0;gt<C;gt++){if(gt==w)continue;let pt=m[gt];if(pt.length!=3)continue;let Ct=pt[0],Yt=pt[1],Xt=pt[2],Ut=r[gt],bt=Ut[Ut.length-2],Et=Ut[Ut.length-1];if(Ct!=F||Yt!=V)continue;let Ht=xi.winding(z,W,Z,J,bt,Et),Se=xi.winding(bt,Et,j,_,tt,nt);Ht==xt&&Se==xt&&(Ut.length=0,pt.length=0,d.push(bt),d.push(Et),c.push(Xt),z=Z,W=J,Z=bt,J=Et,gt=0);}}for(let w=r.length-1;w>=0;w--)d=r[w],d.length==0&&(r.splice(w,1),this.polygonPool.free(d),c=m[w],m.splice(w,1),this.polygonIndicesPool.free(c));return r}static isConcave(e,s,n,r){let m=r[(s+e-1)%s]<<1,c=r[e]<<1,d=r[(e+1)%s]<<1;return !this.positiveArea(n[m],n[m+1],n[c],n[c+1],n[d],n[d+1])}static positiveArea(e,s,n,r,m,c){return e*(c-r)+n*(s-c)+m*(r-s)>=0}static winding(e,s,n,r,m,c){let d=n-e,p=r-s;return m*p-c*d+d*s-e*p>=0?1:-1}},fe=class rn{triangulator=new ue;clippingPolygon=new Array;clipOutput=new Array;clippedVertices=new Array;clippedUVs=new Array;clippedTriangles=new Array;scratch=new Array;clipAttachment=null;clippingPolygons=null;clipStart(e,s){if(this.clipAttachment)return 0;this.clipAttachment=s;let n=s.worldVerticesLength,r=D.setArraySize(this.clippingPolygon,n);s.computeWorldVertices(e,0,n,r,0,2);let m=this.clippingPolygon;rn.makeClockwise(m);let c=this.clippingPolygons=this.triangulator.decompose(m,this.triangulator.triangulate(m));for(let d=0,p=c.length;d<p;d++){let v=c[d];rn.makeClockwise(v),v.push(v[0]),v.push(v[1]);}return c.length}clipEndWithSlot(e){this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd();}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0);}isClipping(){return this.clipAttachment!=null}clipTriangles(e,s,n,r,m,c,d,p){let v,w,C,F,V,B;typeof s=="number"?(v=n,w=r,C=m,F=c,V=d,B=p):(v=s,w=n,C=r,F=m,V=c,B=d),C&&F&&V&&typeof B=="boolean"?this.clipTrianglesRender(e,v,w,C,F,V,B):this.clipTrianglesNoRender(e,v,w);}clipTrianglesNoRender(e,s,n){let r=this.clipOutput,m=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,p=d.length,v=0;m.length=0,c.length=0;for(let w=0;w<n;w+=3){let C=s[w]<<1,F=e[C],V=e[C+1];C=s[w+1]<<1;let B=e[C],z=e[C+1];C=s[w+2]<<1;let W=e[C],Z=e[C+1];for(let J=0;J<p;J++){let j=m.length;if(this.clip(F,V,B,z,W,Z,d[J],r)){let _=r.length;if(_==0)continue;let tt=_>>1,nt=this.clipOutput,xt=D.setArraySize(m,j+tt*2);for(let pt=0;pt<_;pt+=2,j+=2){let Ct=nt[pt],Yt=nt[pt+1];xt[j]=Ct,xt[j+1]=Yt;}j=c.length;let gt=D.setArraySize(c,j+3*(tt-2));tt--;for(let pt=1;pt<tt;pt++,j+=3)gt[j]=v,gt[j+1]=v+pt,gt[j+2]=v+pt+1;v+=tt+1;}else {let _=D.setArraySize(m,j+6);_[j]=F,_[j+1]=V,_[j+2]=B,_[j+3]=z,_[j+4]=W,_[j+5]=Z,j=c.length;let tt=D.setArraySize(c,j+3);tt[j]=v,tt[j+1]=v+1,tt[j+2]=v+2,v+=3;break}}}}clipTrianglesRender(e,s,n,r,m,c,d){let p=this.clipOutput,v=this.clippedVertices,w=this.clippedTriangles,C=this.clippingPolygons,F=C.length,V=d?12:8,B=0;v.length=0,w.length=0;for(let z=0;z<n;z+=3){let W=s[z]<<1,Z=e[W],J=e[W+1],j=r[W],_=r[W+1];W=s[z+1]<<1;let tt=e[W],nt=e[W+1],xt=r[W],gt=r[W+1];W=s[z+2]<<1;let pt=e[W],Ct=e[W+1],Yt=r[W],Xt=r[W+1];for(let Ut=0;Ut<F;Ut++){let bt=v.length;if(this.clip(Z,J,tt,nt,pt,Ct,C[Ut],p)){let Et=p.length;if(Et==0)continue;let Ht=nt-Ct,Se=pt-tt,xe=Z-pt,be=Ct-J,Pe=1/(Ht*xe+Se*(J-Ct)),Re=Et>>1,Ge=this.clipOutput,ne=D.setArraySize(v,bt+Re*V);for(let Fe=0;Fe<Et;Fe+=2,bt+=V){let Ke=Ge[Fe],je=Ge[Fe+1];ne[bt]=Ke,ne[bt+1]=je,ne[bt+2]=m.r,ne[bt+3]=m.g,ne[bt+4]=m.b,ne[bt+5]=m.a;let si=Ke-pt,_e=je-Ct,Ri=(Ht*si+Se*_e)*Pe,Cs=(be*si+xe*_e)*Pe,sr=1-Ri-Cs;ne[bt+6]=j*Ri+xt*Cs+Yt*sr,ne[bt+7]=_*Ri+gt*Cs+Xt*sr,d&&(ne[bt+8]=c.r,ne[bt+9]=c.g,ne[bt+10]=c.b,ne[bt+11]=c.a);}bt=w.length;let Te=D.setArraySize(w,bt+3*(Re-2));Re--;for(let Fe=1;Fe<Re;Fe++,bt+=3)Te[bt]=B,Te[bt+1]=B+Fe,Te[bt+2]=B+Fe+1;B+=Re+1;}else {let Et=D.setArraySize(v,bt+3*V);Et[bt]=Z,Et[bt+1]=J,Et[bt+2]=m.r,Et[bt+3]=m.g,Et[bt+4]=m.b,Et[bt+5]=m.a,d?(Et[bt+6]=j,Et[bt+7]=_,Et[bt+8]=c.r,Et[bt+9]=c.g,Et[bt+10]=c.b,Et[bt+11]=c.a,Et[bt+12]=tt,Et[bt+13]=nt,Et[bt+14]=m.r,Et[bt+15]=m.g,Et[bt+16]=m.b,Et[bt+17]=m.a,Et[bt+18]=xt,Et[bt+19]=gt,Et[bt+20]=c.r,Et[bt+21]=c.g,Et[bt+22]=c.b,Et[bt+23]=c.a,Et[bt+24]=pt,Et[bt+25]=Ct,Et[bt+26]=m.r,Et[bt+27]=m.g,Et[bt+28]=m.b,Et[bt+29]=m.a,Et[bt+30]=Yt,Et[bt+31]=Xt,Et[bt+32]=c.r,Et[bt+33]=c.g,Et[bt+34]=c.b,Et[bt+35]=c.a):(Et[bt+6]=j,Et[bt+7]=_,Et[bt+8]=tt,Et[bt+9]=nt,Et[bt+10]=m.r,Et[bt+11]=m.g,Et[bt+12]=m.b,Et[bt+13]=m.a,Et[bt+14]=xt,Et[bt+15]=gt,Et[bt+16]=pt,Et[bt+17]=Ct,Et[bt+18]=m.r,Et[bt+19]=m.g,Et[bt+20]=m.b,Et[bt+21]=m.a,Et[bt+22]=Yt,Et[bt+23]=Xt),bt=w.length;let Ht=D.setArraySize(w,bt+3);Ht[bt]=B,Ht[bt+1]=B+1,Ht[bt+2]=B+2,B+=3;break}}}}clipTrianglesUnpacked(e,s,n,r){let m=this.clipOutput,c=this.clippedVertices,d=this.clippedUVs,p=this.clippedTriangles,v=this.clippingPolygons,w=v.length,C=0;c.length=0,d.length=0,p.length=0;for(let F=0;F<n;F+=3){let V=s[F]<<1,B=e[V],z=e[V+1],W=r[V],Z=r[V+1];V=s[F+1]<<1;let J=e[V],j=e[V+1],_=r[V],tt=r[V+1];V=s[F+2]<<1;let nt=e[V],xt=e[V+1],gt=r[V],pt=r[V+1];for(let Ct=0;Ct<w;Ct++){let Yt=c.length;if(this.clip(B,z,J,j,nt,xt,v[Ct],m)){let Xt=m.length;if(Xt==0)continue;let Ut=j-xt,bt=nt-J,Et=B-nt,Ht=xt-z,Se=1/(Ut*Et+bt*(z-xt)),xe=Xt>>1,be=this.clipOutput,Pe=D.setArraySize(c,Yt+xe*2),Re=D.setArraySize(d,Yt+xe*2);for(let ne=0;ne<Xt;ne+=2,Yt+=2){let Te=be[ne],Fe=be[ne+1];Pe[Yt]=Te,Pe[Yt+1]=Fe;let Ke=Te-nt,je=Fe-xt,si=(Ut*Ke+bt*je)*Se,_e=(Ht*Ke+Et*je)*Se,Ri=1-si-_e;Re[Yt]=W*si+_*_e+gt*Ri,Re[Yt+1]=Z*si+tt*_e+pt*Ri;}Yt=p.length;let Ge=D.setArraySize(p,Yt+3*(xe-2));xe--;for(let ne=1;ne<xe;ne++,Yt+=3)Ge[Yt]=C,Ge[Yt+1]=C+ne,Ge[Yt+2]=C+ne+1;C+=xe+1;}else {let Xt=D.setArraySize(c,Yt+6);Xt[Yt]=B,Xt[Yt+1]=z,Xt[Yt+2]=J,Xt[Yt+3]=j,Xt[Yt+4]=nt,Xt[Yt+5]=xt;let Ut=D.setArraySize(d,Yt+6);Ut[Yt]=W,Ut[Yt+1]=Z,Ut[Yt+2]=_,Ut[Yt+3]=tt,Ut[Yt+4]=gt,Ut[Yt+5]=pt,Yt=p.length;let bt=D.setArraySize(p,Yt+3);bt[Yt]=C,bt[Yt+1]=C+1,bt[Yt+2]=C+2,C+=3;break}}}}clip(e,s,n,r,m,c,d,p){let v=p,w=false,C;d.length%4>=2?(C=p,p=this.scratch):C=this.scratch,C.length=0,C.push(e),C.push(s),C.push(n),C.push(r),C.push(m),C.push(c),C.push(e),C.push(s),p.length=0;let F=d.length-4,V=d;for(let B=0;;B+=2){let z=V[B],W=V[B+1],Z=z-V[B+2],J=W-V[B+3],j=p.length,_=C;for(let nt=0,xt=C.length-2;nt<xt;){let gt=_[nt],pt=_[nt+1];nt+=2;let Ct=_[nt],Yt=_[nt+1],Xt=J*(z-Ct)>Z*(W-Yt),Ut=J*(z-gt)-Z*(W-pt);if(Ut>0){if(Xt){p.push(Ct),p.push(Yt);continue}let bt=Ct-gt,Et=Yt-pt,Ht=Ut/(bt*J-Et*Z);if(Ht>=0&&Ht<=1)p.push(gt+bt*Ht),p.push(pt+Et*Ht);else {p.push(Ct),p.push(Yt);continue}}else if(Xt){let bt=Ct-gt,Et=Yt-pt,Ht=Ut/(bt*J-Et*Z);if(Ht>=0&&Ht<=1)p.push(gt+bt*Ht),p.push(pt+Et*Ht),p.push(Ct),p.push(Yt);else {p.push(Ct),p.push(Yt);continue}}w=true;}if(j==p.length)return v.length=0,true;if(p.push(p[0]),p.push(p[1]),B==F)break;let tt=p;p=C,p.length=0,C=tt;}if(v!=p){v.length=0;for(let B=0,z=p.length-2;B<z;B++)v[B]=p[B];}else v.length=v.length-2;return w}static makeClockwise(e){let s=e,n=e.length,r=s[n-2]*s[1]-s[0]*s[n-1],m=0,c=0,d=0,p=0;for(let v=0,w=n-3;v<w;v+=2)m=s[v],c=s[v+1],d=s[v+2],p=s[v+3],r+=m*p-d*c;if(!(r<0))for(let v=0,w=n-2,C=n>>1;v<C;v+=2){let F=s[v],V=s[v+1],B=w-v;s[v]=s[B],s[v+1]=s[B+1],s[B]=F,s[B+1]=V;}}},me=class{attachmentLoader;scale=1;linkedMeshes=new Array;constructor(i){this.attachmentLoader=i;}readSkeletonData(i){let e=this.scale,s=new Ee,n=typeof i=="string"?JSON.parse(i):i,r=n.skeleton;if(r&&(s.hash=r.hash,s.version=r.spine,s.x=r.x,s.y=r.y,s.width=r.width,s.height=r.height,s.referenceScale=mt(r,"referenceScale",100)*e,s.fps=r.fps,s.imagesPath=r.images??null,s.audioPath=r.audio??null),n.bones)for(let m=0;m<n.bones.length;m++){let c=n.bones[m],d=null,p=mt(c,"parent",null);p&&(d=s.findBone(p));let v=new $i(s.bones.length,c.name,d);v.length=mt(c,"length",0)*e,v.x=mt(c,"x",0)*e,v.y=mt(c,"y",0)*e,v.rotation=mt(c,"rotation",0),v.scaleX=mt(c,"scaleX",1),v.scaleY=mt(c,"scaleY",1),v.shearX=mt(c,"shearX",0),v.shearY=mt(c,"shearY",0),v.inherit=D.enumValue(di,mt(c,"inherit","Normal")),v.skinRequired=mt(c,"skin",false);let w=mt(c,"color",null);w&&v.color.setFromString(w),s.bones.push(v);}if(n.slots)for(let m=0;m<n.slots.length;m++){let c=n.slots[m],d=c.name,p=s.findBone(c.bone);if(!p)throw new Error(`Couldn't find bone ${c.bone} for slot ${d}`);let v=new Zs(s.slots.length,d,p),w=mt(c,"color",null);w&&v.color.setFromString(w);let C=mt(c,"dark",null);C&&(v.darkColor=O.fromString(C)),v.attachmentName=mt(c,"attachment",null),v.blendMode=D.enumValue(js,mt(c,"blend","normal")),v.visible=mt(c,"visible",true),s.slots.push(v);}if(n.ik)for(let m=0;m<n.ik.length;m++){let c=n.ik[m],d=new ts(c.name);d.order=mt(c,"order",0),d.skinRequired=mt(c,"skin",false);for(let v=0;v<c.bones.length;v++){let w=s.findBone(c.bones[v]);if(!w)throw new Error(`Couldn't find bone ${c.bones[v]} for IK constraint ${c.name}.`);d.bones.push(w);}let p=s.findBone(c.target);if(!p)throw new Error(`Couldn't find target bone ${c.target} for IK constraint ${c.name}.`);d.target=p,d.mix=mt(c,"mix",1),d.softness=mt(c,"softness",0)*e,d.bendDirection=mt(c,"bendPositive",true)?1:-1,d.compress=mt(c,"compress",false),d.stretch=mt(c,"stretch",false),d.uniform=mt(c,"uniform",false),s.ikConstraints.push(d);}if(n.transform)for(let m=0;m<n.transform.length;m++){let c=n.transform[m],d=new qs(c.name);d.order=mt(c,"order",0),d.skinRequired=mt(c,"skin",false);for(let w=0;w<c.bones.length;w++){let C=c.bones[w],F=s.findBone(C);if(!F)throw new Error(`Couldn't find bone ${C} for transform constraint ${c.name}.`);d.bones.push(F);}let p=c.target,v=s.findBone(p);if(!v)throw new Error(`Couldn't find target bone ${p} for transform constraint ${c.name}.`);d.target=v,d.local=mt(c,"local",false),d.relative=mt(c,"relative",false),d.offsetRotation=mt(c,"rotation",0),d.offsetX=mt(c,"x",0)*e,d.offsetY=mt(c,"y",0)*e,d.offsetScaleX=mt(c,"scaleX",0),d.offsetScaleY=mt(c,"scaleY",0),d.offsetShearY=mt(c,"shearY",0),d.mixRotate=mt(c,"mixRotate",1),d.mixX=mt(c,"mixX",1),d.mixY=mt(c,"mixY",d.mixX),d.mixScaleX=mt(c,"mixScaleX",1),d.mixScaleY=mt(c,"mixScaleY",d.mixScaleX),d.mixShearY=mt(c,"mixShearY",1),s.transformConstraints.push(d);}if(n.path)for(let m=0;m<n.path.length;m++){let c=n.path[m],d=new Ni(c.name);d.order=mt(c,"order",0),d.skinRequired=mt(c,"skin",false);for(let w=0;w<c.bones.length;w++){let C=c.bones[w],F=s.findBone(C);if(!F)throw new Error(`Couldn't find bone ${C} for path constraint ${c.name}.`);d.bones.push(F);}let p=c.target,v=s.findSlot(p);if(!v)throw new Error(`Couldn't find target slot ${p} for path constraint ${c.name}.`);d.target=v,d.positionMode=D.enumValue(es,mt(c,"positionMode","Percent")),d.spacingMode=D.enumValue(ei,mt(c,"spacingMode","Length")),d.rotateMode=D.enumValue(is,mt(c,"rotateMode","Tangent")),d.offsetRotation=mt(c,"rotation",0),d.position=mt(c,"position",0),d.positionMode==0&&(d.position*=e),d.spacing=mt(c,"spacing",0),(d.spacingMode==0||d.spacingMode==1)&&(d.spacing*=e),d.mixRotate=mt(c,"mixRotate",1),d.mixX=mt(c,"mixX",1),d.mixY=mt(c,"mixY",d.mixX),s.pathConstraints.push(d);}if(n.physics)for(let m=0;m<n.physics.length;m++){let c=n.physics[m],d=new Ms(c.name);d.order=mt(c,"order",0),d.skinRequired=mt(c,"skin",false);let p=c.bone,v=s.findBone(p);if(v==null)throw new Error("Physics bone not found: "+p);d.bone=v,d.x=mt(c,"x",0),d.y=mt(c,"y",0),d.rotate=mt(c,"rotate",0),d.scaleX=mt(c,"scaleX",0),d.shearX=mt(c,"shearX",0),d.limit=mt(c,"limit",5e3)*e,d.step=1/mt(c,"fps",60),d.inertia=mt(c,"inertia",1),d.strength=mt(c,"strength",100),d.damping=mt(c,"damping",1),d.massInverse=1/mt(c,"mass",1),d.wind=mt(c,"wind",0),d.gravity=mt(c,"gravity",0),d.mix=mt(c,"mix",1),d.inertiaGlobal=mt(c,"inertiaGlobal",false),d.strengthGlobal=mt(c,"strengthGlobal",false),d.dampingGlobal=mt(c,"dampingGlobal",false),d.massGlobal=mt(c,"massGlobal",false),d.windGlobal=mt(c,"windGlobal",false),d.gravityGlobal=mt(c,"gravityGlobal",false),d.mixGlobal=mt(c,"mixGlobal",false),s.physicsConstraints.push(d);}if(n.skins)for(let m=0;m<n.skins.length;m++){let c=n.skins[m],d=new ys(c.name);if(c.bones)for(let p=0;p<c.bones.length;p++){let v=c.bones[p],w=s.findBone(v);if(!w)throw new Error(`Couldn't find bone ${v} for skin ${c.name}.`);d.bones.push(w);}if(c.ik)for(let p=0;p<c.ik.length;p++){let v=c.ik[p],w=s.findIkConstraint(v);if(!w)throw new Error(`Couldn't find IK constraint ${v} for skin ${c.name}.`);d.constraints.push(w);}if(c.transform)for(let p=0;p<c.transform.length;p++){let v=c.transform[p],w=s.findTransformConstraint(v);if(!w)throw new Error(`Couldn't find transform constraint ${v} for skin ${c.name}.`);d.constraints.push(w);}if(c.path)for(let p=0;p<c.path.length;p++){let v=c.path[p],w=s.findPathConstraint(v);if(!w)throw new Error(`Couldn't find path constraint ${v} for skin ${c.name}.`);d.constraints.push(w);}if(c.physics)for(let p=0;p<c.physics.length;p++){let v=c.physics[p],w=s.findPhysicsConstraint(v);if(!w)throw new Error(`Couldn't find physics constraint ${v} for skin ${c.name}.`);d.constraints.push(w);}for(let p in c.attachments){let v=s.findSlot(p);if(!v)throw new Error(`Couldn't find slot ${p} for skin ${c.name}.`);let w=c.attachments[p];for(let C in w){let F=this.readAttachment(w[C],d,v.index,C,s);F&&d.setAttachment(v.index,C,F);}}s.skins.push(d),d.name=="default"&&(s.defaultSkin=d);}for(let m=0,c=this.linkedMeshes.length;m<c;m++){let d=this.linkedMeshes[m],p=d.skin?s.findSkin(d.skin):s.defaultSkin;if(!p)throw new Error(`Skin not found: ${d.skin}`);let v=p.getAttachment(d.slotIndex,d.parent);if(!v)throw new Error(`Parent mesh not found: ${d.parent}`);d.mesh.timelineAttachment=d.inheritTimeline?v:d.mesh,d.mesh.setParentMesh(v),d.mesh.region!=null&&d.mesh.updateRegion();}if(this.linkedMeshes.length=0,n.events)for(let m in n.events){let c=n.events[m],d=new Gs(m);d.intValue=mt(c,"int",0),d.floatValue=mt(c,"float",0),d.stringValue=mt(c,"string",""),d.audioPath=mt(c,"audio",null),d.audioPath&&(d.volume=mt(c,"volume",1),d.balance=mt(c,"balance",0)),s.events.push(d);}if(n.animations)for(let m in n.animations){let c=n.animations[m];this.readAnimation(c,m,s);}return s}readAttachment(i,e,s,n,r){let m=this.scale;switch(n=mt(i,"name",n),mt(i,"type","region")){case "region":{let c=mt(i,"path",n),d=this.readSequence(mt(i,"sequence",null)),p=this.attachmentLoader.newRegionAttachment(e,n,c,d);if(!p)return null;p.path=c,p.x=mt(i,"x",0)*m,p.y=mt(i,"y",0)*m,p.scaleX=mt(i,"scaleX",1),p.scaleY=mt(i,"scaleY",1),p.rotation=mt(i,"rotation",0),p.width=i.width*m,p.height=i.height*m,p.sequence=d;let v=mt(i,"color",null);return v&&p.color.setFromString(v),p.region!=null&&p.updateRegion(),p}case "boundingbox":{let c=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(!c)return null;this.readVertices(i,c,i.vertexCount<<1);let d=mt(i,"color",null);return d&&c.color.setFromString(d),c}case "mesh":case "linkedmesh":{let c=mt(i,"path",n),d=this.readSequence(mt(i,"sequence",null)),p=this.attachmentLoader.newMeshAttachment(e,n,c,d);if(!p)return null;p.path=c;let v=mt(i,"color",null);v&&p.color.setFromString(v),p.width=mt(i,"width",0)*m,p.height=mt(i,"height",0)*m,p.sequence=d;let w=mt(i,"parent",null);if(w)return this.linkedMeshes.push(new ve(p,mt(i,"skin",null),s,w,mt(i,"timelines",true))),p;let C=i.uvs;return this.readVertices(i,p,C.length),p.triangles=i.triangles,p.regionUVs=C,p.region!=null&&p.updateRegion(),p.edges=mt(i,"edges",null),p.hullLength=mt(i,"hull",0)*2,p}case "path":{let c=this.attachmentLoader.newPathAttachment(e,n);if(!c)return null;c.closed=mt(i,"closed",false),c.constantSpeed=mt(i,"constantSpeed",true);let d=i.vertexCount;this.readVertices(i,c,d<<1);let p=D.newArray(d/3,0);for(let w=0;w<i.lengths.length;w++)p[w]=i.lengths[w]*m;c.lengths=p;let v=mt(i,"color",null);return v&&c.color.setFromString(v),c}case "point":{let c=this.attachmentLoader.newPointAttachment(e,n);if(!c)return null;c.x=mt(i,"x",0)*m,c.y=mt(i,"y",0)*m,c.rotation=mt(i,"rotation",0);let d=mt(i,"color",null);return d&&c.color.setFromString(d),c}case "clipping":{let c=this.attachmentLoader.newClippingAttachment(e,n);if(!c)return null;let d=mt(i,"end",null);d&&(c.endSlot=r.findSlot(d));let p=i.vertexCount;this.readVertices(i,c,p<<1);let v=mt(i,"color",null);return v&&c.color.setFromString(v),c}}return null}readSequence(i){if(i==null)return null;let e=new G(mt(i,"count",0));return e.start=mt(i,"start",1),e.digits=mt(i,"digits",0),e.setupIndex=mt(i,"setup",0),e}readVertices(i,e,s){let n=this.scale;e.worldVerticesLength=s;let r=i.vertices;if(s==r.length){let d=D.toFloatArray(r);if(n!=1)for(let p=0,v=r.length;p<v;p++)d[p]*=n;e.vertices=d;return}let m=new Array,c=new Array;for(let d=0,p=r.length;d<p;){let v=r[d++];c.push(v);for(let w=d+v*4;d<w;d+=4)c.push(r[d]),m.push(r[d+1]*n),m.push(r[d+2]*n),m.push(r[d+3]);}e.bones=c,e.vertices=D.toFloatArray(m);}readAnimation(i,e,s){let n=this.scale,r=new Array;if(i.slots)for(let c in i.slots){let d=i.slots[c],p=s.findSlot(c);if(!p)throw new Error("Slot not found: "+c);let v=p.index;for(let w in d){let C=d[w];if(!C)continue;let F=C.length;if(w=="attachment"){let V=new Ye(F,v);for(let B=0;B<F;B++){let z=C[B];V.setFrame(B,mt(z,"time",0),mt(z,"name",null));}r.push(V);}else if(w=="rgba"){let V=new ie(F,F<<2,v),B=C[0],z=mt(B,"time",0),W=O.fromString(B.color);for(let Z=0,J=0;;Z++){V.setFrame(Z,z,W.r,W.g,W.b,W.a);let j=C[Z+1];if(!j){V.shrink(J);break}let _=mt(j,"time",0),tt=O.fromString(j.color),nt=B.curve;nt&&(J=zt(nt,V,J,Z,0,z,_,W.r,tt.r,1),J=zt(nt,V,J,Z,1,z,_,W.g,tt.g,1),J=zt(nt,V,J,Z,2,z,_,W.b,tt.b,1),J=zt(nt,V,J,Z,3,z,_,W.a,tt.a,1)),z=_,W=tt,B=j;}r.push(V);}else if(w=="rgb"){let V=new Kt(F,F*3,v),B=C[0],z=mt(B,"time",0),W=O.fromString(B.color);for(let Z=0,J=0;;Z++){V.setFrame(Z,z,W.r,W.g,W.b);let j=C[Z+1];if(!j){V.shrink(J);break}let _=mt(j,"time",0),tt=O.fromString(j.color),nt=B.curve;nt&&(J=zt(nt,V,J,Z,0,z,_,W.r,tt.r,1),J=zt(nt,V,J,Z,1,z,_,W.g,tt.g,1),J=zt(nt,V,J,Z,2,z,_,W.b,tt.b,1)),z=_,W=tt,B=j;}r.push(V);}else if(w=="alpha")r.push(Qt(C,new Ae(F,F,v),0,1));else if(w=="rgba2"){let V=new Le(F,F*7,v),B=C[0],z=mt(B,"time",0),W=O.fromString(B.light),Z=O.fromString(B.dark);for(let J=0,j=0;;J++){V.setFrame(J,z,W.r,W.g,W.b,W.a,Z.r,Z.g,Z.b);let _=C[J+1];if(!_){V.shrink(j);break}let tt=mt(_,"time",0),nt=O.fromString(_.light),xt=O.fromString(_.dark),gt=B.curve;gt&&(j=zt(gt,V,j,J,0,z,tt,W.r,nt.r,1),j=zt(gt,V,j,J,1,z,tt,W.g,nt.g,1),j=zt(gt,V,j,J,2,z,tt,W.b,nt.b,1),j=zt(gt,V,j,J,3,z,tt,W.a,nt.a,1),j=zt(gt,V,j,J,4,z,tt,Z.r,xt.r,1),j=zt(gt,V,j,J,5,z,tt,Z.g,xt.g,1),j=zt(gt,V,j,J,6,z,tt,Z.b,xt.b,1)),z=tt,W=nt,Z=xt,B=_;}r.push(V);}else if(w=="rgb2"){let V=new ye(F,F*6,v),B=C[0],z=mt(B,"time",0),W=O.fromString(B.light),Z=O.fromString(B.dark);for(let J=0,j=0;;J++){V.setFrame(J,z,W.r,W.g,W.b,Z.r,Z.g,Z.b);let _=C[J+1];if(!_){V.shrink(j);break}let tt=mt(_,"time",0),nt=O.fromString(_.light),xt=O.fromString(_.dark),gt=B.curve;gt&&(j=zt(gt,V,j,J,0,z,tt,W.r,nt.r,1),j=zt(gt,V,j,J,1,z,tt,W.g,nt.g,1),j=zt(gt,V,j,J,2,z,tt,W.b,nt.b,1),j=zt(gt,V,j,J,3,z,tt,Z.r,xt.r,1),j=zt(gt,V,j,J,4,z,tt,Z.g,xt.g,1),j=zt(gt,V,j,J,5,z,tt,Z.b,xt.b,1)),z=tt,W=nt,Z=xt,B=_;}r.push(V);}}}if(i.bones)for(let c in i.bones){let d=i.bones[c],p=s.findBone(c);if(!p)throw new Error("Bone not found: "+c);let v=p.index;for(let w in d){let C=d[w],F=C.length;if(F!=0){if(w==="rotate")r.push(Qt(C,new Mt(F,F,v),0,1));else if(w==="translate"){let V=new yt(F,F<<1,v);r.push(oe(C,V,"x","y",0,n));}else if(w==="translatex"){let V=new Bt(F,F,v);r.push(Qt(C,V,0,n));}else if(w==="translatey"){let V=new Dt(F,F,v);r.push(Qt(C,V,0,n));}else if(w==="scale"){let V=new Lt(F,F<<1,v);r.push(oe(C,V,"x","y",1,1));}else if(w==="scalex"){let V=new Vt(F,F,v);r.push(Qt(C,V,1,1));}else if(w==="scaley"){let V=new Gt(F,F,v);r.push(Qt(C,V,1,1));}else if(w==="shear"){let V=new Ft(F,F<<1,v);r.push(oe(C,V,"x","y",0,1));}else if(w==="shearx"){let V=new Tt(F,F,v);r.push(Qt(C,V,0,1));}else if(w==="sheary"){let V=new At(F,F,v);r.push(Qt(C,V,0,1));}else if(w==="inherit"){let V=new _t(F,p.index);for(let B=0;B<C.length;B++){let z=C[B];V.setFrame(B,mt(z,"time",0),D.enumValue(di,mt(z,"inherit","Normal")));}r.push(V);}}}}if(i.ik)for(let c in i.ik){let d=i.ik[c],p=d[0];if(!p)continue;let v=s.findIkConstraint(c);if(!v)throw new Error("IK Constraint not found: "+c);let w=s.ikConstraints.indexOf(v),C=new Ue(d.length,d.length<<1,w),F=mt(p,"time",0),V=mt(p,"mix",1),B=mt(p,"softness",0)*n;for(let z=0,W=0;;z++){C.setFrame(z,F,V,B,mt(p,"bendPositive",true)?1:-1,mt(p,"compress",false),mt(p,"stretch",false));let Z=d[z+1];if(!Z){C.shrink(W);break}let J=mt(Z,"time",0),j=mt(Z,"mix",1),_=mt(Z,"softness",0)*n,tt=p.curve;tt&&(W=zt(tt,C,W,z,0,F,J,V,j,1),W=zt(tt,C,W,z,1,F,J,B,_,n)),F=J,V=j,B=_,p=Z;}r.push(C);}if(i.transform)for(let c in i.transform){let d=i.transform[c],p=d[0];if(!p)continue;let v=s.findTransformConstraint(c);if(!v)throw new Error("Transform constraint not found: "+c);let w=s.transformConstraints.indexOf(v),C=new Qe(d.length,d.length*6,w),F=mt(p,"time",0),V=mt(p,"mixRotate",1),B=mt(p,"mixX",1),z=mt(p,"mixY",B),W=mt(p,"mixScaleX",1),Z=mt(p,"mixScaleY",W),J=mt(p,"mixShearY",1);for(let j=0,_=0;;j++){C.setFrame(j,F,V,B,z,W,Z,J);let tt=d[j+1];if(!tt){C.shrink(_);break}let nt=mt(tt,"time",0),xt=mt(tt,"mixRotate",1),gt=mt(tt,"mixX",1),pt=mt(tt,"mixY",gt),Ct=mt(tt,"mixScaleX",1),Yt=mt(tt,"mixScaleY",Ct),Xt=mt(tt,"mixShearY",1),Ut=p.curve;Ut&&(_=zt(Ut,C,_,j,0,F,nt,V,xt,1),_=zt(Ut,C,_,j,1,F,nt,B,gt,1),_=zt(Ut,C,_,j,2,F,nt,z,pt,1),_=zt(Ut,C,_,j,3,F,nt,W,Ct,1),_=zt(Ut,C,_,j,4,F,nt,Z,Yt,1),_=zt(Ut,C,_,j,5,F,nt,J,Xt,1)),F=nt,V=xt,B=gt,z=pt,W=Ct,Z=Yt,W=Ct,p=tt;}r.push(C);}if(i.path)for(let c in i.path){let d=i.path[c],p=s.findPathConstraint(c);if(!p)throw new Error("Path constraint not found: "+c);let v=s.pathConstraints.indexOf(p);for(let w in d){let C=d[w],F=C[0];if(!F)continue;let V=C.length;if(w==="position"){let B=new We(V,V,v);r.push(Qt(C,B,0,p.positionMode==0?n:1));}else if(w==="spacing"){let B=new Ze(V,V,v);r.push(Qt(C,B,0,p.spacingMode==0||p.spacingMode==1?n:1));}else if(w==="mix"){let B=new Be(V,V*3,v),z=mt(F,"time",0),W=mt(F,"mixRotate",1),Z=mt(F,"mixX",1),J=mt(F,"mixY",Z);for(let j=0,_=0;;j++){B.setFrame(j,z,W,Z,J);let tt=C[j+1];if(!tt){B.shrink(_);break}let nt=mt(tt,"time",0),xt=mt(tt,"mixRotate",1),gt=mt(tt,"mixX",1),pt=mt(tt,"mixY",gt),Ct=F.curve;Ct&&(_=zt(Ct,B,_,j,0,z,nt,W,xt,1),_=zt(Ct,B,_,j,1,z,nt,Z,gt,1),_=zt(Ct,B,_,j,2,z,nt,J,pt,1)),z=nt,W=xt,Z=gt,J=pt,F=tt;}r.push(B);}}}if(i.physics)for(let c in i.physics){let d=i.physics[c],p=-1;if(c.length>0){let v=s.findPhysicsConstraint(c);if(!v)throw new Error("Physics constraint not found: "+c);p=s.physicsConstraints.indexOf(v);}for(let v in d){let w=d[v],C=w[0];if(!C)continue;let F=w.length;if(v=="reset"){let B=new Hi(F,p);for(let z=0;C!=null;C=w[z+1],z++)B.setFrame(z,mt(C,"time",0));r.push(B);continue}let V;if(v=="inertia")V=new De(F,F,p);else if(v=="strength")V=new vi(F,F,p);else if(v=="damping")V=new ri(F,F,p);else if(v=="mass")V=new hi(F,F,p);else if(v=="wind")V=new ti(F,F,p);else if(v=="gravity")V=new ci(F,F,p);else if(v=="mix")V=new Mi(F,F,p);else continue;r.push(Qt(w,V,0,1));}}if(i.attachments)for(let c in i.attachments){let d=i.attachments[c],p=s.findSkin(c);if(!p)throw new Error("Skin not found: "+c);for(let v in d){let w=d[v],C=s.findSlot(v);if(!C)throw new Error("Slot not found: "+v);let F=C.index;for(let V in w){let B=w[V],z=p.getAttachment(F,V);for(let W in B){let Z=B[W],J=Z[0];if(J){if(W=="deform"){let j=z.bones,_=z.vertices,tt=j?_.length/3*2:_.length,nt=new Xe(Z.length,Z.length,F,z),xt=mt(J,"time",0);for(let gt=0,pt=0;;gt++){let Ct,Yt=mt(J,"vertices",null);if(!Yt)Ct=j?D.newFloatArray(tt):_;else {Ct=D.newFloatArray(tt);let Et=mt(J,"offset",0);if(D.arrayCopy(Yt,0,Ct,Et,Yt.length),n!=1)for(let Ht=Et,Se=Ht+Yt.length;Ht<Se;Ht++)Ct[Ht]*=n;if(!j)for(let Ht=0;Ht<tt;Ht++)Ct[Ht]+=_[Ht];}nt.setFrame(gt,xt,Ct);let Xt=Z[gt+1];if(!Xt){nt.shrink(pt);break}let Ut=mt(Xt,"time",0),bt=J.curve;bt&&(pt=zt(bt,nt,pt,gt,0,xt,Ut,0,1,1)),xt=Ut,J=Xt;}r.push(nt);}else if(W=="sequence"){let j=new ds(Z.length,F,z),_=0;for(let tt=0;tt<Z.length;tt++){let nt=mt(J,"delay",_),xt=mt(J,"time",0),gt=et[mt(J,"mode","hold")],pt=mt(J,"index",0);j.setFrame(tt,xt,gt,pt,nt),_=nt,J=Z[tt+1];}r.push(j);}}}}}}if(i.drawOrder){let c=new ze(i.drawOrder.length),d=s.slots.length,p=0;for(let v=0;v<i.drawOrder.length;v++,p++){let w=i.drawOrder[v],C=null,F=mt(w,"offsets",null);if(F){C=D.newArray(d,-1);let V=D.newArray(d-F.length,0),B=0,z=0;for(let W=0;W<F.length;W++){let Z=F[W],J=s.findSlot(Z.slot);if(!J)throw new Error("Slot not found: "+J);let j=J.index;for(;B!=j;)V[z++]=B++;C[B+Z.offset]=B++;}for(;B<d;)V[z++]=B++;for(let W=d-1;W>=0;W--)C[W]==-1&&(C[W]=V[--z]);}c.setFrame(p,mt(w,"time",0),C);}r.push(c);}if(i.events){let c=new qe(i.events.length),d=0;for(let p=0;p<i.events.length;p++,d++){let v=i.events[p],w=s.findEvent(v.name);if(!w)throw new Error("Event not found: "+v.name);let C=new xs(D.toSinglePrecision(mt(v,"time",0)),w);C.intValue=mt(v,"int",w.intValue),C.floatValue=mt(v,"float",w.floatValue),C.stringValue=mt(v,"string",w.stringValue),C.data.audioPath&&(C.volume=mt(v,"volume",1),C.balance=mt(v,"balance",0)),c.setFrame(d,C);}r.push(c);}let m=0;for(let c=0,d=r.length;c<d;c++)m=Math.max(m,r[c].getDuration());s.animations.push(new rt(e,r,m));}},ve=class{parent;skin;slotIndex;mesh;inheritTimeline;constructor(i,e,s,n,r){this.mesh=i,this.skin=e,this.slotIndex=s,this.parent=n,this.inheritTimeline=r;}};function Qt(i,e,s,n){let r=i[0],m=mt(r,"time",0),c=mt(r,"value",s)*n,d=0;for(let p=0;;p++){e.setFrame(p,m,c);let v=i[p+1];if(!v)return e.shrink(d),e;let w=mt(v,"time",0),C=mt(v,"value",s)*n;r.curve&&(d=zt(r.curve,e,d,p,0,m,w,c,C,n)),m=w,c=C,r=v;}}function oe(i,e,s,n,r,m){let c=i[0],d=mt(c,"time",0),p=mt(c,s,r)*m,v=mt(c,n,r)*m,w=0;for(let C=0;;C++){e.setFrame(C,d,p,v);let F=i[C+1];if(!F)return e.shrink(w),e;let V=mt(F,"time",0),B=mt(F,s,r)*m,z=mt(F,n,r)*m,W=c.curve;W&&(w=zt(W,e,w,C,0,d,V,p,B,m),w=zt(W,e,w,C,1,d,V,v,z,m)),d=V,p=B,v=z,c=F;}}function zt(i,e,s,n,r,m,c,d,p,v){if(i=="stepped")return e.setStepped(n),s;let w=r<<2,C=i[w],F=i[w+1]*v,V=i[w+2],B=i[w+3]*v;return e.setBezier(s,n,r,m,d,C,F,V,B,c,p),s+1}function mt(i,e,s){return i[e]!==void 0?i[e]:s}typeof Math.fround>"u"&&(Math.fround=(function(i){return function(e){return i[0]=e,i[0]}})(new Float32Array(1)));var Jt=class{canvas;gl;restorables=[];constructor(i,e={alpha:true}){if(i instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext)this.gl=i,this.canvas=this.gl.canvas;else {let s=i;this.gl=s.getContext("webgl2",e)||s.getContext("webgl",e),this.canvas=s,s.addEventListener("webglcontextlost",this.contextLostHandler),s.addEventListener("webglcontextrestored",this.contextRestoredHandler);}}contextLostHandler=i=>{i&&i.preventDefault();};contextRestoredHandler=()=>{for(let i=0,e=this.restorables.length;i<e;i++)this.restorables[i].restore();};dispose(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler);}addRestorable(i){this.restorables.push(i);}removeRestorable(i){let e=this.restorables.indexOf(i);e>-1&&this.restorables.splice(e,1);}},ee=class kr extends _i{context;texture=null;boundUnit=0;useMipMaps=false;static DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=false;constructor(e,s,n=false){super(s),this.context=e instanceof Jt?e:new Jt(e),this.useMipMaps=n,this.restore(),this.context.addRestorable(this);}setFilters(e,s){let n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,kr.validateMagFilter(s)),this.useMipMaps=kr.usesMipMaps(e),this.useMipMaps&&n.generateMipmap(n.TEXTURE_2D);}static validateMagFilter(e){switch(e){case 9987:case 9985:case 9986:case 9984:return 9729;default:return e}}static usesMipMaps(e){switch(e){case 9987:case 9985:case 9986:case 9984:return  true;default:return  false}}setWraps(e,s){let n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,s);}update(e){let s=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,this._image),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,e?s.LINEAR_MIPMAP_LINEAR:s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),e&&s.generateMipmap(s.TEXTURE_2D);}restore(){this.texture=null,this.update(this.useMipMaps);}bind(e=0){let s=this.context.gl;this.boundUnit=e,s.activeTexture(s.TEXTURE0+e),s.bindTexture(s.TEXTURE_2D,this.texture);}unbind(){let e=this.context.gl;e.activeTexture(e.TEXTURE0+this.boundUnit),e.bindTexture(e.TEXTURE_2D,null);}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture);}},he=class extends wi{constructor(i,e="",s=new ps){super(n=>new ee(i,n),e,s);}},$t=class{x=0;y=0;z=0;constructor(i=0,e=0,s=0){this.x=i,this.y=e,this.z=s;}setFrom(i){return this.x=i.x,this.y=i.y,this.z=i.z,this}set(i,e,s){return this.x=i,this.y=e,this.z=s,this}add(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z,this}sub(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z,this}scale(i){return this.x*=i,this.y*=i,this.z*=i,this}normalize(){let i=this.length();return i==0?this:(i=1/i,this.x*=i,this.y*=i,this.z*=i,this)}cross(i){return this.set(this.y*i.z-this.z*i.y,this.z*i.x-this.x*i.z,this.x*i.y-this.y*i.x)}multiply(i){let e=i.values;return this.set(this.x*e[Ot]+this.y*e[Wt]+this.z*e[Nt]+e[jt],this.x*e[te]+this.y*e[le]+this.z*e[ce]+e[de],this.x*e[Me]+this.y*e[Zt]+this.z*e[qt]+e[se])}project(i){let e=i.values,s=1/(this.x*e[re]+this.y*e[ge]+this.z*e[we]+e[pe]);return this.set((this.x*e[Ot]+this.y*e[Wt]+this.z*e[Nt]+e[jt])*s,(this.x*e[te]+this.y*e[le]+this.z*e[ce]+e[de])*s,(this.x*e[Me]+this.y*e[Zt]+this.z*e[qt]+e[se])*s)}dot(i){return this.x*i.x+this.y*i.y+this.z*i.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(i){let e=i.x-this.x,s=i.y-this.y,n=i.z-this.z;return Math.sqrt(e*e+s*s+n*n)}},Ot=0,Wt=4,Nt=8,jt=12,te=1,le=5,ce=9,de=13,Me=2,Zt=6,qt=10,se=14,re=3,ge=7,we=11,pe=15,Pi=class Fi{temp=new Float32Array(16);values=new Float32Array(16);static xAxis=new $t;static yAxis=new $t;static zAxis=new $t;static tmpMatrix=new Fi;constructor(){let e=this.values;e[Ot]=1,e[le]=1,e[qt]=1,e[pe]=1;}set(e){return this.values.set(e),this}transpose(){let e=this.temp,s=this.values;return e[Ot]=s[Ot],e[Wt]=s[te],e[Nt]=s[Me],e[jt]=s[re],e[te]=s[Wt],e[le]=s[le],e[ce]=s[Zt],e[de]=s[ge],e[Me]=s[Nt],e[Zt]=s[ce],e[qt]=s[qt],e[se]=s[we],e[re]=s[jt],e[ge]=s[de],e[we]=s[se],e[pe]=s[pe],this.set(e)}identity(){let e=this.values;return e[Ot]=1,e[Wt]=0,e[Nt]=0,e[jt]=0,e[te]=0,e[le]=1,e[ce]=0,e[de]=0,e[Me]=0,e[Zt]=0,e[qt]=1,e[se]=0,e[re]=0,e[ge]=0,e[we]=0,e[pe]=1,this}invert(){let e=this.values,s=this.temp,n=e[re]*e[Zt]*e[ce]*e[jt]-e[Me]*e[ge]*e[ce]*e[jt]-e[re]*e[le]*e[qt]*e[jt]+e[te]*e[ge]*e[qt]*e[jt]+e[Me]*e[le]*e[we]*e[jt]-e[te]*e[Zt]*e[we]*e[jt]-e[re]*e[Zt]*e[Nt]*e[de]+e[Me]*e[ge]*e[Nt]*e[de]+e[re]*e[Wt]*e[qt]*e[de]-e[Ot]*e[ge]*e[qt]*e[de]-e[Me]*e[Wt]*e[we]*e[de]+e[Ot]*e[Zt]*e[we]*e[de]+e[re]*e[le]*e[Nt]*e[se]-e[te]*e[ge]*e[Nt]*e[se]-e[re]*e[Wt]*e[ce]*e[se]+e[Ot]*e[ge]*e[ce]*e[se]+e[te]*e[Wt]*e[we]*e[se]-e[Ot]*e[le]*e[we]*e[se]-e[Me]*e[le]*e[Nt]*e[pe]+e[te]*e[Zt]*e[Nt]*e[pe]+e[Me]*e[Wt]*e[ce]*e[pe]-e[Ot]*e[Zt]*e[ce]*e[pe]-e[te]*e[Wt]*e[qt]*e[pe]+e[Ot]*e[le]*e[qt]*e[pe];if(n==0)throw new Error("non-invertible matrix");let r=1/n;return s[Ot]=e[ce]*e[se]*e[ge]-e[de]*e[qt]*e[ge]+e[de]*e[Zt]*e[we]-e[le]*e[se]*e[we]-e[ce]*e[Zt]*e[pe]+e[le]*e[qt]*e[pe],s[Wt]=e[jt]*e[qt]*e[ge]-e[Nt]*e[se]*e[ge]-e[jt]*e[Zt]*e[we]+e[Wt]*e[se]*e[we]+e[Nt]*e[Zt]*e[pe]-e[Wt]*e[qt]*e[pe],s[Nt]=e[Nt]*e[de]*e[ge]-e[jt]*e[ce]*e[ge]+e[jt]*e[le]*e[we]-e[Wt]*e[de]*e[we]-e[Nt]*e[le]*e[pe]+e[Wt]*e[ce]*e[pe],s[jt]=e[jt]*e[ce]*e[Zt]-e[Nt]*e[de]*e[Zt]-e[jt]*e[le]*e[qt]+e[Wt]*e[de]*e[qt]+e[Nt]*e[le]*e[se]-e[Wt]*e[ce]*e[se],s[te]=e[de]*e[qt]*e[re]-e[ce]*e[se]*e[re]-e[de]*e[Me]*e[we]+e[te]*e[se]*e[we]+e[ce]*e[Me]*e[pe]-e[te]*e[qt]*e[pe],s[le]=e[Nt]*e[se]*e[re]-e[jt]*e[qt]*e[re]+e[jt]*e[Me]*e[we]-e[Ot]*e[se]*e[we]-e[Nt]*e[Me]*e[pe]+e[Ot]*e[qt]*e[pe],s[ce]=e[jt]*e[ce]*e[re]-e[Nt]*e[de]*e[re]-e[jt]*e[te]*e[we]+e[Ot]*e[de]*e[we]+e[Nt]*e[te]*e[pe]-e[Ot]*e[ce]*e[pe],s[de]=e[Nt]*e[de]*e[Me]-e[jt]*e[ce]*e[Me]+e[jt]*e[te]*e[qt]-e[Ot]*e[de]*e[qt]-e[Nt]*e[te]*e[se]+e[Ot]*e[ce]*e[se],s[Me]=e[le]*e[se]*e[re]-e[de]*e[Zt]*e[re]+e[de]*e[Me]*e[ge]-e[te]*e[se]*e[ge]-e[le]*e[Me]*e[pe]+e[te]*e[Zt]*e[pe],s[Zt]=e[jt]*e[Zt]*e[re]-e[Wt]*e[se]*e[re]-e[jt]*e[Me]*e[ge]+e[Ot]*e[se]*e[ge]+e[Wt]*e[Me]*e[pe]-e[Ot]*e[Zt]*e[pe],s[qt]=e[Wt]*e[de]*e[re]-e[jt]*e[le]*e[re]+e[jt]*e[te]*e[ge]-e[Ot]*e[de]*e[ge]-e[Wt]*e[te]*e[pe]+e[Ot]*e[le]*e[pe],s[se]=e[jt]*e[le]*e[Me]-e[Wt]*e[de]*e[Me]-e[jt]*e[te]*e[Zt]+e[Ot]*e[de]*e[Zt]+e[Wt]*e[te]*e[se]-e[Ot]*e[le]*e[se],s[re]=e[ce]*e[Zt]*e[re]-e[le]*e[qt]*e[re]-e[ce]*e[Me]*e[ge]+e[te]*e[qt]*e[ge]+e[le]*e[Me]*e[we]-e[te]*e[Zt]*e[we],s[ge]=e[Wt]*e[qt]*e[re]-e[Nt]*e[Zt]*e[re]+e[Nt]*e[Me]*e[ge]-e[Ot]*e[qt]*e[ge]-e[Wt]*e[Me]*e[we]+e[Ot]*e[Zt]*e[we],s[we]=e[Nt]*e[le]*e[re]-e[Wt]*e[ce]*e[re]-e[Nt]*e[te]*e[ge]+e[Ot]*e[ce]*e[ge]+e[Wt]*e[te]*e[we]-e[Ot]*e[le]*e[we],s[pe]=e[Wt]*e[ce]*e[Me]-e[Nt]*e[le]*e[Me]+e[Nt]*e[te]*e[Zt]-e[Ot]*e[ce]*e[Zt]-e[Wt]*e[te]*e[qt]+e[Ot]*e[le]*e[qt],e[Ot]=s[Ot]*r,e[Wt]=s[Wt]*r,e[Nt]=s[Nt]*r,e[jt]=s[jt]*r,e[te]=s[te]*r,e[le]=s[le]*r,e[ce]=s[ce]*r,e[de]=s[de]*r,e[Me]=s[Me]*r,e[Zt]=s[Zt]*r,e[qt]=s[qt]*r,e[se]=s[se]*r,e[re]=s[re]*r,e[ge]=s[ge]*r,e[we]=s[we]*r,e[pe]=s[pe]*r,this}determinant(){let e=this.values;return e[re]*e[Zt]*e[ce]*e[jt]-e[Me]*e[ge]*e[ce]*e[jt]-e[re]*e[le]*e[qt]*e[jt]+e[te]*e[ge]*e[qt]*e[jt]+e[Me]*e[le]*e[we]*e[jt]-e[te]*e[Zt]*e[we]*e[jt]-e[re]*e[Zt]*e[Nt]*e[de]+e[Me]*e[ge]*e[Nt]*e[de]+e[re]*e[Wt]*e[qt]*e[de]-e[Ot]*e[ge]*e[qt]*e[de]-e[Me]*e[Wt]*e[we]*e[de]+e[Ot]*e[Zt]*e[we]*e[de]+e[re]*e[le]*e[Nt]*e[se]-e[te]*e[ge]*e[Nt]*e[se]-e[re]*e[Wt]*e[ce]*e[se]+e[Ot]*e[ge]*e[ce]*e[se]+e[te]*e[Wt]*e[we]*e[se]-e[Ot]*e[le]*e[we]*e[se]-e[Me]*e[le]*e[Nt]*e[pe]+e[te]*e[Zt]*e[Nt]*e[pe]+e[Me]*e[Wt]*e[ce]*e[pe]-e[Ot]*e[Zt]*e[ce]*e[pe]-e[te]*e[Wt]*e[qt]*e[pe]+e[Ot]*e[le]*e[qt]*e[pe]}translate(e,s,n){let r=this.values;return r[jt]+=e,r[de]+=s,r[se]+=n,this}copy(){return new Fi().set(this.values)}projection(e,s,n,r){this.identity();let m=1/Math.tan(n*(Math.PI/180)/2),c=(s+e)/(e-s),d=2*s*e/(e-s),p=this.values;return p[Ot]=m/r,p[te]=0,p[Me]=0,p[re]=0,p[Wt]=0,p[le]=m,p[Zt]=0,p[ge]=0,p[Nt]=0,p[ce]=0,p[qt]=c,p[we]=-1,p[jt]=0,p[de]=0,p[se]=d,p[pe]=0,this}ortho2d(e,s,n,r){return this.ortho(e,e+n,s,s+r,0,1)}ortho(e,s,n,r,m,c){this.identity();let d=2/(s-e),p=2/(r-n),v=-2/(c-m),w=-(s+e)/(s-e),C=-(r+n)/(r-n),F=-(c+m)/(c-m),V=this.values;return V[Ot]=d,V[te]=0,V[Me]=0,V[re]=0,V[Wt]=0,V[le]=p,V[Zt]=0,V[ge]=0,V[Nt]=0,V[ce]=0,V[qt]=v,V[we]=0,V[jt]=w,V[de]=C,V[se]=F,V[pe]=1,this}multiply(e){let s=this.temp,n=this.values,r=e.values;return s[Ot]=n[Ot]*r[Ot]+n[Wt]*r[te]+n[Nt]*r[Me]+n[jt]*r[re],s[Wt]=n[Ot]*r[Wt]+n[Wt]*r[le]+n[Nt]*r[Zt]+n[jt]*r[ge],s[Nt]=n[Ot]*r[Nt]+n[Wt]*r[ce]+n[Nt]*r[qt]+n[jt]*r[we],s[jt]=n[Ot]*r[jt]+n[Wt]*r[de]+n[Nt]*r[se]+n[jt]*r[pe],s[te]=n[te]*r[Ot]+n[le]*r[te]+n[ce]*r[Me]+n[de]*r[re],s[le]=n[te]*r[Wt]+n[le]*r[le]+n[ce]*r[Zt]+n[de]*r[ge],s[ce]=n[te]*r[Nt]+n[le]*r[ce]+n[ce]*r[qt]+n[de]*r[we],s[de]=n[te]*r[jt]+n[le]*r[de]+n[ce]*r[se]+n[de]*r[pe],s[Me]=n[Me]*r[Ot]+n[Zt]*r[te]+n[qt]*r[Me]+n[se]*r[re],s[Zt]=n[Me]*r[Wt]+n[Zt]*r[le]+n[qt]*r[Zt]+n[se]*r[ge],s[qt]=n[Me]*r[Nt]+n[Zt]*r[ce]+n[qt]*r[qt]+n[se]*r[we],s[se]=n[Me]*r[jt]+n[Zt]*r[de]+n[qt]*r[se]+n[se]*r[pe],s[re]=n[re]*r[Ot]+n[ge]*r[te]+n[we]*r[Me]+n[pe]*r[re],s[ge]=n[re]*r[Wt]+n[ge]*r[le]+n[we]*r[Zt]+n[pe]*r[ge],s[we]=n[re]*r[Nt]+n[ge]*r[ce]+n[we]*r[qt]+n[pe]*r[we],s[pe]=n[re]*r[jt]+n[ge]*r[de]+n[we]*r[se]+n[pe]*r[pe],this.set(this.temp)}multiplyLeft(e){let s=this.temp,n=this.values,r=e.values;return s[Ot]=r[Ot]*n[Ot]+r[Wt]*n[te]+r[Nt]*n[Me]+r[jt]*n[re],s[Wt]=r[Ot]*n[Wt]+r[Wt]*n[le]+r[Nt]*n[Zt]+r[jt]*n[ge],s[Nt]=r[Ot]*n[Nt]+r[Wt]*n[ce]+r[Nt]*n[qt]+r[jt]*n[we],s[jt]=r[Ot]*n[jt]+r[Wt]*n[de]+r[Nt]*n[se]+r[jt]*n[pe],s[te]=r[te]*n[Ot]+r[le]*n[te]+r[ce]*n[Me]+r[de]*n[re],s[le]=r[te]*n[Wt]+r[le]*n[le]+r[ce]*n[Zt]+r[de]*n[ge],s[ce]=r[te]*n[Nt]+r[le]*n[ce]+r[ce]*n[qt]+r[de]*n[we],s[de]=r[te]*n[jt]+r[le]*n[de]+r[ce]*n[se]+r[de]*n[pe],s[Me]=r[Me]*n[Ot]+r[Zt]*n[te]+r[qt]*n[Me]+r[se]*n[re],s[Zt]=r[Me]*n[Wt]+r[Zt]*n[le]+r[qt]*n[Zt]+r[se]*n[ge],s[qt]=r[Me]*n[Nt]+r[Zt]*n[ce]+r[qt]*n[qt]+r[se]*n[we],s[se]=r[Me]*n[jt]+r[Zt]*n[de]+r[qt]*n[se]+r[se]*n[pe],s[re]=r[re]*n[Ot]+r[ge]*n[te]+r[we]*n[Me]+r[pe]*n[re],s[ge]=r[re]*n[Wt]+r[ge]*n[le]+r[we]*n[Zt]+r[pe]*n[ge],s[we]=r[re]*n[Nt]+r[ge]*n[ce]+r[we]*n[qt]+r[pe]*n[we],s[pe]=r[re]*n[jt]+r[ge]*n[de]+r[we]*n[se]+r[pe]*n[pe],this.set(this.temp)}lookAt(e,s,n){let r=Fi.xAxis,m=Fi.yAxis,c=Fi.zAxis;c.setFrom(s).normalize(),r.setFrom(s).normalize(),r.cross(n).normalize(),m.setFrom(r).cross(c).normalize(),this.identity();let d=this.values;return d[Ot]=r.x,d[Wt]=r.y,d[Nt]=r.z,d[te]=m.x,d[le]=m.y,d[ce]=m.z,d[Me]=-c.x,d[Zt]=-c.y,d[qt]=-c.z,Fi.tmpMatrix.identity(),Fi.tmpMatrix.values[jt]=-e.x,Fi.tmpMatrix.values[de]=-e.y,Fi.tmpMatrix.values[se]=-e.z,this.multiply(Fi.tmpMatrix),this}},Qs=class{position=new $t(0,0,0);direction=new $t(0,0,-1);up=new $t(0,1,0);near=0;far=100;zoom=1;viewportWidth=0;viewportHeight=0;projectionView=new Pi;inverseProjectionView=new Pi;projection=new Pi;view=new Pi;constructor(i,e){this.viewportWidth=i,this.viewportHeight=e,this.update();}update(){let i=this.projection,e=this.view,s=this.projectionView,n=this.inverseProjectionView,r=this.zoom,m=this.viewportWidth,c=this.viewportHeight;i.ortho(r*(-m/2),r*(m/2),r*(-c/2),r*(c/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),s.set(i.values),s.multiply(e),n.set(s.values).invert();}screenToWorld(i,e,s){let n=i.x,r=s-i.y-1;return i.x=2*n/e-1,i.y=2*r/s-1,i.z=2*i.z-1,i.project(this.inverseProjectionView),i}worldToScreen(i,e,s){return i.project(this.projectionView),i.x=e*(i.x+1)/2,i.y=s*(i.y+1)/2,i.z=(i.z+1)/2,i}setViewport(i,e){this.viewportWidth=i,this.viewportHeight=e;}},Ti=class{element;mouseX=0;mouseY=0;buttonDown=false;touch0=null;touch1=null;initialPinchDistance=0;listeners=new Array;autoPreventDefault;isTouch=false;callbacks;constructor(i,e=true){this.element=i,this.autoPreventDefault=e,this.callbacks=this.setupCallbacks(i);}setupCallbacks(i){let e=p=>{if(p instanceof MouseEvent&&!this.isTouch){let v=i.getBoundingClientRect();this.mouseX=p.clientX-v.left,this.mouseY=p.clientY-v.top,this.buttonDown=true,this.listeners.map(w=>{w.down&&w.down(this.mouseX,this.mouseY,p);});}},s=p=>{if(p instanceof MouseEvent&&!this.isTouch){let v=i.getBoundingClientRect();this.mouseX=p.clientX-v.left,this.mouseY=p.clientY-v.top,this.listeners.map(w=>{this.buttonDown?w.dragged&&w.dragged(this.mouseX,this.mouseY,p):w.moved&&w.moved(this.mouseX,this.mouseY,p);});}},n=p=>{if(p instanceof MouseEvent&&!this.isTouch){let v=i.getBoundingClientRect();this.mouseX=p.clientX-v.left,this.mouseY=p.clientY-v.top,this.buttonDown=false,this.listeners.map(w=>{w.up&&w.up(this.mouseX,this.mouseY,p);});}},r=p=>{this.autoPreventDefault&&p.preventDefault();let v=p.deltaY;p.deltaMode==WheelEvent.DOM_DELTA_LINE&&(v*=8),p.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(v*=24),this.listeners.map(w=>{w.wheel&&w.wheel(p.deltaY,p);});},m=p=>{if(this.isTouch=true,!this.touch0||!this.touch1){var v=p.changedTouches;let w=v.item(0);if(!w)return;let C=i.getBoundingClientRect(),F=w.clientX-C.left,V=w.clientY-C.top,B=new bs(w.identifier,F,V);if(this.mouseX=F,this.mouseY=V,this.buttonDown=true,!this.touch0)this.touch0=B,this.listeners.map(z=>{z.down&&z.down(B.x,B.y,p);});else if(!this.touch1){this.touch1=B;let z=this.touch1.x-this.touch0.x,W=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(z*z+W*W),this.listeners.map(Z=>{Z.zoom&&Z.zoom(this.initialPinchDistance,this.initialPinchDistance,p);});}}this.autoPreventDefault&&p.preventDefault();},c=p=>{if(this.isTouch=true,this.touch0){var v=p.changedTouches;let F=i.getBoundingClientRect();for(var w=0;w<v.length;w++){var C=v[w];let V=C.clientX-F.left,B=C.clientY-F.top;this.touch0.identifier===C.identifier&&(this.touch0.x=this.mouseX=V,this.touch0.y=this.mouseY=B,this.listeners.map(z=>{z.dragged&&z.dragged(V,B,p);})),this.touch1&&this.touch1.identifier===C.identifier&&(this.touch1.x=this.mouseX=V,this.touch1.y=this.mouseY=B);}if(this.touch0&&this.touch1){let V=this.touch1.x-this.touch0.x,B=this.touch1.x-this.touch0.x,z=Math.sqrt(V*V+B*B);this.listeners.map(W=>{W.zoom&&W.zoom(this.initialPinchDistance,z,p);});}}this.autoPreventDefault&&p.preventDefault();},d=p=>{if(this.isTouch=true,this.touch0){var v=p.changedTouches;let F=i.getBoundingClientRect();for(var w=0;w<v.length;w++){var C=v[w];let V=C.clientX-F.left,B=C.clientY-F.top;if(this.touch0.identifier===C.identifier)if(this.touch0=null,this.mouseX=V,this.mouseY=B,this.listeners.map(z=>{z.up&&z.up(V,B,p);}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=true,this.listeners.map(z=>{z.down&&z.down(this.touch0.x,this.touch0.y,p);});else {this.buttonDown=false;break}this.touch1&&this.touch1.identifier&&(this.touch1=null);}}this.autoPreventDefault&&p.preventDefault();};return i.addEventListener("mousedown",e,true),i.addEventListener("mousemove",s,true),i.addEventListener("mouseup",n,true),i.addEventListener("wheel",r,true),i.addEventListener("touchstart",m,{passive:false,capture:false}),i.addEventListener("touchmove",c,{passive:false,capture:false}),i.addEventListener("touchend",d,{passive:false,capture:false}),i.addEventListener("touchcancel",d),{mouseDown:e,mouseMove:s,mouseUp:n,mouseWheel:r,touchStart:m,touchMove:c,touchEnd:d}}dispose(){let i=this.element;i.removeEventListener("mousedown",this.callbacks.mouseDown,true),i.removeEventListener("mousemove",this.callbacks.mouseMove,true),i.removeEventListener("mouseup",this.callbacks.mouseUp,true),i.removeEventListener("wheel",this.callbacks.mouseWheel,true),i.removeEventListener("touchstart",this.callbacks.touchStart,{capture:false}),i.removeEventListener("touchmove",this.callbacks.touchMove,{capture:false}),i.removeEventListener("touchend",this.callbacks.touchEnd,{capture:false}),i.removeEventListener("touchcancel",this.callbacks.touchEnd),this.listeners.length=0;}addListener(i){this.listeners.push(i);}removeListener(i){let e=this.listeners.indexOf(i);e>-1&&this.listeners.splice(e,1);}},bs=class{constructor(i,e,s){this.identifier=i,this.x=e,this.y=s;}},Ks=class{constructor(i,e){this.canvas=i,this.camera=e;let s=0,n=0,m=0,c=0,d=0,p=0,v=0;new Ti(i).addListener({down:(w,C)=>{s=e.position.x,n=e.position.y,m=d=w,c=p=C,v=e.zoom;},dragged:(w,C)=>{let F=w-m,V=C-c,B=e.screenToWorld(new $t(0,0),i.clientWidth,i.clientHeight),z=e.screenToWorld(new $t(F,V),i.clientWidth,i.clientHeight).sub(B);e.position.set(s-z.x,n-z.y,0),e.update(),d=w,p=C;},wheel:w=>{let C=w/200*e.zoom,F=e.zoom+C;if(F>0){let V=0,B=0;if(w<0)V=d,B=p;else {let Z=new $t(i.clientWidth/2+15,i.clientHeight/2),J=d-Z.x,j=i.clientHeight-1-p-Z.y;V=Z.x-J,B=i.clientHeight-1-Z.y+j;}let z=e.screenToWorld(new $t(V,B),i.clientWidth,i.clientHeight);e.zoom=F,e.update();let W=e.screenToWorld(new $t(V,B),i.clientWidth,i.clientHeight);e.position.add(z.sub(W)),e.update();}},zoom:(w,C)=>{let F=w/C;e.zoom=v*F;},up:(w,C)=>{d=w,p=C;},moved:(w,C)=>{d=w,p=C;}});}},Oe=class Ne{constructor(e,s,n){this.vertexShader=s,this.fragmentShader=n,this.vsSource=s,this.fsSource=n,this.context=e instanceof Jt?e:new Jt(e),this.context.addRestorable(this),this.compile();}static MVP_MATRIX="u_projTrans";static POSITION="a_position";static COLOR="a_color";static COLOR2="a_color2";static TEXCOORDS="a_texCoords";static SAMPLER="u_texture";context;vs=null;vsSource;fs=null;fsSource;program=null;tmp2x2=new Float32Array(4);tmp3x3=new Float32Array(9);tmp4x4=new Float32Array(16);getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let e=this.context.gl;try{if(this.vs=this.compileShader(e.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(e.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs);}catch(s){throw this.dispose(),s}}compileShader(e,s){let n=this.context.gl,r=n.createShader(e);if(!r)throw new Error("Couldn't create shader.");if(n.shaderSource(r,s),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){let m="Couldn't compile shader: "+n.getShaderInfoLog(r);if(n.deleteShader(r),!n.isContextLost())throw new Error(m)}return r}compileProgram(e,s){let n=this.context.gl,r=n.createProgram();if(!r)throw new Error("Couldn't compile program.");if(n.attachShader(r,e),n.attachShader(r,s),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS)){let m="Couldn't compile shader program: "+n.getProgramInfoLog(r);if(n.deleteProgram(r),!n.isContextLost())throw new Error(m)}return r}restore(){this.compile();}bind(){this.context.gl.useProgram(this.program);}unbind(){this.context.gl.useProgram(null);}setUniformi(e,s){this.context.gl.uniform1i(this.getUniformLocation(e),s);}setUniformf(e,s){this.context.gl.uniform1f(this.getUniformLocation(e),s);}setUniform2f(e,s,n){this.context.gl.uniform2f(this.getUniformLocation(e),s,n);}setUniform3f(e,s,n,r){this.context.gl.uniform3f(this.getUniformLocation(e),s,n,r);}setUniform4f(e,s,n,r,m){this.context.gl.uniform4f(this.getUniformLocation(e),s,n,r,m);}setUniform2x2f(e,s){let n=this.context.gl;this.tmp2x2.set(s),n.uniformMatrix2fv(this.getUniformLocation(e),false,this.tmp2x2);}setUniform3x3f(e,s){let n=this.context.gl;this.tmp3x3.set(s),n.uniformMatrix3fv(this.getUniformLocation(e),false,this.tmp3x3);}setUniform4x4f(e,s){let n=this.context.gl;this.tmp4x4.set(s),n.uniformMatrix4fv(this.getUniformLocation(e),false,this.tmp4x4);}getUniformLocation(e){let s=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let n=s.getUniformLocation(this.program,e);if(!n&&!s.isContextLost())throw new Error(`Couldn't find location for uniform ${e}`);return n}getAttributeLocation(e){let s=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let n=s.getAttribLocation(this.program,e);if(n==-1&&!s.isContextLost())throw new Error(`Couldn't find location for attribute ${e}`);return n}dispose(){this.context.removeRestorable(this);let e=this.context.gl;this.vs&&(e.deleteShader(this.vs),this.vs=null),this.fs&&(e.deleteShader(this.fs),this.fs=null),this.program&&(e.deleteProgram(this.program),this.program=null);}static newColoredTextured(e){let s=`
attribute vec4 ${Ne.POSITION};
attribute vec4 ${Ne.COLOR};
attribute vec2 ${Ne.TEXCOORDS};
uniform mat4 ${Ne.MVP_MATRIX};
varying vec4 v_color;
varying vec2 v_texCoords;

void main () {
	v_color = ${Ne.COLOR};
	v_texCoords = ${Ne.TEXCOORDS};
	gl_Position = ${Ne.MVP_MATRIX} * ${Ne.POSITION};
}
`,n=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
}
`;return new Ne(e,s,n)}static newTwoColoredTextured(e){let s=`
attribute vec4 ${Ne.POSITION};
attribute vec4 ${Ne.COLOR};
attribute vec4 ${Ne.COLOR2};
attribute vec2 ${Ne.TEXCOORDS};
uniform mat4 ${Ne.MVP_MATRIX};
varying vec4 v_light;
varying vec4 v_dark;
varying vec2 v_texCoords;

void main () {
	v_light = ${Ne.COLOR};
	v_dark = ${Ne.COLOR2};
	v_texCoords = ${Ne.TEXCOORDS};
	gl_Position = ${Ne.MVP_MATRIX} * ${Ne.POSITION};
}
`,n=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_light;
varying LOWP vec4 v_dark;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	vec4 texColor = texture2D(u_texture, v_texCoords);
	gl_FragColor.a = texColor.a * v_light.a;
	gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
}
`;return new Ne(e,s,n)}static newColored(e){let s=`
attribute vec4 ${Ne.POSITION};
attribute vec4 ${Ne.COLOR};
uniform mat4 ${Ne.MVP_MATRIX};
varying vec4 v_color;

void main () {
	v_color = ${Ne.COLOR};
	gl_Position = ${Ne.MVP_MATRIX} * ${Ne.POSITION};
}
`,n=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;

void main () {
	gl_FragColor = v_color;
}
`;return new Ne(e,s,n)}},Wi=class{constructor(i,e,s,n){this.attributes=e,this.context=i instanceof Jt?i:new Jt(i),this.elementsPerVertex=0;for(let r=0;r<e.length;r++)this.elementsPerVertex+=e[r].numElements;this.vertices=new Float32Array(s*this.elementsPerVertex),this.indices=new Uint16Array(n),this.context.addRestorable(this);}context;vertices;verticesBuffer=null;verticesLength=0;dirtyVertices=false;indices;indicesBuffer=null;indicesLength=0;dirtyIndices=false;elementsPerVertex=0;getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(i){this.dirtyVertices=true,this.verticesLength=i;}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(i){this.dirtyIndices=true,this.indicesLength=i;}getIndices(){return this.indices}getVertexSizeInFloats(){let i=0;for(var e=0;e<this.attributes.length;e++){let s=this.attributes[e];i+=s.numElements;}return i}setVertices(i){if(this.dirtyVertices=true,i.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(i,0),this.verticesLength=i.length;}setIndices(i){if(this.dirtyIndices=true,i.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(i,0),this.indicesLength=i.length;}draw(i,e){this.drawWithOffset(i,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex);}drawWithOffset(i,e,s,n){let r=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(i),this.indicesLength>0?r.drawElements(e,n,r.UNSIGNED_SHORT,s*2):r.drawArrays(e,s,n),this.unbind(i);}bind(i){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let s=0;for(let n=0;n<this.attributes.length;n++){let r=this.attributes[n],m=i.getAttributeLocation(r.name);e.enableVertexAttribArray(m),e.vertexAttribPointer(m,r.numElements,e.FLOAT,false,this.elementsPerVertex*4,s*4),s+=r.numElements;}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);}unbind(i){let e=this.context.gl;for(let s=0;s<this.attributes.length;s++){let n=this.attributes[s],r=i.getAttributeLocation(n.name);e.disableVertexAttribArray(r);}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);}update(){let i=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,this.verticesBuffer),i.bufferData(i.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),i.DYNAMIC_DRAW),this.dirtyVertices=false),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=i.createBuffer()),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),i.DYNAMIC_DRAW),this.dirtyIndices=false);}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update();}dispose(){this.context.removeRestorable(this);let i=this.context.gl;i.deleteBuffer(this.verticesBuffer),i.deleteBuffer(this.indicesBuffer);}},Ci=class{constructor(i,e,s){this.name=i,this.type=e,this.numElements=s;}},Ts=class extends Ci{constructor(){super(Oe.POSITION,0,2);}},yr=class extends Ci{constructor(){super(Oe.POSITION,0,3);}},rs=class extends Ci{constructor(i=0){super(Oe.TEXCOORDS+(i==0?"":i),0,2);}},wt=class extends Ci{constructor(){super(Oe.COLOR,0,4);}},ns=class extends Ci{constructor(){super(Oe.COLOR2,0,4);}},as=(i=>(i[i.Float=0]="Float",i))(as||{}),Ii=1,Gi=769,zi=770,Vi=771,$s=774,tr=class ls{static disableCulling=false;context;drawCalls=0;static globalDrawCalls=0;isDrawing=false;mesh;shader=null;lastTexture=null;verticesLength=0;indicesLength=0;srcColorBlend;srcAlphaBlend;dstBlend;cullWasEnabled=false;constructor(e,s=true,n=10920){if(n>10920)throw new Error("Can't have more than 10920 triangles per batch: "+n);this.context=e instanceof Jt?e:new Jt(e);let r=s?[new Ts,new wt,new rs,new ns]:[new Ts,new wt,new rs];this.mesh=new Wi(e,r,n,n*3);let m=this.context.gl;this.srcColorBlend=m.SRC_ALPHA,this.srcAlphaBlend=m.ONE,this.dstBlend=m.ONE_MINUS_SRC_ALPHA;}begin(e){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=e,this.lastTexture=null,this.isDrawing=true;let s=this.context.gl;s.enable(s.BLEND),s.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}static blendModesGL=[{srcRgb:zi,srcRgbPma:Ii,dstRgb:Vi,srcAlpha:Ii},{srcRgb:zi,srcRgbPma:Ii,dstRgb:Ii,srcAlpha:Ii},{srcRgb:$s,srcRgbPma:$s,dstRgb:Vi,srcAlpha:Ii},{srcRgb:Ii,srcRgbPma:Ii,dstRgb:Gi,srcAlpha:Ii}];setBlendMode(e,s){let n=ls.blendModesGL[e],r=s?n.srcRgbPma:n.srcRgb,m=n.srcAlpha,c=n.dstRgb;this.srcColorBlend==r&&this.srcAlphaBlend==m&&this.dstBlend==c||(this.srcColorBlend=r,this.srcAlphaBlend=m,this.dstBlend=c,this.isDrawing&&this.flush(),this.context.gl.blendFuncSeparate(r,c,m,c));}draw(e,s,n){e!=this.lastTexture?(this.flush(),this.lastTexture=e):(this.verticesLength+s.length>this.mesh.getVertices().length||this.indicesLength+n.length>this.mesh.getIndices().length)&&this.flush();let r=this.mesh.numVertices();this.mesh.getVertices().set(s,this.verticesLength),this.verticesLength+=s.length,this.mesh.setVerticesLength(this.verticesLength);let m=this.mesh.getIndices();for(let c=this.indicesLength,d=0;d<n.length;c++,d++)m[c]=n[d]+r;this.indicesLength+=n.length,this.mesh.setIndicesLength(this.indicesLength);}flush(){if(this.verticesLength!=0){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,ls.globalDrawCalls++;}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=false;let e=this.context.gl;e.disable(e.BLEND);}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let e=ls.globalDrawCalls;return ls.globalDrawCalls=0,e}dispose(){this.mesh.dispose();}},os=class{context;isDrawing=false;mesh;shapeType=4;color=new O(1,1,1,1);shader=null;vertexIndex=0;tmp=new it;srcColorBlend;srcAlphaBlend;dstBlend;constructor(i,e=10920){if(e>10920)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=i instanceof Jt?i:new Jt(i),this.mesh=new Wi(i,[new Ts,new wt],e,0);let s=this.context.gl;this.srcColorBlend=s.SRC_ALPHA,this.srcAlphaBlend=s.ONE,this.dstBlend=s.ONE_MINUS_SRC_ALPHA;}begin(i){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=i,this.vertexIndex=0,this.isDrawing=true;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend);}setBlendMode(i,e,s){this.srcColorBlend=i,this.srcAlphaBlend=e,this.dstBlend=s,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(i,s,e,s));}setColor(i){this.color.setFromColor(i);}setColorWith(i,e,s,n){this.color.set(i,e,s,n);}point(i,e,s){this.check(0,1),s||(s=this.color),this.vertex(i,e,s);}line(i,e,s,n,r){this.check(1,2);this.mesh.getVertices();this.vertexIndex;r||(r=this.color),this.vertex(i,e,r),this.vertex(s,n,r);}triangle(i,e,s,n,r,m,c,d,p,v){this.check(i?4:1,3);this.mesh.getVertices();this.vertexIndex;d||(d=this.color),p||(p=this.color),v||(v=this.color),i?(this.vertex(e,s,d),this.vertex(n,r,p),this.vertex(m,c,v)):(this.vertex(e,s,d),this.vertex(n,r,p),this.vertex(n,r,d),this.vertex(m,c,p),this.vertex(m,c,d),this.vertex(e,s,p));}quad(i,e,s,n,r,m,c,d,p,v,w,C,F){this.check(i?4:1,3);this.mesh.getVertices();this.vertexIndex;v||(v=this.color),w||(w=this.color),C||(C=this.color),F||(F=this.color),i?(this.vertex(e,s,v),this.vertex(n,r,w),this.vertex(m,c,C),this.vertex(m,c,C),this.vertex(d,p,F),this.vertex(e,s,v)):(this.vertex(e,s,v),this.vertex(n,r,w),this.vertex(n,r,w),this.vertex(m,c,C),this.vertex(m,c,C),this.vertex(d,p,F),this.vertex(d,p,F),this.vertex(e,s,v));}rect(i,e,s,n,r,m){this.quad(i,e,s,e+n,s,e+n,s+r,e,s+r,m,m,m,m);}rectLine(i,e,s,n,r,m,c){this.check(i?4:1,8),c||(c=this.color);let d=this.tmp.set(r-s,e-n);d.normalize(),m*=.5;let p=d.x*m,v=d.y*m;i?(this.vertex(e+p,s+v,c),this.vertex(e-p,s-v,c),this.vertex(n+p,r+v,c),this.vertex(n-p,r-v,c),this.vertex(n+p,r+v,c),this.vertex(e-p,s-v,c)):(this.vertex(e+p,s+v,c),this.vertex(e-p,s-v,c),this.vertex(n+p,r+v,c),this.vertex(n-p,r-v,c),this.vertex(n+p,r+v,c),this.vertex(e+p,s+v,c),this.vertex(n-p,r-v,c),this.vertex(e-p,s-v,c));}x(i,e,s){this.line(i-s,e-s,i+s,e+s),this.line(i-s,e+s,i+s,e-s);}polygon(i,e,s,n){if(s<3)throw new Error("Polygon must contain at least 3 vertices");this.check(1,s*2),n||(n=this.color);this.mesh.getVertices();this.vertexIndex;e<<=1,s<<=1;let c=i[e],d=i[e+1],p=e+s;for(let v=e,w=e+s-2;v<w;v+=2){let C=i[v],F=i[v+1],V=0,B=0;v+2>=p?(V=c,B=d):(V=i[v+2],B=i[v+3]),this.vertex(C,F,n),this.vertex(V,B,n);}}circle(i,e,s,n,r,m=0){if(m==0&&(m=Math.max(1,6*I.cbrt(n)|0)),m<=0)throw new Error("segments must be > 0.");r||(r=this.color);let c=2*I.PI/m,d=Math.cos(c),p=Math.sin(c),v=n,w=0;if(i){this.check(4,m*3+3),m--;for(let F=0;F<m;F++){this.vertex(e,s,r),this.vertex(e+v,s+w,r);let V=v;v=d*v-p*w,w=p*V+d*w,this.vertex(e+v,s+w,r);}this.vertex(e,s,r),this.vertex(e+v,s+w,r);}else {this.check(1,m*2+2);for(let F=0;F<m;F++){this.vertex(e+v,s+w,r);let V=v;v=d*v-p*w,w=p*V+d*w,this.vertex(e+v,s+w,r);}this.vertex(e+v,s+w,r);}v=n,w=0,this.vertex(e+v,s+w,r);}curve(i,e,s,n,r,m,c,d,p,v){this.check(1,p*2+2),v||(v=this.color);let w=1/p,C=w*w,F=w*w*w,V=3*w,B=3*C,z=6*C,W=6*F,Z=i-s*2+r,J=e-n*2+m,j=(s-r)*3-i+c,_=(n-m)*3-e+d,tt=i,nt=e,xt=(s-i)*V+Z*B+j*F,gt=(n-e)*V+J*B+_*F,pt=Z*z+j*W,Ct=J*z+_*W,Yt=j*W,Xt=_*W;for(;p-- >0;)this.vertex(tt,nt,v),tt+=xt,nt+=gt,xt+=pt,gt+=Ct,pt+=Yt,Ct+=Xt,this.vertex(tt,nt,v);this.vertex(tt,nt,v),this.vertex(c,d,v);}vertex(i,e,s){let n=this.vertexIndex,r=this.mesh.getVertices();r[n++]=i,r[n++]=e,r[n++]=s.r,r[n++]=s.g,r[n++]=s.b,r[n++]=s.a,this.vertexIndex=n;}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let i=this.context.gl;i.disable(i.BLEND),this.isDrawing=false;}flush(){if(this.vertexIndex!=0){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0;}}check(i,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==i)if(this.mesh.maxVertices()-this.mesh.numVertices()<e)this.flush();else return;else this.flush(),this.shapeType=i;}dispose(){this.mesh.dispose();}},er=(i=>(i[i.Point=0]="Point",i[i.Line=1]="Line",i[i.Filled=4]="Filled",i))(er||{}),ir=class nn{boneLineColor=new O(1,0,0,1);boneOriginColor=new O(0,1,0,1);attachmentLineColor=new O(0,0,1,.5);triangleLineColor=new O(1,.64,0,.5);pathColor=new O().setFromString("FF7F00");clipColor=new O(.8,0,0,2);aabbColor=new O(0,1,0,.5);drawBones=true;drawRegionAttachments=true;drawBoundingBoxes=true;drawMeshHull=true;drawMeshTriangles=true;drawPaths=true;drawSkeletonXY=false;drawClipping=true;premultipliedAlpha=false;scale=1;boneWidth=2;context;bounds=new ae;temp=new Array;vertices=D.newFloatArray(2*1024);static LIGHT_GRAY=new O(192/255,192/255,192/255,1);static GREEN=new O(0,1,0,1);constructor(e){this.context=e instanceof Jt?e:new Jt(e);}draw(e,s,n){let r=s.x,m=s.y,c=this.context.gl,d=this.premultipliedAlpha?c.ONE:c.SRC_ALPHA;e.setBlendMode(d,c.ONE,c.ONE_MINUS_SRC_ALPHA);let p=s.bones;if(this.drawBones){e.setColor(this.boneLineColor);for(let v=0,w=p.length;v<w;v++){let C=p[v];if(n&&n.indexOf(C.data.name)>-1||!C.parent)continue;let F=C.data.length*C.a+C.worldX,V=C.data.length*C.c+C.worldY;e.rectLine(true,C.worldX,C.worldY,F,V,this.boneWidth*this.scale);}this.drawSkeletonXY&&e.x(r,m,4*this.scale);}if(this.drawRegionAttachments){e.setColor(this.attachmentLineColor);let v=s.slots;for(let w=0,C=v.length;w<C;w++){let F=v[w],V=F.getAttachment();if(V instanceof Oi){let B=V,z=this.vertices;B.computeWorldVertices(F,z,0,2),e.line(z[0],z[1],z[2],z[3]),e.line(z[2],z[3],z[4],z[5]),e.line(z[4],z[5],z[6],z[7]),e.line(z[6],z[7],z[0],z[1]);}}}if(this.drawMeshHull||this.drawMeshTriangles){let v=s.slots;for(let w=0,C=v.length;w<C;w++){let F=v[w];if(!F.bone.active)continue;let V=F.getAttachment();if(!(V instanceof Li))continue;let B=V,z=this.vertices;B.computeWorldVertices(F,0,B.worldVerticesLength,z,0,2);let W=B.triangles,Z=B.hullLength;if(this.drawMeshTriangles){e.setColor(this.triangleLineColor);for(let J=0,j=W.length;J<j;J+=3){let _=W[J]*2,tt=W[J+1]*2,nt=W[J+2]*2;e.triangle(false,z[_],z[_+1],z[tt],z[tt+1],z[nt],z[nt+1]);}}if(this.drawMeshHull&&Z>0){e.setColor(this.attachmentLineColor),Z=(Z>>1)*2;let J=z[Z-2],j=z[Z-1];for(let _=0,tt=Z;_<tt;_+=2){let nt=z[_],xt=z[_+1];e.line(nt,xt,J,j),J=nt,j=xt;}}}}if(this.drawBoundingBoxes){let v=this.bounds;v.update(s,true),e.setColor(this.aabbColor),e.rect(false,v.minX,v.minY,v.getWidth(),v.getHeight());let w=v.polygons,C=v.boundingBoxes;for(let F=0,V=w.length;F<V;F++){let B=w[F];e.setColor(C[F].color),e.polygon(B,0,B.length);}}if(this.drawPaths){let v=s.slots;for(let w=0,C=v.length;w<C;w++){let F=v[w];if(!F.bone.active)continue;let V=F.getAttachment();if(!(V instanceof Yi))continue;let B=V,z=B.worldVerticesLength,W=this.temp=D.setArraySize(this.temp,z,0);B.computeWorldVertices(F,0,z,W,0,2);let Z=this.pathColor,J=W[2],j=W[3],_=0,tt=0;if(B.closed){e.setColor(Z);let nt=W[0],xt=W[1],gt=W[z-2],pt=W[z-1];_=W[z-4],tt=W[z-3],e.curve(J,j,nt,xt,gt,pt,_,tt,32),e.setColor(nn.LIGHT_GRAY),e.line(J,j,nt,xt),e.line(_,tt,gt,pt);}z-=4;for(let nt=4;nt<z;nt+=6){let xt=W[nt],gt=W[nt+1],pt=W[nt+2],Ct=W[nt+3];_=W[nt+4],tt=W[nt+5],e.setColor(Z),e.curve(J,j,xt,gt,pt,Ct,_,tt,32),e.setColor(nn.LIGHT_GRAY),e.line(J,j,xt,gt),e.line(_,tt,pt,Ct),J=_,j=tt;}}}if(this.drawBones){e.setColor(this.boneOriginColor);for(let v=0,w=p.length;v<w;v++){let C=p[v];n&&n.indexOf(C.data.name)>-1||e.circle(true,C.worldX,C.worldY,3*this.scale,this.boneOriginColor,8);}}if(this.drawClipping){let v=s.slots;e.setColor(this.clipColor);for(let w=0,C=v.length;w<C;w++){let F=v[w];if(!F.bone.active)continue;let V=F.getAttachment();if(!(V instanceof ui))continue;let B=V,z=B.worldVerticesLength,W=this.temp=D.setArraySize(this.temp,z,0);B.computeWorldVertices(F,0,z,W,0,2);for(let Z=0,J=W.length;Z<J;Z+=2){let j=W[Z],_=W[Z+1],tt=W[(Z+2)%W.length],nt=W[(Z+3)%W.length];e.line(j,_,tt,nt);}}}}dispose(){}},Xi=class{constructor(i,e,s){this.vertices=i,this.numVertices=e,this.numFloats=s;}},wr=class Yn{static QUAD_TRIANGLES=[0,1,2,2,3,0];premultipliedAlpha=false;tempColor=new O;tempColor2=new O;vertices;vertexSize=8;twoColorTint=false;renderable=new Xi([],0,0);clipper=new fe;temp=new it;temp2=new it;temp3=new O;temp4=new O;constructor(e,s=true){this.twoColorTint=s,s&&(this.vertexSize+=4),this.vertices=D.newFloatArray(this.vertexSize*1024);}draw(e,s,n=-1,r=-1,m=null){let c=this.clipper,d=this.premultipliedAlpha,p=this.twoColorTint,v=null,w=this.renderable,C,F,V=s.drawOrder,B,z=s.color,W=p?12:8,Z=false;n==-1&&(Z=true);for(let J=0,j=V.length;J<j;J++){let _=c.isClipping()?2:W,tt=V[J];if(!tt.bone.active){c.clipEndWithSlot(tt);continue}if(n>=0&&n==tt.data.index&&(Z=true),!Z){c.clipEndWithSlot(tt);continue}r>=0&&r==tt.data.index&&(Z=false);let nt=tt.getAttachment(),xt;if(nt instanceof Oi){let gt=nt;w.vertices=this.vertices,w.numVertices=4,w.numFloats=_<<2,gt.computeWorldVertices(tt,w.vertices,0,_),F=Yn.QUAD_TRIANGLES,C=gt.uvs,xt=gt.region.texture,B=gt.color;}else if(nt instanceof Li){let gt=nt;w.vertices=this.vertices,w.numVertices=gt.worldVerticesLength>>1,w.numFloats=w.numVertices*_,w.numFloats>w.vertices.length&&(w.vertices=this.vertices=D.newFloatArray(w.numFloats)),gt.computeWorldVertices(tt,0,gt.worldVerticesLength,w.vertices,0,_),F=gt.triangles,xt=gt.region.texture,C=gt.uvs,B=gt.color;}else if(nt instanceof ui){let gt=nt;c.clipStart(tt,gt);continue}else {c.clipEndWithSlot(tt);continue}if(xt){let gt=tt.color,pt=this.tempColor;pt.r=z.r*gt.r*B.r,pt.g=z.g*gt.g*B.g,pt.b=z.b*gt.b*B.b,pt.a=z.a*gt.a*B.a,d&&(pt.r*=pt.a,pt.g*=pt.a,pt.b*=pt.a);let Ct=this.tempColor2;tt.darkColor?(d?(Ct.r=tt.darkColor.r*pt.a,Ct.g=tt.darkColor.g*pt.a,Ct.b=tt.darkColor.b*pt.a):Ct.setFromColor(tt.darkColor),Ct.a=d?1:0):Ct.set(0,0,0,1);let Yt=tt.data.blendMode;if(Yt!=v&&(v=Yt,e.setBlendMode(v,d)),c.isClipping()){c.clipTriangles(w.vertices,F,F.length,C,pt,Ct,p);let Xt=new Float32Array(c.clippedVertices),Ut=c.clippedTriangles;m&&m(Xt,Xt.length,W),e.draw(xt,Xt,Ut);}else {let Xt=w.vertices;if(p)for(let bt=2,Et=0,Ht=w.numFloats;bt<Ht;bt+=W,Et+=2)Xt[bt]=pt.r,Xt[bt+1]=pt.g,Xt[bt+2]=pt.b,Xt[bt+3]=pt.a,Xt[bt+4]=C[Et],Xt[bt+5]=C[Et+1],Xt[bt+6]=Ct.r,Xt[bt+7]=Ct.g,Xt[bt+8]=Ct.b,Xt[bt+9]=Ct.a;else for(let bt=2,Et=0,Ht=w.numFloats;bt<Ht;bt+=W,Et+=2)Xt[bt]=pt.r,Xt[bt+1]=pt.g,Xt[bt+2]=pt.b,Xt[bt+3]=pt.a,Xt[bt+4]=C[Et],Xt[bt+5]=C[Et+1];let Ut=w.vertices.subarray(0,w.numFloats);m&&m(w.vertices,w.numFloats,W),e.draw(xt,Ut,F);}}c.clipEndWithSlot(tt);}c.clipEnd();}getSkeletonClipping(){return this.clipper}},St=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Is=[0,1,2,2,3,0],Es=new O(1,1,1,1),t=class{context;canvas;camera;batcher;twoColorTint=false;batcherShader;shapes;shapesShader;activeRenderer=null;skeletonRenderer;skeletonDebugRenderer;constructor(i,e,s=true){this.canvas=i,this.context=e instanceof Jt?e:new Jt(e),this.twoColorTint=s,this.camera=new Qs(i.width,i.height),this.batcherShader=s?Oe.newTwoColoredTextured(this.context):Oe.newColoredTextured(this.context),this.batcher=new tr(this.context,s),this.shapesShader=Oe.newColored(this.context),this.shapes=new os(this.context),this.skeletonRenderer=new wr(this.context,s),this.skeletonDebugRenderer=new ir(this.context);}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose();}begin(){this.camera.update(),this.enableRenderer(this.batcher);}drawSkeleton(i,e=false,s=-1,n=-1,r=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,i,s,n,r);}drawSkeletonDebug(i,e=false,s){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,i,s);}drawTexture(i,e,s,n,r,m){this.enableRenderer(this.batcher),m||(m=Es);var c=0;St[c++]=e,St[c++]=s,St[c++]=m.r,St[c++]=m.g,St[c++]=m.b,St[c++]=m.a,St[c++]=0,St[c++]=1,this.twoColorTint&&(St[c++]=0,St[c++]=0,St[c++]=0,St[c++]=0),St[c++]=e+n,St[c++]=s,St[c++]=m.r,St[c++]=m.g,St[c++]=m.b,St[c++]=m.a,St[c++]=1,St[c++]=1,this.twoColorTint&&(St[c++]=0,St[c++]=0,St[c++]=0,St[c++]=0),St[c++]=e+n,St[c++]=s+r,St[c++]=m.r,St[c++]=m.g,St[c++]=m.b,St[c++]=m.a,St[c++]=1,St[c++]=0,this.twoColorTint&&(St[c++]=0,St[c++]=0,St[c++]=0,St[c++]=0),St[c++]=e,St[c++]=s+r,St[c++]=m.r,St[c++]=m.g,St[c++]=m.b,St[c++]=m.a,St[c++]=0,St[c++]=0,this.twoColorTint&&(St[c++]=0,St[c++]=0,St[c++]=0,St[c]=0),this.batcher.draw(i,St,Is);}drawTextureUV(i,e,s,n,r,m,c,d,p,v){this.enableRenderer(this.batcher),v||(v=Es);var w=0;St[w++]=e,St[w++]=s,St[w++]=v.r,St[w++]=v.g,St[w++]=v.b,St[w++]=v.a,St[w++]=m,St[w++]=c,this.twoColorTint&&(St[w++]=0,St[w++]=0,St[w++]=0,St[w++]=0),St[w++]=e+n,St[w++]=s,St[w++]=v.r,St[w++]=v.g,St[w++]=v.b,St[w++]=v.a,St[w++]=d,St[w++]=c,this.twoColorTint&&(St[w++]=0,St[w++]=0,St[w++]=0,St[w++]=0),St[w++]=e+n,St[w++]=s+r,St[w++]=v.r,St[w++]=v.g,St[w++]=v.b,St[w++]=v.a,St[w++]=d,St[w++]=p,this.twoColorTint&&(St[w++]=0,St[w++]=0,St[w++]=0,St[w++]=0),St[w++]=e,St[w++]=s+r,St[w++]=v.r,St[w++]=v.g,St[w++]=v.b,St[w++]=v.a,St[w++]=m,St[w++]=p,this.twoColorTint&&(St[w++]=0,St[w++]=0,St[w++]=0,St[w]=0),this.batcher.draw(i,St,Is);}drawTextureRotated(i,e,s,n,r,m,c,d,p){this.enableRenderer(this.batcher),p||(p=Es);let v=e+m,w=s+c,C=-m,F=-c,V=n-m,B=r-c,z=C,W=F,Z=C,J=B,j=V,_=B,tt=V,nt=F,xt=0,gt=0,pt=0,Ct=0,Yt=0,Xt=0,Ut=0,bt=0;if(d!=0){let Ht=I.cosDeg(d),Se=I.sinDeg(d);xt=Ht*z-Se*W,gt=Se*z+Ht*W,Ut=Ht*Z-Se*J,bt=Se*Z+Ht*J,Yt=Ht*j-Se*_,Xt=Se*j+Ht*_,pt=Yt+(xt-Ut),Ct=Xt+(gt-bt);}else xt=z,gt=W,Ut=Z,bt=J,Yt=j,Xt=_,pt=tt,Ct=nt;xt+=v,gt+=w,pt+=v,Ct+=w,Yt+=v,Xt+=w,Ut+=v,bt+=w;var Et=0;St[Et++]=xt,St[Et++]=gt,St[Et++]=p.r,St[Et++]=p.g,St[Et++]=p.b,St[Et++]=p.a,St[Et++]=0,St[Et++]=1,this.twoColorTint&&(St[Et++]=0,St[Et++]=0,St[Et++]=0,St[Et++]=0),St[Et++]=pt,St[Et++]=Ct,St[Et++]=p.r,St[Et++]=p.g,St[Et++]=p.b,St[Et++]=p.a,St[Et++]=1,St[Et++]=1,this.twoColorTint&&(St[Et++]=0,St[Et++]=0,St[Et++]=0,St[Et++]=0),St[Et++]=Yt,St[Et++]=Xt,St[Et++]=p.r,St[Et++]=p.g,St[Et++]=p.b,St[Et++]=p.a,St[Et++]=1,St[Et++]=0,this.twoColorTint&&(St[Et++]=0,St[Et++]=0,St[Et++]=0,St[Et++]=0),St[Et++]=Ut,St[Et++]=bt,St[Et++]=p.r,St[Et++]=p.g,St[Et++]=p.b,St[Et++]=p.a,St[Et++]=0,St[Et++]=0,this.twoColorTint&&(St[Et++]=0,St[Et++]=0,St[Et++]=0,St[Et]=0),this.batcher.draw(i,St,Is);}drawRegion(i,e,s,n,r,m){this.enableRenderer(this.batcher),m||(m=Es);var c=0;St[c++]=e,St[c++]=s,St[c++]=m.r,St[c++]=m.g,St[c++]=m.b,St[c++]=m.a,St[c++]=i.u,St[c++]=i.v2,this.twoColorTint&&(St[c++]=0,St[c++]=0,St[c++]=0,St[c++]=0),St[c++]=e+n,St[c++]=s,St[c++]=m.r,St[c++]=m.g,St[c++]=m.b,St[c++]=m.a,St[c++]=i.u2,St[c++]=i.v2,this.twoColorTint&&(St[c++]=0,St[c++]=0,St[c++]=0,St[c++]=0),St[c++]=e+n,St[c++]=s+r,St[c++]=m.r,St[c++]=m.g,St[c++]=m.b,St[c++]=m.a,St[c++]=i.u2,St[c++]=i.v,this.twoColorTint&&(St[c++]=0,St[c++]=0,St[c++]=0,St[c++]=0),St[c++]=e,St[c++]=s+r,St[c++]=m.r,St[c++]=m.g,St[c++]=m.b,St[c++]=m.a,St[c++]=i.u,St[c++]=i.v,this.twoColorTint&&(St[c++]=0,St[c++]=0,St[c++]=0,St[c]=0),this.batcher.draw(i.page.texture,St,Is);}line(i,e,s,n,r,m){this.enableRenderer(this.shapes),this.shapes.line(i,e,s,n,r);}triangle(i,e,s,n,r,m,c,d,p,v){this.enableRenderer(this.shapes),this.shapes.triangle(i,e,s,n,r,m,c,d,p,v);}quad(i,e,s,n,r,m,c,d,p,v,w,C,F){this.enableRenderer(this.shapes),this.shapes.quad(i,e,s,n,r,m,c,d,p,v,w,C,F);}rect(i,e,s,n,r,m){this.enableRenderer(this.shapes),this.shapes.rect(i,e,s,n,r,m);}rectLine(i,e,s,n,r,m,c){this.enableRenderer(this.shapes),this.shapes.rectLine(i,e,s,n,r,m,c);}polygon(i,e,s,n){this.enableRenderer(this.shapes),this.shapes.polygon(i,e,s,n);}circle(i,e,s,n,r,m=0){this.enableRenderer(this.shapes),this.shapes.circle(i,e,s,n,r,m);}curve(i,e,s,n,r,m,c,d,p,v){this.enableRenderer(this.shapes),this.shapes.curve(i,e,s,n,r,m,c,d,p,v);}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null;}resize(i){let e=this.canvas;var s=window.devicePixelRatio||1,n=Math.round(e.clientWidth*s),r=Math.round(e.clientHeight*s);if((e.width!=n||e.height!=r)&&(e.width=n,e.height=r),this.context.gl.viewport(0,0,e.width,e.height),i===1)this.camera.setViewport(n,r);else if(i===2){let m=e.width,c=e.height,d=this.camera.viewportWidth,p=this.camera.viewportHeight,v=p/d,w=c/m,C=v<w?d/m:p/c;this.camera.setViewport(m*C,c*C);}this.camera.update();}enableRenderer(i){this.activeRenderer!==i&&(this.end(),i instanceof tr?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(Oe.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):i instanceof os?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(Oe.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer);}},h=(i=>(i[i.Stretch=0]="Stretch",i[i.Expand=1]="Expand",i[i.Fit=2]="Fit",i))(h||{}),l,g,M=0,X=1,b=1,x=165,k=108,E=163,P=class{renderer;logo=null;spinner=null;angle=0;fadeOut=0;fadeIn=0;timeKeeper=new vt;backgroundColor=new O(.135,.135,.135,1);tempColor=new O;constructor(i){if(this.renderer=i,this.timeKeeper.maxDelta=9,!g){let e=navigator.userAgent.indexOf("Safari")>-1,s=()=>M++;g=new Image,g.src=H,e||(g.crossOrigin="anonymous"),g.onload=s,l=new Image,l.src=N,e||(l.crossOrigin="anonymous"),l.onload=s;}}dispose(){var i,e;(i=this.logo)==null||i.dispose(),(e=this.spinner)==null||e.dispose();}draw(i=false){if(M<2||i&&this.fadeOut>b)return;this.timeKeeper.update();let e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=this.timeKeeper.delta*200*(1+1.5*Math.pow(e,5));let s=this.tempColor,n=this.renderer,r=n.canvas,m=n.context.gl;if(n.resize(1),n.camera.position.set(r.width/2,r.height/2,0),n.batcher.setBlendMode(0,true),i){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>b)return;s.setFromColor(this.backgroundColor),e=1-this.fadeOut/b,e=1-(e-1)*(e-1),s.a*=e,s.a>0&&(n.camera.zoom=1,n.begin(),n.quad(true,0,0,r.width,0,r.width,r.height,0,r.height,s,s,s,s),n.end());}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(m.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),m.clear(m.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/X,1),s.set(e,e,e,e),this.logo||(this.logo=new ee(n.context,g),this.spinner=new ee(n.context,l)),n.camera.zoom=Math.max(1,E/r.height),n.begin(),n.drawTexture(this.logo,(r.width-x)/2,(r.height-k)/2,x,k,s),this.spinner&&n.drawTextureRotated(this.spinner,(r.width-E)/2,(r.height-E)/2,E,E,E/2,E/2,this.angle,s),n.end();}drawInCoordinates(i,e){if(M<2)return;this.timeKeeper.update();let s=this.renderer;s.batcher.setBlendMode(0,true),this.logo||(this.logo=new ee(s.context,g),this.spinner=new ee(s.context,l));let n=i-x/2,r=e-k/2;s.drawTexture(this.logo,n,r,x,k),this.angle-=this.timeKeeper.delta*500,this.spinner&&s.drawTextureRotated(this.spinner,n,r-25,E,E,E/2,E/2,this.angle);}},N="data:image/png;base64,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",H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAQ7klEQVR42u3da4xdVRUA4D0zd2Y6nZY59DVtZ1puS9+lzC0YAi2UQ8AAQczFpPgA9VIeIQbirRqJ0cBUBVGjDr/QCKSNRSMmpuODxAdxqhgwxkhFjf6Sxh/+UUNVNGJCzR7uTvas7LXX2q9zzp3em6y0gTN3Zu75utZe5+yztxC9V+/Ve5X9En1Vjd7J6SFbLNF7naPw+l2jh7YHMBWssqMHtlsRdim4qsLtIawaPiHEQOLoNrA9iIkQDnRrVA1qD2LZ8ISoxYqKo13sQAtBWBayQWZUAXGRQM9JjCngDVY0UqJNDbQrMcaGmArdUKpIjbYiQLsCZCyIMQBy8QwnilR4Q5AuCpxFYvRFmBLbEiwKwpsSaWycVQGZBKMrwBjA9BhxDe57u2L2hOoKNCbOrgAZitEVYUxoKSMErQvSxYIzCkguRg5EF4AUhqUlhy/YUKSxcRaKsioYOQhD4I0yYxkR3PcJBcuFysmgsXAWBTMJyBCMIQh9kGGxXIXvexCQXbHGAMrBWTbM2CCpMSMLIxehC77lSJwXGth7M0FzoVJIXXDWQnGmhOkL0ic7YhhtWdGGkAuPAjUWGoF4faCmwBkbZmyUqUCyMqMLRA4+E6IsdTjidUHKBYrh9CnpRcH0ypKxsyOGEYNIIeTCOz91OIJ1QYoB5eAMyZo+MFNnyVTZ0YiRC9EGEMOyAgshxErHsL2XK1gOUgwohtM1a5YNM7Rsu4K0ZkcbRm4mpPBRwFZ5hg9eCqkrUB+csWGGogzNkqEgrdnRhpGLkINudaLgwvVB6oqzCjCTZElb2Y4B0gUjBtEG0ARnDRLjjoG9DwcshtQGlIPTljVjwUySLWNkyRCQVHa0ZUUTRAwgF91a33BEy0VKAcVwwqwZC2bqbOlUurllOxQkJzNyINoAYqjWhYYjWg5SCiiG05Q1U8FMjTIoS8YE6YORi1BHtJ4KIcQEEtTXUWAxpK44YVlPBdO1jCdFWTZIE8bVGEYMIRPcZGBw4HKQcoBiOE1ZMzbMgVQwU6JMAdKEEcuIJogUvg1YCCE2gsCO42DlIIVAKZwpYJaSLVNnSU6XjYHUmxhTmXaFaMO3EYkLqMC+FsLlIoVAKZzMrEnBhJeLfLNlKMrYWRIDCbOkFSSVHbHM6AKRC6/ODUewNqQ+OLlZkxpjUmV8MBbMUJSxyzY3Q1IgTRgxiBRCHdem0KDAUkBh9sRwwjEnAXMMgTnKhFlUtiwkS5rGka4g9SaGgxFmRC7AzTCEEBcyA36dDSsXqAtOLkysjGMwY5XxVChjZ0kuSCo7YlkRQsQQYtDEFsegsLoCxUp7Kpgps2UslFGzJGccSYHUmxhOZqwzEZqAbfUMCisHKIZzgsCpl3MTzMwTpi1bYp2477gyFKUxS7qWbdjY2EBS2dGE0QQRA7gNCyHEdhjE8RhUDlBT9tzgmjWZMFNlSy+Urk1OzCyJlW0XkK4YOQh1cDtcgwBrQmoDWkdgboBZE8mYsJSHlnFbJ+5bwmOPJ7lZkirbC8aRsMvmgtTHjBhGE0QbwJ2egUE1ITVlUC5OmDVdYNrKuN70xM6WoShjlW4464dbtiFIWK6x7GjESEHUUe0iYncnbMdQSE0Z1ITTNOb0hRmjjLtmS9dmJ2rp1jtuKktyyrb6YLEMCUHq2dGG0QQRQ7f72kzc+cJecerne8Wvv7JNPHPvenEkz8Sh3UtFc92QyGt9Yko/HgOLAIUZlItTz5ouMF3KuE+2jFLCQ1D6lm6fLMkBacuOJowYRBUXyfjuHjF3NhdnsfjvAfH6E9vFt9XxKgikEKgJZyyYalzOLeMu2bLbULI6bh+QGwmQ+rgRlumdGEQAao+K56bEL2woVUwOiev0r8OAUjiJrMmFCbvykGxZRAmPitK1dHM7bohyMsuyi/I8f0+e57fJYIKEZXpXo9E4mOf5XTKyLLvCBLETF8uY2SKepkC+dpX4T02Ivepr4HvZcOZ5fmee54fyPL+DmTUhzAs6n4n8bN5dr9f3YdkSg8nsxG0lPBVKVpNjG0/aGhzfLDmRZdnumZmZp8+c+cdZPV555fSr7Xb7s0jJ3i5Pcue4MxKkPPkvvXTqz/B92u32l0wYOzG1fkhcd/py8Rcbyq/vFM/KY1WA95h/3zzP71bfU6JsNpsfgj+P/FlbrdaDGExYyuXvLz8H+DudODH700ajcSM3W6Yu4alQ1spCOTd38jcKocTZbh9+9NixY99XJ8AEUkcpo9W64yH197m5k7+bnZ19QT+J09NHntQhwji/Jg58qi6++ofLxJ8gSFneVw2Ka4QQDfh1Ok4dZavVmtZ/nrm5k7/Vf55O1tRhboUw5+ZOvqyOl5+R/FyOHj32PYVU/tloNG5IXcKrhJIzngwp3fNjomazea/64BuNxts646f50lWv169utw9/DmtqdJQyZFaSJVuV6nq9fqMEof5/vV6/CYBqgJDlee+yAbF/+4i4ZWqZeNfaIfHWzn+Hx0KcEuU9+s8jv3ej0bhVlXOZydX/k0iRMeb8P0D5e6tj8zy/Xb9UJIc56h/yqVOnXul8lmuZ2bJslKmbHG7XrbpCmCXFRLvdfqQD6jTS3Jiy5I4OykM6ADV+1Eu1DmV6evopBORexzDi1L+X/HnGxsb2w3Hm9PSRJ9QxWPOTZdmlKht2hi+w6dkox5bqffI8fye3hDteGqKaHVsHXihKl0tB+h0cY+lute54AGRKDCW89LNTRynHb7ChUWVVjetOnJh9EYBUyPZeNCoOtsbFQwdXi4/esELcd+tq8cCHJ8UXp+viy9efLz7AgamjlKXc1AA1m83DoIRDlFubzeb96hhZLVTlgJ24gttutx+ONa50bHZKRenaeTs1OfpAfnr6yOOdE7EZdNwmlKocntXLNkA5JTGq47Ds+Lf94lWsyfnXleLfnIwJUN4DOnNYwuUxh2A3Ln9XULrfK8t3J27Tu3BVwiOjXJqoAy8UZej1yclGo3GTLN+gu3w+z/P3YaWbQqk3Ne12e4ZC+c8rxWsYytcPiP9RpZxCqWDKnxOiBNlyAUpOnGsoh4tA2Rm8X9xqtT6md5wyZmYe+0YRKL+1S/wYQ3n8zctBl5SBUv5djivfjMOPduIzcizeiYfr9foVvUwZG+XCuzibZKnSceZ5/v4QlKp8y7ElhnJlTeTP7BI/kllRYfzrfvHqFy4UX1vaL/aVlSmROzwbwdS29T2UcEwZF+V8ozM2lu1VY812u/15akypGh3TmFJesJbHHD167IdUxz3YJy5bNySuX1mbvy55CbMLtzU6tjGlsdFptVqfUMc0Go23F4wy1l2dSnbfvpMwVPe9WWVLDsrOJaF9MFu2Wq1PqmNkGce67xiXhTjdNwdlvV6/BgxfbPfBfVCetxi6b9/rlCup65QzM48dl2OjLMv26CibzeZ96sTIzEFdpwQXz9U1yrtVlpR/Zll2Fec65Y6l4pbbx8XHH9kknvzJlPjlHy8Tp29eKT5ou0aJoIT3w3dBlLDzVpfAJEZ1XOdaJZxnOSlvPMjPzxFljIvng914RwebsjYO7uhMyHu46sOfnf3Oz2TXDW6vvYxdFoIXz3Wc8J5zs9n8iOn2IrxTc2BM3Glqdp7dI553uaOjxrhwcob+MyuUpjs6WZZdon8OcigjPx8V+u+GTWFTSWEx3WYcdJ225jNDSE4q0GHCzlueHOyujn6bUWYgeb9ZZUaQPe+GzQ+Gc8+oOGhC+c1d4gfI16n3XDAhQ7+9qE9l01E2Go132GYKyXE1NiFDTcpoNpv3LOYJGWXNErJNW9sEp63p2RKiVPMn1bS1DgxsyhoGdGpmizj+xtXiDYnx7/vFmce3iWdW1cTVGEY4hQ2ZW0nNq8Qm/M6XbXm3S100lwGedFybuvNOibLI+ZS2ceU4eAxiEuvCkfmU8ycToDxETe6FgCBQHeqyAbFvfEhcO7BwDuXFCEbTZF840XeHK0jYcbs2OIGle0mVJ/mmnClEPQqxyTY5I8/zFhif7fSZee4bnrPOU4AssnRXHaVTCTd14dRDY3UbTIiSeFhsN/aMjgnqthFx880rxX3yATL5p3y4LPXzOaBkUyBjZMlYpbtQlIOBD475ZEusjMNSvkXe6VEoJVDkeZ2dzIfIFsRzU+JF2OyM9M9fTC/6SUYOyFQPjQ2nWiUjxnPfw5EeHqMWIqAeIFsAU847lJM2JM6xsewt1OIDLs99P7ZFHNdB/upS8XtPiD7PfLuCXJNolYyyFiNI/Zit65ItrOVafFbHcFohY7hPTN21Tjz4uc3iqfsnxKdX1MTl1OoYRFaMsToGB6Trw2JFP/OdZC2hJZ7ZkrMoAbbSGmelDJ91hFKuJeS7jlBMkJnrAqqJlgMUZS/dArPlGHNdSg5M3xXXtvquuEatvIYtDRhpxbUJuIgqsU5lGWtUploK0KuEU9mSW8YpmFQ556xNuYW7NiW13B+FkMiKHIy+C6eGgBxJvMR0oSv5hi6+z4HJyZoU0M2RVvDlrOQbcxVfX5AhZbuqy0v7ZstYMLHlAVlLTF9ALLbvu9Y5Zylpn/XOsd0ibIvxr2KCLHpp6SCUIdnSZSF+WzfOhem6GD+1KwR3Z4jNjrtDpNoZwmWd8yrupZN6Hx3fbMmFSe0Swdq2ZIPjxk1112Duo8OBGLrBkw/IoncdK2XHsdC9dHz204m50xh3tzFq1zFqtzHXrfCw7OgDsqyNnZLszVijsmXgrmNcmGtS78lIoMX2aJz03fKO2sDJddPQSCDPiQ1DfWBycY6XtXstc2PQKuxgG2McmXTPb9/9vmuJYXKyJrWjbeg+3xPM4O73nWqvbyw7xgZZSJbEUBa157cNJjdr2vb+5iA1YV3HxYscj30PDCEHIgcjtfm8K8hSsmRotkwFk5s1TTghUAopB6xrjHMBBkI0YYTZ0dZlxwLpkiWDULpmy5gwqayZgZNkA7oKQQCxctByYg0XIIEQQuRitGVHblMTA2ShKGPDpC6wu+DEgJqg2rDGDBtAF4Q6RAojp1xXGmSMbImVcR+YWNY04eQCtUG1ofUJ2/uvcETIgUhhdAE5GAlkKShjwHTNmhhODKgJqQ2sC14uOgyfD0IbRF+MlQaZAiZWyn2yJsTJATqGnHQO2Jhh+xlsACFCG0QbRtdyzQFZCZSxYPpmTS7Q5cjJHYNBYIkZpu99HoUQ/o4QIYSIZUZfjJ4ZMjZI32wZBDMU5yhy8pZTULl4XYP5fagMyEVoy4oupTpGduwnkloSlKEwY+AcQU4MhRTD6ovXBRwFzwWgCSEF0QVjJUGmgEllTS5OLlCIlIN1mS9mx/cZ5eLDALpCTI2RAhkTZQqYoTgpoCPECbaBHQ2ETL3PUl98ECAXYijG0OyYAmQoTG7W5ODkAF1CnVgm2JQx4okPA+gCMTbGskBGgRmaOblAh5GTORIrfKFx4VH4EIAxIXIxlg2SBbMvECY3e7oApbDaIgQu5/2HmeEKEINYiwSRi7EQkLFgumZOCuggctKGI4ULZN/vMeSLj0AYMytWEqMLzFg4fYDaoKaC6wvOFR4FkIPQFaILxrJAOsHsc/zlfYDWXE8qF22s8Pz5KHxcgEVALBtjJXBSSEOwFhk1Zgy4hitCT4hVw+gFs8/zwxqIBbUgyK7fcyA0PD9XX4iVxhiC0xdof6STWCsoBmKF7+cVCWFXQYyBMxRpf+STX1b0x45AhN0OMSrOGEirhrY/dfQAdjvS7oy+WCF6r1RIFxXWvlTRg1YVqFWBmxZbD99ig9pt0YPQw9rD1nstVri9V+/Ve3XrS/wfim4P5fIFxLoAAAAASUVORK5CYII=",K=class{constructor(i,e){this.config=e,e.pathPrefix||(e.pathPrefix=""),e.app||(e.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{},dispose:()=>{}}),e.webglConfig||(e.webglConfig={alpha:true}),this.htmlCanvas=i,this.context=new Jt(i,e.webglConfig),this.renderer=new t(i,this.context),this.gl=this.context.gl,this.assetManager=new he(this.context,e.pathPrefix),this.input=new Ti(i),e.app.loadAssets&&e.app.loadAssets(this);let s=()=>{this.disposed||(requestAnimationFrame(s),this.time.update(),e.app.update&&e.app.update(this,this.time.delta),e.app.render&&e.app.render(this));},n=()=>{if(!this.disposed){if(this.assetManager.isLoadingComplete()){this.assetManager.hasErrors()?e.app.error&&e.app.error(this,this.assetManager.getErrors()):(e.app.initialize&&e.app.initialize(this),s());return}requestAnimationFrame(n);}};requestAnimationFrame(n);}context;time=new vt;htmlCanvas;gl;renderer;assetManager;input;disposed=false;clear(i,e,s,n){this.gl.clearColor(i,e,s,n),this.gl.clear(this.gl.COLOR_BUFFER_BIT);}dispose(){this.config.app.dispose&&this.config.app.dispose(this),this.disposed=true;}};return f(u)})(),cs=Un;var Wn={"3.8webgl":An,"4.0webgl":ks,"4.2webgl":cs},an=Wn;function Gn(Y,lt,o){return lt.endsWith(".skel")?Y.loadBinary(lt):Y.loadJson(lt),Y.loadTextureAtlas(o),Y}function Pn(Y,lt,o,T){let y=new lt.AtlasAttachmentLoader(Y.get(T)),a;o.endsWith(".skel")?a=new lt.SkeletonBinary(y):a=new lt.SkeletonJson(y);let f=a.readSkeletonData(Y.get(o)),u=new lt.Skeleton(f),A=new lt.AnimationStateData(f),S=new lt.AnimationState(A);return {skeleton:u,animationState:S}}var on=class{version;constructor(lt){this.version=lt;}},Fr=class extends on{assetManager;sceneRenderer;constructor(lt){super(lt);}async loadSkeleton(lt,o){Gn(this.assetManager,lt,o),await this.assetManager.loadAll();}},Yr=class extends Fr{assetManager;sceneRenderer;constructor(lt){super("4.2webgl"),this.assetManager=new cs.AssetManager(lt.gl),this.sceneRenderer=new cs.SceneRenderer(lt.canvas,lt.gl);}async loadSkeleton(lt,o){return await super.loadSkeleton(lt,o),Pn(this.assetManager,cs,lt,o)}drawSkeleton(lt,o,T,y){lt.updateWorldTransform(cs.Physics.update),o.update(),T.update(o.delta),T.apply(lt);let a=this.sceneRenderer.camera;console.log(a.viewportWidth,a.viewportHeight),a.setViewport(...y),this.sceneRenderer.begin(),this.sceneRenderer.drawSkeleton(lt),this.sceneRenderer.end();}},Pr=class extends Fr{assetManager;sceneRenderer;spine;constructor(lt){super("4.0webgl"),this.assetManager=new ks.AssetManager(lt.gl),this.sceneRenderer=new ks.SceneRenderer(lt.canvas,lt.gl);}async loadSkeleton(lt,o){return await super.loadSkeleton(lt,o),Pn(this.assetManager,ks,lt,o)}drawSkeleton(lt,o,T,y){lt.updateWorldTransform(),o.update(),T.update(o.delta),T.apply(lt),this.sceneRenderer.camera.setViewport(...y),this.sceneRenderer.begin(),this.sceneRenderer.drawSkeleton(lt),this.sceneRenderer.end();}};function hn(Y){var lt;return "prototype"in Y&&(Y.prototype=Object.create(null)),Object.setPrototypeOf(Y,Object.create(null)),(Object.getPrototypeOf(Y).constructor||(lt=Y==null?void 0:Y.prototype)!=null&&lt.constructor)&&console.warn("clean失败",Y),Y}function qi(Y){return Y instanceof Function?Y():Y}var Ys=class{replace;valueOf;toString;constructor(lt,o,T){let y={replace:hn(()=>qi(lt).innerHTML),valueOf:hn(()=>qi(o)),toString:hn(()=>qi(T))};Object.assign(this,y),Object.freeze(this);}};function Ln(Y){let lt=Y.visualReport;Y.visualReport=function(T,y){if(y instanceof Ys){let a=this.constructor;this.emit(a.VISUAL_REPORT,{id:T,value:y});}else lt.call(this,T,y);};let o=Y.requestUpdateMonitor;Y.requestUpdateMonitor=function(T){let y=T.get("value");y instanceof Ys?o.call(this,T.set("value",y.toString())):o.call(this,T);};}function zn(Y,lt,o=[]){let T=document.createElement("div"),y=[],a=document.createElement("span");return a.style.fontSize="150%",a.innerText=qi(Y),a.style.color=qi(lt),y.push(a),y=y.concat(qi(o)),y.forEach((f,u)=>{T.appendChild(f);}),T}var Lr=class extends Ys{constructor(lt,o,T,y,a){function f(){let u=[],A=qi(T);for(let O in A){let I=document.createElement("div"),U=document.createElement("span");U.innerText=O;let L=document.createElement("span");L.innerText=A[O],I.appendChild(U),I.appendChild(L),u.push(I);}return zn(lt,o,u)}super(f,y,a);}},Ps=class extends Lr{constructor(lt,o,T){function y(){return {[o("SpineSkinReport.id")]:lt.id,[o("SpineSkinReport.version")]:lt.manager.version,[o("SpineSkinReport.nameText")]:T}}super(()=>o("SpineSkinReport.type"),"blue",y,lt,()=>o("SpineSkinReport.monitor",{id:lt.id,version:lt.manager.version,name:T}));}},Br=class extends Lr{constructor(lt,o,T){function y(){return {[o("SpineSkeletonReport.nameText")]:T,[o("SpineSkeletonReport.boneNum")]:lt.bones.length}}super(()=>o("SpineSkeletonReport.type"),"green",y,lt,()=>`(spine骨架) 名称为${T}, 共有${lt.bones.length}个骨骼`);}};function Bn(Y,lt,o){let T;delete lt.Blocks[Y],Object.defineProperty(lt.Blocks,Y,{set(y){T=y;},get(){return T||(T={init(){return this}}),o(T)},configurable:true});}var{BlockType:hr,ArgumentType:Vr}=Scratch,Vn="https://m.ccw.site/creator-college/cover/e080227a1e199d9107f2d2b8859a35f0.png",Zn="https://m.ccw.site/creator-college/cover/953085977e001622fd7153eb7c9ad646.png",ln=class{_skel;_atlas;version;constructor(lt){this.version=lt.version,this.skel=lt.skel,this.atlas=lt.atlas;}set skel(lt){lt.startsWith("http")?this._skel=lt:this._skel=`https://m.ccw.site/user_projects_assets/${lt}`;}get skel(){return this._skel}set atlas(lt){lt.startsWith("http")?this._atlas=lt:this._atlas=`https://m.ccw.site/user_projects_assets/${lt}`;}get atlas(){return this._atlas}toJSON(){return {skel:this.skel,atlas:this.atlas,version:this.version}}},cn="spineAnimation",dn=class extends Tr{translate;runtime;managers;renderer;constructor(lt){console.log(lt),super(cn,"foo"),this.runtime=lt,console.log(this),this.translate=xn(lt),this.renderer=lt.renderer,wn(this.runtime),Ln(this.runtime),this.setCustomBlock(),this.managers={"4.0webgl":new Pr(this.renderer),"4.2webgl":new Yr(this.renderer)};}setCustomBlock(){let lt=this,o=lt.runtime.scratchBlocks;Bn(`${cn}_${lt.getSthOf.name}`,this.runtime.scratchBlocks,function(T){return {init(){T.init.call(this),console.log("getSth",this);this.appendDummyInput().appendField(new o.FieldDropdown([["Foo","Bar"]]),"KEY");}}});}getInfo(){return this.info.name=this.translate("extensionName"),this.info.blockIconURI=Vn,this.info.color1="#272D39",this.info.color2="#20272F",this.info.blocks=[{opcode:this.setSkinSkeleton.name,text:this.translate("setSkinSkeleton.text"),blockType:hr.COMMAND,arguments:{TARGET_NAME:{type:Vr.STRING,menu:"sprite_menu"},SKELETON:{type:Vr.NUMBER,defaultValue:0}}},{opcode:this.loadSkeleton.name,text:this.translate("loadSkeleton.text"),blockType:hr.REPORTER,arguments:{CONFIG:{type:Vr.STRING,menu:"skeleton_menu"},NAME:{type:Vr.STRING,defaultValue:"hina"}}},{opcode:this.getSkeletonInSkin.name,text:this.translate("getSkeletonInSkin.text"),blockType:hr.REPORTER,arguments:{SKIN:{type:null}}},{opcode:this.getSthOf.name,text:"获取[DATA]的",blockType:hr.REPORTER,arguments:{DATA:{type:null}}},{func:this.initUI.name,blockType:hr.BUTTON,text:"abcd"}],this.info.menus={sprite_menu:{items:this.spriteMenu.name,acceptReporters:true},skeleton_menu:{items:this.skeletonMenu.name,acceptReporters:true}},this.info}spriteMenu(){var o;let lt=[{text:this.translate("spriteMenu.currentTarget"),value:"__this__"}];for(let T of this.runtime.targets)T.isSprite()&&T.id!==((o=this.runtime.getEditingTarget())==null?void 0:o.id)&&lt.push({text:T.sprite.name,value:T.sprite.name});return lt}skeletonMenu(){let lt=[];return lt.push({text:"test",value:JSON.stringify(new ln({skel:"spine/Hina_home.skel",atlas:"spine/Hina_home.atlas",version:"4.2webgl"}))}),lt}setSkinSkeleton(lt,o){let{TARGET_NAME:T,SKELETON:y}=lt;console.log(y);let a;if(y instanceof Ps?a=y.valueOf().id:a=Number(y.toString()),isNaN(a)){console.error(this.translate("setSkinSkeleton.skeletonIdError"));return}let f;T==="__this__"?f=o.target:(f=this.runtime.targets.find(O=>O.isSprite()&&O.getName()===T),f||console.warn(this.translate("setSkinSkeleton.characterNotFound",{name:T})));let u=f.drawableID,A=this.runtime.renderer._allDrawables[u],S=this.runtime.renderer._allSkins[a];S&&(A.skin=S);}async loadSkeleton(lt){let{CONFIG:o,NAME:T}=lt,{skel:y,atlas:a,version:f}=JSON.parse(o);if(!(y&&a&&f in an))throw new Error(this.translate("loadSkeleton.configError"));let u=this.managers[f],{skeleton:A,animationState:S}=await u.loadSkeleton(y,a);console.log(A,S);let O=this.renderer._nextSkinId++,I=this.renderer._allSkins[O]=new or(O,this.renderer,u,A,S,new an[f].TimeKeeper,T);return console.log(I),new Ps(I,this.translate,T)}initUI(){let lt=new Ir(this.runtime.storage,"spineAnimation");lt.createUI(),console.log(lt);}getSkeletonInSkin(lt){let{SKIN:o}=lt;if(o&&o instanceof Ps){let T=o.valueOf();return new Br(T.skeleton,this.translate,T.name)}return console.error(this.translate("getSkeletonInSkin.skinError")),""}getSthOf(lt){console.log(lt);}};pn(dn,{info:{name:"spineAnimation.name",description:"spineAnimation.desc",extensionId:cn,collaboratorList:[{collaborator:"孟夫子驾到@ccw",collaboratorURL:"https://www.ccw.site/student/63c2807d669fa967f17f5559"},{collaborator:"乌龙茶速递@ccw",collaboratorURL:"https://www.ccw.site/student/68dd004586bbc77f84e309ac"}],iconURL:Zn,insetIconURL:Vn},l10n:{"zh-cn":{"spineAnimation.name":nr.extensionName,"spineAnimation.desc":nr.description},en:{"spineAnimation.name":ar.extensionName,"spineAnimation.desc":ar.description}}});
})();